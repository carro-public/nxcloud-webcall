!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.NXW=t():e.NXW=t()}(this,(function(){return function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=3)}({3:function(e,t,s){"use strict";s.r(t),s.d(t,"NxwStatic",(function(){return Dt})),s.d(t,"ToneFlag",(function(){return gt})),s.d(t,"getAudio",(function(){return pt})),s.d(t,"getButton",(function(){return ft})),s.d(t,"getButtons",(function(){return mt})),s.d(t,"getDiv",(function(){return vt})),s.d(t,"getInput",(function(){return wt})),s.d(t,"setInput",(function(){return Tt})),s.d(t,"getSpan",(function(){return yt})),s.d(t,"getVideo",(function(){return bt})),s.d(t,"getUrlParam",(function(){return Et})),s.d(t,"getJsSrcParam",(function(){return St})),s.d(t,"assignStream",(function(){return Rt})),s.d(t,"getIP",(function(){return It})),s.d(t,"objectId",(function(){return qt}));var i,r,n={};s.r(n),s.d(n,"stripTcpCandidates",(function(){return c})),s.d(n,"stripTelephoneEvent",(function(){return h})),s.d(n,"cleanJitsiSdpImageattr",(function(){return d})),s.d(n,"stripG722",(function(){return l})),s.d(n,"stripRtpPayload",(function(){return g})),s.d(n,"stripVideo",(function(){return u})),s.d(n,"addMidLines",(function(){return p})),s.d(n,"holdModifier",(function(){return f})),s.d(n,"defaultMediaStreamFactory",(function(){return m})),s.d(n,"defaultPeerConnectionConfiguration",(function(){return v})),s.d(n,"defaultSessionDescriptionHandlerFactory",(function(){return T})),s.d(n,"SessionDescriptionHandler",(function(){return w})),s.d(n,"SimpleUser",(function(){return lt})),s.d(n,"Transport",(function(){return Ye})),function(e){e.Initial="Initial",e.Establishing="Establishing",e.Established="Established",e.Terminating="Terminating",e.Terminated="Terminated"}(i||(i={})),function(e){e.Required="Required",e.Supported="Supported",e.Unsupported="Unsupported"}(r||(r={}));const o={"100rel":!0,199:!0,answermode:!0,"early-session":!0,eventlist:!0,explicitsub:!0,"from-change":!0,"geolocation-http":!0,"geolocation-sip":!0,gin:!0,gruu:!0,histinfo:!0,ice:!0,join:!0,"multiple-refer":!0,norefersub:!0,nosub:!0,outbound:!0,path:!0,policy:!0,precondition:!0,pref:!0,privacy:!0,"recipient-list-invite":!0,"recipient-list-message":!0,"recipient-list-subscribe":!0,replaces:!0,"resource-priority":!0,"sdp-anat":!0,"sec-agree":!0,tdialog:!0,timer:!0,uui:!0},a=(e,t)=>{const s=[],i=e.split(/\r\n/);let r;for(let e=0;e<i.length;){const n=i[e];if(/^m=(?:audio|video)/.test(n))r={index:e,stripped:[]},s.push(r);else if(r){const s=/^a=rtpmap:(\d+) ([^/]+)\//.exec(n);if(s&&t===s[2]){i.splice(e,1),r.stripped.push(s[1]);continue}}e++}for(const e of s){const t=i[e.index].split(" ");for(let s=3;s<t.length;)-1===e.stripped.indexOf(t[s])?s++:t.splice(s,1);i[e.index]=t.join(" ")}return i.join("\r\n")};function c(e){return e.sdp=(e.sdp||"").replace(/^a=candidate:\d+ \d+ tcp .*?\r\n/gim,""),Promise.resolve(e)}function h(e){return e.sdp=a(e.sdp||"","telephone-event"),Promise.resolve(e)}function d(e){return e.sdp=(e.sdp||"").replace(/^(a=imageattr:.*?)(x|y)=\[0-/gm,"$1$2=[1:"),Promise.resolve(e)}function l(e){return e.sdp=a(e.sdp||"","G722"),Promise.resolve(e)}function g(e){return t=>(t.sdp=a(t.sdp||"",e),Promise.resolve(t))}function u(e){return e.sdp=((e,t)=>{const s=new RegExp("m="+t+".*$","gm"),i=new RegExp("^a=group:.*$","gm");if(s.test(e)){let s;const r=(e=e.split(/^m=/gm).filter(e=>{if(e.substr(0,t.length)===t){if(s=e.match(/^a=mid:.*$/gm),s){const e=s[0].match(/:.+$/g);e&&(s=e[0].substr(1))}return!1}return!0}).join("m=")).match(i);if(r&&1===r.length){let t=r[0];const n=new RegExp(" *"+s+"[^ ]*","g");t=t.replace(n,""),e=e.split(i).join(t)}}return e})(e.sdp||"","video"),Promise.resolve(e)}function p(e){let t=e.sdp||"";if(-1===t.search(/^a=mid.*$/gm)){const s=t.match(/^m=.*$/gm),i=t.split(/^m=.*$/gm);s&&s.forEach((e,t)=>{s[t]=e+"\na=mid:"+t}),i.forEach((e,t)=>{s&&s[t]&&(i[t]=e+s[t])}),t=i.join(""),e.sdp=t}return Promise.resolve(e)}function f(e){if(!e.sdp||!e.type)throw new Error("Invalid SDP");let t=e.sdp;const s=e.type;return t&&(/a=(sendrecv|sendonly|recvonly|inactive)/.test(t)?(t=t.replace(/a=sendrecv\r\n/g,"a=sendonly\r\n"),t=t.replace(/a=recvonly\r\n/g,"a=inactive\r\n")):t=t.replace(/(m=[^\r]*\r\n)/g,"$1a=sendonly\r\n")),Promise.resolve({sdp:t,type:s})}function m(){return e=>e.audio||e.video?void 0===navigator.mediaDevices?Promise.reject(new Error("Media devices not available in insecure contexts.")):navigator.mediaDevices.getUserMedia.call(navigator.mediaDevices,e):Promise.resolve(new MediaStream)}function v(){return{bundlePolicy:"balanced",certificates:void 0,iceCandidatePoolSize:0,iceServers:[{urls:"stun:stun.l.google.com:19302"}],iceTransportPolicy:"all",peerIdentity:void 0,rtcpMuxPolicy:"require"}}class w{constructor(e,t,s){e.debug("SessionDescriptionHandler.constructor"),this.logger=e,this.mediaStreamFactory=t,this.sessionDescriptionHandlerConfiguration=s,this._localMediaStream=new MediaStream,this._remoteMediaStream=new MediaStream,this._peerConnection=new RTCPeerConnection(null==s?void 0:s.peerConnectionConfiguration),this.initPeerConnectionEventHandlers()}get localMediaStream(){return this._localMediaStream}get remoteMediaStream(){return this._remoteMediaStream}get dataChannel(){return this._dataChannel}get peerConnection(){return this._peerConnection}get peerConnectionDelegate(){return this._peerConnectionDelegate}set peerConnectionDelegate(e){this._peerConnectionDelegate=e}static dispatchAddTrackEvent(e,t){e.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:t}))}static dispatchRemoveTrackEvent(e,t){e.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:t}))}close(){this.logger.debug("SessionDescriptionHandler.close"),void 0!==this._peerConnection&&(this._peerConnection.getReceivers().forEach(e=>{e.track&&e.track.stop()}),this._peerConnection.getSenders().forEach(e=>{e.track&&e.track.stop()}),this._dataChannel&&this._dataChannel.close(),this._peerConnection.close(),this._peerConnection=void 0)}getDescription(e,t){var s,i;if(this.logger.debug("SessionDescriptionHandler.getDescription"),void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=null==e?void 0:e.onDataChannel;const r=null===(s=null==e?void 0:e.offerOptions)||void 0===s?void 0:s.iceRestart,n=void 0===(null==e?void 0:e.iceGatheringTimeout)?null===(i=this.sessionDescriptionHandlerConfiguration)||void 0===i?void 0:i.iceGatheringTimeout:null==e?void 0:e.iceGatheringTimeout;return this.getLocalMediaStream(e).then(()=>this.updateDirection(e)).then(()=>this.createDataChannel(e)).then(()=>this.createLocalOfferOrAnswer(e)).then(e=>this.applyModifiers(e,t)).then(e=>this.setLocalSessionDescription(e)).then(()=>this.waitForIceGatheringComplete(r,n)).then(()=>this.getLocalSessionDescription()).then(e=>({body:e.sdp,contentType:"application/sdp"})).catch(e=>{throw this.logger.error("SessionDescriptionHandler.getDescription failed - "+e),e})}hasDescription(e){return this.logger.debug("SessionDescriptionHandler.hasDescription"),"application/sdp"===e}sendDtmf(e,t){if(this.logger.debug("SessionDescriptionHandler.sendDtmf"),void 0===this._peerConnection)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - peer connection closed"),!1;const s=this._peerConnection.getSenders();if(0===s.length)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - no senders"),!1;const i=s[0].dtmf;if(!i)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - no DTMF sender"),!1;const r=null==t?void 0:t.duration,n=null==t?void 0:t.interToneGap;try{i.insertDTMF(e,r,n)}catch(e){return this.logger.error(e),!1}return this.logger.log("SessionDescriptionHandler.sendDtmf sent via RTP: "+e.toString()),!0}setDescription(e,t,s){if(this.logger.debug("SessionDescriptionHandler.setDescription"),void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=null==t?void 0:t.onDataChannel;const i="have-local-offer"===this._peerConnection.signalingState?"answer":"offer";return this.getLocalMediaStream(t).then(()=>this.applyModifiers({sdp:e,type:i},s)).then(e=>this.setRemoteSessionDescription(e)).catch(e=>{throw this.logger.error("SessionDescriptionHandler.setDescription failed - "+e),e})}applyModifiers(e,t){return this.logger.debug("SessionDescriptionHandler.applyModifiers"),t&&0!==t.length?t.reduce((e,t)=>e.then(t),Promise.resolve(e)).then(e=>{if(this.logger.debug("SessionDescriptionHandler.applyModifiers - modified sdp"),!e.sdp||!e.type)throw new Error("Invalid SDP.");return{sdp:e.sdp,type:e.type}}):Promise.resolve(e)}createDataChannel(e){if(void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));if(!0!==(null==e?void 0:e.dataChannel))return Promise.resolve();if(this._dataChannel)return Promise.resolve();switch(this._peerConnection.signalingState){case"stable":this.logger.debug("SessionDescriptionHandler.createDataChannel - creating data channel");try{return this._dataChannel=this._peerConnection.createDataChannel((null==e?void 0:e.dataChannelLabel)||"",null==e?void 0:e.dataChannelOptions),this.onDataChannel&&this.onDataChannel(this._dataChannel),Promise.resolve()}catch(e){return Promise.reject(e)}case"have-remote-offer":return Promise.resolve();case"have-local-offer":case"have-local-pranswer":case"have-remote-pranswer":case"closed":default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}}createLocalOfferOrAnswer(e){if(void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));switch(this._peerConnection.signalingState){case"stable":return this.logger.debug("SessionDescriptionHandler.createLocalOfferOrAnswer - creating SDP offer"),this._peerConnection.createOffer(null==e?void 0:e.offerOptions);case"have-remote-offer":return this.logger.debug("SessionDescriptionHandler.createLocalOfferOrAnswer - creating SDP answer"),this._peerConnection.createAnswer(null==e?void 0:e.answerOptions);case"have-local-offer":case"have-local-pranswer":case"have-remote-pranswer":case"closed":default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}}getLocalMediaStream(e){if(this.logger.debug("SessionDescriptionHandler.getLocalMediaStream"),void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));let t=Object.assign({},null==e?void 0:e.constraints);if(this.localMediaStreamConstraints){if(t.audio=t.audio||this.localMediaStreamConstraints.audio,t.video=t.video||this.localMediaStreamConstraints.video,JSON.stringify(this.localMediaStreamConstraints.audio)===JSON.stringify(t.audio)&&JSON.stringify(this.localMediaStreamConstraints.video)===JSON.stringify(t.video))return Promise.resolve()}else void 0===t.audio&&void 0===t.video&&(t={audio:!0});return this.localMediaStreamConstraints=t,this.mediaStreamFactory(t,this).then(e=>this.setLocalMediaStream(e))}setLocalMediaStream(e){if(this.logger.debug("SessionDescriptionHandler.setLocalMediaStream"),!this._peerConnection)throw new Error("Peer connection undefined.");const t=this._peerConnection,s=this._localMediaStream,i=[],r=e=>{const r=e.kind;if("audio"!==r&&"video"!==r)throw new Error(`Unknown new track kind ${r}.`);const n=t.getSenders().find(e=>e.track&&e.track.kind===r);n?i.push(new Promise(e=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - replacing sender ${r} track`),e()}).then(()=>n.replaceTrack(e).then(()=>{const t=s.getTracks().find(e=>e.kind===r);t&&(t.stop(),s.removeTrack(t),w.dispatchRemoveTrackEvent(s,t)),s.addTrack(e),w.dispatchAddTrackEvent(s,e)}).catch(e=>{throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to replace sender ${r} track`),e}))):i.push(new Promise(e=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - adding sender ${r} track`),e()}).then(()=>{try{t.addTrack(e,s)}catch(e){throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to add sender ${r} track`),e}s.addTrack(e),w.dispatchAddTrackEvent(s,e)}))},n=e.getAudioTracks();n.length&&r(n[0]);const o=e.getVideoTracks();return o.length&&r(o[0]),i.reduce((e,t)=>e.then(()=>t),Promise.resolve())}getLocalSessionDescription(){if(this.logger.debug("SessionDescriptionHandler.getLocalSessionDescription"),void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));const e=this._peerConnection.localDescription;return e?Promise.resolve(e):Promise.reject(new Error("Failed to get local session description"))}setLocalSessionDescription(e){return this.logger.debug("SessionDescriptionHandler.setLocalSessionDescription"),void 0===this._peerConnection?Promise.reject(new Error("Peer connection closed.")):this._peerConnection.setLocalDescription(e)}setRemoteSessionDescription(e){if(this.logger.debug("SessionDescriptionHandler.setRemoteSessionDescription"),void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));const t=e.sdp;let s;switch(this._peerConnection.signalingState){case"stable":s="offer";break;case"have-local-offer":s="answer";break;case"have-local-pranswer":case"have-remote-offer":case"have-remote-pranswer":case"closed":default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}return t?this._peerConnection.setRemoteDescription({sdp:t,type:s}):(this.logger.error("SessionDescriptionHandler.setRemoteSessionDescription failed - cannot set null sdp"),Promise.reject(new Error("SDP is undefined")))}setRemoteTrack(e){this.logger.debug("SessionDescriptionHandler.setRemoteTrack");const t=this._remoteMediaStream;t.getTrackById(e.id)?this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - have remote ${e.kind} track`):"audio"===e.kind?(this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - adding remote ${e.kind} track`),t.getAudioTracks().forEach(e=>{e.stop(),t.removeTrack(e),w.dispatchRemoveTrackEvent(t,e)}),t.addTrack(e),w.dispatchAddTrackEvent(t,e)):"video"===e.kind&&(this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - adding remote ${e.kind} track`),t.getVideoTracks().forEach(e=>{e.stop(),t.removeTrack(e),w.dispatchRemoveTrackEvent(t,e)}),t.addTrack(e),w.dispatchAddTrackEvent(t,e))}updateDirection(e){if(void 0===this._peerConnection)return Promise.reject(new Error("Peer connection closed."));switch(this._peerConnection.signalingState){case"stable":this.logger.debug("SessionDescriptionHandler.updateDirection - setting offer direction");{const t=t=>{switch(t){case"inactive":case"recvonly":return(null==e?void 0:e.hold)?"inactive":"recvonly";case"sendonly":case"sendrecv":return(null==e?void 0:e.hold)?"sendonly":"sendrecv";case"stopped":return"stopped";default:throw new Error("Should never happen")}};this._peerConnection.getTransceivers().forEach(e=>{if(e.direction){const s=t(e.direction);e.direction!==s&&(e.direction=s)}})}break;case"have-remote-offer":this.logger.debug("SessionDescriptionHandler.updateDirection - setting answer direction");{const t=(()=>{const e=this._peerConnection.remoteDescription;if(!e)throw new Error("Failed to read remote offer");const t=/a=sendrecv\r\n|a=sendonly\r\n|a=recvonly\r\n|a=inactive\r\n/.exec(e.sdp);if(t)switch(t[0]){case"a=inactive\r\n":return"inactive";case"a=recvonly\r\n":return"recvonly";case"a=sendonly\r\n":return"sendonly";case"a=sendrecv\r\n":return"sendrecv";default:throw new Error("Should never happen")}return"sendrecv"})(),s=(()=>{switch(t){case"inactive":return"inactive";case"recvonly":return"sendonly";case"sendonly":return(null==e?void 0:e.hold)?"inactive":"recvonly";case"sendrecv":return(null==e?void 0:e.hold)?"sendonly":"sendrecv";default:throw new Error("Should never happen")}})();this._peerConnection.getTransceivers().forEach(e=>{e.direction&&"stopped"!==e.direction&&e.direction!==s&&(e.direction=s)})}break;case"have-local-offer":case"have-local-pranswer":case"have-remote-pranswer":case"closed":default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}return Promise.resolve()}iceGatheringComplete(){this.logger.debug("SessionDescriptionHandler.iceGatheringComplete"),void 0!==this.iceGatheringCompleteTimeoutId&&(this.logger.debug("SessionDescriptionHandler.iceGatheringComplete - clearing timeout"),clearTimeout(this.iceGatheringCompleteTimeoutId),this.iceGatheringCompleteTimeoutId=void 0),void 0!==this.iceGatheringCompletePromise&&(this.logger.debug("SessionDescriptionHandler.iceGatheringComplete - resolving promise"),this.iceGatheringCompleteResolve&&this.iceGatheringCompleteResolve(),this.iceGatheringCompletePromise=void 0,this.iceGatheringCompleteResolve=void 0,this.iceGatheringCompleteReject=void 0)}waitForIceGatheringComplete(e=!1,t=0){return this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete"),void 0===this._peerConnection?Promise.reject("Peer connection closed."):e||"complete"!==this._peerConnection.iceGatheringState?(void 0!==this.iceGatheringCompletePromise&&(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - rejecting prior waiting promise"),this.iceGatheringCompleteReject&&this.iceGatheringCompleteReject(new Error("Promise superseded.")),this.iceGatheringCompletePromise=void 0,this.iceGatheringCompleteResolve=void 0,this.iceGatheringCompleteReject=void 0),this.iceGatheringCompletePromise=new Promise((e,s)=>{this.iceGatheringCompleteResolve=e,this.iceGatheringCompleteReject=s,t>0&&(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - timeout in "+t),this.iceGatheringCompleteTimeoutId=setTimeout(()=>{this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - timeout"),this.iceGatheringComplete()},t))}),this.iceGatheringCompletePromise):(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - already complete"),Promise.resolve())}initPeerConnectionEventHandlers(){if(this.logger.debug("SessionDescriptionHandler.initPeerConnectionEventHandlers"),!this._peerConnection)throw new Error("Peer connection undefined.");const e=this._peerConnection;e.onconnectionstatechange=t=>{var s;const i=e.connectionState;this.logger.debug("SessionDescriptionHandler.onconnectionstatechange "+i),(null===(s=this._peerConnectionDelegate)||void 0===s?void 0:s.onconnectionstatechange)&&this._peerConnectionDelegate.onconnectionstatechange(t)},e.ondatachannel=e=>{var t;this.logger.debug("SessionDescriptionHandler.ondatachannel"),this._dataChannel=e.channel,this.onDataChannel&&this.onDataChannel(this._dataChannel),(null===(t=this._peerConnectionDelegate)||void 0===t?void 0:t.ondatachannel)&&this._peerConnectionDelegate.ondatachannel(e)},e.onicecandidate=e=>{var t;this.logger.debug("SessionDescriptionHandler.onicecandidate"),(null===(t=this._peerConnectionDelegate)||void 0===t?void 0:t.onicecandidate)&&this._peerConnectionDelegate.onicecandidate(e)},e.onicecandidateerror=e=>{var t;this.logger.debug("SessionDescriptionHandler.onicecandidateerror"),(null===(t=this._peerConnectionDelegate)||void 0===t?void 0:t.onicecandidateerror)&&this._peerConnectionDelegate.onicecandidateerror(e)},e.oniceconnectionstatechange=t=>{var s;const i=e.iceConnectionState;this.logger.debug("SessionDescriptionHandler.oniceconnectionstatechange "+i),(null===(s=this._peerConnectionDelegate)||void 0===s?void 0:s.oniceconnectionstatechange)&&this._peerConnectionDelegate.oniceconnectionstatechange(t)},e.onicegatheringstatechange=t=>{var s;const i=e.iceGatheringState;this.logger.debug("SessionDescriptionHandler.onicegatheringstatechange "+i),"complete"===i&&this.iceGatheringComplete(),(null===(s=this._peerConnectionDelegate)||void 0===s?void 0:s.onicegatheringstatechange)&&this._peerConnectionDelegate.onicegatheringstatechange(t)},e.onnegotiationneeded=e=>{var t;this.logger.debug("SessionDescriptionHandler.onnegotiationneeded"),(null===(t=this._peerConnectionDelegate)||void 0===t?void 0:t.onnegotiationneeded)&&this._peerConnectionDelegate.onnegotiationneeded(e)},e.onsignalingstatechange=t=>{var s;const i=e.signalingState;this.logger.debug("SessionDescriptionHandler.onsignalingstatechange "+i),(null===(s=this._peerConnectionDelegate)||void 0===s?void 0:s.onsignalingstatechange)&&this._peerConnectionDelegate.onsignalingstatechange(t)},e.onstatsended=e=>{var t;this.logger.debug("SessionDescriptionHandler.onstatsended"),(null===(t=this._peerConnectionDelegate)||void 0===t?void 0:t.onstatsended)&&this._peerConnectionDelegate.onstatsended(e)},e.ontrack=e=>{var t;const s=e.track.kind,i=e.track.enabled?"enabled":"disabled";this.logger.debug(`SessionDescriptionHandler.ontrack ${s} ${i}`),this.setRemoteTrack(e.track),(null===(t=this._peerConnectionDelegate)||void 0===t?void 0:t.ontrack)&&this._peerConnectionDelegate.ontrack(e)}}}function T(e){return(t,s)=>{void 0===e&&(e=m());const i={iceGatheringTimeout:void 0!==(null==s?void 0:s.iceGatheringTimeout)?null==s?void 0:s.iceGatheringTimeout:2022,peerConnectionConfiguration:Object.assign(Object.assign({},{bundlePolicy:"balanced",certificates:void 0,iceCandidatePoolSize:0,iceServers:[{urls:"stun:stun.l.google.com:19302"}],iceTransportPolicy:"all",peerIdentity:void 0,rtcpMuxPolicy:"require"}),null==s?void 0:s.peerConnectionConfiguration)},r=t.userAgent.getLogger("sip.SessionDescriptionHandler");return new w(r,e,i)}}class y{constructor(e){this.parameters={};for(const t in e)e.hasOwnProperty(t)&&this.setParam(t,e[t])}setParam(e,t){e&&(this.parameters[e.toLowerCase()]=null==t?null:t.toString())}getParam(e){if(e)return this.parameters[e.toLowerCase()]}hasParam(e){return!(!e||void 0===this.parameters[e.toLowerCase()])}deleteParam(e){if(e=e.toLowerCase(),this.hasParam(e)){const t=this.parameters[e];return delete this.parameters[e],t}}clearParams(){this.parameters={}}}class b extends y{constructor(e="sip",t,s,i,r,n){if(super(r||{}),this.headers={},!s)throw new TypeError('missing or invalid "host" parameter');for(const e in n)n.hasOwnProperty(e)&&this.setHeader(e,n[e]);this.raw={scheme:e,user:t,host:s,port:i},this.normal={scheme:e.toLowerCase(),user:t,host:s.toLowerCase(),port:i}}get scheme(){return this.normal.scheme}set scheme(e){this.raw.scheme=e,this.normal.scheme=e.toLowerCase()}get user(){return this.normal.user}set user(e){this.normal.user=this.raw.user=e}get host(){return this.normal.host}set host(e){this.raw.host=e,this.normal.host=e.toLowerCase()}get aor(){return this.normal.user+"@"+this.normal.host}get port(){return this.normal.port}set port(e){this.normal.port=this.raw.port=e}setHeader(e,t){this.headers[this.headerize(e)]=t instanceof Array?t:[t]}getHeader(e){if(e)return this.headers[this.headerize(e)]}hasHeader(e){return!!e&&!!this.headers.hasOwnProperty(this.headerize(e))}deleteHeader(e){if(e=this.headerize(e),this.headers.hasOwnProperty(e)){const t=this.headers[e];return delete this.headers[e],t}}clearHeaders(){this.headers={}}clone(){return new b(this._raw.scheme,this._raw.user||"",this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))}toRaw(){return this._toString(this._raw)}toString(){return this._toString(this._normal)}get _normal(){return this.normal}get _raw(){return this.raw}_toString(e){let t=e.scheme+":";e.scheme.toLowerCase().match("^sips?$")||(t+="//"),e.user&&(t+=this.escapeUser(e.user)+"@"),t+=e.host,(e.port||0===e.port)&&(t+=":"+e.port);for(const e in this.parameters)this.parameters.hasOwnProperty(e)&&(t+=";"+e,null!==this.parameters[e]&&(t+="="+this.parameters[e]));const s=[];for(const e in this.headers)if(this.headers.hasOwnProperty(e))for(const t in this.headers[e])this.headers[e].hasOwnProperty(t)&&s.push(e+"="+this.headers[e][t]);return s.length>0&&(t+="?"+s.join("&")),t}escapeUser(e){let t;try{t=decodeURIComponent(e)}catch(e){throw e}return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}headerize(e){const t={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},s=e.toLowerCase().replace(/_/g,"-").split("-"),i=s.length;let r="";for(let e=0;e<i;e++)0!==e&&(r+="-"),r+=s[e].charAt(0).toUpperCase()+s[e].substring(1);return t[r]&&(r=t[r]),r}}function E(e,t){if(e.scheme!==t.scheme)return!1;if(e.user!==t.user||e.host!==t.host||e.port!==t.port)return!1;if(!function(e,t){const s=Object.keys(e.parameters),i=Object.keys(t.parameters);return!!s.filter(e=>i.includes(e)).every(s=>e.parameters[s]===t.parameters[s])&&(!!["user","ttl","method","transport"].every(s=>e.hasParam(s)&&t.hasParam(s)||!e.hasParam(s)&&!t.hasParam(s))&&!!["maddr"].every(s=>e.hasParam(s)&&t.hasParam(s)||!e.hasParam(s)&&!t.hasParam(s)))}(e,t))return!1;const s=Object.keys(e.headers),i=Object.keys(t.headers);if(0!==s.length||0!==i.length){if(s.length!==i.length)return!1;const r=s.filter(e=>i.includes(e));if(r.length!==i.length)return!1;if(!r.every(s=>e.headers[s].length&&t.headers[s].length&&e.headers[s][0]===t.headers[s][0]))return!1}return!0}var S;!function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.log=2]="log",e[e.debug=3]="debug"}(S||(S={}));class R{constructor(e,t,s){this.logger=e,this.category=t,this.label=s}error(e){this.genericLog(S.error,e)}warn(e){this.genericLog(S.warn,e)}log(e){this.genericLog(S.log,e)}debug(e){this.genericLog(S.debug,e)}genericLog(e,t){this.logger.genericLog(e,this.category,this.label,t)}get level(){return this.logger.level}set level(e){this.logger.level=e}}class I{constructor(){this.builtinEnabled=!0,this._level=S.log,this.loggers={},this.logger=this.getLogger("sip:loggerfactory")}get level(){return this._level}set level(e){e>=0&&e<=3?this._level=e:e>3?this._level=3:S.hasOwnProperty(e)?this._level=e:this.logger.error("invalid 'level' parameter value: "+JSON.stringify(e))}get connector(){return this._connector}set connector(e){e?"function"==typeof e?this._connector=e:this.logger.error("invalid 'connector' parameter value: "+JSON.stringify(e)):this._connector=void 0}getLogger(e,t){if(t&&3===this.level)return new R(this,e,t);if(this.loggers[e])return this.loggers[e];{const t=new R(this,e);return this.loggers[e]=t,t}}genericLog(e,t,s,i){this.level>=e&&this.builtinEnabled&&this.print(e,t,s,i),this.connector&&this.connector(S[e],t,s,i)}print(e,t,s,i){if("string"==typeof i){const e=[new Date,t];s&&e.push(s),i=e.concat(i).join(" | ")}switch(e){case S.error:console.error(i);break;case S.warn:console.warn(i);break;case S.log:console.log(i);break;case S.debug:console.debug(i)}}}class C extends y{constructor(e,t,s){super(s),this.uri=e,this._displayName=t}get friendlyName(){return this.displayName||this.uri.aor}get displayName(){return this._displayName}set displayName(e){this._displayName=e}clone(){return new C(this.uri.clone(),this._displayName,JSON.parse(JSON.stringify(this.parameters)))}toString(){let e=this.displayName||"0"===this.displayName?'"'+this.displayName+'" ':"";e+="<"+this.uri.toString()+">";for(const t in this.parameters)this.parameters.hasOwnProperty(t)&&(e+=";"+t,null!==this.parameters[t]&&(e+="="+this.parameters[t]));return e}}class $ extends Error{constructor(e,t,s,i){super(),this.message=e,this.expected=t,this.found=s,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,$)}static buildMessage(e,t){function s(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+s(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+s(e))}function r(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+s(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+s(e))}function n(e){switch(e.type){case"literal":return'"'+i(e.text)+'"';case"class":const t=e.parts.map(e=>Array.isArray(e)?r(e[0])+"-"+r(e[1]):r(e));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){const t=e.map(n);let s,i;if(t.sort(),t.length>0){for(s=1,i=1;s<t.length;s++)t[s-1]!==t[s]&&(t[i]=t[s],i++);t.length=i}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+(((o=t)?'"'+i(o)+'"':"end of input")+" found.");var o}}const A=function(e,t){t=void 0!==t?t:{};const s={},i={Contact:119,Name_Addr_Header:156,Record_Route:176,Request_Response:81,SIP_URI:45,Subscription_State:186,Supported:191,Require:182,Via:194,absoluteURI:84,Call_ID:118,Content_Disposition:130,Content_Length:135,Content_Type:136,CSeq:146,displayName:122,Event:149,From:151,host:52,Max_Forwards:154,Min_SE:213,Proxy_Authenticate:157,quoted_string:40,Refer_To:178,Replaces:179,Session_Expires:210,stun_URI:217,To:192,turn_URI:223,uuid:226,WWW_Authenticate:209,challenge:158,sipfrag:230,Referred_By:231};let r=119;const n=["\r\n",m("\r\n",!1),/^[0-9]/,v([["0","9"]],!1,!1),/^[a-zA-Z]/,v([["a","z"],["A","Z"]],!1,!1),/^[0-9a-fA-F]/,v([["0","9"],["a","f"],["A","F"]],!1,!1),/^[\0-\xFF]/,v([["\0","ÿ"]],!1,!1),/^["]/,v(['"'],!1,!1)," ",m(" ",!1),"\t",m("\t",!1),/^[a-zA-Z0-9]/,v([["a","z"],["A","Z"],["0","9"]],!1,!1),";",m(";",!1),"/",m("/",!1),"?",m("?",!1),":",m(":",!1),"@",m("@",!1),"&",m("&",!1),"=",m("=",!1),"+",m("+",!1),"$",m("$",!1),",",m(",",!1),"-",m("-",!1),"_",m("_",!1),".",m(".",!1),"!",m("!",!1),"~",m("~",!1),"*",m("*",!1),"'",m("'",!1),"(",m("(",!1),")",m(")",!1),"%",m("%",!1),function(){return" "},function(){return":"},/^[!-~]/,v([["!","~"]],!1,!1),/^[\x80-\uFFFF]/,v([["","￿"]],!1,!1),/^[\x80-\xBF]/,v([["","¿"]],!1,!1),/^[a-f]/,v([["a","f"]],!1,!1),"`",m("`",!1),"<",m("<",!1),">",m(">",!1),"\\",m("\\",!1),"[",m("[",!1),"]",m("]",!1),"{",m("{",!1),"}",m("}",!1),function(){return"*"},function(){return"/"},function(){return"="},function(){return"("},function(){return")"},function(){return">"},function(){return"<"},function(){return","},function(){return";"},function(){return":"},function(){return'"'},/^[!-']/,v([["!","'"]],!1,!1),/^[*-[]/,v([["*","["]],!1,!1),/^[\]-~]/,v([["]","~"]],!1,!1),function(e){return e},/^[#-[]/,v([["#","["]],!1,!1),/^[\0-\t]/,v([["\0","\t"]],!1,!1),/^[\x0B-\f]/,v([["\v","\f"]],!1,!1),/^[\x0E-\x7F]/,v([["",""]],!1,!1),function(){(t=t||{data:{}}).data.uri=new b(t.data.scheme,t.data.user,t.data.host,t.data.port),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port},function(){(t=t||{data:{}}).data.uri=new b(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params,"SIP_URI"===t.startRule&&(t.data=t.data.uri)},"sips",m("sips",!0),"sip",m("sip",!0),function(e){(t=t||{data:{}}).data.scheme=e},function(){(t=t||{data:{}}).data.user=decodeURIComponent(p().slice(0,-1))},function(){(t=t||{data:{}}).data.password=p()},function(){return(t=t||{data:{}}).data.host=p(),t.data.host},function(){return(t=t||{data:{}}).data.host_type="domain",p()},/^[a-zA-Z0-9_\-]/,v([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),/^[a-zA-Z0-9\-]/,v([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),function(){return(t=t||{data:{}}).data.host_type="IPv6",p()},"::",m("::",!1),function(){return(t=t||{data:{}}).data.host_type="IPv6",p()},function(){return(t=t||{data:{}}).data.host_type="IPv4",p()},"25",m("25",!1),/^[0-5]/,v([["0","5"]],!1,!1),"2",m("2",!1),/^[0-4]/,v([["0","4"]],!1,!1),"1",m("1",!1),/^[1-9]/,v([["1","9"]],!1,!1),function(e){return t=t||{data:{}},e=parseInt(e.join("")),t.data.port=e,e},"transport=",m("transport=",!0),"udp",m("udp",!0),"tcp",m("tcp",!0),"sctp",m("sctp",!0),"tls",m("tls",!0),function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.transport=e.toLowerCase()},"user=",m("user=",!0),"phone",m("phone",!0),"ip",m("ip",!0),function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.user=e.toLowerCase()},"method=",m("method=",!0),function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.method=e},"ttl=",m("ttl=",!0),function(e){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.ttl=e},"maddr=",m("maddr=",!0),function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.maddr=e},"lr",m("lr",!0),function(){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.lr=void 0},function(e,s){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),s=null===s?void 0:s[1],t.data.uri_params[e.toLowerCase()]=s},function(e,s){e=e.join("").toLowerCase(),s=s.join(""),(t=t||{data:{}}).data.uri_headers||(t.data.uri_headers={}),t.data.uri_headers[e]?t.data.uri_headers[e].push(s):t.data.uri_headers[e]=[s]},function(){"Refer_To"===(t=t||{data:{}}).startRule&&(t.data.uri=new b(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params)},"//",m("//",!1),function(){(t=t||{data:{}}).data.scheme=p()},m("SIP",!0),function(){(t=t||{data:{}}).data.sip_version=p()},"INVITE",m("INVITE",!1),"ACK",m("ACK",!1),"VXACH",m("VXACH",!1),"OPTIONS",m("OPTIONS",!1),"BYE",m("BYE",!1),"CANCEL",m("CANCEL",!1),"REGISTER",m("REGISTER",!1),"SUBSCRIBE",m("SUBSCRIBE",!1),"NOTIFY",m("NOTIFY",!1),"REFER",m("REFER",!1),"PUBLISH",m("PUBLISH",!1),function(){return(t=t||{data:{}}).data.method=p(),t.data.method},function(e){(t=t||{data:{}}).data.status_code=parseInt(e.join(""))},function(){(t=t||{data:{}}).data.reason_phrase=p()},function(){(t=t||{data:{}}).data=p()},function(){var e,s;for(s=(t=t||{data:{}}).data.multi_header.length,e=0;e<s;e++)if(null===t.data.multi_header[e].parsed){t.data=null;break}null!==t.data?t.data=t.data.multi_header:t.data=-1},function(){var e;(t=t||{data:{}}).data.multi_header||(t.data.multi_header=[]);try{e=new C(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch(t){e=null}t.data.multi_header.push({position:a,offset:f().start.offset,parsed:e})},function(e){'"'===(e=p().trim())[0]&&(e=e.substring(1,e.length-1)),(t=t||{data:{}}).data.displayName=e},"q",m("q",!0),function(e){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.q=e},"expires",m("expires",!0),function(e){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.expires=e},function(e){return parseInt(e.join(""))},"0",m("0",!1),function(){return parseFloat(p())},function(e,s){(t=t||{data:{}}).data.params||(t.data.params={}),s=null===s?void 0:s[1],t.data.params[e.toLowerCase()]=s},"render",m("render",!0),"session",m("session",!0),"icon",m("icon",!0),"alert",m("alert",!0),function(){"Content_Disposition"===(t=t||{data:{}}).startRule&&(t.data.type=p().toLowerCase())},"handling",m("handling",!0),"optional",m("optional",!0),"required",m("required",!0),function(e){(t=t||{data:{}}).data=parseInt(e.join(""))},function(){(t=t||{data:{}}).data=p()},"text",m("text",!0),"image",m("image",!0),"audio",m("audio",!0),"video",m("video",!0),"application",m("application",!0),"message",m("message",!0),"multipart",m("multipart",!0),"x-",m("x-",!0),function(e){(t=t||{data:{}}).data.value=parseInt(e.join(""))},function(e){(t=t||{data:{}}).data=e},function(e){(t=t||{data:{}}).data.event=e.toLowerCase()},function(){var e=(t=t||{data:{}}).data.tag;t.data=new C(t.data.uri,t.data.displayName,t.data.params),e&&t.data.setParam("tag",e)},"tag",m("tag",!0),function(e){(t=t||{data:{}}).data.tag=e},function(e){(t=t||{data:{}}).data=parseInt(e.join(""))},function(e){(t=t||{data:{}}).data=e},function(){(t=t||{data:{}}).data=new C(t.data.uri,t.data.displayName,t.data.params)},"digest",m("Digest",!0),"realm",m("realm",!0),function(e){(t=t||{data:{}}).data.realm=e},"domain",m("domain",!0),"nonce",m("nonce",!0),function(e){(t=t||{data:{}}).data.nonce=e},"opaque",m("opaque",!0),function(e){(t=t||{data:{}}).data.opaque=e},"stale",m("stale",!0),"true",m("true",!0),function(){(t=t||{data:{}}).data.stale=!0},"false",m("false",!0),function(){(t=t||{data:{}}).data.stale=!1},"algorithm",m("algorithm",!0),"md5",m("MD5",!0),"md5-sess",m("MD5-sess",!0),function(e){(t=t||{data:{}}).data.algorithm=e.toUpperCase()},"qop",m("qop",!0),"auth-int",m("auth-int",!0),"auth",m("auth",!0),function(e){(t=t||{data:{}}).data.qop||(t.data.qop=[]),t.data.qop.push(e.toLowerCase())},function(e){(t=t||{data:{}}).data.value=parseInt(e.join(""))},function(){var e,s;for(s=(t=t||{data:{}}).data.multi_header.length,e=0;e<s;e++)if(null===t.data.multi_header[e].parsed){t.data=null;break}null!==t.data?t.data=t.data.multi_header:t.data=-1},function(){var e;(t=t||{data:{}}).data.multi_header||(t.data.multi_header=[]);try{e=new C(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch(t){e=null}t.data.multi_header.push({position:a,offset:f().start.offset,parsed:e})},function(){(t=t||{data:{}}).data=new C(t.data.uri,t.data.displayName,t.data.params)},function(){(t=t||{data:{}}).data.replaces_from_tag&&t.data.replaces_to_tag||(t.data=-1)},function(){(t=t||{data:{}}).data={call_id:t.data}},"from-tag",m("from-tag",!0),function(e){(t=t||{data:{}}).data.replaces_from_tag=e},"to-tag",m("to-tag",!0),function(e){(t=t||{data:{}}).data.replaces_to_tag=e},"early-only",m("early-only",!0),function(){(t=t||{data:{}}).data.early_only=!0},function(e,t){return t},function(e,t){return function(e,t){return[e].concat(t)}(e,t)},function(e){"Require"===(t=t||{data:{}}).startRule&&(t.data=e||[])},function(e){(t=t||{data:{}}).data.value=parseInt(e.join(""))},"active",m("active",!0),"pending",m("pending",!0),"terminated",m("terminated",!0),function(){(t=t||{data:{}}).data.state=p()},"reason",m("reason",!0),function(e){t=t||{data:{}},void 0!==e&&(t.data.reason=e)},function(e){t=t||{data:{}},void 0!==e&&(t.data.expires=e)},"retry_after",m("retry_after",!0),function(e){t=t||{data:{}},void 0!==e&&(t.data.retry_after=e)},"deactivated",m("deactivated",!0),"probation",m("probation",!0),"rejected",m("rejected",!0),"timeout",m("timeout",!0),"giveup",m("giveup",!0),"noresource",m("noresource",!0),"invariant",m("invariant",!0),function(e){"Supported"===(t=t||{data:{}}).startRule&&(t.data=e||[])},function(){var e=(t=t||{data:{}}).data.tag;t.data=new C(t.data.uri,t.data.displayName,t.data.params),e&&t.data.setParam("tag",e)},"ttl",m("ttl",!0),function(e){(t=t||{data:{}}).data.ttl=e},"maddr",m("maddr",!0),function(e){(t=t||{data:{}}).data.maddr=e},"received",m("received",!0),function(e){(t=t||{data:{}}).data.received=e},"branch",m("branch",!0),function(e){(t=t||{data:{}}).data.branch=e},"rport",m("rport",!0),function(e){t=t||{data:{}},void 0!==e&&(t.data.rport=e.join(""))},function(e){(t=t||{data:{}}).data.protocol=e},m("UDP",!0),m("TCP",!0),m("TLS",!0),m("SCTP",!0),function(e){(t=t||{data:{}}).data.transport=e},function(){(t=t||{data:{}}).data.host=p()},function(e){(t=t||{data:{}}).data.port=parseInt(e.join(""))},function(e){return parseInt(e.join(""))},function(e){"Session_Expires"===(t=t||{data:{}}).startRule&&(t.data.deltaSeconds=e)},"refresher",m("refresher",!1),"uas",m("uas",!1),"uac",m("uac",!1),function(e){"Session_Expires"===(t=t||{data:{}}).startRule&&(t.data.refresher=e)},function(e){"Min_SE"===(t=t||{data:{}}).startRule&&(t.data=e)},"stuns",m("stuns",!0),"stun",m("stun",!0),function(e){(t=t||{data:{}}).data.scheme=e},function(e){(t=t||{data:{}}).data.host=e},"?transport=",m("?transport=",!1),"turns",m("turns",!0),"turn",m("turn",!0),function(e){(t=t||{data:{}}).data.transport=e},function(){(t=t||{data:{}}).data=p()},"Referred-By",m("Referred-By",!1),"b",m("b",!1),"cid",m("cid",!1)],o=[S('2 ""6 7!'),S('4"""5!7#'),S('4$""5!7%'),S('4&""5!7\''),S(";'.# &;("),S('4(""5!7)'),S('4*""5!7+'),S('2,""6,7-'),S('2.""6.7/'),S('40""5!71'),S('22""6273. &24""6475.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),S(";).# &;,"),S('2F""6F7G.} &2H""6H7I.q &2J""6J7K.e &2L""6L7M.Y &2N""6N7O.M &2P""6P7Q.A &2R""6R7S.5 &2T""6T7U.) &2V""6V7W'),S('%%2X""6X7Y/5#;#/,$;#/#$+#)(#\'#("\'#&\'#/"!&,)'),S('%%$;$0#*;$&/,#; /#$+")("\'#&\'#." &"/=#$;$/&#0#*;$&&&#/\'$8":Z" )("\'#&\'#'),S(';.." &"'),S("%$;'.# &;(0)*;'.# &;(&/?#28\"\"6879/0$;//'$8#:[# )(#'#(\"'#&'#"),S('%%$;2/&#0#*;2&&&#/g#$%$;.0#*;.&/,#;2/#$+")("\'#&\'#0=*%$;.0#*;.&/,#;2/#$+")("\'#&\'#&/#$+")("\'#&\'#/"!&,)'),S('4\\""5!7].# &;3'),S('4^""5!7_'),S('4`""5!7a'),S(';!.) &4b""5!7c'),S('%$;). &2F""6F7G. &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/#0*;). &2F""6F7G. &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),S('%$;). &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/#0*;). &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),S('2T""6T7U.ã &2V""6V7W.× &2f""6f7g.Ë &2h""6h7i.¿ &2:""6:7;.³ &2D""6D7E.§ &22""6273. &28""6879. &2j""6j7k. &;&.} &24""6475.q &2l""6l7m.e &2n""6n7o.Y &26""6677.M &2>""6>7?.A &2p""6p7q.5 &2r""6r7s.) &;\'.# &;('),S('%$;).ī &2F""6F7G.ğ &2J""6J7K.ē &2L""6L7M.ć &2X""6X7Y.û &2P""6P7Q.ï &2H""6H7I.ã &2@""6@7A.× &2d""6d7e.Ë &2R""6R7S.¿ &2N""6N7O.³ &2T""6T7U.§ &2V""6V7W. &2f""6f7g. &2h""6h7i. &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s/Ĵ#0ı*;).ī &2F""6F7G.ğ &2J""6J7K.ē &2L""6L7M.ć &2X""6X7Y.û &2P""6P7Q.ï &2H""6H7I.ã &2@""6@7A.× &2d""6d7e.Ë &2R""6R7S.¿ &2N""6N7O.³ &2T""6T7U.§ &2V""6V7W. &2f""6f7g. &2h""6h7i. &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s&&&#/"!&,)'),S("%;//?#2P\"\"6P7Q/0$;//'$8#:t# )(#'#(\"'#&'#"),S("%;//?#24\"\"6475/0$;//'$8#:u# )(#'#(\"'#&'#"),S("%;//?#2>\"\"6>7?/0$;//'$8#:v# )(#'#(\"'#&'#"),S("%;//?#2T\"\"6T7U/0$;//'$8#:w# )(#'#(\"'#&'#"),S("%;//?#2V\"\"6V7W/0$;//'$8#:x# )(#'#(\"'#&'#"),S('%2h""6h7i/0#;//\'$8":y" )("\'#&\'#'),S('%;//6#2f""6f7g/\'$8":z" )("\'#&\'#'),S("%;//?#2D\"\"6D7E/0$;//'$8#:{# )(#'#(\"'#&'#"),S("%;//?#22\"\"6273/0$;//'$8#:|# )(#'#(\"'#&'#"),S("%;//?#28\"\"6879/0$;//'$8#:}# )(#'#(\"'#&'#"),S("%;//0#;&/'$8\":~\" )(\"'#&'#"),S("%;&/0#;//'$8\":~\" )(\"'#&'#"),S("%;=/T#$;G.) &;K.# &;F0/*;G.) &;K.# &;F&/,$;>/#$+#)(#'#(\"'#&'#"),S('4""5!7.A &4""5!7.5 &4""5!7.) &;3.# &;.'),S("%%;//Q#;&/H$$;J.# &;K0)*;J.# &;K&/,$;&/#$+$)($'#(#'#(\"'#&'#/\"!&,)"),S("%;//]#;&/T$%$;J.# &;K0)*;J.# &;K&/\"!&,)/1$;&/($8$:$!!)($'#(#'#(\"'#&'#"),S(';..G &2L""6L7M.; &4""5!7./ &4""5!7.# &;3'),S('%2j""6j7k/J#4""5!7.5 &4""5!7.) &4""5!7/#$+")("\'#&\'#'),S("%;N/M#28\"\"6879/>$;O.\" &\"/0$;S/'$8$:$ )($'#(#'#(\"'#&'#"),S("%;N/d#28\"\"6879/U$;O.\" &\"/G$;S/>$;_/5$;l.\" &\"/'$8&:& )(&'#(%'#($'#(#'#(\"'#&'#"),S('%3""5$7.) &3""5#7/\' 8!:!! )'),S('%;P/]#%28""6879/,#;R/#$+")("\'#&\'#." &"/6$2:""6:7;/\'$8#:# )(#\'#("\'#&\'#'),S("$;+.) &;-.# &;Q/2#0/*;+.) &;-.# &;Q&&&#"),S('2<""6<7=.q &2>""6>7?.e &2@""6@7A.Y &2B""6B7C.M &2D""6D7E.A &22""6273.5 &26""6677.) &24""6475'),S('%$;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E0e*;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E&/& 8!:! )'),S('%;T/J#%28""6879/,#;^/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),S("%;U.) &;\\.# &;X/& 8!:! )"),S('%$%;V/2#2J""6J7K/#$+")("\'#&\'#0<*%;V/2#2J""6J7K/#$+")("\'#&\'#&/D#;W/;$2J""6J7K." &"/\'$8#:# )(#\'#("\'#&\'#'),S('$4""5!7/,#0)*4""5!7&&&#'),S('%4$""5!7%/?#$4""5!70)*4""5!7&/#$+")("\'#&\'#'),S('%2l""6l7m/?#;Y/6$2n""6n7o/\'$8#:# )(#\'#("\'#&\'#'),S('%%;Z/³#28""6879/¤$;Z/$28""6879/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+-)(-\'#(,\'#(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.ސ &%2""67/¤#;Z/$28""6879/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+,)(,\'#(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.۹ &%2""67/#;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.ٺ &%2""67/t#;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.ؓ &%2""67/\\#;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+&)(&\'#(%\'#($\'#(#\'#("\'#&\'#.ׄ &%2""67/D#;Z/;$28""6879/,$;[/#$+$)($\'#(#\'#("\'#&\'#.֍ &%2""67/,#;[/#$+")("\'#&\'#.ծ &%2""67/,#;Z/#$+")("\'#&\'#.Տ &%;Z/#2""67/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$++)(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.Ӈ &%;Z/ª#%28""6879/,#;Z/#$+")("\'#&\'#." &"/$2""67/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.а &%;Z/¹#%28""6879/,#;Z/#$+")("\'#&\'#." &"/$%28""6879/,#;Z/#$+")("\'#&\'#." &"/k$2""67/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+))()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.Ί &%;Z/È#%28""6879/,#;Z/#$+")("\'#&\'#." &"/¡$%28""6879/,#;Z/#$+")("\'#&\'#." &"/z$%28""6879/,#;Z/#$+")("\'#&\'#." &"/S$2""67/D$;Z/;$28""6879/,$;[/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.˕ &%;Z/×#%28""6879/,#;Z/#$+")("\'#&\'#." &"/°$%28""6879/,#;Z/#$+")("\'#&\'#." &"/$%28""6879/,#;Z/#$+")("\'#&\'#." &"/b$%28""6879/,#;Z/#$+")("\'#&\'#." &"/;$2""67/,$;[/#$+\')(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.ȑ &%;Z/þ#%28""6879/,#;Z/#$+")("\'#&\'#." &"/×$%28""6879/,#;Z/#$+")("\'#&\'#." &"/°$%28""6879/,#;Z/#$+")("\'#&\'#." &"/$%28""6879/,#;Z/#$+")("\'#&\'#." &"/b$%28""6879/,#;Z/#$+")("\'#&\'#." &"/;$2""67/,$;Z/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.Ħ &%;Z/Ĝ#%28""6879/,#;Z/#$+")("\'#&\'#." &"/õ$%28""6879/,#;Z/#$+")("\'#&\'#." &"/Î$%28""6879/,#;Z/#$+")("\'#&\'#." &"/§$%28""6879/,#;Z/#$+")("\'#&\'#." &"/$%28""6879/,#;Z/#$+")("\'#&\'#." &"/Y$%28""6879/,#;Z/#$+")("\'#&\'#." &"/2$2""67/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#/& 8!: ! )'),S('%;#/M#;#." &"/?$;#." &"/1$;#." &"/#$+$)($\'#(#\'#("\'#&\'#'),S("%;Z/;#28\"\"6879/,$;Z/#$+#)(#'#(\"'#&'#.# &;\\"),S("%;]/o#2J\"\"6J7K/`$;]/W$2J\"\"6J7K/H$;]/?$2J\"\"6J7K/0$;]/'$8':¡' )(''#(&'#(%'#($'#(#'#(\"'#&'#"),S('%2¢""6¢7£/2#4¤""5!7¥/#$+")("\'#&\'#. &%2¦""6¦7§/;#4¨""5!7©/,$;!/#$+#)(#\'#("\'#&\'#.j &%2ª""6ª7«/5#;!/,$;!/#$+#)(#\'#("\'#&\'#.B &%4¬""5!7­/,#;!/#$+")("\'#&\'#.# &;!'),S('%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%\'#($\'#(#\'#("\'#&\'#/\' 8!:®!! )'),S('$%22""6273/,#;`/#$+")("\'#&\'#0<*%22""6273/,#;`/#$+")("\'#&\'#&'),S(";a.A &;b.; &;c.5 &;d./ &;e.) &;f.# &;g"),S('%3¯""5*7°/a#3±""5#7².G &3³""5#7´.; &3µ""5$7¶./ &3·""5#7¸.# &;6/($8":¹"! )("\'#&\'#'),S('%3º""5%7»/I#3¼""5%7½./ &3¾""5"7¿.# &;6/($8":À"! )("\'#&\'#'),S('%3Á""5\'7Â/1#;/($8":Ã"! )("\'#&\'#'),S('%3Ä""5$7Å/1#;ð/($8":Æ"! )("\'#&\'#'),S('%3Ç""5&7È/1#;T/($8":É"! )("\'#&\'#'),S('%3Ê""5"7Ë/N#%2>""6>7?/,#;6/#$+")("\'#&\'#." &"/\'$8":Ì" )("\'#&\'#'),S('%;h/P#%2>""6>7?/,#;i/#$+")("\'#&\'#." &"/)$8":Í""! )("\'#&\'#'),S('%$;j/&#0#*;j&&&#/"!&,)'),S('%$;j/&#0#*;j&&&#/"!&,)'),S(";k.) &;+.# &;-"),S('2l""6l7m.e &2n""6n7o.Y &24""6475.M &28""6879.A &2<""6<7=.5 &2@""6@7A.) &2B""6B7C'),S('%26""6677/n#;m/e$$%2<""6<7=/,#;m/#$+")("\'#&\'#0<*%2<""6<7=/,#;m/#$+")("\'#&\'#&/#$+#)(#\'#("\'#&\'#'),S('%;n/A#2>""6>7?/2$;o/)$8#:Î#"" )(#\'#("\'#&\'#'),S("$;p.) &;+.# &;-/2#0/*;p.) &;+.# &;-&&&#"),S("$;p.) &;+.# &;-0/*;p.) &;+.# &;-&"),S('2l""6l7m.e &2n""6n7o.Y &24""6475.M &26""6677.A &28""6879.5 &2@""6@7A.) &2B""6B7C'),S(";.# &;r"),S("%;/G#;'/>$;s/5$;'/,$;/#$+%)(%'#($'#(#'#(\"'#&'#"),S(";M.# &;t"),S("%;/E#28\"\"6879/6$;u.# &;x/'$8#:Ï# )(#'#(\"'#&'#"),S('%;v.# &;w/J#%26""6677/,#;/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),S('%2Ð""6Ð7Ñ/:#;/1$;w." &"/#$+#)(#\'#("\'#&\'#'),S('%24""6475/,#;{/#$+")("\'#&\'#'),S("%;z/3#$;y0#*;y&/#$+\")(\"'#&'#"),S(";*.) &;+.# &;-"),S(';+. &;-. &22""6273.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),S('%;|/e#$%24""6475/,#;|/#$+")("\'#&\'#0<*%24""6475/,#;|/#$+")("\'#&\'#&/#$+")("\'#&\'#'),S('%$;~0#*;~&/e#$%22""6273/,#;}/#$+")("\'#&\'#0<*%22""6273/,#;}/#$+")("\'#&\'#&/#$+")("\'#&\'#'),S("$;~0#*;~&"),S(';+.w &;-.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),S('%%;"/#$;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K0M*;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K&/#$+")("\'#&\'#/& 8!:Ò! )'),S(";.# &;"),S('%%;O/2#2:""6:7;/#$+")("\'#&\'#." &"/,#;S/#$+")("\'#&\'#." &"'),S('$;+. &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A/#0*;+. &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A&&&#'),S("$;y0#*;y&"),S('%3""5#7Ó/q#24""6475/b$$;!/&#0#*;!&&&#/L$2J""6J7K/=$$;!/&#0#*;!&&&#/\'$8%:Ô% )(%\'#($\'#(#\'#("\'#&\'#'),S('2Õ""6Õ7Ö'),S('2×""6×7Ø'),S('2Ù""6Ù7Ú'),S('2Û""6Û7Ü'),S('2Ý""6Ý7Þ'),S('2ß""6ß7à'),S('2á""6á7â'),S('2ã""6ã7ä'),S('2å""6å7æ'),S('2ç""6ç7è'),S('2é""6é7ê'),S("%;.Y &;.S &;.M &;.G &;.A &;.; &;.5 &;./ &;.) &;.# &;6/& 8!:ë! )"),S("%;/G#;'/>$;/5$;'/,$;/#$+%)(%'#($'#(#'#(\"'#&'#"),S("%;/' 8!:ì!! )"),S("%;!/5#;!/,$;!/#$+#)(#'#(\"'#&'#"),S("%$;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(0G*;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(&/& 8!:í! )"),S("%;¶/Y#$%;A/,#;¶/#$+\")(\"'#&'#06*%;A/,#;¶/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),S('%;9/N#%2:""6:7;/,#;9/#$+")("\'#&\'#." &"/\'$8":î" )("\'#&\'#'),S("%;:.c &%;/Y#$%;A/,#;/#$+\")(\"'#&'#06*%;A/,#;/#$+\")(\"'#&'#&/#$+\")(\"'#&'#/& 8!:ï! )"),S("%;L.# &;/]#$%;B/,#;/#$+\")(\"'#&'#06*%;B/,#;/#$+\")(\"'#&'#&/'$8\":ð\" )(\"'#&'#"),S("%;.\" &\"/>#;@/5$;M/,$;?/#$+$)($'#(#'#(\"'#&'#"),S("%%;6/Y#$%;./,#;6/#$+\")(\"'#&'#06*%;./,#;6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#.# &;H/' 8!:ñ!! )"),S(";.) &;.# &; "),S("%3ò\"\"5!7ó/:#;</1$;/($8#:ô#! )(#'#(\"'#&'#"),S("%3õ\"\"5'7ö/:#;</1$;/($8#:÷#! )(#'#(\"'#&'#"),S("%$;!/&#0#*;!&&&#/' 8!:ø!! )"),S('%2ù""6ù7ú/o#%2J""6J7K/M#;!." &"/?$;!." &"/1$;!." &"/#$+$)($\'#(#\'#("\'#&\'#." &"/\'$8":û" )("\'#&\'#'),S('%;6/J#%;</,#;¡/#$+")("\'#&\'#." &"/)$8":ü""! )("\'#&\'#'),S(";6.) &;T.# &;H"),S("%;£/Y#$%;B/,#;¤/#$+\")(\"'#&'#06*%;B/,#;¤/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),S('%3ý""5&7þ.G &3ÿ""5\'7Ā.; &3ā""5$7Ă./ &3ă""5%7Ą.# &;6/& 8!:ą! )'),S(";¥.# &; "),S('%3Ć""5(7ć/M#;</D$3Ĉ""5(7ĉ./ &3Ċ""5(7ċ.# &;6/#$+#)(#\'#("\'#&\'#'),S("%;6/Y#$%;A/,#;6/#$+\")(\"'#&'#06*%;A/,#;6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),S("%$;!/&#0#*;!&&&#/' 8!:Č!! )"),S("%;©/& 8!:č! )"),S("%;ª/k#;;/b$;¯/Y$$%;B/,#;°/#$+\")(\"'#&'#06*%;B/,#;°/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#"),S(";«.# &;¬"),S('3Ď""5$7ď.S &3Đ""5%7đ.G &3Ē""5%7ē.; &3Ĕ""5%7ĕ./ &3Ė""5+7ė.# &;­'),S('3Ę""5\'7ę./ &3Ě""5)7ě.# &;­'),S(";6.# &;®"),S('%3Ĝ""5"7ĝ/,#;6/#$+")("\'#&\'#'),S(";­.# &;6"),S("%;6/5#;</,$;±/#$+#)(#'#(\"'#&'#"),S(";6.# &;H"),S("%;³/5#;./,$;/#$+#)(#'#(\"'#&'#"),S("%$;!/&#0#*;!&&&#/' 8!:Ğ!! )"),S("%;/' 8!:ğ!! )"),S('%;¶/^#$%;B/,#; /#$+")("\'#&\'#06*%;B/,#; /#$+")("\'#&\'#&/($8":Ġ"!!)("\'#&\'#'),S('%%;7/e#$%2J""6J7K/,#;7/#$+")("\'#&\'#0<*%2J""6J7K/,#;7/#$+")("\'#&\'#&/#$+")("\'#&\'#/"!&,)'),S("%;L.# &;/]#$%;B/,#;¸/#$+\")(\"'#&'#06*%;B/,#;¸/#$+\")(\"'#&'#&/'$8\":ġ\" )(\"'#&'#"),S(";¹.# &; "),S("%3Ģ\"\"5#7ģ/:#;</1$;6/($8#:Ĥ#! )(#'#(\"'#&'#"),S("%$;!/&#0#*;!&&&#/' 8!:ĥ!! )"),S("%;/' 8!:Ħ!! )"),S("%$;0#*;&/x#;@/o$;M/f$;?/]$$%;B/,#; /#$+\")(\"'#&'#06*%;B/,#; /#$+\")(\"'#&'#&/'$8%:ħ% )(%'#($'#(#'#(\"'#&'#"),S(";¾"),S("%3Ĩ\"\"5&7ĩ/k#;./b$;Á/Y$$%;A/,#;Á/#$+\")(\"'#&'#06*%;A/,#;Á/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#.# &;¿"),S("%;6/k#;./b$;À/Y$$%;A/,#;À/#$+\")(\"'#&'#06*%;A/,#;À/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#"),S("%;6/;#;</2$;6.# &;H/#$+#)(#'#(\"'#&'#"),S(";Â.G &;Ä.A &;Æ.; &;È.5 &;É./ &;Ê.) &;Ë.# &;À"),S("%3Ī\"\"5%7ī/5#;</,$;Ã/#$+#)(#'#(\"'#&'#"),S("%;I/' 8!:Ĭ!! )"),S("%3ĭ\"\"5&7Į/#;</$;D/$;Å/|$$%$;'/&#0#*;'&&&#/,#;Å/#$+\")(\"'#&'#0C*%$;'/&#0#*;'&&&#/,#;Å/#$+\")(\"'#&'#&/,$;E/#$+&)(&'#(%'#($'#(#'#(\"'#&'#"),S(";t.# &;w"),S("%3į\"\"5%7İ/5#;</,$;Ç/#$+#)(#'#(\"'#&'#"),S("%;I/' 8!:ı!! )"),S("%3Ĳ\"\"5&7ĳ/:#;</1$;I/($8#:Ĵ#! )(#'#(\"'#&'#"),S('%3ĵ""5%7Ķ/]#;</T$%3ķ""5$7ĸ/& 8!:Ĺ! ).4 &%3ĺ""5%7Ļ/& 8!:ļ! )/#$+#)(#\'#("\'#&\'#'),S('%3Ľ""5)7ľ/R#;</I$3Ŀ""5#7ŀ./ &3Ł""5(7ł.# &;6/($8#:Ń#! )(#\'#("\'#&\'#'),S('%3ń""5#7Ņ/#;</$;D/$%;Ì/e#$%2D""6D7E/,#;Ì/#$+")("\'#&\'#0<*%2D""6D7E/,#;Ì/#$+")("\'#&\'#&/#$+")("\'#&\'#/,$;E/#$+%)(%\'#($\'#(#\'#("\'#&\'#'),S('%3ņ""5(7Ň./ &3ň""5$7ŉ.# &;6/\' 8!:Ŋ!! )'),S("%;6/Y#$%;A/,#;6/#$+\")(\"'#&'#06*%;A/,#;6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),S("%;Ï/G#;./>$;Ï/5$;./,$;/#$+%)(%'#($'#(#'#(\"'#&'#"),S("%$;!/&#0#*;!&&&#/' 8!:ŋ!! )"),S("%;Ñ/]#$%;A/,#;Ñ/#$+\")(\"'#&'#06*%;A/,#;Ñ/#$+\")(\"'#&'#&/'$8\":Ō\" )(\"'#&'#"),S("%;/]#$%;B/,#; /#$+\")(\"'#&'#06*%;B/,#; /#$+\")(\"'#&'#&/'$8\":ō\" )(\"'#&'#"),S('%;L.O &;.I &%;@." &"/:#;t/1$;?." &"/#$+#)(#\'#("\'#&\'#/]#$%;B/,#; /#$+")("\'#&\'#06*%;B/,#; /#$+")("\'#&\'#&/\'$8":Ŏ" )("\'#&\'#'),S("%;Ô/]#$%;B/,#;Õ/#$+\")(\"'#&'#06*%;B/,#;Õ/#$+\")(\"'#&'#&/'$8\":ŏ\" )(\"'#&'#"),S("%;/& 8!:Ő! )"),S('%3ő""5(7Œ/:#;</1$;6/($8#:œ#! )(#\'#("\'#&\'#.g &%3Ŕ""5&7ŕ/:#;</1$;6/($8#:Ŗ#! )(#\'#("\'#&\'#.: &%3ŗ""5*7Ř/& 8!:ř! ).# &; '),S('%%;6/k#$%;A/2#;6/)$8":Ś""$ )("\'#&\'#0<*%;A/2#;6/)$8":Ś""$ )("\'#&\'#&/)$8":ś""! )("\'#&\'#." &"/\' 8!:Ŝ!! )'),S("%;Ø/Y#$%;A/,#;Ø/#$+\")(\"'#&'#06*%;A/,#;Ø/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),S("%;/Y#$%;B/,#; /#$+\")(\"'#&'#06*%;B/,#; /#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),S("%$;!/&#0#*;!&&&#/' 8!:ŝ!! )"),S("%;Û/Y#$%;B/,#;Ü/#$+\")(\"'#&'#06*%;B/,#;Ü/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),S('%3Ş""5&7ş.; &3Š""5\'7š./ &3Ţ""5*7ţ.# &;6/& 8!:Ť! )'),S("%3ť\"\"5&7Ŧ/:#;</1$;Ý/($8#:ŧ#! )(#'#(\"'#&'#.} &%3õ\"\"5'7ö/:#;</1$;/($8#:Ũ#! )(#'#(\"'#&'#.P &%3ũ\"\"5+7Ū/:#;</1$;/($8#:ū#! )(#'#(\"'#&'#.# &; "),S('3Ŭ""5+7ŭ.k &3Ů""5)7ů._ &3Ű""5(7ű.S &3Ų""5\'7ų.G &3Ŵ""5&7ŵ.; &3Ŷ""5*7ŷ./ &3Ÿ""5)7Ź.# &;6'),S(';1." &"'),S('%%;6/k#$%;A/2#;6/)$8":Ś""$ )("\'#&\'#0<*%;A/2#;6/)$8":Ś""$ )("\'#&\'#&/)$8":ś""! )("\'#&\'#." &"/\' 8!:ź!! )'),S("%;L.# &;/]#$%;B/,#;á/#$+\")(\"'#&'#06*%;B/,#;á/#$+\")(\"'#&'#&/'$8\":Ż\" )(\"'#&'#"),S(";¹.# &; "),S("%;ã/Y#$%;A/,#;ã/#$+\")(\"'#&'#06*%;A/,#;ã/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),S("%;ê/k#;./b$;í/Y$$%;B/,#;ä/#$+\")(\"'#&'#06*%;B/,#;ä/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#"),S(";å.; &;æ.5 &;ç./ &;è.) &;é.# &; "),S("%3ż\"\"5#7Ž/:#;</1$;ð/($8#:ž#! )(#'#(\"'#&'#"),S("%3ſ\"\"5%7ƀ/:#;</1$;T/($8#:Ɓ#! )(#'#(\"'#&'#"),S("%3Ƃ\"\"5(7ƃ/F#;</=$;\\.) &;Y.# &;X/($8#:Ƅ#! )(#'#(\"'#&'#"),S("%3ƅ\"\"5&7Ɔ/:#;</1$;6/($8#:Ƈ#! )(#'#(\"'#&'#"),S("%3ƈ\"\"5%7Ɖ/A#;</8$$;!0#*;!&/($8#:Ɗ#! )(#'#(\"'#&'#"),S("%;ë/G#;;/>$;6/5$;;/,$;ì/#$+%)(%'#($'#(#'#(\"'#&'#"),S('%3""5#7Ó.# &;6/\' 8!:Ƌ!! )'),S('%3±""5#7ƌ.G &3³""5#7ƍ.; &3·""5#7Ǝ./ &3µ""5$7Ə.# &;6/\' 8!:Ɛ!! )'),S('%;î/D#%;C/,#;ï/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),S("%;U.) &;\\.# &;X/& 8!:Ƒ! )"),S('%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%\'#($\'#(#\'#("\'#&\'#/\' 8!:ƒ!! )'),S('%%;!/?#;!." &"/1$;!." &"/#$+#)(#\'#("\'#&\'#/\' 8!:Ɠ!! )'),S(";¾"),S('%;/^#$%;B/,#;ó/#$+")("\'#&\'#06*%;B/,#;ó/#$+")("\'#&\'#&/($8":Ɣ"!!)("\'#&\'#'),S(";ô.# &; "),S('%2ƕ""6ƕ7Ɩ/L#;</C$2Ɨ""6Ɨ7Ƙ.) &2ƙ""6ƙ7ƚ/($8#:ƛ#! )(#\'#("\'#&\'#'),S('%;/^#$%;B/,#; /#$+")("\'#&\'#06*%;B/,#; /#$+")("\'#&\'#&/($8":Ɯ"!!)("\'#&\'#'),S("%;6/5#;0/,$;÷/#$+#)(#'#(\"'#&'#"),S("$;2.) &;4.# &;.0/*;2.) &;4.# &;.&"),S("$;%0#*;%&"),S("%;ú/;#28\"\"6879/,$;û/#$+#)(#'#(\"'#&'#"),S('%3Ɲ""5%7ƞ.) &3Ɵ""5$7Ơ/\' 8!:ơ!! )'),S('%;ü/J#%28""6879/,#;^/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),S("%;\\.) &;X.# &;/' 8!:Ƣ!! )"),S(';".S &;!.M &2F""6F7G.A &2J""6J7K.5 &2H""6H7I.) &2N""6N7O'),S('2L""6L7M. &2B""6B7C. &2<""6<7=.} &2R""6R7S.q &2T""6T7U.e &2V""6V7W.Y &2P""6P7Q.M &2@""6@7A.A &2D""6D7E.5 &22""6273.) &2>""6>7?'),S('%;Ā/b#28""6879/S$;û/J$%2ƣ""6ƣ7Ƥ/,#;ì/#$+")("\'#&\'#." &"/#$+$)($\'#(#\'#("\'#&\'#'),S('%3ƥ""5%7Ʀ.) &3Ƨ""5$7ƨ/\' 8!:ơ!! )'),S('%3±""5#7².6 &3³""5#7´.* &$;+0#*;+&/\' 8!:Ʃ!! )'),S("%;Ą/#2F\"\"6F7G/x$;ă/o$2F\"\"6F7G/`$;ă/W$2F\"\"6F7G/H$;ă/?$2F\"\"6F7G/0$;ą/'$8):ƪ) )()'#(('#(''#(&'#(%'#($'#(#'#(\"'#&'#"),S("%;#/>#;#/5$;#/,$;#/#$+$)($'#(#'#(\"'#&'#"),S("%;ă/,#;ă/#$+\")(\"'#&'#"),S("%;ă/5#;ă/,$;ă/#$+#)(#'#(\"'#&'#"),S("%;q/T#$;m0#*;m&/D$%; /,#;ø/#$+\")(\"'#&'#.\" &\"/#$+#)(#'#(\"'#&'#"),S('%2ƫ""6ƫ7Ƭ.) &2ƭ""6ƭ7Ʈ/w#;0/n$;Ĉ/e$$%;B/2#;ĉ.# &; /#$+")("\'#&\'#0<*%;B/2#;ĉ.# &; /#$+")("\'#&\'#&/#$+$)($\'#(#\'#("\'#&\'#'),S(";.# &;L"),S("%2Ư\"\"6Ư7ư/5#;</,$;Ċ/#$+#)(#'#(\"'#&'#"),S("%;D/S#;,/J$2:\"\"6:7;/;$;,.# &;T/,$;E/#$+%)(%'#($'#(#'#(\"'#&'#")];let a=0,c=0;const h=[{line:1,column:1}];let d,l=0,g=[],u=0;if(void 0!==t.startRule){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');r=i[t.startRule]}function p(){return e.substring(c,a)}function f(){return T(c,a)}function m(e,t){return{type:"literal",text:e,ignoreCase:t}}function v(e,t,s){return{type:"class",parts:e,inverted:t,ignoreCase:s}}function w(t){let s,i=h[t];if(i)return i;for(s=t-1;!h[s];)s--;for(i=h[s],i={line:i.line,column:i.column};s<t;)10===e.charCodeAt(s)?(i.line++,i.column=1):i.column++,s++;return h[t]=i,i}function T(e,t){const s=w(e),i=w(t);return{start:{offset:e,line:s.line,column:s.column},end:{offset:t,line:i.line,column:i.column}}}function y(e){a<l||(a>l&&(l=a,g=[]),g.push(e))}function E(e,t,s){return new $($.buildMessage(e,t),e,t,s)}function S(e){return e.split("").map(e=>e.charCodeAt(0)-32)}if(t.data={},d=function t(i){const r=o[i];let h=0;const d=[];let l=r.length;const g=[],p=[];let f;for(;;){for(;h<l;)switch(r[h]){case 0:p.push(n[r[h+1]]),h+=2;break;case 1:p.push(void 0),h++;break;case 2:p.push(null),h++;break;case 3:p.push(s),h++;break;case 4:p.push([]),h++;break;case 5:p.push(a),h++;break;case 6:p.pop(),h++;break;case 7:a=p.pop(),h++;break;case 8:p.length-=r[h+1],h+=2;break;case 9:p.splice(-2,1),h++;break;case 10:p[p.length-2].push(p.pop()),h++;break;case 11:p.push(p.splice(p.length-r[h+1],r[h+1])),h+=2;break;case 12:p.push(e.substring(p.pop(),a)),h++;break;case 13:g.push(l),d.push(h+3+r[h+1]+r[h+2]),p[p.length-1]?(l=h+3+r[h+1],h+=3):(l=h+3+r[h+1]+r[h+2],h+=3+r[h+1]);break;case 14:g.push(l),d.push(h+3+r[h+1]+r[h+2]),p[p.length-1]===s?(l=h+3+r[h+1],h+=3):(l=h+3+r[h+1]+r[h+2],h+=3+r[h+1]);break;case 15:g.push(l),d.push(h+3+r[h+1]+r[h+2]),p[p.length-1]!==s?(l=h+3+r[h+1],h+=3):(l=h+3+r[h+1]+r[h+2],h+=3+r[h+1]);break;case 16:p[p.length-1]!==s?(g.push(l),d.push(h),l=h+2+r[h+1],h+=2):h+=2+r[h+1];break;case 17:g.push(l),d.push(h+3+r[h+1]+r[h+2]),e.length>a?(l=h+3+r[h+1],h+=3):(l=h+3+r[h+1]+r[h+2],h+=3+r[h+1]);break;case 18:g.push(l),d.push(h+4+r[h+2]+r[h+3]),e.substr(a,n[r[h+1]].length)===n[r[h+1]]?(l=h+4+r[h+2],h+=4):(l=h+4+r[h+2]+r[h+3],h+=4+r[h+2]);break;case 19:g.push(l),d.push(h+4+r[h+2]+r[h+3]),e.substr(a,n[r[h+1]].length).toLowerCase()===n[r[h+1]]?(l=h+4+r[h+2],h+=4):(l=h+4+r[h+2]+r[h+3],h+=4+r[h+2]);break;case 20:g.push(l),d.push(h+4+r[h+2]+r[h+3]),n[r[h+1]].test(e.charAt(a))?(l=h+4+r[h+2],h+=4):(l=h+4+r[h+2]+r[h+3],h+=4+r[h+2]);break;case 21:p.push(e.substr(a,r[h+1])),a+=r[h+1],h+=2;break;case 22:p.push(n[r[h+1]]),a+=n[r[h+1]].length,h+=2;break;case 23:p.push(s),0===u&&y(n[r[h+1]]),h+=2;break;case 24:c=p[p.length-1-r[h+1]],h+=2;break;case 25:c=a,h++;break;case 26:f=r.slice(h+4,h+4+r[h+3]).map((function(e){return p[p.length-1-e]})),p.splice(p.length-r[h+2],r[h+2],n[r[h+1]].apply(null,f)),h+=4+r[h+3];break;case 27:p.push(t(r[h+1])),h+=2;break;case 28:u++,h++;break;case 29:u--,h++;break;default:throw new Error("Invalid opcode: "+r[h]+".")}if(!(g.length>0))break;l=g.pop(),h=d.pop()}return p[0]}(r),d!==s&&a===e.length)return d;throw d!==s&&a<e.length&&y({type:"end"}),E(g,l<e.length?e.charAt(l):null,l<e.length?T(l,l+1):T(l,l))};var D,_;(_=D||(D={})).parse=function(e,t){const s={startRule:t};try{A(e,s)}catch(e){s.data=-1}return s.data},_.nameAddrHeaderParse=function(e){const t=_.parse(e,"Name_Addr_Header");return-1!==t?t:void 0},_.URIParse=function(e){const t=_.parse(e,"SIP_URI");return-1!==t?t:void 0};class H{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){const t=H.hexChars,s=H.hexOut;let i,r,n,o;for(o=0;o<4;o+=1)for(r=8*o,i=e[o],n=0;n<8;n+=2)s[r+1+n]=t.charAt(15&i),i>>>=4,s[r+0+n]=t.charAt(15&i),i>>>=4;return s.join("")}static _md5cycle(e,t){let s=e[0],i=e[1],r=e[2],n=e[3];s+=(i&r|~i&n)+t[0]-680876936|0,s=(s<<7|s>>>25)+i|0,n+=(s&i|~s&r)+t[1]-389564586|0,n=(n<<12|n>>>20)+s|0,r+=(n&s|~n&i)+t[2]+606105819|0,r=(r<<17|r>>>15)+n|0,i+=(r&n|~r&s)+t[3]-1044525330|0,i=(i<<22|i>>>10)+r|0,s+=(i&r|~i&n)+t[4]-176418897|0,s=(s<<7|s>>>25)+i|0,n+=(s&i|~s&r)+t[5]+1200080426|0,n=(n<<12|n>>>20)+s|0,r+=(n&s|~n&i)+t[6]-1473231341|0,r=(r<<17|r>>>15)+n|0,i+=(r&n|~r&s)+t[7]-45705983|0,i=(i<<22|i>>>10)+r|0,s+=(i&r|~i&n)+t[8]+1770035416|0,s=(s<<7|s>>>25)+i|0,n+=(s&i|~s&r)+t[9]-1958414417|0,n=(n<<12|n>>>20)+s|0,r+=(n&s|~n&i)+t[10]-42063|0,r=(r<<17|r>>>15)+n|0,i+=(r&n|~r&s)+t[11]-1990404162|0,i=(i<<22|i>>>10)+r|0,s+=(i&r|~i&n)+t[12]+1804603682|0,s=(s<<7|s>>>25)+i|0,n+=(s&i|~s&r)+t[13]-40341101|0,n=(n<<12|n>>>20)+s|0,r+=(n&s|~n&i)+t[14]-1502002290|0,r=(r<<17|r>>>15)+n|0,i+=(r&n|~r&s)+t[15]+1236535329|0,i=(i<<22|i>>>10)+r|0,s+=(i&n|r&~n)+t[1]-165796510|0,s=(s<<5|s>>>27)+i|0,n+=(s&r|i&~r)+t[6]-1069501632|0,n=(n<<9|n>>>23)+s|0,r+=(n&i|s&~i)+t[11]+643717713|0,r=(r<<14|r>>>18)+n|0,i+=(r&s|n&~s)+t[0]-373897302|0,i=(i<<20|i>>>12)+r|0,s+=(i&n|r&~n)+t[5]-701558691|0,s=(s<<5|s>>>27)+i|0,n+=(s&r|i&~r)+t[10]+38016083|0,n=(n<<9|n>>>23)+s|0,r+=(n&i|s&~i)+t[15]-660478335|0,r=(r<<14|r>>>18)+n|0,i+=(r&s|n&~s)+t[4]-405537848|0,i=(i<<20|i>>>12)+r|0,s+=(i&n|r&~n)+t[9]+568446438|0,s=(s<<5|s>>>27)+i|0,n+=(s&r|i&~r)+t[14]-1019803690|0,n=(n<<9|n>>>23)+s|0,r+=(n&i|s&~i)+t[3]-187363961|0,r=(r<<14|r>>>18)+n|0,i+=(r&s|n&~s)+t[8]+1163531501|0,i=(i<<20|i>>>12)+r|0,s+=(i&n|r&~n)+t[13]-1444681467|0,s=(s<<5|s>>>27)+i|0,n+=(s&r|i&~r)+t[2]-51403784|0,n=(n<<9|n>>>23)+s|0,r+=(n&i|s&~i)+t[7]+1735328473|0,r=(r<<14|r>>>18)+n|0,i+=(r&s|n&~s)+t[12]-1926607734|0,i=(i<<20|i>>>12)+r|0,s+=(i^r^n)+t[5]-378558|0,s=(s<<4|s>>>28)+i|0,n+=(s^i^r)+t[8]-2022574463|0,n=(n<<11|n>>>21)+s|0,r+=(n^s^i)+t[11]+1839030562|0,r=(r<<16|r>>>16)+n|0,i+=(r^n^s)+t[14]-35309556|0,i=(i<<23|i>>>9)+r|0,s+=(i^r^n)+t[1]-1530992060|0,s=(s<<4|s>>>28)+i|0,n+=(s^i^r)+t[4]+1272893353|0,n=(n<<11|n>>>21)+s|0,r+=(n^s^i)+t[7]-155497632|0,r=(r<<16|r>>>16)+n|0,i+=(r^n^s)+t[10]-1094730640|0,i=(i<<23|i>>>9)+r|0,s+=(i^r^n)+t[13]+681279174|0,s=(s<<4|s>>>28)+i|0,n+=(s^i^r)+t[0]-358537222|0,n=(n<<11|n>>>21)+s|0,r+=(n^s^i)+t[3]-722521979|0,r=(r<<16|r>>>16)+n|0,i+=(r^n^s)+t[6]+76029189|0,i=(i<<23|i>>>9)+r|0,s+=(i^r^n)+t[9]-640364487|0,s=(s<<4|s>>>28)+i|0,n+=(s^i^r)+t[12]-421815835|0,n=(n<<11|n>>>21)+s|0,r+=(n^s^i)+t[15]+530742520|0,r=(r<<16|r>>>16)+n|0,i+=(r^n^s)+t[2]-995338651|0,i=(i<<23|i>>>9)+r|0,s+=(r^(i|~n))+t[0]-198630844|0,s=(s<<6|s>>>26)+i|0,n+=(i^(s|~r))+t[7]+1126891415|0,n=(n<<10|n>>>22)+s|0,r+=(s^(n|~i))+t[14]-1416354905|0,r=(r<<15|r>>>17)+n|0,i+=(n^(r|~s))+t[5]-57434055|0,i=(i<<21|i>>>11)+r|0,s+=(r^(i|~n))+t[12]+1700485571|0,s=(s<<6|s>>>26)+i|0,n+=(i^(s|~r))+t[3]-1894986606|0,n=(n<<10|n>>>22)+s|0,r+=(s^(n|~i))+t[10]-1051523|0,r=(r<<15|r>>>17)+n|0,i+=(n^(r|~s))+t[1]-2054922799|0,i=(i<<21|i>>>11)+r|0,s+=(r^(i|~n))+t[8]+1873313359|0,s=(s<<6|s>>>26)+i|0,n+=(i^(s|~r))+t[15]-30611744|0,n=(n<<10|n>>>22)+s|0,r+=(s^(n|~i))+t[6]-1560198380|0,r=(r<<15|r>>>17)+n|0,i+=(n^(r|~s))+t[13]+1309151649|0,i=(i<<21|i>>>11)+r|0,s+=(r^(i|~n))+t[4]-145523070|0,s=(s<<6|s>>>26)+i|0,n+=(i^(s|~r))+t[11]-1120210379|0,n=(n<<10|n>>>22)+s|0,r+=(s^(n|~i))+t[2]+718787259|0,r=(r<<15|r>>>17)+n|0,i+=(n^(r|~s))+t[9]-343485551|0,i=(i<<21|i>>>11)+r|0,e[0]=s+e[0]|0,e[1]=i+e[1]|0,e[2]=r+e[2]|0,e[3]=n+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(H.stateIdentity),this}appendStr(e){const t=this._buffer8,s=this._buffer32;let i,r,n=this._bufferLength;for(r=0;r<e.length;r+=1){if(i=e.charCodeAt(r),i<128)t[n++]=i;else if(i<2048)t[n++]=192+(i>>>6),t[n++]=63&i|128;else if(i<55296||i>56319)t[n++]=224+(i>>>12),t[n++]=i>>>6&63|128,t[n++]=63&i|128;else{if(i=1024*(i-55296)+(e.charCodeAt(++r)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[n++]=240+(i>>>18),t[n++]=i>>>12&63|128,t[n++]=i>>>6&63|128,t[n++]=63&i|128}n>=64&&(this._dataLength+=64,H._md5cycle(this._state,s),n-=64,s[0]=s[16])}return this._bufferLength=n,this}appendAsciiStr(e){const t=this._buffer8,s=this._buffer32;let i,r=this._bufferLength,n=0;for(;;){for(i=Math.min(e.length-n,64-r);i--;)t[r++]=e.charCodeAt(n++);if(r<64)break;this._dataLength+=64,H._md5cycle(this._state,s),r=0}return this._bufferLength=r,this}appendByteArray(e){const t=this._buffer8,s=this._buffer32;let i,r=this._bufferLength,n=0;for(;;){for(i=Math.min(e.length-n,64-r);i--;)t[r++]=e[n++];if(r<64)break;this._dataLength+=64,H._md5cycle(this._state,s),r=0}return this._bufferLength=r,this}getState(){const e=this._state;return{buffer:String.fromCharCode.apply(null,this._buffer8),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){const t=e.buffer,s=e.state,i=this._state;let r;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],r=0;r<t.length;r+=1)this._buffer8[r]=t.charCodeAt(r)}end(e=!1){const t=this._bufferLength,s=this._buffer8,i=this._buffer32,r=1+(t>>2);let n;if(this._dataLength+=t,s[t]=128,s[t+1]=s[t+2]=s[t+3]=0,i.set(H.buffer32Identity.subarray(r),r),t>55&&(H._md5cycle(this._state,i),i.set(H.buffer32Identity)),n=8*this._dataLength,n<=4294967295)i[14]=n;else{const e=n.toString(16).match(/(.*?)(.{0,8})$/);if(null===e)return;const t=parseInt(e[2],16),s=parseInt(e[1],16)||0;i[14]=t,i[15]=s}return H._md5cycle(this._state,i),e?this._state:H._hex(this._state)}}H.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),H.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),H.hexChars="0123456789abcdef",H.hexOut=[],H.onePassHasher=new H,"5d41402abc4b2a76b9719d911017c592"!==H.hashStr("hello")&&console.error("Md5 self test failed.");const x={100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"};function k(e,t=32){let s="";for(let i=0;i<e;i++){s+=Math.floor(Math.random()*t).toString(t)}return s}function P(e){return x[e]||""}function N(){return k(10)}function q(e){const t={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},s=e.toLowerCase().replace(/_/g,"-").split("-"),i=s.length;let r="";for(let e=0;e<i;e++)0!==e&&(r+="-"),r+=s[e].charAt(0).toUpperCase()+s[e].substring(1);return t[r]&&(r=t[r]),r}function O(e){return encodeURIComponent(e).replace(/%[A-F\d]{2}/g,"U").length}function U(e){return H.hashStr(e)}class M{constructor(e,t,s,i){this.logger=e.getLogger("sipjs.digestauthentication"),this.username=s,this.password=i,this.ha1=t,this.nc=0,this.ncHex="00000000"}authenticate(e,t,s){if(this.algorithm=t.algorithm,this.realm=t.realm,this.nonce=t.nonce,this.opaque=t.opaque,this.stale=t.stale,this.algorithm){if("MD5"!==this.algorithm)return this.logger.warn("challenge with Digest algorithm different than 'MD5', authentication aborted"),!1}else this.algorithm="MD5";if(!this.realm)return this.logger.warn("challenge without Digest realm, authentication aborted"),!1;if(!this.nonce)return this.logger.warn("challenge without Digest nonce, authentication aborted"),!1;if(t.qop)if(t.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(t.qop.indexOf("auth-int")>-1))return this.logger.warn("challenge without Digest qop different than 'auth' or 'auth-int', authentication aborted"),!1;this.qop="auth-int"}else this.qop=void 0;return this.method=e.method,this.uri=e.ruri,this.cnonce=k(12),this.nc+=1,this.updateNcHex(),4294967296===this.nc&&(this.nc=1,this.ncHex="00000001"),this.calculateResponse(s),!0}toString(){const e=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+this.algorithm),e.push('username="'+this.username+'"'),e.push('realm="'+this.realm+'"'),e.push('nonce="'+this.nonce+'"'),e.push('uri="'+this.uri+'"'),e.push('response="'+this.response+'"'),this.opaque&&e.push('opaque="'+this.opaque+'"'),this.qop&&(e.push("qop="+this.qop),e.push('cnonce="'+this.cnonce+'"'),e.push("nc="+this.ncHex)),"Digest "+e.join(", ")}updateNcHex(){const e=Number(this.nc).toString(16);this.ncHex="00000000".substr(0,8-e.length)+e}calculateResponse(e){let t,s;t=this.ha1,""!==t&&void 0!==t||(t=U(this.username+":"+this.realm+":"+this.password)),"auth"===this.qop?(s=U(this.method+":"+this.uri),this.response=U(t+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+s)):"auth-int"===this.qop?(s=U(this.method+":"+this.uri+":"+U(e||"")),this.response=U(t+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+s)):void 0===this.qop&&(s=U(this.method+":"+this.uri),this.response=U(t+":"+this.nonce+":"+s))}}var L;!function(e){e.ACK="ACK",e.BYE="BYE",e.CANCEL="CANCEL",e.INFO="INFO",e.INVITE="INVITE",e.MESSAGE="MESSAGE",e.NOTIFY="NOTIFY",e.OPTIONS="OPTIONS",e.REGISTER="REGISTER",e.UPDATE="UPDATE",e.SUBSCRIBE="SUBSCRIBE",e.PUBLISH="PUBLISH",e.REFER="REFER",e.PRACK="PRACK"}(L||(L={}));class j{constructor(e,t,s,i,r,n,o){this.headers={},this.extraHeaders=[],this.options=j.getDefaultOptions(),r&&(this.options=Object.assign(Object.assign({},this.options),r),this.options.optionTags&&this.options.optionTags.length&&(this.options.optionTags=this.options.optionTags.slice()),this.options.routeSet&&this.options.routeSet.length&&(this.options.routeSet=this.options.routeSet.slice())),n&&n.length&&(this.extraHeaders=n.slice()),o&&(this.body={body:o.content,contentType:o.contentType}),this.method=e,this.ruri=t.clone(),this.fromURI=s.clone(),this.fromTag=this.options.fromTag?this.options.fromTag:N(),this.from=j.makeNameAddrHeader(this.fromURI,this.options.fromDisplayName,this.fromTag),this.toURI=i.clone(),this.toTag=this.options.toTag,this.to=j.makeNameAddrHeader(this.toURI,this.options.toDisplayName,this.toTag),this.callId=this.options.callId?this.options.callId:this.options.callIdPrefix+k(15),this.cseq=this.options.cseq,this.setHeader("route",this.options.routeSet),this.setHeader("via",""),this.setHeader("to",this.to.toString()),this.setHeader("from",this.from.toString()),this.setHeader("cseq",this.cseq+" "+this.method),this.setHeader("call-id",this.callId),this.setHeader("max-forwards","70")}static getDefaultOptions(){return{callId:"",callIdPrefix:"",cseq:1,toDisplayName:"",toTag:"",fromDisplayName:"",fromTag:"",forceRport:!1,hackViaTcp:!1,optionTags:["outbound"],routeSet:[],userAgentString:"sip.js",viaHost:""}}static makeNameAddrHeader(e,t,s){const i={};return s&&(i.tag=s),new C(e,t,i)}getHeader(e){const t=this.headers[q(e)];if(t){if(t[0])return t[0]}else{const t=new RegExp("^\\s*"+e+"\\s*:","i");for(const e of this.extraHeaders)if(t.test(e))return e.substring(e.indexOf(":")+1).trim()}}getHeaders(e){const t=[],s=this.headers[q(e)];if(s)for(const e of s)t.push(e);else{const s=new RegExp("^\\s*"+e+"\\s*:","i");for(const e of this.extraHeaders)s.test(e)&&t.push(e.substring(e.indexOf(":")+1).trim())}return t}hasHeader(e){if(this.headers[q(e)])return!0;{const t=new RegExp("^\\s*"+e+"\\s*:","i");for(const e of this.extraHeaders)if(t.test(e))return!0}return!1}setHeader(e,t){this.headers[q(e)]=t instanceof Array?t:[t]}setViaHeader(e,t){this.options.hackViaTcp&&(t="TCP");let s="SIP/2.0/"+t;s+=" "+this.options.viaHost+";branch="+e,this.options.forceRport&&(s+=";rport"),this.setHeader("via",s),this.branch=e}toString(){let e="";e+=this.method+" "+this.ruri.toRaw()+" SIP/2.0\r\n";for(const t in this.headers)if(this.headers[t])for(const s of this.headers[t])e+=t+": "+s+"\r\n";for(const t of this.extraHeaders)e+=t.trim()+"\r\n";return e+="Supported: "+this.options.optionTags.join(", ")+"\r\n",e+="User-Agent: "+this.options.userAgentString+"\r\n",this.body?"string"==typeof this.body?(e+="Content-Length: "+O(this.body)+"\r\n\r\n",e+=this.body):this.body.body&&this.body.contentType?(e+="Content-Type: "+this.body.contentType+"\r\n",e+="Content-Length: "+O(this.body.body)+"\r\n\r\n",e+=this.body.body):e+="Content-Length: 0\r\n\r\n":e+="Content-Length: 0\r\n\r\n",e}}function F(e,t){if(t.statusCode<100||t.statusCode>699)throw new TypeError("Invalid statusCode: "+t.statusCode);const s=t.reasonPhrase?t.reasonPhrase:P(t.statusCode);let i="SIP/2.0 "+t.statusCode+" "+s+"\r\n";t.statusCode>=100&&t.statusCode,t.statusCode;const r="From: "+e.getHeader("From")+"\r\n",n="Call-ID: "+e.callId+"\r\n",o="CSeq: "+e.cseq+" "+e.method+"\r\n",a=e.getHeaders("via").reduce((e,t)=>e+"Via: "+t+"\r\n","");let c="To: "+e.getHeader("to");if(t.statusCode>100&&!e.parseHeader("to").hasParam("tag")){let e=t.toTag;e||(e=N()),c+=";tag="+e}c+="\r\n";let h="";t.supported&&(h="Supported: "+t.supported.join(", ")+"\r\n");let d="";t.userAgent&&(d="User-Agent: "+t.userAgent+"\r\n");let l="";return t.extraHeaders&&(l=t.extraHeaders.reduce((e,t)=>e+t.trim()+"\r\n","")),i+=a,i+=r,i+=c,i+=o,i+=n,i+=h,i+=d,i+=l,t.body?(i+="Content-Type: "+t.body.contentType+"\r\n",i+="Content-Length: "+O(t.body.content)+"\r\n\r\n",i+=t.body.content):i+="Content-Length: 0\r\n\r\n",{message:i}}const B=500,G={T1:B,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,TIMER_N:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4};class V extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class K extends V{constructor(e){super(e||"Unspecified transport error.")}}class W{constructor(e,t,s,i,r){this._transport=e,this._user=t,this._id=s,this._state=i,this.listeners=new Array,this.logger=t.loggerFactory.getLogger(r,s),this.logger.debug(`Constructing ${this.typeToString()} with id ${this.id}.`)}dispose(){this.logger.debug(`Destroyed ${this.typeToString()} with id ${this.id}.`)}get id(){return this._id}get kind(){throw new Error("Invalid kind.")}get state(){return this._state}get transport(){return this._transport}addStateChangeListener(e,t){const s=()=>{this.removeStateChangeListener(s),e()};!0===(null==t?void 0:t.once)?this.listeners.push(s):this.listeners.push(e)}notifyStateChangeListeners(){this.listeners.slice().forEach(e=>e())}removeStateChangeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}logTransportError(e,t){this.logger.error(e.message),this.logger.error(`Transport error occurred in ${this.typeToString()} with id ${this.id}.`),this.logger.error(t)}send(e){return this.transport.send(e).catch(e=>{if(e instanceof K)throw this.onTransportError(e),e;let t;throw t=e&&"string"==typeof e.message?new K(e.message):new K,this.onTransportError(t),t})}setState(e){this.logger.debug(`State change to "${e}" on ${this.typeToString()} with id ${this.id}.`),this._state=e,this._user.onStateChange&&this._user.onStateChange(e),this.notifyStateChangeListeners()}typeToString(){return"UnknownType"}}class Y extends W{constructor(e,t,s,i,r){super(t,s,Y.makeId(e),i,r),this._request=e,this.user=s,e.setViaHeader(this.id,t.protocol)}static makeId(e){if("CANCEL"===e.method){if(!e.branch)throw new Error("Outgoing CANCEL request without a branch.");return e.branch}return"z9hG4bK"+Math.floor(1e7*Math.random())}get request(){return this._request}onRequestTimeout(){this.user.onRequestTimeout&&this.user.onRequestTimeout()}}var J,Z,X,z;!function(e){e.Accepted="Accepted",e.Calling="Calling",e.Completed="Completed",e.Confirmed="Confirmed",e.Proceeding="Proceeding",e.Terminated="Terminated",e.Trying="Trying"}(J||(J={}));class Q extends Y{constructor(e,t,s){super(e,t,s,J.Trying,"sip.transaction.nict"),this.F=setTimeout(()=>this.timerF(),G.TIMER_F),this.send(e.toString()).catch(e=>{this.logTransportError(e,"Failed to send initial outgoing request.")})}dispose(){this.F&&(clearTimeout(this.F),this.F=void 0),this.K&&(clearTimeout(this.K),this.K=void 0),super.dispose()}get kind(){return"nict"}receiveResponse(e){const t=e.statusCode;if(!t||t<100||t>699)throw new Error("Invalid status code "+t);switch(this.state){case J.Trying:if(t>=100&&t<=199)return this.stateTransition(J.Proceeding),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=200&&t<=699)return this.stateTransition(J.Completed),408===t?void this.onRequestTimeout():void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case J.Proceeding:if(t>=100&&t<=199&&this.user.receiveResponse)return this.user.receiveResponse(e);if(t>=200&&t<=699)return this.stateTransition(J.Completed),408===t?void this.onRequestTimeout():void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case J.Completed:case J.Terminated:return;default:throw new Error("Invalid state "+this.state)}const s=`Non-INVITE client transaction received unexpected ${t} response while in state ${this.state}.`;this.logger.warn(s)}onTransportError(e){this.user.onTransportError&&this.user.onTransportError(e),this.stateTransition(J.Terminated,!0)}typeToString(){return"non-INVITE client transaction"}stateTransition(e,t=!1){const s=()=>{throw new Error(`Invalid state transition from ${this.state} to ${e}`)};switch(e){case J.Trying:s();break;case J.Proceeding:this.state!==J.Trying&&s();break;case J.Completed:this.state!==J.Trying&&this.state!==J.Proceeding&&s();break;case J.Terminated:this.state!==J.Trying&&this.state!==J.Proceeding&&this.state!==J.Completed&&(t||s());break;default:s()}e===J.Completed&&(this.F&&(clearTimeout(this.F),this.F=void 0),this.K=setTimeout(()=>this.timerK(),G.TIMER_K)),e===J.Terminated&&this.dispose(),this.setState(e)}timerF(){this.logger.debug(`Timer F expired for non-INVITE client transaction ${this.id}.`),this.state!==J.Trying&&this.state!==J.Proceeding||(this.onRequestTimeout(),this.stateTransition(J.Terminated))}timerK(){this.state===J.Completed&&this.stateTransition(J.Terminated)}}class ee extends W{constructor(e,t,s,i,r){super(t,s,e.viaBranch,i,r),this._request=e,this.user=s}get request(){return this._request}}class te extends ee{constructor(e,t,s){super(e,t,s,J.Proceeding,"sip.transaction.ist")}dispose(){this.stopProgressExtensionTimer(),this.H&&(clearTimeout(this.H),this.H=void 0),this.I&&(clearTimeout(this.I),this.I=void 0),this.L&&(clearTimeout(this.L),this.L=void 0),super.dispose()}get kind(){return"ist"}receiveRequest(e){switch(this.state){case J.Proceeding:if(e.method===L.INVITE)return void(this.lastProvisionalResponse&&this.send(this.lastProvisionalResponse).catch(e=>{this.logTransportError(e,"Failed to send retransmission of provisional response.")}));break;case J.Accepted:if(e.method===L.INVITE)return;break;case J.Completed:if(e.method===L.INVITE){if(!this.lastFinalResponse)throw new Error("Last final response undefined.");return void this.send(this.lastFinalResponse).catch(e=>{this.logTransportError(e,"Failed to send retransmission of final response.")})}if(e.method===L.ACK)return void this.stateTransition(J.Confirmed);break;case J.Confirmed:case J.Terminated:if(e.method===L.INVITE||e.method===L.ACK)return;break;default:throw new Error("Invalid state "+this.state)}const t=`INVITE server transaction received unexpected ${e.method} request while in state ${this.state}.`;this.logger.warn(t)}receiveResponse(e,t){if(e<100||e>699)throw new Error("Invalid status code "+e);switch(this.state){case J.Proceeding:if(e>=100&&e<=199)return this.lastProvisionalResponse=t,e>100&&this.startProgressExtensionTimer(),void this.send(t).catch(e=>{this.logTransportError(e,"Failed to send 1xx response.")});if(e>=200&&e<=299)return this.lastFinalResponse=t,this.stateTransition(J.Accepted),void this.send(t).catch(e=>{this.logTransportError(e,"Failed to send 2xx response.")});if(e>=300&&e<=699)return this.lastFinalResponse=t,this.stateTransition(J.Completed),void this.send(t).catch(e=>{this.logTransportError(e,"Failed to send non-2xx final response.")});break;case J.Accepted:if(e>=200&&e<=299)return void this.send(t).catch(e=>{this.logTransportError(e,"Failed to send 2xx response.")});break;case J.Completed:case J.Confirmed:case J.Terminated:break;default:throw new Error("Invalid state "+this.state)}const s=`INVITE server transaction received unexpected ${e} response from TU while in state ${this.state}.`;throw this.logger.error(s),new Error(s)}retransmitAcceptedResponse(){this.state===J.Accepted&&this.lastFinalResponse&&this.send(this.lastFinalResponse).catch(e=>{this.logTransportError(e,"Failed to send 2xx response.")})}onTransportError(e){this.user.onTransportError&&this.user.onTransportError(e)}typeToString(){return"INVITE server transaction"}stateTransition(e){const t=()=>{throw new Error(`Invalid state transition from ${this.state} to ${e}`)};switch(e){case J.Proceeding:t();break;case J.Accepted:case J.Completed:this.state!==J.Proceeding&&t();break;case J.Confirmed:this.state!==J.Completed&&t();break;case J.Terminated:this.state!==J.Accepted&&this.state!==J.Completed&&this.state!==J.Confirmed&&t();break;default:t()}this.stopProgressExtensionTimer(),e===J.Accepted&&(this.L=setTimeout(()=>this.timerL(),G.TIMER_L)),e===J.Completed&&(this.H=setTimeout(()=>this.timerH(),G.TIMER_H)),e===J.Confirmed&&(this.I=setTimeout(()=>this.timerI(),G.TIMER_I)),e===J.Terminated&&this.dispose(),this.setState(e)}startProgressExtensionTimer(){void 0===this.progressExtensionTimer&&(this.progressExtensionTimer=setInterval(()=>{if(this.logger.debug(`Progress extension timer expired for INVITE server transaction ${this.id}.`),!this.lastProvisionalResponse)throw new Error("Last provisional response undefined.");this.send(this.lastProvisionalResponse).catch(e=>{this.logTransportError(e,"Failed to send retransmission of provisional response.")})},G.PROVISIONAL_RESPONSE_INTERVAL))}stopProgressExtensionTimer(){void 0!==this.progressExtensionTimer&&(clearInterval(this.progressExtensionTimer),this.progressExtensionTimer=void 0)}timerG(){}timerH(){this.logger.debug(`Timer H expired for INVITE server transaction ${this.id}.`),this.state===J.Completed&&(this.logger.warn("ACK to negative final response was never received, terminating transaction."),this.stateTransition(J.Terminated))}timerI(){this.logger.debug(`Timer I expired for INVITE server transaction ${this.id}.`),this.stateTransition(J.Terminated)}timerL(){this.logger.debug(`Timer L expired for INVITE server transaction ${this.id}.`),this.state===J.Accepted&&this.stateTransition(J.Terminated)}}class se{constructor(e,t){this.core=e,this.dialogState=t,this.core.dialogs.set(this.id,this)}static initialDialogStateForUserAgentClient(e,t){const s=t.getHeaders("record-route").reverse(),i=t.parseHeader("contact");if(!i)throw new Error("Contact undefined.");if(!(i instanceof C))throw new Error("Contact not instance of NameAddrHeader.");const r=i.uri,n=e.cseq,o=e.callId,a=e.fromTag,c=t.toTag;if(!o)throw new Error("Call id undefined.");if(!a)throw new Error("From tag undefined.");if(!c)throw new Error("To tag undefined.");if(!e.from)throw new Error("From undefined.");if(!e.to)throw new Error("To undefined.");const h=e.from.uri,d=e.to.uri;if(!t.statusCode)throw new Error("Incoming response status code undefined.");return{id:o+a+c,early:t.statusCode<200,callId:o,localTag:a,remoteTag:c,localSequenceNumber:n,remoteSequenceNumber:void 0,localURI:h,remoteURI:d,remoteTarget:r,routeSet:s,secure:!1}}static initialDialogStateForUserAgentServer(e,t,s=!1){const i=e.getHeaders("record-route"),r=e.parseHeader("contact");if(!r)throw new Error("Contact undefined.");if(!(r instanceof C))throw new Error("Contact not instance of NameAddrHeader.");const n=r.uri,o=e.cseq,a=e.callId,c=t,h=e.fromTag,d=e.from.uri;return{id:a+c+h,early:s,callId:a,localTag:c,remoteTag:h,localSequenceNumber:void 0,remoteSequenceNumber:o,localURI:e.to.uri,remoteURI:d,remoteTarget:n,routeSet:i,secure:!1}}dispose(){this.core.dialogs.delete(this.id)}get id(){return this.dialogState.id}get early(){return this.dialogState.early}get callId(){return this.dialogState.callId}get localTag(){return this.dialogState.localTag}get remoteTag(){return this.dialogState.remoteTag}get localSequenceNumber(){return this.dialogState.localSequenceNumber}get remoteSequenceNumber(){return this.dialogState.remoteSequenceNumber}get localURI(){return this.dialogState.localURI}get remoteURI(){return this.dialogState.remoteURI}get remoteTarget(){return this.dialogState.remoteTarget}get routeSet(){return this.dialogState.routeSet}get secure(){return this.dialogState.secure}get userAgentCore(){return this.core}confirm(){this.dialogState.early=!1}receiveRequest(e){if(e.method!==L.ACK){if(this.remoteSequenceNumber){if(e.cseq<=this.remoteSequenceNumber)throw new Error("Out of sequence in dialog request. Did you forget to call sequenceGuard()?");this.dialogState.remoteSequenceNumber=e.cseq}this.remoteSequenceNumber||(this.dialogState.remoteSequenceNumber=e.cseq)}}recomputeRouteSet(e){this.dialogState.routeSet=e.getHeaders("record-route").reverse()}createOutgoingRequestMessage(e,t){const s=this.remoteURI,i=this.remoteTag,r=this.localURI,n=this.localTag,o=this.callId;let a;a=t&&t.cseq?t.cseq:this.dialogState.localSequenceNumber?this.dialogState.localSequenceNumber+=1:this.dialogState.localSequenceNumber=1;const c=this.remoteTarget,h=this.routeSet,d=t&&t.extraHeaders,l=t&&t.body;return this.userAgentCore.makeOutgoingRequestMessage(e,c,r,s,{callId:o,cseq:a,fromTag:n,toTag:i,routeSet:h},d,l)}incrementLocalSequenceNumber(){if(!this.dialogState.localSequenceNumber)throw new Error("Local sequence number undefined.");this.dialogState.localSequenceNumber+=1}sequenceGuard(e){return e.method===L.ACK||(!(this.remoteSequenceNumber&&e.cseq<=this.remoteSequenceNumber)||(this.core.replyStateless(e,{statusCode:500}),!1))}}class ie{constructor(){this.headers={}}addHeader(e,t){const s={raw:t};e=q(e),this.headers[e]?this.headers[e].push(s):this.headers[e]=[s]}getHeader(e){const t=this.headers[q(e)];if(t)return t[0]?t[0].raw:void 0}getHeaders(e){const t=this.headers[q(e)],s=[];if(!t)return[];for(const e of t)s.push(e.raw);return s}hasHeader(e){return!!this.headers[q(e)]}parseHeader(e,t=0){if(e=q(e),!this.headers[e])return;if(t>=this.headers[e].length)return;const s=this.headers[e][t],i=s.raw;if(s.parsed)return s.parsed;const r=D.parse(i,e.replace(/-/g,"_"));return-1===r?void this.headers[e].splice(t,1):(s.parsed=r,r)}s(e,t=0){return this.parseHeader(e,t)}setHeader(e,t){this.headers[q(e)]=[{raw:t}]}toString(){return this.data}}class re extends ie{constructor(){super()}}class ne extends ie{constructor(){super()}}function oe(e){return"application/sdp"===e?"session":"render"}function ae(e){const t="string"==typeof e?e:e.body,s="string"==typeof e?"application/sdp":e.contentType;return{contentDisposition:oe(s),contentType:s,content:t}}function ce(e){return!(!e||"string"!=typeof e.content||"string"!=typeof e.contentType||void 0!==e.contentDisposition)||"string"==typeof e.contentDisposition}function he(e){let t,s,i;if(e instanceof re&&e.body){const r=e.parseHeader("Content-Disposition");t=r?r.type:void 0,s=e.parseHeader("Content-Type"),i=e.body}if(e instanceof ne&&e.body){const r=e.parseHeader("Content-Disposition");t=r?r.type:void 0,s=e.parseHeader("Content-Type"),i=e.body}if(e instanceof j&&e.body)if(t=e.getHeader("Content-Disposition"),s=e.getHeader("Content-Type"),"string"==typeof e.body){if(!s)throw new Error("Header content type header does not equal body content type.");i=e.body}else{if(s&&s!==e.body.contentType)throw new Error("Header content type header does not equal body content type.");s=e.body.contentType,i=e.body.body}if(ce(e)&&(t=e.contentDisposition,s=e.contentType,i=e.content),i){if(s&&!t&&(t=oe(s)),!t)throw new Error("Content disposition undefined.");if(!s)throw new Error("Content type undefined.");return{contentDisposition:t,contentType:s,content:i}}}!function(e){e.Initial="Initial",e.Early="Early",e.AckWait="AckWait",e.Confirmed="Confirmed",e.Terminated="Terminated"}(Z||(Z={})),function(e){e.Initial="Initial",e.HaveLocalOffer="HaveLocalOffer",e.HaveRemoteOffer="HaveRemoteOffer",e.Stable="Stable",e.Closed="Closed"}(X||(X={}));class de extends Y{constructor(e,t,s){super(e,t,s,J.Calling,"sip.transaction.ict"),this.ackRetransmissionCache=new Map,this.B=setTimeout(()=>this.timerB(),G.TIMER_B),this.send(e.toString()).catch(e=>{this.logTransportError(e,"Failed to send initial outgoing request.")})}dispose(){this.B&&(clearTimeout(this.B),this.B=void 0),this.D&&(clearTimeout(this.D),this.D=void 0),this.M&&(clearTimeout(this.M),this.M=void 0),super.dispose()}get kind(){return"ict"}ackResponse(e){const t=e.toTag;if(!t)throw new Error("To tag undefined.");const s="z9hG4bK"+Math.floor(1e7*Math.random());e.setViaHeader(s,this.transport.protocol),this.ackRetransmissionCache.set(t,e),this.send(e.toString()).catch(e=>{this.logTransportError(e,"Failed to send ACK to 2xx response.")})}receiveResponse(e){const t=e.statusCode;if(!t||t<100||t>699)throw new Error("Invalid status code "+t);switch(this.state){case J.Calling:if(t>=100&&t<=199)return this.stateTransition(J.Proceeding),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=200&&t<=299)return this.ackRetransmissionCache.set(e.toTag,void 0),this.stateTransition(J.Accepted),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=300&&t<=699)return this.stateTransition(J.Completed),this.ack(e),void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case J.Proceeding:if(t>=100&&t<=199)return void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=200&&t<=299)return this.ackRetransmissionCache.set(e.toTag,void 0),this.stateTransition(J.Accepted),void(this.user.receiveResponse&&this.user.receiveResponse(e));if(t>=300&&t<=699)return this.stateTransition(J.Completed),this.ack(e),void(this.user.receiveResponse&&this.user.receiveResponse(e));break;case J.Accepted:if(t>=200&&t<=299){if(!this.ackRetransmissionCache.has(e.toTag))return this.ackRetransmissionCache.set(e.toTag,void 0),void(this.user.receiveResponse&&this.user.receiveResponse(e));const t=this.ackRetransmissionCache.get(e.toTag);return t?void this.send(t.toString()).catch(e=>{this.logTransportError(e,"Failed to send retransmission of ACK to 2xx response.")}):void 0}break;case J.Completed:if(t>=300&&t<=699)return void this.ack(e);break;case J.Terminated:break;default:throw new Error("Invalid state "+this.state)}const s=`Received unexpected ${t} response while in state ${this.state}.`;this.logger.warn(s)}onTransportError(e){this.user.onTransportError&&this.user.onTransportError(e),this.stateTransition(J.Terminated,!0)}typeToString(){return"INVITE client transaction"}ack(e){const t=this.request.ruri,s=this.request.callId,i=this.request.cseq,r=this.request.getHeader("from"),n=e.getHeader("to"),o=this.request.getHeader("via"),a=this.request.getHeader("route");if(!r)throw new Error("From undefined.");if(!n)throw new Error("To undefined.");if(!o)throw new Error("Via undefined.");let c=`ACK ${t} SIP/2.0\r\n`;a&&(c+=`Route: ${a}\r\n`),c+=`Via: ${o}\r\n`,c+=`To: ${n}\r\n`,c+=`From: ${r}\r\n`,c+=`Call-ID: ${s}\r\n`,c+=`CSeq: ${i} ACK\r\n`,c+="Max-Forwards: 70\r\n",c+="Content-Length: 0\r\n\r\n",this.send(c).catch(e=>{this.logTransportError(e,"Failed to send ACK to non-2xx response.")})}stateTransition(e,t=!1){const s=()=>{throw new Error(`Invalid state transition from ${this.state} to ${e}`)};switch(e){case J.Calling:s();break;case J.Proceeding:this.state!==J.Calling&&s();break;case J.Accepted:case J.Completed:this.state!==J.Calling&&this.state!==J.Proceeding&&s();break;case J.Terminated:this.state!==J.Calling&&this.state!==J.Accepted&&this.state!==J.Completed&&(t||s());break;default:s()}this.B&&(clearTimeout(this.B),this.B=void 0),J.Proceeding,e===J.Completed&&(this.D=setTimeout(()=>this.timerD(),G.TIMER_D)),e===J.Accepted&&(this.M=setTimeout(()=>this.timerM(),G.TIMER_M)),e===J.Terminated&&this.dispose(),this.setState(e)}timerA(){}timerB(){this.logger.debug(`Timer B expired for INVITE client transaction ${this.id}.`),this.state===J.Calling&&(this.onRequestTimeout(),this.stateTransition(J.Terminated))}timerD(){this.logger.debug(`Timer D expired for INVITE client transaction ${this.id}.`),this.state===J.Completed&&this.stateTransition(J.Terminated)}timerM(){this.logger.debug(`Timer M expired for INVITE client transaction ${this.id}.`),this.state===J.Accepted&&this.stateTransition(J.Terminated)}}class le{constructor(e,t,s,i){this.transactionConstructor=e,this.core=t,this.message=s,this.delegate=i,this.challenged=!1,this.stale=!1,this.logger=this.loggerFactory.getLogger("sip.user-agent-client"),this.init()}dispose(){this.transaction.dispose()}get loggerFactory(){return this.core.loggerFactory}get transaction(){if(!this._transaction)throw new Error("Transaction undefined.");return this._transaction}cancel(e,t={}){if(!this.transaction)throw new Error("Transaction undefined.");if(!this.message.to)throw new Error("To undefined.");if(!this.message.from)throw new Error("From undefined.");const s=this.core.makeOutgoingRequestMessage(L.CANCEL,this.message.ruri,this.message.from.uri,this.message.to.uri,{toTag:this.message.toTag,fromTag:this.message.fromTag,callId:this.message.callId,cseq:this.message.cseq},t.extraHeaders);return s.branch=this.message.branch,this.message.headers.Route&&(s.headers.Route=this.message.headers.Route),e&&s.setHeader("Reason",e),this.transaction.state===J.Proceeding?new le(Q,this.core,s):this.transaction.addStateChangeListener(()=>{this.transaction&&this.transaction.state===J.Proceeding&&new le(Q,this.core,s)},{once:!0}),s}authenticationGuard(e,t){const s=e.statusCode;if(!s)throw new Error("Response status code undefined.");if(401!==s&&407!==s)return!0;let i,r;if(401===s?(i=e.parseHeader("www-authenticate"),r="authorization"):(i=e.parseHeader("proxy-authenticate"),r="proxy-authorization"),!i)return this.logger.warn(s+" with wrong or missing challenge, cannot authenticate"),!0;if(this.challenged&&(this.stale||!0!==i.stale))return this.logger.warn(s+" apparently in authentication loop, cannot authenticate"),!0;if(!this.credentials&&(this.credentials=this.core.configuration.authenticationFactory(),!this.credentials))return this.logger.warn("Unable to obtain credentials, cannot authenticate"),!0;if(!this.credentials.authenticate(this.message,i))return!0;this.challenged=!0,i.stale&&(this.stale=!0);let n=this.message.cseq+=1;return t&&t.localSequenceNumber&&(t.incrementLocalSequenceNumber(),n=this.message.cseq=t.localSequenceNumber),this.message.setHeader("cseq",n+" "+this.message.method),this.message.setHeader(r,this.credentials.toString()),this.init(),!1}onRequestTimeout(){this.logger.warn("User agent client request timed out. Generating internal 408 Request Timeout.");const e=new ne;e.statusCode=408,e.reasonPhrase="Request Timeout",this.receiveResponse(e)}onTransportError(e){this.logger.error(e.message),this.logger.error("User agent client request transport error. Generating internal 503 Service Unavailable.");const t=new ne;t.statusCode=503,t.reasonPhrase="Service Unavailable",this.receiveResponse(t)}receiveResponse(e){if(!this.authenticationGuard(e))return;const t=e.statusCode?e.statusCode.toString():"";if(!t)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(t):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:e});break;case/^1[0-9]{2}$/.test(t):this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:e});break;case/^2[0-9]{2}$/.test(t):this.delegate&&this.delegate.onAccept&&this.delegate.onAccept({message:e});break;case/^3[0-9]{2}$/.test(t):this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:e});break;case/^[4-6][0-9]{2}$/.test(t):this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:e});break;default:throw new Error("Invalid status code "+t)}}init(){const e={loggerFactory:this.loggerFactory,onRequestTimeout:()=>this.onRequestTimeout(),onStateChange:e=>{e===J.Terminated&&(this.core.userAgentClients.delete(s),t===this._transaction&&this.dispose())},onTransportError:e=>this.onTransportError(e),receiveResponse:e=>this.receiveResponse(e)},t=new this.transactionConstructor(this.message,this.core.transport,e);this._transaction=t;const s=t.id+t.request.method;this.core.userAgentClients.set(s,this)}}class ge extends le{constructor(e,t,s){const i=e.createOutgoingRequestMessage(L.BYE,s);super(Q,e.userAgentCore,i,t),e.dispose()}}class ue extends ee{constructor(e,t,s){super(e,t,s,J.Trying,"sip.transaction.nist")}dispose(){this.J&&(clearTimeout(this.J),this.J=void 0),super.dispose()}get kind(){return"nist"}receiveRequest(e){switch(this.state){case J.Trying:break;case J.Proceeding:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(e=>{this.logTransportError(e,"Failed to send retransmission of provisional response.")});break;case J.Completed:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(e=>{this.logTransportError(e,"Failed to send retransmission of final response.")});break;case J.Terminated:break;default:throw new Error("Invalid state "+this.state)}}receiveResponse(e,t){if(e<100||e>699)throw new Error("Invalid status code "+e);if(e>100&&e<=199)throw new Error("Provisional response other than 100 not allowed.");switch(this.state){case J.Trying:if(this.lastResponse=t,e>=100&&e<200)return this.stateTransition(J.Proceeding),void this.send(t).catch(e=>{this.logTransportError(e,"Failed to send provisional response.")});if(e>=200&&e<=699)return this.stateTransition(J.Completed),void this.send(t).catch(e=>{this.logTransportError(e,"Failed to send final response.")});break;case J.Proceeding:if(this.lastResponse=t,e>=200&&e<=699)return this.stateTransition(J.Completed),void this.send(t).catch(e=>{this.logTransportError(e,"Failed to send final response.")});break;case J.Completed:return;case J.Terminated:break;default:throw new Error("Invalid state "+this.state)}const s=`Non-INVITE server transaction received unexpected ${e} response from TU while in state ${this.state}.`;throw this.logger.error(s),new Error(s)}onTransportError(e){this.user.onTransportError&&this.user.onTransportError(e),this.stateTransition(J.Terminated,!0)}typeToString(){return"non-INVITE server transaction"}stateTransition(e,t=!1){const s=()=>{throw new Error(`Invalid state transition from ${this.state} to ${e}`)};switch(e){case J.Trying:s();break;case J.Proceeding:this.state!==J.Trying&&s();break;case J.Completed:this.state!==J.Trying&&this.state!==J.Proceeding&&s();break;case J.Terminated:this.state!==J.Proceeding&&this.state!==J.Completed&&(t||s());break;default:s()}e===J.Completed&&(this.J=setTimeout(()=>this.timerJ(),G.TIMER_J)),e===J.Terminated&&this.dispose(),this.setState(e)}timerJ(){this.logger.debug(`Timer J expired for NON-INVITE server transaction ${this.id}.`),this.state===J.Completed&&this.stateTransition(J.Terminated)}}class pe extends V{constructor(e){super(e||"Transaction state error.")}}class fe{constructor(e,t,s,i){this.transactionConstructor=e,this.core=t,this.message=s,this.delegate=i,this.logger=this.loggerFactory.getLogger("sip.user-agent-server"),this.toTag=s.toTag?s.toTag:N(),this.init()}dispose(){this.transaction.dispose()}get loggerFactory(){return this.core.loggerFactory}get transaction(){if(!this._transaction)throw new Error("Transaction undefined.");return this._transaction}accept(e={statusCode:200}){if(!this.acceptable)throw new pe(`${this.message.method} not acceptable in state ${this.transaction.state}.`);const t=e.statusCode;if(t<200||t>299)throw new TypeError("Invalid statusCode: "+t);return this.reply(e)}progress(e={statusCode:180}){if(!this.progressable)throw new pe(`${this.message.method} not progressable in state ${this.transaction.state}.`);const t=e.statusCode;if(t<101||t>199)throw new TypeError("Invalid statusCode: "+t);return this.reply(e)}redirect(e,t={statusCode:302}){if(!this.redirectable)throw new pe(`${this.message.method} not redirectable in state ${this.transaction.state}.`);const s=t.statusCode;if(s<300||s>399)throw new TypeError("Invalid statusCode: "+s);const i=new Array;e.forEach(e=>i.push("Contact: "+e.toString())),t.extraHeaders=(t.extraHeaders||[]).concat(i);return this.reply(t)}reject(e={statusCode:480}){if(!this.rejectable)throw new pe(`${this.message.method} not rejectable in state ${this.transaction.state}.`);const t=e.statusCode;if(t<400||t>699)throw new TypeError("Invalid statusCode: "+t);return this.reply(e)}trying(e){if(!this.tryingable)throw new pe(`${this.message.method} not tryingable in state ${this.transaction.state}.`);return this.reply({statusCode:100})}receiveCancel(e){this.delegate&&this.delegate.onCancel&&this.delegate.onCancel(e)}get acceptable(){if(this.transaction instanceof te)return this.transaction.state===J.Proceeding||this.transaction.state===J.Accepted;if(this.transaction instanceof ue)return this.transaction.state===J.Trying||this.transaction.state===J.Proceeding;throw new Error("Unknown transaction type.")}get progressable(){if(this.transaction instanceof te)return this.transaction.state===J.Proceeding;if(this.transaction instanceof ue)return!1;throw new Error("Unknown transaction type.")}get redirectable(){if(this.transaction instanceof te)return this.transaction.state===J.Proceeding;if(this.transaction instanceof ue)return this.transaction.state===J.Trying||this.transaction.state===J.Proceeding;throw new Error("Unknown transaction type.")}get rejectable(){if(this.transaction instanceof te)return this.transaction.state===J.Proceeding;if(this.transaction instanceof ue)return this.transaction.state===J.Trying||this.transaction.state===J.Proceeding;throw new Error("Unknown transaction type.")}get tryingable(){if(this.transaction instanceof te)return this.transaction.state===J.Proceeding;if(this.transaction instanceof ue)return this.transaction.state===J.Trying;throw new Error("Unknown transaction type.")}reply(e){e.toTag||100===e.statusCode||(e.toTag=this.toTag),e.userAgent=e.userAgent||this.core.configuration.userAgentHeaderFieldValue,e.supported=e.supported||this.core.configuration.supportedOptionTagsResponse;const t=F(this.message,e);return this.transaction.receiveResponse(e.statusCode,t.message),t}init(){const e={loggerFactory:this.loggerFactory,onStateChange:e=>{e===J.Terminated&&(this.core.userAgentServers.delete(s),this.dispose())},onTransportError:e=>{this.logger.error(e.message),this.delegate&&this.delegate.onTransportError?this.delegate.onTransportError(e):this.logger.error("User agent server response transport error.")}},t=new this.transactionConstructor(this.message,this.core.transport,e);this._transaction=t;const s=t.id;this.core.userAgentServers.set(t.id,this)}}class me extends fe{constructor(e,t,s){super(ue,e.userAgentCore,t,s)}}class ve extends le{constructor(e,t,s){const i=e.createOutgoingRequestMessage(L.INFO,s);super(Q,e.userAgentCore,i,t)}}class we extends fe{constructor(e,t,s){super(ue,e.userAgentCore,t,s)}}class Te extends le{constructor(e,t,s){super(Q,e,t,s)}}class ye extends fe{constructor(e,t,s){super(ue,e,t,s)}}class be extends le{constructor(e,t,s){const i=e.createOutgoingRequestMessage(L.NOTIFY,s);super(Q,e.userAgentCore,i,t)}}class Ee extends fe{constructor(e,t,s){const i=void 0!==e.userAgentCore?e.userAgentCore:e;super(ue,i,t,s)}}class Se extends le{constructor(e,t,s){const i=e.createOutgoingRequestMessage(L.PRACK,s);super(Q,e.userAgentCore,i,t),e.signalingStateTransition(i)}}class Re extends fe{constructor(e,t,s){super(ue,e.userAgentCore,t,s),e.signalingStateTransition(t),this.dialog=e}accept(e={statusCode:200}){return e.body&&this.dialog.signalingStateTransition(e.body),super.accept(e)}}class Ie extends le{constructor(e,t,s){const i=e.createOutgoingRequestMessage(L.INVITE,s);super(de,e.userAgentCore,i,t),this.delegate=t,e.signalingStateTransition(i),e.reinviteUserAgentClient=this,this.dialog=e}receiveResponse(e){if(!this.authenticationGuard(e,this.dialog))return;const t=e.statusCode?e.statusCode.toString():"";if(!t)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(t):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:e});break;case/^1[0-9]{2}$/.test(t):this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:e,session:this.dialog,prack:e=>{throw new Error("Unimplemented.")}});break;case/^2[0-9]{2}$/.test(t):this.dialog.signalingStateTransition(e),this.delegate&&this.delegate.onAccept&&this.delegate.onAccept({message:e,session:this.dialog,ack:e=>this.dialog.ack(e)});break;case/^3[0-9]{2}$/.test(t):this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentClient=void 0,this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:e});break;case/^[4-6][0-9]{2}$/.test(t):this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentClient=void 0,this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:e});break;default:throw new Error("Invalid status code "+t)}}}class Ce extends fe{constructor(e,t,s){super(te,e.userAgentCore,t,s),e.reinviteUserAgentServer=this,this.dialog=e}accept(e={statusCode:200}){e.extraHeaders=e.extraHeaders||[],e.extraHeaders=e.extraHeaders.concat(this.dialog.routeSet.map(e=>"Record-Route: "+e));const t=super.accept(e),s=this.dialog,i=Object.assign(Object.assign({},t),{session:s});return e.body&&this.dialog.signalingStateTransition(e.body),this.dialog.reConfirm(),i}progress(e={statusCode:180}){const t=super.progress(e),s=this.dialog,i=Object.assign(Object.assign({},t),{session:s});return e.body&&this.dialog.signalingStateTransition(e.body),i}redirect(e,t={statusCode:302}){throw this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentServer=void 0,new Error("Unimplemented.")}reject(e={statusCode:488}){return this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentServer=void 0,super.reject(e)}}class $e extends le{constructor(e,t,s){const i=e.createOutgoingRequestMessage(L.REFER,s);super(Q,e.userAgentCore,i,t)}}class Ae extends fe{constructor(e,t,s){const i=void 0!==e.userAgentCore?e.userAgentCore:e;super(ue,i,t,s)}}class De extends se{constructor(e,t,s,i){super(t,s),this.initialTransaction=e,this._signalingState=X.Initial,this.ackWait=!1,this.ackProcessing=!1,this.delegate=i,e instanceof te&&(this.ackWait=!0),this.early||this.start2xxRetransmissionTimer(),this.signalingStateTransition(e.request),this.logger=t.loggerFactory.getLogger("sip.invite-dialog"),this.logger.log(`INVITE dialog ${this.id} constructed`)}dispose(){super.dispose(),this._signalingState=X.Closed,this._offer=void 0,this._answer=void 0,this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.logger.log(`INVITE dialog ${this.id} destroyed`)}get sessionState(){return this.early?Z.Early:this.ackWait?Z.AckWait:this._signalingState===X.Closed?Z.Terminated:Z.Confirmed}get signalingState(){return this._signalingState}get offer(){return this._offer}get answer(){return this._answer}confirm(){this.early&&this.start2xxRetransmissionTimer(),super.confirm()}reConfirm(){this.reinviteUserAgentServer&&this.startReInvite2xxRetransmissionTimer()}ack(e={}){let t;if(this.logger.log(`INVITE dialog ${this.id} sending ACK request`),this.reinviteUserAgentClient){if(!(this.reinviteUserAgentClient.transaction instanceof de))throw new Error("Transaction not instance of InviteClientTransaction.");t=this.reinviteUserAgentClient.transaction,this.reinviteUserAgentClient=void 0}else{if(!(this.initialTransaction instanceof de))throw new Error("Initial transaction not instance of InviteClientTransaction.");t=this.initialTransaction}const s=this.createOutgoingRequestMessage(L.ACK,{cseq:t.request.cseq,extraHeaders:e.extraHeaders,body:e.body});return t.ackResponse(s),this.signalingStateTransition(s),{message:s}}bye(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending BYE request`),this.initialTransaction instanceof te){if(this.early)throw new Error("UAS MUST NOT send a BYE on early dialogs.");if(this.ackWait&&this.initialTransaction.state!==J.Terminated)throw new Error("UAS MUST NOT send a BYE on a confirmed dialog until it has received an ACK for its 2xx response or until the server transaction times out.")}return new ge(this,e,t)}info(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending INFO request`),this.early)throw new Error("Dialog not confirmed.");return new ve(this,e,t)}invite(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending INVITE request`),this.early)throw new Error("Dialog not confirmed.");if(this.reinviteUserAgentClient)throw new Error("There is an ongoing re-INVITE client transaction.");if(this.reinviteUserAgentServer)throw new Error("There is an ongoing re-INVITE server transaction.");return new Ie(this,e,t)}message(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending MESSAGE request`),this.early)throw new Error("Dialog not confirmed.");const s=this.createOutgoingRequestMessage(L.MESSAGE,t);return new Te(this.core,s,e)}notify(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending NOTIFY request`),this.early)throw new Error("Dialog not confirmed.");return new be(this,e,t)}prack(e,t){return this.logger.log(`INVITE dialog ${this.id} sending PRACK request`),new Se(this,e,t)}refer(e,t){if(this.logger.log(`INVITE dialog ${this.id} sending REFER request`),this.early)throw new Error("Dialog not confirmed.");return new $e(this,e,t)}receiveRequest(e){if(this.logger.log(`INVITE dialog ${this.id} received ${e.method} request`),e.method!==L.ACK)if(this.sequenceGuard(e)){if(super.receiveRequest(e),e.method===L.INVITE){const t=()=>{const e=this.ackWait?"waiting for initial ACK":"processing initial ACK";this.logger.warn(`INVITE dialog ${this.id} received re-INVITE while ${e}`);let t="RFC 5407 suggests the following to avoid this race condition... ";t+=" Note: Implementation issues are outside the scope of this document,",t+=" but the following tip is provided for avoiding race conditions of",t+=" this type.  The caller can delay sending re-INVITE F6 for some period",t+=" of time (2 seconds, perhaps), after which the caller can reasonably",t+=" assume that its ACK has been received.  Implementors can decouple the",t+=" actions of the user (e.g., pressing the hold button) from the actions",t+=" of the protocol (the sending of re-INVITE F6), so that the UA can",t+=" behave like this.  In this case, it is the implementor's choice as to",t+=" how long to wait.  In most cases, such an implementation may be",t+=" useful to prevent the type of race condition shown in this section.",t+=" This document expresses no preference about whether or not they",t+=" should wait for an ACK to be delivered.  After considering the impact",t+=" on user experience, implementors should decide whether or not to wait",t+=" for a while, because the user experience depends on the",t+=" implementation and has no direct bearing on protocol behavior.",this.logger.warn("RFC 5407 suggests the following to avoid this race condition...  Note: Implementation issues are outside the scope of this document, but the following tip is provided for avoiding race conditions of this type.  The caller can delay sending re-INVITE F6 for some period of time (2 seconds, perhaps), after which the caller can reasonably assume that its ACK has been received.  Implementors can decouple the actions of the user (e.g., pressing the hold button) from the actions of the protocol (the sending of re-INVITE F6), so that the UA can behave like this.  In this case, it is the implementor's choice as to how long to wait.  In most cases, such an implementation may be useful to prevent the type of race condition shown in this section. This document expresses no preference about whether or not they should wait for an ACK to be delivered.  After considering the impact on user experience, implementors should decide whether or not to wait for a while, because the user experience depends on the implementation and has no direct bearing on protocol behavior.")},s=["Retry-After: "+(Math.floor(10*Math.random())+1)];if(this.ackProcessing)return this.core.replyStateless(e,{statusCode:500,extraHeaders:s}),void t();if(this.ackWait&&this.signalingState!==X.Stable)return this.core.replyStateless(e,{statusCode:500,extraHeaders:s}),void t();if(this.reinviteUserAgentServer)return void this.core.replyStateless(e,{statusCode:500,extraHeaders:s});if(this.reinviteUserAgentClient)return void this.core.replyStateless(e,{statusCode:491})}if(e.method===L.INVITE){const t=e.parseHeader("contact");if(!t)throw new Error("Contact undefined.");if(!(t instanceof C))throw new Error("Contact not instance of NameAddrHeader.");this.dialogState.remoteTarget=t.uri}switch(e.method){case L.BYE:{const t=new me(this,e);this.delegate&&this.delegate.onBye?this.delegate.onBye(t):t.accept(),this.dispose()}break;case L.INFO:{const t=new we(this,e);this.delegate&&this.delegate.onInfo?this.delegate.onInfo(t):t.reject({statusCode:469,extraHeaders:["Recv-Info:"]})}break;case L.INVITE:{const t=new Ce(this,e);this.signalingStateTransition(e),this.delegate&&this.delegate.onInvite?this.delegate.onInvite(t):t.reject({statusCode:488})}break;case L.MESSAGE:{const t=new ye(this.core,e);this.delegate&&this.delegate.onMessage?this.delegate.onMessage(t):t.accept()}break;case L.NOTIFY:{const t=new Ee(this,e);this.delegate&&this.delegate.onNotify?this.delegate.onNotify(t):t.accept()}break;case L.PRACK:{const t=new Re(this,e);this.delegate&&this.delegate.onPrack?this.delegate.onPrack(t):t.accept()}break;case L.REFER:{const t=new Ae(this,e);this.delegate&&this.delegate.onRefer?this.delegate.onRefer(t):t.reject()}break;default:this.logger.log(`INVITE dialog ${this.id} received unimplemented ${e.method} request`),this.core.replyStateless(e,{statusCode:501})}}else this.logger.log(`INVITE dialog ${this.id} rejected out of order ${e.method} request.`);else{if(this.ackWait){if(this.initialTransaction instanceof de)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${e.method} request, dropping.`);if(this.initialTransaction.request.cseq!==e.cseq)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${e.method} request, dropping.`);this.ackWait=!1}else{if(!this.reinviteUserAgentServer)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${e.method} request, dropping.`);if(this.reinviteUserAgentServer.transaction.request.cseq!==e.cseq)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${e.method} request, dropping.`);this.reinviteUserAgentServer=void 0}if(this.signalingStateTransition(e),this.delegate&&this.delegate.onAck){const t=this.delegate.onAck({message:e});t instanceof Promise&&(this.ackProcessing=!0,t.then(()=>this.ackProcessing=!1).catch(()=>this.ackProcessing=!1))}}}reliableSequenceGuard(e){const t=e.statusCode;if(!t)throw new Error("Status code undefined");if(t>100&&t<200){const t=e.getHeader("require"),s=e.getHeader("rseq"),i=t&&t.includes("100rel")&&s?Number(s):void 0;if(i){if(this.rseq&&this.rseq+1!==i)return!1;this.rseq=this.rseq?this.rseq+1:i}}return!0}signalingStateRollback(){this._signalingState!==X.HaveLocalOffer&&this.signalingState!==X.HaveRemoteOffer||this._rollbackOffer&&this._rollbackAnswer&&(this._signalingState=X.Stable,this._offer=this._rollbackOffer,this._answer=this._rollbackAnswer)}signalingStateTransition(e){const t=he(e);if(t&&"session"===t.contentDisposition){if(this._signalingState===X.Stable&&(this._rollbackOffer=this._offer,this._rollbackAnswer=this._answer),e instanceof re)switch(this._signalingState){case X.Initial:case X.Stable:this._signalingState=X.HaveRemoteOffer,this._offer=t,this._answer=void 0;break;case X.HaveLocalOffer:this._signalingState=X.Stable,this._answer=t;break;case X.HaveRemoteOffer:case X.Closed:break;default:throw new Error("Unexpected signaling state.")}if(e instanceof ne)switch(this._signalingState){case X.Initial:case X.Stable:this._signalingState=X.HaveRemoteOffer,this._offer=t,this._answer=void 0;break;case X.HaveLocalOffer:this._signalingState=X.Stable,this._answer=t;break;case X.HaveRemoteOffer:case X.Closed:break;default:throw new Error("Unexpected signaling state.")}if(e instanceof j)switch(this._signalingState){case X.Initial:case X.Stable:this._signalingState=X.HaveLocalOffer,this._offer=t,this._answer=void 0;break;case X.HaveLocalOffer:break;case X.HaveRemoteOffer:this._signalingState=X.Stable,this._answer=t;break;case X.Closed:break;default:throw new Error("Unexpected signaling state.")}if(ce(e))switch(this._signalingState){case X.Initial:case X.Stable:this._signalingState=X.HaveLocalOffer,this._offer=t,this._answer=void 0;break;case X.HaveLocalOffer:break;case X.HaveRemoteOffer:this._signalingState=X.Stable,this._answer=t;break;case X.Closed:break;default:throw new Error("Unexpected signaling state.")}}}start2xxRetransmissionTimer(){if(this.initialTransaction instanceof te){const e=this.initialTransaction;let t=G.T1;const s=()=>{this.ackWait?(this.logger.log("No ACK for 2xx response received, attempting retransmission"),e.retransmitAcceptedResponse(),t=Math.min(2*t,G.T2),this.invite2xxTimer=setTimeout(s,t)):this.invite2xxTimer=void 0};this.invite2xxTimer=setTimeout(s,t);const i=()=>{e.state===J.Terminated&&(e.removeStateChangeListener(i),this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.ackWait&&(this.delegate&&this.delegate.onAckTimeout?this.delegate.onAckTimeout():this.bye()))};e.addStateChangeListener(i)}}startReInvite2xxRetransmissionTimer(){if(this.reinviteUserAgentServer&&this.reinviteUserAgentServer.transaction instanceof te){const e=this.reinviteUserAgentServer.transaction;let t=G.T1;const s=()=>{this.reinviteUserAgentServer?(this.logger.log("No ACK for 2xx response received, attempting retransmission"),e.retransmitAcceptedResponse(),t=Math.min(2*t,G.T2),this.invite2xxTimer=setTimeout(s,t)):this.invite2xxTimer=void 0};this.invite2xxTimer=setTimeout(s,t);const i=()=>{e.state===J.Terminated&&(e.removeStateChangeListener(i),this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.reinviteUserAgentServer)};e.addStateChangeListener(i)}}}class _e extends le{constructor(e,t,s){super(de,e,t,s),this.confirmedDialogAcks=new Map,this.confirmedDialogs=new Map,this.earlyDialogs=new Map,this.delegate=s}dispose(){this.earlyDialogs.forEach(e=>e.dispose()),this.earlyDialogs.clear(),super.dispose()}onTransportError(e){if(this.transaction.state===J.Calling)return super.onTransportError(e);this.logger.error(e.message),this.logger.error("User agent client request transport error while sending ACK.")}receiveResponse(e){if(!this.authenticationGuard(e))return;const t=e.statusCode?e.statusCode.toString():"";if(!t)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(t):return void(this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:e}));case/^1[0-9]{2}$/.test(t):{if(!e.toTag)return void this.logger.warn("Non-100 1xx INVITE response received without a to tag, dropping.");if(!e.parseHeader("contact"))return void this.logger.error("Non-100 1xx INVITE response received without a Contact header field, dropping.");const t=se.initialDialogStateForUserAgentClient(this.message,e);let s=this.earlyDialogs.get(t.id);if(!s){const e=this.transaction;if(!(e instanceof de))throw new Error("Transaction not instance of InviteClientTransaction.");s=new De(e,this.core,t),this.earlyDialogs.set(s.id,s)}if(!s.reliableSequenceGuard(e))return void this.logger.warn("1xx INVITE reliable response received out of order or is a retransmission, dropping.");s.signalingState!==X.Initial&&s.signalingState!==X.HaveLocalOffer||s.signalingStateTransition(e);const i=s;this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:e,session:i,prack:e=>i.prack(void 0,e)})}return;case/^2[0-9]{2}$/.test(t):{if(!e.toTag)return void this.logger.error("2xx INVITE response received without a to tag, dropping.");if(!e.parseHeader("contact"))return void this.logger.error("2xx INVITE response received without a Contact header field, dropping.");const t=se.initialDialogStateForUserAgentClient(this.message,e);let s=this.confirmedDialogs.get(t.id);if(s){const e=this.confirmedDialogAcks.get(t.id);if(e){const t=this.transaction;if(!(t instanceof de))throw new Error("Client transaction not instance of InviteClientTransaction.");t.ackResponse(e.message)}return}if(s=this.earlyDialogs.get(t.id),s)s.confirm(),s.recomputeRouteSet(e),this.earlyDialogs.delete(s.id),this.confirmedDialogs.set(s.id,s);else{const e=this.transaction;if(!(e instanceof de))throw new Error("Transaction not instance of InviteClientTransaction.");s=new De(e,this.core,t),this.confirmedDialogs.set(s.id,s)}s.signalingState!==X.Initial&&s.signalingState!==X.HaveLocalOffer||s.signalingStateTransition(e);const i=s;if(this.delegate&&this.delegate.onAccept)this.delegate.onAccept({message:e,session:i,ack:e=>{const t=i.ack(e);return this.confirmedDialogAcks.set(i.id,t),t}});else{const e=i.ack();this.confirmedDialogAcks.set(i.id,e)}}return;case/^3[0-9]{2}$/.test(t):return this.earlyDialogs.forEach(e=>e.dispose()),this.earlyDialogs.clear(),void(this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:e}));case/^[4-6][0-9]{2}$/.test(t):return this.earlyDialogs.forEach(e=>e.dispose()),this.earlyDialogs.clear(),void(this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:e}));default:throw new Error("Invalid status code "+t)}throw new Error(`Executing what should be an unreachable code path receiving ${t} response.`)}}class He extends le{constructor(e,t,s){super(Q,e,t,s)}}class xe extends le{constructor(e,t,s){super(Q,e,t,s)}}!function(e){e.Initial="Initial",e.NotifyWait="NotifyWait",e.Pending="Pending",e.Active="Active",e.Terminated="Terminated"}(z||(z={}));const ke=[L.ACK,L.BYE,L.CANCEL,L.INFO,L.INVITE,L.MESSAGE,L.NOTIFY,L.OPTIONS,L.PRACK,L.REFER,L.REGISTER,L.SUBSCRIBE];class Pe extends le{constructor(e,t,s){const i=e.createOutgoingRequestMessage(L.SUBSCRIBE,s);super(Q,e.userAgentCore,i,t),this.dialog=e}waitNotifyStop(){}receiveResponse(e){if(e.statusCode&&e.statusCode>=200&&e.statusCode<300){const t=e.getHeader("Expires");if(t){const e=Number(t);this.dialog.subscriptionExpires>e&&(this.dialog.subscriptionExpires=e)}else this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE")}if(e.statusCode&&e.statusCode>=400&&e.statusCode<700){[404,405,410,416,480,481,482,483,484,485,489,501,604].includes(e.statusCode)&&this.dialog.terminate()}super.receiveResponse(e)}}class Ne extends se{constructor(e,t,s,i,r,n){super(i,r),this.delegate=n,this._autoRefresh=!1,this._subscriptionEvent=e,this._subscriptionExpires=t,this._subscriptionExpiresInitial=t,this._subscriptionExpiresLastSet=Math.floor(Date.now()/1e3),this._subscriptionRefresh=void 0,this._subscriptionRefreshLastSet=void 0,this._subscriptionState=s,this.logger=i.loggerFactory.getLogger("sip.subscribe-dialog"),this.logger.log(`SUBSCRIBE dialog ${this.id} constructed`)}static initialDialogStateForSubscription(e,t){const s=t.getHeaders("record-route"),i=t.parseHeader("contact");if(!i)throw new Error("Contact undefined.");if(!(i instanceof C))throw new Error("Contact not instance of NameAddrHeader.");const r=i.uri,n=e.cseq,o=e.callId,a=e.fromTag,c=t.fromTag;if(!o)throw new Error("Call id undefined.");if(!a)throw new Error("From tag undefined.");if(!c)throw new Error("To tag undefined.");if(!e.from)throw new Error("From undefined.");if(!e.to)throw new Error("To undefined.");return{id:o+a+c,early:!1,callId:o,localTag:a,remoteTag:c,localSequenceNumber:n,remoteSequenceNumber:void 0,localURI:e.from.uri,remoteURI:e.to.uri,remoteTarget:r,routeSet:s,secure:!1}}dispose(){super.dispose(),this.N&&(clearTimeout(this.N),this.N=void 0),this.refreshTimerClear(),this.logger.log(`SUBSCRIBE dialog ${this.id} destroyed`)}get autoRefresh(){return this._autoRefresh}set autoRefresh(e){this._autoRefresh=!0,this.refreshTimerSet()}get subscriptionEvent(){return this._subscriptionEvent}get subscriptionExpires(){const e=Math.floor(Date.now()/1e3)-this._subscriptionExpiresLastSet,t=this._subscriptionExpires-e;return Math.max(t,0)}set subscriptionExpires(e){if(e<0)throw new Error("Expires must be greater than or equal to zero.");if(this._subscriptionExpires=e,this._subscriptionExpiresLastSet=Math.floor(Date.now()/1e3),this.autoRefresh){const t=this.subscriptionRefresh;(void 0===t||t>=e)&&this.refreshTimerSet()}}get subscriptionExpiresInitial(){return this._subscriptionExpiresInitial}get subscriptionRefresh(){if(void 0===this._subscriptionRefresh||void 0===this._subscriptionRefreshLastSet)return;const e=Math.floor(Date.now()/1e3)-this._subscriptionRefreshLastSet,t=this._subscriptionRefresh-e;return Math.max(t,0)}get subscriptionState(){return this._subscriptionState}receiveRequest(e){if(this.logger.log(`SUBSCRIBE dialog ${this.id} received ${e.method} request`),this.sequenceGuard(e))switch(super.receiveRequest(e),e.method){case L.NOTIFY:this.onNotify(e);break;default:this.logger.log(`SUBSCRIBE dialog ${this.id} received unimplemented ${e.method} request`),this.core.replyStateless(e,{statusCode:501})}else this.logger.log(`SUBSCRIBE dialog ${this.id} rejected out of order ${e.method} request.`)}refresh(){const e="Allow: "+ke.toString(),t={};return t.extraHeaders=(t.extraHeaders||[]).slice(),t.extraHeaders.push(e),t.extraHeaders.push("Event: "+this.subscriptionEvent),t.extraHeaders.push("Expires: "+this.subscriptionExpiresInitial),t.extraHeaders.push("Contact: "+this.core.configuration.contact.toString()),this.subscribe(void 0,t)}subscribe(e,t={}){if(this.subscriptionState!==z.Pending&&this.subscriptionState!==z.Active)throw new Error(`Invalid state ${this.subscriptionState}. May only re-subscribe while in state "pending" or "active".`);this.logger.log(`SUBSCRIBE dialog ${this.id} sending SUBSCRIBE request`);const s=new Pe(this,e,t);return this.N&&(clearTimeout(this.N),this.N=void 0),this.N=setTimeout(()=>this.timerN(),G.TIMER_N),s}terminate(){this.stateTransition(z.Terminated),this.onTerminated()}unsubscribe(){const e="Allow: "+ke.toString(),t={};return t.extraHeaders=(t.extraHeaders||[]).slice(),t.extraHeaders.push(e),t.extraHeaders.push("Event: "+this.subscriptionEvent),t.extraHeaders.push("Expires: 0"),t.extraHeaders.push("Contact: "+this.core.configuration.contact.toString()),this.subscribe(void 0,t)}onNotify(e){const t=e.parseHeader("Event").event;if(!t||t!==this.subscriptionEvent)return void this.core.replyStateless(e,{statusCode:489});this.N&&(clearTimeout(this.N),this.N=void 0);const s=e.parseHeader("Subscription-State");if(!s||!s.state)return void this.core.replyStateless(e,{statusCode:489});const i=s.state,r=s.expires?Math.max(s.expires,0):void 0;switch(i){case"pending":this.stateTransition(z.Pending,r);break;case"active":this.stateTransition(z.Active,r);break;case"terminated":this.stateTransition(z.Terminated,r);break;default:this.logger.warn("Unrecognized subscription state.")}const n=new Ee(this,e);this.delegate&&this.delegate.onNotify?this.delegate.onNotify(n):n.accept()}onRefresh(e){this.delegate&&this.delegate.onRefresh&&this.delegate.onRefresh(e)}onTerminated(){this.delegate&&this.delegate.onTerminated&&this.delegate.onTerminated()}refreshTimerClear(){this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=void 0)}refreshTimerSet(){if(this.refreshTimerClear(),this.autoRefresh&&this.subscriptionExpires>0){const e=900*this.subscriptionExpires;this._subscriptionRefresh=Math.floor(e/1e3),this._subscriptionRefreshLastSet=Math.floor(Date.now()/1e3),this.refreshTimer=setTimeout(()=>{this.refreshTimer=void 0,this._subscriptionRefresh=void 0,this._subscriptionRefreshLastSet=void 0,this.onRefresh(this.refresh())},e)}}stateTransition(e,t){const s=()=>{this.logger.warn(`Invalid subscription state transition from ${this.subscriptionState} to ${e}`)};switch(e){case z.Initial:case z.NotifyWait:return void s();case z.Pending:if(this.subscriptionState!==z.NotifyWait&&this.subscriptionState!==z.Pending)return void s();break;case z.Active:case z.Terminated:if(this.subscriptionState!==z.NotifyWait&&this.subscriptionState!==z.Pending&&this.subscriptionState!==z.Active)return void s();break;default:return void s()}e===z.Pending&&t&&(this.subscriptionExpires=t),e===z.Active&&t&&(this.subscriptionExpires=t),e===z.Terminated&&this.dispose(),this._subscriptionState=e}timerN(){this.logger.warn("Timer N expired for SUBSCRIBE dialog. Timed out waiting for NOTIFY."),this.subscriptionState!==z.Terminated&&(this.stateTransition(z.Terminated),this.onTerminated())}}class qe extends le{constructor(e,t,s){const i=t.getHeader("Event");if(!i)throw new Error("Event undefined");const r=t.getHeader("Expires");if(!r)throw new Error("Expires undefined");super(Q,e,t,s),this.delegate=s,this.subscriberId=t.callId+t.fromTag+i,this.subscriptionExpiresRequested=this.subscriptionExpires=Number(r),this.subscriptionEvent=i,this.subscriptionState=z.NotifyWait,this.waitNotifyStart()}dispose(){super.dispose()}onNotify(e){const t=e.message.parseHeader("Event").event;if(!t||t!==this.subscriptionEvent)return this.logger.warn("Failed to parse event."),void e.reject({statusCode:489});const s=e.message.parseHeader("Subscription-State");if(!s||!s.state)return this.logger.warn("Failed to parse subscription state."),void e.reject({statusCode:489});const i=s.state;switch(i){case"pending":case"active":case"terminated":break;default:return this.logger.warn("Invalid subscription state "+i),void e.reject({statusCode:489})}if("terminated"!==i){if(!e.message.parseHeader("contact"))return this.logger.warn("Failed to parse contact."),void e.reject({statusCode:489})}if(this.dialog)throw new Error("Dialog already created. This implementation only supports install of single subscriptions.");switch(this.waitNotifyStop(),this.subscriptionExpires=s.expires?Math.min(this.subscriptionExpires,Math.max(s.expires,0)):this.subscriptionExpires,i){case"pending":this.subscriptionState=z.Pending;break;case"active":this.subscriptionState=z.Active;break;case"terminated":this.subscriptionState=z.Terminated;break;default:throw new Error(`Unrecognized state ${i}.`)}if(this.subscriptionState!==z.Terminated){const t=Ne.initialDialogStateForSubscription(this.message,e.message);this.dialog=new Ne(this.subscriptionEvent,this.subscriptionExpires,this.subscriptionState,this.core,t)}if(this.delegate&&this.delegate.onNotify){const t=e,s=this.dialog;this.delegate.onNotify({request:t,subscription:s})}else e.accept()}waitNotifyStart(){this.N||(this.core.subscribers.set(this.subscriberId,this),this.N=setTimeout(()=>this.timerN(),G.TIMER_N))}waitNotifyStop(){this.N&&(this.core.subscribers.delete(this.subscriberId),clearTimeout(this.N),this.N=void 0)}receiveResponse(e){if(this.authenticationGuard(e)){if(e.statusCode&&e.statusCode>=200&&e.statusCode<300){const t=e.getHeader("Expires");if(t){const e=Number(t);e>this.subscriptionExpiresRequested&&this.logger.warn("Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request"),e<this.subscriptionExpires&&(this.subscriptionExpires=e)}else this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE");this.dialog&&this.dialog.subscriptionExpires>this.subscriptionExpires&&(this.dialog.subscriptionExpires=this.subscriptionExpires)}e.statusCode&&e.statusCode>=300&&e.statusCode<700&&this.waitNotifyStop(),super.receiveResponse(e)}}timerN(){this.logger.warn("Timer N expired for SUBSCRIBE user agent client. Timed out waiting for NOTIFY."),this.waitNotifyStop(),this.delegate&&this.delegate.onNotifyTimeout&&this.delegate.onNotifyTimeout()}}class Oe extends fe{constructor(e,t,s){super(te,e,t,s),this.core=e}dispose(){this.earlyDialog&&this.earlyDialog.dispose(),super.dispose()}accept(e={statusCode:200}){if(!this.acceptable)throw new pe(`${this.message.method} not acceptable in state ${this.transaction.state}.`);if(!this.confirmedDialog)if(this.earlyDialog)this.earlyDialog.confirm(),this.confirmedDialog=this.earlyDialog,this.earlyDialog=void 0;else{const e=this.transaction;if(!(e instanceof te))throw new Error("Transaction not instance of InviteClientTransaction.");const t=se.initialDialogStateForUserAgentServer(this.message,this.toTag);this.confirmedDialog=new De(e,this.core,t)}const t=this.message.getHeaders("record-route").map(e=>"Record-Route: "+e),s="Contact: "+this.core.configuration.contact.toString(),i="Allow: "+ke.toString();if(!e.body)if(this.confirmedDialog.signalingState===X.Stable)e.body=this.confirmedDialog.answer;else if(this.confirmedDialog.signalingState===X.Initial||this.confirmedDialog.signalingState===X.HaveRemoteOffer)throw new Error("Response must have a body.");e.statusCode=e.statusCode||200,e.extraHeaders=e.extraHeaders||[],e.extraHeaders=e.extraHeaders.concat(t),e.extraHeaders.push(i),e.extraHeaders.push(s);const r=super.accept(e),n=this.confirmedDialog,o=Object.assign(Object.assign({},r),{session:n});return e.body&&this.confirmedDialog.signalingState!==X.Stable&&this.confirmedDialog.signalingStateTransition(e.body),o}progress(e={statusCode:180}){if(!this.progressable)throw new pe(`${this.message.method} not progressable in state ${this.transaction.state}.`);if(!this.earlyDialog){const e=this.transaction;if(!(e instanceof te))throw new Error("Transaction not instance of InviteClientTransaction.");const t=se.initialDialogStateForUserAgentServer(this.message,this.toTag,!0);this.earlyDialog=new De(e,this.core,t)}const t=this.message.getHeaders("record-route").map(e=>"Record-Route: "+e),s="Contact: "+this.core.configuration.contact;e.extraHeaders=e.extraHeaders||[],e.extraHeaders=e.extraHeaders.concat(t),e.extraHeaders.push(s);const i=super.progress(e),r=this.earlyDialog,n=Object.assign(Object.assign({},i),{session:r});return e.body&&this.earlyDialog.signalingState!==X.Stable&&this.earlyDialog.signalingStateTransition(e.body),n}redirect(e,t={statusCode:302}){return super.redirect(e,t)}reject(e={statusCode:486}){return super.reject(e)}}class Ue extends fe{constructor(e,t,s){super(ue,e,t,s),this.core=e}}class Me extends fe{constructor(e,t,s){super(ue,e,t,s),this.core=e}}const Le=["application/sdp","application/dtmf-relay"];class je{constructor(e,t={}){this.userAgentClients=new Map,this.userAgentServers=new Map,this.configuration=e,this.delegate=t,this.dialogs=new Map,this.subscribers=new Map,this.logger=e.loggerFactory.getLogger("sip.user-agent-core")}dispose(){this.reset()}reset(){this.dialogs.forEach(e=>e.dispose()),this.dialogs.clear(),this.subscribers.forEach(e=>e.dispose()),this.subscribers.clear(),this.userAgentClients.forEach(e=>e.dispose()),this.userAgentClients.clear(),this.userAgentServers.forEach(e=>e.dispose()),this.userAgentServers.clear()}get loggerFactory(){return this.configuration.loggerFactory}get transport(){const e=this.configuration.transportAccessor();if(!e)throw new Error("Transport undefined.");return e}invite(e,t){return new _e(this,e,t)}message(e,t){return new Te(this,e,t)}publish(e,t){return new He(this,e,t)}register(e,t){return new xe(this,e,t)}subscribe(e,t){return new qe(this,e,t)}request(e,t){return new le(Q,this,e,t)}makeOutgoingRequestMessage(e,t,s,i,r,n,o){const a=this.configuration.sipjsId,c=this.configuration.displayName,h=this.configuration.viaForceRport,d=this.configuration.hackViaTcp,l=this.configuration.supportedOptionTags.slice();e===L.REGISTER&&l.push("path","gruu"),e===L.INVITE&&(this.configuration.contact.pubGruu||this.configuration.contact.tempGruu)&&l.push("gruu");const g={callIdPrefix:a,forceRport:h,fromDisplayName:c,hackViaTcp:d,optionTags:l,routeSet:this.configuration.routeSet,userAgentString:this.configuration.userAgentHeaderFieldValue,viaHost:this.configuration.viaHost},u=Object.assign(Object.assign({},g),r);return new j(e,t,s,i,u,n,o)}receiveIncomingRequestFromTransport(e){this.receiveRequestFromTransport(e)}receiveIncomingResponseFromTransport(e){this.receiveResponseFromTransport(e)}replyStateless(e,t){const s=this.configuration.userAgentHeaderFieldValue,i=this.configuration.supportedOptionTagsResponse;t=Object.assign(Object.assign({},t),{userAgent:s,supported:i});const r=F(e,t);return this.transport.send(r.message).catch(t=>{t instanceof Error&&this.logger.error(t.message),this.logger.error(`Transport error occurred sending stateless reply to ${e.method} request.`)}),r}receiveRequestFromTransport(e){const t=e.viaBranch,s=this.userAgentServers.get(t);e.method===L.ACK&&s&&s.transaction.state===J.Accepted&&s instanceof Oe?this.logger.warn(`Discarding out of dialog ACK after 2xx response sent on transaction ${t}.`):e.method!==L.CANCEL?s?s.transaction.receiveRequest(e):this.receiveRequest(e):s?(this.replyStateless(e,{statusCode:200}),s.transaction instanceof te&&s.transaction.state===J.Proceeding&&s instanceof Oe&&s.receiveCancel(e)):this.replyStateless(e,{statusCode:481})}receiveRequest(e){if(!ke.includes(e.method)){const t="Allow: "+ke.toString();return void this.replyStateless(e,{statusCode:405,extraHeaders:[t]})}if(!e.ruri)throw new Error("Request-URI undefined.");if("sip"!==e.ruri.scheme)return void this.replyStateless(e,{statusCode:416});const t=e.ruri,s=e=>!!e&&e.user===t.user;if(!s(this.configuration.aor)&&!(s(this.configuration.contact.uri)||s(this.configuration.contact.pubGruu)||s(this.configuration.contact.tempGruu)))return this.logger.warn("Request-URI does not point to us."),void(e.method!==L.ACK&&this.replyStateless(e,{statusCode:404}));if(e.method!==L.INVITE||e.hasHeader("Contact")){if(!e.toTag){const t=e.viaBranch;if(!this.userAgentServers.has(t)){if(Array.from(this.userAgentServers.values()).some(t=>t.transaction.request.fromTag===e.fromTag&&t.transaction.request.callId===e.callId&&t.transaction.request.cseq===e.cseq))return void this.replyStateless(e,{statusCode:482})}}e.toTag?this.receiveInsideDialogRequest(e):this.receiveOutsideDialogRequest(e)}else this.replyStateless(e,{statusCode:400,reasonPhrase:"Missing Contact Header"})}receiveInsideDialogRequest(e){if(e.method===L.NOTIFY){const t=e.parseHeader("Event");if(!t||!t.event)return void this.replyStateless(e,{statusCode:489});const s=e.callId+e.toTag+t.event,i=this.subscribers.get(s);if(i){const t=new Ee(this,e);return void i.onNotify(t)}}const t=e.callId+e.toTag+e.fromTag,s=this.dialogs.get(t);if(s){if(e.method===L.OPTIONS){const t="Allow: "+ke.toString(),s="Accept: "+Le.toString();return void this.replyStateless(e,{statusCode:200,extraHeaders:[t,s]})}s.receiveRequest(e)}else e.method!==L.ACK&&this.replyStateless(e,{statusCode:481})}receiveOutsideDialogRequest(e){switch(e.method){case L.ACK:break;case L.BYE:this.replyStateless(e,{statusCode:481});break;case L.CANCEL:throw new Error(`Unexpected out of dialog request method ${e.method}.`);case L.INFO:this.replyStateless(e,{statusCode:405});break;case L.INVITE:{const t=new Oe(this,e);this.delegate.onInvite?this.delegate.onInvite(t):t.reject()}break;case L.MESSAGE:{const t=new ye(this,e);this.delegate.onMessage?this.delegate.onMessage(t):t.accept()}break;case L.NOTIFY:{const t=new Ee(this,e);this.delegate.onNotify?this.delegate.onNotify(t):t.reject({statusCode:405})}break;case L.OPTIONS:{const t="Allow: "+ke.toString(),s="Accept: "+Le.toString();this.replyStateless(e,{statusCode:200,extraHeaders:[t,s]})}break;case L.REFER:{const t=new Ae(this,e);this.delegate.onRefer?this.delegate.onRefer(t):t.reject({statusCode:405})}break;case L.REGISTER:{const t=new Ue(this,e);this.delegate.onRegister?this.delegate.onRegister(t):t.reject({statusCode:405})}break;case L.SUBSCRIBE:{const t=new Me(this,e);this.delegate.onSubscribe?this.delegate.onSubscribe(t):t.reject({statusCode:480})}break;default:throw new Error(`Unexpected out of dialog request method ${e.method}.`)}}receiveResponseFromTransport(e){if(e.getHeaders("via").length>1)return void this.logger.warn("More than one Via header field present in the response, dropping");const t=e.viaBranch+e.method,s=this.userAgentClients.get(t);s?s.transaction.receiveResponse(e):this.logger.warn(`Discarding unmatched ${e.statusCode} response to ${e.method} ${t}.`)}}var Fe,Be,Ge,Ve;!function(e){function t(e,t){let s=t,i=0,r=0;if(e.substring(s,s+2).match(/(^\r\n)/))return-2;for(;0===i;){if(r=e.indexOf("\r\n",s),-1===r)return r;!e.substring(r+2,r+4).match(/(^\r\n)/)&&e.charAt(r+2).match(/(^\s+)/)?s=r+2:i=r}return i}function s(e,t,s,i){const r=t.indexOf(":",s),n=t.substring(s,r).trim(),o=t.substring(r+1,i).trim();let a;switch(n.toLowerCase()){case"via":case"v":e.addHeader("via",o),1===e.getHeaders("via").length?(a=e.parseHeader("Via"),a&&(e.via=a,e.viaBranch=a.branch)):a=0;break;case"from":case"f":e.setHeader("from",o),a=e.parseHeader("from"),a&&(e.from=a,e.fromTag=a.getParam("tag"));break;case"to":case"t":e.setHeader("to",o),a=e.parseHeader("to"),a&&(e.to=a,e.toTag=a.getParam("tag"));break;case"record-route":if(a=D.parse(o,"Record_Route"),-1===a){a=void 0;break}if(!(a instanceof Array)){a=void 0;break}a.forEach(t=>{e.addHeader("record-route",o.substring(t.position,t.offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=t.parsed});break;case"call-id":case"i":e.setHeader("call-id",o),a=e.parseHeader("call-id"),a&&(e.callId=o);break;case"contact":case"m":if(a=D.parse(o,"Contact"),-1===a){a=void 0;break}if(!(a instanceof Array)){a=void 0;break}a.forEach(t=>{e.addHeader("contact",o.substring(t.position,t.offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=t.parsed});break;case"content-length":case"l":e.setHeader("content-length",o),a=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",o),a=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",o),a=e.parseHeader("cseq"),a&&(e.cseq=a.value),e instanceof ne&&(e.method=a.method);break;case"max-forwards":e.setHeader("max-forwards",o),a=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",o),a=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",o),a=e.parseHeader("proxy-authenticate");break;case"refer-to":case"r":e.setHeader("refer-to",o),a=e.parseHeader("refer-to"),a&&(e.referTo=a);break;default:e.addHeader(n.toLowerCase(),o),a=0}return void 0!==a||{error:"error parsing header '"+n+"'"}}e.getHeader=t,e.parseHeader=s,e.parseMessage=function(e,i){let r=0,n=e.indexOf("\r\n");if(-1===n)return void i.warn("no CRLF found, not a SIP message, discarded");const o=e.substring(0,n),a=D.parse(o,"Request_Response");let c,h;if(-1!==a){for(a.status_code?(c=new ne,c.statusCode=a.status_code,c.reasonPhrase=a.reason_phrase):(c=new re,c.method=a.method,c.ruri=a.uri),c.data=e,r=n+2;;){if(n=t(e,r),-2===n){h=r+2;break}if(-1===n)return void i.error("malformed message");const o=s(c,e,r,n);if(o&&!0!==o)return void i.error(o.error);r=n+2}return c.hasHeader("content-length")?c.body=e.substr(h,Number(c.getHeader("content-length"))):c.body=e.substring(h),c}i.warn('error parsing first line of SIP message: "'+o+'"')}}(Fe||(Fe={}));class Ke{constructor(){this.listeners=new Array}addListener(e,t){const s=t=>{this.removeListener(s),e(t)};!0===(null==t?void 0:t.once)?this.listeners.push(s):this.listeners.push(e)}emit(e){this.listeners.slice().forEach(t=>t(e))}removeAllListeners(){this.listeners=[]}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}on(e){return this.addListener(e)}off(e){return this.removeListener(e)}once(e){return this.addListener(e,{once:!0})}}class We extends V{constructor(e){super(e||"An error occurred during state transition.")}}!function(e){e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Disconnected="Disconnected"}(Be||(Be={}));class Ye{constructor(e,t){if(this._state=Be.Disconnected,this.transitioningState=!1,this._stateEventEmitter=new Ke,this.logger=e,t){const e=t,s=null==e?void 0:e.wsServers,i=null==e?void 0:e.maxReconnectionAttempts;if(void 0!==s){const e='The transport option "wsServers" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(e)}if(void 0!==i){const e='The transport option "maxReconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(e)}s&&!t.server&&("string"==typeof s&&(t.server=s),s instanceof Array&&(t.server=s[0]))}this.configuration=Object.assign(Object.assign({},Ye.defaultOptions),t);const s=this.configuration.server,i=D.parse(s,"absoluteURI");if(-1===i)throw this.logger.error(`Invalid WebSocket Server URL "${s}"`),new Error("Invalid WebSocket Server URL");if(!["wss","ws","udp"].includes(i.scheme))throw this.logger.error(`Invalid scheme in WebSocket Server URL "${s}"`),new Error("Invalid scheme in WebSocket Server URL");this._protocol=i.scheme.toUpperCase()}dispose(){return this.disconnect()}get protocol(){return this._protocol}get server(){return this.configuration.server}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get ws(){return this._ws}connect(){return this._connect()}disconnect(){return this._disconnect()}isConnected(){return this.state===Be.Connected}send(e){return this._send(e)}_connect(){switch(this.logger.log("Connecting "+this.server),this.state){case Be.Connecting:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(Be.Connecting));if(!this.connectPromise)throw new Error("Connect promise must be defined.");return this.connectPromise;case Be.Connected:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(Be.Connecting));if(this.connectPromise)throw new Error("Connect promise must not be defined.");return Promise.resolve();case Be.Disconnecting:if(this.connectPromise)throw new Error("Connect promise must not be defined.");try{this.transitionState(Be.Connecting)}catch(e){if(e instanceof We)return Promise.reject(e);throw e}break;case Be.Disconnected:if(this.connectPromise)throw new Error("Connect promise must not be defined.");try{this.transitionState(Be.Connecting)}catch(e){if(e instanceof We)return Promise.reject(e);throw e}break;default:throw new Error("Unknown state")}let e;try{e=new WebSocket(this.server,"sip"),e.binaryType="arraybuffer",e.addEventListener("close",t=>this.onWebSocketClose(t,e)),e.addEventListener("error",t=>this.onWebSocketError(t,e)),e.addEventListener("open",t=>this.onWebSocketOpen(t,e)),e.addEventListener("message",t=>this.onWebSocketMessage(t,e)),this._ws=e}catch(e){return this._ws=void 0,this.logger.error("WebSocket construction failed."),this.logger.error(e),new Promise((t,s)=>{this.connectResolve=t,this.connectReject=s,this.transitionState(Be.Disconnected,e)})}return this.connectPromise=new Promise((t,s)=>{this.connectResolve=t,this.connectReject=s,this.connectTimeout=setTimeout(()=>{this.logger.warn("Connect timed out. Exceeded time set in configuration.connectionTimeout: "+this.configuration.connectionTimeout+"s."),e.close(1e3)},1e3*this.configuration.connectionTimeout)}),this.connectPromise}_disconnect(){switch(this.logger.log("Disconnecting "+this.server),this.state){case Be.Connecting:if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");try{this.transitionState(Be.Disconnecting)}catch(e){if(e instanceof We)return Promise.reject(e);throw e}break;case Be.Connected:if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");try{this.transitionState(Be.Disconnecting)}catch(e){if(e instanceof We)return Promise.reject(e);throw e}break;case Be.Disconnecting:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(Be.Disconnecting));if(!this.disconnectPromise)throw new Error("Disconnect promise must be defined.");return this.disconnectPromise;case Be.Disconnected:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(Be.Disconnecting));if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");return Promise.resolve();default:throw new Error("Unknown state")}if(!this._ws)throw new Error("WebSocket must be defined.");const e=this._ws;return this.disconnectPromise=new Promise((t,s)=>{this.disconnectResolve=t,this.disconnectReject=s;try{e.close(1e3)}catch(e){throw this.logger.error("WebSocket close failed."),this.logger.error(e),e}}),this.disconnectPromise}_send(e){if(!0===this.configuration.traceSip&&this.logger.log("Sending WebSocket message:\n\n"+e+"\n"),this._state!==Be.Connected)return Promise.reject(new Error("Not connected."));if(!this._ws)throw new Error("WebSocket undefined.");try{this._ws.send(e)}catch(e){return e instanceof Error?Promise.reject(e):Promise.reject(new Error("WebSocket send failed."))}return Promise.resolve()}onWebSocketClose(e,t){if(t!==this._ws)return;const s=`XXWebSocket closed ${this.server} (code: ${e.code})`,i=this.disconnectPromise?void 0:new Error(s);i&&this.logger.warn("WebSocket closed unexpectedly"),this.logger.log(s),this._ws=void 0,this.transitionState(Be.Disconnected,i)}onWebSocketError(e,t){t===this._ws&&this.logger.error("WebSocket error occurred.")}onWebSocketMessage(e,t){if(t!==this._ws)return;const s=e.data;let i;if(/^(\r\n)+$/.test(s))return this.clearKeepAliveTimeout(),void(!0===this.configuration.traceSip&&this.logger.log("Received WebSocket message with CRLF Keep Alive response"));if(s){if("string"!=typeof s){try{i=(new TextDecoder).decode(new Uint8Array(s))}catch(e){return this.logger.error(e),void this.logger.error("Received WebSocket binary message failed to be converted into string, message discarded")}!0===this.configuration.traceSip&&this.logger.log("Received WebSocket binary message:\n\n"+i+"\n")}else i=s,!0===this.configuration.traceSip&&this.logger.log("Received WebSocket text message:\n\n"+i+"\n");if(this.state===Be.Connected){if(this.onMessage)try{this.onMessage(i)}catch(e){throw this.logger.error(e),this.logger.error("Exception thrown by onMessage callback"),e}}else this.logger.warn("Received message while not connected, discarding...")}else this.logger.warn("Received empty message, discarding...")}onWebSocketOpen(e,t){t===this._ws&&this._state===Be.Connecting&&(this.logger.log("WebSocket opened "+this.server),this.transitionState(Be.Connected))}transitionLoopDetectedError(e){let t="A state transition loop has been detected.";return t+=` An attempt to transition from ${this._state} to ${e} before the prior transition completed.`,t+=" Perhaps you are synchronously calling connect() or disconnect() from a callback or state change handler?",this.logger.error(t),new We("Loop detected.")}transitionState(e,t){const s=()=>{throw new Error(`Invalid state transition from ${this._state} to ${e}`)};if(this.transitioningState)throw this.transitionLoopDetectedError(e);switch(this.transitioningState=!0,this._state){case Be.Connecting:e!==Be.Connected&&e!==Be.Disconnecting&&e!==Be.Disconnected&&s();break;case Be.Connected:e!==Be.Disconnecting&&e!==Be.Disconnected&&s();break;case Be.Disconnecting:e!==Be.Connecting&&e!==Be.Disconnected&&s();break;case Be.Disconnected:e!==Be.Connecting&&s();break;default:throw new Error("Unknown state.")}const i=this._state;this._state=e;const r=this.connectResolve,n=this.connectReject;i===Be.Connecting&&(this.connectPromise=void 0,this.connectResolve=void 0,this.connectReject=void 0);const o=this.disconnectResolve,a=this.disconnectReject;if(i===Be.Disconnecting&&(this.disconnectPromise=void 0,this.disconnectResolve=void 0,this.disconnectReject=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.logger.log(`Transitioned from ${i} to ${this._state}`),this._stateEventEmitter.emit(this._state),e===Be.Connected&&(this.startSendingKeepAlives(),this.onConnect))try{this.onConnect()}catch(e){throw this.logger.error(e),this.logger.error("Exception thrown by onConnect callback"),e}if(i===Be.Connected&&(this.stopSendingKeepAlives(),this.onDisconnect))try{t?this.onDisconnect(t):this.onDisconnect()}catch(e){throw this.logger.error(e),this.logger.error("Exception thrown by onDisconnect callback"),e}if(i===Be.Connecting){if(!r)throw new Error("Connect resolve undefined.");if(!n)throw new Error("Connect reject undefined.");e===Be.Connected?r():n(t||new Error("Connect aborted."))}if(i===Be.Disconnecting){if(!o)throw new Error("Disconnect resolve undefined.");if(!a)throw new Error("Disconnect reject undefined.");e===Be.Disconnected?o():a(t||new Error("Disconnect aborted."))}this.transitioningState=!1}clearKeepAliveTimeout(){this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveDebounceTimeout=void 0}sendKeepAlive(){return this.keepAliveDebounceTimeout?Promise.resolve():(this.keepAliveDebounceTimeout=setTimeout(()=>{this.clearKeepAliveTimeout()},1e3*this.configuration.keepAliveDebounce),this.send("\r\n\r\n"))}startSendingKeepAlives(){this.configuration.keepAliveInterval&&!this.keepAliveInterval&&(this.keepAliveInterval=setInterval(()=>{this.sendKeepAlive(),this.startSendingKeepAlives()},(e=>{const t=.8*e;return 1e3*(Math.random()*(e-t)+t)})(this.configuration.keepAliveInterval)))}stopSendingKeepAlives(){this.keepAliveInterval&&clearInterval(this.keepAliveInterval),this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveInterval=void 0,this.keepAliveDebounceTimeout=void 0}}Ye.defaultOptions={server:"",connectionTimeout:5,keepAliveInterval:0,keepAliveDebounce:10,traceSip:!0};class Je extends V{constructor(e){super(e||"Unsupported content type.")}}class Ze extends V{constructor(e){super(e||"Unspecified session description handler error.")}}class Xe extends V{constructor(){super("The session has terminated.")}}class ze{constructor(e){this.incomingAckRequest=e}get request(){return this.incomingAckRequest.message}}class Qe{constructor(e){this.incomingByeRequest=e}get request(){return this.incomingByeRequest.message}accept(e){return this.incomingByeRequest.accept(e),Promise.resolve()}reject(e){return this.incomingByeRequest.reject(e),Promise.resolve()}}class et extends V{constructor(e){super(e||"Request pending.")}}class tt{constructor(e){this.incomingInfoRequest=e}get request(){return this.incomingInfoRequest.message}accept(e){return this.incomingInfoRequest.accept(e),Promise.resolve()}reject(e){return this.incomingInfoRequest.reject(e),Promise.resolve()}}class st{constructor(e){this.incomingMessageRequest=e}get request(){return this.incomingMessageRequest.message}accept(e){return this.incomingMessageRequest.accept(e),Promise.resolve()}reject(e){return this.incomingMessageRequest.reject(e),Promise.resolve()}}class it{constructor(e){this.incomingNotifyRequest=e}get request(){return this.incomingNotifyRequest.message}accept(e){return this.incomingNotifyRequest.accept(e),Promise.resolve()}reject(e){return this.incomingNotifyRequest.reject(e),Promise.resolve()}}class rt{constructor(e,t){this.incomingReferRequest=e,this.session=t}get referTo(){const e=this.incomingReferRequest.message.parseHeader("refer-to");if(!(e instanceof C))throw new Error("Failed to parse Refer-To header.");return e}get referredBy(){return this.incomingReferRequest.message.getHeader("referred-by")}get replaces(){const e=this.referTo.uri.getHeader("replaces");return e instanceof Array?e[0]:e}get request(){return this.incomingReferRequest.message}accept(e={statusCode:202}){return this.incomingReferRequest.accept(e),Promise.resolve()}reject(e){return this.incomingReferRequest.reject(e),Promise.resolve()}makeInviter(e){if(this.inviter)return this.inviter;const t=this.referTo.uri.clone();t.clearHeaders();const s=((e=e||{}).extraHeaders||[]).slice(),i=this.replaces;i&&s.push("Replaces: "+decodeURIComponent(i));const r=this.referredBy;return r&&s.push("Referred-By: "+r),e.extraHeaders=s,this.inviter=this.session.userAgent._makeInviter(t,e),this.inviter._referred=this.session,this.session._referral=this.inviter,this.inviter}}class nt{constructor(e,t={}){this.pendingReinvite=!1,this.pendingReinviteAck=!1,this._state=i.Initial,this.delegate=t.delegate,this._stateEventEmitter=new Ke,this._userAgent=e,this._earlyMediaEstablished=!1}dispose(){switch(this.logger.log(`Session ${this.id} in state ${this._state} is being disposed`),delete this.userAgent._sessions[this.id],this._sessionDescriptionHandler&&this._sessionDescriptionHandler.close(),this.state){case i.Initial:case i.Establishing:break;case i.Established:return new Promise(e=>{this._bye({onAccept:()=>e(),onRedirect:()=>e(),onReject:()=>e()})});case i.Terminating:case i.Terminated:break;default:throw new Error("Unknown state.")}return Promise.resolve()}get assertedIdentity(){return this._assertedIdentity}get dialog(){return this._dialog}get id(){return this._id}get replacee(){return this._replacee}get earlyMediaEstablished(){return this._earlyMediaEstablished}set earlyMediaEstablished(e){this._earlyMediaEstablished=e}get sessionDescriptionHandler(){return this._sessionDescriptionHandler}set sessionDescriptionHandler(e){this._sessionDescriptionHandler=e}get sessionDescriptionHandlerFactory(){return this.userAgent.configuration.sessionDescriptionHandlerFactory}get sessionDescriptionHandlerModifiers(){return this._sessionDescriptionHandlerModifiers||[]}set sessionDescriptionHandlerModifiers(e){this._sessionDescriptionHandlerModifiers=e.slice()}get sessionDescriptionHandlerOptions(){return this._sessionDescriptionHandlerOptions||{}}set sessionDescriptionHandlerOptions(e){this._sessionDescriptionHandlerOptions=Object.assign({},e)}get sessionDescriptionHandlerModifiersReInvite(){return this._sessionDescriptionHandlerModifiersReInvite||[]}set sessionDescriptionHandlerModifiersReInvite(e){this._sessionDescriptionHandlerModifiersReInvite=e.slice()}get sessionDescriptionHandlerOptionsReInvite(){return this._sessionDescriptionHandlerOptionsReInvite||{}}set sessionDescriptionHandlerOptionsReInvite(e){this._sessionDescriptionHandlerOptionsReInvite=Object.assign({},e)}get state(){return this._state}set state(e){this._state=e}get stateChange(){return this._stateEventEmitter}get userAgent(){return this._userAgent}bye(e={}){let t="Session.bye() may only be called if established session.";switch(this.state){case i.Initial:"function"==typeof this.cancel?(t+=" However Inviter.invite() has not yet been called.",t+=" Perhaps you should have called Inviter.cancel()?"):"function"==typeof this.reject&&(t+=" However Invitation.accept() has not yet been called.",t+=" Perhaps you should have called Invitation.reject()?");break;case i.Establishing:"function"==typeof this.cancel?(t+=" However a dialog does not yet exist.",t+=" Perhaps you should have called Inviter.cancel()?"):"function"==typeof this.reject&&(t+=" However Invitation.accept() has not yet been called (or not yet resolved).",t+=" Perhaps you should have called Invitation.reject()?");break;case i.Established:{const t=e.requestDelegate,s=this.copyRequestOptions(e.requestOptions);return this._bye(t,s)}case i.Terminating:t+=" However this session is already terminating.","function"==typeof this.cancel?t+=" Perhaps you have already called Inviter.cancel()?":"function"==typeof this.reject&&(t+=" Perhaps you have already called Session.bye()?");break;case i.Terminated:t+=" However this session is already terminated.";break;default:throw new Error("Unknown state")}return this.logger.error(t),Promise.reject(new Error("Invalid session state "+this.state))}info(e={}){if(this.state!==i.Established){const e="Session.info() may only be called if established session.";return this.logger.error(e),Promise.reject(new Error("Invalid session state "+this.state))}const t=e.requestDelegate,s=this.copyRequestOptions(e.requestOptions);return this._info(t,s)}invite(e={}){if(this.logger.log("Session.invite"),this.state!==i.Established)return Promise.reject(new Error("Invalid session state "+this.state));if(this.pendingReinvite)return Promise.reject(new et("Reinvite in progress. Please wait until complete, then try again."));this.pendingReinvite=!0,e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiersReInvite=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptionsReInvite=e.sessionDescriptionHandlerOptions);const t={onAccept:t=>{const s=he(t.message);if(!s)return this.logger.error("Received 2xx response to re-INVITE without a session description"),this.ackAndBye(t,400,"Missing session description"),this.stateTransition(i.Terminated),void(this.pendingReinvite=!1);if(e.withoutSdp){const r={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.setOfferAndGetAnswer(s,r).then(e=>{t.ack({body:e})}).catch(e=>{this.logger.error("Failed to handle offer in 2xx response to re-INVITE"),this.logger.error(e.message),this.state===i.Terminated?t.ack():(this.ackAndBye(t,488,"Bad Media Description"),this.stateTransition(i.Terminated))}).then(()=>{this.pendingReinvite=!1,e.requestDelegate&&e.requestDelegate.onAccept&&e.requestDelegate.onAccept(t)})}else{const r={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.setAnswer(s,r).then(()=>{t.ack()}).catch(e=>{this.logger.error("Failed to handle answer in 2xx response to re-INVITE"),this.logger.error(e.message),this.state!==i.Terminated?(this.ackAndBye(t,488,"Bad Media Description"),this.stateTransition(i.Terminated)):t.ack()}).then(()=>{this.pendingReinvite=!1,e.requestDelegate&&e.requestDelegate.onAccept&&e.requestDelegate.onAccept(t)})}},onProgress:e=>{},onRedirect:e=>{},onReject:t=>{this.logger.warn("Received a non-2xx response to re-INVITE"),this.pendingReinvite=!1,e.withoutSdp?e.requestDelegate&&e.requestDelegate.onReject&&e.requestDelegate.onReject(t):this.rollbackOffer().catch(e=>{if(this.logger.error("Failed to rollback offer on non-2xx response to re-INVITE"),this.logger.error(e.message),this.state!==i.Terminated){if(!this.dialog)throw new Error("Dialog undefined.");const e=[];e.push("Reason: "+this.getReasonHeaderValue(500,"Internal Server Error")),this.dialog.bye(void 0,{extraHeaders:e}),this.stateTransition(i.Terminated)}}).then(()=>{e.requestDelegate&&e.requestDelegate.onReject&&e.requestDelegate.onReject(t)})},onTrying:e=>{}},s=e.requestOptions||{};if(s.extraHeaders=(s.extraHeaders||[]).slice(),s.extraHeaders.push("Allow: "+ke.toString()),s.extraHeaders.push("Contact: "+this._contact),e.withoutSdp){if(!this.dialog)throw this.pendingReinvite=!1,new Error("Dialog undefined.");return Promise.resolve(this.dialog.invite(t,s))}const r={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};return this.getOffer(r).then(e=>{if(!this.dialog)throw this.pendingReinvite=!1,new Error("Dialog undefined.");return s.body=e,this.dialog.invite(t,s)}).catch(e=>{throw this.logger.error(e.message),this.logger.error("Failed to send re-INVITE"),this.pendingReinvite=!1,e})}message(e={}){if(this.state!==i.Established){const e="Session.message() may only be called if established session.";return this.logger.error(e),Promise.reject(new Error("Invalid session state "+this.state))}const t=e.requestDelegate,s=this.copyRequestOptions(e.requestOptions);return this._message(t,s)}refer(e,t={}){if(this.state!==i.Established){const e="Session.refer() may only be called if established session.";return this.logger.error(e),Promise.reject(new Error("Invalid session state "+this.state))}const s=t.requestDelegate,r=this.copyRequestOptions(t.requestOptions);return r.extraHeaders=r.extraHeaders?r.extraHeaders.concat(this.referExtraHeaders(this.referToString(e))):this.referExtraHeaders(this.referToString(e)),this._refer(t.onNotify,s,r)}_bye(e,t){if(!this.dialog)return Promise.reject(new Error("Session dialog undefined."));const s=this.dialog;switch(s.sessionState){case Z.Initial:case Z.Early:throw new Error("Invalid dialog state "+s.sessionState);case Z.AckWait:return this.stateTransition(i.Terminating),new Promise(r=>{s.delegate={onAck:()=>{const n=s.bye(e,t);return this.stateTransition(i.Terminated),r(n),Promise.resolve()},onAckTimeout:()=>{const n=s.bye(e,t);this.stateTransition(i.Terminated),r(n)}}});case Z.Confirmed:{const r=s.bye(e,t);return this.stateTransition(i.Terminated),Promise.resolve(r)}case Z.Terminated:throw new Error("Invalid dialog state "+s.sessionState);default:throw new Error("Unrecognized state.")}}_info(e,t){return this.dialog?Promise.resolve(this.dialog.info(e,t)):Promise.reject(new Error("Session dialog undefined."))}_message(e,t){return this.dialog?Promise.resolve(this.dialog.message(e,t)):Promise.reject(new Error("Session dialog undefined."))}_refer(e,t,s){return this.dialog?(this.onNotify=e,Promise.resolve(this.dialog.refer(t,s))):Promise.reject(new Error("Session dialog undefined."))}ackAndBye(e,t,s){e.ack();const i=[];t&&i.push("Reason: "+this.getReasonHeaderValue(t,s)),e.session.bye(void 0,{extraHeaders:i})}onAckRequest(e){if(this.logger.log("Session.onAckRequest"),this.state!==i.Established&&this.state!==i.Terminating)return this.logger.error(`ACK received while in state ${this.state}, dropping request`),Promise.resolve();const t=this.dialog;if(!t)throw new Error("Dialog undefined.");const s={sessionDescriptionHandlerOptions:this.pendingReinviteAck?this.sessionDescriptionHandlerOptionsReInvite:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.pendingReinviteAck?this._sessionDescriptionHandlerModifiersReInvite:this._sessionDescriptionHandlerModifiers};if(this.delegate&&this.delegate.onAck){const t=new ze(e);this.delegate.onAck(t)}switch(this.pendingReinviteAck=!1,t.signalingState){case X.Initial:{this.logger.error(`Invalid signaling state ${t.signalingState}.`);const e=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return t.bye(void 0,{extraHeaders:e}),this.stateTransition(i.Terminated),Promise.resolve()}case X.Stable:{const r=he(e.message);return r?"render"===r.contentDisposition?(this._renderbody=r.content,this._rendertype=r.contentType,Promise.resolve()):"session"!==r.contentDisposition?Promise.resolve():this.setAnswer(r,s).catch(e=>{this.logger.error(e.message);const s=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];t.bye(void 0,{extraHeaders:s}),this.stateTransition(i.Terminated)}):Promise.resolve()}case X.HaveLocalOffer:{this.logger.error(`Invalid signaling state ${t.signalingState}.`);const e=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return t.bye(void 0,{extraHeaders:e}),this.stateTransition(i.Terminated),Promise.resolve()}case X.HaveRemoteOffer:{this.logger.error(`Invalid signaling state ${t.signalingState}.`);const e=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return t.bye(void 0,{extraHeaders:e}),this.stateTransition(i.Terminated),Promise.resolve()}case X.Closed:default:throw new Error(`Invalid signaling state ${t.signalingState}.`)}}onByeRequest(e){if(this.logger.log("Session.onByeRequest"),this.state===i.Established){if(this.delegate&&this.delegate.onBye){const t=new Qe(e);this.delegate.onBye(t)}else e.accept();this.stateTransition(i.Terminated)}else this.logger.error(`BYE received while in state ${this.state}, dropping request`)}onInfoRequest(e){if(this.logger.log("Session.onInfoRequest"),this.state===i.Established)if(this.delegate&&this.delegate.onInfo){const t=new tt(e);this.delegate.onInfo(t)}else e.accept();else this.logger.error(`INFO received while in state ${this.state}, dropping request`)}onInviteRequest(e){if(this.logger.log("Session.onInviteRequest"),this.state!==i.Established)return void this.logger.error(`INVITE received while in state ${this.state}, dropping request`);this.pendingReinviteAck=!0;const t=["Contact: "+this._contact];if(e.message.hasHeader("P-Asserted-Identity")){const t=e.message.getHeader("P-Asserted-Identity");if(!t)throw new Error("Header undefined.");this._assertedIdentity=D.nameAddrHeaderParse(t)}const s={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.generateResponseOfferAnswerInDialog(s).then(s=>{const i=e.accept({statusCode:200,extraHeaders:t,body:s});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(e.message,i.message,200)}).catch(s=>{if(this.logger.error(s.message),this.logger.error("Failed to handle to re-INVITE request"),!this.dialog)throw new Error("Dialog undefined.");if(this.logger.error(this.dialog.signalingState),this.dialog.signalingState!==X.Stable)this.rollbackOffer().then(()=>{const t=e.reject({statusCode:488});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(e.message,t.message,488)}).catch(s=>{this.logger.error(s.message),this.logger.error("Failed to rollback offer on re-INVITE request");const r=e.reject({statusCode:488});if(this.state!==i.Terminated){if(!this.dialog)throw new Error("Dialog undefined.");[].push("Reason: "+this.getReasonHeaderValue(500,"Internal Server Error")),this.dialog.bye(void 0,{extraHeaders:t}),this.stateTransition(i.Terminated)}this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(e.message,r.message,488)});else{const t=e.reject({statusCode:488});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(e.message,t.message,488)}})}onMessageRequest(e){if(this.logger.log("Session.onMessageRequest"),this.state===i.Established)if(this.delegate&&this.delegate.onMessage){const t=new st(e);this.delegate.onMessage(t)}else e.accept();else this.logger.error(`MESSAGE received while in state ${this.state}, dropping request`)}onNotifyRequest(e){if(this.logger.log("Session.onNotifyRequest"),this.state===i.Established)if(this.onNotify){const t=new it(e);this.onNotify(t)}else if(this.delegate&&this.delegate.onNotify){const t=new it(e);this.delegate.onNotify(t)}else e.accept();else this.logger.error(`NOTIFY received while in state ${this.state}, dropping request`)}onPrackRequest(e){if(this.logger.log("Session.onPrackRequest"),this.state===i.Established)throw new Error("Unimplemented.");this.logger.error(`PRACK received while in state ${this.state}, dropping request`)}onReferRequest(e){if(this.logger.log("Session.onReferRequest"),this.state!==i.Established)return void this.logger.error(`REFER received while in state ${this.state}, dropping request`);if(!e.message.hasHeader("refer-to"))return this.logger.warn("Invalid REFER packet. A refer-to header is required. Rejecting."),void e.reject();const t=new rt(e,this);this.delegate&&this.delegate.onRefer?this.delegate.onRefer(t):(this.logger.log("No delegate available to handle REFER, automatically accepting and following."),t.accept().then(()=>t.makeInviter(this._referralInviterOptions).invite()).catch(e=>{this.logger.error(e.message)}))}generateResponseOfferAnswer(e,t){if(this.dialog)return this.generateResponseOfferAnswerInDialog(t);const s=he(e.message);return s&&"session"===s.contentDisposition?this.setOfferAndGetAnswer(s,t):this.getOffer(t)}generateResponseOfferAnswerInDialog(e){if(!this.dialog)throw new Error("Dialog undefined.");switch(this.dialog.signalingState){case X.Initial:return this.getOffer(e);case X.HaveLocalOffer:return Promise.resolve(void 0);case X.HaveRemoteOffer:if(!this.dialog.offer)throw new Error(`Session offer undefined in signaling state ${this.dialog.signalingState}.`);return this.setOfferAndGetAnswer(this.dialog.offer,e);case X.Stable:return this.state!==i.Established?Promise.resolve(void 0):this.getOffer(e);case X.Closed:default:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`)}}getOffer(e){const t=this.setupSessionDescriptionHandler(),s=e.sessionDescriptionHandlerOptions,i=e.sessionDescriptionHandlerModifiers;try{return t.getDescription(s,i).then(e=>ae(e)).catch(e=>{this.logger.error("Session.getOffer: SDH getDescription rejected...");const t=e instanceof Error?e:new Error("Session.getOffer unknown error.");throw this.logger.error(t.message),t})}catch(e){this.logger.error("Session.getOffer: SDH getDescription threw...");const t=e instanceof Error?e:new Error(e);return this.logger.error(t.message),Promise.reject(t)}}rollbackOffer(){const e=this.setupSessionDescriptionHandler();if(void 0===e.rollbackDescription)return Promise.resolve();try{return e.rollbackDescription().catch(e=>{this.logger.error("Session.rollbackOffer: SDH rollbackDescription rejected...");const t=e instanceof Error?e:new Error("Session.rollbackOffer unknown error.");throw this.logger.error(t.message),t})}catch(e){this.logger.error("Session.rollbackOffer: SDH rollbackDescription threw...");const t=e instanceof Error?e:new Error(e);return this.logger.error(t.message),Promise.reject(t)}}setAnswer(e,t){const s=this.setupSessionDescriptionHandler(),i=t.sessionDescriptionHandlerOptions,r=t.sessionDescriptionHandlerModifiers;try{if(!s.hasDescription(e.contentType))return Promise.reject(new Je)}catch(e){this.logger.error("Session.setAnswer: SDH hasDescription threw...");const t=e instanceof Error?e:new Error(e);return this.logger.error(t.message),Promise.reject(t)}try{return s.setDescription(e.content,i,r).catch(e=>{this.logger.error("Session.setAnswer: SDH setDescription rejected...");const t=e instanceof Error?e:new Error("Session.setAnswer unknown error.");throw this.logger.error(t.message),t})}catch(e){this.logger.error("Session.setAnswer: SDH setDescription threw...");const t=e instanceof Error?e:new Error(e);return this.logger.error(t.message),Promise.reject(t)}}setOfferAndGetAnswer(e,t){const s=this.setupSessionDescriptionHandler(),i=t.sessionDescriptionHandlerOptions,r=t.sessionDescriptionHandlerModifiers;try{if(!s.hasDescription(e.contentType))return Promise.reject(new Je)}catch(e){this.logger.error("Session.setOfferAndGetAnswer: SDH hasDescription threw...");const t=e instanceof Error?e:new Error(e);return this.logger.error(t.message),Promise.reject(t)}try{return s.setDescription(e.content,i,r).then(()=>s.getDescription(i,r)).then(e=>ae(e)).catch(e=>{this.logger.error("Session.setOfferAndGetAnswer: SDH setDescription or getDescription rejected...");const t=e instanceof Error?e:new Error("Session.setOfferAndGetAnswer unknown error.");throw this.logger.error(t.message),t})}catch(e){this.logger.error("Session.setOfferAndGetAnswer: SDH setDescription or getDescription threw...");const t=e instanceof Error?e:new Error(e);return this.logger.error(t.message),Promise.reject(t)}}setSessionDescriptionHandler(e){if(this._sessionDescriptionHandler)throw new Error("Session description handler defined.");this._sessionDescriptionHandler=e}setupSessionDescriptionHandler(){var e;return this._sessionDescriptionHandler||(this._sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions),(null===(e=this.delegate)||void 0===e?void 0:e.onSessionDescriptionHandler)&&this.delegate.onSessionDescriptionHandler(this._sessionDescriptionHandler,!1)),this._sessionDescriptionHandler}stateTransition(e){const t=()=>{throw new Error(`Invalid state transition from ${this._state} to ${e}`)};switch(this._state){case i.Initial:e!==i.Establishing&&e!==i.Established&&e!==i.Terminating&&e!==i.Terminated&&t();break;case i.Establishing:e!==i.Established&&e!==i.Terminating&&e!==i.Terminated&&t();break;case i.Established:e!==i.Terminating&&e!==i.Terminated&&t();break;case i.Terminating:e!==i.Terminated&&t();break;case i.Terminated:t();break;default:throw new Error("Unrecognized state.")}this._state=e,this.logger.log(`Session ${this.id} transitioned to state ${this._state}`),this._stateEventEmitter.emit(this._state),e===i.Terminated&&this.dispose()}copyRequestOptions(e={}){return{extraHeaders:e.extraHeaders?e.extraHeaders.slice():void 0,body:e.body?{contentDisposition:e.body.contentDisposition||"render",contentType:e.body.contentType||"text/plain",content:e.body.content||""}:void 0}}getReasonHeaderValue(e,t){const s=e;let i=P(e);return!i&&t&&(i=t),"SIP;cause="+s+';text="'+i+'"'}referExtraHeaders(e){const t=[];return t.push("Referred-By: <"+this.userAgent.configuration.uri+">"),t.push("Contact: "+this._contact),t.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),t.push("Refer-To: "+e),t}referToString(e){let t;if(e instanceof b)t=e.toString();else{if(!e.dialog)throw new Error("Dialog undefined.");const s=e.remoteIdentity.friendlyName,i=e.dialog.remoteTarget.toString(),r=e.dialog.callId,n=e.dialog.remoteTag,o=e.dialog.localTag;t=`"${s}" <${i}?Replaces=${encodeURIComponent(`${r};to-tag=${n};from-tag=${o}`)}>`}return t}}class ot extends nt{constructor(e,t){super(e),this.incomingInviteRequest=t,this.disposed=!1,this.expiresTimer=void 0,this.isCanceled=!1,this.rel100="none",this.rseq=Math.floor(1e4*Math.random()),this.userNoAnswerTimer=void 0,this.waitingForPrack=!1,this.logger=e.getLogger("sip.Invitation");const s=this.incomingInviteRequest.message,r=s.getHeader("require");r&&r.toLowerCase().includes("100rel")&&(this.rel100="required");const n=s.getHeader("supported");if(n&&n.toLowerCase().includes("100rel")&&(this.rel100="supported"),s.toTag=t.toTag,"string"!=typeof s.toTag)throw new TypeError("toTag should have been a string.");if(this.userNoAnswerTimer=setTimeout(()=>{t.reject({statusCode:480}),this.stateTransition(i.Terminated)},this.userAgent.configuration.noAnswerTimeout?1e3*this.userAgent.configuration.noAnswerTimeout:6e4),s.hasHeader("expires")){const e=1e3*Number(s.getHeader("expires")||0);this.expiresTimer=setTimeout(()=>{this.state===i.Initial&&(t.reject({statusCode:487}),this.stateTransition(i.Terminated))},e)}const o=this.request.getHeader("P-Asserted-Identity");o&&(this._assertedIdentity=D.nameAddrHeaderParse(o)),this._contact=this.userAgent.contact.toString();const a=s.parseHeader("Content-Disposition");a&&"render"===a.type&&(this._renderbody=s.body,this._rendertype=s.getHeader("Content-Type")),this._id=s.callId+s.fromTag,this.userAgent._sessions[this._id]=this}dispose(){if(this.disposed)return Promise.resolve();switch(this.disposed=!0,this.expiresTimer&&(clearTimeout(this.expiresTimer),this.expiresTimer=void 0),this.userNoAnswerTimer&&(clearTimeout(this.userNoAnswerTimer),this.userNoAnswerTimer=void 0),this.prackNeverArrived(),this.state){case i.Initial:case i.Establishing:return this.reject().then(()=>super.dispose());case i.Established:case i.Terminating:case i.Terminated:return super.dispose();default:throw new Error("Unknown state.")}}get autoSendAnInitialProvisionalResponse(){return"required"!==this.rel100&&this.userAgent.configuration.sendInitialProvisionalResponse}get body(){return this.incomingInviteRequest.message.body}get localIdentity(){return this.request.to}get remoteIdentity(){return this.request.from}get request(){return this.incomingInviteRequest.message}accept(e={}){if(this.logger.log("Invitation.accept"),this.state!==i.Initial){const e=new Error("Invalid session state "+this.state);return this.logger.error(e.message),Promise.reject(e)}return e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),this.stateTransition(i.Establishing),this.sendAccept(e).then(({message:e,session:t})=>{t.delegate={onAck:e=>this.onAckRequest(e),onAckTimeout:()=>this.onAckTimeout(),onBye:e=>this.onByeRequest(e),onInfo:e=>this.onInfoRequest(e),onInvite:e=>this.onInviteRequest(e),onMessage:e=>this.onMessageRequest(e),onNotify:e=>this.onNotifyRequest(e),onPrack:e=>this.onPrackRequest(e),onRefer:e=>this.onReferRequest(e)},this._dialog=t,this.stateTransition(i.Established),this._replacee&&this._replacee._bye()}).catch(e=>this.handleResponseError(e))}progress(e={}){if(this.logger.log("Invitation.progress"),this.state!==i.Initial){const e=new Error("Invalid session state "+this.state);return this.logger.error(e.message),Promise.reject(e)}const t=e.statusCode||180;if(t<100||t>199)throw new TypeError("Invalid statusCode: "+t);return e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),this.waitingForPrack?(this.logger.warn("Unexpected call for progress while waiting for prack, ignoring"),Promise.resolve()):100===e.statusCode?this.sendProgressTrying().then(()=>{}).catch(e=>this.handleResponseError(e)):"required"===this.rel100||"supported"===this.rel100&&e.rel100||"supported"===this.rel100&&this.userAgent.configuration.sipExtension100rel===r.Required?this.sendProgressReliableWaitForPrack(e).then(()=>{}).catch(e=>this.handleResponseError(e)):this.sendProgress(e).then(()=>{}).catch(e=>this.handleResponseError(e))}reject(e={}){if(this.logger.log("Invitation.reject"),this.state!==i.Initial&&this.state!==i.Establishing){const e=new Error("Invalid session state "+this.state);return this.logger.error(e.message),Promise.reject(e)}const t=e.statusCode||480,s=e.reasonPhrase?e.reasonPhrase:P(t),r=e.extraHeaders||[];if(t<300||t>699)throw new TypeError("Invalid statusCode: "+t);const n=e.body?ae(e.body):void 0;return t<400?this.incomingInviteRequest.redirect([],{statusCode:t,reasonPhrase:s,extraHeaders:r,body:n}):this.incomingInviteRequest.reject({statusCode:t,reasonPhrase:s,extraHeaders:r,body:n}),this.stateTransition(i.Terminated),Promise.resolve()}_onCancel(e){this.logger.log("Invitation._onCancel"),this.state===i.Initial||this.state===i.Establishing?(this.isCanceled=!0,this.incomingInviteRequest.reject({statusCode:487}),this.stateTransition(i.Terminated)):this.logger.error(`CANCEL received while in state ${this.state}, dropping request`)}handlePrackOfferAnswer(e){if(!this.dialog)throw new Error("Dialog undefined.");const t=he(e.message);if(!t||"session"!==t.contentDisposition)return Promise.resolve(void 0);const s={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers};switch(this.dialog.signalingState){case X.Initial:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);case X.Stable:return this.setAnswer(t,s).then(()=>{});case X.HaveLocalOffer:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);case X.HaveRemoteOffer:return this.setOfferAndGetAnswer(t,s);case X.Closed:default:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`)}}handleResponseError(e){let t=480;if(e instanceof Error?this.logger.error(e.message):this.logger.error(e),e instanceof Je?(this.logger.error("A session description handler occurred while sending response (content type unsupported"),t=415):e instanceof Ze?this.logger.error("A session description handler occurred while sending response"):e instanceof Xe?this.logger.error("Session ended before response could be formulated and sent (while waiting for PRACK)"):e instanceof pe&&this.logger.error("Session changed state before response could be formulated and sent"),this.state===i.Initial||this.state===i.Establishing)try{this.incomingInviteRequest.reject({statusCode:t}),this.stateTransition(i.Terminated)}catch(e){throw this.logger.error("An error occurred attempting to reject the request while handling another error"),e}if(!this.isCanceled)throw e;this.logger.warn("An error occurred while attempting to formulate and send a response to an incoming INVITE. However a CANCEL was received and processed while doing so which can (and often does) result in errors occurring as the session terminates in the meantime. Said error is being ignored.")}onAckTimeout(){if(this.logger.log("Invitation.onAckTimeout"),!this.dialog)throw new Error("Dialog undefined.");this.logger.log("No ACK received for an extended period of time, terminating session"),this.dialog.bye(),this.stateTransition(i.Terminated)}sendAccept(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},s=e.extraHeaders||[];return this.waitingForPrack?this.waitForArrivalOfPrack().then(()=>clearTimeout(this.userNoAnswerTimer)).then(()=>this.generateResponseOfferAnswer(this.incomingInviteRequest,t)).then(e=>this.incomingInviteRequest.accept({statusCode:200,body:e,extraHeaders:s})):(clearTimeout(this.userNoAnswerTimer),this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(e=>this.incomingInviteRequest.accept({statusCode:200,body:e,extraHeaders:s})))}sendProgress(e={}){const t=e.statusCode||180,s=e.reasonPhrase,i=(e.extraHeaders||[]).slice(),r=e.body?ae(e.body):void 0;if(183===t&&!r)return this.sendProgressWithSDP(e);try{const e=this.incomingInviteRequest.progress({statusCode:t,reasonPhrase:s,extraHeaders:i,body:r});return this._dialog=e.session,Promise.resolve(e)}catch(e){return Promise.reject(e)}}sendProgressWithSDP(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},s=e.statusCode||183,i=e.reasonPhrase,r=(e.extraHeaders||[]).slice();return this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(e=>this.incomingInviteRequest.progress({statusCode:s,reasonPhrase:i,extraHeaders:r,body:e})).then(e=>(this._dialog=e.session,e))}sendProgressReliable(e={}){return e.extraHeaders=(e.extraHeaders||[]).slice(),e.extraHeaders.push("Require: 100rel"),e.extraHeaders.push("RSeq: "+Math.floor(1e4*Math.random())),this.sendProgressWithSDP(e)}sendProgressReliableWaitForPrack(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},s=e.statusCode||183,i=e.reasonPhrase,r=(e.extraHeaders||[]).slice();let n;return r.push("Require: 100rel"),r.push("RSeq: "+this.rseq++),new Promise((e,o)=>{this.waitingForPrack=!0,this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(e=>(n=e,this.incomingInviteRequest.progress({statusCode:s,reasonPhrase:i,extraHeaders:r,body:n}))).then(t=>{let a,c;this._dialog=t.session,t.session.delegate={onPrack:s=>{a=s,clearTimeout(h),clearTimeout(g),this.waitingForPrack&&(this.waitingForPrack=!1,this.handlePrackOfferAnswer(a).then(s=>{try{c=a.accept({statusCode:200,body:s}),this.prackArrived(),e({prackRequest:a,prackResponse:c,progressResponse:t})}catch(e){o(e)}}).catch(e=>o(e)))}};const h=setTimeout(()=>{this.waitingForPrack&&(this.waitingForPrack=!1,this.logger.warn("No PRACK received, rejecting INVITE."),clearTimeout(g),this.reject({statusCode:504}).then(()=>o(new Xe)).catch(e=>o(e)))},64*G.T1),d=()=>{try{this.incomingInviteRequest.progress({statusCode:s,reasonPhrase:i,extraHeaders:r,body:n})}catch(e){return this.waitingForPrack=!1,void o(e)}g=setTimeout(d,l*=2)};let l=G.T1,g=setTimeout(d,l)}).catch(e=>{this.waitingForPrack=!1,o(e)})})}sendProgressTrying(){try{const e=this.incomingInviteRequest.trying();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}waitForArrivalOfPrack(){if(this.waitingForPrackPromise)throw new Error("Already waiting for PRACK");return this.waitingForPrackPromise=new Promise((e,t)=>{this.waitingForPrackResolve=e,this.waitingForPrackReject=t}),this.waitingForPrackPromise}prackArrived(){this.waitingForPrackResolve&&this.waitingForPrackResolve(),this.waitingForPrackPromise=void 0,this.waitingForPrackResolve=void 0,this.waitingForPrackReject=void 0}prackNeverArrived(){this.waitingForPrackReject&&this.waitingForPrackReject(new Xe),this.waitingForPrackPromise=void 0,this.waitingForPrackResolve=void 0,this.waitingForPrackReject=void 0}}class at extends nt{constructor(e,t,s={}){super(e,s),this.disposed=!1,this.earlyMedia=!1,this.earlyMediaSessionDescriptionHandlers=new Map,this.isCanceled=!1,this.inviteWithoutSdp=!1,this.logger=e.getLogger("sip.Inviter"),this.earlyMedia=void 0!==s.earlyMedia?s.earlyMedia:this.earlyMedia,console.log("inviter.js 001 earlyMedia=",this.earlyMedia),this.fromTag=N(),this.inviteWithoutSdp=void 0!==s.inviteWithoutSdp?s.inviteWithoutSdp:this.inviteWithoutSdp;const i=Object.assign({},s);i.params=Object.assign({},s.params);const n=s.anonymous||!1,o=e.contact.toString({anonymous:n,outbound:n?!e.contact.tempGruu:!e.contact.pubGruu});n&&e.configuration.uri&&(i.params.fromDisplayName="Anonymous",i.params.fromUri="sip:anonymous@anonymous.invalid");let a=e.userAgentCore.configuration.aor;if(i.params.fromUri&&(a="string"==typeof i.params.fromUri?D.URIParse(i.params.fromUri):i.params.fromUri),!a)throw new TypeError("Invalid from URI: "+i.params.fromUri);let c=t;if(i.params.toUri&&(c="string"==typeof i.params.toUri?D.URIParse(i.params.toUri):i.params.toUri),!c)throw new TypeError("Invalid to URI: "+i.params.toUri);const h=Object.assign({},i.params);h.fromTag=this.fromTag;const d=(i.extraHeaders||[]).slice();n&&e.configuration.uri&&(d.push("P-Preferred-Identity: "+e.configuration.uri.toString()),d.push("Privacy: id")),d.push("Contact: "+o),d.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),e.configuration.sipExtension100rel===r.Required&&d.push("Require: 100rel"),e.configuration.sipExtensionReplaces===r.Required&&d.push("Require: replaces"),i.extraHeaders=d;this.outgoingRequestMessage=e.userAgentCore.makeOutgoingRequestMessage(L.INVITE,t,a,c,h,d,void 0),this._contact=o,this._referralInviterOptions=i,this._renderbody=s.renderbody,this._rendertype=s.rendertype,s.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=s.sessionDescriptionHandlerModifiers),s.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=s.sessionDescriptionHandlerOptions),s.sessionDescriptionHandlerModifiersReInvite&&(this.sessionDescriptionHandlerModifiersReInvite=s.sessionDescriptionHandlerModifiersReInvite),s.sessionDescriptionHandlerOptionsReInvite&&(this.sessionDescriptionHandlerOptionsReInvite=s.sessionDescriptionHandlerOptionsReInvite),this._id=this.outgoingRequestMessage.callId+this.fromTag,this.userAgent._sessions[this._id]=this}dispose(){if(this.disposed)return Promise.resolve();switch(this.disposed=!0,this.disposeEarlyMedia(),this.state){case i.Initial:case i.Establishing:return this.cancel().then(()=>super.dispose());case i.Established:case i.Terminating:case i.Terminated:return super.dispose();default:throw new Error("Unknown state.")}}get body(){return this.outgoingRequestMessage.body}get localIdentity(){return this.outgoingRequestMessage.from}get remoteIdentity(){return this.outgoingRequestMessage.to}get request(){return this.outgoingRequestMessage}cancel(e={}){if(this.logger.log("Inviter.cancel"),this.state!==i.Initial&&this.state!==i.Establishing){const e=new Error("Invalid session state "+this.state);return this.logger.error(e.message),Promise.reject(e)}if(this.isCanceled=!0,this.stateTransition(i.Terminating),this.outgoingInviteRequest){let t;e.statusCode&&e.reasonPhrase&&(t=function(e,t){if(e&&e<200||e>699)throw new TypeError("Invalid statusCode: "+e);if(e){return"SIP;cause="+e+';text="'+(P(e)||t)+'"'}}(e.statusCode,e.reasonPhrase)),this.outgoingInviteRequest.cancel(t,e)}else this.logger.warn("Canceled session before INVITE was sent"),this.stateTransition(i.Terminated);return Promise.resolve()}invite(e={}){if(this.logger.log("Inviter.invite enter"),this.state!==i.Initial)return super.invite(e);if(e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),e.withoutSdp||this.inviteWithoutSdp)return this._renderbody&&this._rendertype&&(this.outgoingRequestMessage.body={contentType:this._rendertype,body:this._renderbody}),this.stateTransition(i.Establishing),Promise.resolve(this.sendInvite(e));const t={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.getOffer(t).then(t=>(this.outgoingRequestMessage.body={body:t.content,contentType:t.contentType},this.stateTransition(i.Establishing),this.sendInvite(e))).catch(e=>{throw this.logger.log(e.message),this.stateTransition(i.Terminated),e})}sendInvite(e={}){return this.outgoingInviteRequest=this.userAgent.userAgentCore.invite(this.outgoingRequestMessage,{onAccept:t=>this.dialog?(this.logger.log("Additional confirmed dialog, sending ACK and BYE"),void this.ackAndBye(t)):this.isCanceled?(this.logger.log("Canceled session accepted, sending ACK and BYE"),this.ackAndBye(t),void this.stateTransition(i.Terminated)):(this.notifyReferer(t),void this.onAccept(t).then(()=>{this.disposeEarlyMedia()}).catch(()=>{this.disposeEarlyMedia()}).then(()=>{e.requestDelegate&&e.requestDelegate.onAccept&&e.requestDelegate.onAccept(t)})),onProgress:t=>{this.isCanceled||(this.notifyReferer(t),this.onProgress(t).catch(()=>{this.disposeEarlyMedia()}).then(()=>{e.requestDelegate&&e.requestDelegate.onProgress&&e.requestDelegate.onProgress(t)}))},onRedirect:t=>{this.notifyReferer(t),this.onRedirect(t),e.requestDelegate&&e.requestDelegate.onRedirect&&e.requestDelegate.onRedirect(t)},onReject:t=>{this.logger.log("outgoingInviteRequest onReject"),this.notifyReferer(t),e.requestDelegate&&e.requestDelegate.onReject&&e.requestDelegate.onReject(t),this.onReject(t)},onTrying:t=>{this.notifyReferer(t),this.onTrying(t),e.requestDelegate&&e.requestDelegate.onTrying&&e.requestDelegate.onTrying(t)}}),this.outgoingInviteRequest}disposeEarlyMedia(){this.earlyMediaSessionDescriptionHandlers.forEach(e=>{e.close()}),this.earlyMediaSessionDescriptionHandlers.clear()}notifyReferer(e){if(!this._referred)return;if(!(this._referred instanceof nt))throw new Error("Referred session not instance of session");if(!this._referred.dialog)return;if(!e.message.statusCode)throw new Error("Status code undefined.");if(!e.message.reasonPhrase)throw new Error("Reason phrase undefined.");const t=`SIP/2.0 ${e.message.statusCode} ${e.message.reasonPhrase}`.trim();this._referred.dialog.notify(void 0,{extraHeaders:["Event: refer","Subscription-State: terminated"],body:{contentDisposition:"render",contentType:"message/sipfrag",content:t}}).delegate={onReject:()=>{this._referred=void 0}}}onAccept(e){if(this.logger.log("Inviter.onAccept"),this.state!==i.Establishing)return this.logger.error(`Accept received while in state ${this.state}, dropping response`),Promise.reject(new Error("Invalid session state "+this.state));const t=e.message,s=e.session;switch(t.hasHeader("P-Asserted-Identity")&&(this._assertedIdentity=D.nameAddrHeaderParse(t.getHeader("P-Asserted-Identity"))),s.delegate={onAck:e=>this.onAckRequest(e),onBye:e=>this.onByeRequest(e),onInfo:e=>this.onInfoRequest(e),onInvite:e=>this.onInviteRequest(e),onMessage:e=>this.onMessageRequest(e),onNotify:e=>this.onNotifyRequest(e),onPrack:e=>this.onPrackRequest(e),onRefer:e=>this.onReferRequest(e)},this._dialog=s,s.signalingState){case X.Initial:case X.HaveLocalOffer:return this.logger.error("Received 2xx response to INVITE without a session description"),this.ackAndBye(e,400,"Missing session description"),this.stateTransition(i.Terminated),Promise.reject(new Error("Bad Media Description"));case X.HaveRemoteOffer:{if(!this._dialog.offer)throw new Error(`Session offer undefined in signaling state ${this._dialog.signalingState}.`);const t={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setOfferAndGetAnswer(this._dialog.offer,t).then(t=>{e.ack({body:t}),this.stateTransition(i.Established)}).catch(t=>{throw this.ackAndBye(e,488,"Invalid session description"),this.stateTransition(i.Terminated),t})}case X.Stable:{if(this.earlyMediaSessionDescriptionHandlers.size>0){const t=this.earlyMediaSessionDescriptionHandlers.get(s.id);if(!t)throw new Error("Session description handler undefined.");return this.setSessionDescriptionHandler(t),this.earlyMediaSessionDescriptionHandlers.delete(s.id),e.ack(),this.stateTransition(i.Established),Promise.resolve()}if(this.earlyMediaDialog){if(this.earlyMediaDialog!==s){if(this.earlyMedia){const e="You have set the 'earlyMedia' option to 'true' which requires that your INVITE requests do not fork and yet this INVITE request did in fact fork. Consequentially and not surprisingly the end point which accepted the INVITE (confirmed dialog) does not match the end point with which early media has been setup (early dialog) and thus this session is unable to proceed. In accordance with the SIP specifications, the SIP servers your end point is connected to determine if an INVITE forks and the forking behavior of those servers cannot be controlled by this library. If you wish to use early media with this library you must configure those servers accordingly. Alternatively you may set the 'earlyMedia' to 'false' which will allow this library to function with any INVITE requests which do fork.";this.logger.error(e)}const t=new Error("Early media dialog does not equal confirmed dialog, terminating session");return this.logger.error(t.message),this.ackAndBye(e,488,"Not Acceptable Here"),this.stateTransition(i.Terminated),Promise.reject(t)}return e.ack(),this.stateTransition(i.Established),Promise.resolve()}const t=s.answer;if(!t)throw new Error("Answer is undefined.");const r={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setAnswer(t,r).then(()=>{let t;this._renderbody&&this._rendertype&&(t={body:{contentDisposition:"render",contentType:this._rendertype,content:this._renderbody}}),e.ack(t),this.stateTransition(i.Established)}).catch(t=>{throw this.logger.error(t.message),this.ackAndBye(e,488,"Not Acceptable Here"),this.stateTransition(i.Terminated),t})}case X.Closed:return Promise.reject(new Error("Terminated."));default:throw new Error("Unknown session signaling state.")}}onProgress(e){var t;if(this.logger.log("Inviter.onProgress this.state="+this.state),this.state!==i.Establishing)return this.logger.error(`Progress received while in state ${this.state}, dropping response`),Promise.reject(new Error("Invalid session state "+this.state));if(!this.outgoingInviteRequest)throw new Error("Outgoing INVITE request undefined.");const s=e.message,r=e.session;s.hasHeader("P-Asserted-Identity")&&(this._assertedIdentity=D.nameAddrHeaderParse(s.getHeader("P-Asserted-Identity")));const n=s.getHeader("require"),o=s.getHeader("rseq"),a=!!(n&&n.includes("100rel")&&o?Number(o):void 0),c=[];switch(a&&c.push("RAck: "+s.getHeader("rseq")+" "+s.getHeader("cseq")),console.log("Inviter.onProgress session.signalingState=",r.signalingState),r.signalingState){case X.Initial:return a&&(this.logger.warn("First reliable provisional response received MUST contain an offer when INVITE does not contain an offer."),e.prack({extraHeaders:c})),Promise.resolve();case X.HaveLocalOffer:return a&&e.prack({extraHeaders:c}),Promise.resolve();case X.HaveRemoteOffer:if(!a)return this.logger.warn("Non-reliable provisional response MUST NOT contain an initial offer, discarding response."),Promise.resolve();{const n=this.sessionDescriptionHandlerFactory(this,this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions||{});return(null===(t=this.delegate)||void 0===t?void 0:t.onSessionDescriptionHandler)&&this.delegate.onSessionDescriptionHandler(n,!0),this.earlyMediaSessionDescriptionHandlers.set(r.id,n),n.setDescription(s.body,this.sessionDescriptionHandlerOptions,this.sessionDescriptionHandlerModifiers).then(()=>n.getDescription(this.sessionDescriptionHandlerOptions,this.sessionDescriptionHandlerModifiers)).then(t=>{const s={contentDisposition:"session",contentType:t.contentType,content:t.body};e.prack({extraHeaders:c,body:s})}).catch(e=>{throw this.stateTransition(i.Terminated),e})}case X.Stable:if(a&&e.prack({extraHeaders:c}),console.log("SignalingState.Stable this.earlyMedia=",this.earlyMedia,this.earlyMediaDialog),this.earlyMedia&&!this.earlyMediaDialog){this.earlyMediaDialog=r;const e=r.answer;if(!e)throw new Error("Answer is undefined.");const t={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};let s=r;return console.log("setAnswer for 100rel"),this.setAnswer(e,t).then(()=>{console.log("==5== setAnswer OK that=",s," this=",this),this.earlyMediaEstablished=!0,this.stateTransition(i.Established)}).catch(e=>{throw this.stateTransition(i.Terminated),e})}return Promise.resolve();case X.Closed:return Promise.reject(new Error("Terminated."));default:throw new Error("Unknown session signaling state.")}}onRedirect(e){this.logger.log("Inviter.onRedirect"),this.state===i.Establishing||this.state===i.Terminating?this.stateTransition(i.Terminated):this.logger.error(`Redirect received while in state ${this.state}, dropping response`)}onReject(e){this.logger.log("Inviter.onReject"),this.state===i.Establishing||this.state===i.Terminating?this.stateTransition(i.Terminated):this.logger.error(`Reject received while in state ${this.state}, dropping response`)}onTrying(e){this.logger.log("Inviter.onTrying"),this.state===i.Establishing||this.logger.error(`Trying received while in state ${this.state}, dropping response`)}}!function(e){e.Started="Started",e.Stopped="Stopped"}(Ge||(Ge={}));class ct{constructor(e={}){if(this._publishers={},this._registerers={},this._sessions={},this._subscriptions={},this._state=Ge.Stopped,this.unloadListener=()=>{this.stop()},this._stateEventEmitter=new Ke,this.delegate=e.delegate,this.options=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ct.defaultOptions()),{sipjsId:k(5)}),{uri:new b("sip","anonymous."+k(6),"anonymous.invalid")}),{viaHost:k(12)+".invalid"}),ct.stripUndefinedProperties(e)),console.log("UserAgent options=",this.options),this.options.hackIpInContact)if("boolean"==typeof this.options.hackIpInContact&&this.options.hackIpInContact){const e=1,t=254,s=Math.floor(Math.random()*(t-e+1)+e);this.options.viaHost="192.0.2."+s}else this.options.hackIpInContact&&(this.options.viaHost=this.options.hackIpInContact);switch(this.loggerFactory=new I,this.logger=this.loggerFactory.getLogger("sip.UserAgent"),this.loggerFactory.builtinEnabled=this.options.logBuiltinEnabled,this.loggerFactory.connector=this.options.logConnector,this.options.logLevel){case"error":this.loggerFactory.level=S.error;break;case"warn":this.loggerFactory.level=S.warn;break;case"log":this.loggerFactory.level=S.log;break;case"debug":this.loggerFactory.level=S.debug}if(this.options.logConfiguration&&(this.logger.log("Configuration:"),Object.keys(this.options).forEach(e=>{const t=this.options[e];switch(e){case"uri":case"sessionDescriptionHandlerFactory":this.logger.log("· "+e+": "+t);break;case"authorizationPassword":this.logger.log("· "+e+": NOT SHOWN");break;case"transportConstructor":this.logger.log("· "+e+": "+t.name);break;default:this.logger.log("· "+e+": "+JSON.stringify(t))}})),this.options.transportOptions){const t=this.options.transportOptions,s=t.maxReconnectionAttempts,i=t.reconnectionTimeout;if(void 0!==s){const e='The transport option "maxReconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(e)}if(void 0!==i){const e='The transport option "reconnectionTimeout" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(e)}void 0===e.reconnectionDelay&&void 0!==i&&(this.options.reconnectionDelay=i),void 0===e.reconnectionAttempts&&void 0!==s&&(this.options.reconnectionAttempts=s)}if(void 0!==e.reconnectionDelay){const e='The user agent option "reconnectionDelay" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(e)}if(void 0!==e.reconnectionAttempts){const e='The user agent option "reconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(e)}this._transport=new this.options.transportConstructor(this.getLogger("sip.Transport"),this.options.transportOptions),this.initTransportCallbacks(),this._contact=this.initContact(),this._userAgentCore=this.initCore(),this.options.autoStart&&this.start()}static makeURI(e){return D.URIParse(e)}static defaultOptions(){return{allowLegacyNotifications:!1,authorizationHa1:"",authorizationPassword:"",authorizationUsername:"",autoStart:!1,autoStop:!0,delegate:{},contactName:"",contactParams:{transport:"ws"},displayName:"",forceRport:!1,hackAllowUnregisteredOptionTags:!1,hackIpInContact:!1,hackViaTcp:!1,logBuiltinEnabled:!0,logConfiguration:!0,logConnector:()=>{},logLevel:"log",noAnswerTimeout:60,preloadedRouteSet:[],reconnectionAttempts:0,reconnectionDelay:4,sendInitialProvisionalResponse:!0,sessionDescriptionHandlerFactory:T(),sessionDescriptionHandlerFactoryOptions:{},sipExtension100rel:r.Unsupported,sipExtensionReplaces:r.Unsupported,sipExtensionExtraSupported:[],sipjsId:"",transportConstructor:Ye,transportOptions:{},uri:new b("sip","anonymous","anonymous.invalid"),userAgentString:"SIP.js/0.20.0",viaHost:""}}static stripUndefinedProperties(e){return Object.keys(e).reduce((t,s)=>(void 0!==e[s]&&(t[s]=e[s]),t),{})}get configuration(){return this.options}get contact(){return this._contact}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get transport(){return this._transport}get userAgentCore(){return this._userAgentCore}getLogger(e,t){return this.loggerFactory.getLogger(e,t)}getLoggerFactory(){return this.loggerFactory}isConnected(){return this.transport.isConnected()}reconnect(){return this.state===Ge.Stopped?Promise.reject(new Error("User agent stopped.")):Promise.resolve().then(()=>this.transport.connect())}start(){if(this.state===Ge.Started)return this.logger.warn("User agent already started"),Promise.resolve();if(this.logger.log("Starting "+this.configuration.uri),this.transitionState(Ge.Started),this.options.autoStop){const e=!("undefined"==typeof chrome||!chrome.app||!chrome.app.runtime);"undefined"==typeof window||"function"!=typeof window.addEventListener||e||window.addEventListener("unload",this.unloadListener)}return this.transport.connect()}async stop(){if(this.state===Ge.Stopped)return this.logger.warn("User agent already stopped"),Promise.resolve();if(this.logger.log("Stopping "+this.configuration.uri),this.transitionState(Ge.Stopped),this.options.autoStop){const e=!("undefined"==typeof chrome||!chrome.app||!chrome.app.runtime);"undefined"!=typeof window&&window.removeEventListener&&!e&&window.removeEventListener("unload",this.unloadListener)}const e=Object.assign({},this._publishers),t=Object.assign({},this._registerers),s=Object.assign({},this._sessions),i=Object.assign({},this._subscriptions),r=this.transport,n=this.userAgentCore;this.logger.log("Dispose of registerers");for(const e in t)t[e]&&await t[e].dispose().catch(t=>{throw this.logger.error(t.message),delete this._registerers[e],t});this.logger.log("Dispose of sessions");for(const e in s)s[e]&&await s[e].dispose().catch(t=>{throw this.logger.error(t.message),delete this._sessions[e],t});this.logger.log("Dispose of subscriptions");for(const e in i)i[e]&&await i[e].dispose().catch(t=>{throw this.logger.error(t.message),delete this._subscriptions[e],t});this.logger.log("Dispose of publishers");for(const t in e)e[t]&&await e[t].dispose().catch(e=>{throw this.logger.error(e.message),delete this._publishers[t],e});this.logger.log("Dispose of transport"),await r.dispose().catch(e=>{throw this.logger.error(e.message),e}),this.logger.log("Dispose of core"),n.dispose()}_makeInviter(e,t){return new at(this,e,t)}attemptReconnection(e=1){const t=this.options.reconnectionAttempts,s=this.options.reconnectionDelay;e>t?this.logger.log("Maximum reconnection attempts reached"):(this.logger.log(`Reconnection attempt ${e} of ${t} - trying`),setTimeout(()=>{this.reconnect().then(()=>{this.logger.log(`Reconnection attempt ${e} of ${t} - succeeded`)}).catch(s=>{this.logger.error(s.message),this.logger.log(`Reconnection attempt ${e} of ${t} - failed`),this.attemptReconnection(++e)})},1===e?0:1e3*s))}initContact(){const e=""!==this.options.contactName?this.options.contactName:k(8),t=this.options.contactParams;return{pubGruu:void 0,tempGruu:void 0,uri:new b("sip",e,this.options.viaHost,void 0,t),toString:(e={})=>{const s=e.anonymous||!1,i=e.outbound||!1;let r="<";return r+=s?this.contact.tempGruu||"sip:anonymous@anonymous.invalid;transport="+(t.transport?t.transport:"ws"):this.contact.pubGruu||this.contact.uri,i&&(r+=";ob"),r+=">",r}}}initCore(){let e=[];e.push("outbound"),this.options.sipExtension100rel===r.Supported&&e.push("100rel"),this.options.sipExtensionReplaces===r.Supported&&e.push("replaces"),this.options.sipExtensionExtraSupported&&e.push(...this.options.sipExtensionExtraSupported),this.options.hackAllowUnregisteredOptionTags||(e=e.filter(e=>o[e])),e=Array.from(new Set(e));const t=e.slice();(this.contact.pubGruu||this.contact.tempGruu)&&t.push("gruu");const s={aor:this.options.uri,contact:this.contact,displayName:this.options.displayName,loggerFactory:this.loggerFactory,hackViaTcp:this.options.hackViaTcp,routeSet:this.options.preloadedRouteSet,supportedOptionTags:e,supportedOptionTagsResponse:t,sipjsId:this.options.sipjsId,userAgentHeaderFieldValue:this.options.userAgentString,viaForceRport:this.options.forceRport,viaHost:this.options.viaHost,authenticationFactory:()=>{const e=this.options.authorizationUsername?this.options.authorizationUsername:this.options.uri.user,t=this.options.authorizationPassword?this.options.authorizationPassword:void 0,s=this.options.authorizationHa1?this.options.authorizationHa1:void 0;return new M(this.getLoggerFactory(),s,e,t)},transportAccessor:()=>this.transport};return new je(s,{onInvite:e=>{var t;const s=new ot(this,e);if(e.delegate={onCancel:e=>{s._onCancel(e)},onTransportError:e=>{this.logger.error("A transport error has occurred while handling an incoming INVITE request.")}},e.trying(),this.options.sipExtensionReplaces!==r.Unsupported){const t=e.message.parseHeader("replaces");if(t){const e=t.call_id;if("string"!=typeof e)throw new Error("Type of call id is not string");const i=t.replaces_to_tag;if("string"!=typeof i)throw new Error("Type of to tag is not string");const r=t.replaces_from_tag;if("string"!=typeof r)throw new Error("type of from tag is not string");const n=e+i+r,o=this.userAgentCore.dialogs.get(n);if(!o)return void s.reject({statusCode:481});if(!o.early&&!0===t.early_only)return void s.reject({statusCode:486});const a=this._sessions[e+r]||this._sessions[e+i]||void 0;if(!a)throw new Error("Session does not exist.");s._replacee=a}}if(null===(t=this.delegate)||void 0===t?void 0:t.onInvite)return s.autoSendAnInitialProvisionalResponse?void s.progress().then(()=>{var e;if(void 0===(null===(e=this.delegate)||void 0===e?void 0:e.onInvite))throw new Error("onInvite undefined.");this.delegate.onInvite(s)}):void this.delegate.onInvite(s);s.reject({statusCode:486})},onMessage:e=>{if(this.delegate&&this.delegate.onMessage){const t=new st(e);this.delegate.onMessage(t)}else e.accept()},onNotify:e=>{if(this.delegate&&this.delegate.onNotify){const t=new it(e);this.delegate.onNotify(t)}else this.options.allowLegacyNotifications?e.accept():e.reject({statusCode:481})},onRefer:e=>{this.logger.warn("Received an out of dialog REFER request"),this.delegate&&this.delegate.onReferRequest?this.delegate.onReferRequest(e):e.reject({statusCode:405})},onRegister:e=>{this.logger.warn("Received an out of dialog REGISTER request"),this.delegate&&this.delegate.onRegisterRequest?this.delegate.onRegisterRequest(e):e.reject({statusCode:405})},onSubscribe:e=>{this.logger.warn("Received an out of dialog SUBSCRIBE request"),this.delegate&&this.delegate.onSubscribeRequest?this.delegate.onSubscribeRequest(e):e.reject({statusCode:405})}})}initTransportCallbacks(){this.transport.onConnect=()=>this.onTransportConnect(),this.transport.onDisconnect=e=>this.onTransportDisconnect(e),this.transport.onMessage=e=>this.onTransportMessage(e)}onTransportConnect(){this.state!==Ge.Stopped&&this.delegate&&this.delegate.onConnect&&this.delegate.onConnect()}onTransportDisconnect(e){this.state!==Ge.Stopped&&(this.delegate&&this.delegate.onDisconnect&&this.delegate.onDisconnect(e),e&&this.options.reconnectionAttempts>0&&this.attemptReconnection())}onTransportMessage(e){const t=Fe.parseMessage(e,this.getLogger("sip.Parser"));if(!t)return void this.logger.warn("Failed to parse incoming message. Dropping.");if(this.state===Ge.Stopped&&t instanceof re)return void this.logger.warn(`Received ${t.method} request while stopped. Dropping.`);const s=()=>{const e=["from","to","call_id","cseq","via"];for(const s of e)if(!t.hasHeader(s))return this.logger.warn(`Missing mandatory header field : ${s}.`),!1;return!0};if(t instanceof re){if(!s())return void this.logger.warn("Request missing mandatory header field. Dropping.");if(!t.toTag&&t.callId.substr(0,5)===this.options.sipjsId)return void this.userAgentCore.replyStateless(t,{statusCode:482});const e=O(t.body),i=t.getHeader("content-length");if(i&&e<Number(i))return void this.userAgentCore.replyStateless(t,{statusCode:400})}if(t instanceof ne){if(!s())return void this.logger.warn("Response missing mandatory header field. Dropping.");if(t.getHeaders("via").length>1)return void this.logger.warn("More than one Via header field present in the response. Dropping.");if(t.via.host!==this.options.viaHost||void 0!==t.via.port)return void this.logger.warn("Via sent-by in the response does not match UA Via host value. Dropping.");const e=O(t.body),i=t.getHeader("content-length");if(i&&e<Number(i))return void this.logger.warn("Message body length is lower than the value in Content-Length header field. Dropping.")}if(t instanceof re)this.userAgentCore.receiveIncomingRequestFromTransport(t);else{if(!(t instanceof ne))throw new Error("Invalid message type.");this.userAgentCore.receiveIncomingResponseFromTransport(t)}}transitionState(e,t){const s=()=>{throw new Error(`Invalid state transition from ${this._state} to ${e}`)};switch(this._state){case Ge.Started:e!==Ge.Stopped&&s();break;case Ge.Stopped:e!==Ge.Started&&s();break;default:throw new Error("Unknown state.")}this.logger.log(`Transitioned from ${this._state} to ${e}`),this._state=e,this._stateEventEmitter.emit(this._state)}}!function(e){e.Initial="Initial",e.Registered="Registered",e.Unregistered="Unregistered",e.Terminated="Terminated"}(Ve||(Ve={}));class ht{constructor(e,t={}){this.disposed=!1,this._contacts=[],this._retryAfter=void 0,this._state=Ve.Initial,this._waiting=!1,this._stateEventEmitter=new Ke,this._waitingEventEmitter=new Ke,this.userAgent=e;const s=e.configuration.uri.clone();if(s.user=void 0,this.options=Object.assign(Object.assign(Object.assign({},ht.defaultOptions()),{registrar:s}),ht.stripUndefinedProperties(t)),this.options.extraContactHeaderParams=(this.options.extraContactHeaderParams||[]).slice(),this.options.extraHeaders=(this.options.extraHeaders||[]).slice(),!this.options.registrar)throw new Error("Registrar undefined.");if(this.options.registrar=this.options.registrar.clone(),this.options.regId&&!this.options.instanceId?this.options.instanceId=ht.newUUID():!this.options.regId&&this.options.instanceId&&(this.options.regId=1),this.options.instanceId&&-1===D.parse(this.options.instanceId,"uuid"))throw new Error("Invalid instanceId.");if(this.options.regId&&this.options.regId<0)throw new Error("Invalid regId.");const i=this.options.registrar,r=this.options.params&&this.options.params.fromUri||e.userAgentCore.configuration.aor,n=this.options.params&&this.options.params.toUri||e.configuration.uri,o=this.options.params||{},a=(t.extraHeaders||[]).slice();if(this.request=e.userAgentCore.makeOutgoingRequestMessage(L.REGISTER,i,r,n,o,a,void 0),this.expires=this.options.expires||ht.defaultExpires,this.expires<0)throw new Error("Invalid expires.");if(this.refreshFrequency=this.options.refreshFrequency||ht.defaultRefreshFrequency,this.refreshFrequency<50||this.refreshFrequency>99)throw new Error("Invalid refresh frequency. The value represents a percentage of the expiration time and should be between 50 and 99.");this.logger=e.getLogger("sip.Registerer"),this.options.logConfiguration&&(this.logger.log("Configuration:"),Object.keys(this.options).forEach(e=>{const t=this.options[e];switch(e){case"registrar":this.logger.log("· "+e+": "+t);break;default:this.logger.log("· "+e+": "+JSON.stringify(t))}})),this.id=this.request.callId+this.request.from.parameters.tag,this.userAgent._registerers[this.id]=this}static defaultOptions(){return{expires:ht.defaultExpires,extraContactHeaderParams:[],extraHeaders:[],logConfiguration:!0,instanceId:"",params:{},regId:0,registrar:new b("sip","anonymous","anonymous.invalid"),refreshFrequency:ht.defaultRefreshFrequency}}static newUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.floor(16*Math.random());return("x"===e?t:t%4+8).toString(16)})}static stripUndefinedProperties(e){return Object.keys(e).reduce((t,s)=>(void 0!==e[s]&&(t[s]=e[s]),t),{})}get contacts(){return this._contacts.slice()}get retryAfter(){return this._retryAfter}get state(){return this._state}get stateChange(){return this._stateEventEmitter}dispose(){return this.disposed?Promise.resolve():(this.disposed=!0,this.logger.log(`Registerer ${this.id} in state ${this.state} is being disposed`),delete this.userAgent._registerers[this.id],new Promise(e=>{const t=()=>{if(!this.waiting&&this._state===Ve.Registered)return this.stateChange.addListener(()=>{this.terminated(),e()},{once:!0}),void this.unregister();this.terminated(),e()};this.waiting?this.waitingChange.addListener(()=>{t()},{once:!0}):t()}))}register(e={}){if(this.state===Ve.Terminated)throw this.stateError(),new Error("Registerer terminated. Unable to register.");if(this.disposed)throw this.stateError(),new Error("Registerer disposed. Unable to register.");if(this.waiting){this.waitingWarning();const e=new et("REGISTER request already in progress, waiting for final response");return Promise.reject(e)}e.requestOptions&&(this.options=Object.assign(Object.assign({},this.options),e.requestOptions));const t=(this.options.extraHeaders||[]).slice();t.push("Contact: "+this.generateContactHeader(this.expires)),t.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.request.cseq++,this.request.setHeader("cseq",this.request.cseq+" REGISTER"),this.request.extraHeaders=t,this.waitingToggle(!0);const s=this.userAgent.userAgentCore.register(this.request,{onAccept:t=>{let s;t.message.hasHeader("expires")&&(s=Number(t.message.getHeader("expires"))),this._contacts=t.message.getHeaders("contact");let i,r=this._contacts.length;if(!r)return this.logger.error("No Contact header in response to REGISTER, dropping response."),void this.unregistered();for(;r--;){if(i=t.message.parseHeader("contact",r),!i)throw new Error("Contact undefined");if(this.userAgent.contact.pubGruu&&E(i.uri,this.userAgent.contact.pubGruu)){s=Number(i.getParam("expires"));break}if(""===this.userAgent.configuration.contactName){if(i.uri.user===this.userAgent.contact.uri.user){s=Number(i.getParam("expires"));break}}else if(E(i.uri,this.userAgent.contact.uri)){s=Number(i.getParam("expires"));break}i=void 0}if(void 0===i)return this.logger.error("No Contact header pointing to us, dropping response"),this.unregistered(),void this.waitingToggle(!1);if(void 0===s)return this.logger.error("Contact pointing to us is missing expires parameter, dropping response"),this.unregistered(),void this.waitingToggle(!1);if(i.hasParam("temp-gruu")){const e=i.getParam("temp-gruu");e&&(this.userAgent.contact.tempGruu=D.URIParse(e.replace(/"/g,"")))}if(i.hasParam("pub-gruu")){const e=i.getParam("pub-gruu");e&&(this.userAgent.contact.pubGruu=D.URIParse(e.replace(/"/g,"")))}this.registered(s),e.requestDelegate&&e.requestDelegate.onAccept&&e.requestDelegate.onAccept(t),this.waitingToggle(!1)},onProgress:t=>{e.requestDelegate&&e.requestDelegate.onProgress&&e.requestDelegate.onProgress(t)},onRedirect:t=>{this.logger.error("Redirect received. Not supported."),this.unregistered(),e.requestDelegate&&e.requestDelegate.onRedirect&&e.requestDelegate.onRedirect(t),this.waitingToggle(!1)},onReject:t=>{if(423===t.message.statusCode)return t.message.hasHeader("min-expires")?(this.expires=Number(t.message.getHeader("min-expires")),this.waitingToggle(!1),void this.register()):(this.logger.error("423 response received for REGISTER without Min-Expires, dropping response"),this.unregistered(),void this.waitingToggle(!1));this.logger.warn("Failed to register, status code "+t.message.statusCode);let s=NaN;if(500===t.message.statusCode||503===t.message.statusCode){const e=t.message.getHeader("retry-after");e&&(s=Number.parseInt(e,void 0))}this._retryAfter=isNaN(s)?void 0:s,this.unregistered(),e.requestDelegate&&e.requestDelegate.onReject&&e.requestDelegate.onReject(t),this._retryAfter=void 0,this.waitingToggle(!1)},onTrying:t=>{e.requestDelegate&&e.requestDelegate.onTrying&&e.requestDelegate.onTrying(t)}});return Promise.resolve(s)}unregister(e={}){if(this.state===Ve.Terminated)throw this.stateError(),new Error("Registerer terminated. Unable to register.");if(this.disposed&&this.state!==Ve.Registered)throw this.stateError(),new Error("Registerer disposed. Unable to register.");if(this.waiting){this.waitingWarning();const e=new et("REGISTER request already in progress, waiting for final response");return Promise.reject(e)}this._state===Ve.Registered||e.all||this.logger.warn("Not currently registered, but sending an unregister anyway.");const t=(e.requestOptions&&e.requestOptions.extraHeaders||[]).slice();this.request.extraHeaders=t,e.all?(t.push("Contact: *"),t.push("Expires: 0")):t.push("Contact: "+this.generateContactHeader(0)),this.request.cseq++,this.request.setHeader("cseq",this.request.cseq+" REGISTER"),void 0!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),this.waitingToggle(!0);const s=this.userAgent.userAgentCore.register(this.request,{onAccept:t=>{this._contacts=t.message.getHeaders("contact"),this.unregistered(),e.requestDelegate&&e.requestDelegate.onAccept&&e.requestDelegate.onAccept(t),this.waitingToggle(!1)},onProgress:t=>{e.requestDelegate&&e.requestDelegate.onProgress&&e.requestDelegate.onProgress(t)},onRedirect:t=>{this.logger.error("Unregister redirected. Not currently supported."),this.unregistered(),e.requestDelegate&&e.requestDelegate.onRedirect&&e.requestDelegate.onRedirect(t),this.waitingToggle(!1)},onReject:t=>{this.logger.error("Unregister rejected with status code "+t.message.statusCode),this.unregistered(),e.requestDelegate&&e.requestDelegate.onReject&&e.requestDelegate.onReject(t),this.waitingToggle(!1)},onTrying:t=>{e.requestDelegate&&e.requestDelegate.onTrying&&e.requestDelegate.onTrying(t)}});return Promise.resolve(s)}clearTimers(){void 0!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),void 0!==this.registrationExpiredTimer&&(clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=void 0)}generateContactHeader(e){let t=this.userAgent.contact.toString();return this.options.regId&&this.options.instanceId&&(t+=";reg-id="+this.options.regId,t+=';+sip.instance="<urn:uuid:'+this.options.instanceId+'>"'),this.options.extraContactHeaderParams&&this.options.extraContactHeaderParams.forEach(e=>{t+=";"+e}),t+=";expires="+e,t}registered(e){this.clearTimers(),this.registrationTimer=setTimeout(()=>{this.registrationTimer=void 0,this.register()},this.refreshFrequency/100*e*1e3),this.registrationExpiredTimer=setTimeout(()=>{this.logger.warn("Registration expired"),this.unregistered()},1e3*e),this._state!==Ve.Registered&&this.stateTransition(Ve.Registered)}unregistered(){this.clearTimers(),this._state!==Ve.Unregistered&&this.stateTransition(Ve.Unregistered)}terminated(){this.clearTimers(),this._state!==Ve.Terminated&&this.stateTransition(Ve.Terminated)}stateTransition(e){const t=()=>{throw new Error(`Invalid state transition from ${this._state} to ${e}`)};switch(this._state){case Ve.Initial:e!==Ve.Registered&&e!==Ve.Unregistered&&e!==Ve.Terminated&&t();break;case Ve.Registered:e!==Ve.Unregistered&&e!==Ve.Terminated&&t();break;case Ve.Unregistered:e!==Ve.Registered&&e!==Ve.Terminated&&t();break;case Ve.Terminated:t();break;default:throw new Error("Unrecognized state.")}this._state=e,this.logger.log("Registration transitioned to state "+this._state),this._stateEventEmitter.emit(this._state),e===Ve.Terminated&&this.dispose()}get waiting(){return this._waiting}get waitingChange(){return this._waitingEventEmitter}waitingToggle(e){if(this._waiting===e)throw new Error(`Invalid waiting transition from ${this._waiting} to ${e}`);this._waiting=e,this.logger.log("Waiting toggled to "+this._waiting),this._waitingEventEmitter.emit(this._waiting)}waitingWarning(){let e="An attempt was made to send a REGISTER request while a prior one was still in progress.";e+=" RFC 3261 requires UAs MUST NOT send a new registration until they have received a final response",e+=" from the registrar for the previous one or the previous REGISTER request has timed out.",e+=" Note that if the transport disconnects, you still must wait for the prior request to time out before",e+=" sending a new REGISTER request or alternatively dispose of the current Registerer and create a new Registerer.",this.logger.warn("An attempt was made to send a REGISTER request while a prior one was still in progress. RFC 3261 requires UAs MUST NOT send a new registration until they have received a final response from the registrar for the previous one or the previous REGISTER request has timed out. Note that if the transport disconnects, you still must wait for the prior request to time out before sending a new REGISTER request or alternatively dispose of the current Registerer and create a new Registerer.")}stateError(){let e=`An attempt was made to send a REGISTER request when the Registerer ${this.state===Ve.Terminated?"is in 'Terminated' state":"has been disposed"}.`;e+=" The Registerer transitions to 'Terminated' when Registerer.dispose() is called.",e+=" Perhaps you called UserAgent.stop() which dipsoses of all Registerers?",this.logger.error(e)}}ht.defaultExpires=600,ht.defaultRefreshFrequency=99;class dt{constructor(e,t,s,i="text/plain",r={}){this.logger=e.getLogger("sip.Messager"),r.params=r.params||{};let n=e.userAgentCore.configuration.aor;if(r.params.fromUri&&(n="string"==typeof r.params.fromUri?D.URIParse(r.params.fromUri):r.params.fromUri),!n)throw new TypeError("Invalid from URI: "+r.params.fromUri);let o=t;if(r.params.toUri&&(o="string"==typeof r.params.toUri?D.URIParse(r.params.toUri):r.params.toUri),!o)throw new TypeError("Invalid to URI: "+r.params.toUri);const a=r.params?Object.assign({},r.params):{},c=(r.extraHeaders||[]).slice(),h={contentDisposition:"render",contentType:i,content:s};this.request=e.userAgentCore.makeOutgoingRequestMessage(L.MESSAGE,t,n,o,a,c,h),this.userAgent=e}message(e={}){return this.userAgent.userAgentCore.request(this.request,e.requestDelegate),Promise.resolve()}}class lt{constructor(e,t={}){this.attemptingReconnection=!1,this.connectRequested=!1,this.held=!1,this.muted=!1,this.registerer=void 0,this.registerRequested=!1,this.session=void 0,this.delegate=t.delegate,this.options=Object.assign({},t);const s=Object.assign({},t.userAgentOptions);if(s.transportConstructor||(s.transportConstructor=Ye),s.transportOptions||(s.transportOptions={server:e}),!s.uri&&t.aor){const e=ct.makeURI(t.aor);if(!e)throw new Error("Failed to create valid URI from "+t.aor);s.uri=e}this.userAgent=new ct(s),this.userAgent.delegate={onConnect:()=>{this.logger.log(`[${this.id}] Connected`),this.delegate&&this.delegate.onServerConnect&&this.delegate.onServerConnect(),this.registerer&&this.registerRequested&&(this.logger.log(`[${this.id}] Registering...`),this.registerer.register().catch(e=>{this.logger.error(`[${this.id}] Error occurred registering after connection with server was obtained.`),this.logger.error(e.toString())}))},onDisconnect:e=>{this.logger.log(`[${this.id}] Disconnected`),this.delegate&&this.delegate.onServerDisconnect&&this.delegate.onServerDisconnect(e),this.session&&(this.logger.log(`[${this.id}] Hanging up...`),this.hangup().catch(e=>{this.logger.error(`[${this.id}] Error occurred hanging up call after connection with server was lost.`),this.logger.error(e.toString())})),this.registerer&&(this.logger.log(`[${this.id}] Unregistering...`),this.registerer.unregister().catch(e=>{this.logger.error(`[${this.id}] Error occurred unregistering after connection with server was lost.`),this.logger.error(e.toString())})),e&&this.attemptReconnection()},onInvite:e=>{if(this.logger.log(`[${this.id}] Received INVITE`),this.session)return this.logger.warn(`[${this.id}] Session already in progress, rejecting INVITE...`),void e.reject().then(()=>{this.logger.log(`[${this.id}] Rejected INVITE`)}).catch(e=>{this.logger.error(`[${this.id}] Failed to reject INVITE`),this.logger.error(e.toString())});const t={sessionDescriptionHandlerOptions:{constraints:this.constraints}};this.initSession(e,t),this.delegate&&this.delegate.onCallReceived?this.delegate.onCallReceived():(this.logger.warn(`[${this.id}] No handler available, rejecting INVITE...`),e.reject().then(()=>{this.logger.log(`[${this.id}] Rejected INVITE`)}).catch(e=>{this.logger.error(`[${this.id}] Failed to reject INVITE`),this.logger.error(e.toString())}))},onMessage:e=>{e.accept().then(()=>{this.delegate&&this.delegate.onMessageReceived&&this.delegate.onMessageReceived(e.request.body)})}},this.logger=this.userAgent.getLogger("sip.SimpleUser"),window.addEventListener("online",()=>{this.logger.log(`[${this.id}] Online`),this.attemptReconnection()})}get id(){return(this.options.userAgentOptions&&this.options.userAgentOptions.displayName)+"-NXW"||!1}get activeSession(){return this.session}get localMediaStream(){var e;const t=null===(e=this.session)||void 0===e?void 0:e.sessionDescriptionHandler;if(t){if(!(t instanceof w))throw new Error("Session description handler not instance of web SessionDescriptionHandler");return t.localMediaStream}}get remoteMediaStream(){var e;const t=null===(e=this.session)||void 0===e?void 0:e.sessionDescriptionHandler;if(t){if(!(t instanceof w))throw new Error("Session description handler not instance of web SessionDescriptionHandler");return t.remoteMediaStream}}get localAudioTrack(){var e;return null===(e=this.localMediaStream)||void 0===e?void 0:e.getTracks().find(e=>"audio"===e.kind)}get localVideoTrack(){var e;return null===(e=this.localMediaStream)||void 0===e?void 0:e.getTracks().find(e=>"video"===e.kind)}get remoteAudioTrack(){var e;return null===(e=this.remoteMediaStream)||void 0===e?void 0:e.getTracks().find(e=>"audio"===e.kind)}get remoteVideoTrack(){var e;return null===(e=this.remoteMediaStream)||void 0===e?void 0:e.getTracks().find(e=>"video"===e.kind)}connect(){return this.logger.log(`[${this.id}] Connecting UserAgent...`),this.connectRequested=!0,this.userAgent.state!==Ge.Started?this.userAgent.start():this.userAgent.reconnect()}disconnect(){return this.logger.log(`[${this.id}] Disconnecting UserAgent...`),this.connectRequested=!1,this.userAgent.stop()}isConnected(){return this.userAgent.isConnected()}register(e,t){return this.logger.log(`[${this.id}] Registering UserAgent...`),this.registerRequested=!0,this.registerer||(this.registerer=new ht(this.userAgent,e),this.registerer.stateChange.addListener(e=>{switch(e){case Ve.Initial:break;case Ve.Registered:this.delegate&&this.delegate.onRegistered&&this.delegate.onRegistered();break;case Ve.Unregistered:this.delegate&&this.delegate.onUnregistered&&this.delegate.onUnregistered();break;case Ve.Terminated:this.registerer=void 0;break;default:throw new Error("Unknown registerer state.")}})),this.registerer.register(t).then(()=>{})}unregister(e){return this.logger.log(`[${this.id}] Unregistering UserAgent...`),this.registerRequested=!1,this.registerer?this.registerer.unregister(e).then(()=>{}):Promise.resolve()}call(e,t,s){if(this.logger.log(`[${this.id}] Beginning Session...`),console.log("call with inviterInviteOptions=",s),this.session)return Promise.reject(new Error("Session already exists."));const i=ct.makeURI(e);if(!i)return Promise.reject(new Error(`Failed to create a valid URI from "${e}"`));t||(t={}),t.sessionDescriptionHandlerOptions||(t.sessionDescriptionHandlerOptions={}),t.sessionDescriptionHandlerOptions.constraints||(t.sessionDescriptionHandlerOptions.constraints=this.constraints);const r=new at(this.userAgent,i,t);return this.sendInvite(r,t,s).then(()=>{})}hangup(){return this.logger.log(`[${this.id}] Hangup...`),this.terminate()}answer(e){return this.logger.log(`[${this.id}] Accepting Invitation...`),this.session?this.session instanceof ot?(e||(e={}),e.sessionDescriptionHandlerOptions||(e.sessionDescriptionHandlerOptions={}),e.sessionDescriptionHandlerOptions.constraints||(e.sessionDescriptionHandlerOptions.constraints=this.constraints),this.session.accept(e)):Promise.reject(new Error("Session not instance of Invitation.")):Promise.reject(new Error("Session does not exist."))}decline(){return this.logger.log(`[${this.id}] rejecting Invitation...`),this.session?this.session instanceof ot?this.session.reject():Promise.reject(new Error("Session not instance of Invitation.")):Promise.reject(new Error("Session does not exist."))}hold(){return this.logger.log(`[${this.id}] holding session...`),this.setHold(!0)}unhold(){return this.logger.log(`[${this.id}] unholding session...`),this.setHold(!1)}isHeld(){return this.held}mute(){this.logger.log(`[${this.id}] disabling media tracks...`),this.setMute(!0)}unmute(){this.logger.log(`[${this.id}] enabling media tracks...`),this.setMute(!1)}isMuted(){return this.muted}sendDTMF(e){if(this.logger.log(`[${this.id}] sending DTMF...`),!/^[0-9A-D#*,]$/.exec(e))return Promise.reject(new Error("Invalid DTMF tone."));if(!this.session)return Promise.reject(new Error("Session does not exist."));this.logger.log(`[${this.id}] Sending DTMF tone: ${e}`);const t={body:{contentDisposition:"render",contentType:"application/dtmf-relay",content:"Signal="+e+"\r\nDuration=2000"}};return this.session.info({requestOptions:t}).then(()=>{})}message(e,t){this.logger.log(`[${this.id}] sending message...`);const s=ct.makeURI(e);return s?new dt(this.userAgent,s,t).message():Promise.reject(new Error(`Failed to create a valid URI from "${e}"`))}get constraints(){var e;let t={audio:!0,video:!1};return(null===(e=this.options.media)||void 0===e?void 0:e.constraints)&&(t=Object.assign({},this.options.media.constraints)),t}attemptReconnection(e=1){const t=this.options.reconnectionAttempts||3,s=this.options.reconnectionDelay||4;this.connectRequested?(this.attemptingReconnection&&this.logger.log(`[${this.id}] Reconnection attempt already in progress`),e>t?this.logger.log(`[${this.id}] Reconnection maximum attempts reached`):(1===e?this.logger.log(`[${this.id}] Reconnection attempt ${e} of ${t} - trying`):this.logger.log(`[${this.id}] Reconnection attempt ${e} of ${t} - trying in ${s} seconds`),this.attemptingReconnection=!0,setTimeout(()=>{if(!this.connectRequested)return this.logger.log(`[${this.id}] Reconnection attempt ${e} of ${t} - aborted`),void(this.attemptingReconnection=!1);this.userAgent.reconnect().then(()=>{this.logger.log(`[${this.id}] Reconnection attempt ${e} of ${t} - succeeded`),this.attemptingReconnection=!1}).catch(s=>{this.logger.log(`[${this.id}] Reconnection attempt ${e} of ${t} - failed`),this.logger.error(s.message),this.attemptingReconnection=!1,this.attemptReconnection(++e)})},1===e?0:1e3*s))):this.logger.log(`[${this.id}] Reconnection not currently desired`)}cleanupMedia(){this.options.media&&(this.options.media.local&&this.options.media.local.video&&(this.options.media.local.video.srcObject=null,this.options.media.local.video.pause()),this.options.media.remote&&(this.options.media.remote.audio&&(this.options.media.remote.audio.srcObject=null,this.options.media.remote.audio.pause()),this.options.media.remote.video&&(this.options.media.remote.video.srcObject=null,this.options.media.remote.video.pause())))}enableReceiverTracks(e){if(!this.session)throw new Error("Session does not exist.");const t=this.session.sessionDescriptionHandler;if(!(t instanceof w))throw new Error("Session's session description handler not instance of SessionDescriptionHandler.");const s=t.peerConnection;if(!s)throw new Error("Peer connection closed.");s.getReceivers().forEach(t=>{t.track&&(t.track.enabled=e)})}enableSenderTracks(e){if(!this.session)throw new Error("Session does not exist.");const t=this.session.sessionDescriptionHandler;if(!(t instanceof w))throw new Error("Session's session description handler not instance of SessionDescriptionHandler.");const s=t.peerConnection;if(!s)throw new Error("Peer connection closed.");s.getSenders().forEach(t=>{t.track&&(t.track.enabled=e)})}initSession(e,t){this.session=e,this.delegate&&this.delegate.onCallCreated&&this.delegate.onCallCreated(),this.session.stateChange.addListener(t=>{if(this.session===e)switch(this.logger.log(`[${this.id}] session state changed to ${t}`),t){case i.Initial:case i.Establishing:break;case i.Established:this.setupLocalMedia(),this.setupRemoteMedia(),this.delegate&&this.delegate.onCallAnswered&&this.delegate.onCallAnswered();break;case i.Terminating:case i.Terminated:this.session=void 0,this.cleanupMedia(),this.delegate&&this.delegate.onCallHangup&&this.delegate.onCallHangup();break;default:throw new Error("Unknown session state.")}}),this.session.delegate={onInfo:e=>{var t;if(void 0===(null===(t=this.delegate)||void 0===t?void 0:t.onCallDTMFReceived))return void e.reject();const s=e.request.getHeader("content-type");if(!s||!/^application\/dtmf-relay/i.exec(s))return void e.reject();const i=e.request.body.split("\r\n",2);if(2!==i.length)return void e.reject();let r;const n=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/;if(n.test(i[0])&&(r=i[0].replace(n,"$2")),!r)return void e.reject();let o;const a=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;a.test(i[1])&&(o=parseInt(i[1].replace(a,"$2"),10)),o?e.accept().then(()=>{if(this.delegate&&this.delegate.onCallDTMFReceived){if(!r||!o)throw new Error("Tone or duration undefined.");this.delegate.onCallDTMFReceived(r,o)}}).catch(e=>{this.logger.error(e.message)}):e.reject()},onRefer:e=>{e.accept().then(()=>this.sendInvite(e.makeInviter(t),t)).catch(e=>{this.logger.error(e.message)})}}}sendInvite(e,t,s){return this.initSession(e,t),console.log("sendInvite ",s),e.invite(s).then(()=>{this.logger.log(`[${this.id}] sent INVITE`)})}setHold(e){if(!this.session)return Promise.reject(new Error("Session does not exist."));const t=this.session;if(this.held===e)return Promise.resolve();if(!(this.session.sessionDescriptionHandler instanceof w))throw new Error("Session's session description handler not instance of SessionDescriptionHandler.");const s={requestDelegate:{onAccept:()=>{this.held=e,this.enableReceiverTracks(!this.held),this.enableSenderTracks(!this.held&&!this.muted),this.delegate&&this.delegate.onCallHold&&this.delegate.onCallHold(this.held)},onReject:()=>{this.logger.warn(`[${this.id}] re-invite request was rejected`),this.enableReceiverTracks(!this.held),this.enableSenderTracks(!this.held&&!this.muted),this.delegate&&this.delegate.onCallHold&&this.delegate.onCallHold(this.held)}}},i=t.sessionDescriptionHandlerOptionsReInvite;return i.hold=e,t.sessionDescriptionHandlerOptionsReInvite=i,this.session.invite(s).then(()=>{this.enableReceiverTracks(!e),this.enableSenderTracks(!e&&!this.muted)}).catch(e=>{throw e instanceof et&&this.logger.error(`[${this.id}] A hold request is already in progress.`),e})}setMute(e){this.session?this.session.state===i.Established?(this.muted=e,this.enableSenderTracks(!this.held&&!this.muted)):this.logger.warn(`[${this.id}] An established session is required to enable/disable media tracks`):this.logger.warn(`[${this.id}] A session is required to enabled/disable media tracks`)}setupLocalMedia(){var e,t;if(!this.session)throw new Error("Session does not exist.");const s=null===(t=null===(e=this.options.media)||void 0===e?void 0:e.local)||void 0===t?void 0:t.video;if(s){const e=this.localMediaStream;if(!e)throw new Error("Local media stream undefiend.");s.srcObject=e,s.volume=0,s.play().catch(e=>{this.logger.error(`[${this.id}] Failed to play local media`),this.logger.error(e.message)})}}setupRemoteMedia(){var e,t,s,i;if(!this.session)throw new Error("Session does not exist.");const r=(null===(t=null===(e=this.options.media)||void 0===e?void 0:e.remote)||void 0===t?void 0:t.video)||(null===(i=null===(s=this.options.media)||void 0===s?void 0:s.remote)||void 0===i?void 0:i.audio);if(r){const e=this.remoteMediaStream;if(!e)throw new Error("Remote media stream undefiend.");r.autoplay=!0,r.srcObject=e,r.play().catch(e=>{this.logger.error(`[${this.id}] Failed to play remote media`),this.logger.error(e.message)}),e.onaddtrack=()=>{this.logger.log(`[${this.id}] Remote media onaddtrack`),r.load(),r.play().catch(e=>{this.logger.error(`[${this.id}] Failed to play remote media`),this.logger.error(e.message)})}}}terminate(){if(this.logger.log(`[${this.id}] Terminating...`),!this.session)return Promise.reject(new Error("Session does not exist."));switch(this.session.state){case i.Initial:if(this.session instanceof at)return this.session.cancel().then(()=>{this.logger.log(`[${this.id}] Inviter never sent INVITE (canceled)`)});if(this.session instanceof ot)return this.session.reject().then(()=>{this.logger.log(`[${this.id}] Invitation rejected (sent 480)`)});throw new Error("Unknown session type.");case i.Establishing:if(this.session instanceof at)return this.session.cancel().then(()=>{this.logger.log(`[${this.id}] Inviter canceled (sent CANCEL)`)});if(this.session instanceof ot)return this.session.reject().then(()=>{this.logger.log(`[${this.id}] Invitation rejected (sent 480)`)});throw new Error("Unknown session type.");case i.Established:return this.session.bye().then(()=>{this.logger.log(`[${this.id}] Session ended (sent BYE)`)});case i.Terminating:case i.Terminated:break;default:throw new Error("Unknown state")}return this.logger.log(`[${this.id}] Terminating in state ${this.session.state}, no action taken`),Promise.resolve()}}var gt,ut=s(9);function pt(e){const t=document.getElementById(e);if(!(t instanceof HTMLAudioElement))throw new Error(`Element "${e}" not found or not an audio element.`);return t}function ft(e){const t=document.getElementById(e);if(!(t instanceof HTMLButtonElement))throw new Error(`Element "${e}" not found or not a button element.`);return t}function mt(e){const t=document.getElementsByClassName(e);if(!t.length)throw new Error(`Elements "${e}" not found.`);const s=[];for(let i=0;i<t.length;i++){const r=t[i];if(!(r instanceof HTMLButtonElement))throw new Error(`Element ${i} of "${e}" not a button element.`);s.push(r)}return s}function vt(e){const t=document.getElementById(e);if(!(t instanceof HTMLDivElement))throw new Error(`Element "${e}" not found or not a div element.`);return t}function wt(e){const t=document.getElementById(e);if(!(t instanceof HTMLInputElement))throw new Error(`Element "${e}" not found or not an input element.`);return t}function Tt(e,t){wt(e).value=t||""}function yt(e){const t=document.getElementById(e);if(!(t instanceof HTMLSpanElement))throw new Error(`Element "${e}" not found or not a span element.`);return t}function bt(e){const t=document.getElementById(e);if(!(t instanceof HTMLVideoElement))throw new Error(`Element "${e}" not found or not a video element.`);return t}function Et(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),s=window.location.search.substr(1).match(t);return null!=s?decodeURI(s[2]):""}function St(e){var t=document.getElementsByTagName("script"),s=t[t.length-1],i=s.src.indexOf("?"),r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=s.src.substr(i+1).match(r);return null!=n?decodeURI(n[2]):""}function Rt(e,t){t.autoplay=!0,t.srcObject=e,t.play().catch(e=>{console.error("Failed to play media"),console.error(e)}),e.onaddtrack=()=>{t.load(),t.play().catch(e=>{console.error("Failed to play remote media on add track"),console.error(e)})},e.onremovetrack=()=>{t.load(),t.play().catch(e=>{console.error("Failed to play remote media on remove track"),console.error(e)})}}function It(e,t){let s={},i=new(0,window.RTCPeerConnection);function r(t){let i=t.split(" ")[4];i&&!s[i]&&"172.2"!=i.substring(0,5)&&(e(i),s[i]=!0)}i.onicecandidate=e=>{e.candidate&&r(e.candidate.candidate)},i.createDataChannel(""),i.createOffer(e=>{i.setLocalDescription(e)},()=>{}),setTimeout(()=>{i.localDescription.sdp.split("\n").forEach(e=>{0===e.indexOf("a=candidate:")&&r(e)}),t()},1e3)}!function(e){e[e.RINGIN=1]="RINGIN",e[e.RINGOUT=2]="RINGOUT",e[e.CONNECTED=4]="CONNECTED",e[e.HANGUP=8]="HANGUP",e[e.ONLINE=16]="ONLINE",e[e.CUSTOM=128]="CUSTOM"}(gt||(gt={}));var Ct,$t=function(e,t,s,i){return new(s||(s=Promise))((function(r,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};!function(e){e[e.UA_INIT=0]="UA_INIT",e[e.UA_NXAPI=1]="UA_NXAPI",e[e.UA_CONNECTING=2]="UA_CONNECTING",e[e.UA_CONNECTED=3]="UA_CONNECTED",e[e.UA_REGISTERING=4]="UA_REGISTERING",e[e.UA_READY=5]="UA_READY",e[e.UA_CALLING_OUT=6]="UA_CALLING_OUT",e[e.UA_INCOMING=7]="UA_INCOMING",e[e.UA_TALKING=8]="UA_TALKING",e[e.UA_CALL_ENDING=9]="UA_CALL_ENDING",e[e.UA_CALL_END=10]="UA_CALL_END",e[e.UA_DISCONNECTED=11]="UA_DISCONNECTED",e[e.UA_ERROR=12]="UA_ERROR"}(Ct||(Ct={}));class At{constructor(e){this._userDelegate={onCallReceived:()=>$t(this,void 0,void 0,(function*(){if(console.log(`[${this.simpleUser.id}] Call received`,this.simpleUser),this.updateLastSessionTrying(),this.state=Ct.UA_INCOMING,this.statusInfo="",this.simpleUser&&this.simpleUser.activeSession){let e=this.simpleUser.activeSession,t=e.request.getHeader("X-ORDERID");this.orderIdComing=t,console.log("orderIdComing X-ORDERID="+t);let s=e.request.getHeader("X-NX-REALPHONE");this._nxRealPhone=s||""}this.events.emit("onCallReceived",this.remoteName),this.autoAnswer?(console.log("try autoAnswer"),yield this.simpleUser.answer()):this.play("start","ringin.wav")})),onCallCreated:()=>{this.simpleUser&&this.simpleUser.activeSession&&(console.log(`[${this.simpleUser.id}] Call created`),this.state=Ct.UA_CALLING_OUT,this.statusInfo="",2==this.retries&&""!=this.nextTarget&&(console.log("onCallCreated, set nextTarget empty!"),this.nextTarget=""),this.events.emit("onCallCreated",this.remoteName))},onCallAnswered:()=>{this.updateLastSessionTrying(),this.play("end",""),console.log(`[${this.simpleUser.id}] Call answered`,this.simpleUser.activeSession),this.state=Ct.UA_TALKING,this.statusInfo="200 OK",this.confirmTs=new Date,1==this.retries&&""!=this.nextTarget&&(console.log("onCallAnswered, set nextTarget empty!"),this.nextTarget="");var e=this.simpleUser.activeSession;(e&&e.earlyMediaEstablished||!1)&&!this.earlyAnswer?(this.simpleUser.activeSession.state=i.Establishing,console.log("onCallAnswered earlyMediaEstablished, reset to SessionState.Establishing")):(console.log("onCallAnswered really!"),this.play("start","connected.wav"),this.events.emit("onCallAnswered",this.remoteName))},onCallHangup:()=>{this.play("end",""),this.play("start","hangup.wav"),console.log(`[${this.simpleUser.id}] Call hangup`),this.mark=1,this.state=Ct.UA_CALL_END,0==this.retries&&""!=this.nextTarget&&(console.log("onCallHangup, set nextTarget empty!"),this.nextTarget=""),this.events.emit("onCallHangup",this.statusInfo)},onRegistered:()=>{this.state=Ct.UA_READY,this.mark++,this.registered=1,console.log(`[${this.displayName}] user registered, mark=${this.mark},nextTarget=${this.nextTarget}`),this.play("start","online.wav"),this.events.emit("onRegistered",this.displayName),this.nextTarget&&this.nextTarget.length>0&&(console.log("begin placeCall to",this.nextTarget,this.nextHdrs),this.placeCall(this.nextTarget,this.nextHdrs))},onUnregistered:()=>{console.log(`[${this.displayName}] user unregistered`),this.registered=0,this.events.emit("onUnregistered",this.displayName)},onServerConnect:()=>{console.log(`[${this.displayName}] server connected`),this.state=Ct.UA_CONNECTED,this.events.emit("onServerConnect","")},onServerDisconnect:e=>{console.log(`[${this.displayName}] server disconnected ${e}`),this.simpleUser==At.lastInstance&&(this.state=Ct.UA_DISCONNECTED,this.events.emit("onServerDisconnect",""))},onCallHold:e=>{console.log(`[${this.simpleUser.id}] Call hold ${e}`),this.events.emit("onCallHold","")},onMessageReceived:e=>{console.log(`[${this.simpleUser.id}] recv message ${e}`),this.handleMessage(e),this.events.emit("onMessageReceived",e)},onCallDTMFReceived:(e,t)=>{console.log(`[${this.simpleUser.id}] Call DTMFReceived ${e}:${t} `),this.events.emit("dtmf_recv",e+":"+t)}},this.initByConfig(e),setInterval(()=>{this.checkFlag&&this.checkAndRun()},5e3)}get mySimpleUser(){return this.simpleUser}set mySimpleUser(e){this.simpleUser=e}get myDisplayName(){return this.displayName}get mySipId(){return this.sipId}get mySimpleUserId(){return this.simpleUser?this.simpleUser.id:"_SIMPLE_"}get myEvents(){return this.events}get remoteName(){if(this.simpleUser&&this.simpleUser.activeSession){return this.simpleUser.activeSession.remoteIdentity.uri.aor}return""}get talkingTime(){if(this.state==Ct.UA_TALKING&&this.confirmTs){return(new Date).valueOf()-this.confirmTs.valueOf()}return 0}get myDataHdrs(){return this.dataHdrs}get myOrderId(){return this.orderId}set myOrderId(e){this.orderId=e}get comingOrderId(){return this.orderIdComing}set comingOrderId(e){this.orderIdComing=e}get nxRealPhone(){return this._nxRealPhone}set nxRealPhone(e){this._nxRealPhone=e}get isdid(){return this._isdid}get isSendSMS(){return this._sendsms}get myState(){return this.state.toString()}get callStatusInfo(){return this.statusInfo}updateLastSessionTrying(){if(this.simpleUser){let e=this.simpleUser.activeSession;null!=e&&(this.lastSessionTrying=e)}}setAutoAnswer(e){this.autoAnswer=e}setVideo(e){e!=this.video&&(console.log("SORRY!!! not support yet!"),this.video=e)}get activeSessionState(){return this.simpleUser&&this.simpleUser.activeSession?this.simpleUser.activeSession.state.toString():""}get activeCallId(){if(this.simpleUser&&this.simpleUser.activeSession){let e=this.simpleUser.activeSession.id;return e.length>36?e.substring(0,36):e.substring(0,20)}return""}get getInfoSample(){return"sipid="+this.mySipId+" state="+this.state+" remote="+this.remoteName+" state="+this.activeSessionState}checkAndRun(){this.state==Ct.UA_ERROR?(console.log("checkAndRun state ERROR!!!!"),this.state=Ct.UA_INIT,this.mark++):this.state==Ct.UA_TALKING?this.fails=0:this.state==Ct.UA_READY||this.state==Ct.UA_INIT||(this.state==Ct.UA_CALL_END?(console.log("UA_CALL_END to UA_READY"),console.log("mark=",this.mark,"nextTarget=",this.nextTarget),this.state=Ct.UA_READY):(console.log("checkAndRun state=",this.state,"fails=",this.fails),this.fails++,this.fails>5&&(this.state=Ct.UA_ERROR,this.fails=0,this.events.emit("error","fails too much")))),this.mark>0&&(this.state==Ct.UA_INIT?(this.mark--,setTimeout(()=>{console.log("checkAndRun begin NXgetUserInfo"),this.NXgetUserInfo(this.config)},10)):this.state==Ct.UA_READY&&this.nextTarget.length>0&&(console.log("begin placeCall to",this.nextTarget,this.nextHdrs),this.placeCall(this.nextTarget,this.nextHdrs)))}initByConfig(e){if(At.lastInstance){console.log("already has lastInstance. Free it");var t=At.lastInstance;At.lastInstance=null,t&&t.unregister().finally(()=>{t.disconnect()})}this.config=e,this.simpleUser=null,this.checkFlag=!0,e.audioElementId?(this.audioElement=pt(e.audioElementId),console.log("Using Page Audio HTMLAudioElement",this.audioElement)):(console.log("New Audio HTMLAudioElement"),this.audioElement=new Audio),e.playElementId?(this.playElement=pt(e.playElementId),console.log("Using Page Play HTMLAudioElement",this.playElement)):(console.log("New Play HTMLAudioElement"),this.playElement=new Audio),e.video?(console.log("config.video enabled"),this.video=e.video,this.videoLocalElement=bt(e.videoLocalElementId),this.videoRemoteElement=bt(e.videoRemoteElementId)):(this.video=!1,this.videoLocalElement=void 0,this.videoRemoteElement=void 0),this.events=new ut.EventEmitter,this.displayName="NA",this.state=Ct.UA_INIT,this.nextTarget="",this.fails=0,this.mark=0,this.logLevel=void 0===e.logLevel?"warn":e.logLevel,this.retries=void 0===e.retries?0:e.retries,this.playTone=null==e.playTone?0:Number(e.playTone),this.sipId="",this.confirmTs=null,this.lastSessionTrying=null,this.statusInfo="",this.orderId=null,this.nextHdrs=null,this.dataHdrs=null,this._nxRealPhone="",this._isdid=!1,this._sendsms=!1,this.autoAnswer=void 0!==e.autoAnswer&&e.autoAnswer,this.delegate=this._userDelegate,this.mark++,this.localIPs="_";var s=this;It((function(e){console.log("localip=",e),e.length<=16&&e.length>=7&&(s.localIPs=s.localIPs+e+"_")}),()=>{console.log("getIP finised; begin NXgetUserInfo"),s.NXgetUserInfo(s.config)})}NXgetUserInfo(e){let t=new XMLHttpRequest;console.log("NXgetUserInfo config=",e);let s=e.nxtype?e.nxtype:0;if(e.nxtype<6)return void this.initNxwCall(s,e);this.state=Ct.UA_NXAPI,t.withCredentials=!1,t.open("GET","https://webcall.nxcloud.com/api/userinfo");const i=e.nxuser+":"+e.nxpass,r="Basic "+window.btoa(i);t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Authorization",r);let n=this;t.onreadystatechange=function(){if(4===t.readyState&&t.responseText.length>0){const e=JSON.parse(t.responseText);n.initNxwCall(s,e)}},t.onerror=function(e){console.log("xhr.onerror"),console.log(e),n.state=Ct.UA_ERROR},t.setRequestHeader("Cache-Control","no-cache"),t.send()}initNxwCall(e,t){let s={};if(console.log("initNxwCall type=",e," param=",typeof t,t),0==e&&(e=3),e<=5){let i=t;s.authName=i.nxuser,s.displayName=i.nxuser,s.userName=i.nxuser,s.nxUserName=i.nxuser,s.secret=i.nxpass,s.cip="_",1==e?(s.domain="nxrtc1.nxcloud.com",s.wssServer="wss://nxrtc1.nxcloud.com:7443"):2==e?(s.domain="nxrtc2.nxcloud.com",s.wssServer="wss://nxrtc2.nxcloud.com:7443"):3==e?(s.domain="nxrtc1.nxcloud.com",s.wssServer="wss://nxrtc1.nxcloud.com:8089"):4==e?(s.domain="ucloud.arya.top",s.wssServer="wss://ucloud.arya.top:7443"):5==e&&(s.domain="nxcs49.nxcloud.com",s.wssServer="wss://nxcs49.nxcloud.com:7443"),s.aor="sip:"+s.userName+"@"+s.domain,s.forceRport=!0,console.log("wssServer "+s.wssServer)}else if(6==e){let e=t;s.displayName=e.displayname,s.domain=e.sipdomain,s.userName=e.sipaccount,s.nxUserName=e.username,s.authName=e.sipaccount,s.secret=e.sippassword,s.cip=e.cip,s.isdid=e.isdid,s.sendsms=e.sendsms,console.log("resp= ",e),null!=e.wssserver?(e.wssport=443,s.wssServer="wss://"+e.wssserver+":"+e.wssport+"/wss",console.log("wssServer= "+s.wssServer+" flushreg="+e.flushreg)):console.log("FIXME: no wssServer ！！！"),s.aor="sip:"+s.userName+"@"+s.domain,s.forceRport=!0}else if(8==e)return;this.simpleUser&&(console.log("delete old simpleUser!!",this.simpleUser),this.simpleUser.disconnect().finally(()=>{console.log("delete old simpleUser done!!")}),At.lastInstance=null,this.simpleUser=null),this.cip=s.cip,this.displayName=s.displayName?s.displayName:"NA",this.sipId=s.authName,this._isdid=s.isdid,this._sendsms=s.sendsms,this.simpleUser=this.buildSimpleUser(s),At.lastInstance=this.simpleUser,this.state=Ct.UA_CONNECTING,this.simpleUser.connect().then(()=>{this.events.emit("onConnectOK",""),this.state=Ct.UA_CONNECTED,console.log("set RegistererOptions expires=200,cip="+this.cip),this.simpleUser.register({expires:200,extraHeaders:["X-NX-RemotePubIP: "+this.cip]})}).then(()=>{this.state=Ct.UA_REGISTERING}).catch(e=>{this.events.emit("error",e),this.state=Ct.UA_ERROR,console.error(`[${this.simpleUser.id}] failed to connect`),console.error(e)})}buildSimpleUser(e){let t=null;console.log("displayName="+e.displayName+" username="+e.userName+" aor="+e.aor);let s="221010_"+qt(this);t=this.video?{delegate:this.delegate,aor:e.aor,media:{constraints:{audio:!0,video:!0},local:{video:this.videoLocalElement},remote:{video:this.videoRemoteElement,audio:this.audioElement}},userAgentOptions:{logLevel:this.logLevel,displayName:e.displayName,contactName:e.userName,viaHost:e.domain,contactParams:{transport:"wss",nxw:"V"+s,ips:this.localIPs,cip:this.cip},userAgentString:"NXW/"+e.nxUserName,authorizationPassword:e.secret,authorizationUsername:e.authName,sipExtension100rel:r.Supported,transportOptions:{server:e.wssServer,keepAliveInterval:30,connectionTimeout:15},forceRport:e.forceRport}}:{delegate:this.delegate,aor:e.aor,media:{constraints:{audio:!0,video:!1},remote:{audio:this.audioElement}},userAgentOptions:{logLevel:this.logLevel,displayName:e.displayName,contactName:e.userName,viaHost:e.domain,contactParams:{transport:"wss",nxw:"v"+s,ips:this.localIPs,cip:this.cip},userAgentString:"NXW/"+e.nxUserName,authorizationPassword:e.secret,authorizationUsername:e.authName,sipExtension100rel:r.Supported,transportOptions:{server:e.wssServer,keepAliveInterval:30,connectionTimeout:15},forceRport:e.forceRport}},this.registered=0;const i=new n.SimpleUser(e.wssServer,t);return console.log("new simpleUser = ",i),i}isConnected(){return!!this.simpleUser&&this.simpleUser.isConnected()}isBusy(){return!(!this.simpleUser||!this.simpleUser.activeSession)}isReady(){return this.state==Ct.UA_READY}play(e,t){if(console.log(">>>play: ",e,"type=",t,"playTone=",this.playTone),"begin"==e||"start"==e){let e="",s=!1,i=0;if(e=t,"ringin.wav"==t?(i=gt.RINGIN,s=!0):"ringout.wav"==t?(i=gt.RINGOUT,s=!0):"connected.wav"==t?(i=gt.CONNECTED,s=!1):"hangup.wav"==t?(i=gt.HANGUP,s=!1):"online.wav"==t?(i=gt.ONLINE,s=!1):(i=gt.CUSTOM,s=!1),console.log(">>> play ",i,t,e,s),""!=t&&this.playTone&i){console.log("start play ",i,t,e,s),this.playElement&&this.playElement.pause();let r=this.config.audioSrcPath;null==r&&(r="audio");let n=r+"/"+e;(e.startsWith(".")||e.startsWith("/"))&&(n=e),this.playElement=new Audio(n),this.playElement.loop=s,this.playElement.muted=!0,this.playElement.play().then(()=>{this.playElement.muted=!1}).catch(e=>{console.log("play error:",e)})}}else"end"!=e&&"stop"!=e||this.playElement&&(this.playElement.pause(),this.playElement.muted=!0)}placeCall(e,t){if(console.log("placeCall state="+this.state,e,t),this.simpleUser)if(this.state==Ct.UA_READY){this.state=Ct.UA_CALLING_OUT,this.events.emit("placeCall",e),"sip:"!=e.substr(0,4)&&(e="sip:"+e),-1==e.indexOf("@")&&(e+="@nxcloud.com"),console.log("pacecall with earlymedia");var s=this;s.earlyAnswer=!1;var i={requestDelegate:{onAccept:e=>{console.log("Positive response = ",e),this.statusInfo="200 OK"},onReject:e=>{console.log("Negative response = ",e);let{message:t}=e;this.statusInfo=t.statusCode.toString()+" "+t.reasonPhrase},onProgress:e=>{console.log("onProgress response = ",typeof e,e);let{message:t}=e;this.statusInfo=t.statusCode.toString()+" "+t.reasonPhrase;let i=e.session;console.log("onProgress session=",i),100==t.statusCode?console.log("onProgress 100 trying"):180==t.statusCode?console.log("onProgress 180 Ringing"):183===t.statusCode?(console.log("== onProgress 183 Call Progress"),s.earlyAnswer=!0):console.log("onProgress others ",t.statusCode)}},sessionDescriptionHandlerOptions:{constraints:{audio:!0,video:this.video}}};t||(t=[]),this.cip&&this.cip.length>0&&t.push("X-NX-RemotePubIP: "+this.cip),this.orderId&&this.orderId.length>0&&t.push("X-ORDERID: "+this.orderId),t.push("X-actiontype: 7"),this.dataHdrs=t,this.simpleUser.call(e,{inviteWithoutSdp:!1,earlyMedia:!0,extraHeaders:t},i).then(()=>{this.play("start","ringout.wav"),this.events.emit("placeCallOK",e)}).catch(e=>{console.error(`[${this.simpleUser.id}] failed to place call`),console.error(e)})}else this.nextTarget=e,this.nextHdrs=t,this.mark++,console.log("placeCallWait nextTarget=",this.nextTarget),this.events.emit("placeCallWait",e)}answerCall(e){if(console.log("answerCall now ... ",this.simpleUser),this.state==Ct.UA_INCOMING&&this.simpleUser){null==this.simpleUser.activeSession&&console.log("FIXME: answerCall with undefined activeSession!"),e||(e=[]),this.orderId&&this.orderId.length>0&&e.push("X-ORDERID: "+this.orderId),this.dataHdrs=e;let t={};t.extraHeaders=e,t.sessionDescriptionHandlerOptions={iceGatheringTimeout:500},this.simpleUser.answer(t).then(()=>{this.state=Ct.UA_TALKING,this.events.emit("answer","")}).catch(e=>{this.events.emit("error",e),this.state=Ct.UA_ERROR,console.error(`[${this.simpleUser.id}] failed to answer call`),console.error(e)})}else console.log("FIXME: force answerCall!"),this.simpleUser.answer().then(()=>{this.state=Ct.UA_TALKING,this.events.emit("answer","")}).catch(e=>{this.events.emit("error",e),this.state=Ct.UA_ERROR,console.error(`[${this.simpleUser.id}] failed to answer call`),console.error(e)})}declineCall(){console.log("declineCall now ... ",this.simpleUser),this.state==Ct.UA_INCOMING&&this.simpleUser&&this.simpleUser.activeSession&&this.simpleUser.decline().then(()=>{this.state=Ct.UA_TALKING,this.events.emit("decline","")}).catch(e=>{this.events.emit("error",e),this.state=Ct.UA_ERROR,console.error(`[${this.simpleUser.id}] failed to decline call`),console.error(e)})}hangupCall(){if(console.log("hangupCall try... ",this.simpleUser,this.lastSessionTrying),this.simpleUser){let e="";this.simpleUser.activeSession&&(e=this.simpleUser.activeSession.id,this.state=Ct.UA_CALL_ENDING,this.simpleUser.hangup().then(()=>{this.events.emit("hangup","")}).catch(e=>{this.events.emit("error",e),this.state=Ct.UA_ERROR,console.error(`[${this.simpleUser.id}] failed to hangup call`),console.error(e)})),e.length>0&&this.lastSessionTrying&&this.lastSessionTrying.id==e&&(console.log("hangup OK. clear lastSessionTrying "+e),this.lastSessionTrying=null),this.lastSessionTrying&&(console.log("fixme: try lastSessionTrying... ",this.lastSessionTrying.state),this.lastSessionTrying.state!=i.Terminated&&this.lastSessionTrying.bye().catch(e=>{console.warn("!!!!! BYE lastSessionTrying error"+e)}),this.lastSessionTrying=null)}}cleanupMedia(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement.pause()),this.videoRemoteElement&&(this.videoRemoteElement.srcObject=null,this.videoRemoteElement.pause()),this.videoLocalElement&&(this.videoLocalElement.srcObject=null,this.videoLocalElement.pause())}disconnect(){if(this.simpleUser){var e=this.simpleUser;this.simpleUser=null,e.disconnect().then(()=>{this.events.emit("disconnect",""),this.state=Ct.UA_INIT}).catch(e=>{this.events.emit("error",e),this.state=Ct.UA_ERROR,console.error(`[${this.simpleUser.id}] failed to disconnect`),console.error(e)})}}unregister(){this.simpleUser&&this.simpleUser.unregister().finally(()=>{console.log("unregister done!")})}register(){this.simpleUser&&this.simpleUser.register().finally(()=>{console.log("register done!")})}handleMessage(e){try{let t=JSON.parse(e);if(t.cmd="unreg"){let e=t.delay||100;console.log("begin unregister! delay="+e),setTimeout(()=>{this.unregister()},e)}}catch(e){console.log(e)}}sendDTMF(e){if(e&&e.length>0)for(let t=0;t<e.length;t++){let s=e[t];console.log("try sendDTMF "+s),this.simpleUser.sendDTMF(s).then(()=>{this.events.emit("dtmf",s)}).catch(e=>{console.log("sendDTMF err:"+s),this.events.emit("error",e),console.error(e)})}}holdCall(e){console.log("holdCall"+e+" for session",this.simpleUser.activeSession),this.simpleUser.activeSession&&(e?(this.events.emit("hold","try"),this.simpleUser.hold().then(()=>{this.events.emit("hold","ok")}).catch(e=>{this.events.emit("error",e),this.state=Ct.UA_ERROR,console.error(`[${this.simpleUser.id}] failed to hold call`),console.error(e)})):(this.events.emit("unhold","try"),this.simpleUser.unhold().then(()=>{this.events.emit("unhold","ok")}).catch(e=>{this.events.emit("error",e),this.state=Ct.UA_ERROR,console.error(`[${this.simpleUser.id}] failed to unhold call`),console.error(e)})))}muteCall(e){console.log("muteCall"+e+" for session",this.simpleUser.activeSession),this.simpleUser.activeSession&&(e?(this.events.emit("mute","on"),this.simpleUser.mute(),!1===this.simpleUser.isMuted()&&(this.state=Ct.UA_ERROR,console.error(`[${this.simpleUser.id}] failed to mute call`))):(this.events.emit("mute","off"),this.simpleUser.unmute(),!0===this.simpleUser.isMuted()&&(this.state=Ct.UA_ERROR,console.error(`[${this.simpleUser.id}] failed to unmute call`))))}silentCall(e){console.log("silentCall"+e+" for session",this.simpleUser.activeSession),this.simpleUser.activeSession&&this.audioElement&&(this.events.emit("silent",e?"on":"off"),this.audioElement.muted=e)}setVolume(e){if((e=Math.abs(e))>100?e=1:e>1&&(e/=100),this.audioElement){if(console.log("set Volume="+e),!this.simpleUser.activeSession)return;this.events.emit("volume",e),this.audioElement.volume=e}}clearException(){console.log("clearException"),this.state!=Ct.UA_TALKING&&(this.lastSessionTrying&&this.lastSessionTrying.bye().finally(()=>{console.log("bye lastSessionTrying"),this.lastSessionTrying=null}),setTimeout(()=>$t(this,void 0,void 0,(function*(){this.simpleUser.disconnect()})),10))}}class Dt{constructor(e,t,s=3){let i={nxuser:e,nxpass:t,nxtype:s};Dt.nxwCall=new _t(i),console.log("NxwStatic inited!!!")}static placeCall(e,t){return Dt.nxwCall.placeCall(e,t)}static hangupCall(){return Dt.nxwCall.hangupCall()}static answerCall(e){return Dt.nxwCall.answerCall(e)}static holdCall(e){return Dt.nxwCall.holdCall(e)}static sendDTMF(e){return Dt.nxwCall.sendDTMF(e)}static setVolume(e){return Dt.nxwCall.setVolume(e)}static muteCall(e){return Dt.nxwCall.muteCall(e)}static silentCall(e){return Dt.nxwCall.silentCall(e)}static disconnect(){return Dt.nxwCall.disconnect()}}var _t=t.default=At;const Ht=St("nxuser"),xt=St("nxpass"),kt=St("nxtype")||"3";console.log("NXW1: nxuser=",Ht,"nxpass=",xt,"nxtype=",kt);let Pt=null;Ht&&xt&&(Pt=new Dt(Ht,xt,parseInt(kt)),console.log("x=",Pt));let Nt=(new Date).getTime()%1e6;function qt(e){return null==e?null:(null==e.__obj_id&&(e.__obj_id=Nt++),e.__obj_id)}},9:function(e,t,s){"use strict";var i,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(s,i){function r(s){e.removeListener(t,n),i(s)}function n(){"function"==typeof e.removeListener&&e.removeListener("error",r),s([].slice.call(arguments))}v(e,t,n,{once:!0}),"error"!==t&&function(e,t,s){"function"==typeof e.on&&v(e,"error",t,s)}(e,r,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function h(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,s,i){var r,n,o,a;if(h(s),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,s.listener?s.listener:s),n=e._events),o=n[t]),void 0===o)o=n[t]=s,++e._eventsCount;else if("function"==typeof o?o=n[t]=i?[s,o]:[o,s]:i?o.unshift(s):o.push(s),(r=d(e))>0&&o.length>r&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,a=c,console&&console.warn&&console.warn(a)}return e}function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,s){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:s},r=g.bind(i);return r.listener=s,i.wrapFn=r,r}function p(e,t,s){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?s?[r.listener||r]:[r]:s?function(e){for(var t=new Array(e.length),s=0;s<t.length;++s)t[s]=e[s].listener||e[s];return t}(r):m(r,r.length)}function f(e){var t=this._events;if(void 0!==t){var s=t[e];if("function"==typeof s)return 1;if(void 0!==s)return s.length}return 0}function m(e,t){for(var s=new Array(t),i=0;i<t;++i)s[i]=e[i];return s}function v(e,t,s,i){if("function"==typeof e.on)i.once?e.once(t,s):e.on(t,s);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(n){i.once&&e.removeEventListener(t,r),s(n)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return d(this)},a.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var h=c.length,d=m(c,h);for(s=0;s<h;++s)n(d[s],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return h(t),this.on(e,u(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return h(t),this.prependListener(e,u(this,e,t)),this},a.prototype.removeListener=function(e,t){var s,i,r,n,o;if(h(t),void 0===(i=this._events))return this;if(void 0===(s=i[e]))return this;if(s===t||s.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,s.listener||t));else if("function"!=typeof s){for(r=-1,n=s.length-1;n>=0;n--)if(s[n]===t||s[n].listener===t){o=s[n].listener,r=n;break}if(r<0)return this;0===r?s.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(s,r),1===s.length&&(i[e]=s[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,s,i;if(void 0===(s=this._events))return this;if(void 0===s.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==s[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete s[e]),this;if(0===arguments.length){var r,n=Object.keys(s);for(i=0;i<n.length;++i)"removeListener"!==(r=n[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=s[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}}})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9OWFcvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL05YVy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvc2Vzc2lvbi1zdGF0ZS5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvdXNlci1hZ2VudC1vcHRpb25zLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL3BsYXRmb3JtL3dlYi9tb2RpZmllcnMvbW9kaWZpZXJzLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL3BsYXRmb3JtL3dlYi9zZXNzaW9uLWRlc2NyaXB0aW9uLWhhbmRsZXIvbWVkaWEtc3RyZWFtLWZhY3RvcnktZGVmYXVsdC5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9wbGF0Zm9ybS93ZWIvc2Vzc2lvbi1kZXNjcmlwdGlvbi1oYW5kbGVyL3BlZXItY29ubmVjdGlvbi1jb25maWd1cmF0aW9uLWRlZmF1bHQuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvcGxhdGZvcm0vd2ViL3Nlc3Npb24tZGVzY3JpcHRpb24taGFuZGxlci9zZXNzaW9uLWRlc2NyaXB0aW9uLWhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvcGxhdGZvcm0vd2ViL3Nlc3Npb24tZGVzY3JpcHRpb24taGFuZGxlci9zZXNzaW9uLWRlc2NyaXB0aW9uLWhhbmRsZXItZmFjdG9yeS1kZWZhdWx0LmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2dyYW1tYXIvcGFyYW1ldGVycy5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9ncmFtbWFyL3VyaS5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL2xvZy9sZXZlbHMuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS9sb2cvbG9nZ2VyLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvbG9nL2xvZ2dlci1mYWN0b3J5LmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2dyYW1tYXIvbmFtZS1hZGRyLWhlYWRlci5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9ncmFtbWFyL3BlZ2pzL2Rpc3QvZ3JhbW1hci5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9ncmFtbWFyL2dyYW1tYXIuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS9tZXNzYWdlcy9tZDUuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS9tZXNzYWdlcy91dGlscy5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL21lc3NhZ2VzL2RpZ2VzdC1hdXRoZW50aWNhdGlvbi5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL21lc3NhZ2VzL21ldGhvZHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvbWVzc2FnZXMvb3V0Z29pbmctcmVxdWVzdC1tZXNzYWdlLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvbWVzc2FnZXMvb3V0Z29pbmctcmVzcG9uc2UuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS90aW1lcnMuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS9leGNlcHRpb25zL2V4Y2VwdGlvbi5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL2V4Y2VwdGlvbnMvdHJhbnNwb3J0LWVycm9yLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdHJhbnNhY3Rpb25zL3RyYW5zYWN0aW9uLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdHJhbnNhY3Rpb25zL2NsaWVudC10cmFuc2FjdGlvbi5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3RyYW5zYWN0aW9ucy90cmFuc2FjdGlvbi1zdGF0ZS5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3Nlc3Npb24vc2Vzc2lvbi5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3N1YnNjcmlwdGlvbi9zdWJzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS90cmFuc2FjdGlvbnMvbm9uLWludml0ZS1jbGllbnQtdHJhbnNhY3Rpb24uanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS90cmFuc2FjdGlvbnMvc2VydmVyLXRyYW5zYWN0aW9uLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdHJhbnNhY3Rpb25zL2ludml0ZS1zZXJ2ZXItdHJhbnNhY3Rpb24uanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS9kaWFsb2dzL2RpYWxvZy5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL21lc3NhZ2VzL2luY29taW5nLW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS9tZXNzYWdlcy9pbmNvbWluZy1yZXF1ZXN0LW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS9tZXNzYWdlcy9pbmNvbWluZy1yZXNwb25zZS1tZXNzYWdlLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvbWVzc2FnZXMvYm9keS5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3RyYW5zYWN0aW9ucy9pbnZpdGUtY2xpZW50LXRyYW5zYWN0aW9uLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudHMvdXNlci1hZ2VudC1jbGllbnQuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS91c2VyLWFnZW50cy9ieWUtdXNlci1hZ2VudC1jbGllbnQuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS90cmFuc2FjdGlvbnMvbm9uLWludml0ZS1zZXJ2ZXItdHJhbnNhY3Rpb24uanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS9leGNlcHRpb25zL3RyYW5zYWN0aW9uLXN0YXRlLWVycm9yLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudHMvdXNlci1hZ2VudC1zZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS91c2VyLWFnZW50cy9ieWUtdXNlci1hZ2VudC1zZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS91c2VyLWFnZW50cy9pbmZvLXVzZXItYWdlbnQtY2xpZW50LmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudHMvaW5mby11c2VyLWFnZW50LXNlcnZlci5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3VzZXItYWdlbnRzL21lc3NhZ2UtdXNlci1hZ2VudC1jbGllbnQuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS91c2VyLWFnZW50cy9tZXNzYWdlLXVzZXItYWdlbnQtc2VydmVyLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudHMvbm90aWZ5LXVzZXItYWdlbnQtY2xpZW50LmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudHMvbm90aWZ5LXVzZXItYWdlbnQtc2VydmVyLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudHMvcHJhY2stdXNlci1hZ2VudC1jbGllbnQuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS91c2VyLWFnZW50cy9wcmFjay11c2VyLWFnZW50LXNlcnZlci5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3VzZXItYWdlbnRzL3JlLWludml0ZS11c2VyLWFnZW50LWNsaWVudC5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3VzZXItYWdlbnRzL3JlLWludml0ZS11c2VyLWFnZW50LXNlcnZlci5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3VzZXItYWdlbnRzL3JlZmVyLXVzZXItYWdlbnQtY2xpZW50LmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudHMvcmVmZXItdXNlci1hZ2VudC1zZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvY29yZS9kaWFsb2dzL3Nlc3Npb24tZGlhbG9nLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudHMvaW52aXRlLXVzZXItYWdlbnQtY2xpZW50LmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudHMvcHVibGlzaC11c2VyLWFnZW50LWNsaWVudC5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3VzZXItYWdlbnRzL3JlZ2lzdGVyLXVzZXItYWdlbnQtY2xpZW50LmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudC1jb3JlL2FsbG93ZWQtbWV0aG9kcy5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3VzZXItYWdlbnRzL3JlLXN1YnNjcmliZS11c2VyLWFnZW50LWNsaWVudC5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL2RpYWxvZ3Mvc3Vic2NyaXB0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3VzZXItYWdlbnRzL3N1YnNjcmliZS11c2VyLWFnZW50LWNsaWVudC5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3VzZXItYWdlbnRzL2ludml0ZS11c2VyLWFnZW50LXNlcnZlci5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL3VzZXItYWdlbnRzL3JlZ2lzdGVyLXVzZXItYWdlbnQtc2VydmVyLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudHMvc3Vic2NyaWJlLXVzZXItYWdlbnQtc2VydmVyLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2NvcmUvdXNlci1hZ2VudC1jb3JlL3VzZXItYWdlbnQtY29yZS5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9jb3JlL21lc3NhZ2VzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvdHJhbnNwb3J0LXN0YXRlLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2FwaS91c2VyLWFnZW50LXN0YXRlLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2FwaS9yZWdpc3RlcmVyLXN0YXRlLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2FwaS9lbWl0dGVyLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2FwaS9leGNlcHRpb25zL3N0YXRlLXRyYW5zaXRpb24uanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvcGxhdGZvcm0vd2ViL3RyYW5zcG9ydC90cmFuc3BvcnQuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvYXBpL2V4Y2VwdGlvbnMvY29udGVudC10eXBlLXVuc3VwcG9ydGVkLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2FwaS9leGNlcHRpb25zL3Nlc3Npb24tZGVzY3JpcHRpb24taGFuZGxlci5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvZXhjZXB0aW9ucy9zZXNzaW9uLXRlcm1pbmF0ZWQuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvYXBpL2Fjay5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvYnllLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2FwaS9leGNlcHRpb25zL3JlcXVlc3QtcGVuZGluZy5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvaW5mby5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvbm90aWZpY2F0aW9uLmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9zaXAuanMvbGliL2FwaS9yZWZlcnJhbC5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvc2Vzc2lvbi5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvaW52aXRhdGlvbi5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvaW52aXRlci5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvdXNlci1hZ2VudC5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvcmVnaXN0ZXJlci5qcyIsIndlYnBhY2s6Ly9OWFcvLi9ub2RlX21vZHVsZXMvc2lwLmpzL2xpYi9hcGkvbWVzc2FnZXIuanMiLCJ3ZWJwYWNrOi8vTlhXLy4vbm9kZV9tb2R1bGVzL3NpcC5qcy9saWIvcGxhdGZvcm0vd2ViL3NpbXBsZS11c2VyL3NpbXBsZS11c2VyLmpzIiwid2VicGFjazovL05YVy8uL2Rpc3Qvbnh3LXR5cGVzLmpzIiwid2VicGFjazovL05YVy8uL2Rpc3Qvbnh3LXV0aWxzLmpzIiwid2VicGFjazovL05YVy8uL2Rpc3Qvbnh3Q2FsbC5qcyIsIndlYnBhY2s6Ly9OWFcvLi9kaXN0L054d1N0YXRpYy5qcyIsIndlYnBhY2s6Ly9OWFcvLi9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL05YVy8uL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU2Vzc2lvblN0YXRlIiwiU0lQRXh0ZW5zaW9uIiwiVXNlckFnZW50UmVnaXN0ZXJlZE9wdGlvblRhZ3MiLCJhbnN3ZXJtb2RlIiwiZXZlbnRsaXN0IiwiZXhwbGljaXRzdWIiLCJnaW4iLCJncnV1IiwiaGlzdGluZm8iLCJpY2UiLCJqb2luIiwibm9yZWZlcnN1YiIsIm5vc3ViIiwib3V0Ym91bmQiLCJwYXRoIiwicG9saWN5IiwicHJlY29uZGl0aW9uIiwicHJlZiIsInByaXZhY3kiLCJyZXBsYWNlcyIsInRkaWFsb2ciLCJ0aW1lciIsInV1aSIsInN0cmlwUGF5bG9hZCIsInNkcCIsInBheWxvYWQiLCJtZWRpYURlc2NzIiwibGluZXMiLCJzcGxpdCIsImN1cnJlbnRNZWRpYURlc2MiLCJsZW5ndGgiLCJsaW5lIiwidGVzdCIsImluZGV4Iiwic3RyaXBwZWQiLCJwdXNoIiwicnRwbWFwIiwiZXhlYyIsInNwbGljZSIsIm1lZGlhRGVzYyIsIm1saW5lIiwiaiIsImluZGV4T2YiLCJzdHJpcFRjcENhbmRpZGF0ZXMiLCJkZXNjcmlwdGlvbiIsInJlcGxhY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInN0cmlwVGVsZXBob25lRXZlbnQiLCJjbGVhbkppdHNpU2RwSW1hZ2VhdHRyIiwic3RyaXBHNzIyIiwic3RyaXBSdHBQYXlsb2FkIiwic3RyaXBWaWRlbyIsImRlc2NyaXB0aW9uUmVnRXhwIiwiUmVnRXhwIiwiZ3JvdXBSZWdFeHAiLCJtaWRMaW5lVG9SZW1vdmUiLCJncm91cExpbmUiLCJmaWx0ZXIiLCJzZWN0aW9uIiwic3Vic3RyIiwibWF0Y2giLCJzdGVwIiwiZ3JvdXBMaW5lUG9ydGlvbiIsImdyb3VwUmVnRXhwUmVwbGFjZSIsInN0cmlwTWVkaWFEZXNjcmlwdGlvbiIsImFkZE1pZExpbmVzIiwic2VhcmNoIiwibWxpbmVzIiwic2RwQXJyYXkiLCJmb3JFYWNoIiwiZWxlbSIsImlkeCIsImhvbGRNb2RpZmllciIsInR5cGUiLCJFcnJvciIsImRlZmF1bHRNZWRpYVN0cmVhbUZhY3RvcnkiLCJjb25zdHJhaW50cyIsImF1ZGlvIiwidmlkZW8iLCJ1bmRlZmluZWQiLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJyZWplY3QiLCJnZXRVc2VyTWVkaWEiLCJNZWRpYVN0cmVhbSIsImRlZmF1bHRQZWVyQ29ubmVjdGlvbkNvbmZpZ3VyYXRpb24iLCJidW5kbGVQb2xpY3kiLCJjZXJ0aWZpY2F0ZXMiLCJpY2VDYW5kaWRhdGVQb29sU2l6ZSIsImljZVNlcnZlcnMiLCJ1cmxzIiwiaWNlVHJhbnNwb3J0UG9saWN5IiwicGVlcklkZW50aXR5IiwicnRjcE11eFBvbGljeSIsIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIiLCJsb2dnZXIiLCJtZWRpYVN0cmVhbUZhY3RvcnkiLCJzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyQ29uZmlndXJhdGlvbiIsImRlYnVnIiwiX2xvY2FsTWVkaWFTdHJlYW0iLCJfcmVtb3RlTWVkaWFTdHJlYW0iLCJfcGVlckNvbm5lY3Rpb24iLCJSVENQZWVyQ29ubmVjdGlvbiIsInBlZXJDb25uZWN0aW9uQ29uZmlndXJhdGlvbiIsImluaXRQZWVyQ29ubmVjdGlvbkV2ZW50SGFuZGxlcnMiLCJfZGF0YUNoYW5uZWwiLCJfcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZSIsImRlbGVnYXRlIiwic3RyZWFtIiwidHJhY2siLCJkaXNwYXRjaEV2ZW50IiwiTWVkaWFTdHJlYW1UcmFja0V2ZW50IiwiZ2V0UmVjZWl2ZXJzIiwicmVjZWl2ZXIiLCJzdG9wIiwiZ2V0U2VuZGVycyIsInNlbmRlciIsImNsb3NlIiwib3B0aW9ucyIsIm1vZGlmaWVycyIsIl9hIiwiX2IiLCJvbkRhdGFDaGFubmVsIiwiaWNlUmVzdGFydCIsIm9mZmVyT3B0aW9ucyIsImljZVRpbWVvdXQiLCJpY2VHYXRoZXJpbmdUaW1lb3V0IiwiZ2V0TG9jYWxNZWRpYVN0cmVhbSIsInRoZW4iLCJ1cGRhdGVEaXJlY3Rpb24iLCJjcmVhdGVEYXRhQ2hhbm5lbCIsImNyZWF0ZUxvY2FsT2ZmZXJPckFuc3dlciIsInNlc3Npb25EZXNjcmlwdGlvbiIsImFwcGx5TW9kaWZpZXJzIiwic2V0TG9jYWxTZXNzaW9uRGVzY3JpcHRpb24iLCJ3YWl0Rm9ySWNlR2F0aGVyaW5nQ29tcGxldGUiLCJnZXRMb2NhbFNlc3Npb25EZXNjcmlwdGlvbiIsImJvZHkiLCJjb250ZW50VHlwZSIsImNhdGNoIiwiZXJyb3IiLCJ0b25lcyIsInNlbmRlcnMiLCJkdG1mU2VuZGVyIiwiZHRtZiIsImR1cmF0aW9uIiwiaW50ZXJUb25lR2FwIiwiaW5zZXJ0RFRNRiIsImUiLCJsb2ciLCJ0b1N0cmluZyIsInNpZ25hbGluZ1N0YXRlIiwic2V0UmVtb3RlU2Vzc2lvbkRlc2NyaXB0aW9uIiwicmVkdWNlIiwiY3VyIiwibmV4dCIsIm1vZGlmaWVkIiwiZGF0YUNoYW5uZWwiLCJkYXRhQ2hhbm5lbExhYmVsIiwiZGF0YUNoYW5uZWxPcHRpb25zIiwiY3JlYXRlT2ZmZXIiLCJjcmVhdGVBbnN3ZXIiLCJhbnN3ZXJPcHRpb25zIiwiYXNzaWduIiwibG9jYWxNZWRpYVN0cmVhbUNvbnN0cmFpbnRzIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1lZGlhU3RyZWFtIiwic2V0TG9jYWxNZWRpYVN0cmVhbSIsInBjIiwibG9jYWxTdHJlYW0iLCJ0cmFja1VwZGF0ZXMiLCJ1cGRhdGVUcmFjayIsIm5ld1RyYWNrIiwia2luZCIsImZpbmQiLCJyZXBsYWNlVHJhY2siLCJvbGRUcmFjayIsImdldFRyYWNrcyIsImxvY2FsVHJhY2siLCJyZW1vdmVUcmFjayIsImRpc3BhdGNoUmVtb3ZlVHJhY2tFdmVudCIsImFkZFRyYWNrIiwiZGlzcGF0Y2hBZGRUcmFja0V2ZW50IiwiYXVkaW9UcmFja3MiLCJnZXRBdWRpb1RyYWNrcyIsInZpZGVvVHJhY2tzIiwiZ2V0VmlkZW9UcmFja3MiLCJ4IiwibG9jYWxEZXNjcmlwdGlvbiIsInNldExvY2FsRGVzY3JpcHRpb24iLCJzZXRSZW1vdGVEZXNjcmlwdGlvbiIsInJlbW90ZVN0cmVhbSIsImdldFRyYWNrQnlJZCIsImlkIiwiZGlyZWN0aW9uVG9PZmZlciIsImN1cnJlbnREaXJlY3Rpb24iLCJob2xkIiwiZ2V0VHJhbnNjZWl2ZXJzIiwidHJhbnNjZWl2ZXIiLCJkaXJlY3Rpb24iLCJvZmZlckRpcmVjdGlvbiIsIm9mZmVyZWREaXJlY3Rpb24iLCJyZW1vdGVEZXNjcmlwdGlvbiIsInNlYXJjaFJlc3VsdCIsImFuc3dlckRpcmVjdGlvbiIsImljZUdhdGhlcmluZ0NvbXBsZXRlVGltZW91dElkIiwiY2xlYXJUaW1lb3V0IiwiaWNlR2F0aGVyaW5nQ29tcGxldGVQcm9taXNlIiwiaWNlR2F0aGVyaW5nQ29tcGxldGVSZXNvbHZlIiwiaWNlR2F0aGVyaW5nQ29tcGxldGVSZWplY3QiLCJyZXN0YXJ0IiwidGltZW91dCIsImljZUdhdGhlcmluZ1N0YXRlIiwic2V0VGltZW91dCIsImljZUdhdGhlcmluZ0NvbXBsZXRlIiwicGVlckNvbm5lY3Rpb24iLCJvbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSIsImV2ZW50IiwibmV3U3RhdGUiLCJjb25uZWN0aW9uU3RhdGUiLCJvbmRhdGFjaGFubmVsIiwiY2hhbm5lbCIsIm9uaWNlY2FuZGlkYXRlIiwib25pY2VjYW5kaWRhdGVlcnJvciIsIm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlIiwiaWNlQ29ubmVjdGlvblN0YXRlIiwib25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSIsIm9ubmVnb3RpYXRpb25uZWVkZWQiLCJvbnNpZ25hbGluZ3N0YXRlY2hhbmdlIiwib25zdGF0c2VuZGVkIiwib250cmFjayIsImVuYWJsZWQiLCJzZXRSZW1vdGVUcmFjayIsImRlZmF1bHRTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeSIsInNlc3Npb24iLCJ1c2VyQWdlbnQiLCJnZXRMb2dnZXIiLCJQYXJhbWV0ZXJzIiwicGFyYW1ldGVycyIsInBhcmFtIiwic2V0UGFyYW0iLCJ0b0xvd2VyQ2FzZSIsImhhc1BhcmFtIiwic2NoZW1lIiwidXNlciIsImhvc3QiLCJwb3J0IiwiaGVhZGVycyIsInN1cGVyIiwiVHlwZUVycm9yIiwiaGVhZGVyIiwic2V0SGVhZGVyIiwicmF3Iiwibm9ybWFsIiwiaGVhZGVyaXplIiwiQXJyYXkiLCJfcmF3IiwicGFyc2UiLCJfdG9TdHJpbmciLCJfbm9ybWFsIiwidXJpIiwidXJpU3RyaW5nIiwiZXNjYXBlVXNlciIsInBhcmFtZXRlciIsImRlY29kZWRVc2VyIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic3RyIiwiZXhjZXB0aW9ucyIsInBhcnRzIiwiaG5hbWUiLCJwYXJ0IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzdWJzdHJpbmciLCJlcXVpdmFsZW50VVJJIiwiYSIsImIiLCJwYXJhbWV0ZXJLZXlzQSIsImtleXMiLCJwYXJhbWV0ZXJLZXlzQiIsImluY2x1ZGVzIiwiZXZlcnkiLCJjb21wYXJlUGFyYW1ldGVycyIsImhlYWRlcktleXNBIiwiaGVhZGVyS2V5c0IiLCJpbnRlcnNlY3Rpb24iLCJMZXZlbHMiLCJjYXRlZ29yeSIsImxhYmVsIiwiY29udGVudCIsImdlbmVyaWNMb2ciLCJ3YXJuIiwibGV2ZWwiLCJuZXdMZXZlbCIsImJ1aWx0aW5FbmFibGVkIiwiX2xldmVsIiwibG9nZ2VycyIsIl9jb25uZWN0b3IiLCJsZXZlbFRvTG9nIiwicHJpbnQiLCJjb25uZWN0b3IiLCJwcmVmaXgiLCJEYXRlIiwiY29uY2F0IiwiY29uc29sZSIsImRpc3BsYXlOYW1lIiwiX2Rpc3BsYXlOYW1lIiwiYW9yIiwiY2xvbmUiLCJTeW50YXhFcnJvciIsIm1lc3NhZ2UiLCJleHBlY3RlZCIsImZvdW5kIiwibG9jYXRpb24iLCJjYXB0dXJlU3RhY2tUcmFjZSIsImhleCIsImNoIiwiY2hhckNvZGVBdCIsImxpdGVyYWxFc2NhcGUiLCJjbGFzc0VzY2FwZSIsImRlc2NyaWJlRXhwZWN0YXRpb24iLCJleHBlY3RhdGlvbiIsInRleHQiLCJlc2NhcGVkUGFydHMiLCJtYXAiLCJpc0FycmF5IiwiaW52ZXJ0ZWQiLCJleHBlY3RlZDEiLCJkZXNjcmlwdGlvbnMiLCJzb3J0Iiwic2xpY2UiLCJkZXNjcmliZUV4cGVjdGVkIiwiZm91bmQxIiwiaW5wdXQiLCJwZWckRkFJTEVEIiwicGVnJHN0YXJ0UnVsZUluZGljZXMiLCJDb250YWN0IiwiTmFtZV9BZGRyX0hlYWRlciIsIlJlY29yZF9Sb3V0ZSIsIlJlcXVlc3RfUmVzcG9uc2UiLCJTSVBfVVJJIiwiU3Vic2NyaXB0aW9uX1N0YXRlIiwiU3VwcG9ydGVkIiwiUmVxdWlyZSIsIlZpYSIsImFic29sdXRlVVJJIiwiQ2FsbF9JRCIsIkNvbnRlbnRfRGlzcG9zaXRpb24iLCJDb250ZW50X0xlbmd0aCIsIkNvbnRlbnRfVHlwZSIsIkNTZXEiLCJFdmVudCIsIkZyb20iLCJNYXhfRm9yd2FyZHMiLCJNaW5fU0UiLCJQcm94eV9BdXRoZW50aWNhdGUiLCJxdW90ZWRfc3RyaW5nIiwiUmVmZXJfVG8iLCJSZXBsYWNlcyIsIlNlc3Npb25fRXhwaXJlcyIsInN0dW5fVVJJIiwiVG8iLCJ0dXJuX1VSSSIsInV1aWQiLCJXV1dfQXV0aGVudGljYXRlIiwiY2hhbGxlbmdlIiwic2lwZnJhZyIsIlJlZmVycmVkX0J5IiwicGVnJHN0YXJ0UnVsZUluZGV4IiwicGVnJGNvbnN0cyIsInBlZyRsaXRlcmFsRXhwZWN0YXRpb24iLCJwZWckY2xhc3NFeHBlY3RhdGlvbiIsImNvbnRlbnRzIiwiZGF0YSIsImhvc3RfdHlwZSIsInVyaV9wYXJhbXMiLCJ1cmlfaGVhZGVycyIsInN0YXJ0UnVsZSIsInVyaV9zY2hlbWUiLCJwYXNzd29yZCIsInBhcnNlSW50IiwidHJhbnNwb3J0IiwibWV0aG9kIiwidHRsIiwicGFyYW1zIiwibWFkZHIiLCJodmFsdWUiLCJzaXBfdmVyc2lvbiIsInN0YXR1c19jb2RlIiwicmVhc29uX3BocmFzZSIsIm11bHRpX2hlYWRlciIsInBhcnNlZCIsInBlZyRjdXJyUG9zIiwic3RhcnQiLCJvZmZzZXQiLCJ0cmltIiwicSIsImV4cGlyZXMiLCJkZWx0YV9zZWNvbmRzIiwicGFyc2VGbG9hdCIsImNzZXFfdmFsdWUiLCJldmVudF90eXBlIiwidGFnIiwiZm9yd2FyZHMiLCJtaW5fZXhwaXJlcyIsInJlYWxtIiwibm9uY2UiLCJvcGFxdWUiLCJzdGFsZSIsImFsZ29yaXRobSIsInFvcF92YWx1ZSIsInFvcCIsInJhY2tfdmFsdWUiLCJyZXBsYWNlc19mcm9tX3RhZyIsInJlcGxhY2VzX3RvX3RhZyIsImNhbGxfaWQiLCJmcm9tX3RhZyIsInRvX3RhZyIsImVhcmx5X29ubHkiLCJoZWFkIiwidGFpbCIsImxpc3QiLCJyc2VxX3ZhbHVlIiwic3RhdGUiLCJyZWFzb24iLCJyZXRyeV9hZnRlciIsInZpYV90dGxfdmFsdWUiLCJ2aWFfbWFkZHIiLCJ2aWFfcmVjZWl2ZWQiLCJyZWNlaXZlZCIsInZpYV9icmFuY2giLCJicmFuY2giLCJyZXNwb25zZV9wb3J0IiwicnBvcnQiLCJ2aWFfcHJvdG9jb2wiLCJwcm90b2NvbCIsInZpYV90cmFuc3BvcnQiLCJ2aWFfc2VudF9ieV9wb3J0IiwiZGVsdGFTZWNvbmRzIiwiZW5kcG9pbnQiLCJyZWZyZXNoZXIiLCJwZWckYnl0ZWNvZGUiLCJwZWckZGVjb2RlIiwicGVnJHNhdmVkUG9zIiwicGVnJHBvc0RldGFpbHNDYWNoZSIsImNvbHVtbiIsInBlZyRyZXN1bHQiLCJwZWckbWF4RmFpbFBvcyIsInBlZyRtYXhGYWlsRXhwZWN0ZWQiLCJwZWckc2lsZW50RmFpbHMiLCJwZWckY29tcHV0ZUxvY2F0aW9uIiwidGV4dDEiLCJpZ25vcmVDYXNlIiwicGVnJGNvbXB1dGVQb3NEZXRhaWxzIiwicG9zIiwiZGV0YWlscyIsInN0YXJ0UG9zIiwiZW5kUG9zIiwic3RhcnRQb3NEZXRhaWxzIiwiZW5kUG9zRGV0YWlscyIsImVuZCIsInBlZyRmYWlsIiwicGVnJGJ1aWxkU3RydWN0dXJlZEVycm9yIiwibG9jYXRpb24xIiwiYnVpbGRNZXNzYWdlIiwicGVnJHBhcnNlUnVsZSIsImJjIiwiaXAiLCJpcHMiLCJlbmRzIiwic3RhY2siLCJwb3AiLCJhcHBseSIsIkdyYW1tYXIiLCJuYW1lQWRkckhlYWRlclBhcnNlIiwibmFtZUFkZHJIZWFkZXIiLCJwYXJzZWROYW1lQWRkckhlYWRlciIsIlVSSVBhcnNlIiwicGFyc2VkVXJpIiwiTWQ1IiwiX2RhdGFMZW5ndGgiLCJfYnVmZmVyTGVuZ3RoIiwiX3N0YXRlIiwiSW50MzJBcnJheSIsIl9idWZmZXIiLCJBcnJheUJ1ZmZlciIsIl9idWZmZXI4IiwiVWludDhBcnJheSIsIl9idWZmZXIzMiIsIlVpbnQzMkFycmF5Iiwib25lUGFzc0hhc2hlciIsImFwcGVuZFN0ciIsImFwcGVuZEFzY2lpU3RyIiwiaGMiLCJoZXhDaGFycyIsImhvIiwiaGV4T3V0IiwiayIsInNldCIsInN0YXRlSWRlbnRpdHkiLCJidWY4IiwiYnVmMzIiLCJjb2RlIiwiYnVmTGVuIiwiX21kNWN5Y2xlIiwiTWF0aCIsIm1pbiIsImJ1ZmZlciIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImJ1ZmxlbiIsImJ1ZiIsImRhdGFCaXRzTGVuIiwiYnVmZmVyMzJJZGVudGl0eSIsInN1YmFycmF5IiwibWF0Y2hlcyIsImxvIiwiaGkiLCJfaGV4IiwiaGFzaFN0ciIsIlJFQVNPTl9QSFJBU0UiLCIxMDAiLCIxODAiLCIxODEiLCIxODIiLCIxODMiLCIxOTkiLCIyMDAiLCIyMDIiLCIyMDQiLCIzMDAiLCIzMDEiLCIzMDIiLCIzMDUiLCIzODAiLCI0MDAiLCI0MDEiLCI0MDIiLCI0MDMiLCI0MDQiLCI0MDUiLCI0MDYiLCI0MDciLCI0MDgiLCI0MTAiLCI0MTIiLCI0MTMiLCI0MTQiLCI0MTUiLCI0MTYiLCI0MTciLCI0MjAiLCI0MjEiLCI0MjIiLCI0MjMiLCI0MjgiLCI0MjkiLCI0MzAiLCI0MzMiLCI0MzYiLCI0MzciLCI0MzgiLCI0MzkiLCI0NDAiLCI0NjkiLCI0NzAiLCI0NzgiLCI0ODAiLCI0ODEiLCI0ODIiLCI0ODMiLCI0ODQiLCI0ODUiLCI0ODYiLCI0ODciLCI0ODgiLCI0ODkiLCI0OTEiLCI0OTMiLCI0OTQiLCI1MDAiLCI1MDEiLCI1MDIiLCI1MDMiLCI1MDQiLCI1MDUiLCI1MTMiLCI1ODAiLCI2MDAiLCI2MDMiLCI2MDQiLCI2MDYiLCJjcmVhdGVSYW5kb21Ub2tlbiIsInNpemUiLCJiYXNlIiwidG9rZW4iLCJmbG9vciIsInJhbmRvbSIsImdldFJlYXNvblBocmFzZSIsIm5ld1RhZyIsIkNzZXEiLCJSYWNrIiwiUnNlcSIsInV0ZjhMZW5ndGgiLCJNRDUiLCJsb2dnZXJGYWN0b3J5IiwiaGExIiwidXNlcm5hbWUiLCJuYyIsIm5jSGV4IiwicmVxdWVzdCIsInJ1cmkiLCJjbm9uY2UiLCJ1cGRhdGVOY0hleCIsImNhbGN1bGF0ZVJlc3BvbnNlIiwiYXV0aFBhcmFtcyIsInJlc3BvbnNlIiwiTnVtYmVyIiwiaGEyIiwiQyIsIkFDSyIsIkJZRSIsIkNBTkNFTCIsIklORk8iLCJJTlZJVEUiLCJNRVNTQUdFIiwiTk9USUZZIiwiT1BUSU9OUyIsIlJFR0lTVEVSIiwiVVBEQVRFIiwiU1VCU0NSSUJFIiwiUFVCTElTSCIsIlJFRkVSIiwiUFJBQ0siLCJmcm9tVVJJIiwidG9VUkkiLCJleHRyYUhlYWRlcnMiLCJnZXREZWZhdWx0T3B0aW9ucyIsIm9wdGlvblRhZ3MiLCJyb3V0ZVNldCIsImZyb21UYWciLCJmcm9tIiwibWFrZU5hbWVBZGRySGVhZGVyIiwiZnJvbURpc3BsYXlOYW1lIiwidG9UYWciLCJ0byIsInRvRGlzcGxheU5hbWUiLCJjYWxsSWQiLCJjYWxsSWRQcmVmaXgiLCJjc2VxIiwiZm9yY2VScG9ydCIsImhhY2tWaWFUY3AiLCJ1c2VyQWdlbnRTdHJpbmciLCJ2aWFIb3N0IiwicmVnZXhwIiwiZXhIZWFkZXIiLCJyZXN1bHQiLCJoZWFkZXJBcnJheSIsImhlYWRlclBhcnQiLCJleHRyYUhlYWRlciIsInZpYSIsIm1zZyIsInRvUmF3IiwiY29uc3RydWN0T3V0Z29pbmdSZXNwb25zZSIsInN0YXR1c0NvZGUiLCJyZWFzb25QaHJhc2UiLCJmcm9tSGVhZGVyIiwiZ2V0SGVhZGVyIiwiY2FsbElkSGVhZGVyIiwiY1NlcUhlYWRlciIsInZpYUhlYWRlcnMiLCJnZXRIZWFkZXJzIiwicHJldmlvdXMiLCJjdXJyZW50IiwidG9IZWFkZXIiLCJwYXJzZUhlYWRlciIsInN1cHBvcnRlZEhlYWRlciIsInN1cHBvcnRlZCIsInVzZXJBZ2VudEhlYWRlciIsImV4dGVuc2lvbkhlYWRlcnMiLCJUMSIsIlRpbWVycyIsIlQyIiwiVDQiLCJUSU1FUl9CIiwiVElNRVJfRCIsIlRJTUVSX0YiLCJUSU1FUl9IIiwiVElNRVJfSSIsIlRJTUVSX0oiLCJUSU1FUl9LIiwiVElNRVJfTCIsIlRJTUVSX00iLCJUSU1FUl9OIiwiUFJPVklTSU9OQUxfUkVTUE9OU0VfSU5URVJWQUwiLCJFeGNlcHRpb24iLCJzZXRQcm90b3R5cGVPZiIsIl90cmFuc3BvcnQiLCJfdXNlciIsIl9pZCIsImxvZ2dlckNhdGVnb3J5IiwibGlzdGVuZXJzIiwidHlwZVRvU3RyaW5nIiwibGlzdGVuZXIiLCJvbmNlV3JhcHBlciIsInJlbW92ZVN0YXRlQ2hhbmdlTGlzdGVuZXIiLCJvbmNlIiwic2VuZCIsIm9uVHJhbnNwb3J0RXJyb3IiLCJ0cmFuc3BvcnRFcnJvciIsIm9uU3RhdGVDaGFuZ2UiLCJub3RpZnlTdGF0ZUNoYW5nZUxpc3RlbmVycyIsIl9yZXF1ZXN0IiwibWFrZUlkIiwic2V0VmlhSGVhZGVyIiwib25SZXF1ZXN0VGltZW91dCIsIlRyYW5zYWN0aW9uU3RhdGUiLCJTaWduYWxpbmdTdGF0ZSIsIlN1YnNjcmlwdGlvblN0YXRlIiwiVHJ5aW5nIiwiRiIsInRpbWVyRiIsImxvZ1RyYW5zcG9ydEVycm9yIiwiSyIsImRpc3Bvc2UiLCJzdGF0ZVRyYW5zaXRpb24iLCJQcm9jZWVkaW5nIiwicmVjZWl2ZVJlc3BvbnNlIiwiQ29tcGxldGVkIiwiVGVybWluYXRlZCIsImR1ZVRvVHJhbnNwb3J0RXJyb3IiLCJpbnZhbGlkU3RhdGVUcmFuc2l0aW9uIiwidGltZXJLIiwic2V0U3RhdGUiLCJ2aWFCcmFuY2giLCJzdG9wUHJvZ3Jlc3NFeHRlbnNpb25UaW1lciIsIkgiLCJJIiwiTCIsImxhc3RQcm92aXNpb25hbFJlc3BvbnNlIiwiQWNjZXB0ZWQiLCJsYXN0RmluYWxSZXNwb25zZSIsIkNvbmZpcm1lZCIsInN0YXJ0UHJvZ3Jlc3NFeHRlbnNpb25UaW1lciIsInRpbWVyTCIsInRpbWVySCIsInRpbWVySSIsInByb2dyZXNzRXh0ZW5zaW9uVGltZXIiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJjb3JlIiwiZGlhbG9nU3RhdGUiLCJkaWFsb2dzIiwib3V0Z29pbmdSZXF1ZXN0TWVzc2FnZSIsImluY29taW5nUmVzcG9uc2VNZXNzYWdlIiwicmV2ZXJzZSIsImNvbnRhY3QiLCJyZW1vdGVUYXJnZXQiLCJsb2NhbFNlcXVlbmNlTnVtYmVyIiwibG9jYWxUYWciLCJyZW1vdGVUYWciLCJsb2NhbFVSSSIsInJlbW90ZVVSSSIsImVhcmx5IiwicmVtb3RlU2VxdWVuY2VOdW1iZXIiLCJzZWN1cmUiLCJpbmNvbWluZ1JlcXVlc3RNZXNzYWdlIiwiZGVsZXRlIiwidG9VcmkiLCJmcm9tVXJpIiwidXNlckFnZW50Q29yZSIsIm1ha2VPdXRnb2luZ1JlcXVlc3RNZXNzYWdlIiwicmVwbHlTdGF0ZWxlc3MiLCJjb250ZW50VHlwZVRvQ29udGVudERpc3Bvc2l0aW9uIiwiZnJvbUJvZHlMZWdhY3kiLCJib2R5TGVnYWN5IiwiY29udGVudERpc3Bvc2l0aW9uIiwiaXNCb2R5IiwiZ2V0Qm9keSIsIkNhbGxpbmciLCJhY2tSZXRyYW5zbWlzc2lvbkNhY2hlIiwiTWFwIiwiQiIsInRpbWVyQiIsIkQiLCJNIiwiYWNrIiwiaGFzIiwicm91dGUiLCJ0aW1lckQiLCJ0aW1lck0iLCJ0cmFuc2FjdGlvbkNvbnN0cnVjdG9yIiwiY2hhbGxlbmdlZCIsImluaXQiLCJ0cmFuc2FjdGlvbiIsIl90cmFuc2FjdGlvbiIsIlJvdXRlIiwiYWRkU3RhdGVDaGFuZ2VMaXN0ZW5lciIsImRpYWxvZyIsImF1dGhvcml6YXRpb25IZWFkZXJOYW1lIiwiY3JlZGVudGlhbHMiLCJjb25maWd1cmF0aW9uIiwiYXV0aGVudGljYXRpb25GYWN0b3J5IiwiYXV0aGVudGljYXRlIiwiaW5jcmVtZW50TG9jYWxTZXF1ZW5jZU51bWJlciIsImF1dGhlbnRpY2F0aW9uR3VhcmQiLCJvblRyeWluZyIsIm9uUHJvZ3Jlc3MiLCJvbkFjY2VwdCIsIm9uUmVkaXJlY3QiLCJvblJlamVjdCIsInVzZXJBZ2VudENsaWVudHMiLCJ1c2VyQWdlbnRDbGllbnRJZCIsImNyZWF0ZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UiLCJKIiwibGFzdFJlc3BvbnNlIiwidGltZXJKIiwiYWNjZXB0YWJsZSIsInJlcGx5IiwicHJvZ3Jlc3NhYmxlIiwiY29udGFjdHMiLCJyZWRpcmVjdGFibGUiLCJjb250YWN0SGVhZGVycyIsInJlamVjdGFibGUiLCJ0cnlpbmdhYmxlIiwib25DYW5jZWwiLCJ1c2VyQWdlbnRIZWFkZXJGaWVsZFZhbHVlIiwic3VwcG9ydGVkT3B0aW9uVGFnc1Jlc3BvbnNlIiwidXNlckFnZW50U2VydmVycyIsInVzZXJBZ2VudFNlcnZlcklkIiwiZGlhbG9nT3JDb3JlIiwic2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uIiwiYWNjZXB0IiwicmVpbnZpdGVVc2VyQWdlbnRDbGllbnQiLCJwcmFjayIsInNpZ25hbGluZ1N0YXRlUm9sbGJhY2siLCJyZWludml0ZVVzZXJBZ2VudFNlcnZlciIsInJlQ29uZmlybSIsInByb2dyZXNzIiwiaW5pdGlhbFRyYW5zYWN0aW9uIiwiX3NpZ25hbGluZ1N0YXRlIiwiSW5pdGlhbCIsImFja1dhaXQiLCJhY2tQcm9jZXNzaW5nIiwic3RhcnQyeHhSZXRyYW5zbWlzc2lvblRpbWVyIiwiQ2xvc2VkIiwiX29mZmVyIiwiX2Fuc3dlciIsImludml0ZTJ4eFRpbWVyIiwiRWFybHkiLCJBY2tXYWl0IiwiY29uZmlybSIsInN0YXJ0UmVJbnZpdGUyeHhSZXRyYW5zbWlzc2lvblRpbWVyIiwiYWNrUmVzcG9uc2UiLCJzZXF1ZW5jZUd1YXJkIiwicmVjZWl2ZVJlcXVlc3QiLCJ3YXJuaW5nIiwiU3RhYmxlIiwidWFzIiwib25CeWUiLCJvbkluZm8iLCJvbkludml0ZSIsIm9uTWVzc2FnZSIsIm9uTm90aWZ5Iiwib25QcmFjayIsIm9uUmVmZXIiLCJvbkFjayIsInByb21pc2VPclZvaWQiLCJyZXF1aXJlSGVhZGVyIiwicnNlcUhlYWRlciIsInJzZXEiLCJIYXZlTG9jYWxPZmZlciIsIkhhdmVSZW1vdGVPZmZlciIsIl9yb2xsYmFja09mZmVyIiwiX3JvbGxiYWNrQW5zd2VyIiwicmV0cmFuc21pc3Npb24iLCJyZXRyYW5zbWl0QWNjZXB0ZWRSZXNwb25zZSIsInN0YXRlQ2hhbmdlZCIsIm9uQWNrVGltZW91dCIsImJ5ZSIsImNvbmZpcm1lZERpYWxvZ0Fja3MiLCJjb25maXJtZWREaWFsb2dzIiwiZWFybHlEaWFsb2dzIiwiZWFybHlEaWFsb2ciLCJjbGVhciIsImluaXRpYWxEaWFsb2dTdGF0ZUZvclVzZXJBZ2VudENsaWVudCIsInJlbGlhYmxlU2VxdWVuY2VHdWFyZCIsIm91dGdvaW5nQWNrUmVxdWVzdCIsInJlY29tcHV0ZVJvdXRlU2V0IiwiQWxsb3dlZE1ldGhvZHMiLCJzdWJzY3JpcHRpb25FeHBpcmVzUmVjZWl2ZWQiLCJzdWJzY3JpcHRpb25FeHBpcmVzIiwidGVybWluYXRlIiwic3Vic2NyaXB0aW9uRXZlbnQiLCJzdWJzY3JpcHRpb25TdGF0ZSIsIl9hdXRvUmVmcmVzaCIsIl9zdWJzY3JpcHRpb25FdmVudCIsIl9zdWJzY3JpcHRpb25FeHBpcmVzIiwiX3N1YnNjcmlwdGlvbkV4cGlyZXNJbml0aWFsIiwiX3N1YnNjcmlwdGlvbkV4cGlyZXNMYXN0U2V0Iiwibm93IiwiX3N1YnNjcmlwdGlvblJlZnJlc2giLCJfc3Vic2NyaXB0aW9uUmVmcmVzaExhc3RTZXQiLCJfc3Vic2NyaXB0aW9uU3RhdGUiLCJvdXRnb2luZ1N1YnNjcmliZVJlcXVlc3RNZXNzYWdlIiwiaW5jb21pbmdOb3RpZnlSZXF1ZXN0TWVzc2FnZSIsIk4iLCJyZWZyZXNoVGltZXJDbGVhciIsImF1dG9SZWZyZXNoIiwicmVmcmVzaFRpbWVyU2V0Iiwic2Vjb25kc1NpbmNlTGFzdFNldCIsInNlY29uZHNVbnRpbEV4cGlyZXMiLCJtYXgiLCJyZWZyZXNoIiwic3Vic2NyaXB0aW9uUmVmcmVzaCIsImFsbG93SGVhZGVyIiwic3Vic2NyaXB0aW9uRXhwaXJlc0luaXRpYWwiLCJzdWJzY3JpYmUiLCJQZW5kaW5nIiwiQWN0aXZlIiwidWFjIiwidGltZXJOIiwib25UZXJtaW5hdGVkIiwib25SZWZyZXNoIiwicmVmcmVzaFRpbWVyIiwibmV3RXhwaXJlcyIsIk5vdGlmeVdhaXQiLCJzdWJzY3JpYmVySWQiLCJzdWJzY3JpcHRpb25FeHBpcmVzUmVxdWVzdGVkIiwid2FpdE5vdGlmeVN0YXJ0Iiwid2FpdE5vdGlmeVN0b3AiLCJpbml0aWFsRGlhbG9nU3RhdGVGb3JTdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb24iLCJzdWJzY3JpYmVycyIsIm9uTm90aWZ5VGltZW91dCIsImNvbmZpcm1lZERpYWxvZyIsImluaXRpYWxEaWFsb2dTdGF0ZUZvclVzZXJBZ2VudFNlcnZlciIsInJlY29yZFJvdXRlSGVhZGVyIiwiY29udGFjdEhlYWRlciIsImFuc3dlciIsInJlZGlyZWN0IiwiYWNjZXB0ZWRCb2R5VHlwZXMiLCJyZXNldCIsInN1YnNjcmliZXIiLCJ0cmFuc3BvcnRBY2Nlc3NvciIsInJlcXVlc3RVUkkiLCJzaXBqc0lkIiwidmlhRm9yY2VScG9ydCIsInN1cHBvcnRlZE9wdGlvblRhZ3MiLCJwdWJHcnV1IiwidGVtcEdydXUiLCJkZWZhdWx0T3B0aW9ucyIsInJlcXVlc3RPcHRpb25zIiwicmVjZWl2ZVJlcXVlc3RGcm9tVHJhbnNwb3J0IiwicmVjZWl2ZVJlc3BvbnNlRnJvbVRyYW5zcG9ydCIsInRyYW5zYWN0aW9uSWQiLCJyZWNlaXZlQ2FuY2VsIiwicnVyaU1hdGNoZXMiLCJoYXNIZWFkZXIiLCJ2YWx1ZXMiLCJzb21lIiwicmVjZWl2ZUluc2lkZURpYWxvZ1JlcXVlc3QiLCJyZWNlaXZlT3V0c2lkZURpYWxvZ1JlcXVlc3QiLCJkaWFsb2dJZCIsImFjY2VwdEhlYWRlciIsIm9uUmVnaXN0ZXIiLCJvblN1YnNjcmliZSIsInVzZXJBZ2VudENsaWVudCIsIlRyYW5zcG9ydFN0YXRlIiwiVXNlckFnZW50U3RhdGUiLCJSZWdpc3RlcmVyU3RhdGUiLCJQYXJzZXIiLCJoZWFkZXJTdGFydCIsInBhcnRpYWxFbmQiLCJoZWFkZXJFbmQiLCJoY29sb25JbmRleCIsImhlYWRlck5hbWUiLCJoZWFkZXJWYWx1ZSIsImFkZEhlYWRlciIsImdldFBhcmFtIiwicG9zaXRpb24iLCJyZWZlclRvIiwicGFyc2VNZXNzYWdlIiwiZmlyc3RMaW5lIiwiYm9keVN0YXJ0IiwicGFyc2VkSGVhZGVyIiwiRW1pdHRlckltcGwiLCJyZW1vdmVMaXN0ZW5lciIsImFkZExpc3RlbmVyIiwiRGlzY29ubmVjdGVkIiwidHJhbnNpdGlvbmluZ1N0YXRlIiwiX3N0YXRlRXZlbnRFbWl0dGVyIiwib3B0aW9uc0RlcHJlY2F0ZWQiLCJ3c1NlcnZlcnNEZXByZWNhdGVkIiwid3NTZXJ2ZXJzIiwibWF4UmVjb25uZWN0aW9uQXR0ZW1wdHNEZXByZWNhdGVkIiwibWF4UmVjb25uZWN0aW9uQXR0ZW1wdHMiLCJkZXByZWNhdGVkTWVzc2FnZSIsInNlcnZlciIsInVybCIsIl9wcm90b2NvbCIsImRpc2Nvbm5lY3QiLCJfd3MiLCJfY29ubmVjdCIsIl9kaXNjb25uZWN0IiwiQ29ubmVjdGVkIiwiX3NlbmQiLCJDb25uZWN0aW5nIiwidHJhbnNpdGlvbkxvb3BEZXRlY3RlZEVycm9yIiwiY29ubmVjdFByb21pc2UiLCJEaXNjb25uZWN0aW5nIiwidHJhbnNpdGlvblN0YXRlIiwid3MiLCJXZWJTb2NrZXQiLCJiaW5hcnlUeXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2Iiwib25XZWJTb2NrZXRDbG9zZSIsIm9uV2ViU29ja2V0RXJyb3IiLCJvbldlYlNvY2tldE9wZW4iLCJvbldlYlNvY2tldE1lc3NhZ2UiLCJjb25uZWN0UmVzb2x2ZSIsImNvbm5lY3RSZWplY3QiLCJjb25uZWN0VGltZW91dCIsImNvbm5lY3Rpb25UaW1lb3V0IiwiZGlzY29ubmVjdFByb21pc2UiLCJkaXNjb25uZWN0UmVzb2x2ZSIsImRpc2Nvbm5lY3RSZWplY3QiLCJ0cmFjZVNpcCIsImZpbmlzaGVkRGF0YSIsImNsZWFyS2VlcEFsaXZlVGltZW91dCIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwiZXJyIiwiaW52YWxpZFRyYW5zaXRpb24iLCJvbGRTdGF0ZSIsImVtaXQiLCJzdGFydFNlbmRpbmdLZWVwQWxpdmVzIiwib25Db25uZWN0Iiwic3RvcFNlbmRpbmdLZWVwQWxpdmVzIiwib25EaXNjb25uZWN0Iiwia2VlcEFsaXZlRGVib3VuY2VUaW1lb3V0Iiwia2VlcEFsaXZlRGVib3VuY2UiLCJrZWVwQWxpdmVJbnRlcnZhbCIsInNlbmRLZWVwQWxpdmUiLCJ1cHBlckJvdW5kIiwibG93ZXJCb3VuZCIsImNvbXB1dGVLZWVwQWxpdmVUaW1lb3V0IiwiQWNrIiwiaW5jb21pbmdBY2tSZXF1ZXN0IiwiQnllIiwiaW5jb21pbmdCeWVSZXF1ZXN0IiwiSW5mbyIsImluY29taW5nSW5mb1JlcXVlc3QiLCJNZXNzYWdlIiwiaW5jb21pbmdNZXNzYWdlUmVxdWVzdCIsIk5vdGlmaWNhdGlvbiIsImluY29taW5nTm90aWZ5UmVxdWVzdCIsImluY29taW5nUmVmZXJSZXF1ZXN0IiwiaW52aXRlciIsInRhcmdldFVSSSIsImNsZWFySGVhZGVycyIsInJlZmVycmVkQnkiLCJfbWFrZUludml0ZXIiLCJfcmVmZXJyZWQiLCJfcmVmZXJyYWwiLCJwZW5kaW5nUmVpbnZpdGUiLCJwZW5kaW5nUmVpbnZpdGVBY2siLCJfdXNlckFnZW50IiwiX2Vhcmx5TWVkaWFFc3RhYmxpc2hlZCIsIl9zZXNzaW9ucyIsIl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyIiwiRXN0YWJsaXNoaW5nIiwiRXN0YWJsaXNoZWQiLCJfYnllIiwiVGVybWluYXRpbmciLCJfYXNzZXJ0ZWRJZGVudGl0eSIsIl9kaWFsb2ciLCJfcmVwbGFjZWUiLCJmbGFnIiwiaGFuZGxlciIsInNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5IiwiX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMiLCJfc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMiLCJfc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlIiwiX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGUiLCJjYW5jZWwiLCJyZXF1ZXN0RGVsZWdhdGUiLCJjb3B5UmVxdWVzdE9wdGlvbnMiLCJfaW5mbyIsInNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMiLCJzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzUmVJbnZpdGUiLCJzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyIsInNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGUiLCJhY2tBbmRCeWUiLCJ3aXRob3V0U2RwIiwic2V0T2ZmZXJBbmRHZXRBbnN3ZXIiLCJhbnN3ZXJCb2R5Iiwic2V0QW5zd2VyIiwicm9sbGJhY2tPZmZlciIsImdldFJlYXNvbkhlYWRlclZhbHVlIiwiX2NvbnRhY3QiLCJpbnZpdGUiLCJnZXRPZmZlciIsIm9mZmVyQm9keSIsIl9tZXNzYWdlIiwicmVmZXJFeHRyYUhlYWRlcnMiLCJyZWZlclRvU3RyaW5nIiwiX3JlZmVyIiwic2Vzc2lvblN0YXRlIiwiaW5mbyIsInJlZmVyIiwiX3JlbmRlcmJvZHkiLCJfcmVuZGVydHlwZSIsImdlbmVyYXRlUmVzcG9uc2VPZmZlckFuc3dlckluRGlhbG9nIiwib3V0Z29pbmdSZXNwb25zZSIsImVycm9yUm9sbGJhY2siLCJub3RpZmljYXRpb24iLCJyZWZlcnJhbCIsIm1ha2VJbnZpdGVyIiwiX3JlZmVycmFsSW52aXRlck9wdGlvbnMiLCJvZmZlciIsInNkaCIsInNldHVwU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlciIsInNkaE9wdGlvbnMiLCJzZGhNb2RpZmllcnMiLCJnZXREZXNjcmlwdGlvbiIsImJvZHlBbmRDb250ZW50VHlwZSIsInJvbGxiYWNrRGVzY3JpcHRpb24iLCJoYXNEZXNjcmlwdGlvbiIsInNldERlc2NyaXB0aW9uIiwic2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnlPcHRpb25zIiwib25TZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyIiwiY2F1c2UiLCJ0YXJnZXQiLCJyZW1vdGVJZGVudGl0eSIsImZyaWVuZGx5TmFtZSIsImluY29taW5nSW52aXRlUmVxdWVzdCIsImRpc3Bvc2VkIiwiZXhwaXJlc1RpbWVyIiwiaXNDYW5jZWxlZCIsInJlbDEwMCIsInVzZXJOb0Fuc3dlclRpbWVyIiwid2FpdGluZ0ZvclByYWNrIiwibm9BbnN3ZXJUaW1lb3V0IiwiYXNzZXJ0ZWRJZGVudGl0eSIsInByYWNrTmV2ZXJBcnJpdmVkIiwic2VuZEluaXRpYWxQcm92aXNpb25hbFJlc3BvbnNlIiwic2VuZEFjY2VwdCIsImFja1JlcXVlc3QiLCJvbkFja1JlcXVlc3QiLCJieWVSZXF1ZXN0Iiwib25CeWVSZXF1ZXN0IiwiaW5mb1JlcXVlc3QiLCJvbkluZm9SZXF1ZXN0IiwiaW52aXRlUmVxdWVzdCIsIm9uSW52aXRlUmVxdWVzdCIsIm1lc3NhZ2VSZXF1ZXN0Iiwib25NZXNzYWdlUmVxdWVzdCIsIm5vdGlmeVJlcXVlc3QiLCJvbk5vdGlmeVJlcXVlc3QiLCJwcmFja1JlcXVlc3QiLCJvblByYWNrUmVxdWVzdCIsInJlZmVyUmVxdWVzdCIsIm9uUmVmZXJSZXF1ZXN0IiwiaGFuZGxlUmVzcG9uc2VFcnJvciIsInNlbmRQcm9ncmVzc1RyeWluZyIsInNpcEV4dGVuc2lvbjEwMHJlbCIsIlJlcXVpcmVkIiwic2VuZFByb2dyZXNzUmVsaWFibGVXYWl0Rm9yUHJhY2siLCJzZW5kUHJvZ3Jlc3MiLCJyZXNwb25zZU9wdGlvbnMiLCJ3YWl0Rm9yQXJyaXZhbE9mUHJhY2siLCJnZW5lcmF0ZVJlc3BvbnNlT2ZmZXJBbnN3ZXIiLCJzZW5kUHJvZ3Jlc3NXaXRoU0RQIiwicHJvZ3Jlc3NSZXNwb25zZSIsIm9mZmVyQW5zd2VyIiwicHJhY2tSZXNwb25zZSIsInByYWNrV2FpdFRpbWVvdXRUaW1lciIsInJlbDF4eFJldHJhbnNtaXNzaW9uVGltZXIiLCJoYW5kbGVQcmFja09mZmVyQW5zd2VyIiwicHJhY2tSZXNwb25zZUJvZHkiLCJwcmFja0Fycml2ZWQiLCJyZWwxeHhSZXRyYW5zbWlzc2lvbiIsInRyeWluZyIsIndhaXRpbmdGb3JQcmFja1Byb21pc2UiLCJ3YWl0aW5nRm9yUHJhY2tSZXNvbHZlIiwid2FpdGluZ0ZvclByYWNrUmVqZWN0IiwiZWFybHlNZWRpYSIsImVhcmx5TWVkaWFTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVycyIsImludml0ZVdpdGhvdXRTZHAiLCJpbnZpdGVyT3B0aW9ucyIsImFub255bW91cyIsIm1lc3NhZ2VPcHRpb25zIiwic2lwRXh0ZW5zaW9uUmVwbGFjZXMiLCJyZW5kZXJib2R5IiwicmVuZGVydHlwZSIsImRpc3Bvc2VFYXJseU1lZGlhIiwib3V0Z29pbmdJbnZpdGVSZXF1ZXN0IiwiY2FuY2VsUmVhc29uIiwiZ2V0Q2FuY2VsUmVhc29uIiwic2VuZEludml0ZSIsImludml0ZVJlc3BvbnNlIiwibm90aWZ5UmVmZXJlciIsInNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIiLCJub3RpZnkiLCJzZXRTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyIiwiZWFybHlNZWRpYURpYWxvZyIsImFja09wdGlvbnMiLCJyZXNwb25zZVJlbGlhYmxlIiwidGhhdCIsImVhcmx5TWVkaWFFc3RhYmxpc2hlZCIsIl9wdWJsaXNoZXJzIiwiX3JlZ2lzdGVyZXJzIiwiX3N1YnNjcmlwdGlvbnMiLCJTdG9wcGVkIiwidW5sb2FkTGlzdGVuZXIiLCJzdHJpcFVuZGVmaW5lZFByb3BlcnRpZXMiLCJoYWNrSXBJbkNvbnRhY3QiLCJvY3RldCIsImxvZ0J1aWx0aW5FbmFibGVkIiwibG9nQ29ubmVjdG9yIiwibG9nTGV2ZWwiLCJsb2dDb25maWd1cmF0aW9uIiwidHJhbnNwb3J0T3B0aW9ucyIsInJlY29ubmVjdGlvblRpbWVvdXREZXByZWNhdGVkIiwicmVjb25uZWN0aW9uVGltZW91dCIsInJlY29ubmVjdGlvbkRlbGF5IiwicmVjb25uZWN0aW9uQXR0ZW1wdHMiLCJ0cmFuc3BvcnRDb25zdHJ1Y3RvciIsImluaXRUcmFuc3BvcnRDYWxsYmFja3MiLCJpbml0Q29udGFjdCIsIl91c2VyQWdlbnRDb3JlIiwiaW5pdENvcmUiLCJhdXRvU3RhcnQiLCJhbGxvd0xlZ2FjeU5vdGlmaWNhdGlvbnMiLCJhdXRob3JpemF0aW9uSGExIiwiYXV0aG9yaXphdGlvblBhc3N3b3JkIiwiYXV0aG9yaXphdGlvblVzZXJuYW1lIiwiYXV0b1N0b3AiLCJjb250YWN0TmFtZSIsImNvbnRhY3RQYXJhbXMiLCJoYWNrQWxsb3dVbnJlZ2lzdGVyZWRPcHRpb25UYWdzIiwicHJlbG9hZGVkUm91dGVTZXQiLCJVbnN1cHBvcnRlZCIsInNpcEV4dGVuc2lvbkV4dHJhU3VwcG9ydGVkIiwiaXNDb25uZWN0ZWQiLCJjb25uZWN0IiwiU3RhcnRlZCIsImdvb2dsZUNocm9tZVBhY2thZ2VkQXBwIiwiY2hyb21lIiwiYXBwIiwicnVudGltZSIsIndpbmRvdyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwdWJsaXNoZXJzIiwicmVnaXN0ZXJlcnMiLCJzZXNzaW9ucyIsInN1YnNjcmlwdGlvbnMiLCJyZWNvbm5lY3Rpb25BdHRlbXB0IiwicmVjb25uZWN0IiwiYXR0ZW1wdFJlY29ubmVjdGlvbiIsImNvbnRhY3RUb1N0cmluZ09wdGlvbnMiLCJjb250YWN0U3RyaW5nIiwib3B0aW9uVGFnIiwiU2V0IiwidXNlckFnZW50Q29yZUNvbmZpZ3VyYXRpb24iLCJnZXRMb2dnZXJGYWN0b3J5IiwiaW52aXRhdGlvbiIsIl9vbkNhbmNlbCIsInRhcmdldERpYWxvZ0lkIiwidGFyZ2V0RGlhbG9nIiwidGFyZ2V0U2Vzc2lvbiIsImF1dG9TZW5kQW5Jbml0aWFsUHJvdmlzaW9uYWxSZXNwb25zZSIsImluY29taW5nUmVnaXN0ZXJSZXF1ZXN0Iiwib25SZWdpc3RlclJlcXVlc3QiLCJpbmNvbWluZ1N1YnNjcmliZVJlcXVlc3QiLCJvblN1YnNjcmliZVJlcXVlc3QiLCJvblRyYW5zcG9ydENvbm5lY3QiLCJvblRyYW5zcG9ydERpc2Nvbm5lY3QiLCJvblRyYW5zcG9ydE1lc3NhZ2UiLCJtZXNzYWdlU3RyaW5nIiwiaGFzTWluaW11bUhlYWRlcnMiLCJtYW5kYXRvcnlIZWFkZXJzIiwibGVuIiwiY29udGVudExlbmd0aCIsInJlY2VpdmVJbmNvbWluZ1JlcXVlc3RGcm9tVHJhbnNwb3J0IiwicmVjZWl2ZUluY29taW5nUmVzcG9uc2VGcm9tVHJhbnNwb3J0IiwiX2NvbnRhY3RzIiwiX3JldHJ5QWZ0ZXIiLCJfd2FpdGluZyIsIl93YWl0aW5nRXZlbnRFbWl0dGVyIiwiZGVmYXVsdFVzZXJBZ2VudFJlZ2lzdHJhciIsInJlZ2lzdHJhciIsImV4dHJhQ29udGFjdEhlYWRlclBhcmFtcyIsInJlZ0lkIiwiaW5zdGFuY2VJZCIsIm5ld1VVSUQiLCJkZWZhdWx0RXhwaXJlcyIsInJlZnJlc2hGcmVxdWVuY3kiLCJkZWZhdWx0UmVmcmVzaEZyZXF1ZW5jeSIsImRvQ2xvc2UiLCJ3YWl0aW5nIiwiUmVnaXN0ZXJlZCIsInN0YXRlQ2hhbmdlIiwidGVybWluYXRlZCIsInVucmVnaXN0ZXIiLCJ3YWl0aW5nQ2hhbmdlIiwic3RhdGVFcnJvciIsIndhaXRpbmdXYXJuaW5nIiwiZ2VuZXJhdGVDb250YWN0SGVhZGVyIiwid2FpdGluZ1RvZ2dsZSIsIm91dGdvaW5nUmVnaXN0ZXJSZXF1ZXN0IiwicmVnaXN0ZXIiLCJ1bnJlZ2lzdGVyZWQiLCJyZWdpc3RlcmVkIiwicmV0cnlBZnRlckR1cmF0aW9uIiwiTmFOIiwiaXNOYU4iLCJhbGwiLCJyZWdpc3RyYXRpb25UaW1lciIsInJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciIsImNsZWFyVGltZXJzIiwiVW5yZWdpc3RlcmVkIiwiYXR0ZW1wdGluZ1JlY29ubmVjdGlvbiIsImNvbm5lY3RSZXF1ZXN0ZWQiLCJoZWxkIiwibXV0ZWQiLCJyZWdpc3RlcmVyIiwicmVnaXN0ZXJSZXF1ZXN0ZWQiLCJ1c2VyQWdlbnRPcHRpb25zIiwibWFrZVVSSSIsIm9uU2VydmVyQ29ubmVjdCIsIm9uU2VydmVyRGlzY29ubmVjdCIsImhhbmd1cCIsInJlZmVycmFsSW52aXRlck9wdGlvbnMiLCJpbml0U2Vzc2lvbiIsIm9uQ2FsbFJlY2VpdmVkIiwib25NZXNzYWdlUmVjZWl2ZWQiLCJsb2NhbE1lZGlhU3RyZWFtIiwicmVtb3RlTWVkaWFTdHJlYW0iLCJyZWdpc3RlcmVyT3B0aW9ucyIsInJlZ2lzdGVyZXJSZWdpc3Rlck9wdGlvbnMiLCJvblJlZ2lzdGVyZWQiLCJvblVucmVnaXN0ZXJlZCIsInJlZ2lzdGVyZXJVbnJlZ2lzdGVyT3B0aW9ucyIsImRlc3RpbmF0aW9uIiwiaW52aXRlckludml0ZU9wdGlvbnMiLCJpbnZpdGF0aW9uQWNjZXB0T3B0aW9ucyIsInNldEhvbGQiLCJzZXRNdXRlIiwidG9uZSIsIm1lZGlhIiwibG9jYWwiLCJzcmNPYmplY3QiLCJwYXVzZSIsInJlbW90ZSIsImVuYWJsZSIsIm9uQ2FsbENyZWF0ZWQiLCJzZXR1cExvY2FsTWVkaWEiLCJzZXR1cFJlbW90ZU1lZGlhIiwib25DYWxsQW5zd2VyZWQiLCJjbGVhbnVwTWVkaWEiLCJvbkNhbGxIYW5ndXAiLCJvbkNhbGxEVE1GUmVjZWl2ZWQiLCJ0b25lUmVnRXhwIiwiZHVyYXRpb25SZWdFeHAiLCJlbmFibGVSZWNlaXZlclRyYWNrcyIsImVuYWJsZVNlbmRlclRyYWNrcyIsIm9uQ2FsbEhvbGQiLCJtdXRlIiwibWVkaWFFbGVtZW50Iiwidm9sdW1lIiwicGxheSIsIl9jIiwiX2QiLCJhdXRvcGxheSIsIm9uYWRkdHJhY2siLCJsb2FkIiwiVG9uZUZsYWciLCJnZXRBdWRpbyIsImVsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIkhUTUxBdWRpb0VsZW1lbnQiLCJnZXRCdXR0b24iLCJIVE1MQnV0dG9uRWxlbWVudCIsImdldEJ1dHRvbnMiLCJlbHMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiYnV0dG9ucyIsImdldERpdiIsIkhUTUxEaXZFbGVtZW50IiwiZ2V0SW5wdXQiLCJIVE1MSW5wdXRFbGVtZW50Iiwic2V0SW5wdXQiLCJnZXRTcGFuIiwiSFRNTFNwYW5FbGVtZW50IiwiZ2V0VmlkZW8iLCJIVE1MVmlkZW9FbGVtZW50IiwiZ2V0VXJsUGFyYW0iLCJyZWciLCJkZWNvZGVVUkkiLCJnZXRKc1NyY1BhcmFtIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiY3VycmVudFNjcmlwdCIsInNyYyIsImFzc2lnblN0cmVhbSIsImVsZW1lbnQiLCJvbnJlbW92ZXRyYWNrIiwiZ2V0SVAiLCJjYWxsYmFjayIsInRpbWVvdXRDYWxsYmFjayIsInJlY29kZSIsImhhbmRsZUNhbmRpZGF0ZSIsImNhbmRpZGF0ZSIsImlwX2lzTWF0Y2giLCJyZXMiLCJpdGVtIiwiU2ltcGxlVUFTdGF0ZSIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsImZ1bGZpbGxlZCIsInJlamVjdGVkIiwiZG9uZSIsImNvbmZpZyIsIl91c2VyRGVsZWdhdGUiLCJzaW1wbGVVc2VyIiwidXBkYXRlTGFzdFNlc3Npb25UcnlpbmciLCJVQV9JTkNPTUlORyIsInN0YXR1c0luZm8iLCJhY3RpdmVTZXNzaW9uIiwib2lkIiwib3JkZXJJZENvbWluZyIsInJlYWxwaG9uZSIsIl9ueFJlYWxQaG9uZSIsImV2ZW50cyIsInJlbW90ZU5hbWUiLCJhdXRvQW5zd2VyIiwiVUFfQ0FMTElOR19PVVQiLCJyZXRyaWVzIiwibmV4dFRhcmdldCIsIlVBX1RBTEtJTkciLCJjb25maXJtVHMiLCJlYXJseUFuc3dlciIsIm1hcmsiLCJVQV9DQUxMX0VORCIsIlVBX1JFQURZIiwibmV4dEhkcnMiLCJwbGFjZUNhbGwiLCJVQV9DT05ORUNURUQiLCJsYXN0SW5zdGFuY2UiLCJVQV9ESVNDT05ORUNURUQiLCJoYW5kbGVNZXNzYWdlIiwiaW5pdEJ5Q29uZmlnIiwiY2hlY2tGbGFnIiwiY2hlY2tBbmRSdW4iLCJzaXBJZCIsInZhbHVlT2YiLCJkYXRhSGRycyIsIm9yZGVySWQiLCJfaXNkaWQiLCJfc2VuZHNtcyIsImFzIiwibGFzdFNlc3Npb25UcnlpbmciLCJlbiIsImNhbGxpZCIsIm15U2lwSWQiLCJhY3RpdmVTZXNzaW9uU3RhdGUiLCJVQV9FUlJPUiIsIlVBX0lOSVQiLCJmYWlscyIsIk5YZ2V0VXNlckluZm8iLCJvbGRJbnN0IiwiZmluYWxseSIsImF1ZGlvRWxlbWVudElkIiwiYXVkaW9FbGVtZW50IiwiQXVkaW8iLCJwbGF5RWxlbWVudElkIiwicGxheUVsZW1lbnQiLCJ2aWRlb0xvY2FsRWxlbWVudCIsInZpZGVvTG9jYWxFbGVtZW50SWQiLCJ2aWRlb1JlbW90ZUVsZW1lbnQiLCJ2aWRlb1JlbW90ZUVsZW1lbnRJZCIsInBsYXlUb25lIiwibG9jYWxJUHMiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm54dHlwZSIsImluaXROeHdDYWxsIiwiVUFfTlhBUEkiLCJ3aXRoQ3JlZGVudGlhbHMiLCJvcGVuIiwibnh1c2VyIiwibnhwYXNzIiwiYXV0aEhkciIsImJ0b2EiLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VsZiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJyZXNwb25zZVRleHQiLCJyZXNwIiwib25lcnJvciIsIm5QaG9uZUNmZyIsImF1dGhOYW1lIiwidXNlck5hbWUiLCJueFVzZXJOYW1lIiwic2VjcmV0IiwiY2lwIiwiZG9tYWluIiwid3NzU2VydmVyIiwiZGlzcGxheW5hbWUiLCJzaXBkb21haW4iLCJzaXBhY2NvdW50Iiwic2lwcGFzc3dvcmQiLCJpc2RpZCIsInNlbmRzbXMiLCJ3c3NzZXJ2ZXIiLCJ3c3Nwb3J0IiwiZmx1c2hyZWciLCJidWlsZFNpbXBsZVVzZXIiLCJVQV9DT05ORUNUSU5HIiwiVUFfUkVHSVNURVJJTkciLCJzaXBDb25maWciLCJueHdWZXJEZXRhaWwiLCJueHdWZXIiLCJvYmplY3RJZCIsIlNpbXBsZVVzZXIiLCJhY3Rpb24iLCJsb29wIiwiUklOR0lOIiwiUklOR09VVCIsIkNPTk5FQ1RFRCIsIkhBTkdVUCIsIk9OTElORSIsIkNVU1RPTSIsImF1ZG9QYXRoIiwiYXVkaW9TcmNQYXRoIiwiYXVkaW9GaWxlTmFtZSIsInN0YXJ0c1dpdGgiLCJoZHJzIiwiY2FsbE9wdGlvbnMiLCJvcHQiLCJkZWNsaW5lIiwibHNpZCIsIlVBX0NBTExfRU5ESU5HIiwiZGlzT2JqIiwiY21kIiwiZGVsYXkiLCJ0b25lc3RyIiwic2VuZERUTUYiLCJjaGVja2VkIiwidW5ob2xkIiwiaXNNdXRlZCIsInVubXV0ZSIsImFicyIsInBhc3MiLCJwcm9maWxlIiwibnh3Q2FsbCIsImhhbmd1cENhbGwiLCJhbnN3ZXJDYWxsIiwib25vZmYiLCJob2xkQ2FsbCIsInNldFZvbHVtZSIsIm11dGVDYWxsIiwic2lsZW50Q2FsbCIsIl9fbmV4dF9vYmppZCIsImdldFRpbWUiLCJvYmoiLCJfX29ial9pZCIsIlJlZmxlY3RPd25LZXlzIiwiUiIsIlJlZmxlY3QiLCJSZWZsZWN0QXBwbHkiLCJhcmdzIiwiRnVuY3Rpb24iLCJvd25LZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsIk51bWJlcklzTmFOIiwiRXZlbnRFbWl0dGVyIiwiZW1pdHRlciIsImVycm9yTGlzdGVuZXIiLCJyZXNvbHZlciIsImFyZ3VtZW50cyIsImV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lciIsImZsYWdzIiwib24iLCJhZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlciIsIl9ldmVudHMiLCJfZXZlbnRzQ291bnQiLCJfbWF4TGlzdGVuZXJzIiwiZGVmYXVsdE1heExpc3RlbmVycyIsImNoZWNrTGlzdGVuZXIiLCJfZ2V0TWF4TGlzdGVuZXJzIiwiX2FkZExpc3RlbmVyIiwicHJlcGVuZCIsImV4aXN0aW5nIiwibmV3TGlzdGVuZXIiLCJ1bnNoaWZ0Iiwid2FybmVkIiwidyIsImNvdW50IiwiZmlyZWQiLCJ3cmFwRm4iLCJfb25jZVdyYXAiLCJ3cmFwcGVkIiwiX2xpc3RlbmVycyIsInVud3JhcCIsImV2bGlzdGVuZXIiLCJhcnIiLCJyZXQiLCJ1bndyYXBMaXN0ZW5lcnMiLCJhcnJheUNsb25lIiwibGlzdGVuZXJDb3VudCIsImNvcHkiLCJ3cmFwTGlzdGVuZXIiLCJhcmciLCJSYW5nZUVycm9yIiwiZ2V0UHJvdG90eXBlT2YiLCJzZXRNYXhMaXN0ZW5lcnMiLCJnZXRNYXhMaXN0ZW5lcnMiLCJkb0Vycm9yIiwiZXIiLCJjb250ZXh0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsIm9yaWdpbmFsTGlzdGVuZXIiLCJzaGlmdCIsInNwbGljZU9uZSIsIm9mZiIsInJlbW92ZUFsbExpc3RlbmVycyIsInJhd0xpc3RlbmVycyIsImV2ZW50TmFtZXMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxJQUNRLG1CQUFYRyxRQUF5QkEsT0FBT0MsSUFDOUNELE9BQU8sR0FBSUgsR0FDZSxpQkFBWkMsUUFDZEEsUUFBYSxJQUFJRCxJQUVqQkQsRUFBVSxJQUFJQyxJQVJoQixDQVNHSyxNQUFNLFdBQ1QsTyxZQ1RFLElBQUlDLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVQLFFBR25DLElBQUlDLEVBQVNJLEVBQWlCRSxHQUFZLENBQ3pDQyxFQUFHRCxFQUNIRSxHQUFHLEVBQ0hULFFBQVMsSUFVVixPQU5BVSxFQUFRSCxHQUFVSSxLQUFLVixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTTSxHQUcvREwsRUFBT1EsR0FBSSxFQUdKUixFQUFPRCxRQTBEZixPQXJEQU0sRUFBb0JNLEVBQUlGLEVBR3hCSixFQUFvQk8sRUFBSVIsRUFHeEJDLEVBQW9CUSxFQUFJLFNBQVNkLEVBQVNlLEVBQU1DLEdBQzNDVixFQUFvQlcsRUFBRWpCLEVBQVNlLElBQ2xDRyxPQUFPQyxlQUFlbkIsRUFBU2UsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFVixFQUFvQmdCLEVBQUksU0FBU3RCLEdBQ1gsb0JBQVh1QixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWVuQixFQUFTdUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlbkIsRUFBUyxhQUFjLENBQUV5QixPQUFPLEtBUXZEbkIsRUFBb0JvQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFB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NUIsRUFBTXNuQixRQUNyQixRQUFrQmhuQixJQUFkZ25CLEVBRVQsSUFBS2h1QixFQUFJZ3VCLEVBQVVscUIsT0FBUyxFQUFHOUQsR0FBSyxFQUFHQSxJQUNyQ0osS0FBS2tnQyxlQUFlcDVCLEVBQU1zbkIsRUFBVWh1QixJQUl4QyxPQUFPSixNQW9CYndsRCxFQUFheGpELFVBQVVvc0IsVUFBWSxTQUFtQnRuQixHQUNwRCxPQUFPcWdELEVBQVdubkQsS0FBTThHLEdBQU0sSUFHaEMwK0MsRUFBYXhqRCxVQUFVNG1ELGFBQWUsU0FBc0I5aEQsR0FDMUQsT0FBT3FnRCxFQUFXbm5ELEtBQU04RyxHQUFNLElBR2hDMCtDLEVBQWFrQyxjQUFnQixTQUFTakMsRUFBUzMrQyxHQUM3QyxNQUFxQyxtQkFBMUIyK0MsRUFBUWlDLGNBQ1ZqQyxFQUFRaUMsY0FBYzVnRCxHQUV0QjRnRCxFQUFjbm5ELEtBQUtrbEQsRUFBUzMrQyxJQUl2QzArQyxFQUFheGpELFVBQVUwbEQsY0FBZ0JBLEVBaUJ2Q2xDLEVBQWF4akQsVUFBVTZtRCxXQUFhLFdBQ2xDLE9BQU83b0QsS0FBS2ttRCxhQUFlLEVBQUlwQixFQUFlOWtELEtBQUtpbUQsU0FBVyIsImZpbGUiOiJueHdlYnJ0Yy12MTAuMTQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJOWFdcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiTlhXXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwiLyoqXG4gKiB7QGxpbmsgU2Vzc2lvbn0gc3RhdGUuXG4gKlxuICogQHJlbWFya3NcbiAqIFRoZSB7QGxpbmsgU2Vzc2lvbn0gYmVoYXZlcyBpbiBhIGRldGVybWluaXN0aWMgbWFubmVyIGFjY29yZGluZyB0byB0aGUgZm9sbG93aW5nXG4gKiBGaW5pdGUgU3RhdGUgTWFjaGluZSAoRlNNKS5cbiAqIGBgYHR4dFxuICogICAgICAgICAgICAgICAgICAgX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cbiAqICAgICAgICAgICAgICAgICAgfCAgX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18gICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICB8IHwgICAgICAgICAgICBfX19fX19fX19fX19fX19fX19fX19fX19fX19fICAgIHwgICAgICAgICAgICB8XG4gKiBTZXNzaW9uICAgICAgICAgIHwgfCAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICAgdiAgICAgICAgICAgIHZcbiAqIENvbnN0cnVjdGVkIC0+IEluaXRpYWwgLT4gRXN0YWJsaXNoaW5nIC0+IEVzdGFibGlzaGVkIC0+IFRlcm1pbmF0aW5nIC0+IFRlcm1pbmF0ZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgfF9fX19fX19fX19fX19fX19fX19fX19fX19fX14gICBeXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19ffFxuICogYGBgXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB2YXIgU2Vzc2lvblN0YXRlO1xuKGZ1bmN0aW9uIChTZXNzaW9uU3RhdGUpIHtcbiAgICAvKipcbiAgICAgKiBJZiBgSW52aXRlcmAsIElOVklURSBub3Qgc2VudCB5ZXQuXG4gICAgICogSWYgYEludml0YXRpb25gLCByZWNlaXZlZCBJTlZJVEUgKGJ1dCBubyBmaW5hbCByZXNwb25zZSBzZW50IHlldCkuXG4gICAgICovXG4gICAgU2Vzc2lvblN0YXRlW1wiSW5pdGlhbFwiXSA9IFwiSW5pdGlhbFwiO1xuICAgIC8qKlxuICAgICAqIElmIGBJbnZpdGVyYCwgc2VudCBJTlZJVEUgYW5kIHdhaXRpbmcgZm9yIGEgZmluYWwgcmVzcG9uc2UuXG4gICAgICogSWYgYEludml0YXRpb25gLCByZWNlaXZlZCBJTlZJVEUgYW5kIGF0dGVtcHRpbmcgdG8gc2VuZCAyMDAgZmluYWwgcmVzcG9uc2UgKGJ1dCBoYXMgbm90IHNlbnQgaXQgeWV0KS5cbiAgICAgKi9cbiAgICBTZXNzaW9uU3RhdGVbXCJFc3RhYmxpc2hpbmdcIl0gPSBcIkVzdGFibGlzaGluZ1wiO1xuICAgIC8qKlxuICAgICAqIElmIGBJbnZpdGVyYCwgc2VudCBJTlZJVEUgYW5kIHJlY2VpdmVkIDIwMCBmaW5hbCByZXNwb25zZSBhbmQgc2VudCBBQ0suXG4gICAgICogSWYgYEludml0YXRpb25gLCByZWNlaXZlZCBJTlZJVEUgYW5kIHNlbnQgMjAwIGZpbmFsIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIFNlc3Npb25TdGF0ZVtcIkVzdGFibGlzaGVkXCJdID0gXCJFc3RhYmxpc2hlZFwiO1xuICAgIC8qKlxuICAgICAqIElmIGBJbnZpdGVyYCwgc2VudCBJTlZJVEUsIHNlbnQgQ0FOQ0VMIGFuZCBub3cgd2FpdGluZyBmb3IgNDg3IGZpbmFsIHJlc3BvbnNlIHRvIEFDSyAob3IgMjAwIHRvIEFDSyAmIEJZRSkuXG4gICAgICogSWYgYEludml0YXRpb25gLCByZWNlaXZlZCBJTlZJVEUsIHNlbnQgMjAwIGZpbmFsIHJlc3BvbnNlIGFuZCBub3cgd2FpdGluZyBvbiBBQ0sgYW5kIHVwb24gcmVjZWlwdCB3aWxsIGF0dGVtcHQgQllFXG4gICAgICogKGFzIHRoZSBwcm90b2NvbCBzcGVjaWZpY2F0aW9uIHJlcXVpcmVzLCBiZWZvcmUgc2VuZGluZyBhIEJZRSB3ZSBtdXN0IHJlY2VpdmUgdGhlIEFDSyAtIHNvIHdlIGFyZSB3YWl0aW5nKS5cbiAgICAgKi9cbiAgICBTZXNzaW9uU3RhdGVbXCJUZXJtaW5hdGluZ1wiXSA9IFwiVGVybWluYXRpbmdcIjtcbiAgICAvKipcbiAgICAgKiBJZiBgSW52aXRlcmAsIHNlbnQgSU5WSVRFIGFuZCByZWNlaXZlZCBub24tMjAwIGZpbmFsIHJlc3BvbnNlIChvciBzZW50L3JlY2VpdmVkIEJZRSBhZnRlciByZWNlaXZpbmcgMjAwKS5cbiAgICAgKiBJZiBgSW52aXRhdGlvbmAsIHJlY2VpdmVkIElOVklURSBhbmQgc2VudCBub24tMjAwIGZpbmFsIHJlc3BvbnNlIChvciBzZW50L3JlY2VpdmVkIEJZRSBhZnRlciBzZW5kaW5nIDIwMCkuXG4gICAgICovXG4gICAgU2Vzc2lvblN0YXRlW1wiVGVybWluYXRlZFwiXSA9IFwiVGVybWluYXRlZFwiO1xufSkoU2Vzc2lvblN0YXRlIHx8IChTZXNzaW9uU3RhdGUgPSB7fSkpO1xuIiwiLyoqXG4gKiBTSVAgZXh0ZW5zaW9uIHN1cHBvcnQgbGV2ZWwuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB2YXIgU0lQRXh0ZW5zaW9uO1xuKGZ1bmN0aW9uIChTSVBFeHRlbnNpb24pIHtcbiAgICBTSVBFeHRlbnNpb25bXCJSZXF1aXJlZFwiXSA9IFwiUmVxdWlyZWRcIjtcbiAgICBTSVBFeHRlbnNpb25bXCJTdXBwb3J0ZWRcIl0gPSBcIlN1cHBvcnRlZFwiO1xuICAgIFNJUEV4dGVuc2lvbltcIlVuc3VwcG9ydGVkXCJdID0gXCJVbnN1cHBvcnRlZFwiO1xufSkoU0lQRXh0ZW5zaW9uIHx8IChTSVBFeHRlbnNpb24gPSB7fSkpO1xuLyoqXG4gKiBTSVAgT3B0aW9uIFRhZ3NcbiAqIEByZW1hcmtzXG4gKiBodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL3NpcC1wYXJhbWV0ZXJzL3NpcC1wYXJhbWV0ZXJzLnhodG1sI3NpcC1wYXJhbWV0ZXJzLTRcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IFVzZXJBZ2VudFJlZ2lzdGVyZWRPcHRpb25UYWdzID0ge1xuICAgIFwiMTAwcmVsXCI6IHRydWUsXG4gICAgXCIxOTlcIjogdHJ1ZSxcbiAgICBhbnN3ZXJtb2RlOiB0cnVlLFxuICAgIFwiZWFybHktc2Vzc2lvblwiOiB0cnVlLFxuICAgIGV2ZW50bGlzdDogdHJ1ZSxcbiAgICBleHBsaWNpdHN1YjogdHJ1ZSxcbiAgICBcImZyb20tY2hhbmdlXCI6IHRydWUsXG4gICAgXCJnZW9sb2NhdGlvbi1odHRwXCI6IHRydWUsXG4gICAgXCJnZW9sb2NhdGlvbi1zaXBcIjogdHJ1ZSxcbiAgICBnaW46IHRydWUsXG4gICAgZ3J1dTogdHJ1ZSxcbiAgICBoaXN0aW5mbzogdHJ1ZSxcbiAgICBpY2U6IHRydWUsXG4gICAgam9pbjogdHJ1ZSxcbiAgICBcIm11bHRpcGxlLXJlZmVyXCI6IHRydWUsXG4gICAgbm9yZWZlcnN1YjogdHJ1ZSxcbiAgICBub3N1YjogdHJ1ZSxcbiAgICBvdXRib3VuZDogdHJ1ZSxcbiAgICBwYXRoOiB0cnVlLFxuICAgIHBvbGljeTogdHJ1ZSxcbiAgICBwcmVjb25kaXRpb246IHRydWUsXG4gICAgcHJlZjogdHJ1ZSxcbiAgICBwcml2YWN5OiB0cnVlLFxuICAgIFwicmVjaXBpZW50LWxpc3QtaW52aXRlXCI6IHRydWUsXG4gICAgXCJyZWNpcGllbnQtbGlzdC1tZXNzYWdlXCI6IHRydWUsXG4gICAgXCJyZWNpcGllbnQtbGlzdC1zdWJzY3JpYmVcIjogdHJ1ZSxcbiAgICByZXBsYWNlczogdHJ1ZSxcbiAgICBcInJlc291cmNlLXByaW9yaXR5XCI6IHRydWUsXG4gICAgXCJzZHAtYW5hdFwiOiB0cnVlLFxuICAgIFwic2VjLWFncmVlXCI6IHRydWUsXG4gICAgdGRpYWxvZzogdHJ1ZSxcbiAgICB0aW1lcjogdHJ1ZSxcbiAgICB1dWk6IHRydWUgLy8gUkZDIDc0MzNcbn07XG4iLCJjb25zdCBzdHJpcFBheWxvYWQgPSAoc2RwLCBwYXlsb2FkKSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBtZWRpYURlc2NzID0gW107XG4gICAgY29uc3QgbGluZXMgPSBzZHAuc3BsaXQoL1xcclxcbi8pO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgbGV0IGN1cnJlbnRNZWRpYURlc2M7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7KSB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgICAgaWYgKC9ebT0oPzphdWRpb3x2aWRlbykvLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIGN1cnJlbnRNZWRpYURlc2MgPSB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgICAgc3RyaXBwZWQ6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWVkaWFEZXNjcy5wdXNoKGN1cnJlbnRNZWRpYURlc2MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN1cnJlbnRNZWRpYURlc2MpIHtcbiAgICAgICAgICAgIGNvbnN0IHJ0cG1hcCA9IC9eYT1ydHBtYXA6KFxcZCspIChbXi9dKylcXC8vLmV4ZWMobGluZSk7XG4gICAgICAgICAgICBpZiAocnRwbWFwICYmIHBheWxvYWQgPT09IHJ0cG1hcFsyXSkge1xuICAgICAgICAgICAgICAgIGxpbmVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50TWVkaWFEZXNjLnN0cmlwcGVkLnB1c2gocnRwbWFwWzFdKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gRG9uJ3QgaW5jcmVtZW50ICdpJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgZm9yIChjb25zdCBtZWRpYURlc2Mgb2YgbWVkaWFEZXNjcykge1xuICAgICAgICBjb25zdCBtbGluZSA9IGxpbmVzW21lZGlhRGVzYy5pbmRleF0uc3BsaXQoXCIgXCIpO1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpcnN0IDMgcGFyYW1ldGVycyBvZiB0aGUgbWxpbmUuIFRoZSBjb2RlYyBpbmZvcm1hdGlvbiBpcyBhZnRlciB0aGF0XG4gICAgICAgIGZvciAobGV0IGogPSAzOyBqIDwgbWxpbmUubGVuZ3RoOykge1xuICAgICAgICAgICAgaWYgKG1lZGlhRGVzYy5zdHJpcHBlZC5pbmRleE9mKG1saW5lW2pdKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBtbGluZS5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBqKys7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXNbbWVkaWFEZXNjLmluZGV4XSA9IG1saW5lLmpvaW4oXCIgXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbGluZXMuam9pbihcIlxcclxcblwiKTtcbn07XG5jb25zdCBzdHJpcE1lZGlhRGVzY3JpcHRpb24gPSAoc2RwLCBkZXNjcmlwdGlvbikgPT4ge1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uUmVnRXhwID0gbmV3IFJlZ0V4cChcIm09XCIgKyBkZXNjcmlwdGlvbiArIFwiLiokXCIsIFwiZ21cIik7XG4gICAgY29uc3QgZ3JvdXBSZWdFeHAgPSBuZXcgUmVnRXhwKFwiXmE9Z3JvdXA6LiokXCIsIFwiZ21cIik7XG4gICAgaWYgKGRlc2NyaXB0aW9uUmVnRXhwLnRlc3Qoc2RwKSkge1xuICAgICAgICBsZXQgbWlkTGluZVRvUmVtb3ZlO1xuICAgICAgICBzZHAgPSBzZHAuc3BsaXQoL15tPS9nbSkuZmlsdGVyKChzZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2VjdGlvbi5zdWJzdHIoMCwgZGVzY3JpcHRpb24ubGVuZ3RoKSA9PT0gZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICBtaWRMaW5lVG9SZW1vdmUgPSBzZWN0aW9uLm1hdGNoKC9eYT1taWQ6LiokL2dtKTtcbiAgICAgICAgICAgICAgICBpZiAobWlkTGluZVRvUmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSBtaWRMaW5lVG9SZW1vdmVbMF0ubWF0Y2goLzouKyQvZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaWRMaW5lVG9SZW1vdmUgPSBzdGVwWzBdLnN1YnN0cigxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSkuam9pbihcIm09XCIpO1xuICAgICAgICBjb25zdCBncm91cExpbmUgPSBzZHAubWF0Y2goZ3JvdXBSZWdFeHApO1xuICAgICAgICBpZiAoZ3JvdXBMaW5lICYmIGdyb3VwTGluZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGxldCBncm91cExpbmVQb3J0aW9uID0gZ3JvdXBMaW5lWzBdO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtZXNjYXBlXG4gICAgICAgICAgICBjb25zdCBncm91cFJlZ0V4cFJlcGxhY2UgPSBuZXcgUmVnRXhwKFwiXFwgKlwiICsgbWlkTGluZVRvUmVtb3ZlICsgXCJbXlxcIF0qXCIsIFwiZ1wiKTtcbiAgICAgICAgICAgIGdyb3VwTGluZVBvcnRpb24gPSBncm91cExpbmVQb3J0aW9uLnJlcGxhY2UoZ3JvdXBSZWdFeHBSZXBsYWNlLCBcIlwiKTtcbiAgICAgICAgICAgIHNkcCA9IHNkcC5zcGxpdChncm91cFJlZ0V4cCkuam9pbihncm91cExpbmVQb3J0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2RwO1xufTtcbi8qKlxuICogTW9kaWZpZXIuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpcFRjcENhbmRpZGF0ZXMoZGVzY3JpcHRpb24pIHtcbiAgICBkZXNjcmlwdGlvbi5zZHAgPSAoZGVzY3JpcHRpb24uc2RwIHx8IFwiXCIpLnJlcGxhY2UoL15hPWNhbmRpZGF0ZTpcXGQrIFxcZCsgdGNwIC4qP1xcclxcbi9pbWcsIFwiXCIpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVzY3JpcHRpb24pO1xufVxuLyoqXG4gKiBNb2RpZmllci5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwVGVsZXBob25lRXZlbnQoZGVzY3JpcHRpb24pIHtcbiAgICBkZXNjcmlwdGlvbi5zZHAgPSBzdHJpcFBheWxvYWQoZGVzY3JpcHRpb24uc2RwIHx8IFwiXCIsIFwidGVsZXBob25lLWV2ZW50XCIpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVzY3JpcHRpb24pO1xufVxuLyoqXG4gKiBNb2RpZmllci5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuSml0c2lTZHBJbWFnZWF0dHIoZGVzY3JpcHRpb24pIHtcbiAgICBkZXNjcmlwdGlvbi5zZHAgPSAoZGVzY3JpcHRpb24uc2RwIHx8IFwiXCIpLnJlcGxhY2UoL14oYT1pbWFnZWF0dHI6Lio/KSh4fHkpPVxcWzAtL2dtLCBcIiQxJDI9WzE6XCIpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVzY3JpcHRpb24pO1xufVxuLyoqXG4gKiBNb2RpZmllci5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwRzcyMihkZXNjcmlwdGlvbikge1xuICAgIGRlc2NyaXB0aW9uLnNkcCA9IHN0cmlwUGF5bG9hZChkZXNjcmlwdGlvbi5zZHAgfHwgXCJcIiwgXCJHNzIyXCIpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVzY3JpcHRpb24pO1xufVxuLyoqXG4gKiBNb2RpZmllci5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwUnRwUGF5bG9hZChwYXlsb2FkKSB7XG4gICAgcmV0dXJuIChkZXNjcmlwdGlvbikgPT4ge1xuICAgICAgICBkZXNjcmlwdGlvbi5zZHAgPSBzdHJpcFBheWxvYWQoZGVzY3JpcHRpb24uc2RwIHx8IFwiXCIsIHBheWxvYWQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRlc2NyaXB0aW9uKTtcbiAgICB9O1xufVxuLyoqXG4gKiBNb2RpZmllci5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwVmlkZW8oZGVzY3JpcHRpb24pIHtcbiAgICBkZXNjcmlwdGlvbi5zZHAgPSBzdHJpcE1lZGlhRGVzY3JpcHRpb24oZGVzY3JpcHRpb24uc2RwIHx8IFwiXCIsIFwidmlkZW9cIik7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZXNjcmlwdGlvbik7XG59XG4vKipcbiAqIE1vZGlmaWVyLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkTWlkTGluZXMoZGVzY3JpcHRpb24pIHtcbiAgICBsZXQgc2RwID0gZGVzY3JpcHRpb24uc2RwIHx8IFwiXCI7XG4gICAgaWYgKHNkcC5zZWFyY2goL15hPW1pZC4qJC9nbSkgPT09IC0xKSB7XG4gICAgICAgIGNvbnN0IG1saW5lcyA9IHNkcC5tYXRjaCgvXm09LiokL2dtKTtcbiAgICAgICAgY29uc3Qgc2RwQXJyYXkgPSBzZHAuc3BsaXQoL15tPS4qJC9nbSk7XG4gICAgICAgIGlmIChtbGluZXMpIHtcbiAgICAgICAgICAgIG1saW5lcy5mb3JFYWNoKChlbGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICBtbGluZXNbaWR4XSA9IGVsZW0gKyBcIlxcbmE9bWlkOlwiICsgaWR4O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2RwQXJyYXkuZm9yRWFjaCgoZWxlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICBpZiAobWxpbmVzICYmIG1saW5lc1tpZHhdKSB7XG4gICAgICAgICAgICAgICAgc2RwQXJyYXlbaWR4XSA9IGVsZW0gKyBtbGluZXNbaWR4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNkcCA9IHNkcEFycmF5LmpvaW4oXCJcIik7XG4gICAgICAgIGRlc2NyaXB0aW9uLnNkcCA9IHNkcDtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZXNjcmlwdGlvbik7XG59XG4vKipcbiAqIFRoZSBtb2RpZmllciB0aGF0IHNob3VsZCBiZSB1c2VkIHdoZW4gdGhlIHNlc3Npb24gd291bGQgbGlrZSB0byBwbGFjZSB0aGUgY2FsbCBvbiBob2xkLlxuICogQHBhcmFtIGRlc2NyaXB0aW9uIC0gVGhlIGRlc2NyaXB0aW9uIHRoYXQgd2lsbCBiZSBtb2RpZmllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhvbGRNb2RpZmllcihkZXNjcmlwdGlvbikge1xuICAgIGlmICghZGVzY3JpcHRpb24uc2RwIHx8ICFkZXNjcmlwdGlvbi50eXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgU0RQXCIpO1xuICAgIH1cbiAgICBsZXQgc2RwID0gZGVzY3JpcHRpb24uc2RwO1xuICAgIGNvbnN0IHR5cGUgPSBkZXNjcmlwdGlvbi50eXBlO1xuICAgIGlmIChzZHApIHtcbiAgICAgICAgaWYgKCEvYT0oc2VuZHJlY3Z8c2VuZG9ubHl8cmVjdm9ubHl8aW5hY3RpdmUpLy50ZXN0KHNkcCkpIHtcbiAgICAgICAgICAgIHNkcCA9IHNkcC5yZXBsYWNlKC8obT1bXlxccl0qXFxyXFxuKS9nLCBcIiQxYT1zZW5kb25seVxcclxcblwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNkcCA9IHNkcC5yZXBsYWNlKC9hPXNlbmRyZWN2XFxyXFxuL2csIFwiYT1zZW5kb25seVxcclxcblwiKTtcbiAgICAgICAgICAgIHNkcCA9IHNkcC5yZXBsYWNlKC9hPXJlY3Zvbmx5XFxyXFxuL2csIFwiYT1pbmFjdGl2ZVxcclxcblwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgc2RwLCB0eXBlIH0pO1xufVxuIiwiLyoqXG4gKiBGdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgTWVkaWFTdHJlYW1GYWN0b3J5LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdE1lZGlhU3RyZWFtRmFjdG9yeSgpIHtcbiAgICByZXR1cm4gKGNvbnN0cmFpbnRzKSA9PiB7XG4gICAgICAgIC8vIGlmIG5vIGF1ZGlvIG9yIHZpZGVvLCByZXR1cm4gYSBtZWRpYSBzdHJlYW0gd2l0aG91dCB0cmFja3NcbiAgICAgICAgaWYgKCFjb25zdHJhaW50cy5hdWRpbyAmJiAhY29uc3RyYWludHMudmlkZW8pIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IE1lZGlhU3RyZWFtKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGdldFVzZXJNZWRpYSgpIGlzIGEgcG93ZXJmdWwgZmVhdHVyZSB3aGljaCBjYW4gb25seSBiZSB1c2VkIGluIHNlY3VyZSBjb250ZXh0czsgaW4gaW5zZWN1cmUgY29udGV4dHMsXG4gICAgICAgIC8vIG5hdmlnYXRvci5tZWRpYURldmljZXMgaXMgdW5kZWZpbmVkLCBwcmV2ZW50aW5nIGFjY2VzcyB0byBnZXRVc2VyTWVkaWEoKS4gQSBzZWN1cmUgY29udGV4dCBpcywgaW4gc2hvcnQsXG4gICAgICAgIC8vIGEgcGFnZSBsb2FkZWQgdXNpbmcgSFRUUFMgb3IgdGhlIGZpbGU6Ly8vIFVSTCBzY2hlbWUsIG9yIGEgcGFnZSBsb2FkZWQgZnJvbSBsb2NhbGhvc3QuXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYURldmljZXMvZ2V0VXNlck1lZGlhI1ByaXZhY3lfYW5kX3NlY3VyaXR5XG4gICAgICAgIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJNZWRpYSBkZXZpY2VzIG5vdCBhdmFpbGFibGUgaW4gaW5zZWN1cmUgY29udGV4dHMuXCIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuY2FsbChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLCBjb25zdHJhaW50cyk7XG4gICAgfTtcbn1cbiIsIi8qKlxuICogRnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhbiBSVENDb25maWd1cmF0aW9uLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdFBlZXJDb25uZWN0aW9uQ29uZmlndXJhdGlvbigpIHtcbiAgICBjb25zdCBjb25maWd1cmF0aW9uID0ge1xuICAgICAgICBidW5kbGVQb2xpY3k6IFwiYmFsYW5jZWRcIixcbiAgICAgICAgY2VydGlmaWNhdGVzOiB1bmRlZmluZWQsXG4gICAgICAgIGljZUNhbmRpZGF0ZVBvb2xTaXplOiAwLFxuICAgICAgICBpY2VTZXJ2ZXJzOiBbeyB1cmxzOiBcInN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDJcIiB9XSxcbiAgICAgICAgaWNlVHJhbnNwb3J0UG9saWN5OiBcImFsbFwiLFxuICAgICAgICBwZWVySWRlbnRpdHk6IHVuZGVmaW5lZCxcbiAgICAgICAgcnRjcE11eFBvbGljeTogXCJyZXF1aXJlXCJcbiAgICB9O1xuICAgIHJldHVybiBjb25maWd1cmF0aW9uO1xufVxuIiwiLyoqXG4gKiBBIGJhc2UgY2xhc3MgaW1wbGVtZW50aW5nIGEgV2ViUlRDIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBmb3Igc2lwLmpzLlxuICogQHJlbWFya3NcbiAqIEl0IGlzIGV4cGVjdGVkL2ludGVuZGVkIHRvIGJlIGV4dGVuZGVkIGJ5IHNwZWNpZmljIFdlYlJUQyBiYXNlZCBhcHBsaWNhdGlvbnMuXG4gKiBAcHJpdmF0ZVJlbWFya3NcbiAqIFNvIGRvIG5vdCBwdXQgYXBwbGljYXRpb24gc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gaW4gaGVyZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIGxvZ2dlciAtIEEgbG9nZ2VyXG4gICAgICogQHBhcmFtIG1lZGlhU3RyZWFtRmFjdG9yeSAtIEEgZmFjdG9yeSB0byBwcm92aWRlIGEgTWVkaWFTdHJlYW1cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgcGFzc2VkIGZyb20gdGhlIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZUZhY3RvcnlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2dnZXIsIG1lZGlhU3RyZWFtRmFjdG9yeSwgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5jb25zdHJ1Y3RvclwiKTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgICAgIHRoaXMubWVkaWFTdHJlYW1GYWN0b3J5ID0gbWVkaWFTdHJlYW1GYWN0b3J5O1xuICAgICAgICB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJDb25maWd1cmF0aW9uID0gc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckNvbmZpZ3VyYXRpb247XG4gICAgICAgIHRoaXMuX2xvY2FsTWVkaWFTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgdGhpcy5fcmVtb3RlTWVkaWFTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckNvbmZpZ3VyYXRpb24gPT09IG51bGwgfHwgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckNvbmZpZ3VyYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJDb25maWd1cmF0aW9uLnBlZXJDb25uZWN0aW9uQ29uZmlndXJhdGlvbik7XG4gICAgICAgIHRoaXMuaW5pdFBlZXJDb25uZWN0aW9uRXZlbnRIYW5kbGVycygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgbWVkaWEgc3RyZWFtIGN1cnJlbnRseSBiZWluZyBzZW50LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGUgbG9jYWwgbWVkaWEgc3RyZWFtIGluaXRpYWxseSBoYXMgbm8gdHJhY2tzLCBzbyB0aGUgcHJlc2VuY2Ugb2YgdHJhY2tzXG4gICAgICogc2hvdWxkIG5vdCBiZSBhc3N1bWVkLiBGdXJ0aGVybW9yZSwgdHJhY2tzIG1heSBiZSBhZGRlZCBvciByZW1vdmVkIGlmIHRoZVxuICAgICAqIGxvY2FsIG1lZGlhIGNoYW5nZXMgLSBmb3IgZXhhbXBsZSwgb24gdXBncmFkZSBmcm9tIGF1ZGlvIG9ubHkgdG8gYSB2aWRlbyBzZXNzaW9uLlxuICAgICAqIEF0IGFueSBnaXZlbiB0aW1lIHRoZXJlIHdpbGwgYmUgYXQgbW9zdCBvbmUgYXVkaW8gdHJhY2sgYW5kIG9uZSB2aWRlbyB0cmFja1xuICAgICAqIChpdCdzIHBvc3NpYmxlIHRoYXQgdGhpcyByZXN0cmljdGlvbiBtYXkgbm90IGFwcGx5IHRvIHN1Yi1jbGFzc2VzKS5cbiAgICAgKiBVc2UgYE1lZGlhU3RyZWFtLm9uYWRkdHJhY2tgIG9yIGFkZCBhIGxpc3RlbmVyIGZvciB0aGUgYGFkZHRyYWNrYCBldmVudFxuICAgICAqIHRvIGRldGVjdCB3aGVuIGEgbmV3IHRyYWNrIGJlY29tZXMgYXZhaWxhYmxlOlxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYVN0cmVhbS9vbmFkZHRyYWNrXG4gICAgICovXG4gICAgZ2V0IGxvY2FsTWVkaWFTdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2NhbE1lZGlhU3RyZWFtO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmVtb3RlIG1lZGlhIHN0cmVhbSBjdXJyZW50bHkgYmVpbmcgcmVjZWl2ZWQuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoZSByZW1vdGUgbWVkaWEgc3RyZWFtIGluaXRpYWxseSBoYXMgbm8gdHJhY2tzLCBzbyB0aGUgcHJlc2VuY2Ugb2YgdHJhY2tzXG4gICAgICogc2hvdWxkIG5vdCBiZSBhc3N1bWVkLiBGdXJ0aGVybW9yZSwgdHJhY2tzIG1heSBiZSBhZGRlZCBvciByZW1vdmVkIGlmIHRoZVxuICAgICAqIHJlbW90ZSBtZWRpYSBjaGFuZ2VzIC0gZm9yIGV4YW1wbGUsIG9uIHVwZ3JhZGUgZnJvbSBhdWRpbyBvbmx5IHRvIGEgdmlkZW8gc2Vzc2lvbi5cbiAgICAgKiBBdCBhbnkgZ2l2ZW4gdGltZSB0aGVyZSB3aWxsIGJlIGF0IG1vc3Qgb25lIGF1ZGlvIHRyYWNrIGFuZCBvbmUgdmlkZW8gdHJhY2tcbiAgICAgKiAoaXQncyBwb3NzaWJsZSB0aGF0IHRoaXMgcmVzdHJpY3Rpb24gbWF5IG5vdCBhcHBseSB0byBzdWItY2xhc3NlcykuXG4gICAgICogVXNlIGBNZWRpYVN0cmVhbS5vbmFkZHRyYWNrYCBvciBhZGQgYSBsaXN0ZW5lciBmb3IgdGhlIGBhZGR0cmFja2AgZXZlbnRcbiAgICAgKiB0byBkZXRlY3Qgd2hlbiBhIG5ldyB0cmFjayBiZWNvbWVzIGF2YWlsYWJsZTpcbiAgICAgKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTWVkaWFTdHJlYW0vb25hZGR0cmFja1xuICAgICAqL1xuICAgIGdldCByZW1vdGVNZWRpYVN0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbW90ZU1lZGlhU3RyZWFtO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZGF0YSBjaGFubmVsLiBVbmRlZmluZWQgYmVmb3JlIGl0IGlzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgZ2V0IGRhdGFDaGFubmVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YUNoYW5uZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBwZWVyIGNvbm5lY3Rpb24uIFVuZGVmaW5lZCBpZiBwZWVyIGNvbm5lY3Rpb24gaGFzIGNsb3NlZC5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogV2hpbGUgYWNjZXNzIHRvIHRoZSB1bmRlcmx5aW5nIGBSVENQZWVyQ29ubmVjdGlvbmAgaXMgcHJvdmlkZWQsIG5vdGUgdGhhdFxuICAgICAqIHVzaW5nIG1ldGhvZHMgd2l0aCBtb2RpZnkgaXQgbWF5IGJyZWFrIHRoZSBvcGVyYXRpb24gb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBJbiBwYXJ0aWN1bGFyLCB0aGlzIGNsYXNzIGRlcGVuZHMgb24gZXhjbHVzaXZlIGFjY2VzcyB0byB0aGVcbiAgICAgKiBldmVudCBoYW5kbGVyIHByb3BlcnRpZXMuIElmIHlvdSBuZWVkIGFjY2VzcyB0byB0aGUgcGVlciBjb25uZWN0aW9uXG4gICAgICogZXZlbnRzLCBlaXRoZXIgcmVnaXN0ZXIgZm9yIGV2ZW50cyB1c2luZyBgYWRkRXZlbnRMaXN0ZW5lcigpYCBvblxuICAgICAqIHRoZSBgUlRDUGVlckNvbm5lY3Rpb25gIG9yIHNldCB0aGUgYHBlZXJDb25uZWN0aW9uRGVsZWdhdGVgIG9uXG4gICAgICogdGhpcyBgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcmAuXG4gICAgICovXG4gICAgZ2V0IHBlZXJDb25uZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVlckNvbm5lY3Rpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgZGVsZWdhdGUgd2hpY2ggcHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBwZWVyIGNvbm5lY3Rpb24gZXZlbnQgaGFuZGxlcnMuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFNldHRpbmcgdGhlIHBlZXIgY29ubmVjdGlvbiBldmVudCBoYW5kbGVycyBkaXJlY3RseSBpcyBub3Qgc3VwcG9ydGVkXG4gICAgICogYW5kIG1heSBicmVhayB0aGlzIGNsYXNzLiBBcyB0aGlzIGNsYXNzIGRlcGVuZHMgb24gZXhjbHVzaXZlIGFjY2Vzc1xuICAgICAqIHRvIHRoZW0sIGEgZGVsZWdhdGUgbWF5IGJlIHNldCB3aGljaCBwcm92aWRlcyBhbHRlcm5hdGl2ZSBhY2Nlc3MgdG9cbiAgICAgKiB0aGUgZXZlbnQgaGFuZGxlcnMgaW4gYSBmYXNoaW9uIHdoaWNoIGlzIHN1cHBvcnRlZC5cbiAgICAgKi9cbiAgICBnZXQgcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGU7XG4gICAgfVxuICAgIHNldCBwZWVyQ29ubmVjdGlvbkRlbGVnYXRlKGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB9XG4gICAgLy8gVGhlIGFkZHRyYWNrIGV2ZW50IGRvZXMgbm90IGdldCBmaXJlZCB3aGVuIEphdmFTY3JpcHQgY29kZSBleHBsaWNpdGx5IGFkZHMgdHJhY2tzIHRvIHRoZSBzdHJlYW0gKGJ5IGNhbGxpbmcgYWRkVHJhY2soKSkuXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01lZGlhU3RyZWFtL29uYWRkdHJhY2tcbiAgICBzdGF0aWMgZGlzcGF0Y2hBZGRUcmFja0V2ZW50KHN0cmVhbSwgdHJhY2spIHtcbiAgICAgICAgc3RyZWFtLmRpc3BhdGNoRXZlbnQobmV3IE1lZGlhU3RyZWFtVHJhY2tFdmVudChcImFkZHRyYWNrXCIsIHsgdHJhY2sgfSkpO1xuICAgIH1cbiAgICAvLyBUaGUgcmVtb3ZldHJhY2sgZXZlbnQgZG9lcyBub3QgZ2V0IGZpcmVkIHdoZW4gSmF2YVNjcmlwdCBjb2RlIGV4cGxpY2l0bHkgcmVtb3ZlcyB0cmFja3MgZnJvbSB0aGUgc3RyZWFtIChieSBjYWxsaW5nIHJlbW92ZVRyYWNrKCkpLlxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYVN0cmVhbS9vbnJlbW92ZXRyYWNrXG4gICAgc3RhdGljIGRpc3BhdGNoUmVtb3ZlVHJhY2tFdmVudChzdHJlYW0sIHRyYWNrKSB7XG4gICAgICAgIHN0cmVhbS5kaXNwYXRjaEV2ZW50KG5ldyBNZWRpYVN0cmVhbVRyYWNrRXZlbnQoXCJyZW1vdmV0cmFja1wiLCB7IHRyYWNrIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcCB0cmFja3MgYW5kIGNsb3NlIHBlZXIgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmNsb3NlXCIpO1xuICAgICAgICBpZiAodGhpcy5fcGVlckNvbm5lY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3BlZXJDb25uZWN0aW9uLmdldFJlY2VpdmVycygpLmZvckVhY2goKHJlY2VpdmVyKSA9PiB7XG4gICAgICAgICAgICByZWNlaXZlci50cmFjayAmJiByZWNlaXZlci50cmFjay5zdG9wKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoc2VuZGVyKSA9PiB7XG4gICAgICAgICAgICBzZW5kZXIudHJhY2sgJiYgc2VuZGVyLnRyYWNrLnN0b3AoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLl9kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhpcy5fZGF0YUNoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9wZWVyQ29ubmVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvZmZlciBvciBhbnN3ZXIuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGJ1Y2tldC5cbiAgICAgKiBAcGFyYW0gbW9kaWZpZXJzIC0gTW9kaWZpZXJzLlxuICAgICAqL1xuICAgIGdldERlc2NyaXB0aW9uKG9wdGlvbnMsIG1vZGlmaWVycykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuZ2V0RGVzY3JpcHRpb25cIik7XG4gICAgICAgIGlmICh0aGlzLl9wZWVyQ29ubmVjdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiUGVlciBjb25uZWN0aW9uIGNsb3NlZC5cIikpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhbGxiYWNrIG9uIGRhdGEgY2hhbm5lbCBjcmVhdGlvblxuICAgICAgICB0aGlzLm9uRGF0YUNoYW5uZWwgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub25EYXRhQ2hhbm5lbDtcbiAgICAgICAgLy8gSUNFIHdpbGwgcmVzdGFydCB1cG9uIGFwcGx5aW5nIGFuIG9mZmVyIGNyZWF0ZWQgd2l0aCB0aGUgaWNlUmVzdGFydCBvcHRpb25cbiAgICAgICAgY29uc3QgaWNlUmVzdGFydCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vZmZlck9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pY2VSZXN0YXJ0O1xuICAgICAgICAvLyBJQ0UgZ2F0aGVyaW5nIHRpbWVvdXQgbWF5IGJlIHNldCBvbiBhIHBlciBjYWxsIGJhc2lzLCBvdGhlcndpc2UgdGhlIGNvbmZpZ3VyZWQgZGVmYXVsdCBpcyB1c2VkXG4gICAgICAgIGNvbnN0IGljZVRpbWVvdXQgPSAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmljZUdhdGhlcmluZ1RpbWVvdXQpID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gKF9iID0gdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyQ29uZmlndXJhdGlvbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmljZUdhdGhlcmluZ1RpbWVvdXRcbiAgICAgICAgICAgIDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmljZUdhdGhlcmluZ1RpbWVvdXQ7XG4gICAgICAgIHJldHVybiB0aGlzLmdldExvY2FsTWVkaWFTdHJlYW0ob3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMudXBkYXRlRGlyZWN0aW9uKG9wdGlvbnMpKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jcmVhdGVEYXRhQ2hhbm5lbChvcHRpb25zKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuY3JlYXRlTG9jYWxPZmZlck9yQW5zd2VyKG9wdGlvbnMpKVxuICAgICAgICAgICAgLnRoZW4oKHNlc3Npb25EZXNjcmlwdGlvbikgPT4gdGhpcy5hcHBseU1vZGlmaWVycyhzZXNzaW9uRGVzY3JpcHRpb24sIG1vZGlmaWVycykpXG4gICAgICAgICAgICAudGhlbigoc2Vzc2lvbkRlc2NyaXB0aW9uKSA9PiB0aGlzLnNldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uKHNlc3Npb25EZXNjcmlwdGlvbikpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLndhaXRGb3JJY2VHYXRoZXJpbmdDb21wbGV0ZShpY2VSZXN0YXJ0LCBpY2VUaW1lb3V0KSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuZ2V0TG9jYWxTZXNzaW9uRGVzY3JpcHRpb24oKSlcbiAgICAgICAgICAgIC50aGVuKChzZXNzaW9uRGVzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYm9keTogc2Vzc2lvbkRlc2NyaXB0aW9uLnNkcCxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9zZHBcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5nZXREZXNjcmlwdGlvbiBmYWlsZWQgLSBcIiArIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyIGNhbiBoYW5kbGUgdGhlIENvbnRlbnQtVHlwZSBkZXNjcmliZWQgYnkgYSBTSVAgbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gY29udGVudFR5cGUgLSBUaGUgY29udGVudCB0eXBlIHRoYXQgaXMgaW4gdGhlIFNJUCBNZXNzYWdlLlxuICAgICAqL1xuICAgIGhhc0Rlc2NyaXB0aW9uKGNvbnRlbnRUeXBlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5oYXNEZXNjcmlwdGlvblwiKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL3NkcFwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIERUTUYgdmlhIFJUUCAoUkZDIDQ3MzMpLlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBEVE1GIHNlbmQgaXMgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqIEBwYXJhbSB0b25lcyAtIEEgc3RyaW5nIGNvbnRhaW5pbmcgRFRNRiBkaWdpdHMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIG9iamVjdCB0byBiZSB1c2VkIGJ5IHNlbmREdG1mLlxuICAgICAqL1xuICAgIHNlbmREdG1mKHRvbmVzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZW5kRHRtZlwiKTtcbiAgICAgICAgaWYgKHRoaXMuX3BlZXJDb25uZWN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZW5kRHRtZiBmYWlsZWQgLSBwZWVyIGNvbm5lY3Rpb24gY2xvc2VkXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlbmRlcnMgPSB0aGlzLl9wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCk7XG4gICAgICAgIGlmIChzZW5kZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNlbmREdG1mIGZhaWxlZCAtIG5vIHNlbmRlcnNcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZHRtZlNlbmRlciA9IHNlbmRlcnNbMF0uZHRtZjtcbiAgICAgICAgaWYgKCFkdG1mU2VuZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2VuZER0bWYgZmFpbGVkIC0gbm8gRFRNRiBzZW5kZXJcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZHVyYXRpb247XG4gICAgICAgIGNvbnN0IGludGVyVG9uZUdhcCA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pbnRlclRvbmVHYXA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkdG1mU2VuZGVyLmluc2VydERUTUYodG9uZXMsIGR1cmF0aW9uLCBpbnRlclRvbmVHYXApO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNlbmREdG1mIHNlbnQgdmlhIFJUUDogXCIgKyB0b25lcy50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYW4gb2ZmZXIgb3IgYW5zd2VyLlxuICAgICAqIEBwYXJhbSBzZHAgLSBUaGUgc2Vzc2lvbiBkZXNjcmlwdGlvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgYnVja2V0LlxuICAgICAqIEBwYXJhbSBtb2RpZmllcnMgLSBNb2RpZmllcnMuXG4gICAgICovXG4gICAgc2V0RGVzY3JpcHRpb24oc2RwLCBvcHRpb25zLCBtb2RpZmllcnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldERlc2NyaXB0aW9uXCIpO1xuICAgICAgICBpZiAodGhpcy5fcGVlckNvbm5lY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlBlZXIgY29ubmVjdGlvbiBjbG9zZWQuXCIpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYWxsYmFjayBvbiBkYXRhIGNoYW5uZWwgY3JlYXRpb25cbiAgICAgICAgdGhpcy5vbkRhdGFDaGFubmVsID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9uRGF0YUNoYW5uZWw7XG4gICAgICAgIC8vIFNEUCB0eXBlXG4gICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLl9wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSA9PT0gXCJoYXZlLWxvY2FsLW9mZmVyXCIgPyBcImFuc3dlclwiIDogXCJvZmZlclwiO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMb2NhbE1lZGlhU3RyZWFtKG9wdGlvbnMpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmFwcGx5TW9kaWZpZXJzKHsgc2RwLCB0eXBlIH0sIG1vZGlmaWVycykpXG4gICAgICAgICAgICAudGhlbigoc2Vzc2lvbkRlc2NyaXB0aW9uKSA9PiB0aGlzLnNldFJlbW90ZVNlc3Npb25EZXNjcmlwdGlvbihzZXNzaW9uRGVzY3JpcHRpb24pKVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldERlc2NyaXB0aW9uIGZhaWxlZCAtIFwiICsgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIG1vZGlmaWVycyB0byBTRFAgcHJpb3IgdG8gc2V0dGluZyB0aGUgbG9jYWwgb3IgcmVtb3RlIGRlc2NyaXB0aW9uLlxuICAgICAqIEBwYXJhbSBzZHAgLSBTRFAgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSBtb2RpZmllcnMgLSBNb2RpZmllcnMgdG8gYXBwbHkuXG4gICAgICovXG4gICAgYXBwbHlNb2RpZmllcnMoc2RwLCBtb2RpZmllcnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmFwcGx5TW9kaWZpZXJzXCIpO1xuICAgICAgICBpZiAoIW1vZGlmaWVycyB8fCBtb2RpZmllcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNkcCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vZGlmaWVyc1xuICAgICAgICAgICAgLnJlZHVjZSgoY3VyLCBuZXh0KSA9PiBjdXIudGhlbihuZXh0KSwgUHJvbWlzZS5yZXNvbHZlKHNkcCkpXG4gICAgICAgICAgICAudGhlbigobW9kaWZpZWQpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5hcHBseU1vZGlmaWVycyAtIG1vZGlmaWVkIHNkcFwiKTtcbiAgICAgICAgICAgIGlmICghbW9kaWZpZWQuc2RwIHx8ICFtb2RpZmllZC50eXBlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBTRFAuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc2RwOiBtb2RpZmllZC5zZHAsIHR5cGU6IG1vZGlmaWVkLnR5cGUgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGRhdGEgY2hhbm5lbC5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIE9ubHkgY3JlYXRlcyBhIGRhdGEgY2hhbm5lbCBpZiBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucy5kYXRhQ2hhbm5lbCBpcyB0cnVlLlxuICAgICAqIE9ubHkgY3JlYXRlcyBhIGRhdGEgY2hhbm5lbCBpZiBjcmVhdGluZyBhIGxvY2FsIG9mZmVyLlxuICAgICAqIE9ubHkgaWYgb25lIGRvZXMgbm90IGFscmVhZHkgZXhpc3QuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBTZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBjcmVhdGVEYXRhQ2hhbm5lbChvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLl9wZWVyQ29ubmVjdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiUGVlciBjb25uZWN0aW9uIGNsb3NlZC5cIikpO1xuICAgICAgICB9XG4gICAgICAgIC8vIG9ubHkgY3JlYXRlIGEgZGF0YSBjaGFubmVsIGlmIHJlcXVlc3RlZFxuICAgICAgICBpZiAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5kYXRhQ2hhbm5lbCkgIT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkbyBub3QgY3JlYXRlIGEgZGF0YSBjaGFubmVsIGlmIHdlIGFscmVhZHkgaGF2ZSBvbmVcbiAgICAgICAgaWYgKHRoaXMuX2RhdGFDaGFubmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLl9wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBcInN0YWJsZVwiOlxuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGFyZSBzdGFibGUsIGFzc3VtZSB3ZSBhcmUgY3JlYXRpbmcgYSBsb2NhbCBvZmZlciBzbyBjcmVhdGUgYSBkYXRhIGNoYW5uZWxcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuY3JlYXRlRGF0YUNoYW5uZWwgLSBjcmVhdGluZyBkYXRhIGNoYW5uZWxcIik7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGF0YUNoYW5uZWwgPSB0aGlzLl9wZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRhdGFDaGFubmVsTGFiZWwpIHx8IFwiXCIsIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5kYXRhQ2hhbm5lbE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vbkRhdGFDaGFubmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YUNoYW5uZWwodGhpcy5fZGF0YUNoYW5uZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImhhdmUtcmVtb3RlLW9mZmVyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgY2FzZSBcImhhdmUtbG9jYWwtb2ZmZXJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJoYXZlLWxvY2FsLXByYW5zd2VyXCI6XG4gICAgICAgICAgICBjYXNlIFwiaGF2ZS1yZW1vdGUtcHJhbnN3ZXJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJjbG9zZWRcIjpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkludmFsaWQgc2lnbmFsaW5nIHN0YXRlIFwiICsgdGhpcy5fcGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXBlbmRpbmcgb24gY3VycmVudCBzaWduYWxpbmcgc3RhdGUsIGNyZWF0ZSBhIGxvY2FsIG9mZmVyIG9yIGFuc3dlci5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBvcHRpb25zLlxuICAgICAqL1xuICAgIGNyZWF0ZUxvY2FsT2ZmZXJPckFuc3dlcihvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLl9wZWVyQ29ubmVjdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiUGVlciBjb25uZWN0aW9uIGNsb3NlZC5cIikpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodGhpcy5fcGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzdGFibGVcIjpcbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBhcmUgc3RhYmxlLCBhc3N1bWUgd2UgYXJlIGNyZWF0aW5nIGEgbG9jYWwgb2ZmZXJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuY3JlYXRlTG9jYWxPZmZlck9yQW5zd2VyIC0gY3JlYXRpbmcgU0RQIG9mZmVyXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub2ZmZXJPcHRpb25zKTtcbiAgICAgICAgICAgIGNhc2UgXCJoYXZlLXJlbW90ZS1vZmZlclwiOlxuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgYSByZW1vdGUgb2ZmZXIsIGFzc3VtZSB3ZSBhcmUgY3JlYXRpbmcgYSBsb2NhbCBhbnN3ZXJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuY3JlYXRlTG9jYWxPZmZlck9yQW5zd2VyIC0gY3JlYXRpbmcgU0RQIGFuc3dlclwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGVlckNvbm5lY3Rpb24uY3JlYXRlQW5zd2VyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5hbnN3ZXJPcHRpb25zKTtcbiAgICAgICAgICAgIGNhc2UgXCJoYXZlLWxvY2FsLW9mZmVyXCI6XG4gICAgICAgICAgICBjYXNlIFwiaGF2ZS1sb2NhbC1wcmFuc3dlclwiOlxuICAgICAgICAgICAgY2FzZSBcImhhdmUtcmVtb3RlLXByYW5zd2VyXCI6XG4gICAgICAgICAgICBjYXNlIFwiY2xvc2VkXCI6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSBcIiArIHRoaXMuX3BlZXJDb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgbWVkaWEgc3RyZWFtIGZyb20gdGhlIG1lZGlhIHN0cmVhbSBmYWN0b3J5IGFuZCBzZXQgdGhlIGxvY2FsIG1lZGlhIHN0cmVhbS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBvcHRpb25zLlxuICAgICAqL1xuICAgIGdldExvY2FsTWVkaWFTdHJlYW0ob3B0aW9ucykge1xuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuZ2V0TG9jYWxNZWRpYVN0cmVhbVwiKTtcbiAgICAgICAgaWYgKHRoaXMuX3BlZXJDb25uZWN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJQZWVyIGNvbm5lY3Rpb24gY2xvc2VkLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNvbnN0cmFpbnRzID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNvbnN0cmFpbnRzKTtcbiAgICAgICAgLy8gaWYgd2UgYWxyZWFkeSBoYXZlIGEgbG9jYWwgbWVkaWEgc3RyZWFtLi4uXG4gICAgICAgIGlmICh0aGlzLmxvY2FsTWVkaWFTdHJlYW1Db25zdHJhaW50cykge1xuICAgICAgICAgICAgLy8gaWdub3JlIGNvbnN0cmFpbnQgXCJkb3duZ3JhZGVzXCJcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzLmF1ZGlvID0gY29uc3RyYWludHMuYXVkaW8gfHwgdGhpcy5sb2NhbE1lZGlhU3RyZWFtQ29uc3RyYWludHMuYXVkaW87XG4gICAgICAgICAgICBjb25zdHJhaW50cy52aWRlbyA9IGNvbnN0cmFpbnRzLnZpZGVvIHx8IHRoaXMubG9jYWxNZWRpYVN0cmVhbUNvbnN0cmFpbnRzLnZpZGVvO1xuICAgICAgICAgICAgLy8gaWYgY29uc3RyYWludHMgaGF2ZSBub3QgY2hhbmdlZCwgZG8gbm90IGdldCBhIG5ldyBtZWRpYSBzdHJlYW1cbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLmxvY2FsTWVkaWFTdHJlYW1Db25zdHJhaW50cy5hdWRpbykgPT09IEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzLmF1ZGlvKSAmJlxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMubG9jYWxNZWRpYVN0cmVhbUNvbnN0cmFpbnRzLnZpZGVvKSA9PT0gSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMudmlkZW8pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gaWYgbm8gY29uc3RyYWludHMgaGF2ZSBiZWVuIHNwZWNpZmllZCwgZGVmYXVsdCB0byBhdWRpbyBmb3IgaW5pdGlhbCBtZWRpYSBzdHJlYW1cbiAgICAgICAgICAgIGlmIChjb25zdHJhaW50cy5hdWRpbyA9PT0gdW5kZWZpbmVkICYmIGNvbnN0cmFpbnRzLnZpZGVvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdHJhaW50cyA9IHsgYXVkaW86IHRydWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvY2FsTWVkaWFTdHJlYW1Db25zdHJhaW50cyA9IGNvbnN0cmFpbnRzO1xuICAgICAgICByZXR1cm4gdGhpcy5tZWRpYVN0cmVhbUZhY3RvcnkoY29uc3RyYWludHMsIHRoaXMpLnRoZW4oKG1lZGlhU3RyZWFtKSA9PiB0aGlzLnNldExvY2FsTWVkaWFTdHJlYW0obWVkaWFTdHJlYW0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcGVlciBjb25uZWN0aW9uJ3Mgc2VuZGVyIHRyYWNrcyBhbmQgbG9jYWwgbWVkaWEgc3RyZWFtIHRyYWNrcy5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogT25seSB0aGUgZmlyc3QgYXVkaW8gYW5kIHZpZGVvIHRyYWNrcyBvZiB0aGUgcHJvdmlkZWQgTWVkaWFTdHJlYW0gYXJlIHV0aWxpemVkLlxuICAgICAqIEFkZHMgdHJhY2tzIGlmIGF1ZGlvIGFuZC9vciB2aWRlbyB0cmFja3MgYXJlIG5vdCBhbHJlYWR5IHByZXNlbnQsIG90aGVyd2lzZSByZXBsYWNlcyB0cmFja3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RyZWFtIC0gTWVkaWEgc3RyZWFtIGNvbnRhaW5pbmcgdHJhY2tzIHRvIGJlIHV0aWxpemVkLlxuICAgICAqL1xuICAgIHNldExvY2FsTWVkaWFTdHJlYW0oc3RyZWFtKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXRMb2NhbE1lZGlhU3RyZWFtXCIpO1xuICAgICAgICBpZiAoIXRoaXMuX3BlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQZWVyIGNvbm5lY3Rpb24gdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYyA9IHRoaXMuX3BlZXJDb25uZWN0aW9uO1xuICAgICAgICBjb25zdCBsb2NhbFN0cmVhbSA9IHRoaXMuX2xvY2FsTWVkaWFTdHJlYW07XG4gICAgICAgIGNvbnN0IHRyYWNrVXBkYXRlcyA9IFtdO1xuICAgICAgICBjb25zdCB1cGRhdGVUcmFjayA9IChuZXdUcmFjaykgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2luZCA9IG5ld1RyYWNrLmtpbmQ7XG4gICAgICAgICAgICBpZiAoa2luZCAhPT0gXCJhdWRpb1wiICYmIGtpbmQgIT09IFwidmlkZW9cIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBuZXcgdHJhY2sga2luZCAke2tpbmR9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2VuZGVyID0gcGMuZ2V0U2VuZGVycygpLmZpbmQoKHNlbmRlcikgPT4gc2VuZGVyLnRyYWNrICYmIHNlbmRlci50cmFjay5raW5kID09PSBraW5kKTtcbiAgICAgICAgICAgIGlmIChzZW5kZXIpIHtcbiAgICAgICAgICAgICAgICB0cmFja1VwZGF0ZXMucHVzaChuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXRMb2NhbE1lZGlhU3RyZWFtIC0gcmVwbGFjaW5nIHNlbmRlciAke2tpbmR9IHRyYWNrYCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHNlbmRlclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZVRyYWNrKG5ld1RyYWNrKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZFRyYWNrID0gbG9jYWxTdHJlYW0uZ2V0VHJhY2tzKCkuZmluZCgobG9jYWxUcmFjaykgPT4gbG9jYWxUcmFjay5raW5kID09PSBraW5kKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFRyYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRUcmFjay5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0cmVhbS5yZW1vdmVUcmFjayhvbGRUcmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmRpc3BhdGNoUmVtb3ZlVHJhY2tFdmVudChsb2NhbFN0cmVhbSwgb2xkVHJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RyZWFtLmFkZFRyYWNrKG5ld1RyYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5kaXNwYXRjaEFkZFRyYWNrRXZlbnQobG9jYWxTdHJlYW0sIG5ld1RyYWNrKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldExvY2FsTWVkaWFTdHJlYW0gLSBmYWlsZWQgdG8gcmVwbGFjZSBzZW5kZXIgJHtraW5kfSB0cmFja2ApO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJhY2tVcGRhdGVzLnB1c2gobmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0TG9jYWxNZWRpYVN0cmVhbSAtIGFkZGluZyBzZW5kZXIgJHtraW5kfSB0cmFja2ApO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJldmlldzogY291bGQgbWFrZSBzdHJlYW1sZXNzIHRyYWNrcyBhIGNvbmZpZ3VyYWJsZSBvcHRpb24/XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9SVENQZWVyQ29ubmVjdGlvbi9hZGRUcmFjayNVc2FnZV9ub3Rlc1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGMuYWRkVHJhY2sobmV3VHJhY2ssIGxvY2FsU3RyZWFtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldExvY2FsTWVkaWFTdHJlYW0gLSBmYWlsZWQgdG8gYWRkIHNlbmRlciAke2tpbmR9IHRyYWNrYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0cmVhbS5hZGRUcmFjayhuZXdUcmFjayk7XG4gICAgICAgICAgICAgICAgICAgIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuZGlzcGF0Y2hBZGRUcmFja0V2ZW50KGxvY2FsU3RyZWFtLCBuZXdUcmFjayk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyB1cGRhdGUgcGVlciBjb25uZWN0aW9uIGF1ZGlvIHRyYWNrc1xuICAgICAgICBjb25zdCBhdWRpb1RyYWNrcyA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICAgICAgICBpZiAoYXVkaW9UcmFja3MubGVuZ3RoKSB7XG4gICAgICAgICAgICB1cGRhdGVUcmFjayhhdWRpb1RyYWNrc1swXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIHBlZXIgY29ubmVjdGlvbiB2aWRlbyB0cmFja3NcbiAgICAgICAgY29uc3QgdmlkZW9UcmFja3MgPSBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcbiAgICAgICAgaWYgKHZpZGVvVHJhY2tzLmxlbmd0aCkge1xuICAgICAgICAgICAgdXBkYXRlVHJhY2sodmlkZW9UcmFja3NbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFja1VwZGF0ZXMucmVkdWNlKChwLCB4KSA9PiBwLnRoZW4oKCkgPT4geCksIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcGVlciBjb25uZWN0aW9uJ3MgbG9jYWwgc2Vzc2lvbiBkZXNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBnZXRMb2NhbFNlc3Npb25EZXNjcmlwdGlvbigpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmdldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBpZiAodGhpcy5fcGVlckNvbm5lY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlBlZXIgY29ubmVjdGlvbiBjbG9zZWQuXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZHAgPSB0aGlzLl9wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uO1xuICAgICAgICBpZiAoIXNkcCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgbG9jYWwgc2Vzc2lvbiBkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzZHApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwZWVyIGNvbm5lY3Rpb24ncyBsb2NhbCBzZXNzaW9uIGRlc2NyaXB0aW9uLlxuICAgICAqIEBwYXJhbSBzZXNzaW9uRGVzY3JpcHRpb24gLSBzZXNzaW9uRGVzY3JpcHRpb24gVGhlIHNlc3Npb24gZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgc2V0TG9jYWxTZXNzaW9uRGVzY3JpcHRpb24oc2Vzc2lvbkRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXRMb2NhbFNlc3Npb25EZXNjcmlwdGlvblwiKTtcbiAgICAgICAgaWYgKHRoaXMuX3BlZXJDb25uZWN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJQZWVyIGNvbm5lY3Rpb24gY2xvc2VkLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oc2Vzc2lvbkRlc2NyaXB0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcGVlciBjb25uZWN0aW9uJ3MgcmVtb3RlIHNlc3Npb24gZGVzY3JpcHRpb24uXG4gICAgICogQHBhcmFtIHNlc3Npb25EZXNjcmlwdGlvbiAtIFRoZSBzZXNzaW9uIGRlc2NyaXB0aW9uLlxuICAgICAqL1xuICAgIHNldFJlbW90ZVNlc3Npb25EZXNjcmlwdGlvbihzZXNzaW9uRGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldFJlbW90ZVNlc3Npb25EZXNjcmlwdGlvblwiKTtcbiAgICAgICAgaWYgKHRoaXMuX3BlZXJDb25uZWN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJQZWVyIGNvbm5lY3Rpb24gY2xvc2VkLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2RwID0gc2Vzc2lvbkRlc2NyaXB0aW9uLnNkcDtcbiAgICAgICAgbGV0IHR5cGU7XG4gICAgICAgIHN3aXRjaCAodGhpcy5fcGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzdGFibGVcIjpcbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBhcmUgc3RhYmxlIGFzc3VtZSB0aGlzIGlzIGEgcmVtb3RlIG9mZmVyXG4gICAgICAgICAgICAgICAgdHlwZSA9IFwib2ZmZXJcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJoYXZlLWxvY2FsLW9mZmVyXCI6XG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgbWFkZSBhbiBvZmZlciwgYXNzdW1lIHRoaXMgaXMgYSByZW1vdGUgYW5zd2VyXG4gICAgICAgICAgICAgICAgdHlwZSA9IFwiYW5zd2VyXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiaGF2ZS1sb2NhbC1wcmFuc3dlclwiOlxuICAgICAgICAgICAgY2FzZSBcImhhdmUtcmVtb3RlLW9mZmVyXCI6XG4gICAgICAgICAgICBjYXNlIFwiaGF2ZS1yZW1vdGUtcHJhbnN3ZXJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJjbG9zZWRcIjpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkludmFsaWQgc2lnbmFsaW5nIHN0YXRlIFwiICsgdGhpcy5fcGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNkcCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldFJlbW90ZVNlc3Npb25EZXNjcmlwdGlvbiBmYWlsZWQgLSBjYW5ub3Qgc2V0IG51bGwgc2RwXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlNEUCBpcyB1bmRlZmluZWRcIikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbih7IHNkcCwgdHlwZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhIHJlbW90ZSBtZWRpYSBzdHJlYW0gdHJhY2suXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIEFkZHMgdHJhY2tzIGlmIGF1ZGlvIGFuZC9vciB2aWRlbyB0cmFja3MgYXJlIG5vdCBhbHJlYWR5IHByZXNlbnQsIG90aGVyd2lzZSByZXBsYWNlcyB0cmFja3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhY2sgLSBNZWRpYSBzdHJlYW0gdHJhY2sgdG8gYmUgdXRpbGl6ZWQuXG4gICAgICovXG4gICAgc2V0UmVtb3RlVHJhY2sodHJhY2spIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldFJlbW90ZVRyYWNrXCIpO1xuICAgICAgICBjb25zdCByZW1vdGVTdHJlYW0gPSB0aGlzLl9yZW1vdGVNZWRpYVN0cmVhbTtcbiAgICAgICAgaWYgKHJlbW90ZVN0cmVhbS5nZXRUcmFja0J5SWQodHJhY2suaWQpKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXRSZW1vdGVUcmFjayAtIGhhdmUgcmVtb3RlICR7dHJhY2sua2luZH0gdHJhY2tgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmFjay5raW5kID09PSBcImF1ZGlvXCIpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldFJlbW90ZVRyYWNrIC0gYWRkaW5nIHJlbW90ZSAke3RyYWNrLmtpbmR9IHRyYWNrYCk7XG4gICAgICAgICAgICByZW1vdGVTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgICAgICByZW1vdGVTdHJlYW0ucmVtb3ZlVHJhY2sodHJhY2spO1xuICAgICAgICAgICAgICAgIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuZGlzcGF0Y2hSZW1vdmVUcmFja0V2ZW50KHJlbW90ZVN0cmVhbSwgdHJhY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZW1vdGVTdHJlYW0uYWRkVHJhY2sodHJhY2spO1xuICAgICAgICAgICAgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5kaXNwYXRjaEFkZFRyYWNrRXZlbnQocmVtb3RlU3RyZWFtLCB0cmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHJhY2sua2luZCA9PT0gXCJ2aWRlb1wiKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXRSZW1vdGVUcmFjayAtIGFkZGluZyByZW1vdGUgJHt0cmFjay5raW5kfSB0cmFja2ApO1xuICAgICAgICAgICAgcmVtb3RlU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgICAgICAgICB0cmFjay5zdG9wKCk7XG4gICAgICAgICAgICAgICAgcmVtb3RlU3RyZWFtLnJlbW92ZVRyYWNrKHRyYWNrKTtcbiAgICAgICAgICAgICAgICBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmRpc3BhdGNoUmVtb3ZlVHJhY2tFdmVudChyZW1vdGVTdHJlYW0sIHRyYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVtb3RlU3RyZWFtLmFkZFRyYWNrKHRyYWNrKTtcbiAgICAgICAgICAgIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuZGlzcGF0Y2hBZGRUcmFja0V2ZW50KHJlbW90ZVN0cmVhbSwgdHJhY2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlcGVuZGluZyBvbiB0aGUgY3VycmVudCBzaWduYWxpbmcgc3RhdGUgYW5kIHRoZSBzZXNzaW9uIGhvbGQgc3RhdGUsIHVwZGF0ZSB0cmFuc2NlaXZlciBkaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBTZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICB1cGRhdGVEaXJlY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5fcGVlckNvbm5lY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlBlZXIgY29ubmVjdGlvbiBjbG9zZWQuXCIpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyA0LjIuMy4gIHNldERpcmVjdGlvblxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBUaGUgc2V0RGlyZWN0aW9uIG1ldGhvZCBzZXRzIHRoZSBkaXJlY3Rpb24gb2YgYSB0cmFuc2NlaXZlciwgd2hpY2hcbiAgICAgICAgLy8gICAgYWZmZWN0cyB0aGUgZGlyZWN0aW9uIHByb3BlcnR5IG9mIHRoZSBhc3NvY2lhdGVkIFwibT1cIiBzZWN0aW9uIG9uXG4gICAgICAgIC8vICAgIGZ1dHVyZSBjYWxscyB0byBjcmVhdGVPZmZlciBhbmQgY3JlYXRlQW5zd2VyLiAgVGhlIHBlcm1pdHRlZCB2YWx1ZXNcbiAgICAgICAgLy8gICAgZm9yIGRpcmVjdGlvbiBhcmUgXCJyZWN2b25seVwiLCBcInNlbmRyZWN2XCIsIFwic2VuZG9ubHlcIiwgYW5kIFwiaW5hY3RpdmVcIixcbiAgICAgICAgLy8gICAgbWlycm9yaW5nIHRoZSBpZGVudGljYWxseSBuYW1lZCBkaXJlY3Rpb24gYXR0cmlidXRlcyBkZWZpbmVkIGluXG4gICAgICAgIC8vICAgIFtSRkM0NTY2XSwgU2VjdGlvbiA2LlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBXaGVuIGNyZWF0aW5nIG9mZmVycywgdGhlIHRyYW5zY2VpdmVyIGRpcmVjdGlvbiBpcyBkaXJlY3RseSByZWZsZWN0ZWRcbiAgICAgICAgLy8gICAgaW4gdGhlIG91dHB1dCwgZXZlbiBmb3IgcmUtb2ZmZXJzLiAgV2hlbiBjcmVhdGluZyBhbnN3ZXJzLCB0aGVcbiAgICAgICAgLy8gICAgdHJhbnNjZWl2ZXIgZGlyZWN0aW9uIGlzIGludGVyc2VjdGVkIHdpdGggdGhlIG9mZmVyZWQgZGlyZWN0aW9uLCBhc1xuICAgICAgICAvLyAgICBleHBsYWluZWQgaW4gU2VjdGlvbiA1LjMgYmVsb3cuXG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgIE5vdGUgdGhhdCB3aGlsZSBzZXREaXJlY3Rpb24gc2V0cyB0aGUgZGlyZWN0aW9uIHByb3BlcnR5IG9mIHRoZVxuICAgICAgICAvLyAgICB0cmFuc2NlaXZlciBpbW1lZGlhdGVseSAoU2VjdGlvbiA0LjIuNCksIHRoaXMgcHJvcGVydHkgZG9lcyBub3RcbiAgICAgICAgLy8gICAgaW1tZWRpYXRlbHkgYWZmZWN0IHdoZXRoZXIgdGhlIHRyYW5zY2VpdmVyJ3MgUnRwU2VuZGVyIHdpbGwgc2VuZCBvclxuICAgICAgICAvLyAgICBpdHMgUnRwUmVjZWl2ZXIgd2lsbCByZWNlaXZlLiAgVGhlIGRpcmVjdGlvbiBpbiBlZmZlY3QgaXMgcmVwcmVzZW50ZWRcbiAgICAgICAgLy8gICAgYnkgdGhlIGN1cnJlbnREaXJlY3Rpb24gcHJvcGVydHksIHdoaWNoIGlzIG9ubHkgdXBkYXRlZCB3aGVuIGFuXG4gICAgICAgIC8vICAgIGFuc3dlciBpcyBhcHBsaWVkLlxuICAgICAgICAvL1xuICAgICAgICAvLyA0LjIuNC4gIGRpcmVjdGlvblxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBUaGUgZGlyZWN0aW9uIHByb3BlcnR5IGluZGljYXRlcyB0aGUgbGFzdCB2YWx1ZSBwYXNzZWQgaW50b1xuICAgICAgICAvLyAgICBzZXREaXJlY3Rpb24uICBJZiBzZXREaXJlY3Rpb24gaGFzIG5ldmVyIGJlZW4gY2FsbGVkLCBpdCBpcyBzZXQgdG9cbiAgICAgICAgLy8gICAgdGhlIGRpcmVjdGlvbiB0aGUgdHJhbnNjZWl2ZXIgd2FzIGluaXRpYWxpemVkIHdpdGguXG4gICAgICAgIC8vXG4gICAgICAgIC8vIDQuMi41LiAgY3VycmVudERpcmVjdGlvblxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBUaGUgY3VycmVudERpcmVjdGlvbiBwcm9wZXJ0eSBpbmRpY2F0ZXMgdGhlIGxhc3QgbmVnb3RpYXRlZCBkaXJlY3Rpb25cbiAgICAgICAgLy8gICAgZm9yIHRoZSB0cmFuc2NlaXZlcidzIGFzc29jaWF0ZWQgXCJtPVwiIHNlY3Rpb24uICBNb3JlIHNwZWNpZmljYWxseSwgaXRcbiAgICAgICAgLy8gICAgaW5kaWNhdGVzIHRoZSBkaXJlY3Rpb24gYXR0cmlidXRlIFtSRkMzMjY0XSBvZiB0aGUgYXNzb2NpYXRlZCBcIm09XCJcbiAgICAgICAgLy8gICAgc2VjdGlvbiBpbiB0aGUgbGFzdCBhcHBsaWVkIGFuc3dlciAoaW5jbHVkaW5nIHByb3Zpc2lvbmFsIGFuc3dlcnMpLFxuICAgICAgICAvLyAgICB3aXRoIFwic2VuZFwiIGFuZCBcInJlY3ZcIiBkaXJlY3Rpb25zIHJldmVyc2VkIGlmIGl0IHdhcyBhIHJlbW90ZSBhbnN3ZXIuXG4gICAgICAgIC8vICAgIEZvciBleGFtcGxlLCBpZiB0aGUgZGlyZWN0aW9uIGF0dHJpYnV0ZSBmb3IgdGhlIGFzc29jaWF0ZWQgXCJtPVwiXG4gICAgICAgIC8vICAgIHNlY3Rpb24gaW4gYSByZW1vdGUgYW5zd2VyIGlzIFwicmVjdm9ubHlcIiwgY3VycmVudERpcmVjdGlvbiBpcyBzZXQgdG9cbiAgICAgICAgLy8gICAgXCJzZW5kb25seVwiLlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBJZiBhbiBhbnN3ZXIgdGhhdCByZWZlcmVuY2VzIHRoaXMgdHJhbnNjZWl2ZXIgaGFzIG5vdCB5ZXQgYmVlblxuICAgICAgICAvLyAgICBhcHBsaWVkIG9yIGlmIHRoZSB0cmFuc2NlaXZlciBpcyBzdG9wcGVkLCBjdXJyZW50RGlyZWN0aW9uIGlzIHNldCB0b1xuICAgICAgICAvLyAgICBcIm51bGxcIi5cbiAgICAgICAgLy8gIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM4ODI5I3NlY3Rpb24tNC4yLjNcbiAgICAgICAgLy9cbiAgICAgICAgLy8gKiAgQSBkaXJlY3Rpb24gYXR0cmlidXRlLCBkZXRlcm1pbmVkIGJ5IGFwcGx5aW5nIHRoZSBydWxlcyByZWdhcmRpbmdcbiAgICAgICAgLy8gICAgdGhlIG9mZmVyZWQgZGlyZWN0aW9uIHNwZWNpZmllZCBpbiBbUkZDMzI2NF0sIFNlY3Rpb24gNi4xLCBhbmRcbiAgICAgICAgLy8gICAgdGhlbiBpbnRlcnNlY3Rpbmcgd2l0aCB0aGUgZGlyZWN0aW9uIG9mIHRoZSBhc3NvY2lhdGVkXG4gICAgICAgIC8vICAgIFJ0cFRyYW5zY2VpdmVyLiAgRm9yIGV4YW1wbGUsIGluIHRoZSBjYXNlIHdoZXJlIGFuIFwibT1cIiBzZWN0aW9uIGlzXG4gICAgICAgIC8vICAgIG9mZmVyZWQgYXMgXCJzZW5kb25seVwiIGFuZCB0aGUgbG9jYWwgdHJhbnNjZWl2ZXIgaXMgc2V0IHRvXG4gICAgICAgIC8vICAgIFwic2VuZHJlY3ZcIiwgdGhlIHJlc3VsdCBpbiB0aGUgYW5zd2VyIGlzIGEgXCJyZWN2b25seVwiIGRpcmVjdGlvbi5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzg4Mjkjc2VjdGlvbi01LjMuMVxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiBhIHN0cmVhbSBpcyBvZmZlcmVkIGFzIHNlbmRvbmx5LCB0aGUgY29ycmVzcG9uZGluZyBzdHJlYW0gTVVTVCBiZVxuICAgICAgICAvLyBtYXJrZWQgYXMgcmVjdm9ubHkgb3IgaW5hY3RpdmUgaW4gdGhlIGFuc3dlci4gIElmIGEgbWVkaWEgc3RyZWFtIGlzXG4gICAgICAgIC8vIGxpc3RlZCBhcyByZWN2b25seSBpbiB0aGUgb2ZmZXIsIHRoZSBhbnN3ZXIgTVVTVCBiZSBtYXJrZWQgYXNcbiAgICAgICAgLy8gc2VuZG9ubHkgb3IgaW5hY3RpdmUgaW4gdGhlIGFuc3dlci4gIElmIGFuIG9mZmVyZWQgbWVkaWEgc3RyZWFtIGlzXG4gICAgICAgIC8vIGxpc3RlZCBhcyBzZW5kcmVjdiAob3IgaWYgdGhlcmUgaXMgbm8gZGlyZWN0aW9uIGF0dHJpYnV0ZSBhdCB0aGVcbiAgICAgICAgLy8gbWVkaWEgb3Igc2Vzc2lvbiBsZXZlbCwgaW4gd2hpY2ggY2FzZSB0aGUgc3RyZWFtIGlzIHNlbmRyZWN2IGJ5XG4gICAgICAgIC8vIGRlZmF1bHQpLCB0aGUgY29ycmVzcG9uZGluZyBzdHJlYW0gaW4gdGhlIGFuc3dlciBNQVkgYmUgbWFya2VkIGFzXG4gICAgICAgIC8vIHNlbmRvbmx5LCByZWN2b25seSwgc2VuZHJlY3YsIG9yIGluYWN0aXZlLiAgSWYgYW4gb2ZmZXJlZCBtZWRpYVxuICAgICAgICAvLyBzdHJlYW0gaXMgbGlzdGVkIGFzIGluYWN0aXZlLCBpdCBNVVNUIGJlIG1hcmtlZCBhcyBpbmFjdGl2ZSBpbiB0aGVcbiAgICAgICAgLy8gYW5zd2VyLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2NCNzZWN0aW9uLTYuMVxuICAgICAgICBzd2l0Y2ggKHRoaXMuX3BlZXJDb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFwic3RhYmxlXCI6XG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgYXJlIHN0YWJsZSwgYXNzdW1lIHdlIGFyZSBjcmVhdGluZyBhIGxvY2FsIG9mZmVyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnVwZGF0ZURpcmVjdGlvbiAtIHNldHRpbmcgb2ZmZXIgZGlyZWN0aW9uXCIpO1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBkaXJlY3Rpb24gdG8gb2ZmZXIgZ2l2ZW4gdGhlIGN1cnJlbnQgZGlyZWN0aW9uIGFuZCBob2xkIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvblRvT2ZmZXIgPSAoY3VycmVudERpcmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjdXJyZW50RGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluYWN0aXZlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmhvbGQpID8gXCJpbmFjdGl2ZVwiIDogXCJyZWN2b25seVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWN2b25seVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ob2xkKSA/IFwiaW5hY3RpdmVcIiA6IFwicmVjdm9ubHlcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2VuZG9ubHlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaG9sZCkgPyBcInNlbmRvbmx5XCIgOiBcInNlbmRyZWN2XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNlbmRyZWN2XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmhvbGQpID8gXCJzZW5kb25seVwiIDogXCJzZW5kcmVjdlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdG9wcGVkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0b3BwZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaG91bGQgbmV2ZXIgaGFwcGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHRyYW5zY2VpdmVyIGRpcmVjdGlvbiB0byB0aGUgb2ZmZXIgZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BlZXJDb25uZWN0aW9uLmdldFRyYW5zY2VpdmVycygpLmZvckVhY2goKHRyYW5zY2VpdmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIuZGlyZWN0aW9uIC8qIGd1YXJkaW5nLCBidXQgc2hvdWxkIGFsd2F5cyBiZSB0cnVlICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2ZmZXJEaXJlY3Rpb24gPSBkaXJlY3Rpb25Ub09mZmVyKHRyYW5zY2VpdmVyLmRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmRpcmVjdGlvbiAhPT0gb2ZmZXJEaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gb2ZmZXJEaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiaGF2ZS1yZW1vdGUtb2ZmZXJcIjpcbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgcmVtb3RlIG9mZmVyLCBhc3N1bWUgd2UgYXJlIGNyZWF0aW5nIGEgbG9jYWwgYW5zd2VyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnVwZGF0ZURpcmVjdGlvbiAtIHNldHRpbmcgYW5zd2VyIGRpcmVjdGlvblwiKTtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRTogVGhpcyBpcyBub3QgdGhlIGNvcnJlY3Qgd2F5IHRvIGRldGVybWluZSB0aGUgYW5zd2VyIGRpcmVjdGlvbiBhcyBpdCBpcyBvbmx5XG4gICAgICAgICAgICAgICAgLy8gY29uc2lkZXJpbmcgZmlyc3QgbWF0Y2ggaW4gdGhlIG9mZmVyZWQgU0RQIGFuZCB1c2luZyB0aGF0IHRvIGRldGVybWluZSB0aGUgYW5zd2VyIGRpcmVjdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBXaGlsZSB0aGF0IG1heSBiZSBmaW5lIGZvciBvdXIgY3VycmVudCB1c2UgY2FzZXMsIGl0IGlzIG5vdCBhIGdlbmVyYWxseSBjb3JyZWN0IGFwcHJvYWNoLlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBvZmZlcmVkIGRpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZlcmVkRGlyZWN0aW9uID0gKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5fcGVlckNvbm5lY3Rpb24ucmVtb3RlRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHJlYWQgcmVtb3RlIG9mZmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0ID0gL2E9c2VuZHJlY3ZcXHJcXG58YT1zZW5kb25seVxcclxcbnxhPXJlY3Zvbmx5XFxyXFxufGE9aW5hY3RpdmVcXHJcXG4vLmV4ZWMoZGVzY3JpcHRpb24uc2RwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNlYXJjaFJlc3VsdFswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYT1pbmFjdGl2ZVxcclxcblwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5hY3RpdmVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImE9cmVjdm9ubHlcXHJcXG5cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInJlY3Zvbmx5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhPXNlbmRvbmx5XFxyXFxuXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzZW5kb25seVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYT1zZW5kcmVjdlxcclxcblwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2VuZHJlY3ZcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNob3VsZCBuZXZlciBoYXBwZW5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2VuZHJlY3ZcIjtcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBhbnN3ZXIgZGlyZWN0aW9uIGJhc2VkIG9uIHRoZSBvZmZlcmVkIGRpcmVjdGlvbiBhbmQgb3VyIGhvbGQgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyRGlyZWN0aW9uID0gKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob2ZmZXJlZERpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmFjdGl2ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpbmFjdGl2ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWN2b25seVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzZW5kb25seVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzZW5kb25seVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ob2xkKSA/IFwiaW5hY3RpdmVcIiA6IFwicmVjdm9ubHlcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2VuZHJlY3ZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaG9sZCkgPyBcInNlbmRvbmx5XCIgOiBcInNlbmRyZWN2XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2hvdWxkIG5ldmVyIGhhcHBlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSB0cmFuc2NlaXZlciBkaXJlY3Rpb24gdG8gdGhlIGFuc3dlciBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24uZ2V0VHJhbnNjZWl2ZXJzKCkuZm9yRWFjaCgodHJhbnNjZWl2ZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlci5kaXJlY3Rpb24gLyogZ3VhcmRpbmcsIGJ1dCBzaG91bGQgYWx3YXlzIGJlIHRydWUgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIuZGlyZWN0aW9uICE9PSBcInN0b3BwZWRcIiAmJiB0cmFuc2NlaXZlci5kaXJlY3Rpb24gIT09IGFuc3dlckRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5kaXJlY3Rpb24gPSBhbnN3ZXJEaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiaGF2ZS1sb2NhbC1vZmZlclwiOlxuICAgICAgICAgICAgY2FzZSBcImhhdmUtbG9jYWwtcHJhbnN3ZXJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJoYXZlLXJlbW90ZS1wcmFuc3dlclwiOlxuICAgICAgICAgICAgY2FzZSBcImNsb3NlZFwiOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgXCIgKyB0aGlzLl9wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gSUNFIGdhdGhlcmluZyBjb21wbGV0ZXMgYW5kIHJlc29sdmVzIGFueSB3YWl0aW5nIHByb21pc2UuXG4gICAgICovXG4gICAgaWNlR2F0aGVyaW5nQ29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5pY2VHYXRoZXJpbmdDb21wbGV0ZVwiKTtcbiAgICAgICAgLy8gY2xlYXIgdGltZXIgaWYgbmVlZCBiZVxuICAgICAgICBpZiAodGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVRpbWVvdXRJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuaWNlR2F0aGVyaW5nQ29tcGxldGUgLSBjbGVhcmluZyB0aW1lb3V0XCIpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGVUaW1lb3V0SWQpO1xuICAgICAgICAgICAgdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVRpbWVvdXRJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXNvbHZlIGFuZCBjbGVhbnVwIHByb21pc2UgaWYgbmVlZCBiZVxuICAgICAgICBpZiAodGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmljZUdhdGhlcmluZ0NvbXBsZXRlIC0gcmVzb2x2aW5nIHByb21pc2VcIik7XG4gICAgICAgICAgICB0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlUmVzb2x2ZSAmJiB0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlUmVzb2x2ZSgpO1xuICAgICAgICAgICAgdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlUmVzb2x2ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGVSZWplY3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogV2FpdCBmb3IgSUNFIGdhdGhlcmluZyB0byBjb21wbGV0ZS5cbiAgICAgKiBAcGFyYW0gcmVzdGFydCAtIElmIHRydWUsIHdhaXRzIGlmIGN1cnJlbnQgc3RhdGUgaXMgXCJjb21wbGV0ZVwiICh3YWl0cyBmb3IgdHJhbnNpdGlvbiB0byBcImNvbXBsZXRlXCIpLlxuICAgICAqIEBwYXJhbSB0aW1lb3V0IC0gTWlsbGlzZWNvbmRzIGFmdGVyIHdoaWNoIHdhaXRpbmcgdGltZXMgb3V0LiBObyB0aW1lb3V0IGlmIDAuXG4gICAgICovXG4gICAgd2FpdEZvckljZUdhdGhlcmluZ0NvbXBsZXRlKHJlc3RhcnQgPSBmYWxzZSwgdGltZW91dCA9IDApIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLndhaXRGb3JJY2VHYXRoZXJpbmdUb0NvbXBsZXRlXCIpO1xuICAgICAgICBpZiAodGhpcy5fcGVlckNvbm5lY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiUGVlciBjb25uZWN0aW9uIGNsb3NlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ3VhcmQgYWxyZWFkeSBjb21wbGV0ZVxuICAgICAgICBpZiAoIXJlc3RhcnQgJiYgdGhpcy5fcGVlckNvbm5lY3Rpb24uaWNlR2F0aGVyaW5nU3RhdGUgPT09IFwiY29tcGxldGVcIikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLndhaXRGb3JJY2VHYXRoZXJpbmdUb0NvbXBsZXRlIC0gYWxyZWFkeSBjb21wbGV0ZVwiKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBvbmx5IG9uZSBtYXkgYmUgd2FpdGluZywgcmVqZWN0IGFueSBwcmlvclxuICAgICAgICBpZiAodGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLndhaXRGb3JJY2VHYXRoZXJpbmdUb0NvbXBsZXRlIC0gcmVqZWN0aW5nIHByaW9yIHdhaXRpbmcgcHJvbWlzZVwiKTtcbiAgICAgICAgICAgIHRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGVSZWplY3QgJiYgdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVJlamVjdChuZXcgRXJyb3IoXCJQcm9taXNlIHN1cGVyc2VkZWQuXCIpKTtcbiAgICAgICAgICAgIHRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGVQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVJlc29sdmUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlUmVqZWN0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGVQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgICAgIGlmICh0aW1lb3V0ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci53YWl0Rm9ySWNlR2F0aGVyaW5nVG9Db21wbGV0ZSAtIHRpbWVvdXQgaW4gXCIgKyB0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci53YWl0Rm9ySWNlR2F0aGVyaW5nVG9Db21wbGV0ZSAtIHRpbWVvdXRcIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIHBlZXIgY29ubmVjdGlvbiBldmVudCBoYW5kbGVyc1xuICAgICAqL1xuICAgIGluaXRQZWVyQ29ubmVjdGlvbkV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5pbml0UGVlckNvbm5lY3Rpb25FdmVudEhhbmRsZXJzXCIpO1xuICAgICAgICBpZiAoIXRoaXMuX3BlZXJDb25uZWN0aW9uKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGVlciBjb25uZWN0aW9uIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gdGhpcy5fcGVlckNvbm5lY3Rpb247XG4gICAgICAgIHBlZXJDb25uZWN0aW9uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHBlZXJDb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlICR7bmV3U3RhdGV9YCk7XG4gICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZS5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZShldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBlZXJDb25uZWN0aW9uLm9uZGF0YWNoYW5uZWwgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uZGF0YWNoYW5uZWxgKTtcbiAgICAgICAgICAgIHRoaXMuX2RhdGFDaGFubmVsID0gZXZlbnQuY2hhbm5lbDtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uRGF0YUNoYW5uZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YUNoYW5uZWwodGhpcy5fZGF0YUNoYW5uZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChfYSA9IHRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbmRhdGFjaGFubmVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZS5vbmRhdGFjaGFubmVsKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcGVlckNvbm5lY3Rpb24ub25pY2VjYW5kaWRhdGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uaWNlY2FuZGlkYXRlYCk7XG4gICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9uaWNlY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZS5vbmljZWNhbmRpZGF0ZShldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBlZXJDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uaWNlY2FuZGlkYXRlZXJyb3JgKTtcbiAgICAgICAgICAgIGlmICgoX2EgPSB0aGlzLl9wZWVyQ29ubmVjdGlvbkRlbGVnYXRlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub25pY2VjYW5kaWRhdGVlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUub25pY2VjYW5kaWRhdGVlcnJvcihldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBlZXJDb25uZWN0aW9uLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHBlZXJDb25uZWN0aW9uLmljZUNvbm5lY3Rpb25TdGF0ZTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlICR7bmV3U3RhdGV9YCk7XG4gICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZS5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZShldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBlZXJDb25uZWN0aW9uLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0gcGVlckNvbm5lY3Rpb24uaWNlR2F0aGVyaW5nU3RhdGU7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlICR7bmV3U3RhdGV9YCk7XG4gICAgICAgICAgICBpZiAobmV3U3RhdGUgPT09IFwiY29tcGxldGVcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGUoKTsgLy8gY29tcGxldGUgd2FpdGluZyBmb3IgSUNFIGdhdGhlcmluZyB0byBjb21wbGV0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChfYSA9IHRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZS5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcGVlckNvbm5lY3Rpb24ub25uZWdvdGlhdGlvbm5lZWRlZCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIub25uZWdvdGlhdGlvbm5lZWRlZGApO1xuICAgICAgICAgICAgaWYgKChfYSA9IHRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbm5lZ290aWF0aW9ubmVlZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZS5vbm5lZ290aWF0aW9ubmVlZGVkKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcGVlckNvbm5lY3Rpb24ub25zaWduYWxpbmdzdGF0ZWNoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3QgbmV3U3RhdGUgPSBwZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UgJHtuZXdTdGF0ZX1gKTtcbiAgICAgICAgICAgIGlmICgoX2EgPSB0aGlzLl9wZWVyQ29ubmVjdGlvbkRlbGVnYXRlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub25zaWduYWxpbmdzdGF0ZWNoYW5nZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUub25zaWduYWxpbmdzdGF0ZWNoYW5nZShldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBlZXJDb25uZWN0aW9uLm9uc3RhdHNlbmRlZCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIub25zdGF0c2VuZGVkYCk7XG4gICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9uc3RhdHNlbmRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUub25zdGF0c2VuZGVkKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcGVlckNvbm5lY3Rpb24ub250cmFjayA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3Qga2luZCA9IGV2ZW50LnRyYWNrLmtpbmQ7XG4gICAgICAgICAgICBjb25zdCBlbmFibGVkID0gZXZlbnQudHJhY2suZW5hYmxlZCA/IFwiZW5hYmxlZFwiIDogXCJkaXNhYmxlZFwiO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIub250cmFjayAke2tpbmR9ICR7ZW5hYmxlZH1gKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVtb3RlVHJhY2soZXZlbnQudHJhY2spO1xuICAgICAgICAgICAgaWYgKChfYSA9IHRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbnRyYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZS5vbnRyYWNrKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBkZWZhdWx0TWVkaWFTdHJlYW1GYWN0b3J5IH0gZnJvbSBcIi4vbWVkaWEtc3RyZWFtLWZhY3RvcnktZGVmYXVsdFwiO1xuaW1wb3J0IHsgZGVmYXVsdFBlZXJDb25uZWN0aW9uQ29uZmlndXJhdGlvbiB9IGZyb20gXCIuL3BlZXItY29ubmVjdGlvbi1jb25maWd1cmF0aW9uLWRlZmF1bHRcIjtcbmltcG9ydCB7IFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIgfSBmcm9tIFwiLi9zZXNzaW9uLWRlc2NyaXB0aW9uLWhhbmRsZXJcIjtcbi8qKlxuICogRnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5LlxuICogQHJlbWFya3NcbiAqIFNlZSB7QGxpbmsgZGVmYXVsdFBlZXJDb25uZWN0aW9uQ29uZmlndXJhdGlvbn0gZm9yIHRoZSBkZWZhdWx0IHBlZXIgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uLlxuICogVGhlIElDRSBnYXRoZXJpbmcgdGltZW91dCBkZWZhdWx0cyB0byA1MDAwbXMuXG4gKiBAcGFyYW0gbWVkaWFTdHJlYW1GYWN0b3J5IC0gTWVkaWFTdHJlYW0gZmFjdG9yeS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeShtZWRpYVN0cmVhbUZhY3RvcnkpIHtcbiAgICByZXR1cm4gKHNlc3Npb24sIG9wdGlvbnMpID0+IHtcbiAgICAgICAgLy8gcHJvdmlkZSBhIGRlZmF1bHQgbWVkaWEgc3RyZWFtIGZhY3RvcnkgaWYgbmVlZCBiZVxuICAgICAgICBpZiAobWVkaWFTdHJlYW1GYWN0b3J5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG1lZGlhU3RyZWFtRmFjdG9yeSA9IGRlZmF1bHRNZWRpYVN0cmVhbUZhY3RvcnkoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtYWtlIHN1cmUgd2UgYWxsb3cgYDBgIHRvIGJlIHBhc3NlZCBpbiBzbyB0aW1lb3V0IGNhbiBiZSBkaXNhYmxlZFxuICAgICAgICBjb25zdCBpY2VHYXRoZXJpbmdUaW1lb3V0ID0gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pY2VHYXRoZXJpbmdUaW1lb3V0KSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmljZUdhdGhlcmluZ1RpbWVvdXQgOiAyMDIyO1xuICAgICAgICAvLyBtZXJnZSBwYXNzZWQgZmFjdG9yeSBvcHRpb25zIGludG8gZGVmYXVsdCBzZXNzaW9uIGRlc2NyaXB0aW9uIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckNvbmZpZ3VyYXRpb24gPSB7XG4gICAgICAgICAgICBpY2VHYXRoZXJpbmdUaW1lb3V0LFxuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb25Db25maWd1cmF0aW9uOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRQZWVyQ29ubmVjdGlvbkNvbmZpZ3VyYXRpb24oKSksIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wZWVyQ29ubmVjdGlvbkNvbmZpZ3VyYXRpb24pXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGxvZ2dlciA9IHNlc3Npb24udXNlckFnZW50LmdldExvZ2dlcihcInNpcC5TZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyXCIpO1xuICAgICAgICByZXR1cm4gbmV3IFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIobG9nZ2VyLCBtZWRpYVN0cmVhbUZhY3RvcnksIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJDb25maWd1cmF0aW9uKTtcbiAgICB9O1xufVxuIiwiLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIFBhcmFtZXRlcnMge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0ge307XG4gICAgICAgIC8vIGZvciBpbiBpcyByZXF1aXJlZCBoZXJlIGFzIHRoZSBHcmFtbWFyIHBhcnNlciBpcyBhZGRpbmcgdG8gdGhlIHByb3RvdHlwZSBjaGFpblxuICAgICAgICBmb3IgKGNvbnN0IHBhcmFtIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgICAgIGlmIChwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KHBhcmFtKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UGFyYW0ocGFyYW0sIHBhcmFtZXRlcnNbcGFyYW1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRQYXJhbShrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVyc1trZXkudG9Mb3dlckNhc2UoKV0gPSAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiIHx8IHZhbHVlID09PSBudWxsKSA/IG51bGwgOiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFBhcmFtKGtleSkge1xuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzW2tleS50b0xvd2VyQ2FzZSgpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNQYXJhbShrZXkpIHtcbiAgICAgICAgcmV0dXJuICEhKGtleSAmJiB0aGlzLnBhcmFtZXRlcnNba2V5LnRvTG93ZXJDYXNlKCldICE9PSB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBkZWxldGVQYXJhbShrZXkpIHtcbiAgICAgICAga2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmICh0aGlzLmhhc1BhcmFtKGtleSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5wYXJhbWV0ZXJzW2tleV07XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wYXJhbWV0ZXJzW2tleV07XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXJQYXJhbXMoKSB7XG4gICAgICAgIHRoaXMucGFyYW1ldGVycyA9IHt9O1xuICAgIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbmltcG9ydCB7IFBhcmFtZXRlcnMgfSBmcm9tIFwiLi9wYXJhbWV0ZXJzXCI7XG4vKipcbiAqIFVSSS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFVSSSBleHRlbmRzIFBhcmFtZXRlcnMge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHNjaGVtZSAtXG4gICAgICogQHBhcmFtIHVzZXIgLVxuICAgICAqIEBwYXJhbSBob3N0IC1cbiAgICAgKiBAcGFyYW0gcG9ydCAtXG4gICAgICogQHBhcmFtIHBhcmFtZXRlcnMgLVxuICAgICAqIEBwYXJhbSBoZWFkZXJzIC1cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY2hlbWUgPSBcInNpcFwiLCB1c2VyLCBob3N0LCBwb3J0LCBwYXJhbWV0ZXJzLCBoZWFkZXJzKSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMgfHwge30pO1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSB7fTtcbiAgICAgICAgLy8gQ2hlY2tzXG4gICAgICAgIGlmICghaG9zdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbWlzc2luZyBvciBpbnZhbGlkIFwiaG9zdFwiIHBhcmFtZXRlcicpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaGVhZGVyIGluIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgICAgIGlmIChoZWFkZXJzLmhhc093blByb3BlcnR5KGhlYWRlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhlYWRlcihoZWFkZXIsIGhlYWRlcnNbaGVhZGVyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmF3IFVSSVxuICAgICAgICB0aGlzLnJhdyA9IHtcbiAgICAgICAgICAgIHNjaGVtZSxcbiAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICBob3N0LFxuICAgICAgICAgICAgcG9ydFxuICAgICAgICB9O1xuICAgICAgICAvLyBOb3JtYWxpemVkIFVSSVxuICAgICAgICB0aGlzLm5vcm1hbCA9IHtcbiAgICAgICAgICAgIHNjaGVtZTogc2NoZW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgaG9zdDogaG9zdC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgcG9ydFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgc2NoZW1lKCkgeyByZXR1cm4gdGhpcy5ub3JtYWwuc2NoZW1lOyB9XG4gICAgc2V0IHNjaGVtZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnJhdy5zY2hlbWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5ub3JtYWwuc2NoZW1lID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgZ2V0IHVzZXIoKSB7IHJldHVybiB0aGlzLm5vcm1hbC51c2VyOyB9XG4gICAgc2V0IHVzZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5ub3JtYWwudXNlciA9IHRoaXMucmF3LnVzZXIgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGhvc3QoKSB7IHJldHVybiB0aGlzLm5vcm1hbC5ob3N0OyB9XG4gICAgc2V0IGhvc3QodmFsdWUpIHtcbiAgICAgICAgdGhpcy5yYXcuaG9zdCA9IHZhbHVlO1xuICAgICAgICB0aGlzLm5vcm1hbC5ob3N0ID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgZ2V0IGFvcigpIHsgcmV0dXJuIHRoaXMubm9ybWFsLnVzZXIgKyBcIkBcIiArIHRoaXMubm9ybWFsLmhvc3Q7IH1cbiAgICBnZXQgcG9ydCgpIHsgcmV0dXJuIHRoaXMubm9ybWFsLnBvcnQ7IH1cbiAgICBzZXQgcG9ydCh2YWx1ZSkge1xuICAgICAgICB0aGlzLm5vcm1hbC5wb3J0ID0gdGhpcy5yYXcucG9ydCA9IHZhbHVlID09PSAwID8gdmFsdWUgOiB2YWx1ZTtcbiAgICB9XG4gICAgc2V0SGVhZGVyKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVhZGVyc1t0aGlzLmhlYWRlcml6ZShuYW1lKV0gPSAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG4gICAgfVxuICAgIGdldEhlYWRlcihuYW1lKSB7XG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJzW3RoaXMuaGVhZGVyaXplKG5hbWUpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNIZWFkZXIobmFtZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICAgIHJldHVybiAhIW5hbWUgJiYgISF0aGlzLmhlYWRlcnMuaGFzT3duUHJvcGVydHkodGhpcy5oZWFkZXJpemUobmFtZSkpO1xuICAgIH1cbiAgICBkZWxldGVIZWFkZXIoaGVhZGVyKSB7XG4gICAgICAgIGhlYWRlciA9IHRoaXMuaGVhZGVyaXplKGhlYWRlcik7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShoZWFkZXIpKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuaGVhZGVyc1toZWFkZXJdO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGVhZGVyc1toZWFkZXJdO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFySGVhZGVycygpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0ge307XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVSSSh0aGlzLl9yYXcuc2NoZW1lLCB0aGlzLl9yYXcudXNlciB8fCBcIlwiLCB0aGlzLl9yYXcuaG9zdCwgdGhpcy5fcmF3LnBvcnQsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wYXJhbWV0ZXJzKSksIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5oZWFkZXJzKSkpO1xuICAgIH1cbiAgICB0b1JhdygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RvU3RyaW5nKHRoaXMuX3Jhdyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG9TdHJpbmcodGhpcy5fbm9ybWFsKTtcbiAgICB9XG4gICAgZ2V0IF9ub3JtYWwoKSB7IHJldHVybiB0aGlzLm5vcm1hbDsgfVxuICAgIGdldCBfcmF3KCkgeyByZXR1cm4gdGhpcy5yYXc7IH1cbiAgICBfdG9TdHJpbmcodXJpKSB7XG4gICAgICAgIGxldCB1cmlTdHJpbmcgPSB1cmkuc2NoZW1lICsgXCI6XCI7XG4gICAgICAgIC8vIGFkZCBzbGFzaGVzIGlmIGl0J3Mgbm90IGEgc2lwKHMpIFVSSVxuICAgICAgICBpZiAoIXVyaS5zY2hlbWUudG9Mb3dlckNhc2UoKS5tYXRjaChcIl5zaXBzPyRcIikpIHtcbiAgICAgICAgICAgIHVyaVN0cmluZyArPSBcIi8vXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVyaS51c2VyKSB7XG4gICAgICAgICAgICB1cmlTdHJpbmcgKz0gdGhpcy5lc2NhcGVVc2VyKHVyaS51c2VyKSArIFwiQFwiO1xuICAgICAgICB9XG4gICAgICAgIHVyaVN0cmluZyArPSB1cmkuaG9zdDtcbiAgICAgICAgaWYgKHVyaS5wb3J0IHx8IHVyaS5wb3J0ID09PSAwKSB7XG4gICAgICAgICAgICB1cmlTdHJpbmcgKz0gXCI6XCIgKyB1cmkucG9ydDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHBhcmFtZXRlciBpbiB0aGlzLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkocGFyYW1ldGVyKSkge1xuICAgICAgICAgICAgICAgIHVyaVN0cmluZyArPSBcIjtcIiArIHBhcmFtZXRlcjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJhbWV0ZXJzW3BhcmFtZXRlcl0gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdXJpU3RyaW5nICs9IFwiPVwiICsgdGhpcy5wYXJhbWV0ZXJzW3BhcmFtZXRlcl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBoZWFkZXIgaW4gdGhpcy5oZWFkZXJzKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICAgICAgICBpZiAodGhpcy5oZWFkZXJzLmhhc093blByb3BlcnR5KGhlYWRlcikpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZvci1pbi1hcnJheVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaWR4IGluIHRoaXMuaGVhZGVyc1toZWFkZXJdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyc1toZWFkZXJdLmhhc093blByb3BlcnR5KGlkeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMucHVzaChoZWFkZXIgKyBcIj1cIiArIHRoaXMuaGVhZGVyc1toZWFkZXJdW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoZWFkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHVyaVN0cmluZyArPSBcIj9cIiArIGhlYWRlcnMuam9pbihcIiZcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVyaVN0cmluZztcbiAgICB9XG4gICAgLypcbiAgICAgKiBIZXgtZXNjYXBlIGEgU0lQIFVSSSB1c2VyLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJcbiAgICAgKi9cbiAgICBlc2NhcGVVc2VyKHVzZXIpIHtcbiAgICAgICAgbGV0IGRlY29kZWRVc2VyO1xuICAgICAgICAvLyBGSVhNRTogVGhpcyBpcyBjYWxsZWQgYnkgdG9TdHJpbmcgYWJvdmUgd2hpY2ggc2hvdWxkIG5ldmVyIHRocm93LCBidXRcbiAgICAgICAgLy8gZGVjb2RlVVJJQ29tcG9uZW50IGNhbiB0aHJvdyBhbmQgSSd2ZSBzZWVuIG9uZSBjYXNlIGluIHByb2R1Y3Rpb24gd2hlcmVcbiAgICAgICAgLy8gaXQgZGlkIHRocm93IHJlc3VsdGluZyBpbiBhIGNhc2NhZGluZyBmYWlsdXJlLiBUaGlzIGNsYXNzIHNob3VsZCBiZVxuICAgICAgICAvLyBmaXhlZCBzbyB0aGF0IGRlY29kZVVSSUNvbXBvbmVudCBpcyBub3QgY2FsbGVkIGF0IHRoaXMgcG9pbnQgKGluIHRvU3RyaW5nKS5cbiAgICAgICAgLy8gVGhlIHVzZXIgc2hvdWxkIGJlIGRlY29kZWQgd2hlbiB0aGUgVVJJIGlzIGNvbnN0cnVjdG9yIG9yIHNvbWUgb3RoZXJcbiAgICAgICAgLy8gcGxhY2Ugd2hlcmUgd2UgY2FuIGNhdGNoIHRoZSBlcnJvciBiZWZvcmUgdGhlIFVSSSBpcyBjcmVhdGVkIG9yIHNvbWVzdWNoLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1jYXRjaFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVjb2RlZFVzZXIgPSBkZWNvZGVVUklDb21wb25lbnQodXNlcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICAvLyBEb24ndCBoZXgtZXNjYXBlICc6JyAoJTNBKSwgJysnICglMkIpLCAnPycgKCUzRlwiKSwgJy8nICglMkYpLlxuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZWRVc2VyKVxuICAgICAgICAgICAgLnJlcGxhY2UoLyUzQS9pZywgXCI6XCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvJTJCL2lnLCBcIitcIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC8lM0YvaWcsIFwiP1wiKVxuICAgICAgICAgICAgLnJlcGxhY2UoLyUyRi9pZywgXCIvXCIpO1xuICAgIH1cbiAgICBoZWFkZXJpemUoc3RyKSB7XG4gICAgICAgIGNvbnN0IGV4Y2VwdGlvbnMgPSB7XG4gICAgICAgICAgICBcIkNhbGwtSWRcIjogXCJDYWxsLUlEXCIsXG4gICAgICAgICAgICBcIkNzZXFcIjogXCJDU2VxXCIsXG4gICAgICAgICAgICBcIk1pbi1TZVwiOiBcIk1pbi1TRVwiLFxuICAgICAgICAgICAgXCJSYWNrXCI6IFwiUkFja1wiLFxuICAgICAgICAgICAgXCJSc2VxXCI6IFwiUlNlcVwiLFxuICAgICAgICAgICAgXCJXd3ctQXV0aGVudGljYXRlXCI6IFwiV1dXLUF1dGhlbnRpY2F0ZVwiLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBuYW1lID0gc3RyLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCBcIi1cIikuc3BsaXQoXCItXCIpO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IG5hbWUubGVuZ3RoO1xuICAgICAgICBsZXQgaG5hbWUgPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCBwYXJ0ID0gMDsgcGFydCA8IHBhcnRzOyBwYXJ0KyspIHtcbiAgICAgICAgICAgIGlmIChwYXJ0ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgaG5hbWUgKz0gXCItXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBobmFtZSArPSBuYW1lW3BhcnRdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZVtwYXJ0XS5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4Y2VwdGlvbnNbaG5hbWVdKSB7XG4gICAgICAgICAgICBobmFtZSA9IGV4Y2VwdGlvbnNbaG5hbWVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBobmFtZTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBVUklzIGFyZSBlcXVpdmFsZW50IHBlciBSRkMgMzI2MSBTZWN0aW9uIDE5LjEuNC5cbiAqIEBwYXJhbSBhIFVSSSB0byBjb21wYXJlXG4gKiBAcGFyYW0gYiBVUkkgdG8gY29tcGFyZVxuICpcbiAqIEByZW1hcmtzXG4gKiAxOS4xLjQgVVJJIENvbXBhcmlzb25cbiAqIFNvbWUgb3BlcmF0aW9ucyBpbiB0aGlzIHNwZWNpZmljYXRpb24gcmVxdWlyZSBkZXRlcm1pbmluZyB3aGV0aGVyIHR3b1xuICogU0lQIG9yIFNJUFMgVVJJcyBhcmUgZXF1aXZhbGVudC5cbiAqXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE5LjEuNFxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVpdmFsZW50VVJJKGEsIGIpIHtcbiAgICAvLyBvICBBIFNJUCBhbmQgU0lQUyBVUkkgYXJlIG5ldmVyIGVxdWl2YWxlbnQuXG4gICAgaWYgKGEuc2NoZW1lICE9PSBiLnNjaGVtZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIG8gIENvbXBhcmlzb24gb2YgdGhlIHVzZXJpbmZvIG9mIFNJUCBhbmQgU0lQUyBVUklzIGlzIGNhc2UtXG4gICAgLy8gICAgc2Vuc2l0aXZlLiAgVGhpcyBpbmNsdWRlcyB1c2VyaW5mbyBjb250YWluaW5nIHBhc3N3b3JkcyBvclxuICAgIC8vICAgIGZvcm1hdHRlZCBhcyB0ZWxlcGhvbmUtc3Vic2NyaWJlcnMuICBDb21wYXJpc29uIG9mIGFsbCBvdGhlclxuICAgIC8vICAgIGNvbXBvbmVudHMgb2YgdGhlIFVSSSBpcyBjYXNlLWluc2Vuc2l0aXZlIHVubGVzcyBleHBsaWNpdGx5XG4gICAgLy8gICAgZGVmaW5lZCBvdGhlcndpc2UuXG4gICAgLy9cbiAgICAvLyBvICBUaGUgb3JkZXJpbmcgb2YgcGFyYW1ldGVycyBhbmQgaGVhZGVyIGZpZWxkcyBpcyBub3Qgc2lnbmlmaWNhbnRcbiAgICAvLyAgICBpbiBjb21wYXJpbmcgU0lQIGFuZCBTSVBTIFVSSXMuXG4gICAgLy9cbiAgICAvLyBvICBDaGFyYWN0ZXJzIG90aGVyIHRoYW4gdGhvc2UgaW4gdGhlIFwicmVzZXJ2ZWRcIiBzZXQgKHNlZSBSRkMgMjM5NlxuICAgIC8vICAgIFs1XSkgYXJlIGVxdWl2YWxlbnQgdG8gdGhlaXIgXCJcIiVcIiBIRVggSEVYXCIgZW5jb2RpbmcuXG4gICAgLy9cbiAgICAvLyBvICBBbiBJUCBhZGRyZXNzIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBhIEROUyBsb29rdXAgb2YgYSBob3N0IG5hbWVcbiAgICAvLyAgICBkb2VzIG5vdCBtYXRjaCB0aGF0IGhvc3QgbmFtZS5cbiAgICAvL1xuICAgIC8vIG8gIEZvciB0d28gVVJJcyB0byBiZSBlcXVhbCwgdGhlIHVzZXIsIHBhc3N3b3JkLCBob3N0LCBhbmQgcG9ydFxuICAgIC8vICAgIGNvbXBvbmVudHMgbXVzdCBtYXRjaC5cbiAgICAvL1xuICAgIC8vIEEgVVJJIG9taXR0aW5nIHRoZSB1c2VyIGNvbXBvbmVudCB3aWxsIG5vdCBtYXRjaCBhIFVSSSB0aGF0XG4gICAgLy8gaW5jbHVkZXMgb25lLiAgQSBVUkkgb21pdHRpbmcgdGhlIHBhc3N3b3JkIGNvbXBvbmVudCB3aWxsIG5vdFxuICAgIC8vIG1hdGNoIGEgVVJJIHRoYXQgaW5jbHVkZXMgb25lLlxuICAgIC8vXG4gICAgLy8gQSBVUkkgb21pdHRpbmcgYW55IGNvbXBvbmVudCB3aXRoIGEgZGVmYXVsdCB2YWx1ZSB3aWxsIG5vdFxuICAgIC8vIG1hdGNoIGEgVVJJIGV4cGxpY2l0bHkgY29udGFpbmluZyB0aGF0IGNvbXBvbmVudCB3aXRoIGl0c1xuICAgIC8vIGRlZmF1bHQgdmFsdWUuICBGb3IgaW5zdGFuY2UsIGEgVVJJIG9taXR0aW5nIHRoZSBvcHRpb25hbCBwb3J0XG4gICAgLy8gY29tcG9uZW50IHdpbGwgbm90IG1hdGNoIGEgVVJJIGV4cGxpY2l0bHkgZGVjbGFyaW5nIHBvcnQgNTA2MC5cbiAgICAvLyBUaGUgc2FtZSBpcyB0cnVlIGZvciB0aGUgdHJhbnNwb3J0LXBhcmFtZXRlciwgdHRsLXBhcmFtZXRlcixcbiAgICAvLyB1c2VyLXBhcmFtZXRlciwgYW5kIG1ldGhvZCBjb21wb25lbnRzLlxuICAgIC8vXG4gICAgLy8gRGVmaW5pbmcgc2lwOnVzZXJAaG9zdCB0byBub3QgYmUgZXF1aXZhbGVudCB0b1xuICAgIC8vIHNpcDp1c2VyQGhvc3Q6NTA2MCBpcyBhIGNoYW5nZSBmcm9tIFJGQyAyNTQzLiAgV2hlbiBkZXJpdmluZ1xuICAgIC8vIGFkZHJlc3NlcyBmcm9tIFVSSXMsIGVxdWl2YWxlbnQgYWRkcmVzc2VzIGFyZSBleHBlY3RlZCBmcm9tXG4gICAgLy8gZXF1aXZhbGVudCBVUklzLiAgVGhlIFVSSSBzaXA6dXNlckBob3N0OjUwNjAgd2lsbCBhbHdheXNcbiAgICAvLyByZXNvbHZlIHRvIHBvcnQgNTA2MC4gIFRoZSBVUkkgc2lwOnVzZXJAaG9zdCBtYXkgcmVzb2x2ZSB0b1xuICAgIC8vIG90aGVyIHBvcnRzIHRocm91Z2ggdGhlIEROUyBTUlYgbWVjaGFuaXNtcyBkZXRhaWxlZCBpbiBbNF0uXG4gICAgLy8gRklYTUU6IFRPRE86XG4gICAgLy8gLSBjaGFyYWN0ZXIgY29tcGFyZWQgdG8gaGV4IGVuY29kaW5nIGlzIG5vdCBoYW5kbGVkXG4gICAgLy8gLSBwYXNzd29yZCBkb2VzIG5vdCBleGlzdCBvbiBVUkkgY3VycmVudGx5XG4gICAgaWYgKGEudXNlciAhPT0gYi51c2VyIHx8IGEuaG9zdCAhPT0gYi5ob3N0IHx8IGEucG9ydCAhPT0gYi5wb3J0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gbyAgVVJJIHVyaS1wYXJhbWV0ZXIgY29tcG9uZW50cyBhcmUgY29tcGFyZWQgYXMgZm9sbG93czpcbiAgICBmdW5jdGlvbiBjb21wYXJlUGFyYW1ldGVycyhhLCBiKSB7XG4gICAgICAgIC8vICAtICBBbnkgdXJpLXBhcmFtZXRlciBhcHBlYXJpbmcgaW4gYm90aCBVUklzIG11c3QgbWF0Y2guXG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcktleXNBID0gT2JqZWN0LmtleXMoYS5wYXJhbWV0ZXJzKTtcbiAgICAgICAgY29uc3QgcGFyYW1ldGVyS2V5c0IgPSBPYmplY3Qua2V5cyhiLnBhcmFtZXRlcnMpO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBwYXJhbWV0ZXJLZXlzQS5maWx0ZXIoeCA9PiBwYXJhbWV0ZXJLZXlzQi5pbmNsdWRlcyh4KSk7XG4gICAgICAgIGlmICghaW50ZXJzZWN0aW9uLmV2ZXJ5KGtleSA9PiBhLnBhcmFtZXRlcnNba2V5XSA9PT0gYi5wYXJhbWV0ZXJzW2tleV0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gIC0gIEEgdXNlciwgdHRsLCBvciBtZXRob2QgdXJpLXBhcmFtZXRlciBhcHBlYXJpbmcgaW4gb25seSBvbmVcbiAgICAgICAgLy8gICAgIFVSSSBuZXZlciBtYXRjaGVzLCBldmVuIGlmIGl0IGNvbnRhaW5zIHRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAgICBpZiAoIVtcInVzZXJcIiwgXCJ0dGxcIiwgXCJtZXRob2RcIiwgXCJ0cmFuc3BvcnRcIl0uZXZlcnkoa2V5ID0+IGEuaGFzUGFyYW0oa2V5KSAmJiBiLmhhc1BhcmFtKGtleSkgfHwgIWEuaGFzUGFyYW0oa2V5KSAmJiAhYi5oYXNQYXJhbShrZXkpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vICAtICBBIFVSSSB0aGF0IGluY2x1ZGVzIGFuIG1hZGRyIHBhcmFtZXRlciB3aWxsIG5vdCBtYXRjaCBhIFVSSVxuICAgICAgICAvLyAgICAgdGhhdCBjb250YWlucyBubyBtYWRkciBwYXJhbWV0ZXIuXG4gICAgICAgIGlmICghW1wibWFkZHJcIl0uZXZlcnkoa2V5ID0+IGEuaGFzUGFyYW0oa2V5KSAmJiBiLmhhc1BhcmFtKGtleSkgfHwgIWEuaGFzUGFyYW0oa2V5KSAmJiAhYi5oYXNQYXJhbShrZXkpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vICAtICBBbGwgb3RoZXIgdXJpLXBhcmFtZXRlcnMgYXBwZWFyaW5nIGluIG9ubHkgb25lIFVSSSBhcmVcbiAgICAgICAgLy8gICAgIGlnbm9yZWQgd2hlbiBjb21wYXJpbmcgdGhlIFVSSXMuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWNvbXBhcmVQYXJhbWV0ZXJzKGEsIGIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gbyAgVVJJIGhlYWRlciBjb21wb25lbnRzIGFyZSBuZXZlciBpZ25vcmVkLiAgQW55IHByZXNlbnQgaGVhZGVyXG4gICAgLy8gICAgY29tcG9uZW50IE1VU1QgYmUgcHJlc2VudCBpbiBib3RoIFVSSXMgYW5kIG1hdGNoIGZvciB0aGUgVVJJc1xuICAgIC8vICAgIHRvIG1hdGNoLiAgVGhlIG1hdGNoaW5nIHJ1bGVzIGFyZSBkZWZpbmVkIGZvciBlYWNoIGhlYWRlciBmaWVsZFxuICAgIC8vICAgIGluIFNlY3Rpb24gMjAuXG4gICAgY29uc3QgaGVhZGVyS2V5c0EgPSBPYmplY3Qua2V5cyhhLmhlYWRlcnMpO1xuICAgIGNvbnN0IGhlYWRlcktleXNCID0gT2JqZWN0LmtleXMoYi5oZWFkZXJzKTtcbiAgICAvLyBObyBuZWVkIHRvIGNoZWNrIGlmIG5vIGhlYWRlcnNcbiAgICBpZiAoaGVhZGVyS2V5c0EubGVuZ3RoICE9PSAwIHx8IGhlYWRlcktleXNCLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAvLyBNdXN0IGhhdmUgc2FtZSBudW1iZXIgb2YgaGVhZGVyc1xuICAgICAgICBpZiAoaGVhZGVyS2V5c0EubGVuZ3RoICE9PSBoZWFkZXJLZXlzQi5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBNdXN0IGhhdmUgc2FtZSBoZWFkZXJzXG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IGhlYWRlcktleXNBLmZpbHRlcih4ID0+IGhlYWRlcktleXNCLmluY2x1ZGVzKHgpKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGggIT09IGhlYWRlcktleXNCLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZJWE1FOiBOb3QgdG8gc3BlYy4gQnV0IHBlcmhhcHMgbm90IHdvcnRoIGZpeGluZz9cbiAgICAgICAgLy8gTXVzdCBoYXZlIHNhbWUgaGVhZGVyIHZhbHVlc1xuICAgICAgICAvLyBJdCBzZWVtcyB0b28gbXVjaCB0byBjb25zaWRlciBtdWx0aXBsZSBoZWFkZXJzIHdpdGggc2FtZSBuYW1lLlxuICAgICAgICAvLyBJdCBzZWVtcyB0b28gbXVjaCB0byBjb21wYXJlIHR3byBoZWFkZXIgcGFyYW1zIGFjY29yZGluZyB0byB0aGUgcnVsZSBvZiBlYWNoIGhlYWRlci5cbiAgICAgICAgLy8gV2UnbGwgYXNzdW1lIGEgc2luZ2xlIGhlYWRlciBhbmQgY29tcGFyZSB0aGVtIHN0cmluZyB0byBzdHJpbmcuLi5cbiAgICAgICAgaWYgKCFpbnRlcnNlY3Rpb24uZXZlcnkoa2V5ID0+IGEuaGVhZGVyc1trZXldLmxlbmd0aCAmJiBiLmhlYWRlcnNba2V5XS5sZW5ndGggJiYgYS5oZWFkZXJzW2tleV1bMF0gPT09IGIuaGVhZGVyc1trZXldWzBdKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuIiwiLyoqXG4gKiBMb2cgbGV2ZWxzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdmFyIExldmVscztcbihmdW5jdGlvbiAoTGV2ZWxzKSB7XG4gICAgTGV2ZWxzW0xldmVsc1tcImVycm9yXCJdID0gMF0gPSBcImVycm9yXCI7XG4gICAgTGV2ZWxzW0xldmVsc1tcIndhcm5cIl0gPSAxXSA9IFwid2FyblwiO1xuICAgIExldmVsc1tMZXZlbHNbXCJsb2dcIl0gPSAyXSA9IFwibG9nXCI7XG4gICAgTGV2ZWxzW0xldmVsc1tcImRlYnVnXCJdID0gM10gPSBcImRlYnVnXCI7XG59KShMZXZlbHMgfHwgKExldmVscyA9IHt9KSk7XG4iLCJpbXBvcnQgeyBMZXZlbHMgfSBmcm9tIFwiLi9sZXZlbHNcIjtcbi8qKlxuICogTG9nZ2VyLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihsb2dnZXIsIGNhdGVnb3J5LCBsYWJlbCkge1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgfVxuICAgIGVycm9yKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5nZW5lcmljTG9nKExldmVscy5lcnJvciwgY29udGVudCk7XG4gICAgfVxuICAgIHdhcm4oY29udGVudCkge1xuICAgICAgICB0aGlzLmdlbmVyaWNMb2coTGV2ZWxzLndhcm4sIGNvbnRlbnQpO1xuICAgIH1cbiAgICBsb2coY29udGVudCkge1xuICAgICAgICB0aGlzLmdlbmVyaWNMb2coTGV2ZWxzLmxvZywgY29udGVudCk7XG4gICAgfVxuICAgIGRlYnVnKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5nZW5lcmljTG9nKExldmVscy5kZWJ1ZywgY29udGVudCk7XG4gICAgfVxuICAgIGdlbmVyaWNMb2cobGV2ZWwsIGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZ2VuZXJpY0xvZyhsZXZlbCwgdGhpcy5jYXRlZ29yeSwgdGhpcy5sYWJlbCwgY29udGVudCk7XG4gICAgfVxuICAgIGdldCBsZXZlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9nZ2VyLmxldmVsO1xuICAgIH1cbiAgICBzZXQgbGV2ZWwobmV3TGV2ZWwpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubGV2ZWwgPSBuZXdMZXZlbDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBMZXZlbHMgfSBmcm9tIFwiLi9sZXZlbHNcIjtcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuL2xvZ2dlclwiO1xuLyoqXG4gKiBMb2dnZXIuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXJGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5idWlsdGluRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xldmVsID0gTGV2ZWxzLmxvZztcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdGhpcy5sb2dnZXJzID0ge307XG4gICAgICAgIHRoaXMubG9nZ2VyID0gdGhpcy5nZXRMb2dnZXIoXCJzaXA6bG9nZ2VyZmFjdG9yeVwiKTtcbiAgICB9XG4gICAgZ2V0IGxldmVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGV2ZWw7XG4gICAgfVxuICAgIHNldCBsZXZlbChuZXdMZXZlbCkge1xuICAgICAgICBpZiAobmV3TGV2ZWwgPj0gMCAmJiBuZXdMZXZlbCA8PSAzKSB7XG4gICAgICAgICAgICB0aGlzLl9sZXZlbCA9IG5ld0xldmVsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5ld0xldmVsID4gMykge1xuICAgICAgICAgICAgdGhpcy5fbGV2ZWwgPSAzO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKExldmVscy5oYXNPd25Qcm9wZXJ0eShuZXdMZXZlbCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2xldmVsID0gbmV3TGV2ZWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcImludmFsaWQgJ2xldmVsJyBwYXJhbWV0ZXIgdmFsdWU6IFwiICsgSlNPTi5zdHJpbmdpZnkobmV3TGV2ZWwpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCBjb25uZWN0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25uZWN0b3I7XG4gICAgfVxuICAgIHNldCBjb25uZWN0b3IodmFsdWUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fY29ubmVjdG9yID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0b3IgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiaW52YWxpZCAnY29ubmVjdG9yJyBwYXJhbWV0ZXIgdmFsdWU6IFwiICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRMb2dnZXIoY2F0ZWdvcnksIGxhYmVsKSB7XG4gICAgICAgIGlmIChsYWJlbCAmJiB0aGlzLmxldmVsID09PSAzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExvZ2dlcih0aGlzLCBjYXRlZ29yeSwgbGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMubG9nZ2Vyc1tjYXRlZ29yeV0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvZ2dlcnNbY2F0ZWdvcnldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcih0aGlzLCBjYXRlZ29yeSk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlcnNbY2F0ZWdvcnldID0gbG9nZ2VyO1xuICAgICAgICAgICAgcmV0dXJuIGxvZ2dlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdlbmVyaWNMb2cobGV2ZWxUb0xvZywgY2F0ZWdvcnksIGxhYmVsLCBjb250ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmxldmVsID49IGxldmVsVG9Mb2cpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1aWx0aW5FbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmludChsZXZlbFRvTG9nLCBjYXRlZ29yeSwgbGFiZWwsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0b3IoTGV2ZWxzW2xldmVsVG9Mb2ddLCBjYXRlZ29yeSwgbGFiZWwsIGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcHJpbnQobGV2ZWxUb0xvZywgY2F0ZWdvcnksIGxhYmVsLCBjb250ZW50KSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IFtuZXcgRGF0ZSgpLCBjYXRlZ29yeV07XG4gICAgICAgICAgICBpZiAobGFiZWwpIHtcbiAgICAgICAgICAgICAgICBwcmVmaXgucHVzaChsYWJlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50ID0gcHJlZml4LmNvbmNhdChjb250ZW50KS5qb2luKFwiIHwgXCIpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAobGV2ZWxUb0xvZykge1xuICAgICAgICAgICAgY2FzZSBMZXZlbHMuZXJyb3I6XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMZXZlbHMud2FybjpcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihjb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTGV2ZWxzLmxvZzpcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMZXZlbHMuZGVidWc6XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IFBhcmFtZXRlcnMgfSBmcm9tIFwiLi9wYXJhbWV0ZXJzXCI7XG4vKipcbiAqIE5hbWUgQWRkcmVzcyBTSVAgaGVhZGVyLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTmFtZUFkZHJIZWFkZXIgZXh0ZW5kcyBQYXJhbWV0ZXJzIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB1cmkgLVxuICAgICAqIEBwYXJhbSBkaXNwbGF5TmFtZSAtXG4gICAgICogQHBhcmFtIHBhcmFtZXRlcnMgLVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHVyaSwgZGlzcGxheU5hbWUsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMudXJpID0gdXJpO1xuICAgICAgICB0aGlzLl9kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuICAgIH1cbiAgICBnZXQgZnJpZW5kbHlOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5TmFtZSB8fCB0aGlzLnVyaS5hb3I7XG4gICAgfVxuICAgIGdldCBkaXNwbGF5TmFtZSgpIHsgcmV0dXJuIHRoaXMuX2Rpc3BsYXlOYW1lOyB9XG4gICAgc2V0IGRpc3BsYXlOYW1lKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2Rpc3BsYXlOYW1lID0gdmFsdWU7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IE5hbWVBZGRySGVhZGVyKHRoaXMudXJpLmNsb25lKCksIHRoaXMuX2Rpc3BsYXlOYW1lLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucGFyYW1ldGVycykpKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCBib2R5ID0gKHRoaXMuZGlzcGxheU5hbWUgfHwgdGhpcy5kaXNwbGF5TmFtZSA9PT0gXCIwXCIpID8gJ1wiJyArIHRoaXMuZGlzcGxheU5hbWUgKyAnXCIgJyA6IFwiXCI7XG4gICAgICAgIGJvZHkgKz0gXCI8XCIgKyB0aGlzLnVyaS50b1N0cmluZygpICsgXCI+XCI7XG4gICAgICAgIGZvciAoY29uc3QgcGFyYW1ldGVyIGluIHRoaXMucGFyYW1ldGVycykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShwYXJhbWV0ZXIpKSB7XG4gICAgICAgICAgICAgICAgYm9keSArPSBcIjtcIiArIHBhcmFtZXRlcjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJhbWV0ZXJzW3BhcmFtZXRlcl0gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYm9keSArPSBcIj1cIiArIHRoaXMucGFyYW1ldGVyc1twYXJhbWV0ZXJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYm9keTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOYW1lQWRkckhlYWRlciB9IGZyb20gXCIuLi8uLi9uYW1lLWFkZHItaGVhZGVyXCI7XG5pbXBvcnQgeyBVUkkgfSBmcm9tIFwiLi4vLi4vdXJpXCI7XG5leHBvcnQgY2xhc3MgU3ludGF4RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXhwZWN0ZWQsIGZvdW5kLCBsb2NhdGlvbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLmV4cGVjdGVkID0gZXhwZWN0ZWQ7XG4gICAgICAgIHRoaXMuZm91bmQgPSBmb3VuZDtcbiAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlN5bnRheEVycm9yXCI7XG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgU3ludGF4RXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBidWlsZE1lc3NhZ2UoZXhwZWN0ZWQsIGZvdW5kKSB7XG4gICAgICAgIGZ1bmN0aW9uIGhleChjaCkge1xuICAgICAgICAgICAgcmV0dXJuIGNoLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbGl0ZXJhbEVzY2FwZShzKSB7XG4gICAgICAgICAgICByZXR1cm4gc1xuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcL2csIFwiXFxcXFxcXFxcIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXCIvZywgXCJcXFxcXFxcIlwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXDAvZywgXCJcXFxcMFwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHQvZywgXCJcXFxcdFwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXG4vZywgXCJcXFxcblwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHIvZywgXCJcXFxcclwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx4MDAtXFx4MEZdL2csIChjaCkgPT4gXCJcXFxceDBcIiArIGhleChjaCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHgxMC1cXHgxRlxceDdGLVxceDlGXS9nLCAoY2gpID0+IFwiXFxcXHhcIiArIGhleChjaCkpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNsYXNzRXNjYXBlKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBzXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXF0vZywgXCJcXFxcXVwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXF4vZywgXCJcXFxcXlwiKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8tL2csIFwiXFxcXC1cIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwwL2csIFwiXFxcXDBcIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFx0L2csIFwiXFxcXHRcIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxuL2csIFwiXFxcXG5cIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxyL2csIFwiXFxcXHJcIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xceDAwLVxceDBGXS9nLCAoY2gpID0+IFwiXFxcXHgwXCIgKyBoZXgoY2gpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx4MTAtXFx4MUZcXHg3Ri1cXHg5Rl0vZywgKGNoKSA9PiBcIlxcXFx4XCIgKyBoZXgoY2gpKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBkZXNjcmliZUV4cGVjdGF0aW9uKGV4cGVjdGF0aW9uKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV4cGVjdGF0aW9uLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwibGl0ZXJhbFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcXFwiXCIgKyBsaXRlcmFsRXNjYXBlKGV4cGVjdGF0aW9uLnRleHQpICsgXCJcXFwiXCI7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNsYXNzXCI6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzY2FwZWRQYXJ0cyA9IGV4cGVjdGF0aW9uLnBhcnRzLm1hcCgocGFydCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocGFydClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNsYXNzRXNjYXBlKHBhcnRbMF0pICsgXCItXCIgKyBjbGFzc0VzY2FwZShwYXJ0WzFdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY2xhc3NFc2NhcGUocGFydCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJbXCIgKyAoZXhwZWN0YXRpb24uaW52ZXJ0ZWQgPyBcIl5cIiA6IFwiXCIpICsgZXNjYXBlZFBhcnRzICsgXCJdXCI7XG4gICAgICAgICAgICAgICAgY2FzZSBcImFueVwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhbnkgY2hhcmFjdGVyXCI7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlbmQgb2YgaW5wdXRcIjtcbiAgICAgICAgICAgICAgICBjYXNlIFwib3RoZXJcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cGVjdGF0aW9uLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlRXhwZWN0ZWQoZXhwZWN0ZWQxKSB7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbnMgPSBleHBlY3RlZDEubWFwKGRlc2NyaWJlRXhwZWN0YXRpb24pO1xuICAgICAgICAgICAgbGV0IGk7XG4gICAgICAgICAgICBsZXQgajtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9ucy5zb3J0KCk7XG4gICAgICAgICAgICBpZiAoZGVzY3JpcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAxLCBqID0gMTsgaSA8IGRlc2NyaXB0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzY3JpcHRpb25zW2kgLSAxXSAhPT0gZGVzY3JpcHRpb25zW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbnNbal0gPSBkZXNjcmlwdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb25zLmxlbmd0aCA9IGo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGRlc2NyaXB0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbnNbMF07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRpb25zWzBdICsgXCIgb3IgXCIgKyBkZXNjcmlwdGlvbnNbMV07XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9ucy5zbGljZSgwLCAtMSkuam9pbihcIiwgXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwiLCBvciBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKyBkZXNjcmlwdGlvbnNbZGVzY3JpcHRpb25zLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlRm91bmQoZm91bmQxKSB7XG4gICAgICAgICAgICByZXR1cm4gZm91bmQxID8gXCJcXFwiXCIgKyBsaXRlcmFsRXNjYXBlKGZvdW5kMSkgKyBcIlxcXCJcIiA6IFwiZW5kIG9mIGlucHV0XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiRXhwZWN0ZWQgXCIgKyBkZXNjcmliZUV4cGVjdGVkKGV4cGVjdGVkKSArIFwiIGJ1dCBcIiArIGRlc2NyaWJlRm91bmQoZm91bmQpICsgXCIgZm91bmQuXCI7XG4gICAgfVxufVxuZnVuY3Rpb24gcGVnJHBhcnNlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMgOiB7fTtcbiAgICBjb25zdCBwZWckRkFJTEVEID0ge307XG4gICAgY29uc3QgcGVnJHN0YXJ0UnVsZUluZGljZXMgPSB7IENvbnRhY3Q6IDExOSwgTmFtZV9BZGRyX0hlYWRlcjogMTU2LCBSZWNvcmRfUm91dGU6IDE3NiwgUmVxdWVzdF9SZXNwb25zZTogODEsIFNJUF9VUkk6IDQ1LCBTdWJzY3JpcHRpb25fU3RhdGU6IDE4NiwgU3VwcG9ydGVkOiAxOTEsIFJlcXVpcmU6IDE4MiwgVmlhOiAxOTQsIGFic29sdXRlVVJJOiA4NCwgQ2FsbF9JRDogMTE4LCBDb250ZW50X0Rpc3Bvc2l0aW9uOiAxMzAsIENvbnRlbnRfTGVuZ3RoOiAxMzUsIENvbnRlbnRfVHlwZTogMTM2LCBDU2VxOiAxNDYsIGRpc3BsYXlOYW1lOiAxMjIsIEV2ZW50OiAxNDksIEZyb206IDE1MSwgaG9zdDogNTIsIE1heF9Gb3J3YXJkczogMTU0LCBNaW5fU0U6IDIxMywgUHJveHlfQXV0aGVudGljYXRlOiAxNTcsIHF1b3RlZF9zdHJpbmc6IDQwLCBSZWZlcl9UbzogMTc4LCBSZXBsYWNlczogMTc5LCBTZXNzaW9uX0V4cGlyZXM6IDIxMCwgc3R1bl9VUkk6IDIxNywgVG86IDE5MiwgdHVybl9VUkk6IDIyMywgdXVpZDogMjI2LCBXV1dfQXV0aGVudGljYXRlOiAyMDksIGNoYWxsZW5nZTogMTU4LCBzaXBmcmFnOiAyMzAsIFJlZmVycmVkX0J5OiAyMzEgfTtcbiAgICBsZXQgcGVnJHN0YXJ0UnVsZUluZGV4ID0gMTE5O1xuICAgIGNvbnN0IHBlZyRjb25zdHMgPSBbXG4gICAgICAgIFwiXFxyXFxuXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJcXHJcXG5cIiwgZmFsc2UpLFxuICAgICAgICAvXlswLTldLyxcbiAgICAgICAgcGVnJGNsYXNzRXhwZWN0YXRpb24oW1tcIjBcIiwgXCI5XCJdXSwgZmFsc2UsIGZhbHNlKSxcbiAgICAgICAgL15bYS16QS1aXS8sXG4gICAgICAgIHBlZyRjbGFzc0V4cGVjdGF0aW9uKFtbXCJhXCIsIFwielwiXSwgW1wiQVwiLCBcIlpcIl1dLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICAvXlswLTlhLWZBLUZdLyxcbiAgICAgICAgcGVnJGNsYXNzRXhwZWN0YXRpb24oW1tcIjBcIiwgXCI5XCJdLCBbXCJhXCIsIFwiZlwiXSwgW1wiQVwiLCBcIkZcIl1dLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICAvXltcXDAtXFx4RkZdLyxcbiAgICAgICAgcGVnJGNsYXNzRXhwZWN0YXRpb24oW1tcIlxcMFwiLCBcIlxceEZGXCJdXSwgZmFsc2UsIGZhbHNlKSxcbiAgICAgICAgL15bXCJdLyxcbiAgICAgICAgcGVnJGNsYXNzRXhwZWN0YXRpb24oW1wiXFxcIlwiXSwgZmFsc2UsIGZhbHNlKSxcbiAgICAgICAgXCIgXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCIgXCIsIGZhbHNlKSxcbiAgICAgICAgXCJcXHRcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlxcdFwiLCBmYWxzZSksXG4gICAgICAgIC9eW2EtekEtWjAtOV0vLFxuICAgICAgICBwZWckY2xhc3NFeHBlY3RhdGlvbihbW1wiYVwiLCBcInpcIl0sIFtcIkFcIiwgXCJaXCJdLCBbXCIwXCIsIFwiOVwiXV0sIGZhbHNlLCBmYWxzZSksXG4gICAgICAgIFwiO1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiO1wiLCBmYWxzZSksXG4gICAgICAgIFwiL1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiL1wiLCBmYWxzZSksXG4gICAgICAgIFwiP1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiP1wiLCBmYWxzZSksXG4gICAgICAgIFwiOlwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiOlwiLCBmYWxzZSksXG4gICAgICAgIFwiQFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiQFwiLCBmYWxzZSksXG4gICAgICAgIFwiJlwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiJlwiLCBmYWxzZSksXG4gICAgICAgIFwiPVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiPVwiLCBmYWxzZSksXG4gICAgICAgIFwiK1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiK1wiLCBmYWxzZSksXG4gICAgICAgIFwiJFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiJFwiLCBmYWxzZSksXG4gICAgICAgIFwiLFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiLFwiLCBmYWxzZSksXG4gICAgICAgIFwiLVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiLVwiLCBmYWxzZSksXG4gICAgICAgIFwiX1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiX1wiLCBmYWxzZSksXG4gICAgICAgIFwiLlwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiLlwiLCBmYWxzZSksXG4gICAgICAgIFwiIVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiIVwiLCBmYWxzZSksXG4gICAgICAgIFwiflwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiflwiLCBmYWxzZSksXG4gICAgICAgIFwiKlwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiKlwiLCBmYWxzZSksXG4gICAgICAgIFwiJ1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiJ1wiLCBmYWxzZSksXG4gICAgICAgIFwiKFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiKFwiLCBmYWxzZSksXG4gICAgICAgIFwiKVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiKVwiLCBmYWxzZSksXG4gICAgICAgIFwiJVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiJVwiLCBmYWxzZSksXG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiIFwiOyB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiAnOic7IH0sXG4gICAgICAgIC9eWyEtfl0vLFxuICAgICAgICBwZWckY2xhc3NFeHBlY3RhdGlvbihbW1wiIVwiLCBcIn5cIl1dLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICAvXltcXHg4MC1cXHVGRkZGXS8sXG4gICAgICAgIHBlZyRjbGFzc0V4cGVjdGF0aW9uKFtbXCJcXHg4MFwiLCBcIlxcdUZGRkZcIl1dLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICAvXltcXHg4MC1cXHhCRl0vLFxuICAgICAgICBwZWckY2xhc3NFeHBlY3RhdGlvbihbW1wiXFx4ODBcIiwgXCJcXHhCRlwiXV0sIGZhbHNlLCBmYWxzZSksXG4gICAgICAgIC9eW2EtZl0vLFxuICAgICAgICBwZWckY2xhc3NFeHBlY3RhdGlvbihbW1wiYVwiLCBcImZcIl1dLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICBcImBcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImBcIiwgZmFsc2UpLFxuICAgICAgICBcIjxcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIjxcIiwgZmFsc2UpLFxuICAgICAgICBcIj5cIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIj5cIiwgZmFsc2UpLFxuICAgICAgICBcIlxcXFxcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlxcXFxcIiwgZmFsc2UpLFxuICAgICAgICBcIltcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIltcIiwgZmFsc2UpLFxuICAgICAgICBcIl1cIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIl1cIiwgZmFsc2UpLFxuICAgICAgICBcIntcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIntcIiwgZmFsc2UpLFxuICAgICAgICBcIn1cIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIn1cIiwgZmFsc2UpLFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBcIipcIjsgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gXCIvXCI7IH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiPVwiOyB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBcIihcIjsgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gXCIpXCI7IH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiPlwiOyB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBcIjxcIjsgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gXCIsXCI7IH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiO1wiOyB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBcIjpcIjsgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJcXFwiXCI7IH0sXG4gICAgICAgIC9eWyEtJ10vLFxuICAgICAgICBwZWckY2xhc3NFeHBlY3RhdGlvbihbW1wiIVwiLCBcIidcIl1dLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICAvXlsqLVtdLyxcbiAgICAgICAgcGVnJGNsYXNzRXhwZWN0YXRpb24oW1tcIipcIiwgXCJbXCJdXSwgZmFsc2UsIGZhbHNlKSxcbiAgICAgICAgL15bXFxdLX5dLyxcbiAgICAgICAgcGVnJGNsYXNzRXhwZWN0YXRpb24oW1tcIl1cIiwgXCJ+XCJdXSwgZmFsc2UsIGZhbHNlKSxcbiAgICAgICAgZnVuY3Rpb24gKGNvbnRlbnRzKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udGVudHM7XG4gICAgICAgIH0sXG4gICAgICAgIC9eWyMtW10vLFxuICAgICAgICBwZWckY2xhc3NFeHBlY3RhdGlvbihbW1wiI1wiLCBcIltcIl1dLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICAvXltcXDAtXFx0XS8sXG4gICAgICAgIHBlZyRjbGFzc0V4cGVjdGF0aW9uKFtbXCJcXDBcIiwgXCJcXHRcIl1dLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICAvXltcXHgwQi1cXGZdLyxcbiAgICAgICAgcGVnJGNsYXNzRXhwZWN0YXRpb24oW1tcIlxceDBCXCIsIFwiXFxmXCJdXSwgZmFsc2UsIGZhbHNlKSxcbiAgICAgICAgL15bXFx4MEUtXFx4N0ZdLyxcbiAgICAgICAgcGVnJGNsYXNzRXhwZWN0YXRpb24oW1tcIlxceDBFXCIsIFwiXFx4N0ZcIl1dLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpID0gbmV3IFVSSShvcHRpb25zLmRhdGEuc2NoZW1lLCBvcHRpb25zLmRhdGEudXNlciwgb3B0aW9ucy5kYXRhLmhvc3QsIG9wdGlvbnMuZGF0YS5wb3J0KTtcbiAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuc2NoZW1lO1xuICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS51c2VyO1xuICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5ob3N0O1xuICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5ob3N0X3R5cGU7XG4gICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnBvcnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmkgPSBuZXcgVVJJKG9wdGlvbnMuZGF0YS5zY2hlbWUsIG9wdGlvbnMuZGF0YS51c2VyLCBvcHRpb25zLmRhdGEuaG9zdCwgb3B0aW9ucy5kYXRhLnBvcnQsIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zLCBvcHRpb25zLmRhdGEudXJpX2hlYWRlcnMpO1xuICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5zY2hlbWU7XG4gICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnVzZXI7XG4gICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLmhvc3Q7XG4gICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLmhvc3RfdHlwZTtcbiAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEucG9ydDtcbiAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEudXJpX3BhcmFtcztcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXJ0UnVsZSA9PT0gJ1NJUF9VUkknKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gb3B0aW9ucy5kYXRhLnVyaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJzaXBzXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJzaXBzXCIsIHRydWUpLFxuICAgICAgICBcInNpcFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwic2lwXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAodXJpX3NjaGVtZSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnNjaGVtZSA9IHVyaV9zY2hlbWU7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51c2VyID0gZGVjb2RlVVJJQ29tcG9uZW50KHRleHQoKS5zbGljZSgwLCAtMSkpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEucGFzc3dvcmQgPSB0ZXh0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5ob3N0ID0gdGV4dCgpO1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuZGF0YS5ob3N0O1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEuaG9zdF90eXBlID0gJ2RvbWFpbic7XG4gICAgICAgICAgICByZXR1cm4gdGV4dCgpO1xuICAgICAgICB9LFxuICAgICAgICAvXlthLXpBLVowLTlfXFwtXS8sXG4gICAgICAgIHBlZyRjbGFzc0V4cGVjdGF0aW9uKFtbXCJhXCIsIFwielwiXSwgW1wiQVwiLCBcIlpcIl0sIFtcIjBcIiwgXCI5XCJdLCBcIl9cIiwgXCItXCJdLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICAvXlthLXpBLVowLTlcXC1dLyxcbiAgICAgICAgcGVnJGNsYXNzRXhwZWN0YXRpb24oW1tcImFcIiwgXCJ6XCJdLCBbXCJBXCIsIFwiWlwiXSwgW1wiMFwiLCBcIjlcIl0sIFwiLVwiXSwgZmFsc2UsIGZhbHNlKSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmhvc3RfdHlwZSA9ICdJUHY2JztcbiAgICAgICAgICAgIHJldHVybiB0ZXh0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiOjpcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIjo6XCIsIGZhbHNlKSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmhvc3RfdHlwZSA9ICdJUHY2JztcbiAgICAgICAgICAgIHJldHVybiB0ZXh0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5ob3N0X3R5cGUgPSAnSVB2NCc7XG4gICAgICAgICAgICByZXR1cm4gdGV4dCgpO1xuICAgICAgICB9LFxuICAgICAgICBcIjI1XCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCIyNVwiLCBmYWxzZSksXG4gICAgICAgIC9eWzAtNV0vLFxuICAgICAgICBwZWckY2xhc3NFeHBlY3RhdGlvbihbW1wiMFwiLCBcIjVcIl1dLCBmYWxzZSwgZmFsc2UpLFxuICAgICAgICBcIjJcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIjJcIiwgZmFsc2UpLFxuICAgICAgICAvXlswLTRdLyxcbiAgICAgICAgcGVnJGNsYXNzRXhwZWN0YXRpb24oW1tcIjBcIiwgXCI0XCJdXSwgZmFsc2UsIGZhbHNlKSxcbiAgICAgICAgXCIxXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCIxXCIsIGZhbHNlKSxcbiAgICAgICAgL15bMS05XS8sXG4gICAgICAgIHBlZyRjbGFzc0V4cGVjdGF0aW9uKFtbXCIxXCIsIFwiOVwiXV0sIGZhbHNlLCBmYWxzZSksXG4gICAgICAgIGZ1bmN0aW9uIChwb3J0KSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBwb3J0ID0gcGFyc2VJbnQocG9ydC5qb2luKCcnKSk7XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEucG9ydCA9IHBvcnQ7XG4gICAgICAgICAgICByZXR1cm4gcG9ydDtcbiAgICAgICAgfSxcbiAgICAgICAgXCJ0cmFuc3BvcnQ9XCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJ0cmFuc3BvcnQ9XCIsIHRydWUpLFxuICAgICAgICBcInVkcFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwidWRwXCIsIHRydWUpLFxuICAgICAgICBcInRjcFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwidGNwXCIsIHRydWUpLFxuICAgICAgICBcInNjdHBcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInNjdHBcIiwgdHJ1ZSksXG4gICAgICAgIFwidGxzXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJ0bHNcIiwgdHJ1ZSksXG4gICAgICAgIGZ1bmN0aW9uICh0cmFuc3BvcnQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zWyd0cmFuc3BvcnQnXSA9IHRyYW5zcG9ydC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9LFxuICAgICAgICBcInVzZXI9XCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJ1c2VyPVwiLCB0cnVlKSxcbiAgICAgICAgXCJwaG9uZVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwicGhvbmVcIiwgdHJ1ZSksXG4gICAgICAgIFwiaXBcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImlwXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmRhdGEudXJpX3BhcmFtcylcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpX3BhcmFtcyA9IHt9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXNbJ3VzZXInXSA9IHVzZXIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJtZXRob2Q9XCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJtZXRob2Q9XCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuZGF0YS51cmlfcGFyYW1zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zID0ge307XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpX3BhcmFtc1snbWV0aG9kJ10gPSBtZXRob2Q7XG4gICAgICAgIH0sXG4gICAgICAgIFwidHRsPVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwidHRsPVwiLCB0cnVlKSxcbiAgICAgICAgZnVuY3Rpb24gKHR0bCkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmRhdGEucGFyYW1zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wYXJhbXNbJ3R0bCddID0gdHRsO1xuICAgICAgICB9LFxuICAgICAgICBcIm1hZGRyPVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwibWFkZHI9XCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAobWFkZHIpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zWydtYWRkciddID0gbWFkZHI7XG4gICAgICAgIH0sXG4gICAgICAgIFwibHJcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImxyXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuZGF0YS51cmlfcGFyYW1zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zID0ge307XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpX3BhcmFtc1snbHInXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKHBhcmFtLCB2YWx1ZSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmRhdGEudXJpX3BhcmFtcylcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpX3BhcmFtcyA9IHt9O1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXNbcGFyYW0udG9Mb3dlckNhc2UoKV0gPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGhuYW1lLCBodmFsdWUpIHtcbiAgICAgICAgICAgIGhuYW1lID0gaG5hbWUuam9pbignJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGh2YWx1ZSA9IGh2YWx1ZS5qb2luKCcnKTtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5kYXRhLnVyaV9oZWFkZXJzKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmRhdGEudXJpX2hlYWRlcnNbaG5hbWVdKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9oZWFkZXJzW2huYW1lXSA9IFtodmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9oZWFkZXJzW2huYW1lXS5wdXNoKGh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIC8vIGxvdHMgb2YgdGVzdHMgZmFpbCBpZiB0aGlzIGlzbid0IGd1YXJkZWQuLi5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXJ0UnVsZSA9PT0gJ1JlZmVyX1RvJykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmkgPSBuZXcgVVJJKG9wdGlvbnMuZGF0YS5zY2hlbWUsIG9wdGlvbnMuZGF0YS51c2VyLCBvcHRpb25zLmRhdGEuaG9zdCwgb3B0aW9ucy5kYXRhLnBvcnQsIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zLCBvcHRpb25zLmRhdGEudXJpX2hlYWRlcnMpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuc2NoZW1lO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEudXNlcjtcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLmhvc3Q7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5ob3N0X3R5cGU7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5wb3J0O1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEudXJpX3BhcmFtcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCIvL1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiLy9cIiwgZmFsc2UpLFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEuc2NoZW1lID0gdGV4dCgpO1xuICAgICAgICB9LFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiU0lQXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEuc2lwX3ZlcnNpb24gPSB0ZXh0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiSU5WSVRFXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJJTlZJVEVcIiwgZmFsc2UpLFxuICAgICAgICBcIkFDS1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiQUNLXCIsIGZhbHNlKSxcbiAgICAgICAgXCJWWEFDSFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiVlhBQ0hcIiwgZmFsc2UpLFxuICAgICAgICBcIk9QVElPTlNcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIk9QVElPTlNcIiwgZmFsc2UpLFxuICAgICAgICBcIkJZRVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiQllFXCIsIGZhbHNlKSxcbiAgICAgICAgXCJDQU5DRUxcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIkNBTkNFTFwiLCBmYWxzZSksXG4gICAgICAgIFwiUkVHSVNURVJcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlJFR0lTVEVSXCIsIGZhbHNlKSxcbiAgICAgICAgXCJTVUJTQ1JJQkVcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlNVQlNDUklCRVwiLCBmYWxzZSksXG4gICAgICAgIFwiTk9USUZZXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJOT1RJRllcIiwgZmFsc2UpLFxuICAgICAgICBcIlJFRkVSXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJSRUZFUlwiLCBmYWxzZSksXG4gICAgICAgIFwiUFVCTElTSFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiUFVCTElTSFwiLCBmYWxzZSksXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5tZXRob2QgPSB0ZXh0KCk7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5kYXRhLm1ldGhvZDtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKHN0YXR1c19jb2RlKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEuc3RhdHVzX2NvZGUgPSBwYXJzZUludChzdGF0dXNfY29kZS5qb2luKCcnKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5yZWFzb25fcGhyYXNlID0gdGV4dCgpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSB0ZXh0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZHgsIGxlbmd0aDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIGxlbmd0aCA9IG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXIubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXJbaWR4XS5wYXJzZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5kYXRhLm11bHRpX2hlYWRlcilcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyID0gW107XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGhlYWRlciA9IG5ldyBOYW1lQWRkckhlYWRlcihvcHRpb25zLmRhdGEudXJpLCBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWUsIG9wdGlvbnMuZGF0YS5wYXJhbXMpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEudXJpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWU7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5wYXJhbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGhlYWRlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyLnB1c2goeyAncG9zaXRpb24nOiBwZWckY3VyclBvcyxcbiAgICAgICAgICAgICAgICAnb2Zmc2V0JzogbG9jYXRpb24oKS5zdGFydC5vZmZzZXQsXG4gICAgICAgICAgICAgICAgJ3BhcnNlZCc6IGhlYWRlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgICAgZGlzcGxheU5hbWUgPSB0ZXh0KCkudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGRpc3BsYXlOYW1lWzBdID09PSAnXFxcIicpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lLnN1YnN0cmluZygxLCBkaXNwbGF5TmFtZS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuICAgICAgICB9LFxuICAgICAgICBcInFcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInFcIiwgdHJ1ZSksXG4gICAgICAgIGZ1bmN0aW9uIChxKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuZGF0YS5wYXJhbXMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnBhcmFtc1sncSddID0gcTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJleHBpcmVzXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJleHBpcmVzXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAoZXhwaXJlcykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmRhdGEucGFyYW1zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wYXJhbXNbJ2V4cGlyZXMnXSA9IGV4cGlyZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChkZWx0YV9zZWNvbmRzKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZGVsdGFfc2Vjb25kcy5qb2luKCcnKSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiMFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiMFwiLCBmYWxzZSksXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHRleHQoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChwYXJhbSwgdmFsdWUpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5kYXRhLnBhcmFtcylcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucGFyYW1zID0ge307XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWVbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEucGFyYW1zW3BhcmFtLnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIFwicmVuZGVyXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJyZW5kZXJcIiwgdHJ1ZSksXG4gICAgICAgIFwic2Vzc2lvblwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwic2Vzc2lvblwiLCB0cnVlKSxcbiAgICAgICAgXCJpY29uXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJpY29uXCIsIHRydWUpLFxuICAgICAgICBcImFsZXJ0XCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJhbGVydFwiLCB0cnVlKSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnRSdWxlID09PSAnQ29udGVudF9EaXNwb3NpdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudHlwZSA9IHRleHQoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImhhbmRsaW5nXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJoYW5kbGluZ1wiLCB0cnVlKSxcbiAgICAgICAgXCJvcHRpb25hbFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwib3B0aW9uYWxcIiwgdHJ1ZSksXG4gICAgICAgIFwicmVxdWlyZWRcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInJlcXVpcmVkXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAobGVuZ3RoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBwYXJzZUludChsZW5ndGguam9pbignJykpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSB0ZXh0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIFwidGV4dFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwidGV4dFwiLCB0cnVlKSxcbiAgICAgICAgXCJpbWFnZVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiaW1hZ2VcIiwgdHJ1ZSksXG4gICAgICAgIFwiYXVkaW9cIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImF1ZGlvXCIsIHRydWUpLFxuICAgICAgICBcInZpZGVvXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJ2aWRlb1wiLCB0cnVlKSxcbiAgICAgICAgXCJhcHBsaWNhdGlvblwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiYXBwbGljYXRpb25cIiwgdHJ1ZSksXG4gICAgICAgIFwibWVzc2FnZVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwibWVzc2FnZVwiLCB0cnVlKSxcbiAgICAgICAgXCJtdWx0aXBhcnRcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIm11bHRpcGFydFwiLCB0cnVlKSxcbiAgICAgICAgXCJ4LVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwieC1cIiwgdHJ1ZSksXG4gICAgICAgIGZ1bmN0aW9uIChjc2VxX3ZhbHVlKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEudmFsdWUgPSBwYXJzZUludChjc2VxX3ZhbHVlLmpvaW4oJycpKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGV4cGlyZXMpIHsgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9OyBvcHRpb25zLmRhdGEgPSBleHBpcmVzOyB9LFxuICAgICAgICBmdW5jdGlvbiAoZXZlbnRfdHlwZSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmV2ZW50ID0gZXZlbnRfdHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICB2YXIgdGFnID0gb3B0aW9ucy5kYXRhLnRhZztcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IG5ldyBOYW1lQWRkckhlYWRlcihvcHRpb25zLmRhdGEudXJpLCBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWUsIG9wdGlvbnMuZGF0YS5wYXJhbXMpO1xuICAgICAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5zZXRQYXJhbSgndGFnJywgdGFnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJ0YWdcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInRhZ1wiLCB0cnVlKSxcbiAgICAgICAgZnVuY3Rpb24gKHRhZykgeyBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07IG9wdGlvbnMuZGF0YS50YWcgPSB0YWc7IH0sXG4gICAgICAgIGZ1bmN0aW9uIChmb3J3YXJkcykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gcGFyc2VJbnQoZm9yd2FyZHMuam9pbignJykpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAobWluX2V4cGlyZXMpIHsgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9OyBvcHRpb25zLmRhdGEgPSBtaW5fZXhwaXJlczsgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gbmV3IE5hbWVBZGRySGVhZGVyKG9wdGlvbnMuZGF0YS51cmksIG9wdGlvbnMuZGF0YS5kaXNwbGF5TmFtZSwgb3B0aW9ucy5kYXRhLnBhcmFtcyk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiZGlnZXN0XCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJEaWdlc3RcIiwgdHJ1ZSksXG4gICAgICAgIFwicmVhbG1cIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInJlYWxtXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAocmVhbG0pIHsgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9OyBvcHRpb25zLmRhdGEucmVhbG0gPSByZWFsbTsgfSxcbiAgICAgICAgXCJkb21haW5cIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImRvbWFpblwiLCB0cnVlKSxcbiAgICAgICAgXCJub25jZVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwibm9uY2VcIiwgdHJ1ZSksXG4gICAgICAgIGZ1bmN0aW9uIChub25jZSkgeyBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07IG9wdGlvbnMuZGF0YS5ub25jZSA9IG5vbmNlOyB9LFxuICAgICAgICBcIm9wYXF1ZVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwib3BhcXVlXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAob3BhcXVlKSB7IG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTsgb3B0aW9ucy5kYXRhLm9wYXF1ZSA9IG9wYXF1ZTsgfSxcbiAgICAgICAgXCJzdGFsZVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwic3RhbGVcIiwgdHJ1ZSksXG4gICAgICAgIFwidHJ1ZVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwidHJ1ZVwiLCB0cnVlKSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07IG9wdGlvbnMuZGF0YS5zdGFsZSA9IHRydWU7IH0sXG4gICAgICAgIFwiZmFsc2VcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImZhbHNlXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAoKSB7IG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTsgb3B0aW9ucy5kYXRhLnN0YWxlID0gZmFsc2U7IH0sXG4gICAgICAgIFwiYWxnb3JpdGhtXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJhbGdvcml0aG1cIiwgdHJ1ZSksXG4gICAgICAgIFwibWQ1XCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJNRDVcIiwgdHJ1ZSksXG4gICAgICAgIFwibWQ1LXNlc3NcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIk1ENS1zZXNzXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAoYWxnb3JpdGhtKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEuYWxnb3JpdGhtID0gYWxnb3JpdGhtLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIFwicW9wXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJxb3BcIiwgdHJ1ZSksXG4gICAgICAgIFwiYXV0aC1pbnRcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImF1dGgtaW50XCIsIHRydWUpLFxuICAgICAgICBcImF1dGhcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImF1dGhcIiwgdHJ1ZSksXG4gICAgICAgIGZ1bmN0aW9uIChxb3BfdmFsdWUpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5xb3AgfHwgKG9wdGlvbnMuZGF0YS5xb3AgPSBbXSk7XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEucW9wLnB1c2gocW9wX3ZhbHVlLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAocmFja192YWx1ZSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnZhbHVlID0gcGFyc2VJbnQocmFja192YWx1ZS5qb2luKCcnKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZHgsIGxlbmd0aDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIGxlbmd0aCA9IG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXIubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXJbaWR4XS5wYXJzZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5kYXRhLm11bHRpX2hlYWRlcilcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyID0gW107XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGhlYWRlciA9IG5ldyBOYW1lQWRkckhlYWRlcihvcHRpb25zLmRhdGEudXJpLCBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWUsIG9wdGlvbnMuZGF0YS5wYXJhbXMpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEudXJpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWU7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5wYXJhbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGhlYWRlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyLnB1c2goeyAncG9zaXRpb24nOiBwZWckY3VyclBvcyxcbiAgICAgICAgICAgICAgICAnb2Zmc2V0JzogbG9jYXRpb24oKS5zdGFydC5vZmZzZXQsXG4gICAgICAgICAgICAgICAgJ3BhcnNlZCc6IGhlYWRlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IG5ldyBOYW1lQWRkckhlYWRlcihvcHRpb25zLmRhdGEudXJpLCBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWUsIG9wdGlvbnMuZGF0YS5wYXJhbXMpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBpZiAoIShvcHRpb25zLmRhdGEucmVwbGFjZXNfZnJvbV90YWcgJiYgb3B0aW9ucy5kYXRhLnJlcGxhY2VzX3RvX3RhZykpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0ge1xuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IG9wdGlvbnMuZGF0YVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJmcm9tLXRhZ1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiZnJvbS10YWdcIiwgdHJ1ZSksXG4gICAgICAgIGZ1bmN0aW9uIChmcm9tX3RhZykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnJlcGxhY2VzX2Zyb21fdGFnID0gZnJvbV90YWc7XG4gICAgICAgIH0sXG4gICAgICAgIFwidG8tdGFnXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJ0by10YWdcIiwgdHJ1ZSksXG4gICAgICAgIGZ1bmN0aW9uICh0b190YWcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5yZXBsYWNlc190b190YWcgPSB0b190YWc7XG4gICAgICAgIH0sXG4gICAgICAgIFwiZWFybHktb25seVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiZWFybHktb25seVwiLCB0cnVlKSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmVhcmx5X29ubHkgPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoaGVhZCwgcikgeyByZXR1cm4gcjsgfSxcbiAgICAgICAgZnVuY3Rpb24gKGhlYWQsIHRhaWwpIHsgcmV0dXJuIGxpc3QoaGVhZCwgdGFpbCk7IH0sXG4gICAgICAgIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnRSdWxlID09PSAnUmVxdWlyZScpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSB2YWx1ZSB8fCBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKHJzZXFfdmFsdWUpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS52YWx1ZSA9IHBhcnNlSW50KHJzZXFfdmFsdWUuam9pbignJykpO1xuICAgICAgICB9LFxuICAgICAgICBcImFjdGl2ZVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiYWN0aXZlXCIsIHRydWUpLFxuICAgICAgICBcInBlbmRpbmdcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInBlbmRpbmdcIiwgdHJ1ZSksXG4gICAgICAgIFwidGVybWluYXRlZFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwidGVybWluYXRlZFwiLCB0cnVlKSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnN0YXRlID0gdGV4dCgpO1xuICAgICAgICB9LFxuICAgICAgICBcInJlYXNvblwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwicmVhc29uXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlYXNvbiAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGV4cGlyZXMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXhwaXJlcyAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmV4cGlyZXMgPSBleHBpcmVzO1xuICAgICAgICB9LFxuICAgICAgICBcInJldHJ5X2FmdGVyXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJyZXRyeV9hZnRlclwiLCB0cnVlKSxcbiAgICAgICAgZnVuY3Rpb24gKHJldHJ5X2FmdGVyKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJldHJ5X2FmdGVyICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucmV0cnlfYWZ0ZXIgPSByZXRyeV9hZnRlcjtcbiAgICAgICAgfSxcbiAgICAgICAgXCJkZWFjdGl2YXRlZFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiZGVhY3RpdmF0ZWRcIiwgdHJ1ZSksXG4gICAgICAgIFwicHJvYmF0aW9uXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJwcm9iYXRpb25cIiwgdHJ1ZSksXG4gICAgICAgIFwicmVqZWN0ZWRcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInJlamVjdGVkXCIsIHRydWUpLFxuICAgICAgICBcInRpbWVvdXRcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInRpbWVvdXRcIiwgdHJ1ZSksXG4gICAgICAgIFwiZ2l2ZXVwXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJnaXZldXBcIiwgdHJ1ZSksXG4gICAgICAgIFwibm9yZXNvdXJjZVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwibm9yZXNvdXJjZVwiLCB0cnVlKSxcbiAgICAgICAgXCJpbnZhcmlhbnRcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImludmFyaWFudFwiLCB0cnVlKSxcbiAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zdGFydFJ1bGUgPT09ICdTdXBwb3J0ZWQnKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gdmFsdWUgfHwgW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIHZhciB0YWcgPSBvcHRpb25zLmRhdGEudGFnO1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gbmV3IE5hbWVBZGRySGVhZGVyKG9wdGlvbnMuZGF0YS51cmksIG9wdGlvbnMuZGF0YS5kaXNwbGF5TmFtZSwgb3B0aW9ucy5kYXRhLnBhcmFtcyk7XG4gICAgICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnNldFBhcmFtKCd0YWcnLCB0YWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInR0bFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwidHRsXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAodmlhX3R0bF92YWx1ZSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnR0bCA9IHZpYV90dGxfdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIFwibWFkZHJcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIm1hZGRyXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAodmlhX21hZGRyKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEubWFkZHIgPSB2aWFfbWFkZHI7XG4gICAgICAgIH0sXG4gICAgICAgIFwicmVjZWl2ZWRcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInJlY2VpdmVkXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAodmlhX3JlY2VpdmVkKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEucmVjZWl2ZWQgPSB2aWFfcmVjZWl2ZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIFwiYnJhbmNoXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJicmFuY2hcIiwgdHJ1ZSksXG4gICAgICAgIGZ1bmN0aW9uICh2aWFfYnJhbmNoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEuYnJhbmNoID0gdmlhX2JyYW5jaDtcbiAgICAgICAgfSxcbiAgICAgICAgXCJycG9ydFwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwicnBvcnRcIiwgdHJ1ZSksXG4gICAgICAgIGZ1bmN0aW9uIChyZXNwb25zZV9wb3J0KSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlX3BvcnQgIT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5ycG9ydCA9IHJlc3BvbnNlX3BvcnQuam9pbignJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICh2aWFfcHJvdG9jb2wpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wcm90b2NvbCA9IHZpYV9wcm90b2NvbDtcbiAgICAgICAgfSxcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlVEUFwiLCB0cnVlKSxcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlRDUFwiLCB0cnVlKSxcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlRMU1wiLCB0cnVlKSxcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlNDVFBcIiwgdHJ1ZSksXG4gICAgICAgIGZ1bmN0aW9uICh2aWFfdHJhbnNwb3J0KSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEudHJhbnNwb3J0ID0gdmlhX3RyYW5zcG9ydDtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmhvc3QgPSB0ZXh0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICh2aWFfc2VudF9ieV9wb3J0KSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEucG9ydCA9IHBhcnNlSW50KHZpYV9zZW50X2J5X3BvcnQuam9pbignJykpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAodHRsKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodHRsLmpvaW4oJycpKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGRlbHRhU2Vjb25kcykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnRSdWxlID09PSAnU2Vzc2lvbl9FeHBpcmVzJykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5kZWx0YVNlY29uZHMgPSBkZWx0YVNlY29uZHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicmVmcmVzaGVyXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJyZWZyZXNoZXJcIiwgZmFsc2UpLFxuICAgICAgICBcInVhc1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwidWFzXCIsIGZhbHNlKSxcbiAgICAgICAgXCJ1YWNcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcInVhY1wiLCBmYWxzZSksXG4gICAgICAgIGZ1bmN0aW9uIChlbmRwb2ludCkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnRSdWxlID09PSAnU2Vzc2lvbl9FeHBpcmVzJykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5yZWZyZXNoZXIgPSBlbmRwb2ludDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGRlbHRhU2Vjb25kcykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnRSdWxlID09PSAnTWluX1NFJykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IGRlbHRhU2Vjb25kcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJzdHVuc1wiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwic3R1bnNcIiwgdHJ1ZSksXG4gICAgICAgIFwic3R1blwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwic3R1blwiLCB0cnVlKSxcbiAgICAgICAgZnVuY3Rpb24gKHNjaGVtZSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBkYXRhOiB7fSB9O1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnNjaGVtZSA9IHNjaGVtZTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGhvc3QpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgZGF0YToge30gfTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5ob3N0ID0gaG9zdDtcbiAgICAgICAgfSxcbiAgICAgICAgXCI/dHJhbnNwb3J0PVwiLFxuICAgICAgICBwZWckbGl0ZXJhbEV4cGVjdGF0aW9uKFwiP3RyYW5zcG9ydD1cIiwgZmFsc2UpLFxuICAgICAgICBcInR1cm5zXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJ0dXJuc1wiLCB0cnVlKSxcbiAgICAgICAgXCJ0dXJuXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJ0dXJuXCIsIHRydWUpLFxuICAgICAgICBmdW5jdGlvbiAodHJhbnNwb3J0KSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEudHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGRhdGE6IHt9IH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSB0ZXh0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiUmVmZXJyZWQtQnlcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcIlJlZmVycmVkLUJ5XCIsIGZhbHNlKSxcbiAgICAgICAgXCJiXCIsXG4gICAgICAgIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24oXCJiXCIsIGZhbHNlKSxcbiAgICAgICAgXCJjaWRcIixcbiAgICAgICAgcGVnJGxpdGVyYWxFeHBlY3RhdGlvbihcImNpZFwiLCBmYWxzZSlcbiAgICBdO1xuICAgIGNvbnN0IHBlZyRieXRlY29kZSA9IFtcbiAgICAgICAgcGVnJGRlY29kZShcIjIgXFxcIlxcXCI2IDchXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiNFxcXCJcXFwiXFxcIjUhNyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCI0JFxcXCJcXFwiNSE3JVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjQmXFxcIlxcXCI1ITcnXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiOycuIyAmOyhcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCI0KFxcXCJcXFwiNSE3KVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjQqXFxcIlxcXCI1ITcrXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiMixcXFwiXFxcIjYsNy1cIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIyLlxcXCJcXFwiNi43L1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjQwXFxcIlxcXCI1ITcxXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiMjJcXFwiXFxcIjYyNzMuXFx4ODkgJjI0XFxcIlxcXCI2NDc1Ln0gJjI2XFxcIlxcXCI2Njc3LnEgJjI4XFxcIlxcXCI2ODc5LmUgJjI6XFxcIlxcXCI2Ojc7LlkgJjI8XFxcIlxcXCI2PDc9Lk0gJjI+XFxcIlxcXCI2Pjc/LkEgJjJAXFxcIlxcXCI2QDdBLjUgJjJCXFxcIlxcXCI2QjdDLikgJjJEXFxcIlxcXCI2RDdFXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiOykuIyAmOyxcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIyRlxcXCJcXFwiNkY3Ry59ICYySFxcXCJcXFwiNkg3SS5xICYySlxcXCJcXFwiNko3Sy5lICYyTFxcXCJcXFwiNkw3TS5ZICYyTlxcXCJcXFwiNk43Ty5NICYyUFxcXCJcXFwiNlA3US5BICYyUlxcXCJcXFwiNlI3Uy41ICYyVFxcXCJcXFwiNlQ3VS4pICYyVlxcXCJcXFwiNlY3V1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUlMlhcXFwiXFxcIjZYN1kvNSM7Iy8sJDsjLyMkKyMpKCMnIyhcXFwiJyMmJyMvXFxcIiEmLClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJSQ7JDAjKjskJi8sIzsgLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiLz0jJDskLyYjMCMqOyQmJiYjLyckOFxcXCI6WlxcXCIgKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCI7Li5cXFwiICZcXFwiXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSQ7Jy4jICY7KDApKjsnLiMgJjsoJi8/IzI4XFxcIlxcXCI2ODc5LzAkOy8vJyQ4IzpbIyApKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJSQ7Mi8mIzAjKjsyJiYmIy9nIyQlJDsuMCMqOy4mLywjOzIvIyQrXFxcIikoXFxcIicjJicjMD0qJSQ7LjAjKjsuJi8sIzsyLyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrXFxcIikoXFxcIicjJicjL1xcXCIhJiwpXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiNFxcXFxcXFwiXFxcIjUhN10uIyAmOzNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCI0XlxcXCJcXFwiNSE3X1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjRgXFxcIlxcXCI1ITdhXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiOyEuKSAmNGJcXFwiXFxcIjUhN2NcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJDspLlxceDk1ICYyRlxcXCJcXFwiNkY3Ry5cXHg4OSAmMkpcXFwiXFxcIjZKN0sufSAmMkxcXFwiXFxcIjZMN00ucSAmMlhcXFwiXFxcIjZYN1kuZSAmMlBcXFwiXFxcIjZQN1EuWSAmMkhcXFwiXFxcIjZIN0kuTSAmMkBcXFwiXFxcIjZAN0EuQSAmMmRcXFwiXFxcIjZkN2UuNSAmMlJcXFwiXFxcIjZSN1MuKSAmMk5cXFwiXFxcIjZON08vXFx4OUUjMFxceDlCKjspLlxceDk1ICYyRlxcXCJcXFwiNkY3Ry5cXHg4OSAmMkpcXFwiXFxcIjZKN0sufSAmMkxcXFwiXFxcIjZMN00ucSAmMlhcXFwiXFxcIjZYN1kuZSAmMlBcXFwiXFxcIjZQN1EuWSAmMkhcXFwiXFxcIjZIN0kuTSAmMkBcXFwiXFxcIjZAN0EuQSAmMmRcXFwiXFxcIjZkN2UuNSAmMlJcXFwiXFxcIjZSN1MuKSAmMk5cXFwiXFxcIjZON08mJiYjL1xcXCIhJiwpXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSQ7KS5cXHg4OSAmMkZcXFwiXFxcIjZGN0cufSAmMkxcXFwiXFxcIjZMN00ucSAmMlhcXFwiXFxcIjZYN1kuZSAmMlBcXFwiXFxcIjZQN1EuWSAmMkhcXFwiXFxcIjZIN0kuTSAmMkBcXFwiXFxcIjZAN0EuQSAmMmRcXFwiXFxcIjZkN2UuNSAmMlJcXFwiXFxcIjZSN1MuKSAmMk5cXFwiXFxcIjZON08vXFx4OTIjMFxceDhGKjspLlxceDg5ICYyRlxcXCJcXFwiNkY3Ry59ICYyTFxcXCJcXFwiNkw3TS5xICYyWFxcXCJcXFwiNlg3WS5lICYyUFxcXCJcXFwiNlA3US5ZICYySFxcXCJcXFwiNkg3SS5NICYyQFxcXCJcXFwiNkA3QS5BICYyZFxcXCJcXFwiNmQ3ZS41ICYyUlxcXCJcXFwiNlI3Uy4pICYyTlxcXCJcXFwiNk43TyYmJiMvXFxcIiEmLClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIyVFxcXCJcXFwiNlQ3VS5cXHhFMyAmMlZcXFwiXFxcIjZWN1cuXFx4RDcgJjJmXFxcIlxcXCI2ZjdnLlxceENCICYyaFxcXCJcXFwiNmg3aS5cXHhCRiAmMjpcXFwiXFxcIjY6NzsuXFx4QjMgJjJEXFxcIlxcXCI2RDdFLlxceEE3ICYyMlxcXCJcXFwiNjI3My5cXHg5QiAmMjhcXFwiXFxcIjY4NzkuXFx4OEYgJjJqXFxcIlxcXCI2ajdrLlxceDgzICY7Ji59ICYyNFxcXCJcXFwiNjQ3NS5xICYybFxcXCJcXFwiNmw3bS5lICYyblxcXCJcXFwiNm43by5ZICYyNlxcXCJcXFwiNjY3Ny5NICYyPlxcXCJcXFwiNj43Py5BICYycFxcXCJcXFwiNnA3cS41ICYyclxcXCJcXFwiNnI3cy4pICY7Jy4jICY7KFwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUkOykuXFx1MDEyQiAmMkZcXFwiXFxcIjZGN0cuXFx1MDExRiAmMkpcXFwiXFxcIjZKN0suXFx1MDExMyAmMkxcXFwiXFxcIjZMN00uXFx1MDEwNyAmMlhcXFwiXFxcIjZYN1kuXFx4RkIgJjJQXFxcIlxcXCI2UDdRLlxceEVGICYySFxcXCJcXFwiNkg3SS5cXHhFMyAmMkBcXFwiXFxcIjZAN0EuXFx4RDcgJjJkXFxcIlxcXCI2ZDdlLlxceENCICYyUlxcXCJcXFwiNlI3Uy5cXHhCRiAmMk5cXFwiXFxcIjZON08uXFx4QjMgJjJUXFxcIlxcXCI2VDdVLlxceEE3ICYyVlxcXCJcXFwiNlY3Vy5cXHg5QiAmMmZcXFwiXFxcIjZmN2cuXFx4OEYgJjJoXFxcIlxcXCI2aDdpLlxceDgzICYyOFxcXCJcXFwiNjg3OS53ICYyalxcXCJcXFwiNmo3ay5rICY7Ji5lICYyNFxcXCJcXFwiNjQ3NS5ZICYybFxcXCJcXFwiNmw3bS5NICYyblxcXCJcXFwiNm43by5BICYyNlxcXCJcXFwiNjY3Ny41ICYycFxcXCJcXFwiNnA3cS4pICYyclxcXCJcXFwiNnI3cy9cXHUwMTM0IzBcXHUwMTMxKjspLlxcdTAxMkIgJjJGXFxcIlxcXCI2RjdHLlxcdTAxMUYgJjJKXFxcIlxcXCI2SjdLLlxcdTAxMTMgJjJMXFxcIlxcXCI2TDdNLlxcdTAxMDcgJjJYXFxcIlxcXCI2WDdZLlxceEZCICYyUFxcXCJcXFwiNlA3US5cXHhFRiAmMkhcXFwiXFxcIjZIN0kuXFx4RTMgJjJAXFxcIlxcXCI2QDdBLlxceEQ3ICYyZFxcXCJcXFwiNmQ3ZS5cXHhDQiAmMlJcXFwiXFxcIjZSN1MuXFx4QkYgJjJOXFxcIlxcXCI2TjdPLlxceEIzICYyVFxcXCJcXFwiNlQ3VS5cXHhBNyAmMlZcXFwiXFxcIjZWN1cuXFx4OUIgJjJmXFxcIlxcXCI2ZjdnLlxceDhGICYyaFxcXCJcXFwiNmg3aS5cXHg4MyAmMjhcXFwiXFxcIjY4NzkudyAmMmpcXFwiXFxcIjZqN2suayAmOyYuZSAmMjRcXFwiXFxcIjY0NzUuWSAmMmxcXFwiXFxcIjZsN20uTSAmMm5cXFwiXFxcIjZuN28uQSAmMjZcXFwiXFxcIjY2NzcuNSAmMnBcXFwiXFxcIjZwN3EuKSAmMnJcXFwiXFxcIjZyN3MmJiYjL1xcXCIhJiwpXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTsvLz8jMlBcXFwiXFxcIjZQN1EvMCQ7Ly8nJDgjOnQjICkoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7Ly8/IzI0XFxcIlxcXCI2NDc1LzAkOy8vJyQ4Izp1IyApKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlOy8vPyMyPlxcXCJcXFwiNj43Py8wJDsvLyckOCM6diMgKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTsvLz8jMlRcXFwiXFxcIjZUN1UvMCQ7Ly8nJDgjOncjICkoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7Ly8/IzJWXFxcIlxcXCI2VjdXLzAkOy8vJyQ4Izp4IyApKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlMmhcXFwiXFxcIjZoN2kvMCM7Ly8nJDhcXFwiOnlcXFwiICkoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTsvLzYjMmZcXFwiXFxcIjZmN2cvJyQ4XFxcIjp6XFxcIiApKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7Ly8/IzJEXFxcIlxcXCI2RDdFLzAkOy8vJyQ4Izp7IyApKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlOy8vPyMyMlxcXCJcXFwiNjI3My8wJDsvLyckOCM6fCMgKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTsvLz8jMjhcXFwiXFxcIjY4NzkvMCQ7Ly8nJDgjOn0jICkoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7Ly8wIzsmLyckOFxcXCI6flxcXCIgKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlOyYvMCM7Ly8nJDhcXFwiOn5cXFwiICkoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTs9L1QjJDtHLikgJjtLLiMgJjtGMC8qO0cuKSAmO0suIyAmO0YmLywkOz4vIyQrIykoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjRcXHg3RlxcXCJcXFwiNSE3XFx4ODAuQSAmNFxceDgxXFxcIlxcXCI1ITdcXHg4Mi41ICY0XFx4ODNcXFwiXFxcIjUhN1xceDg0LikgJjszLiMgJjsuXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSU7Ly9RIzsmL0gkJDtKLiMgJjtLMCkqO0ouIyAmO0smLywkOyYvIyQrJCkoJCcjKCMnIyhcXFwiJyMmJyMvXFxcIiEmLClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlOy8vXSM7Ji9UJCUkO0ouIyAmO0swKSo7Si4jICY7SyYvXFxcIiEmLCkvMSQ7Ji8oJDgkOlxceDg1JCEhKSgkJyMoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjsuLkcgJjJMXFxcIlxcXCI2TDdNLjsgJjRcXHg4NlxcXCJcXFwiNSE3XFx4ODcuLyAmNFxceDgzXFxcIlxcXCI1ITdcXHg4NC4jICY7M1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUyalxcXCJcXFwiNmo3ay9KIzRcXHg4OFxcXCJcXFwiNSE3XFx4ODkuNSAmNFxceDhBXFxcIlxcXCI1ITdcXHg4Qi4pICY0XFx4OENcXFwiXFxcIjUhN1xceDhELyMkK1xcXCIpKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7Ti9NIzI4XFxcIlxcXCI2ODc5Lz4kO08uXFxcIiAmXFxcIi8wJDtTLyckOCQ6XFx4OEUkICkoJCcjKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO04vZCMyOFxcXCJcXFwiNjg3OS9VJDtPLlxcXCIgJlxcXCIvRyQ7Uy8+JDtfLzUkO2wuXFxcIiAmXFxcIi8nJDgmOlxceDhGJiApKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xceDkwXFxcIlxcXCI1JDdcXHg5MS4pICYzXFx4OTJcXFwiXFxcIjUjN1xceDkzLycgOCE6XFx4OTQhISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtQL10jJTI4XFxcIlxcXCI2ODc5LywjO1IvIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvNiQyOlxcXCJcXFwiNjo3Oy8nJDgjOlxceDk1IyApKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIkOysuKSAmOy0uIyAmO1EvMiMwLyo7Ky4pICY7LS4jICY7USYmJiNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIyPFxcXCJcXFwiNjw3PS5xICYyPlxcXCJcXFwiNj43Py5lICYyQFxcXCJcXFwiNkA3QS5ZICYyQlxcXCJcXFwiNkI3Qy5NICYyRFxcXCJcXFwiNkQ3RS5BICYyMlxcXCJcXFwiNjI3My41ICYyNlxcXCJcXFwiNjY3Ny4pICYyNFxcXCJcXFwiNjQ3NVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUkOysuXyAmOy0uWSAmMjxcXFwiXFxcIjY8Nz0uTSAmMj5cXFwiXFxcIjY+Nz8uQSAmMkBcXFwiXFxcIjZAN0EuNSAmMkJcXFwiXFxcIjZCN0MuKSAmMkRcXFwiXFxcIjZEN0UwZSo7Ky5fICY7LS5ZICYyPFxcXCJcXFwiNjw3PS5NICYyPlxcXCJcXFwiNj43Py5BICYyQFxcXCJcXFwiNkA3QS41ICYyQlxcXCJcXFwiNkI3Qy4pICYyRFxcXCJcXFwiNkQ3RSYvJiA4ITpcXHg5NiEgKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7VC9KIyUyOFxcXCJcXFwiNjg3OS8sIzteLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiLyMkK1xcXCIpKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7VS4pICY7XFxcXC4jICY7WC8mIDghOlxceDk3ISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSQlO1YvMiMySlxcXCJcXFwiNko3Sy8jJCtcXFwiKShcXFwiJyMmJyMwPColO1YvMiMySlxcXCJcXFwiNko3Sy8jJCtcXFwiKShcXFwiJyMmJyMmL0QjO1cvOyQySlxcXCJcXFwiNko3Sy5cXFwiICZcXFwiLyckOCM6XFx4OTgjICkoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiQ0XFx4OTlcXFwiXFxcIjUhN1xceDlBLywjMCkqNFxceDk5XFxcIlxcXCI1ITdcXHg5QSYmJiNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlNCRcXFwiXFxcIjUhNyUvPyMkNFxceDlCXFxcIlxcXCI1ITdcXHg5QzApKjRcXHg5QlxcXCJcXFwiNSE3XFx4OUMmLyMkK1xcXCIpKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUybFxcXCJcXFwiNmw3bS8/IztZLzYkMm5cXFwiXFxcIjZuN28vJyQ4IzpcXHg5RCMgKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSU7Wi9cXHhCMyMyOFxcXCJcXFwiNjg3OS9cXHhBNCQ7Wi9cXHg5QiQyOFxcXCJcXFwiNjg3OS9cXHg4QyQ7Wi9cXHg4MyQyOFxcXCJcXFwiNjg3OS90JDtaL2skMjhcXFwiXFxcIjY4NzkvXFxcXCQ7Wi9TJDI4XFxcIlxcXCI2ODc5L0QkO1ovOyQyOFxcXCJcXFwiNjg3OS8sJDtbLyMkKy0pKC0nIygsJyMoKycjKConIygpJyMoKCcjKCcnIygmJyMoJScjKCQnIygjJyMoXFxcIicjJicjLlxcdTA3OTAgJiUyXFx4OUVcXFwiXFxcIjZcXHg5RTdcXHg5Ri9cXHhBNCM7Wi9cXHg5QiQyOFxcXCJcXFwiNjg3OS9cXHg4QyQ7Wi9cXHg4MyQyOFxcXCJcXFwiNjg3OS90JDtaL2skMjhcXFwiXFxcIjY4NzkvXFxcXCQ7Wi9TJDI4XFxcIlxcXCI2ODc5L0QkO1ovOyQyOFxcXCJcXFwiNjg3OS8sJDtbLyMkKywpKCwnIygrJyMoKicjKCknIygoJyMoJycjKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyMuXFx1MDZGOSAmJTJcXHg5RVxcXCJcXFwiNlxceDlFN1xceDlGL1xceDhDIztaL1xceDgzJDI4XFxcIlxcXCI2ODc5L3QkO1ovayQyOFxcXCJcXFwiNjg3OS9cXFxcJDtaL1MkMjhcXFwiXFxcIjY4NzkvRCQ7Wi87JDI4XFxcIlxcXCI2ODc5LywkO1svIyQrKikoKicjKCknIygoJyMoJycjKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyMuXFx1MDY3QSAmJTJcXHg5RVxcXCJcXFwiNlxceDlFN1xceDlGL3QjO1ovayQyOFxcXCJcXFwiNjg3OS9cXFxcJDtaL1MkMjhcXFwiXFxcIjY4NzkvRCQ7Wi87JDI4XFxcIlxcXCI2ODc5LywkO1svIyQrKCkoKCcjKCcnIygmJyMoJScjKCQnIygjJyMoXFxcIicjJicjLlxcdTA2MTMgJiUyXFx4OUVcXFwiXFxcIjZcXHg5RTdcXHg5Ri9cXFxcIztaL1MkMjhcXFwiXFxcIjY4NzkvRCQ7Wi87JDI4XFxcIlxcXCI2ODc5LywkO1svIyQrJikoJicjKCUnIygkJyMoIycjKFxcXCInIyYnIy5cXHUwNUM0ICYlMlxceDlFXFxcIlxcXCI2XFx4OUU3XFx4OUYvRCM7Wi87JDI4XFxcIlxcXCI2ODc5LywkO1svIyQrJCkoJCcjKCMnIyhcXFwiJyMmJyMuXFx1MDU4RCAmJTJcXHg5RVxcXCJcXFwiNlxceDlFN1xceDlGLywjO1svIyQrXFxcIikoXFxcIicjJicjLlxcdTA1NkUgJiUyXFx4OUVcXFwiXFxcIjZcXHg5RTdcXHg5Ri8sIztaLyMkK1xcXCIpKFxcXCInIyYnIy5cXHUwNTRGICYlO1ovXFx4OUIjMlxceDlFXFxcIlxcXCI2XFx4OUU3XFx4OUYvXFx4OEMkO1ovXFx4ODMkMjhcXFwiXFxcIjY4NzkvdCQ7Wi9rJDI4XFxcIlxcXCI2ODc5L1xcXFwkO1ovUyQyOFxcXCJcXFwiNjg3OS9EJDtaLzskMjhcXFwiXFxcIjY4NzkvLCQ7Wy8jJCsrKSgrJyMoKicjKCknIygoJyMoJycjKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyMuXFx1MDRDNyAmJTtaL1xceEFBIyUyOFxcXCJcXFwiNjg3OS8sIztaLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiL1xceDgzJDJcXHg5RVxcXCJcXFwiNlxceDlFN1xceDlGL3QkO1ovayQyOFxcXCJcXFwiNjg3OS9cXFxcJDtaL1MkMjhcXFwiXFxcIjY4NzkvRCQ7Wi87JDI4XFxcIlxcXCI2ODc5LywkO1svIyQrKikoKicjKCknIygoJyMoJycjKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyMuXFx1MDQzMCAmJTtaL1xceEI5IyUyOFxcXCJcXFwiNjg3OS8sIztaLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiL1xceDkyJCUyOFxcXCJcXFwiNjg3OS8sIztaLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiL2skMlxceDlFXFxcIlxcXCI2XFx4OUU3XFx4OUYvXFxcXCQ7Wi9TJDI4XFxcIlxcXCI2ODc5L0QkO1ovOyQyOFxcXCJcXFwiNjg3OS8sJDtbLyMkKykpKCknIygoJyMoJycjKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyMuXFx1MDM4QSAmJTtaL1xceEM4IyUyOFxcXCJcXFwiNjg3OS8sIztaLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiL1xceEExJCUyOFxcXCJcXFwiNjg3OS8sIztaLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiL3okJTI4XFxcIlxcXCI2ODc5LywjO1ovIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvUyQyXFx4OUVcXFwiXFxcIjZcXHg5RTdcXHg5Ri9EJDtaLzskMjhcXFwiXFxcIjY4NzkvLCQ7Wy8jJCsoKSgoJyMoJycjKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyMuXFx1MDJENSAmJTtaL1xceEQ3IyUyOFxcXCJcXFwiNjg3OS8sIztaLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiL1xceEIwJCUyOFxcXCJcXFwiNjg3OS8sIztaLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiL1xceDg5JCUyOFxcXCJcXFwiNjg3OS8sIztaLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiL2IkJTI4XFxcIlxcXCI2ODc5LywjO1ovIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvOyQyXFx4OUVcXFwiXFxcIjZcXHg5RTdcXHg5Ri8sJDtbLyMkKycpKCcnIygmJyMoJScjKCQnIygjJyMoXFxcIicjJicjLlxcdTAyMTEgJiU7Wi9cXHhGRSMlMjhcXFwiXFxcIjY4NzkvLCM7Wi8jJCtcXFwiKShcXFwiJyMmJyMuXFxcIiAmXFxcIi9cXHhENyQlMjhcXFwiXFxcIjY4NzkvLCM7Wi8jJCtcXFwiKShcXFwiJyMmJyMuXFxcIiAmXFxcIi9cXHhCMCQlMjhcXFwiXFxcIjY4NzkvLCM7Wi8jJCtcXFwiKShcXFwiJyMmJyMuXFxcIiAmXFxcIi9cXHg4OSQlMjhcXFwiXFxcIjY4NzkvLCM7Wi8jJCtcXFwiKShcXFwiJyMmJyMuXFxcIiAmXFxcIi9iJCUyOFxcXCJcXFwiNjg3OS8sIztaLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiLzskMlxceDlFXFxcIlxcXCI2XFx4OUU3XFx4OUYvLCQ7Wi8jJCsoKSgoJyMoJycjKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyMuXFx1MDEyNiAmJTtaL1xcdTAxMUMjJTI4XFxcIlxcXCI2ODc5LywjO1ovIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvXFx4RjUkJTI4XFxcIlxcXCI2ODc5LywjO1ovIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvXFx4Q0UkJTI4XFxcIlxcXCI2ODc5LywjO1ovIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvXFx4QTckJTI4XFxcIlxcXCI2ODc5LywjO1ovIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvXFx4ODAkJTI4XFxcIlxcXCI2ODc5LywjO1ovIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvWSQlMjhcXFwiXFxcIjY4NzkvLCM7Wi8jJCtcXFwiKShcXFwiJyMmJyMuXFxcIiAmXFxcIi8yJDJcXHg5RVxcXCJcXFwiNlxceDlFN1xceDlGLyMkKygpKCgnIygnJyMoJicjKCUnIygkJyMoIycjKFxcXCInIyYnIy8mIDghOlxceEEwISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTsjL00jOyMuXFxcIiAmXFxcIi8/JDsjLlxcXCIgJlxcXCIvMSQ7Iy5cXFwiICZcXFwiLyMkKyQpKCQnIygjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtaLzsjMjhcXFwiXFxcIjY4NzkvLCQ7Wi8jJCsjKSgjJyMoXFxcIicjJicjLiMgJjtcXFxcXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtdL28jMkpcXFwiXFxcIjZKN0svYCQ7XS9XJDJKXFxcIlxcXCI2SjdLL0gkO10vPyQySlxcXCJcXFwiNko3Sy8wJDtdLyckOCc6XFx4QTEnICkoJycjKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlMlxceEEyXFxcIlxcXCI2XFx4QTI3XFx4QTMvMiM0XFx4QTRcXFwiXFxcIjUhN1xceEE1LyMkK1xcXCIpKFxcXCInIyYnIy5cXHg5OCAmJTJcXHhBNlxcXCJcXFwiNlxceEE2N1xceEE3LzsjNFxceEE4XFxcIlxcXCI1ITdcXHhBOS8sJDshLyMkKyMpKCMnIyhcXFwiJyMmJyMuaiAmJTJcXHhBQVxcXCJcXFwiNlxceEFBN1xceEFCLzUjOyEvLCQ7IS8jJCsjKSgjJyMoXFxcIicjJicjLkIgJiU0XFx4QUNcXFwiXFxcIjUhN1xceEFELywjOyEvIyQrXFxcIikoXFxcIicjJicjLiMgJjshXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSU7IS5cXFwiICZcXFwiL1sjOyEuXFxcIiAmXFxcIi9NJDshLlxcXCIgJlxcXCIvPyQ7IS5cXFwiICZcXFwiLzEkOyEuXFxcIiAmXFxcIi8jJCslKSglJyMoJCcjKCMnIyhcXFwiJyMmJyMvJyA4ITpcXHhBRSEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIkJTIyXFxcIlxcXCI2MjczLywjO2AvIyQrXFxcIikoXFxcIicjJicjMDwqJTIyXFxcIlxcXCI2MjczLywjO2AvIyQrXFxcIikoXFxcIicjJicjJlwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjthLkEgJjtiLjsgJjtjLjUgJjtkLi8gJjtlLikgJjtmLiMgJjtnXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHhBRlxcXCJcXFwiNSo3XFx4QjAvYSMzXFx4QjFcXFwiXFxcIjUjN1xceEIyLkcgJjNcXHhCM1xcXCJcXFwiNSM3XFx4QjQuOyAmM1xceEI1XFxcIlxcXCI1JDdcXHhCNi4vICYzXFx4QjdcXFwiXFxcIjUjN1xceEI4LiMgJjs2LygkOFxcXCI6XFx4QjlcXFwiISApKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUzXFx4QkFcXFwiXFxcIjUlN1xceEJCL0kjM1xceEJDXFxcIlxcXCI1JTdcXHhCRC4vICYzXFx4QkVcXFwiXFxcIjVcXFwiN1xceEJGLiMgJjs2LygkOFxcXCI6XFx4QzBcXFwiISApKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUzXFx4QzFcXFwiXFxcIjUnN1xceEMyLzEjO1xceDkwLygkOFxcXCI6XFx4QzNcXFwiISApKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUzXFx4QzRcXFwiXFxcIjUkN1xceEM1LzEjO1xceEYwLygkOFxcXCI6XFx4QzZcXFwiISApKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUzXFx4QzdcXFwiXFxcIjUmN1xceEM4LzEjO1QvKCQ4XFxcIjpcXHhDOVxcXCIhICkoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHhDQVxcXCJcXFwiNVxcXCI3XFx4Q0IvTiMlMj5cXFwiXFxcIjY+Nz8vLCM7Ni8jJCtcXFwiKShcXFwiJyMmJyMuXFxcIiAmXFxcIi8nJDhcXFwiOlxceENDXFxcIiApKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7aC9QIyUyPlxcXCJcXFwiNj43Py8sIztpLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiLykkOFxcXCI6XFx4Q0RcXFwiXFxcIiEgKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJDtqLyYjMCMqO2omJiYjL1xcXCIhJiwpXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSQ7ai8mIzAjKjtqJiYmIy9cXFwiISYsKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjtrLikgJjsrLiMgJjstXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiMmxcXFwiXFxcIjZsN20uZSAmMm5cXFwiXFxcIjZuN28uWSAmMjRcXFwiXFxcIjY0NzUuTSAmMjhcXFwiXFxcIjY4NzkuQSAmMjxcXFwiXFxcIjY8Nz0uNSAmMkBcXFwiXFxcIjZAN0EuKSAmMkJcXFwiXFxcIjZCN0NcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlMjZcXFwiXFxcIjY2NzcvbiM7bS9lJCQlMjxcXFwiXFxcIjY8Nz0vLCM7bS8jJCtcXFwiKShcXFwiJyMmJyMwPColMjxcXFwiXFxcIjY8Nz0vLCM7bS8jJCtcXFwiKShcXFwiJyMmJyMmLyMkKyMpKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO24vQSMyPlxcXCJcXFwiNj43Py8yJDtvLykkOCM6XFx4Q0UjXFxcIlxcXCIgKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJDtwLikgJjsrLiMgJjstLzIjMC8qO3AuKSAmOysuIyAmOy0mJiYjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJDtwLikgJjsrLiMgJjstMC8qO3AuKSAmOysuIyAmOy0mXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiMmxcXFwiXFxcIjZsN20uZSAmMm5cXFwiXFxcIjZuN28uWSAmMjRcXFwiXFxcIjY0NzUuTSAmMjZcXFwiXFxcIjY2NzcuQSAmMjhcXFwiXFxcIjY4NzkuNSAmMkBcXFwiXFxcIjZAN0EuKSAmMkJcXFwiXFxcIjZCN0NcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCI7XFx4OTEuIyAmO3JcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceDkwL0cjOycvPiQ7cy81JDsnLywkO1xceDg0LyMkKyUpKCUnIygkJyMoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjtNLiMgJjt0XCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHg3Ri9FIzI4XFxcIlxcXCI2ODc5LzYkO3UuIyAmO3gvJyQ4IzpcXHhDRiMgKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTt2LiMgJjt3L0ojJTI2XFxcIlxcXCI2Njc3LywjO1xceDgzLyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiLyMkK1xcXCIpKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUyXFx4RDBcXFwiXFxcIjZcXHhEMDdcXHhEMS86IztcXHg4MC8xJDt3LlxcXCIgJlxcXCIvIyQrIykoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUyNFxcXCJcXFwiNjQ3NS8sIzt7LyMkK1xcXCIpKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7ei8zIyQ7eTAjKjt5Ji8jJCtcXFwiKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCI7Ki4pICY7Ky4jICY7LVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjsrLlxceDhGICY7LS5cXHg4OSAmMjJcXFwiXFxcIjYyNzMufSAmMjZcXFwiXFxcIjY2NzcucSAmMjhcXFwiXFxcIjY4NzkuZSAmMjpcXFwiXFxcIjY6NzsuWSAmMjxcXFwiXFxcIjY8Nz0uTSAmMj5cXFwiXFxcIjY+Nz8uQSAmMkBcXFwiXFxcIjZAN0EuNSAmMkJcXFwiXFxcIjZCN0MuKSAmMkRcXFwiXFxcIjZEN0VcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO3wvZSMkJTI0XFxcIlxcXCI2NDc1LywjO3wvIyQrXFxcIikoXFxcIicjJicjMDwqJTI0XFxcIlxcXCI2NDc1LywjO3wvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJDt+MCMqO34mL2UjJCUyMlxcXCJcXFwiNjI3My8sIzt9LyMkK1xcXCIpKFxcXCInIyYnIzA8KiUyMlxcXCJcXFwiNjI3My8sIzt9LyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrXFxcIikoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJDt+MCMqO34mXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiOysudyAmOy0ucSAmMjhcXFwiXFxcIjY4NzkuZSAmMjpcXFwiXFxcIjY6NzsuWSAmMjxcXFwiXFxcIjY8Nz0uTSAmMj5cXFwiXFxcIjY+Nz8uQSAmMkBcXFwiXFxcIjZAN0EuNSAmMkJcXFwiXFxcIjZCN0MuKSAmMkRcXFwiXFxcIjZEN0VcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJTtcXFwiL1xceDg3IyQ7XFxcIi5HICY7IS5BICYyQFxcXCJcXFwiNkA3QS41ICYyRlxcXCJcXFwiNkY3Ry4pICYySlxcXCJcXFwiNko3SzBNKjtcXFwiLkcgJjshLkEgJjJAXFxcIlxcXCI2QDdBLjUgJjJGXFxcIlxcXCI2RjdHLikgJjJKXFxcIlxcXCI2SjdLJi8jJCtcXFwiKShcXFwiJyMmJyMvJiA4ITpcXHhEMiEgKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjtcXHg4MS4jICY7XFx4ODJcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJTtPLzIjMjpcXFwiXFxcIjY6NzsvIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvLCM7Uy8jJCtcXFwiKShcXFwiJyMmJyMuXFxcIiAmXFxcIlwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiQ7Ky5cXHg4MyAmOy0ufSAmMkJcXFwiXFxcIjZCN0MucSAmMkRcXFwiXFxcIjZEN0UuZSAmMjJcXFwiXFxcIjYyNzMuWSAmMjhcXFwiXFxcIjY4NzkuTSAmMjpcXFwiXFxcIjY6NzsuQSAmMjxcXFwiXFxcIjY8Nz0uNSAmMj5cXFwiXFxcIjY+Nz8uKSAmMkBcXFwiXFxcIjZAN0EvXFx4OEMjMFxceDg5KjsrLlxceDgzICY7LS59ICYyQlxcXCJcXFwiNkI3Qy5xICYyRFxcXCJcXFwiNkQ3RS5lICYyMlxcXCJcXFwiNjI3My5ZICYyOFxcXCJcXFwiNjg3OS5NICYyOlxcXCJcXFwiNjo3Oy5BICYyPFxcXCJcXFwiNjw3PS41ICYyPlxcXCJcXFwiNj43Py4pICYyQFxcXCJcXFwiNkA3QSYmJiNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIkO3kwIyo7eSZcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xceDkyXFxcIlxcXCI1IzdcXHhEMy9xIzI0XFxcIlxcXCI2NDc1L2IkJDshLyYjMCMqOyEmJiYjL0wkMkpcXFwiXFxcIjZKN0svPSQkOyEvJiMwIyo7ISYmJiMvJyQ4JTpcXHhENCUgKSglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIyXFx4RDVcXFwiXFxcIjZcXHhENTdcXHhENlwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjJcXHhEN1xcXCJcXFwiNlxceEQ3N1xceEQ4XCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiMlxceEQ5XFxcIlxcXCI2XFx4RDk3XFx4REFcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIyXFx4REJcXFwiXFxcIjZcXHhEQjdcXHhEQ1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjJcXHhERFxcXCJcXFwiNlxceEREN1xceERFXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiMlxceERGXFxcIlxcXCI2XFx4REY3XFx4RTBcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIyXFx4RTFcXFwiXFxcIjZcXHhFMTdcXHhFMlwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjJcXHhFM1xcXCJcXFwiNlxceEUzN1xceEU0XCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiMlxceEU1XFxcIlxcXCI2XFx4RTU3XFx4RTZcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIyXFx4RTdcXFwiXFxcIjZcXHhFNzdcXHhFOFwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjJcXHhFOVxcXCJcXFwiNlxceEU5N1xceEVBXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHg4NS5ZICY7XFx4ODYuUyAmO1xceDg4Lk0gJjtcXHg4OS5HICY7XFx4OEEuQSAmO1xceDhCLjsgJjtcXHg4Qy41ICY7XFx4OEYuLyAmO1xceDhELikgJjtcXHg4RS4jICY7Ni8mIDghOlxceEVCISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHg4NC9HIzsnLz4kO1xceDkyLzUkOycvLCQ7XFx4OTQvIyQrJSkoJScjKCQnIygjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHg5My8nIDghOlxceEVDISEgKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7IS81IzshLywkOyEvIyQrIykoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUkOyouQSAmOysuOyAmOy0uNSAmOzMuLyAmOzQuKSAmOycuIyAmOygwRyo7Ki5BICY7Ky47ICY7LS41ICY7My4vICY7NC4pICY7Jy4jICY7KCYvJiA4ITpcXHhFRCEgKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7XFx4QjYvWSMkJTtBLywjO1xceEI2LyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7QS8sIztcXHhCNi8jJCtcXFwiKShcXFwiJyMmJyMmLyMkK1xcXCIpKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7OS9OIyUyOlxcXCJcXFwiNjo3Oy8sIzs5LyMkK1xcXCIpKFxcXCInIyYnIy5cXFwiICZcXFwiLyckOFxcXCI6XFx4RUVcXFwiICkoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTs6LmMgJiU7XFx4OTgvWSMkJTtBLywjO1xceDk4LyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7QS8sIztcXHg5OC8jJCtcXFwiKShcXFwiJyMmJyMmLyMkK1xcXCIpKFxcXCInIyYnIy8mIDghOlxceEVGISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtMLiMgJjtcXHg5OS9dIyQlO0IvLCM7XFx4OUIvIyQrXFxcIikoXFxcIicjJicjMDYqJTtCLywjO1xceDlCLyMkK1xcXCIpKFxcXCInIyYnIyYvJyQ4XFxcIjpcXHhGMFxcXCIgKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceDlBLlxcXCIgJlxcXCIvPiM7QC81JDtNLywkOz8vIyQrJCkoJCcjKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJTs2L1kjJCU7Li8sIzs2LyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7Li8sIzs2LyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrXFxcIikoXFxcIicjJicjLiMgJjtILycgOCE6XFx4RjEhISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiO1xceDlDLikgJjtcXHg5RC4jICY7XFx4QTBcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xceEYyXFxcIlxcXCI1ITdcXHhGMy86Izs8LzEkO1xceDlGLygkOCM6XFx4RjQjISApKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xceEY1XFxcIlxcXCI1JzdcXHhGNi86Izs8LzEkO1xceDlFLygkOCM6XFx4RjcjISApKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XFx4RjghISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTJcXHhGOVxcXCJcXFwiNlxceEY5N1xceEZBL28jJTJKXFxcIlxcXCI2SjdLL00jOyEuXFxcIiAmXFxcIi8/JDshLlxcXCIgJlxcXCIvMSQ7IS5cXFwiICZcXFwiLyMkKyQpKCQnIygjJyMoXFxcIicjJicjLlxcXCIgJlxcXCIvJyQ4XFxcIjpcXHhGQlxcXCIgKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlOzYvSiMlOzwvLCM7XFx4QTEvIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvKSQ4XFxcIjpcXHhGQ1xcXCJcXFwiISApKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjs2LikgJjtULiMgJjtIXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHhBMy9ZIyQlO0IvLCM7XFx4QTQvIyQrXFxcIikoXFxcIicjJicjMDYqJTtCLywjO1xceEE0LyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrXFxcIikoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHhGRFxcXCJcXFwiNSY3XFx4RkUuRyAmM1xceEZGXFxcIlxcXCI1JzdcXHUwMTAwLjsgJjNcXHUwMTAxXFxcIlxcXCI1JDdcXHUwMTAyLi8gJjNcXHUwMTAzXFxcIlxcXCI1JTdcXHUwMTA0LiMgJjs2LyYgOCE6XFx1MDEwNSEgKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjtcXHhBNS4jICY7XFx4QTBcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xcdTAxMDZcXFwiXFxcIjUoN1xcdTAxMDcvTSM7PC9EJDNcXHUwMTA4XFxcIlxcXCI1KDdcXHUwMTA5Li8gJjNcXHUwMTBBXFxcIlxcXCI1KDdcXHUwMTBCLiMgJjs2LyMkKyMpKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlOzYvWSMkJTtBLywjOzYvIyQrXFxcIikoXFxcIicjJicjMDYqJTtBLywjOzYvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XFx1MDEwQyEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceEE5LyYgOCE6XFx1MDEwRCEgKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7XFx4QUEvayM7Oy9iJDtcXHhBRi9ZJCQlO0IvLCM7XFx4QjAvIyQrXFxcIikoXFxcIicjJicjMDYqJTtCLywjO1xceEIwLyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrJCkoJCcjKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCI7XFx4QUIuIyAmO1xceEFDXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiM1xcdTAxMEVcXFwiXFxcIjUkN1xcdTAxMEYuUyAmM1xcdTAxMTBcXFwiXFxcIjUlN1xcdTAxMTEuRyAmM1xcdTAxMTJcXFwiXFxcIjUlN1xcdTAxMTMuOyAmM1xcdTAxMTRcXFwiXFxcIjUlN1xcdTAxMTUuLyAmM1xcdTAxMTZcXFwiXFxcIjUrN1xcdTAxMTcuIyAmO1xceEFEXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiM1xcdTAxMThcXFwiXFxcIjUnN1xcdTAxMTkuLyAmM1xcdTAxMUFcXFwiXFxcIjUpN1xcdTAxMUIuIyAmO1xceEFEXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiOzYuIyAmO1xceEFFXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTFDXFxcIlxcXCI1XFxcIjdcXHUwMTFELywjOzYvIyQrXFxcIikoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiO1xceEFELiMgJjs2XCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTs2LzUjOzwvLCQ7XFx4QjEvIyQrIykoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjs2LiMgJjtIXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHhCMy81IzsuLywkO1xceDkwLyMkKyMpKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XFx1MDExRSEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceDlFLycgOCE6XFx1MDExRiEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceEI2L14jJCU7Qi8sIztcXHhBMC8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0IvLCM7XFx4QTAvIyQrXFxcIikoXFxcIicjJicjJi8oJDhcXFwiOlxcdTAxMjBcXFwiISEpKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUlOzcvZSMkJTJKXFxcIlxcXCI2SjdLLywjOzcvIyQrXFxcIikoXFxcIicjJicjMDwqJTJKXFxcIlxcXCI2SjdLLywjOzcvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyMvXFxcIiEmLClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO0wuIyAmO1xceDk5L10jJCU7Qi8sIztcXHhCOC8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0IvLCM7XFx4QjgvIyQrXFxcIikoXFxcIicjJicjJi8nJDhcXFwiOlxcdTAxMjFcXFwiICkoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiO1xceEI5LiMgJjtcXHhBMFwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUzXFx1MDEyMlxcXCJcXFwiNSM3XFx1MDEyMy86Izs8LzEkOzYvKCQ4IzpcXHUwMTI0IyEgKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSQ7IS8mIzAjKjshJiYmIy8nIDghOlxcdTAxMjUhISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHg5RS8nIDghOlxcdTAxMjYhISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSQ7XFx4OUEwIyo7XFx4OUEmL3gjO0AvbyQ7TS9mJDs/L10kJCU7Qi8sIztcXHhBMC8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0IvLCM7XFx4QTAvIyQrXFxcIikoXFxcIicjJicjJi8nJDglOlxcdTAxMjclICkoJScjKCQnIygjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiO1xceEJFXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTI4XFxcIlxcXCI1JjdcXHUwMTI5L2sjOy4vYiQ7XFx4QzEvWSQkJTtBLywjO1xceEMxLyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7QS8sIztcXHhDMS8jJCtcXFwiKShcXFwiJyMmJyMmLyMkKyQpKCQnIygjJyMoXFxcIicjJicjLiMgJjtcXHhCRlwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7Ni9rIzsuL2IkO1xceEMwL1kkJCU7QS8sIztcXHhDMC8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0EvLCM7XFx4QzAvIyQrXFxcIikoXFxcIicjJicjJi8jJCskKSgkJyMoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7Ni87Izs8LzIkOzYuIyAmO0gvIyQrIykoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjtcXHhDMi5HICY7XFx4QzQuQSAmO1xceEM2LjsgJjtcXHhDOC41ICY7XFx4QzkuLyAmO1xceENBLikgJjtcXHhDQi4jICY7XFx4QzBcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xcdTAxMkFcXFwiXFxcIjUlN1xcdTAxMkIvNSM7PC8sJDtcXHhDMy8jJCsjKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtJLycgOCE6XFx1MDEyQyEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xcdTAxMkRcXFwiXFxcIjUmN1xcdTAxMkUvXFx4OTcjOzwvXFx4OEUkO0QvXFx4ODUkO1xceEM1L3wkJCUkOycvJiMwIyo7JyYmJiMvLCM7XFx4QzUvIyQrXFxcIikoXFxcIicjJicjMEMqJSQ7Jy8mIzAjKjsnJiYmIy8sIztcXHhDNS8jJCtcXFwiKShcXFwiJyMmJyMmLywkO0UvIyQrJikoJicjKCUnIygkJyMoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjt0LiMgJjt3XCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTJGXFxcIlxcXCI1JTdcXHUwMTMwLzUjOzwvLCQ7XFx4QzcvIyQrIykoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7SS8nIDghOlxcdTAxMzEhISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTMyXFxcIlxcXCI1JjdcXHUwMTMzLzojOzwvMSQ7SS8oJDgjOlxcdTAxMzQjISApKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xcdTAxMzVcXFwiXFxcIjUlN1xcdTAxMzYvXSM7PC9UJCUzXFx1MDEzN1xcXCJcXFwiNSQ3XFx1MDEzOC8mIDghOlxcdTAxMzkhICkuNCAmJTNcXHUwMTNBXFxcIlxcXCI1JTdcXHUwMTNCLyYgOCE6XFx1MDEzQyEgKS8jJCsjKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTNEXFxcIlxcXCI1KTdcXHUwMTNFL1IjOzwvSSQzXFx1MDEzRlxcXCJcXFwiNSM3XFx1MDE0MC4vICYzXFx1MDE0MVxcXCJcXFwiNSg3XFx1MDE0Mi4jICY7Ni8oJDgjOlxcdTAxNDMjISApKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xcdTAxNDRcXFwiXFxcIjUjN1xcdTAxNDUvXFx4OTMjOzwvXFx4OEEkO0QvXFx4ODEkJTtcXHhDQy9lIyQlMkRcXFwiXFxcIjZEN0UvLCM7XFx4Q0MvIyQrXFxcIikoXFxcIicjJicjMDwqJTJEXFxcIlxcXCI2RDdFLywjO1xceENDLyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrXFxcIikoXFxcIicjJicjLywkO0UvIyQrJSkoJScjKCQnIygjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTQ2XFxcIlxcXCI1KDdcXHUwMTQ3Li8gJjNcXHUwMTQ4XFxcIlxcXCI1JDdcXHUwMTQ5LiMgJjs2LycgOCE6XFx1MDE0QSEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlOzYvWSMkJTtBLywjOzYvIyQrXFxcIikoXFxcIicjJicjMDYqJTtBLywjOzYvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceENGL0cjOy4vPiQ7XFx4Q0YvNSQ7Li8sJDtcXHg5MC8jJCslKSglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XFx1MDE0QiEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceEQxL10jJCU7QS8sIztcXHhEMS8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0EvLCM7XFx4RDEvIyQrXFxcIikoXFxcIicjJicjJi8nJDhcXFwiOlxcdTAxNENcXFwiICkoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHg5OS9dIyQlO0IvLCM7XFx4QTAvIyQrXFxcIikoXFxcIicjJicjMDYqJTtCLywjO1xceEEwLyMkK1xcXCIpKFxcXCInIyYnIyYvJyQ4XFxcIjpcXHUwMTREXFxcIiApKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7TC5PICY7XFx4OTkuSSAmJTtALlxcXCIgJlxcXCIvOiM7dC8xJDs/LlxcXCIgJlxcXCIvIyQrIykoIycjKFxcXCInIyYnIy9dIyQlO0IvLCM7XFx4QTAvIyQrXFxcIikoXFxcIicjJicjMDYqJTtCLywjO1xceEEwLyMkK1xcXCIpKFxcXCInIyYnIyYvJyQ4XFxcIjpcXHUwMTRFXFxcIiApKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7XFx4RDQvXSMkJTtCLywjO1xceEQ1LyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7Qi8sIztcXHhENS8jJCtcXFwiKShcXFwiJyMmJyMmLyckOFxcXCI6XFx1MDE0RlxcXCIgKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceDk2LyYgOCE6XFx1MDE1MCEgKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUzXFx1MDE1MVxcXCJcXFwiNSg3XFx1MDE1Mi86Izs8LzEkOzYvKCQ4IzpcXHUwMTUzIyEgKSgjJyMoXFxcIicjJicjLmcgJiUzXFx1MDE1NFxcXCJcXFwiNSY3XFx1MDE1NS86Izs8LzEkOzYvKCQ4IzpcXHUwMTU2IyEgKSgjJyMoXFxcIicjJicjLjogJiUzXFx1MDE1N1xcXCJcXFwiNSo3XFx1MDE1OC8mIDghOlxcdTAxNTkhICkuIyAmO1xceEEwXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSU7Ni9rIyQlO0EvMiM7Ni8pJDhcXFwiOlxcdTAxNUFcXFwiXFxcIiQgKShcXFwiJyMmJyMwPColO0EvMiM7Ni8pJDhcXFwiOlxcdTAxNUFcXFwiXFxcIiQgKShcXFwiJyMmJyMmLykkOFxcXCI6XFx1MDE1QlxcXCJcXFwiISApKFxcXCInIyYnIy5cXFwiICZcXFwiLycgOCE6XFx1MDE1QyEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceEQ4L1kjJCU7QS8sIztcXHhEOC8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0EvLCM7XFx4RDgvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceDk5L1kjJCU7Qi8sIztcXHhBMC8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0IvLCM7XFx4QTAvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XFx1MDE1RCEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceERCL1kjJCU7Qi8sIztcXHhEQy8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0IvLCM7XFx4REMvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xcdTAxNUVcXFwiXFxcIjUmN1xcdTAxNUYuOyAmM1xcdTAxNjBcXFwiXFxcIjUnN1xcdTAxNjEuLyAmM1xcdTAxNjJcXFwiXFxcIjUqN1xcdTAxNjMuIyAmOzYvJiA4ITpcXHUwMTY0ISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTY1XFxcIlxcXCI1JjdcXHUwMTY2LzojOzwvMSQ7XFx4REQvKCQ4IzpcXHUwMTY3IyEgKSgjJyMoXFxcIicjJicjLn0gJiUzXFx4RjVcXFwiXFxcIjUnN1xceEY2LzojOzwvMSQ7XFx4OUUvKCQ4IzpcXHUwMTY4IyEgKSgjJyMoXFxcIicjJicjLlAgJiUzXFx1MDE2OVxcXCJcXFwiNSs3XFx1MDE2QS86Izs8LzEkO1xceDlFLygkOCM6XFx1MDE2QiMhICkoIycjKFxcXCInIyYnIy4jICY7XFx4QTBcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIzXFx1MDE2Q1xcXCJcXFwiNSs3XFx1MDE2RC5rICYzXFx1MDE2RVxcXCJcXFwiNSk3XFx1MDE2Ri5fICYzXFx1MDE3MFxcXCJcXFwiNSg3XFx1MDE3MS5TICYzXFx1MDE3MlxcXCJcXFwiNSc3XFx1MDE3My5HICYzXFx1MDE3NFxcXCJcXFwiNSY3XFx1MDE3NS47ICYzXFx1MDE3NlxcXCJcXFwiNSo3XFx1MDE3Ny4vICYzXFx1MDE3OFxcXCJcXFwiNSk3XFx1MDE3OS4jICY7NlwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjsxLlxcXCIgJlxcXCJcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlJTs2L2sjJCU7QS8yIzs2LykkOFxcXCI6XFx1MDE1QVxcXCJcXFwiJCApKFxcXCInIyYnIzA8KiU7QS8yIzs2LykkOFxcXCI6XFx1MDE1QVxcXCJcXFwiJCApKFxcXCInIyYnIyYvKSQ4XFxcIjpcXHUwMTVCXFxcIlxcXCIhICkoXFxcIicjJicjLlxcXCIgJlxcXCIvJyA4ITpcXHUwMTdBISEgKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7TC4jICY7XFx4OTkvXSMkJTtCLywjO1xceEUxLyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7Qi8sIztcXHhFMS8jJCtcXFwiKShcXFwiJyMmJyMmLyckOFxcXCI6XFx1MDE3QlxcXCIgKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCI7XFx4QjkuIyAmO1xceEEwXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHhFMy9ZIyQlO0EvLCM7XFx4RTMvIyQrXFxcIikoXFxcIicjJicjMDYqJTtBLywjO1xceEUzLyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrXFxcIikoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHhFQS9rIzsuL2IkO1xceEVEL1kkJCU7Qi8sIztcXHhFNC8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0IvLCM7XFx4RTQvIyQrXFxcIikoXFxcIicjJicjJi8jJCskKSgkJyMoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjtcXHhFNS47ICY7XFx4RTYuNSAmO1xceEU3Li8gJjtcXHhFOC4pICY7XFx4RTkuIyAmO1xceEEwXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTdDXFxcIlxcXCI1IzdcXHUwMTdELzojOzwvMSQ7XFx4RjAvKCQ4IzpcXHUwMTdFIyEgKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTdGXFxcIlxcXCI1JTdcXHUwMTgwLzojOzwvMSQ7VC8oJDgjOlxcdTAxODEjISApKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xcdTAxODJcXFwiXFxcIjUoN1xcdTAxODMvRiM7PC89JDtcXFxcLikgJjtZLiMgJjtYLygkOCM6XFx1MDE4NCMhICkoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUzXFx1MDE4NVxcXCJcXFwiNSY3XFx1MDE4Ni86Izs8LzEkOzYvKCQ4IzpcXHUwMTg3IyEgKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTg4XFxcIlxcXCI1JTdcXHUwMTg5L0EjOzwvOCQkOyEwIyo7ISYvKCQ4IzpcXHUwMThBIyEgKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHhFQi9HIzs7Lz4kOzYvNSQ7Oy8sJDtcXHhFQy8jJCslKSglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xceDkyXFxcIlxcXCI1IzdcXHhEMy4jICY7Ni8nIDghOlxcdTAxOEIhISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHhCMVxcXCJcXFwiNSM3XFx1MDE4Qy5HICYzXFx4QjNcXFwiXFxcIjUjN1xcdTAxOEQuOyAmM1xceEI3XFxcIlxcXCI1IzdcXHUwMThFLi8gJjNcXHhCNVxcXCJcXFwiNSQ3XFx1MDE4Ri4jICY7Ni8nIDghOlxcdTAxOTAhISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHhFRS9EIyU7Qy8sIztcXHhFRi8jJCtcXFwiKShcXFwiJyMmJyMuXFxcIiAmXFxcIi8jJCtcXFwiKShcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1UuKSAmO1xcXFwuIyAmO1gvJiA4ITpcXHUwMTkxISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJSU7IS5cXFwiICZcXFwiL1sjOyEuXFxcIiAmXFxcIi9NJDshLlxcXCIgJlxcXCIvPyQ7IS5cXFwiICZcXFwiLzEkOyEuXFxcIiAmXFxcIi8jJCslKSglJyMoJCcjKCMnIyhcXFwiJyMmJyMvJyA4ITpcXHUwMTkyISEgKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUlOyEvPyM7IS5cXFwiICZcXFwiLzEkOyEuXFxcIiAmXFxcIi8jJCsjKSgjJyMoXFxcIicjJicjLycgOCE6XFx1MDE5MyEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCI7XFx4QkVcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceDlFL14jJCU7Qi8sIztcXHhGMy8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0IvLCM7XFx4RjMvIyQrXFxcIikoXFxcIicjJicjJi8oJDhcXFwiOlxcdTAxOTRcXFwiISEpKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIjtcXHhGNC4jICY7XFx4QTBcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlMlxcdTAxOTVcXFwiXFxcIjZcXHUwMTk1N1xcdTAxOTYvTCM7PC9DJDJcXHUwMTk3XFxcIlxcXCI2XFx1MDE5NzdcXHUwMTk4LikgJjJcXHUwMTk5XFxcIlxcXCI2XFx1MDE5OTdcXHUwMTlBLygkOCM6XFx1MDE5QiMhICkoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7XFx4OUUvXiMkJTtCLywjO1xceEEwLyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7Qi8sIztcXHhBMC8jJCtcXFwiKShcXFwiJyMmJyMmLygkOFxcXCI6XFx1MDE5Q1xcXCIhISkoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTs2LzUjOzAvLCQ7XFx4RjcvIyQrIykoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiQ7Mi4pICY7NC4jICY7LjAvKjsyLikgJjs0LiMgJjsuJlwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiQ7JTAjKjslJlwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7XFx4RkEvOyMyOFxcXCJcXFwiNjg3OS8sJDtcXHhGQi8jJCsjKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTNcXHUwMTlEXFxcIlxcXCI1JTdcXHUwMTlFLikgJjNcXHUwMTlGXFxcIlxcXCI1JDdcXHUwMUEwLycgOCE6XFx1MDFBMSEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xceEZDL0ojJTI4XFxcIlxcXCI2ODc5LywjO14vIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvIyQrXFxcIikoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXFxcLikgJjtYLiMgJjtcXHg4Mi8nIDghOlxcdTAxQTIhISApXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiO1xcXCIuUyAmOyEuTSAmMkZcXFwiXFxcIjZGN0cuQSAmMkpcXFwiXFxcIjZKN0suNSAmMkhcXFwiXFxcIjZIN0kuKSAmMk5cXFwiXFxcIjZON09cIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIyTFxcXCJcXFwiNkw3TS5cXHg5NSAmMkJcXFwiXFxcIjZCN0MuXFx4ODkgJjI8XFxcIlxcXCI2PDc9Ln0gJjJSXFxcIlxcXCI2UjdTLnEgJjJUXFxcIlxcXCI2VDdVLmUgJjJWXFxcIlxcXCI2VjdXLlkgJjJQXFxcIlxcXCI2UDdRLk0gJjJAXFxcIlxcXCI2QDdBLkEgJjJEXFxcIlxcXCI2RDdFLjUgJjIyXFxcIlxcXCI2MjczLikgJjI+XFxcIlxcXCI2Pjc/XCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTtcXHUwMTAwL2IjMjhcXFwiXFxcIjY4NzkvUyQ7XFx4RkIvSiQlMlxcdTAxQTNcXFwiXFxcIjZcXHUwMUEzN1xcdTAxQTQvLCM7XFx4RUMvIyQrXFxcIikoXFxcIicjJicjLlxcXCIgJlxcXCIvIyQrJCkoJCcjKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlM1xcdTAxQTVcXFwiXFxcIjUlN1xcdTAxQTYuKSAmM1xcdTAxQTdcXFwiXFxcIjUkN1xcdTAxQTgvJyA4ITpcXHUwMUExISEgKVwiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiUzXFx4QjFcXFwiXFxcIjUjN1xceEIyLjYgJjNcXHhCM1xcXCJcXFwiNSM3XFx4QjQuKiAmJDsrMCMqOysmLycgOCE6XFx1MDFBOSEhIClcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO1xcdTAxMDQvXFx4ODcjMkZcXFwiXFxcIjZGN0cveCQ7XFx1MDEwMy9vJDJGXFxcIlxcXCI2RjdHL2AkO1xcdTAxMDMvVyQyRlxcXCJcXFwiNkY3Ry9IJDtcXHUwMTAzLz8kMkZcXFwiXFxcIjZGN0cvMCQ7XFx1MDEwNS8nJDgpOlxcdTAxQUEpICkoKScjKCgnIygnJyMoJicjKCUnIygkJyMoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7Iy8+IzsjLzUkOyMvLCQ7Iy8jJCskKSgkJyMoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7XFx1MDEwMy8sIztcXHUwMTAzLyMkK1xcXCIpKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7XFx1MDEwMy81IztcXHUwMTAzLywkO1xcdTAxMDMvIyQrIykoIycjKFxcXCInIyYnI1wiKSxcbiAgICAgICAgcGVnJGRlY29kZShcIiU7cS9UIyQ7bTAjKjttJi9EJCU7IC8sIztcXHhGOC8jJCtcXFwiKShcXFwiJyMmJyMuXFxcIiAmXFxcIi8jJCsjKSgjJyMoXFxcIicjJicjXCIpLFxuICAgICAgICBwZWckZGVjb2RlKFwiJTJcXHUwMUFCXFxcIlxcXCI2XFx1MDFBQjdcXHUwMUFDLikgJjJcXHUwMUFEXFxcIlxcXCI2XFx1MDFBRDdcXHUwMUFFL3cjOzAvbiQ7XFx1MDEwOC9lJCQlO0IvMiM7XFx1MDEwOS4jICY7XFx4QTAvIyQrXFxcIikoXFxcIicjJicjMDwqJTtCLzIjO1xcdTAxMDkuIyAmO1xceEEwLyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrJCkoJCcjKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCI7XFx4OTkuIyAmO0xcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlMlxcdTAxQUZcXFwiXFxcIjZcXHUwMUFGN1xcdTAxQjAvNSM7PC8sJDtcXHUwMTBBLyMkKyMpKCMnIyhcXFwiJyMmJyNcIiksXG4gICAgICAgIHBlZyRkZWNvZGUoXCIlO0QvUyM7LC9KJDI6XFxcIlxcXCI2Ojc7LzskOywuIyAmO1QvLCQ7RS8jJCslKSglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIilcbiAgICBdO1xuICAgIGxldCBwZWckY3VyclBvcyA9IDA7XG4gICAgbGV0IHBlZyRzYXZlZFBvcyA9IDA7XG4gICAgY29uc3QgcGVnJHBvc0RldGFpbHNDYWNoZSA9IFt7IGxpbmU6IDEsIGNvbHVtbjogMSB9XTtcbiAgICBsZXQgcGVnJG1heEZhaWxQb3MgPSAwO1xuICAgIGxldCBwZWckbWF4RmFpbEV4cGVjdGVkID0gW107XG4gICAgbGV0IHBlZyRzaWxlbnRGYWlscyA9IDA7XG4gICAgbGV0IHBlZyRyZXN1bHQ7XG4gICAgaWYgKG9wdGlvbnMuc3RhcnRSdWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKCEob3B0aW9ucy5zdGFydFJ1bGUgaW4gcGVnJHN0YXJ0UnVsZUluZGljZXMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBzdGFydCBwYXJzaW5nIGZyb20gcnVsZSBcXFwiXCIgKyBvcHRpb25zLnN0YXJ0UnVsZSArIFwiXFxcIi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcGVnJHN0YXJ0UnVsZUluZGV4ID0gcGVnJHN0YXJ0UnVsZUluZGljZXNbb3B0aW9ucy5zdGFydFJ1bGVdO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0ZXh0KCkge1xuICAgICAgICByZXR1cm4gaW5wdXQuc3Vic3RyaW5nKHBlZyRzYXZlZFBvcywgcGVnJGN1cnJQb3MpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsb2NhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHBlZyRjb21wdXRlTG9jYXRpb24ocGVnJHNhdmVkUG9zLCBwZWckY3VyclBvcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV4cGVjdGVkKGRlc2NyaXB0aW9uLCBsb2NhdGlvbjEpIHtcbiAgICAgICAgbG9jYXRpb24xID0gbG9jYXRpb24xICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gbG9jYXRpb24xXG4gICAgICAgICAgICA6IHBlZyRjb21wdXRlTG9jYXRpb24ocGVnJHNhdmVkUG9zLCBwZWckY3VyclBvcyk7XG4gICAgICAgIHRocm93IHBlZyRidWlsZFN0cnVjdHVyZWRFcnJvcihbcGVnJG90aGVyRXhwZWN0YXRpb24oZGVzY3JpcHRpb24pXSwgaW5wdXQuc3Vic3RyaW5nKHBlZyRzYXZlZFBvcywgcGVnJGN1cnJQb3MpLCBsb2NhdGlvbjEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlcnJvcihtZXNzYWdlLCBsb2NhdGlvbjEpIHtcbiAgICAgICAgbG9jYXRpb24xID0gbG9jYXRpb24xICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gbG9jYXRpb24xXG4gICAgICAgICAgICA6IHBlZyRjb21wdXRlTG9jYXRpb24ocGVnJHNhdmVkUG9zLCBwZWckY3VyclBvcyk7XG4gICAgICAgIHRocm93IHBlZyRidWlsZFNpbXBsZUVycm9yKG1lc3NhZ2UsIGxvY2F0aW9uMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRsaXRlcmFsRXhwZWN0YXRpb24odGV4dDEsIGlnbm9yZUNhc2UpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJsaXRlcmFsXCIsIHRleHQ6IHRleHQxLCBpZ25vcmVDYXNlOiBpZ25vcmVDYXNlIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRjbGFzc0V4cGVjdGF0aW9uKHBhcnRzLCBpbnZlcnRlZCwgaWdub3JlQ2FzZSkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImNsYXNzXCIsIHBhcnRzOiBwYXJ0cywgaW52ZXJ0ZWQ6IGludmVydGVkLCBpZ25vcmVDYXNlOiBpZ25vcmVDYXNlIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRhbnlFeHBlY3RhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJhbnlcIiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckZW5kRXhwZWN0YXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwiZW5kXCIgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJG90aGVyRXhwZWN0YXRpb24oZGVzY3JpcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJvdGhlclwiLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJGNvbXB1dGVQb3NEZXRhaWxzKHBvcykge1xuICAgICAgICBsZXQgZGV0YWlscyA9IHBlZyRwb3NEZXRhaWxzQ2FjaGVbcG9zXTtcbiAgICAgICAgbGV0IHA7XG4gICAgICAgIGlmIChkZXRhaWxzKSB7XG4gICAgICAgICAgICByZXR1cm4gZGV0YWlscztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHAgPSBwb3MgLSAxO1xuICAgICAgICAgICAgd2hpbGUgKCFwZWckcG9zRGV0YWlsc0NhY2hlW3BdKSB7XG4gICAgICAgICAgICAgICAgcC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGV0YWlscyA9IHBlZyRwb3NEZXRhaWxzQ2FjaGVbcF07XG4gICAgICAgICAgICBkZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgIGxpbmU6IGRldGFpbHMubGluZSxcbiAgICAgICAgICAgICAgICBjb2x1bW46IGRldGFpbHMuY29sdW1uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd2hpbGUgKHAgPCBwb3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChwKSA9PT0gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5saW5lKys7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHMuY29sdW1uID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHMuY29sdW1uKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHArKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBlZyRwb3NEZXRhaWxzQ2FjaGVbcG9zXSA9IGRldGFpbHM7XG4gICAgICAgICAgICByZXR1cm4gZGV0YWlscztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckY29tcHV0ZUxvY2F0aW9uKHN0YXJ0UG9zLCBlbmRQb3MpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRQb3NEZXRhaWxzID0gcGVnJGNvbXB1dGVQb3NEZXRhaWxzKHN0YXJ0UG9zKTtcbiAgICAgICAgY29uc3QgZW5kUG9zRGV0YWlscyA9IHBlZyRjb21wdXRlUG9zRGV0YWlscyhlbmRQb3MpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhcnQ6IHtcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IHN0YXJ0UG9zLFxuICAgICAgICAgICAgICAgIGxpbmU6IHN0YXJ0UG9zRGV0YWlscy5saW5lLFxuICAgICAgICAgICAgICAgIGNvbHVtbjogc3RhcnRQb3NEZXRhaWxzLmNvbHVtblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVuZDoge1xuICAgICAgICAgICAgICAgIG9mZnNldDogZW5kUG9zLFxuICAgICAgICAgICAgICAgIGxpbmU6IGVuZFBvc0RldGFpbHMubGluZSxcbiAgICAgICAgICAgICAgICBjb2x1bW46IGVuZFBvc0RldGFpbHMuY29sdW1uXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRmYWlsKGV4cGVjdGVkMSkge1xuICAgICAgICBpZiAocGVnJGN1cnJQb3MgPCBwZWckbWF4RmFpbFBvcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwZWckY3VyclBvcyA+IHBlZyRtYXhGYWlsUG9zKSB7XG4gICAgICAgICAgICBwZWckbWF4RmFpbFBvcyA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgcGVnJG1heEZhaWxFeHBlY3RlZCA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHBlZyRtYXhGYWlsRXhwZWN0ZWQucHVzaChleHBlY3RlZDEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwZWckYnVpbGRTaW1wbGVFcnJvcihtZXNzYWdlLCBsb2NhdGlvbjEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeW50YXhFcnJvcihtZXNzYWdlLCBbXSwgXCJcIiwgbG9jYXRpb24xKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJGJ1aWxkU3RydWN0dXJlZEVycm9yKGV4cGVjdGVkMSwgZm91bmQsIGxvY2F0aW9uMSkge1xuICAgICAgICByZXR1cm4gbmV3IFN5bnRheEVycm9yKFN5bnRheEVycm9yLmJ1aWxkTWVzc2FnZShleHBlY3RlZDEsIGZvdW5kKSwgZXhwZWN0ZWQxLCBmb3VuZCwgbG9jYXRpb24xKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGVnJGRlY29kZShzKSB7XG4gICAgICAgIHJldHVybiBzLnNwbGl0KFwiXCIpLm1hcCgoY2gpID0+IGNoLmNoYXJDb2RlQXQoMCkgLSAzMik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZyRwYXJzZVJ1bGUoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgYmMgPSBwZWckYnl0ZWNvZGVbaW5kZXhdO1xuICAgICAgICBsZXQgaXAgPSAwO1xuICAgICAgICBjb25zdCBpcHMgPSBbXTtcbiAgICAgICAgbGV0IGVuZCA9IGJjLmxlbmd0aDtcbiAgICAgICAgY29uc3QgZW5kcyA9IFtdO1xuICAgICAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgICAgICBsZXQgcGFyYW1zO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgd2hpbGUgKGlwIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChiY1tpcF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChwZWckY29uc3RzW2JjW2lwICsgMV1dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwICs9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXArKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXArKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHBlZyRGQUlMRUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXArKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChwZWckY3VyclBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpcCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXArKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXArKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5sZW5ndGggLT0gYmNbaXAgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwICs9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2suc3BsaWNlKC0yLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDJdLnB1c2goc3RhY2sucG9wKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXArKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChzdGFjay5zcGxpY2Uoc3RhY2subGVuZ3RoIC0gYmNbaXAgKyAxXSwgYmNbaXAgKyAxXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChpbnB1dC5zdWJzdHJpbmcoc3RhY2sucG9wKCksIHBlZyRjdXJyUG9zKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpcCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwcy5wdXNoKGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFja1tzdGFjay5sZW5ndGggLSAxXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlwICs9IDMgKyBiY1tpcCArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwcy5wdXNoKGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFja1tzdGFjay5sZW5ndGggLSAxXSA9PT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlwICs9IDMgKyBiY1tpcCArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwcy5wdXNoKGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFja1tzdGFjay5sZW5ndGggLSAxXSAhPT0gcGVnJEZBSUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlwICs9IDMgKyBiY1tpcCArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gIT09IHBlZyRGQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcHMucHVzaChpcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gaXAgKyAyICsgYmNbaXAgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcCArPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gMiArIGJjW2lwICsgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHMucHVzaChlbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXBzLnB1c2goaXAgKyAzICsgYmNbaXAgKyAxXSArIGJjW2lwICsgMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA+IHBlZyRjdXJyUG9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gaXAgKyAzICsgYmNbaXAgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcCArPSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gaXAgKyAzICsgYmNbaXAgKyAxXSArIGJjW2lwICsgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gMyArIGJjW2lwICsgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxODpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHMucHVzaChlbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXBzLnB1c2goaXAgKyA0ICsgYmNbaXAgKyAyXSArIGJjW2lwICsgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgcGVnJGNvbnN0c1tiY1tpcCArIDFdXS5sZW5ndGgpID09PSBwZWckY29uc3RzW2JjW2lwICsgMV1dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gaXAgKyA0ICsgYmNbaXAgKyAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcCArPSA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gaXAgKyA0ICsgYmNbaXAgKyAyXSArIGJjW2lwICsgM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gNCArIGJjW2lwICsgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHMucHVzaChlbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXBzLnB1c2goaXAgKyA0ICsgYmNbaXAgKyAyXSArIGJjW2lwICsgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgcGVnJGNvbnN0c1tiY1tpcCArIDFdXS5sZW5ndGgpLnRvTG93ZXJDYXNlKCkgPT09IHBlZyRjb25zdHNbYmNbaXAgKyAxXV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDQgKyBiY1tpcCArIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlwICs9IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDQgKyBiY1tpcCArIDJdICsgYmNbaXAgKyAzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcCArPSA0ICsgYmNbaXAgKyAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kcy5wdXNoKGVuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpcHMucHVzaChpcCArIDQgKyBiY1tpcCArIDJdICsgYmNbaXAgKyAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVnJGNvbnN0c1tiY1tpcCArIDFdXS50ZXN0KGlucHV0LmNoYXJBdChwZWckY3VyclBvcykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gaXAgKyA0ICsgYmNbaXAgKyAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcCArPSA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gaXAgKyA0ICsgYmNbaXAgKyAyXSArIGJjW2lwICsgM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gNCArIGJjW2lwICsgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCBiY1tpcCArIDFdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSBiY1tpcCArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDIyOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChwZWckY29uc3RzW2JjW2lwICsgMV1dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IHBlZyRjb25zdHNbYmNbaXAgKyAxXV0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDIzOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChwZWckRkFJTEVEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWckZmFpbChwZWckY29uc3RzW2JjW2lwICsgMV1dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlwICs9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDEgLSBiY1tpcCArIDFdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwICs9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZyRzYXZlZFBvcyA9IHBlZyRjdXJyUG9zO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXArKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI2OlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zID0gYmMuc2xpY2UoaXAgKyA0LCBpcCArIDQgKyBiY1tpcCArIDNdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDEgLSBwXTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5zcGxpY2Uoc3RhY2subGVuZ3RoIC0gYmNbaXAgKyAyXSwgYmNbaXAgKyAyXSwgcGVnJGNvbnN0c1tiY1tpcCArIDFdXS5hcHBseShudWxsLCBwYXJhbXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwICs9IDQgKyBiY1tpcCArIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHBlZyRwYXJzZVJ1bGUoYmNbaXAgKyAxXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXAgKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI4OlxuICAgICAgICAgICAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpcCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb3Bjb2RlOiBcIiArIGJjW2lwXSArIFwiLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZW5kID0gZW5kcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpcCA9IGlwcy5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGFja1swXTtcbiAgICB9XG4gICAgb3B0aW9ucy5kYXRhID0ge307IC8vIE9iamVjdCB0byB3aGljaCBoZWFkZXIgYXR0cmlidXRlcyB3aWxsIGJlIGFzc2lnbmVkIGR1cmluZyBwYXJzaW5nXG4gICAgZnVuY3Rpb24gbGlzdChoZWFkLCB0YWlsKSB7XG4gICAgICAgIHJldHVybiBbaGVhZF0uY29uY2F0KHRhaWwpO1xuICAgIH1cbiAgICBwZWckcmVzdWx0ID0gcGVnJHBhcnNlUnVsZShwZWckc3RhcnRSdWxlSW5kZXgpO1xuICAgIGlmIChwZWckcmVzdWx0ICE9PSBwZWckRkFJTEVEICYmIHBlZyRjdXJyUG9zID09PSBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHBlZyRyZXN1bHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAocGVnJHJlc3VsdCAhPT0gcGVnJEZBSUxFRCAmJiBwZWckY3VyclBvcyA8IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgcGVnJGZhaWwocGVnJGVuZEV4cGVjdGF0aW9uKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IHBlZyRidWlsZFN0cnVjdHVyZWRFcnJvcihwZWckbWF4RmFpbEV4cGVjdGVkLCBwZWckbWF4RmFpbFBvcyA8IGlucHV0Lmxlbmd0aCA/IGlucHV0LmNoYXJBdChwZWckbWF4RmFpbFBvcykgOiBudWxsLCBwZWckbWF4RmFpbFBvcyA8IGlucHV0Lmxlbmd0aFxuICAgICAgICAgICAgPyBwZWckY29tcHV0ZUxvY2F0aW9uKHBlZyRtYXhGYWlsUG9zLCBwZWckbWF4RmFpbFBvcyArIDEpXG4gICAgICAgICAgICA6IHBlZyRjb21wdXRlTG9jYXRpb24ocGVnJG1heEZhaWxQb3MsIHBlZyRtYXhGYWlsUG9zKSk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IHBhcnNlID0gcGVnJHBhcnNlO1xuIiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZSAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8taW5uZXItZGVjbGFyYXRpb25zICovXG5pbXBvcnQgKiBhcyBwZWdHcmFtbWFyIGZyb20gXCIuL3BlZ2pzL2Rpc3QvZ3JhbW1hclwiO1xuLyoqXG4gKiBHcmFtbWFyLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgR3JhbW1hcjtcbihmdW5jdGlvbiAoR3JhbW1hcikge1xuICAgIC8qKlxuICAgICAqIFBhcnNlLlxuICAgICAqIEBwYXJhbSBpbnB1dCAtXG4gICAgICogQHBhcmFtIHN0YXJ0UnVsZSAtXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBmdW5jdGlvbiBwYXJzZShpbnB1dCwgc3RhcnRSdWxlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IHN0YXJ0UnVsZSB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGVnR3JhbW1hci5wYXJzZShpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRpb25zLmRhdGE7XG4gICAgfVxuICAgIEdyYW1tYXIucGFyc2UgPSBwYXJzZTtcbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgZ2l2ZW4gc3RyaW5nIGFuZCByZXR1cm5zIGEgU0lQLk5hbWVBZGRySGVhZGVyIGluc3RhbmNlIG9yIHVuZGVmaW5lZCBpZlxuICAgICAqIGl0IGlzIGFuIGludmFsaWQgTmFtZUFkZHJIZWFkZXIuXG4gICAgICogQHBhcmFtIG5hbWVfYWRkcl9oZWFkZXIgLVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5hbWVBZGRySGVhZGVyUGFyc2UobmFtZUFkZHJIZWFkZXIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgcGFyc2VkTmFtZUFkZHJIZWFkZXIgPSBHcmFtbWFyLnBhcnNlKG5hbWVBZGRySGVhZGVyLCBcIk5hbWVfQWRkcl9IZWFkZXJcIik7XG4gICAgICAgIHJldHVybiBwYXJzZWROYW1lQWRkckhlYWRlciAhPT0gLTEgPyBwYXJzZWROYW1lQWRkckhlYWRlciA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgR3JhbW1hci5uYW1lQWRkckhlYWRlclBhcnNlID0gbmFtZUFkZHJIZWFkZXJQYXJzZTtcbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgZ2l2ZW4gc3RyaW5nIGFuZCByZXR1cm5zIGEgU0lQLlVSSSBpbnN0YW5jZSBvciB1bmRlZmluZWQgaWZcbiAgICAgKiBpdCBpcyBhbiBpbnZhbGlkIFVSSS5cbiAgICAgKiBAcGFyYW0gdXJpIC1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBVUklQYXJzZSh1cmkpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgcGFyc2VkVXJpID0gR3JhbW1hci5wYXJzZSh1cmksIFwiU0lQX1VSSVwiKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZFVyaSAhPT0gLTEgPyBwYXJzZWRVcmkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIEdyYW1tYXIuVVJJUGFyc2UgPSBVUklQYXJzZTtcbn0pKEdyYW1tYXIgfHwgKEdyYW1tYXIgPSB7fSkpO1xuIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbi8vXG4vLyBTY29wZWQgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2NvdGFnL3RzLW1kNVxuLy9cbi8qXG5cblR5cGVTY3JpcHQgTWQ1XG49PT09PT09PT09PT09PVxuXG5CYXNlZCBvbiB3b3JrIGJ5XG4qIEpvc2VwaCBNeWVyczogaHR0cDovL3d3dy5teWVyc2RhaWx5Lm9yZy9qb3NlcGgvamF2YXNjcmlwdC9tZDUtdGV4dC5odG1sXG4qIEFuZHLDqSBDcnV6OiBodHRwczovL2dpdGh1Yi5jb20vc2F0YXpvci9TcGFya01ENVxuKiBSYXltb25kIEhpbGw6IGh0dHBzOi8vZ2l0aHViLmNvbS9nb3JoaWxsL3lhbWQ1LmpzXG5cbkVmZmVjdGl2ZWx5IGEgVHlwZVNjcnlwdCByZS13cml0ZSBvZiBSYXltb25kIEhpbGwgSlMgTGlicmFyeVxuXG5UaGUgTUlUIExpY2Vuc2UgKE1JVClcblxuQ29weXJpZ2h0IChDKSAyMDE0IFJheW1vbmQgSGlsbFxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG5hbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG5USEUgU09GVFdBUkUuXG5cblxuXG4gICAgICAgICAgICBETyBXSEFUIFRIRSBGVUNLIFlPVSBXQU5UIFRPIFBVQkxJQyBMSUNFTlNFXG4gICAgICAgICAgICAgICAgICAgIFZlcnNpb24gMiwgRGVjZW1iZXIgMjAwNFxuXG4gQ29weXJpZ2h0IChDKSAyMDE1IEFuZHLDqSBDcnV6IDxhbWRmY3J1ekBnbWFpbC5jb20+XG5cbiBFdmVyeW9uZSBpcyBwZXJtaXR0ZWQgdG8gY29weSBhbmQgZGlzdHJpYnV0ZSB2ZXJiYXRpbSBvciBtb2RpZmllZFxuIGNvcGllcyBvZiB0aGlzIGxpY2Vuc2UgZG9jdW1lbnQsIGFuZCBjaGFuZ2luZyBpdCBpcyBhbGxvd2VkIGFzIGxvbmdcbiBhcyB0aGUgbmFtZSBpcyBjaGFuZ2VkLlxuXG4gICAgICAgICAgICBETyBXSEFUIFRIRSBGVUNLIFlPVSBXQU5UIFRPIFBVQkxJQyBMSUNFTlNFXG4gICBURVJNUyBBTkQgQ09ORElUSU9OUyBGT1IgQ09QWUlORywgRElTVFJJQlVUSU9OIEFORCBNT0RJRklDQVRJT05cblxuICAwLiBZb3UganVzdCBETyBXSEFUIFRIRSBGVUNLIFlPVSBXQU5UIFRPLlxuXG5cbiovXG5leHBvcnQgY2xhc3MgTWQ1IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fZGF0YUxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX2J1ZmZlckxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gbmV3IEludDMyQXJyYXkoNCk7XG4gICAgICAgIHRoaXMuX2J1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcig2OCk7XG4gICAgICAgIHRoaXMuX2J1ZmZlcjggPSBuZXcgVWludDhBcnJheSh0aGlzLl9idWZmZXIsIDAsIDY4KTtcbiAgICAgICAgdGhpcy5fYnVmZmVyMzIgPSBuZXcgVWludDMyQXJyYXkodGhpcy5fYnVmZmVyLCAwLCAxNyk7XG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICB9XG4gICAgc3RhdGljIGhhc2hTdHIoc3RyLCByYXcgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbmVQYXNzSGFzaGVyXG4gICAgICAgICAgICAuc3RhcnQoKVxuICAgICAgICAgICAgLmFwcGVuZFN0cihzdHIpXG4gICAgICAgICAgICAuZW5kKHJhdyk7XG4gICAgfVxuICAgIHN0YXRpYyBoYXNoQXNjaWlTdHIoc3RyLCByYXcgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbmVQYXNzSGFzaGVyXG4gICAgICAgICAgICAuc3RhcnQoKVxuICAgICAgICAgICAgLmFwcGVuZEFzY2lpU3RyKHN0cilcbiAgICAgICAgICAgIC5lbmQocmF3KTtcbiAgICB9XG4gICAgc3RhdGljIF9oZXgoeCkge1xuICAgICAgICBjb25zdCBoYyA9IE1kNS5oZXhDaGFycztcbiAgICAgICAgY29uc3QgaG8gPSBNZDUuaGV4T3V0O1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IG9mZnNldDtcbiAgICAgICAgbGV0IGo7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNDsgaSArPSAxKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBpICogODtcbiAgICAgICAgICAgIG4gPSB4W2ldO1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IDg7IGogKz0gMikge1xuICAgICAgICAgICAgICAgIGhvW29mZnNldCArIDEgKyBqXSA9IGhjLmNoYXJBdChuICYgMHgwRik7XG4gICAgICAgICAgICAgICAgbiA+Pj49IDQ7XG4gICAgICAgICAgICAgICAgaG9bb2Zmc2V0ICsgMCArIGpdID0gaGMuY2hhckF0KG4gJiAweDBGKTtcbiAgICAgICAgICAgICAgICBuID4+Pj0gNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaG8uam9pbignJyk7XG4gICAgfVxuICAgIHN0YXRpYyBfbWQ1Y3ljbGUoeCwgaykge1xuICAgICAgICBsZXQgYSA9IHhbMF07XG4gICAgICAgIGxldCBiID0geFsxXTtcbiAgICAgICAgbGV0IGMgPSB4WzJdO1xuICAgICAgICBsZXQgZCA9IHhbM107XG4gICAgICAgIC8vIGZmKClcbiAgICAgICAgYSArPSAoYiAmIGMgfCB+YiAmIGQpICsga1swXSAtIDY4MDg3NjkzNiB8IDA7XG4gICAgICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpICsgYiB8IDA7XG4gICAgICAgIGQgKz0gKGEgJiBiIHwgfmEgJiBjKSArIGtbMV0gLSAzODk1NjQ1ODYgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCAmIGEgfCB+ZCAmIGIpICsga1syXSArIDYwNjEwNTgxOSB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgfCAwO1xuICAgICAgICBiICs9IChjICYgZCB8IH5jICYgYSkgKyBrWzNdIC0gMTA0NDUyNTMzMCB8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAyMiB8IGIgPj4+IDEwKSArIGMgfCAwO1xuICAgICAgICBhICs9IChiICYgYyB8IH5iICYgZCkgKyBrWzRdIC0gMTc2NDE4ODk3IHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSAmIGIgfCB+YSAmIGMpICsga1s1XSArIDEyMDAwODA0MjYgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCAmIGEgfCB+ZCAmIGIpICsga1s2XSAtIDE0NzMyMzEzNDEgfCAwO1xuICAgICAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIHwgMDtcbiAgICAgICAgYiArPSAoYyAmIGQgfCB+YyAmIGEpICsga1s3XSAtIDQ1NzA1OTgzIHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyB8IDA7XG4gICAgICAgIGEgKz0gKGIgJiBjIHwgfmIgJiBkKSArIGtbOF0gKyAxNzcwMDM1NDE2IHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSAmIGIgfCB+YSAmIGMpICsga1s5XSAtIDE5NTg0MTQ0MTcgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCAmIGEgfCB+ZCAmIGIpICsga1sxMF0gLSA0MjA2MyB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgfCAwO1xuICAgICAgICBiICs9IChjICYgZCB8IH5jICYgYSkgKyBrWzExXSAtIDE5OTA0MDQxNjIgfCAwO1xuICAgICAgICBiID0gKGIgPDwgMjIgfCBiID4+PiAxMCkgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYiAmIGMgfCB+YiAmIGQpICsga1sxMl0gKyAxODA0NjAzNjgyIHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSAmIGIgfCB+YSAmIGMpICsga1sxM10gLSA0MDM0MTEwMSB8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgfCAwO1xuICAgICAgICBjICs9IChkICYgYSB8IH5kICYgYikgKyBrWzE0XSAtIDE1MDIwMDIyOTAgfCAwO1xuICAgICAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIHwgMDtcbiAgICAgICAgYiArPSAoYyAmIGQgfCB+YyAmIGEpICsga1sxNV0gKyAxMjM2NTM1MzI5IHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyB8IDA7XG4gICAgICAgIC8vIGdnKClcbiAgICAgICAgYSArPSAoYiAmIGQgfCBjICYgfmQpICsga1sxXSAtIDE2NTc5NjUxMCB8IDA7XG4gICAgICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiB8IDA7XG4gICAgICAgIGQgKz0gKGEgJiBjIHwgYiAmIH5jKSArIGtbNl0gLSAxMDY5NTAxNjMyIHwgMDtcbiAgICAgICAgZCA9IChkIDw8IDkgfCBkID4+PiAyMykgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCAmIGIgfCBhICYgfmIpICsga1sxMV0gKyA2NDM3MTc3MTMgfCAwO1xuICAgICAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIHwgMDtcbiAgICAgICAgYiArPSAoYyAmIGEgfCBkICYgfmEpICsga1swXSAtIDM3Mzg5NzMwMiB8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAyMCB8IGIgPj4+IDEyKSArIGMgfCAwO1xuICAgICAgICBhICs9IChiICYgZCB8IGMgJiB+ZCkgKyBrWzVdIC0gNzAxNTU4NjkxIHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDUgfCBhID4+PiAyNykgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSAmIGMgfCBiICYgfmMpICsga1sxMF0gKyAzODAxNjA4MyB8IDA7XG4gICAgICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSB8IDA7XG4gICAgICAgIGMgKz0gKGQgJiBiIHwgYSAmIH5iKSArIGtbMTVdIC0gNjYwNDc4MzM1IHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGMgJiBhIHwgZCAmIH5hKSArIGtbNF0gLSA0MDU1Mzc4NDggfCAwO1xuICAgICAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYiAmIGQgfCBjICYgfmQpICsga1s5XSArIDU2ODQ0NjQzOCB8IDA7XG4gICAgICAgIGEgPSAoYSA8PCA1IHwgYSA+Pj4gMjcpICsgYiB8IDA7XG4gICAgICAgIGQgKz0gKGEgJiBjIHwgYiAmIH5jKSArIGtbMTRdIC0gMTAxOTgwMzY5MCB8IDA7XG4gICAgICAgIGQgPSAoZCA8PCA5IHwgZCA+Pj4gMjMpICsgYSB8IDA7XG4gICAgICAgIGMgKz0gKGQgJiBiIHwgYSAmIH5iKSArIGtbM10gLSAxODczNjM5NjEgfCAwO1xuICAgICAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIHwgMDtcbiAgICAgICAgYiArPSAoYyAmIGEgfCBkICYgfmEpICsga1s4XSArIDExNjM1MzE1MDEgfCAwO1xuICAgICAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYiAmIGQgfCBjICYgfmQpICsga1sxM10gLSAxNDQ0NjgxNDY3IHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDUgfCBhID4+PiAyNykgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSAmIGMgfCBiICYgfmMpICsga1syXSAtIDUxNDAzNzg0IHwgMDtcbiAgICAgICAgZCA9IChkIDw8IDkgfCBkID4+PiAyMykgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCAmIGIgfCBhICYgfmIpICsga1s3XSArIDE3MzUzMjg0NzMgfCAwO1xuICAgICAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIHwgMDtcbiAgICAgICAgYiArPSAoYyAmIGEgfCBkICYgfmEpICsga1sxMl0gLSAxOTI2NjA3NzM0IHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyB8IDA7XG4gICAgICAgIC8vIGhoKClcbiAgICAgICAgYSArPSAoYiBeIGMgXiBkKSArIGtbNV0gLSAzNzg1NTggfCAwO1xuICAgICAgICBhID0gKGEgPDwgNCB8IGEgPj4+IDI4KSArIGIgfCAwO1xuICAgICAgICBkICs9IChhIF4gYiBeIGMpICsga1s4XSAtIDIwMjI1NzQ0NjMgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCBeIGEgXiBiKSArIGtbMTFdICsgMTgzOTAzMDU2MiB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgfCAwO1xuICAgICAgICBiICs9IChjIF4gZCBeIGEpICsga1sxNF0gLSAzNTMwOTU1NiB8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyB8IDA7XG4gICAgICAgIGEgKz0gKGIgXiBjIF4gZCkgKyBrWzFdIC0gMTUzMDk5MjA2MCB8IDA7XG4gICAgICAgIGEgPSAoYSA8PCA0IHwgYSA+Pj4gMjgpICsgYiB8IDA7XG4gICAgICAgIGQgKz0gKGEgXiBiIF4gYykgKyBrWzRdICsgMTI3Mjg5MzM1MyB8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgfCAwO1xuICAgICAgICBjICs9IChkIF4gYSBeIGIpICsga1s3XSAtIDE1NTQ5NzYzMiB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgfCAwO1xuICAgICAgICBiICs9IChjIF4gZCBeIGEpICsga1sxMF0gLSAxMDk0NzMwNjQwIHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYiBeIGMgXiBkKSArIGtbMTNdICsgNjgxMjc5MTc0IHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSBeIGIgXiBjKSArIGtbMF0gLSAzNTg1MzcyMjIgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoZCBeIGEgXiBiKSArIGtbM10gLSA3MjI1MjE5NzkgfCAwO1xuICAgICAgICBjID0gKGMgPDwgMTYgfCBjID4+PiAxNikgKyBkIHwgMDtcbiAgICAgICAgYiArPSAoYyBeIGQgXiBhKSArIGtbNl0gKyA3NjAyOTE4OSB8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyB8IDA7XG4gICAgICAgIGEgKz0gKGIgXiBjIF4gZCkgKyBrWzldIC0gNjQwMzY0NDg3IHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYSBeIGIgXiBjKSArIGtbMTJdIC0gNDIxODE1ODM1IHwgMDtcbiAgICAgICAgZCA9IChkIDw8IDExIHwgZCA+Pj4gMjEpICsgYSB8IDA7XG4gICAgICAgIGMgKz0gKGQgXiBhIF4gYikgKyBrWzE1XSArIDUzMDc0MjUyMCB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgfCAwO1xuICAgICAgICBiICs9IChjIF4gZCBeIGEpICsga1syXSAtIDk5NTMzODY1MSB8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyB8IDA7XG4gICAgICAgIC8vIGlpKClcbiAgICAgICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGtbMF0gLSAxOTg2MzA4NDQgfCAwO1xuICAgICAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgfCAwO1xuICAgICAgICBkICs9IChiIF4gKGEgfCB+YykpICsga1s3XSArIDExMjY4OTE0MTUgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGtbMTRdIC0gMTQxNjM1NDkwNSB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgfCAwO1xuICAgICAgICBiICs9IChkIF4gKGMgfCB+YSkpICsga1s1XSAtIDU3NDM0MDU1IHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyB8IDA7XG4gICAgICAgIGEgKz0gKGMgXiAoYiB8IH5kKSkgKyBrWzEyXSArIDE3MDA0ODU1NzEgfCAwO1xuICAgICAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgfCAwO1xuICAgICAgICBkICs9IChiIF4gKGEgfCB+YykpICsga1szXSAtIDE4OTQ5ODY2MDYgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGtbMTBdIC0gMTA1MTUyMyB8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgfCAwO1xuICAgICAgICBiICs9IChkIF4gKGMgfCB+YSkpICsga1sxXSAtIDIwNTQ5MjI3OTkgfCAwO1xuICAgICAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGtbOF0gKyAxODczMzEzMzU5IHwgMDtcbiAgICAgICAgYSA9IChhIDw8IDYgfCBhID4+PiAyNikgKyBiIHwgMDtcbiAgICAgICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGtbMTVdIC0gMzA2MTE3NDQgfCAwO1xuICAgICAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIHwgMDtcbiAgICAgICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGtbNl0gLSAxNTYwMTk4MzgwIHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGQgXiAoYyB8IH5hKSkgKyBrWzEzXSArIDEzMDkxNTE2NDkgfCAwO1xuICAgICAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIHwgMDtcbiAgICAgICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGtbNF0gLSAxNDU1MjMwNzAgfCAwO1xuICAgICAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgfCAwO1xuICAgICAgICBkICs9IChiIF4gKGEgfCB+YykpICsga1sxMV0gLSAxMTIwMjEwMzc5IHwgMDtcbiAgICAgICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSB8IDA7XG4gICAgICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBrWzJdICsgNzE4Nzg3MjU5IHwgMDtcbiAgICAgICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCB8IDA7XG4gICAgICAgIGIgKz0gKGQgXiAoYyB8IH5hKSkgKyBrWzldIC0gMzQzNDg1NTUxIHwgMDtcbiAgICAgICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyB8IDA7XG4gICAgICAgIHhbMF0gPSBhICsgeFswXSB8IDA7XG4gICAgICAgIHhbMV0gPSBiICsgeFsxXSB8IDA7XG4gICAgICAgIHhbMl0gPSBjICsgeFsyXSB8IDA7XG4gICAgICAgIHhbM10gPSBkICsgeFszXSB8IDA7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLl9kYXRhTGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fYnVmZmVyTGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fc3RhdGUuc2V0KE1kNS5zdGF0ZUlkZW50aXR5KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIENoYXIgdG8gY29kZSBwb2ludCB0byB0byBhcnJheSBjb252ZXJzaW9uOlxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9jaGFyQ29kZUF0XG4gICAgLy8gI0V4YW1wbGUuM0FfRml4aW5nX2NoYXJDb2RlQXRfdG9faGFuZGxlX25vbi1CYXNpYy1NdWx0aWxpbmd1YWwtUGxhbmVfY2hhcmFjdGVyc19pZl90aGVpcl9wcmVzZW5jZV9lYXJsaWVyX2luX3RoZV9zdHJpbmdfaXNfdW5rbm93blxuICAgIGFwcGVuZFN0cihzdHIpIHtcbiAgICAgICAgY29uc3QgYnVmOCA9IHRoaXMuX2J1ZmZlcjg7XG4gICAgICAgIGNvbnN0IGJ1ZjMyID0gdGhpcy5fYnVmZmVyMzI7XG4gICAgICAgIGxldCBidWZMZW4gPSB0aGlzLl9idWZmZXJMZW5ndGg7XG4gICAgICAgIGxldCBjb2RlO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgaWYgKGNvZGUgPCAxMjgpIHtcbiAgICAgICAgICAgICAgICBidWY4W2J1ZkxlbisrXSA9IGNvZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2RlIDwgMHg4MDApIHtcbiAgICAgICAgICAgICAgICBidWY4W2J1ZkxlbisrXSA9IChjb2RlID4+PiA2KSArIDB4QzA7XG4gICAgICAgICAgICAgICAgYnVmOFtidWZMZW4rK10gPSBjb2RlICYgMHgzRiB8IDB4ODA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2RlIDwgMHhEODAwIHx8IGNvZGUgPiAweERCRkYpIHtcbiAgICAgICAgICAgICAgICBidWY4W2J1ZkxlbisrXSA9IChjb2RlID4+PiAxMikgKyAweEUwO1xuICAgICAgICAgICAgICAgIGJ1ZjhbYnVmTGVuKytdID0gKGNvZGUgPj4+IDYgJiAweDNGKSB8IDB4ODA7XG4gICAgICAgICAgICAgICAgYnVmOFtidWZMZW4rK10gPSAoY29kZSAmIDB4M0YpIHwgMHg4MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvZGUgPSAoKGNvZGUgLSAweEQ4MDApICogMHg0MDApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgLSAweERDMDApICsgMHgxMDAwMDtcbiAgICAgICAgICAgICAgICBpZiAoY29kZSA+IDB4MTBGRkZGKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5pY29kZSBzdGFuZGFyZCBzdXBwb3J0cyBjb2RlIHBvaW50cyB1cCB0byBVKzEwRkZGRicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidWY4W2J1ZkxlbisrXSA9IChjb2RlID4+PiAxOCkgKyAweEYwO1xuICAgICAgICAgICAgICAgIGJ1ZjhbYnVmTGVuKytdID0gKGNvZGUgPj4+IDEyICYgMHgzRikgfCAweDgwO1xuICAgICAgICAgICAgICAgIGJ1ZjhbYnVmTGVuKytdID0gKGNvZGUgPj4+IDYgJiAweDNGKSB8IDB4ODA7XG4gICAgICAgICAgICAgICAgYnVmOFtidWZMZW4rK10gPSAoY29kZSAmIDB4M0YpIHwgMHg4MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChidWZMZW4gPj0gNjQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhTGVuZ3RoICs9IDY0O1xuICAgICAgICAgICAgICAgIE1kNS5fbWQ1Y3ljbGUodGhpcy5fc3RhdGUsIGJ1ZjMyKTtcbiAgICAgICAgICAgICAgICBidWZMZW4gLT0gNjQ7XG4gICAgICAgICAgICAgICAgYnVmMzJbMF0gPSBidWYzMlsxNl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYnVmZmVyTGVuZ3RoID0gYnVmTGVuO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgYXBwZW5kQXNjaWlTdHIoc3RyKSB7XG4gICAgICAgIGNvbnN0IGJ1ZjggPSB0aGlzLl9idWZmZXI4O1xuICAgICAgICBjb25zdCBidWYzMiA9IHRoaXMuX2J1ZmZlcjMyO1xuICAgICAgICBsZXQgYnVmTGVuID0gdGhpcy5fYnVmZmVyTGVuZ3RoO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IGogPSAwO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpID0gTWF0aC5taW4oc3RyLmxlbmd0aCAtIGosIDY0IC0gYnVmTGVuKTtcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICBidWY4W2J1ZkxlbisrXSA9IHN0ci5jaGFyQ29kZUF0KGorKyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYnVmTGVuIDwgNjQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2RhdGFMZW5ndGggKz0gNjQ7XG4gICAgICAgICAgICBNZDUuX21kNWN5Y2xlKHRoaXMuX3N0YXRlLCBidWYzMik7XG4gICAgICAgICAgICBidWZMZW4gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2J1ZmZlckxlbmd0aCA9IGJ1ZkxlbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFwcGVuZEJ5dGVBcnJheShpbnB1dCkge1xuICAgICAgICBjb25zdCBidWY4ID0gdGhpcy5fYnVmZmVyODtcbiAgICAgICAgY29uc3QgYnVmMzIgPSB0aGlzLl9idWZmZXIzMjtcbiAgICAgICAgbGV0IGJ1ZkxlbiA9IHRoaXMuX2J1ZmZlckxlbmd0aDtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBqID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaSA9IE1hdGgubWluKGlucHV0Lmxlbmd0aCAtIGosIDY0IC0gYnVmTGVuKTtcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICBidWY4W2J1ZkxlbisrXSA9IGlucHV0W2orK107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYnVmTGVuIDwgNjQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2RhdGFMZW5ndGggKz0gNjQ7XG4gICAgICAgICAgICBNZDUuX21kNWN5Y2xlKHRoaXMuX3N0YXRlLCBidWYzMik7XG4gICAgICAgICAgICBidWZMZW4gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2J1ZmZlckxlbmd0aCA9IGJ1ZkxlbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFN0YXRlKCkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgY29uc3QgcyA9IHNlbGYuX3N0YXRlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYnVmZmVyOiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIHNlbGYuX2J1ZmZlcjgpLFxuICAgICAgICAgICAgYnVmbGVuOiBzZWxmLl9idWZmZXJMZW5ndGgsXG4gICAgICAgICAgICBsZW5ndGg6IHNlbGYuX2RhdGFMZW5ndGgsXG4gICAgICAgICAgICBzdGF0ZTogW3NbMF0sIHNbMV0sIHNbMl0sIHNbM11dXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGJ1ZiA9IHN0YXRlLmJ1ZmZlcjtcbiAgICAgICAgY29uc3QgeCA9IHN0YXRlLnN0YXRlO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5fc3RhdGU7XG4gICAgICAgIGxldCBpO1xuICAgICAgICB0aGlzLl9kYXRhTGVuZ3RoID0gc3RhdGUubGVuZ3RoO1xuICAgICAgICB0aGlzLl9idWZmZXJMZW5ndGggPSBzdGF0ZS5idWZsZW47XG4gICAgICAgIHNbMF0gPSB4WzBdO1xuICAgICAgICBzWzFdID0geFsxXTtcbiAgICAgICAgc1syXSA9IHhbMl07XG4gICAgICAgIHNbM10gPSB4WzNdO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYnVmLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9idWZmZXI4W2ldID0gYnVmLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW5kKHJhdyA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGJ1ZkxlbiA9IHRoaXMuX2J1ZmZlckxlbmd0aDtcbiAgICAgICAgY29uc3QgYnVmOCA9IHRoaXMuX2J1ZmZlcjg7XG4gICAgICAgIGNvbnN0IGJ1ZjMyID0gdGhpcy5fYnVmZmVyMzI7XG4gICAgICAgIGNvbnN0IGkgPSAoYnVmTGVuID4+IDIpICsgMTtcbiAgICAgICAgbGV0IGRhdGFCaXRzTGVuO1xuICAgICAgICB0aGlzLl9kYXRhTGVuZ3RoICs9IGJ1ZkxlbjtcbiAgICAgICAgYnVmOFtidWZMZW5dID0gMHg4MDtcbiAgICAgICAgYnVmOFtidWZMZW4gKyAxXSA9IGJ1ZjhbYnVmTGVuICsgMl0gPSBidWY4W2J1ZkxlbiArIDNdID0gMDtcbiAgICAgICAgYnVmMzIuc2V0KE1kNS5idWZmZXIzMklkZW50aXR5LnN1YmFycmF5KGkpLCBpKTtcbiAgICAgICAgaWYgKGJ1ZkxlbiA+IDU1KSB7XG4gICAgICAgICAgICBNZDUuX21kNWN5Y2xlKHRoaXMuX3N0YXRlLCBidWYzMik7XG4gICAgICAgICAgICBidWYzMi5zZXQoTWQ1LmJ1ZmZlcjMySWRlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvIHRoZSBmaW5hbCBjb21wdXRhdGlvbiBiYXNlZCBvbiB0aGUgdGFpbCBhbmQgbGVuZ3RoXG4gICAgICAgIC8vIEJld2FyZSB0aGF0IHRoZSBmaW5hbCBsZW5ndGggbWF5IG5vdCBmaXQgaW4gMzIgYml0cyBzbyB3ZSB0YWtlIGNhcmUgb2YgdGhhdFxuICAgICAgICBkYXRhQml0c0xlbiA9IHRoaXMuX2RhdGFMZW5ndGggKiA4O1xuICAgICAgICBpZiAoZGF0YUJpdHNMZW4gPD0gMHhGRkZGRkZGRikge1xuICAgICAgICAgICAgYnVmMzJbMTRdID0gZGF0YUJpdHNMZW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gZGF0YUJpdHNMZW4udG9TdHJpbmcoMTYpLm1hdGNoKC8oLio/KSguezAsOH0pJC8pO1xuICAgICAgICAgICAgaWYgKG1hdGNoZXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsbyA9IHBhcnNlSW50KG1hdGNoZXNbMl0sIDE2KTtcbiAgICAgICAgICAgIGNvbnN0IGhpID0gcGFyc2VJbnQobWF0Y2hlc1sxXSwgMTYpIHx8IDA7XG4gICAgICAgICAgICBidWYzMlsxNF0gPSBsbztcbiAgICAgICAgICAgIGJ1ZjMyWzE1XSA9IGhpO1xuICAgICAgICB9XG4gICAgICAgIE1kNS5fbWQ1Y3ljbGUodGhpcy5fc3RhdGUsIGJ1ZjMyKTtcbiAgICAgICAgcmV0dXJuIHJhdyA/IHRoaXMuX3N0YXRlIDogTWQ1Ll9oZXgodGhpcy5fc3RhdGUpO1xuICAgIH1cbn1cbi8vIFByaXZhdGUgU3RhdGljIFZhcmlhYmxlc1xuTWQ1LnN0YXRlSWRlbnRpdHkgPSBuZXcgSW50MzJBcnJheShbMTczMjU4NDE5MywgLTI3MTczMzg3OSwgLTE3MzI1ODQxOTQsIDI3MTczMzg3OF0pO1xuTWQ1LmJ1ZmZlcjMySWRlbnRpdHkgPSBuZXcgSW50MzJBcnJheShbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0pO1xuTWQ1LmhleENoYXJzID0gJzAxMjM0NTY3ODlhYmNkZWYnO1xuTWQ1LmhleE91dCA9IFtdO1xuLy8gUGVybWFuZW50IGluc3RhbmNlIGlzIHRvIHVzZSBmb3Igb25lLWNhbGwgaGFzaGluZ1xuTWQ1Lm9uZVBhc3NIYXNoZXIgPSBuZXcgTWQ1KCk7XG5pZiAoTWQ1Lmhhc2hTdHIoJ2hlbGxvJykgIT09ICc1ZDQxNDAyYWJjNGIyYTc2Yjk3MTlkOTExMDE3YzU5MicpIHtcbiAgICBjb25zb2xlLmVycm9yKCdNZDUgc2VsZiB0ZXN0IGZhaWxlZC4nKTtcbn1cbiIsIi8qKlxuICogU0lQIFJlc3BvbnNlIFJlYXNvbnNcbiAqIERPQzogaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9zaXAtcGFyYW1ldGVyc1xuICogQGludGVybmFsXG4gKi9cbmNvbnN0IFJFQVNPTl9QSFJBU0UgPSB7XG4gICAgMTAwOiBcIlRyeWluZ1wiLFxuICAgIDE4MDogXCJSaW5naW5nXCIsXG4gICAgMTgxOiBcIkNhbGwgSXMgQmVpbmcgRm9yd2FyZGVkXCIsXG4gICAgMTgyOiBcIlF1ZXVlZFwiLFxuICAgIDE4MzogXCJTZXNzaW9uIFByb2dyZXNzXCIsXG4gICAgMTk5OiBcIkVhcmx5IERpYWxvZyBUZXJtaW5hdGVkXCIsXG4gICAgMjAwOiBcIk9LXCIsXG4gICAgMjAyOiBcIkFjY2VwdGVkXCIsXG4gICAgMjA0OiBcIk5vIE5vdGlmaWNhdGlvblwiLFxuICAgIDMwMDogXCJNdWx0aXBsZSBDaG9pY2VzXCIsXG4gICAgMzAxOiBcIk1vdmVkIFBlcm1hbmVudGx5XCIsXG4gICAgMzAyOiBcIk1vdmVkIFRlbXBvcmFyaWx5XCIsXG4gICAgMzA1OiBcIlVzZSBQcm94eVwiLFxuICAgIDM4MDogXCJBbHRlcm5hdGl2ZSBTZXJ2aWNlXCIsXG4gICAgNDAwOiBcIkJhZCBSZXF1ZXN0XCIsXG4gICAgNDAxOiBcIlVuYXV0aG9yaXplZFwiLFxuICAgIDQwMjogXCJQYXltZW50IFJlcXVpcmVkXCIsXG4gICAgNDAzOiBcIkZvcmJpZGRlblwiLFxuICAgIDQwNDogXCJOb3QgRm91bmRcIixcbiAgICA0MDU6IFwiTWV0aG9kIE5vdCBBbGxvd2VkXCIsXG4gICAgNDA2OiBcIk5vdCBBY2NlcHRhYmxlXCIsXG4gICAgNDA3OiBcIlByb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkXCIsXG4gICAgNDA4OiBcIlJlcXVlc3QgVGltZW91dFwiLFxuICAgIDQxMDogXCJHb25lXCIsXG4gICAgNDEyOiBcIkNvbmRpdGlvbmFsIFJlcXVlc3QgRmFpbGVkXCIsXG4gICAgNDEzOiBcIlJlcXVlc3QgRW50aXR5IFRvbyBMYXJnZVwiLFxuICAgIDQxNDogXCJSZXF1ZXN0LVVSSSBUb28gTG9uZ1wiLFxuICAgIDQxNTogXCJVbnN1cHBvcnRlZCBNZWRpYSBUeXBlXCIsXG4gICAgNDE2OiBcIlVuc3VwcG9ydGVkIFVSSSBTY2hlbWVcIixcbiAgICA0MTc6IFwiVW5rbm93biBSZXNvdXJjZS1Qcmlvcml0eVwiLFxuICAgIDQyMDogXCJCYWQgRXh0ZW5zaW9uXCIsXG4gICAgNDIxOiBcIkV4dGVuc2lvbiBSZXF1aXJlZFwiLFxuICAgIDQyMjogXCJTZXNzaW9uIEludGVydmFsIFRvbyBTbWFsbFwiLFxuICAgIDQyMzogXCJJbnRlcnZhbCBUb28gQnJpZWZcIixcbiAgICA0Mjg6IFwiVXNlIElkZW50aXR5IEhlYWRlclwiLFxuICAgIDQyOTogXCJQcm92aWRlIFJlZmVycmVyIElkZW50aXR5XCIsXG4gICAgNDMwOiBcIkZsb3cgRmFpbGVkXCIsXG4gICAgNDMzOiBcIkFub255bWl0eSBEaXNhbGxvd2VkXCIsXG4gICAgNDM2OiBcIkJhZCBJZGVudGl0eS1JbmZvXCIsXG4gICAgNDM3OiBcIlVuc3VwcG9ydGVkIENlcnRpZmljYXRlXCIsXG4gICAgNDM4OiBcIkludmFsaWQgSWRlbnRpdHkgSGVhZGVyXCIsXG4gICAgNDM5OiBcIkZpcnN0IEhvcCBMYWNrcyBPdXRib3VuZCBTdXBwb3J0XCIsXG4gICAgNDQwOiBcIk1heC1CcmVhZHRoIEV4Y2VlZGVkXCIsXG4gICAgNDY5OiBcIkJhZCBJbmZvIFBhY2thZ2VcIixcbiAgICA0NzA6IFwiQ29uc2VudCBOZWVkZWRcIixcbiAgICA0Nzg6IFwiVW5yZXNvbHZhYmxlIERlc3RpbmF0aW9uXCIsXG4gICAgNDgwOiBcIlRlbXBvcmFyaWx5IFVuYXZhaWxhYmxlXCIsXG4gICAgNDgxOiBcIkNhbGwvVHJhbnNhY3Rpb24gRG9lcyBOb3QgRXhpc3RcIixcbiAgICA0ODI6IFwiTG9vcCBEZXRlY3RlZFwiLFxuICAgIDQ4MzogXCJUb28gTWFueSBIb3BzXCIsXG4gICAgNDg0OiBcIkFkZHJlc3MgSW5jb21wbGV0ZVwiLFxuICAgIDQ4NTogXCJBbWJpZ3VvdXNcIixcbiAgICA0ODY6IFwiQnVzeSBIZXJlXCIsXG4gICAgNDg3OiBcIlJlcXVlc3QgVGVybWluYXRlZFwiLFxuICAgIDQ4ODogXCJOb3QgQWNjZXB0YWJsZSBIZXJlXCIsXG4gICAgNDg5OiBcIkJhZCBFdmVudFwiLFxuICAgIDQ5MTogXCJSZXF1ZXN0IFBlbmRpbmdcIixcbiAgICA0OTM6IFwiVW5kZWNpcGhlcmFibGVcIixcbiAgICA0OTQ6IFwiU2VjdXJpdHkgQWdyZWVtZW50IFJlcXVpcmVkXCIsXG4gICAgNTAwOiBcIkludGVybmFsIFNlcnZlciBFcnJvclwiLFxuICAgIDUwMTogXCJOb3QgSW1wbGVtZW50ZWRcIixcbiAgICA1MDI6IFwiQmFkIEdhdGV3YXlcIixcbiAgICA1MDM6IFwiU2VydmljZSBVbmF2YWlsYWJsZVwiLFxuICAgIDUwNDogXCJTZXJ2ZXIgVGltZS1vdXRcIixcbiAgICA1MDU6IFwiVmVyc2lvbiBOb3QgU3VwcG9ydGVkXCIsXG4gICAgNTEzOiBcIk1lc3NhZ2UgVG9vIExhcmdlXCIsXG4gICAgNTgwOiBcIlByZWNvbmRpdGlvbiBGYWlsdXJlXCIsXG4gICAgNjAwOiBcIkJ1c3kgRXZlcnl3aGVyZVwiLFxuICAgIDYwMzogXCJEZWNsaW5lXCIsXG4gICAgNjA0OiBcIkRvZXMgTm90IEV4aXN0IEFueXdoZXJlXCIsXG4gICAgNjA2OiBcIk5vdCBBY2NlcHRhYmxlXCJcbn07XG4vKipcbiAqIEBwYXJhbSBzaXplIC1cbiAqIEBwYXJhbSBiYXNlIC1cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmFuZG9tVG9rZW4oc2l6ZSwgYmFzZSA9IDMyKSB7XG4gICAgbGV0IHRva2VuID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICBjb25zdCByID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYmFzZSk7XG4gICAgICAgIHRva2VuICs9IHIudG9TdHJpbmcoYmFzZSk7XG4gICAgfVxuICAgIHJldHVybiB0b2tlbjtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFzb25QaHJhc2UoY29kZSkge1xuICAgIHJldHVybiBSRUFTT05fUEhSQVNFW2NvZGVdIHx8IFwiXCI7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gbmV3VGFnKCkge1xuICAgIHJldHVybiBjcmVhdGVSYW5kb21Ub2tlbigxMCk7XG59XG4vKipcbiAqIEBwYXJhbSBzdHIgLVxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoZWFkZXJpemUoc3RyKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBleGNlcHRpb25zID0ge1xuICAgICAgICBcIkNhbGwtSWRcIjogXCJDYWxsLUlEXCIsXG4gICAgICAgIENzZXE6IFwiQ1NlcVwiLFxuICAgICAgICBcIk1pbi1TZVwiOiBcIk1pbi1TRVwiLFxuICAgICAgICBSYWNrOiBcIlJBY2tcIixcbiAgICAgICAgUnNlcTogXCJSU2VxXCIsXG4gICAgICAgIFwiV3d3LUF1dGhlbnRpY2F0ZVwiOiBcIldXVy1BdXRoZW50aWNhdGVcIlxuICAgIH07XG4gICAgY29uc3QgbmFtZSA9IHN0ci50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZywgXCItXCIpLnNwbGl0KFwiLVwiKTtcbiAgICBjb25zdCBwYXJ0cyA9IG5hbWUubGVuZ3RoO1xuICAgIGxldCBobmFtZSA9IFwiXCI7XG4gICAgZm9yIChsZXQgcGFydCA9IDA7IHBhcnQgPCBwYXJ0czsgcGFydCsrKSB7XG4gICAgICAgIGlmIChwYXJ0ICE9PSAwKSB7XG4gICAgICAgICAgICBobmFtZSArPSBcIi1cIjtcbiAgICAgICAgfVxuICAgICAgICBobmFtZSArPSBuYW1lW3BhcnRdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZVtwYXJ0XS5zdWJzdHJpbmcoMSk7XG4gICAgfVxuICAgIGlmIChleGNlcHRpb25zW2huYW1lXSkge1xuICAgICAgICBobmFtZSA9IGV4Y2VwdGlvbnNbaG5hbWVdO1xuICAgIH1cbiAgICByZXR1cm4gaG5hbWU7XG59XG4vKipcbiAqIEBwYXJhbSBzdHIgLVxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1dGY4TGVuZ3RoKHN0cikge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKC8lW0EtRlxcZF17Mn0vZywgXCJVXCIpLmxlbmd0aDtcbn1cbiIsImltcG9ydCB7IE1kNSB9IGZyb20gXCIuL21kNVwiO1xuaW1wb3J0IHsgY3JlYXRlUmFuZG9tVG9rZW4gfSBmcm9tIFwiLi91dGlsc1wiO1xuZnVuY3Rpb24gTUQ1KHMpIHtcbiAgICByZXR1cm4gTWQ1Lmhhc2hTdHIocyk7XG59XG4vKipcbiAqIERpZ2VzdCBBdXRoZW50aWNhdGlvbi5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgRGlnZXN0QXV0aGVudGljYXRpb24ge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yLlxuICAgICAqIEBwYXJhbSBsb2dnZXJGYWN0b3J5IC0gTG9nZ2VyRmFjdG9yeS5cbiAgICAgKiBAcGFyYW0gdXNlcm5hbWUgLSBVc2VybmFtZS5cbiAgICAgKiBAcGFyYW0gcGFzc3dvcmQgLSBQYXNzd29yZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2dnZXJGYWN0b3J5LCBoYTEsIHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFwic2lwanMuZGlnZXN0YXV0aGVudGljYXRpb25cIik7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgICAgICB0aGlzLmhhMSA9IGhhMTtcbiAgICAgICAgdGhpcy5uYyA9IDA7XG4gICAgICAgIHRoaXMubmNIZXggPSBcIjAwMDAwMDAwXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIERpZ2VzdCBhdXRoZW50aWNhdGlvbiBnaXZlbiBhIFNJUCByZXF1ZXN0IGFuZCB0aGUgY2hhbGxlbmdlXG4gICAgICogcmVjZWl2ZWQgaW4gYSByZXNwb25zZSB0byB0aGF0IHJlcXVlc3QuXG4gICAgICogQHBhcmFtIHJlcXVlc3QgLVxuICAgICAqIEBwYXJhbSBjaGFsbGVuZ2UgLVxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgY3JlZGVudGlhbHMgd2VyZSBzdWNjZXNzZnVsbHkgZ2VuZXJhdGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBhdXRoZW50aWNhdGUocmVxdWVzdCwgY2hhbGxlbmdlLCBib2R5KSB7XG4gICAgICAgIC8vIEluc3BlY3QgYW5kIHZhbGlkYXRlIHRoZSBjaGFsbGVuZ2UuXG4gICAgICAgIHRoaXMuYWxnb3JpdGhtID0gY2hhbGxlbmdlLmFsZ29yaXRobTtcbiAgICAgICAgdGhpcy5yZWFsbSA9IGNoYWxsZW5nZS5yZWFsbTtcbiAgICAgICAgdGhpcy5ub25jZSA9IGNoYWxsZW5nZS5ub25jZTtcbiAgICAgICAgdGhpcy5vcGFxdWUgPSBjaGFsbGVuZ2Uub3BhcXVlO1xuICAgICAgICB0aGlzLnN0YWxlID0gY2hhbGxlbmdlLnN0YWxlO1xuICAgICAgICBpZiAodGhpcy5hbGdvcml0aG0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsZ29yaXRobSAhPT0gXCJNRDVcIikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJjaGFsbGVuZ2Ugd2l0aCBEaWdlc3QgYWxnb3JpdGhtIGRpZmZlcmVudCB0aGFuICdNRDUnLCBhdXRoZW50aWNhdGlvbiBhYm9ydGVkXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWxnb3JpdGhtID0gXCJNRDVcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMucmVhbG0pIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJjaGFsbGVuZ2Ugd2l0aG91dCBEaWdlc3QgcmVhbG0sIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWRcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm5vbmNlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiY2hhbGxlbmdlIHdpdGhvdXQgRGlnZXN0IG5vbmNlLCBhdXRoZW50aWNhdGlvbiBhYm9ydGVkXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vICdxb3AnIGNhbiBjb250YWluIGEgbGlzdCBvZiB2YWx1ZXMgKEFycmF5KS4gTGV0J3MgY2hvb3NlIGp1c3Qgb25lLlxuICAgICAgICBpZiAoY2hhbGxlbmdlLnFvcCkge1xuICAgICAgICAgICAgaWYgKGNoYWxsZW5nZS5xb3AuaW5kZXhPZihcImF1dGhcIikgPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucW9wID0gXCJhdXRoXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFsbGVuZ2UucW9wLmluZGV4T2YoXCJhdXRoLWludFwiKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xb3AgPSBcImF1dGgtaW50XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgJ3FvcCcgaXMgcHJlc2VudCBidXQgZG9lcyBub3QgY29udGFpbiAnYXV0aCcgb3IgJ2F1dGgtaW50Jywgc28gYWJvcnQgaGVyZS5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiY2hhbGxlbmdlIHdpdGhvdXQgRGlnZXN0IHFvcCBkaWZmZXJlbnQgdGhhbiAnYXV0aCcgb3IgJ2F1dGgtaW50JywgYXV0aGVudGljYXRpb24gYWJvcnRlZFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnFvcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBGaWxsIG90aGVyIGF0dHJpYnV0ZXMuXG4gICAgICAgIHRoaXMubWV0aG9kID0gcmVxdWVzdC5tZXRob2Q7XG4gICAgICAgIHRoaXMudXJpID0gcmVxdWVzdC5ydXJpO1xuICAgICAgICB0aGlzLmNub25jZSA9IGNyZWF0ZVJhbmRvbVRva2VuKDEyKTtcbiAgICAgICAgdGhpcy5uYyArPSAxO1xuICAgICAgICB0aGlzLnVwZGF0ZU5jSGV4KCk7XG4gICAgICAgIC8vIG5jLXZhbHVlID0gOExIRVguIE1heCB2YWx1ZSA9ICdGRkZGRkZGRicuXG4gICAgICAgIGlmICh0aGlzLm5jID09PSA0Mjk0OTY3Mjk2KSB7XG4gICAgICAgICAgICB0aGlzLm5jID0gMTtcbiAgICAgICAgICAgIHRoaXMubmNIZXggPSBcIjAwMDAwMDAxXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBEaWdlc3QgXCJyZXNwb25zZVwiIHZhbHVlLlxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVJlc3BvbnNlKGJvZHkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBQcm94eS1BdXRob3JpemF0aW9uIG9yIFdXVy1BdXRob3JpemF0aW9uIGhlYWRlciB2YWx1ZS5cbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgYXV0aFBhcmFtcyA9IFtdO1xuICAgICAgICBpZiAoIXRoaXMucmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInJlc3BvbnNlIGZpZWxkIGRvZXMgbm90IGV4aXN0LCBjYW5ub3QgZ2VuZXJhdGUgQXV0aG9yaXphdGlvbiBoZWFkZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgYXV0aFBhcmFtcy5wdXNoKFwiYWxnb3JpdGhtPVwiICsgdGhpcy5hbGdvcml0aG0pO1xuICAgICAgICBhdXRoUGFyYW1zLnB1c2goJ3VzZXJuYW1lPVwiJyArIHRoaXMudXNlcm5hbWUgKyAnXCInKTtcbiAgICAgICAgYXV0aFBhcmFtcy5wdXNoKCdyZWFsbT1cIicgKyB0aGlzLnJlYWxtICsgJ1wiJyk7XG4gICAgICAgIGF1dGhQYXJhbXMucHVzaCgnbm9uY2U9XCInICsgdGhpcy5ub25jZSArICdcIicpO1xuICAgICAgICBhdXRoUGFyYW1zLnB1c2goJ3VyaT1cIicgKyB0aGlzLnVyaSArICdcIicpO1xuICAgICAgICBhdXRoUGFyYW1zLnB1c2goJ3Jlc3BvbnNlPVwiJyArIHRoaXMucmVzcG9uc2UgKyAnXCInKTtcbiAgICAgICAgaWYgKHRoaXMub3BhcXVlKSB7XG4gICAgICAgICAgICBhdXRoUGFyYW1zLnB1c2goJ29wYXF1ZT1cIicgKyB0aGlzLm9wYXF1ZSArICdcIicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnFvcCkge1xuICAgICAgICAgICAgYXV0aFBhcmFtcy5wdXNoKFwicW9wPVwiICsgdGhpcy5xb3ApO1xuICAgICAgICAgICAgYXV0aFBhcmFtcy5wdXNoKCdjbm9uY2U9XCInICsgdGhpcy5jbm9uY2UgKyAnXCInKTtcbiAgICAgICAgICAgIGF1dGhQYXJhbXMucHVzaChcIm5jPVwiICsgdGhpcy5uY0hleCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiRGlnZXN0IFwiICsgYXV0aFBhcmFtcy5qb2luKFwiLCBcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIHRoZSAnbmMnIHZhbHVlIGFzIHJlcXVpcmVkIGJ5IERpZ2VzdCBpbiB0aGlzLm5jSGV4IGJ5IHJlYWRpbmcgdGhpcy5uYy5cbiAgICAgKi9cbiAgICB1cGRhdGVOY0hleCgpIHtcbiAgICAgICAgY29uc3QgaGV4ID0gTnVtYmVyKHRoaXMubmMpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgdGhpcy5uY0hleCA9IFwiMDAwMDAwMDBcIi5zdWJzdHIoMCwgOCAtIGhleC5sZW5ndGgpICsgaGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBEaWdlc3QgJ3Jlc3BvbnNlJyB2YWx1ZS5cbiAgICAgKi9cbiAgICBjYWxjdWxhdGVSZXNwb25zZShib2R5KSB7XG4gICAgICAgIGxldCBoYTEsIGhhMjtcbiAgICAgICAgLy8gSEExID0gTUQ1KEExKSA9IE1ENSh1c2VybmFtZTpyZWFsbTpwYXNzd29yZClcbiAgICAgICAgaGExID0gdGhpcy5oYTE7XG4gICAgICAgIGlmIChoYTEgPT09IFwiXCIgfHwgaGExID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhhMSA9IE1ENSh0aGlzLnVzZXJuYW1lICsgXCI6XCIgKyB0aGlzLnJlYWxtICsgXCI6XCIgKyB0aGlzLnBhc3N3b3JkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5xb3AgPT09IFwiYXV0aFwiKSB7XG4gICAgICAgICAgICAvLyBIQTIgPSBNRDUoQTIpID0gTUQ1KG1ldGhvZDpkaWdlc3RVUkkpXG4gICAgICAgICAgICBoYTIgPSBNRDUodGhpcy5tZXRob2QgKyBcIjpcIiArIHRoaXMudXJpKTtcbiAgICAgICAgICAgIC8vIHJlc3BvbnNlID0gTUQ1KEhBMTpub25jZTpub25jZUNvdW50OmNyZWRlbnRpYWxzTm9uY2U6cW9wOkhBMilgXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlID0gTUQ1KGhhMSArIFwiOlwiICsgdGhpcy5ub25jZSArIFwiOlwiICsgdGhpcy5uY0hleCArIFwiOlwiICsgdGhpcy5jbm9uY2UgKyBcIjphdXRoOlwiICsgaGEyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnFvcCA9PT0gXCJhdXRoLWludFwiKSB7XG4gICAgICAgICAgICAvLyBIQTIgPSBNRDUoQTIpID0gTUQ1KG1ldGhvZDpkaWdlc3RVUkk6TUQ1KGVudGl0eUJvZHkpKVxuICAgICAgICAgICAgaGEyID0gTUQ1KHRoaXMubWV0aG9kICsgXCI6XCIgKyB0aGlzLnVyaSArIFwiOlwiICsgTUQ1KGJvZHkgPyBib2R5IDogXCJcIikpO1xuICAgICAgICAgICAgLy8gcmVzcG9uc2UgPSBNRDUoSEExOm5vbmNlOm5vbmNlQ291bnQ6Y3JlZGVudGlhbHNOb25jZTpxb3A6SEEyKVxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZSA9IE1ENShoYTEgKyBcIjpcIiArIHRoaXMubm9uY2UgKyBcIjpcIiArIHRoaXMubmNIZXggKyBcIjpcIiArIHRoaXMuY25vbmNlICsgXCI6YXV0aC1pbnQ6XCIgKyBoYTIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucW9wID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIEhBMiA9IE1ENShBMikgPSBNRDUobWV0aG9kOmRpZ2VzdFVSSSlcbiAgICAgICAgICAgIGhhMiA9IE1ENSh0aGlzLm1ldGhvZCArIFwiOlwiICsgdGhpcy51cmkpO1xuICAgICAgICAgICAgLy8gcmVzcG9uc2UgPSBNRDUoSEExOm5vbmNlOkhBMilcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2UgPSBNRDUoaGExICsgXCI6XCIgKyB0aGlzLm5vbmNlICsgXCI6XCIgKyBoYTIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZSAqL1xuLyoqXG4gKiBTSVAgTWV0aG9kc1xuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgQztcbihmdW5jdGlvbiAoQykge1xuICAgIEMuQUNLID0gXCJBQ0tcIjtcbiAgICBDLkJZRSA9IFwiQllFXCI7XG4gICAgQy5DQU5DRUwgPSBcIkNBTkNFTFwiO1xuICAgIEMuSU5GTyA9IFwiSU5GT1wiO1xuICAgIEMuSU5WSVRFID0gXCJJTlZJVEVcIjtcbiAgICBDLk1FU1NBR0UgPSBcIk1FU1NBR0VcIjtcbiAgICBDLk5PVElGWSA9IFwiTk9USUZZXCI7XG4gICAgQy5PUFRJT05TID0gXCJPUFRJT05TXCI7XG4gICAgQy5SRUdJU1RFUiA9IFwiUkVHSVNURVJcIjtcbiAgICBDLlVQREFURSA9IFwiVVBEQVRFXCI7XG4gICAgQy5TVUJTQ1JJQkUgPSBcIlNVQlNDUklCRVwiO1xuICAgIEMuUFVCTElTSCA9IFwiUFVCTElTSFwiO1xuICAgIEMuUkVGRVIgPSBcIlJFRkVSXCI7XG4gICAgQy5QUkFDSyA9IFwiUFJBQ0tcIjtcbn0pKEMgfHwgKEMgPSB7fSkpO1xuIiwiaW1wb3J0IHsgTmFtZUFkZHJIZWFkZXIgfSBmcm9tIFwiLi4vLi4vZ3JhbW1hclwiO1xuaW1wb3J0IHsgY3JlYXRlUmFuZG9tVG9rZW4sIGhlYWRlcml6ZSwgbmV3VGFnLCB1dGY4TGVuZ3RoIH0gZnJvbSBcIi4vdXRpbHNcIjtcbi8qKlxuICogT3V0Z29pbmcgU0lQIHJlcXVlc3QgbWVzc2FnZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE91dGdvaW5nUmVxdWVzdE1lc3NhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKG1ldGhvZCwgcnVyaSwgZnJvbVVSSSwgdG9VUkksIG9wdGlvbnMsIGV4dHJhSGVhZGVycywgYm9keSkge1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSB7fTtcbiAgICAgICAgdGhpcy5leHRyYUhlYWRlcnMgPSBbXTtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBkZWZhdWx0IG9wdGlvbnNcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5nZXREZWZhdWx0T3B0aW9ucygpO1xuICAgICAgICAvLyBPcHRpb25zIC0gbWVyZ2UgYSBkZWVwIGNvcHlcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm9wdGlvblRhZ3MgJiYgdGhpcy5vcHRpb25zLm9wdGlvblRhZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9wdGlvblRhZ3MgPSB0aGlzLm9wdGlvbnMub3B0aW9uVGFncy5zbGljZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yb3V0ZVNldCAmJiB0aGlzLm9wdGlvbnMucm91dGVTZXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJvdXRlU2V0ID0gdGhpcy5vcHRpb25zLnJvdXRlU2V0LnNsaWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRXh0cmEgaGVhZGVycyAtIGRlZXAgY29weVxuICAgICAgICBpZiAoZXh0cmFIZWFkZXJzICYmIGV4dHJhSGVhZGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzLnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQm9keSAtIGRlZXAgY29weVxuICAgICAgICBpZiAoYm9keSkge1xuICAgICAgICAgICAgLy8gVE9ETzogaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gc2hvdWxkIGJlIEJvZHlcbiAgICAgICAgICAgIC8vIHRoaXMuYm9keSA9IHsgLi4uYm9keSB9O1xuICAgICAgICAgICAgdGhpcy5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHkuY29udGVudCxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogYm9keS5jb250ZW50VHlwZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBNZXRob2RcbiAgICAgICAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XG4gICAgICAgIC8vIFJVUklcbiAgICAgICAgdGhpcy5ydXJpID0gcnVyaS5jbG9uZSgpO1xuICAgICAgICAvLyBGcm9tXG4gICAgICAgIHRoaXMuZnJvbVVSSSA9IGZyb21VUkkuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5mcm9tVGFnID0gdGhpcy5vcHRpb25zLmZyb21UYWcgPyB0aGlzLm9wdGlvbnMuZnJvbVRhZyA6IG5ld1RhZygpO1xuICAgICAgICB0aGlzLmZyb20gPSBPdXRnb2luZ1JlcXVlc3RNZXNzYWdlLm1ha2VOYW1lQWRkckhlYWRlcih0aGlzLmZyb21VUkksIHRoaXMub3B0aW9ucy5mcm9tRGlzcGxheU5hbWUsIHRoaXMuZnJvbVRhZyk7XG4gICAgICAgIC8vIFRvXG4gICAgICAgIHRoaXMudG9VUkkgPSB0b1VSSS5jbG9uZSgpO1xuICAgICAgICB0aGlzLnRvVGFnID0gdGhpcy5vcHRpb25zLnRvVGFnO1xuICAgICAgICB0aGlzLnRvID0gT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5tYWtlTmFtZUFkZHJIZWFkZXIodGhpcy50b1VSSSwgdGhpcy5vcHRpb25zLnRvRGlzcGxheU5hbWUsIHRoaXMudG9UYWcpO1xuICAgICAgICAvLyBDYWxsLUlEXG4gICAgICAgIHRoaXMuY2FsbElkID0gdGhpcy5vcHRpb25zLmNhbGxJZCA/IHRoaXMub3B0aW9ucy5jYWxsSWQgOiB0aGlzLm9wdGlvbnMuY2FsbElkUHJlZml4ICsgY3JlYXRlUmFuZG9tVG9rZW4oMTUpO1xuICAgICAgICAvLyBDU2VxXG4gICAgICAgIHRoaXMuY3NlcSA9IHRoaXMub3B0aW9ucy5jc2VxO1xuICAgICAgICAvLyBUaGUgcmVsYXRpdmUgb3JkZXIgb2YgaGVhZGVyIGZpZWxkcyB3aXRoIGRpZmZlcmVudCBmaWVsZCBuYW1lcyBpcyBub3RcbiAgICAgICAgLy8gc2lnbmlmaWNhbnQuICBIb3dldmVyLCBpdCBpcyBSRUNPTU1FTkRFRCB0aGF0IGhlYWRlciBmaWVsZHMgd2hpY2ggYXJlXG4gICAgICAgIC8vIG5lZWRlZCBmb3IgcHJveHkgcHJvY2Vzc2luZyAoVmlhLCBSb3V0ZSwgUmVjb3JkLVJvdXRlLCBQcm94eS1SZXF1aXJlLFxuICAgICAgICAvLyBNYXgtRm9yd2FyZHMsIGFuZCBQcm94eS1BdXRob3JpemF0aW9uLCBmb3IgZXhhbXBsZSkgYXBwZWFyIHRvd2FyZHNcbiAgICAgICAgLy8gdGhlIHRvcCBvZiB0aGUgbWVzc2FnZSB0byBmYWNpbGl0YXRlIHJhcGlkIHBhcnNpbmcuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tNy4zLjFcbiAgICAgICAgdGhpcy5zZXRIZWFkZXIoXCJyb3V0ZVwiLCB0aGlzLm9wdGlvbnMucm91dGVTZXQpO1xuICAgICAgICB0aGlzLnNldEhlYWRlcihcInZpYVwiLCBcIlwiKTtcbiAgICAgICAgdGhpcy5zZXRIZWFkZXIoXCJ0b1wiLCB0aGlzLnRvLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLnNldEhlYWRlcihcImZyb21cIiwgdGhpcy5mcm9tLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLnNldEhlYWRlcihcImNzZXFcIiwgdGhpcy5jc2VxICsgXCIgXCIgKyB0aGlzLm1ldGhvZCk7XG4gICAgICAgIHRoaXMuc2V0SGVhZGVyKFwiY2FsbC1pZFwiLCB0aGlzLmNhbGxJZCk7XG4gICAgICAgIHRoaXMuc2V0SGVhZGVyKFwibWF4LWZvcndhcmRzXCIsIFwiNzBcIik7XG4gICAgfVxuICAgIC8qKiBHZXQgYSBjb3B5IG9mIHRoZSBkZWZhdWx0IG9wdGlvbnMuICovXG4gICAgc3RhdGljIGdldERlZmF1bHRPcHRpb25zKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2FsbElkOiBcIlwiLFxuICAgICAgICAgICAgY2FsbElkUHJlZml4OiBcIlwiLFxuICAgICAgICAgICAgY3NlcTogMSxcbiAgICAgICAgICAgIHRvRGlzcGxheU5hbWU6IFwiXCIsXG4gICAgICAgICAgICB0b1RhZzogXCJcIixcbiAgICAgICAgICAgIGZyb21EaXNwbGF5TmFtZTogXCJcIixcbiAgICAgICAgICAgIGZyb21UYWc6IFwiXCIsXG4gICAgICAgICAgICBmb3JjZVJwb3J0OiBmYWxzZSxcbiAgICAgICAgICAgIGhhY2tWaWFUY3A6IGZhbHNlLFxuICAgICAgICAgICAgb3B0aW9uVGFnczogW1wib3V0Ym91bmRcIl0sXG4gICAgICAgICAgICByb3V0ZVNldDogW10sXG4gICAgICAgICAgICB1c2VyQWdlbnRTdHJpbmc6IFwic2lwLmpzXCIsXG4gICAgICAgICAgICB2aWFIb3N0OiBcIlwiXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBtYWtlTmFtZUFkZHJIZWFkZXIodXJpLCBkaXNwbGF5TmFtZSwgdGFnKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgcGFyYW1ldGVycy50YWcgPSB0YWc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBOYW1lQWRkckhlYWRlcih1cmksIGRpc3BsYXlOYW1lLCBwYXJhbWV0ZXJzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gaGVhZGVyIG5hbWUgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSBuYW1lIC0gaGVhZGVyIG5hbWVcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIHRoZSBzcGVjaWZpZWQgaGVhZGVyLCB1bmRlZmluZWQgaWYgaGVhZGVyIGRvZXNuJ3QgZXhpc3QuXG4gICAgICovXG4gICAgZ2V0SGVhZGVyKG5hbWUpIHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5oZWFkZXJzW2hlYWRlcml6ZShuYW1lKV07XG4gICAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgICAgIGlmIChoZWFkZXJbMF0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGVhZGVyWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcmVnZXhwID0gbmV3IFJlZ0V4cChcIl5cXFxccypcIiArIG5hbWUgKyBcIlxcXFxzKjpcIiwgXCJpXCIpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBleEhlYWRlciBvZiB0aGlzLmV4dHJhSGVhZGVycykge1xuICAgICAgICAgICAgICAgIGlmIChyZWdleHAudGVzdChleEhlYWRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4SGVhZGVyLnN1YnN0cmluZyhleEhlYWRlci5pbmRleE9mKFwiOlwiKSArIDEpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGhlYWRlci9zIG9mIHRoZSBnaXZlbiBuYW1lLlxuICAgICAqIEBwYXJhbSBuYW1lIC0gaGVhZGVyIG5hbWVcbiAgICAgKiBAcmV0dXJucyBBcnJheSB3aXRoIGFsbCB0aGUgaGVhZGVycyBvZiB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gICAgICovXG4gICAgZ2V0SGVhZGVycyhuYW1lKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBjb25zdCBoZWFkZXJBcnJheSA9IHRoaXMuaGVhZGVyc1toZWFkZXJpemUobmFtZSldO1xuICAgICAgICBpZiAoaGVhZGVyQXJyYXkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaGVhZGVyUGFydCBvZiBoZWFkZXJBcnJheSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGhlYWRlclBhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcmVnZXhwID0gbmV3IFJlZ0V4cChcIl5cXFxccypcIiArIG5hbWUgKyBcIlxcXFxzKjpcIiwgXCJpXCIpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBleEhlYWRlciBvZiB0aGlzLmV4dHJhSGVhZGVycykge1xuICAgICAgICAgICAgICAgIGlmIChyZWdleHAudGVzdChleEhlYWRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZXhIZWFkZXIuc3Vic3RyaW5nKGV4SGVhZGVyLmluZGV4T2YoXCI6XCIpICsgMSkudHJpbSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZ5IHRoZSBleGlzdGVuY2Ugb2YgdGhlIGdpdmVuIGhlYWRlci5cbiAgICAgKiBAcGFyYW0gbmFtZSAtIGhlYWRlciBuYW1lXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiBoZWFkZXIgd2l0aCBnaXZlbiBuYW1lIGV4aXN0cywgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgaGFzSGVhZGVyKG5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyc1toZWFkZXJpemUobmFtZSldKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2V4cCA9IG5ldyBSZWdFeHAoXCJeXFxcXHMqXCIgKyBuYW1lICsgXCJcXFxccyo6XCIsIFwiaVwiKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZXh0cmFIZWFkZXIgb2YgdGhpcy5leHRyYUhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVnZXhwLnRlc3QoZXh0cmFIZWFkZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcGxhY2UgdGhlIHRoZSBnaXZlbiBoZWFkZXIgYnkgdGhlIGdpdmVuIHZhbHVlLlxuICAgICAqIEBwYXJhbSBuYW1lIC0gaGVhZGVyIG5hbWVcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBoZWFkZXIgdmFsdWVcbiAgICAgKi9cbiAgICBzZXRIZWFkZXIobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzW2hlYWRlcml6ZShuYW1lKV0gPSB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5ID8gdmFsdWUgOiBbdmFsdWVdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgVmlhIGhlYWRlciBmaWVsZCBpbmRpY2F0ZXMgdGhlIHRyYW5zcG9ydCB1c2VkIGZvciB0aGUgdHJhbnNhY3Rpb25cbiAgICAgKiBhbmQgaWRlbnRpZmllcyB0aGUgbG9jYXRpb24gd2hlcmUgdGhlIHJlc3BvbnNlIGlzIHRvIGJlIHNlbnQuICBBIFZpYVxuICAgICAqIGhlYWRlciBmaWVsZCB2YWx1ZSBpcyBhZGRlZCBvbmx5IGFmdGVyIHRoZSB0cmFuc3BvcnQgdGhhdCB3aWxsIGJlXG4gICAgICogdXNlZCB0byByZWFjaCB0aGUgbmV4dCBob3AgaGFzIGJlZW4gc2VsZWN0ZWQgKHdoaWNoIG1heSBpbnZvbHZlIHRoZVxuICAgICAqIHVzYWdlIG9mIHRoZSBwcm9jZWR1cmVzIGluIFs0XSkuXG4gICAgICpcbiAgICAgKiBXaGVuIHRoZSBVQUMgY3JlYXRlcyBhIHJlcXVlc3QsIGl0IE1VU1QgaW5zZXJ0IGEgVmlhIGludG8gdGhhdFxuICAgICAqIHJlcXVlc3QuICBUaGUgcHJvdG9jb2wgbmFtZSBhbmQgcHJvdG9jb2wgdmVyc2lvbiBpbiB0aGUgaGVhZGVyIGZpZWxkXG4gICAgICogTVVTVCBiZSBTSVAgYW5kIDIuMCwgcmVzcGVjdGl2ZWx5LiAgVGhlIFZpYSBoZWFkZXIgZmllbGQgdmFsdWUgTVVTVFxuICAgICAqIGNvbnRhaW4gYSBicmFuY2ggcGFyYW1ldGVyLiAgVGhpcyBwYXJhbWV0ZXIgaXMgdXNlZCB0byBpZGVudGlmeSB0aGVcbiAgICAgKiB0cmFuc2FjdGlvbiBjcmVhdGVkIGJ5IHRoYXQgcmVxdWVzdC4gIFRoaXMgcGFyYW1ldGVyIGlzIHVzZWQgYnkgYm90aFxuICAgICAqIHRoZSBjbGllbnQgYW5kIHRoZSBzZXJ2ZXIuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjEuMS43XG4gICAgICogQHBhcmFtIGJyYW5jaFBhcmFtZXRlciAtIFRoZSBicmFuY2ggcGFyYW1ldGVyLlxuICAgICAqIEBwYXJhbSB0cmFuc3BvcnQgLSBUaGUgc2VudCBwcm90b2NvbCB0cmFuc3BvcnQuXG4gICAgICovXG4gICAgc2V0VmlhSGVhZGVyKGJyYW5jaCwgdHJhbnNwb3J0KSB7XG4gICAgICAgIC8vIEZJWE1FOiBIYWNrXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGFja1ZpYVRjcCkge1xuICAgICAgICAgICAgdHJhbnNwb3J0ID0gXCJUQ1BcIjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdmlhID0gXCJTSVAvMi4wL1wiICsgdHJhbnNwb3J0O1xuICAgICAgICB2aWEgKz0gXCIgXCIgKyB0aGlzLm9wdGlvbnMudmlhSG9zdCArIFwiO2JyYW5jaD1cIiArIGJyYW5jaDtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5mb3JjZVJwb3J0KSB7XG4gICAgICAgICAgICB2aWEgKz0gXCI7cnBvcnRcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldEhlYWRlcihcInZpYVwiLCB2aWEpO1xuICAgICAgICB0aGlzLmJyYW5jaCA9IGJyYW5jaDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCBtc2cgPSBcIlwiO1xuICAgICAgICBtc2cgKz0gdGhpcy5tZXRob2QgKyBcIiBcIiArIHRoaXMucnVyaS50b1JhdygpICsgXCIgU0lQLzIuMFxcclxcblwiO1xuICAgICAgICBmb3IgKGNvbnN0IGhlYWRlciBpbiB0aGlzLmhlYWRlcnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlYWRlcnNbaGVhZGVyXSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaGVhZGVyUGFydCBvZiB0aGlzLmhlYWRlcnNbaGVhZGVyXSkge1xuICAgICAgICAgICAgICAgICAgICBtc2cgKz0gaGVhZGVyICsgXCI6IFwiICsgaGVhZGVyUGFydCArIFwiXFxyXFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaGVhZGVyIG9mIHRoaXMuZXh0cmFIZWFkZXJzKSB7XG4gICAgICAgICAgICBtc2cgKz0gaGVhZGVyLnRyaW0oKSArIFwiXFxyXFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgbXNnICs9IFwiU3VwcG9ydGVkOiBcIiArIHRoaXMub3B0aW9ucy5vcHRpb25UYWdzLmpvaW4oXCIsIFwiKSArIFwiXFxyXFxuXCI7XG4gICAgICAgIG1zZyArPSBcIlVzZXItQWdlbnQ6IFwiICsgdGhpcy5vcHRpb25zLnVzZXJBZ2VudFN0cmluZyArIFwiXFxyXFxuXCI7XG4gICAgICAgIGlmICh0aGlzLmJvZHkpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5ib2R5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbXNnICs9IFwiQ29udGVudC1MZW5ndGg6IFwiICsgdXRmOExlbmd0aCh0aGlzLmJvZHkpICsgXCJcXHJcXG5cXHJcXG5cIjtcbiAgICAgICAgICAgICAgICBtc2cgKz0gdGhpcy5ib2R5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9keS5ib2R5ICYmIHRoaXMuYm9keS5jb250ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBtc2cgKz0gXCJDb250ZW50LVR5cGU6IFwiICsgdGhpcy5ib2R5LmNvbnRlbnRUeXBlICsgXCJcXHJcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgbXNnICs9IFwiQ29udGVudC1MZW5ndGg6IFwiICsgdXRmOExlbmd0aCh0aGlzLmJvZHkuYm9keSkgKyBcIlxcclxcblxcclxcblwiO1xuICAgICAgICAgICAgICAgICAgICBtc2cgKz0gdGhpcy5ib2R5LmJvZHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtc2cgKz0gXCJDb250ZW50LUxlbmd0aDogXCIgKyAwICsgXCJcXHJcXG5cXHJcXG5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtc2cgKz0gXCJDb250ZW50LUxlbmd0aDogXCIgKyAwICsgXCJcXHJcXG5cXHJcXG5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbXNnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGdldFJlYXNvblBocmFzZSwgbmV3VGFnLCB1dGY4TGVuZ3RoIH0gZnJvbSBcIi4vdXRpbHNcIjtcbi8qKlxuICogV2hlbiBhIFVBUyB3aXNoZXMgdG8gY29uc3RydWN0IGEgcmVzcG9uc2UgdG8gYSByZXF1ZXN0LCBpdCBmb2xsb3dzXG4gKiB0aGUgZ2VuZXJhbCBwcm9jZWR1cmVzIGRldGFpbGVkIGluIHRoZSBmb2xsb3dpbmcgc3Vic2VjdGlvbnMuXG4gKiBBZGRpdGlvbmFsIGJlaGF2aW9ycyBzcGVjaWZpYyB0byB0aGUgcmVzcG9uc2UgY29kZSBpbiBxdWVzdGlvbiwgd2hpY2hcbiAqIGFyZSBub3QgZGV0YWlsZWQgaW4gdGhpcyBzZWN0aW9uLCBtYXkgYWxzbyBiZSByZXF1aXJlZC5cbiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOC4yLjZcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29uc3RydWN0T3V0Z29pbmdSZXNwb25zZShtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgY29uc3QgQ1JMRiA9IFwiXFxyXFxuXCI7XG4gICAgaWYgKG9wdGlvbnMuc3RhdHVzQ29kZSA8IDEwMCB8fCBvcHRpb25zLnN0YXR1c0NvZGUgPiA2OTkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzQ29kZTogXCIgKyBvcHRpb25zLnN0YXR1c0NvZGUpO1xuICAgIH1cbiAgICBjb25zdCByZWFzb25QaHJhc2UgPSBvcHRpb25zLnJlYXNvblBocmFzZSA/IG9wdGlvbnMucmVhc29uUGhyYXNlIDogZ2V0UmVhc29uUGhyYXNlKG9wdGlvbnMuc3RhdHVzQ29kZSk7XG4gICAgLy8gU0lQIHJlc3BvbnNlcyBhcmUgZGlzdGluZ3Vpc2hlZCBmcm9tIHJlcXVlc3RzIGJ5IGhhdmluZyBhIFN0YXR1cy1MaW5lXG4gICAgLy8gYXMgdGhlaXIgc3RhcnQtbGluZS4gIEEgU3RhdHVzLUxpbmUgY29uc2lzdHMgb2YgdGhlIHByb3RvY29sIHZlcnNpb25cbiAgICAvLyBmb2xsb3dlZCBieSBhIG51bWVyaWMgU3RhdHVzLUNvZGUgYW5kIGl0cyBhc3NvY2lhdGVkIHRleHR1YWwgcGhyYXNlLFxuICAgIC8vIHdpdGggZWFjaCBlbGVtZW50IHNlcGFyYXRlZCBieSBhIHNpbmdsZSBTUCBjaGFyYWN0ZXIuXG4gICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi03LjJcbiAgICBsZXQgcmVzcG9uc2UgPSBcIlNJUC8yLjAgXCIgKyBvcHRpb25zLnN0YXR1c0NvZGUgKyBcIiBcIiArIHJlYXNvblBocmFzZSArIENSTEY7XG4gICAgLy8gT25lIGxhcmdlbHkgbm9uLW1ldGhvZC1zcGVjaWZpYyBndWlkZWxpbmUgZm9yIHRoZSBnZW5lcmF0aW9uIG9mXG4gICAgLy8gcmVzcG9uc2VzIGlzIHRoYXQgVUFTcyBTSE9VTEQgTk9UIGlzc3VlIGEgcHJvdmlzaW9uYWwgcmVzcG9uc2UgZm9yIGFcbiAgICAvLyBub24tSU5WSVRFIHJlcXVlc3QuICBSYXRoZXIsIFVBU3MgU0hPVUxEIGdlbmVyYXRlIGEgZmluYWwgcmVzcG9uc2UgdG9cbiAgICAvLyBhIG5vbi1JTlZJVEUgcmVxdWVzdCBhcyBzb29uIGFzIHBvc3NpYmxlLlxuICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOC4yLjYuMVxuICAgIGlmIChvcHRpb25zLnN0YXR1c0NvZGUgPj0gMTAwICYmIG9wdGlvbnMuc3RhdHVzQ29kZSA8IDIwMCkge1xuICAgICAgICAvLyBUT0RPXG4gICAgfVxuICAgIC8vIFdoZW4gYSAxMDAgKFRyeWluZykgcmVzcG9uc2UgaXMgZ2VuZXJhdGVkLCBhbnkgVGltZXN0YW1wIGhlYWRlciBmaWVsZFxuICAgIC8vIHByZXNlbnQgaW4gdGhlIHJlcXVlc3QgTVVTVCBiZSBjb3BpZWQgaW50byB0aGlzIDEwMCAoVHJ5aW5nKVxuICAgIC8vIHJlc3BvbnNlLiAgSWYgdGhlcmUgaXMgYSBkZWxheSBpbiBnZW5lcmF0aW5nIHRoZSByZXNwb25zZSwgdGhlIFVBU1xuICAgIC8vIFNIT1VMRCBhZGQgYSBkZWxheSB2YWx1ZSBpbnRvIHRoZSBUaW1lc3RhbXAgdmFsdWUgaW4gdGhlIHJlc3BvbnNlLlxuICAgIC8vIFRoaXMgdmFsdWUgTVVTVCBjb250YWluIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHRpbWUgb2Ygc2VuZGluZyBvZlxuICAgIC8vIHRoZSByZXNwb25zZSBhbmQgcmVjZWlwdCBvZiB0aGUgcmVxdWVzdCwgbWVhc3VyZWQgaW4gc2Vjb25kcy5cbiAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTguMi42LjFcbiAgICBpZiAob3B0aW9ucy5zdGF0dXNDb2RlID09PSAxMDApIHtcbiAgICAgICAgLy8gVE9ET1xuICAgIH1cbiAgICAvLyBUaGUgRnJvbSBmaWVsZCBvZiB0aGUgcmVzcG9uc2UgTVVTVCBlcXVhbCB0aGUgRnJvbSBoZWFkZXIgZmllbGQgb2ZcbiAgICAvLyB0aGUgcmVxdWVzdC4gIFRoZSBDYWxsLUlEIGhlYWRlciBmaWVsZCBvZiB0aGUgcmVzcG9uc2UgTVVTVCBlcXVhbCB0aGVcbiAgICAvLyBDYWxsLUlEIGhlYWRlciBmaWVsZCBvZiB0aGUgcmVxdWVzdC4gIFRoZSBDU2VxIGhlYWRlciBmaWVsZCBvZiB0aGVcbiAgICAvLyByZXNwb25zZSBNVVNUIGVxdWFsIHRoZSBDU2VxIGZpZWxkIG9mIHRoZSByZXF1ZXN0LiAgVGhlIFZpYSBoZWFkZXJcbiAgICAvLyBmaWVsZCB2YWx1ZXMgaW4gdGhlIHJlc3BvbnNlIE1VU1QgZXF1YWwgdGhlIFZpYSBoZWFkZXIgZmllbGQgdmFsdWVzXG4gICAgLy8gaW4gdGhlIHJlcXVlc3QgYW5kIE1VU1QgbWFpbnRhaW4gdGhlIHNhbWUgb3JkZXJpbmcuXG4gICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjIuNi4yXG4gICAgY29uc3QgZnJvbUhlYWRlciA9IFwiRnJvbTogXCIgKyBtZXNzYWdlLmdldEhlYWRlcihcIkZyb21cIikgKyBDUkxGO1xuICAgIGNvbnN0IGNhbGxJZEhlYWRlciA9IFwiQ2FsbC1JRDogXCIgKyBtZXNzYWdlLmNhbGxJZCArIENSTEY7XG4gICAgY29uc3QgY1NlcUhlYWRlciA9IFwiQ1NlcTogXCIgKyBtZXNzYWdlLmNzZXEgKyBcIiBcIiArIG1lc3NhZ2UubWV0aG9kICsgQ1JMRjtcbiAgICBjb25zdCB2aWFIZWFkZXJzID0gbWVzc2FnZS5nZXRIZWFkZXJzKFwidmlhXCIpLnJlZHVjZSgocHJldmlvdXMsIGN1cnJlbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIHByZXZpb3VzICsgXCJWaWE6IFwiICsgY3VycmVudCArIENSTEY7XG4gICAgfSwgXCJcIik7XG4gICAgLy8gSWYgYSByZXF1ZXN0IGNvbnRhaW5lZCBhIFRvIHRhZyBpbiB0aGUgcmVxdWVzdCwgdGhlIFRvIGhlYWRlciBmaWVsZFxuICAgIC8vIGluIHRoZSByZXNwb25zZSBNVVNUIGVxdWFsIHRoYXQgb2YgdGhlIHJlcXVlc3QuICBIb3dldmVyLCBpZiB0aGUgVG9cbiAgICAvLyBoZWFkZXIgZmllbGQgaW4gdGhlIHJlcXVlc3QgZGlkIG5vdCBjb250YWluIGEgdGFnLCB0aGUgVVJJIGluIHRoZSBUb1xuICAgIC8vIGhlYWRlciBmaWVsZCBpbiB0aGUgcmVzcG9uc2UgTVVTVCBlcXVhbCB0aGUgVVJJIGluIHRoZSBUbyBoZWFkZXJcbiAgICAvLyBmaWVsZDsgYWRkaXRpb25hbGx5LCB0aGUgVUFTIE1VU1QgYWRkIGEgdGFnIHRvIHRoZSBUbyBoZWFkZXIgZmllbGQgaW5cbiAgICAvLyB0aGUgcmVzcG9uc2UgKHdpdGggdGhlIGV4Y2VwdGlvbiBvZiB0aGUgMTAwIChUcnlpbmcpIHJlc3BvbnNlLCBpblxuICAgIC8vIHdoaWNoIGEgdGFnIE1BWSBiZSBwcmVzZW50KS4gIFRoaXMgc2VydmVzIHRvIGlkZW50aWZ5IHRoZSBVQVMgdGhhdCBpc1xuICAgIC8vIHJlc3BvbmRpbmcsIHBvc3NpYmx5IHJlc3VsdGluZyBpbiBhIGNvbXBvbmVudCBvZiBhIGRpYWxvZyBJRC4gIFRoZVxuICAgIC8vIHNhbWUgdGFnIE1VU1QgYmUgdXNlZCBmb3IgYWxsIHJlc3BvbnNlcyB0byB0aGF0IHJlcXVlc3QsIGJvdGggZmluYWxcbiAgICAvLyBhbmQgcHJvdmlzaW9uYWwgKGFnYWluIGV4Y2VwdGluZyB0aGUgMTAwIChUcnlpbmcpKS5cbiAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTguMi42LjJcbiAgICBsZXQgdG9IZWFkZXIgPSBcIlRvOiBcIiArIG1lc3NhZ2UuZ2V0SGVhZGVyKFwidG9cIik7XG4gICAgaWYgKG9wdGlvbnMuc3RhdHVzQ29kZSA+IDEwMCAmJiAhbWVzc2FnZS5wYXJzZUhlYWRlcihcInRvXCIpLmhhc1BhcmFtKFwidGFnXCIpKSB7XG4gICAgICAgIGxldCB0b1RhZyA9IG9wdGlvbnMudG9UYWc7XG4gICAgICAgIGlmICghdG9UYWcpIHtcbiAgICAgICAgICAgIC8vIFN0YXRlbGVzcyBVQVMgQmVoYXZpb3IuLi5cbiAgICAgICAgICAgIC8vIG8gIFRvIGhlYWRlciB0YWdzIE1VU1QgYmUgZ2VuZXJhdGVkIGZvciByZXNwb25zZXMgaW4gYSBzdGF0ZWxlc3NcbiAgICAgICAgICAgIC8vICAgIG1hbm5lciAtIGluIGEgbWFubmVyIHRoYXQgd2lsbCBnZW5lcmF0ZSB0aGUgc2FtZSB0YWcgZm9yIHRoZVxuICAgICAgICAgICAgLy8gICAgc2FtZSByZXF1ZXN0IGNvbnNpc3RlbnRseS4gIEZvciBpbmZvcm1hdGlvbiBvbiB0YWcgY29uc3RydWN0aW9uXG4gICAgICAgICAgICAvLyAgICBzZWUgU2VjdGlvbiAxOS4zLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjIuN1xuICAgICAgICAgICAgdG9UYWcgPSBuZXdUYWcoKTsgLy8gRklYTUU6IG5ld1RhZygpIGN1cnJlbnRseSBnZW5lcmF0ZXMgcmFuZG9tIHRhZ3NcbiAgICAgICAgfVxuICAgICAgICB0b0hlYWRlciArPSBcIjt0YWc9XCIgKyB0b1RhZztcbiAgICB9XG4gICAgdG9IZWFkZXIgKz0gQ1JMRjtcbiAgICAvLyBGSVhNRTogVE9ETzogbmVlZHMgcmV2aWV3Li4uIG1vdmVkIHRvIEludml0ZVVzZXJBZ2VudFNlcnZlciAoYXMgaXQgaXMgc3BlY2lmaWMgdG8gdGhhdClcbiAgICAvLyBsZXQgcmVjb3JkUm91dGVIZWFkZXJzID0gXCJcIjtcbiAgICAvLyBpZiAocmVxdWVzdC5tZXRob2QgPT09IEMuSU5WSVRFICYmIHN0YXR1c0NvZGUgPiAxMDAgJiYgc3RhdHVzQ29kZSA8PSAyMDApIHtcbiAgICAvLyAgIHJlY29yZFJvdXRlSGVhZGVycyA9IHJlcXVlc3QuZ2V0SGVhZGVycyhcInJlY29yZC1yb3V0ZVwiKS5yZWR1Y2UoKHByZXZpb3VzLCBjdXJyZW50KSA9PiB7XG4gICAgLy8gICAgIHJldHVybiBwcmV2aW91cyArIFwiUmVjb3JkLVJvdXRlOiBcIiArIGN1cnJlbnQgKyBDUkxGO1xuICAgIC8vICAgfSwgXCJcIik7XG4gICAgLy8gfVxuICAgIC8vIEZJWE1FOiBUT0RPOiBuZWVkcyByZXZpZXcuLi5cbiAgICBsZXQgc3VwcG9ydGVkSGVhZGVyID0gXCJcIjtcbiAgICBpZiAob3B0aW9ucy5zdXBwb3J0ZWQpIHtcbiAgICAgICAgc3VwcG9ydGVkSGVhZGVyID0gXCJTdXBwb3J0ZWQ6IFwiICsgb3B0aW9ucy5zdXBwb3J0ZWQuam9pbihcIiwgXCIpICsgQ1JMRjtcbiAgICB9XG4gICAgLy8gRklYTUU6IFRPRE86IG5lZWRzIHJldmlldy4uLlxuICAgIGxldCB1c2VyQWdlbnRIZWFkZXIgPSBcIlwiO1xuICAgIGlmIChvcHRpb25zLnVzZXJBZ2VudCkge1xuICAgICAgICB1c2VyQWdlbnRIZWFkZXIgPSBcIlVzZXItQWdlbnQ6IFwiICsgb3B0aW9ucy51c2VyQWdlbnQgKyBDUkxGO1xuICAgIH1cbiAgICBsZXQgZXh0ZW5zaW9uSGVhZGVycyA9IFwiXCI7XG4gICAgaWYgKG9wdGlvbnMuZXh0cmFIZWFkZXJzKSB7XG4gICAgICAgIGV4dGVuc2lvbkhlYWRlcnMgPSBvcHRpb25zLmV4dHJhSGVhZGVycy5yZWR1Y2UoKHByZXZpb3VzLCBjdXJyZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcHJldmlvdXMgKyBjdXJyZW50LnRyaW0oKSArIENSTEY7XG4gICAgICAgIH0sIFwiXCIpO1xuICAgIH1cbiAgICAvLyBUaGUgcmVsYXRpdmUgb3JkZXIgb2YgaGVhZGVyIGZpZWxkcyB3aXRoIGRpZmZlcmVudCBmaWVsZCBuYW1lcyBpcyBub3RcbiAgICAvLyBzaWduaWZpY2FudC4gIEhvd2V2ZXIsIGl0IGlzIFJFQ09NTUVOREVEIHRoYXQgaGVhZGVyIGZpZWxkcyB3aGljaCBhcmVcbiAgICAvLyBuZWVkZWQgZm9yIHByb3h5IHByb2Nlc3NpbmcgKFZpYSwgUm91dGUsIFJlY29yZC1Sb3V0ZSwgUHJveHktUmVxdWlyZSxcbiAgICAvLyBNYXgtRm9yd2FyZHMsIGFuZCBQcm94eS1BdXRob3JpemF0aW9uLCBmb3IgZXhhbXBsZSkgYXBwZWFyIHRvd2FyZHNcbiAgICAvLyB0aGUgdG9wIG9mIHRoZSBtZXNzYWdlIHRvIGZhY2lsaXRhdGUgcmFwaWQgcGFyc2luZy5cbiAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTcuMy4xXG4gICAgLy8gcmVzcG9uc2UgKz0gcmVjb3JkUm91dGVIZWFkZXJzO1xuICAgIHJlc3BvbnNlICs9IHZpYUhlYWRlcnM7XG4gICAgcmVzcG9uc2UgKz0gZnJvbUhlYWRlcjtcbiAgICByZXNwb25zZSArPSB0b0hlYWRlcjtcbiAgICByZXNwb25zZSArPSBjU2VxSGVhZGVyO1xuICAgIHJlc3BvbnNlICs9IGNhbGxJZEhlYWRlcjtcbiAgICByZXNwb25zZSArPSBzdXBwb3J0ZWRIZWFkZXI7XG4gICAgcmVzcG9uc2UgKz0gdXNlckFnZW50SGVhZGVyO1xuICAgIHJlc3BvbnNlICs9IGV4dGVuc2lvbkhlYWRlcnM7XG4gICAgaWYgKG9wdGlvbnMuYm9keSkge1xuICAgICAgICByZXNwb25zZSArPSBcIkNvbnRlbnQtVHlwZTogXCIgKyBvcHRpb25zLmJvZHkuY29udGVudFR5cGUgKyBDUkxGO1xuICAgICAgICByZXNwb25zZSArPSBcIkNvbnRlbnQtTGVuZ3RoOiBcIiArIHV0ZjhMZW5ndGgob3B0aW9ucy5ib2R5LmNvbnRlbnQpICsgQ1JMRiArIENSTEY7XG4gICAgICAgIHJlc3BvbnNlICs9IG9wdGlvbnMuYm9keS5jb250ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVzcG9uc2UgKz0gXCJDb250ZW50LUxlbmd0aDogXCIgKyAwICsgQ1JMRiArIENSTEY7XG4gICAgfVxuICAgIHJldHVybiB7IG1lc3NhZ2U6IHJlc3BvbnNlIH07XG59XG4iLCJjb25zdCBUMSA9IDUwMDtcbmNvbnN0IFQyID0gNDAwMDtcbmNvbnN0IFQ0ID0gNTAwMDtcbi8qKlxuICogVGltZXJzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgVGltZXJzID0ge1xuICAgIFQxLFxuICAgIFQyLFxuICAgIFQ0LFxuICAgIFRJTUVSX0I6IDY0ICogVDEsXG4gICAgVElNRVJfRDogMCAqIFQxLFxuICAgIFRJTUVSX0Y6IDY0ICogVDEsXG4gICAgVElNRVJfSDogNjQgKiBUMSxcbiAgICBUSU1FUl9JOiAwICogVDQsXG4gICAgVElNRVJfSjogMCAqIFQxLFxuICAgIFRJTUVSX0s6IDAgKiBUNCxcbiAgICBUSU1FUl9MOiA2NCAqIFQxLFxuICAgIFRJTUVSX006IDY0ICogVDEsXG4gICAgVElNRVJfTjogNjQgKiBUMSxcbiAgICBQUk9WSVNJT05BTF9SRVNQT05TRV9JTlRFUlZBTDogNjAwMDAgLy8gU2VlIFJGQyAzMjYxIFNlY3Rpb24gMTMuMy4xLjFcbn07XG4iLCIvKipcbiAqIEFuIEV4Y2VwdGlvbiBpcyBjb25zaWRlcmVkIGEgY29uZGl0aW9uIHRoYXQgYSByZWFzb25hYmxlIGFwcGxpY2F0aW9uIG1heSB3aXNoIHRvIGNhdGNoLlxuICogQW4gRXJyb3IgaW5kaWNhdGVzIHNlcmlvdXMgcHJvYmxlbXMgdGhhdCBhIHJlYXNvbmFibGUgYXBwbGljYXRpb24gc2hvdWxkIG5vdCB0cnkgdG8gY2F0Y2guXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTsgLy8gJ0Vycm9yJyBicmVha3MgcHJvdG90eXBlIGNoYWluIGhlcmVcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTsgLy8gcmVzdG9yZSBwcm90b3R5cGUgY2hhaW5cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBFeGNlcHRpb24gfSBmcm9tIFwiLi9leGNlcHRpb25cIjtcbi8qKlxuICogVHJhbnNwb3J0IGVycm9yLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNwb3J0RXJyb3IgZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSA/IG1lc3NhZ2UgOiBcIlVuc3BlY2lmaWVkIHRyYW5zcG9ydCBlcnJvci5cIik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVHJhbnNwb3J0RXJyb3IgfSBmcm9tIFwiLi4vZXhjZXB0aW9uc1wiO1xuLyoqXG4gKiBUcmFuc2FjdGlvbi5cbiAqIEByZW1hcmtzXG4gKiBTSVAgaXMgYSB0cmFuc2FjdGlvbmFsIHByb3RvY29sOiBpbnRlcmFjdGlvbnMgYmV0d2VlbiBjb21wb25lbnRzIHRha2VcbiAqIHBsYWNlIGluIGEgc2VyaWVzIG9mIGluZGVwZW5kZW50IG1lc3NhZ2UgZXhjaGFuZ2VzLiAgU3BlY2lmaWNhbGx5LCBhXG4gKiBTSVAgdHJhbnNhY3Rpb24gY29uc2lzdHMgb2YgYSBzaW5nbGUgcmVxdWVzdCBhbmQgYW55IHJlc3BvbnNlcyB0b1xuICogdGhhdCByZXF1ZXN0LCB3aGljaCBpbmNsdWRlIHplcm8gb3IgbW9yZSBwcm92aXNpb25hbCByZXNwb25zZXMgYW5kXG4gKiBvbmUgb3IgbW9yZSBmaW5hbCByZXNwb25zZXMuICBJbiB0aGUgY2FzZSBvZiBhIHRyYW5zYWN0aW9uIHdoZXJlIHRoZVxuICogcmVxdWVzdCB3YXMgYW4gSU5WSVRFIChrbm93biBhcyBhbiBJTlZJVEUgdHJhbnNhY3Rpb24pLCB0aGVcbiAqIHRyYW5zYWN0aW9uIGFsc28gaW5jbHVkZXMgdGhlIEFDSyBvbmx5IGlmIHRoZSBmaW5hbCByZXNwb25zZSB3YXMgbm90XG4gKiBhIDJ4eCByZXNwb25zZS4gIElmIHRoZSByZXNwb25zZSB3YXMgYSAyeHgsIHRoZSBBQ0sgaXMgbm90IGNvbnNpZGVyZWRcbiAqIHBhcnQgb2YgdGhlIHRyYW5zYWN0aW9uLlxuICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xN1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKF90cmFuc3BvcnQsIF91c2VyLCBfaWQsIF9zdGF0ZSwgbG9nZ2VyQ2F0ZWdvcnkpIHtcbiAgICAgICAgdGhpcy5fdHJhbnNwb3J0ID0gX3RyYW5zcG9ydDtcbiAgICAgICAgdGhpcy5fdXNlciA9IF91c2VyO1xuICAgICAgICB0aGlzLl9pZCA9IF9pZDtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBfc3RhdGU7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gX3VzZXIubG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIobG9nZ2VyQ2F0ZWdvcnksIF9pZCk7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBDb25zdHJ1Y3RpbmcgJHt0aGlzLnR5cGVUb1N0cmluZygpfSB3aXRoIGlkICR7dGhpcy5pZH0uYCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3RydWN0b3IuXG4gICAgICogT25jZSB0aGUgdHJhbnNhY3Rpb24gaXMgaW4gdGhlIFwidGVybWluYXRlZFwiIHN0YXRlLCBpdCBpcyBkZXN0cm95ZWRcbiAgICAgKiBpbW1lZGlhdGVseSBhbmQgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIGBkaXNwb3NlYC4gSG93ZXZlciwgaWYgYVxuICAgICAqIHRyYW5zYWN0aW9uIG5lZWRzIHRvIGJlIGVuZGVkIHByZW1hdHVyZWx5LCB0aGUgdHJhbnNhY3Rpb24gdXNlciBtYXlcbiAgICAgKiBkbyBzbyBieSBjYWxsaW5nIHRoaXMgbWV0aG9kIChmb3IgZXhhbXBsZSwgcGVyaGFwcyB0aGUgVUEgaXMgc2h1dHRpbmcgZG93bikuXG4gICAgICogTm8gc3RhdGUgdHJhbnNpdGlvbiB3aWxsIG9jY3VyIHVwb24gY2FsbGluZyB0aGlzIG1ldGhvZCwgYWxsIG91dHN0YW5kaW5nXG4gICAgICogdHJhbnNtaXNzaW9uIHRpbWVycyB3aWxsIGJlIGNhbmNlbGxlZCwgYW5kIHVzZSBvZiB0aGUgdHJhbnNhY3Rpb24gYWZ0ZXJcbiAgICAgKiBjYWxsaW5nIGBkaXNwb3NlYCBpcyB1bmRlZmluZWQuXG4gICAgICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYERlc3Ryb3llZCAke3RoaXMudHlwZVRvU3RyaW5nKCl9IHdpdGggaWQgJHt0aGlzLmlkfS5gKTtcbiAgICB9XG4gICAgLyoqIFRyYW5zYWN0aW9uIGlkLiAqL1xuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgIH1cbiAgICAvKiogVHJhbnNhY3Rpb24ga2luZC4gRGVwcmVjYXRlZC4gKi9cbiAgICBnZXQga2luZCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBraW5kLlwiKTtcbiAgICB9XG4gICAgLyoqIFRyYW5zYWN0aW9uIHN0YXRlLiAqL1xuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH1cbiAgICAvKiogVHJhbnNhY3Rpb24gdHJhbnNwb3J0LiAqL1xuICAgIGdldCB0cmFuc3BvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW5ldmVyIHRoZSB0cmFuc2FjdGlvbiBzdGF0ZSBjaGFuZ2VzLlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciAtIENhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdGhhdCBzcGVjaWZpZXMgY2hhcmFjdGVyaXN0aWNzIGFib3V0IHRoZSBsaXN0ZW5lci5cbiAgICAgKiAgICAgICAgICAgICAgICAgIElmIG9uY2UgdHJ1ZSwgaW5kaWNhdGVzIHRoYXQgdGhlIGxpc3RlbmVyIHNob3VsZCBiZSBpbnZva2VkIGF0IG1vc3Qgb25jZSBhZnRlciBiZWluZyBhZGRlZC5cbiAgICAgKiAgICAgICAgICAgICAgICAgIElmIG9uY2UgdHJ1ZSwgdGhlIGxpc3RlbmVyIHdvdWxkIGJlIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCB3aGVuIGludm9rZWQuXG4gICAgICovXG4gICAgYWRkU3RhdGVDaGFuZ2VMaXN0ZW5lcihsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBvbmNlV3JhcHBlciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU3RhdGVDaGFuZ2VMaXN0ZW5lcihvbmNlV3JhcHBlcik7XG4gICAgICAgICAgICBsaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9uY2UpID09PSB0cnVlID8gdGhpcy5saXN0ZW5lcnMucHVzaChvbmNlV3JhcHBlcikgOiB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBjdXJyZW50bHkgcHVibGljIHNvIHRlc3RzIG1heSBzcHkgb24gaXQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbm90aWZ5U3RhdGVDaGFuZ2VMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnNsaWNlKCkuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgbGlzdGVuZXIgcHJldmlvdXNseSByZWdpc3RlcmVkIHdpdGggYWRkU3RhdGVMaXN0ZW5lci5cbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgLSBDYWxsYmFjayBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICByZW1vdmVTdGF0ZUNoYW5nZUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMuZmlsdGVyKChsKSA9PiBsICE9PSBsaXN0ZW5lcik7XG4gICAgfVxuICAgIGxvZ1RyYW5zcG9ydEVycm9yKGVycm9yLCBtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgVHJhbnNwb3J0IGVycm9yIG9jY3VycmVkIGluICR7dGhpcy50eXBlVG9TdHJpbmcoKX0gd2l0aCBpZCAke3RoaXMuaWR9LmApO1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFzcyBtZXNzYWdlIHRvIHRyYW5zcG9ydCBmb3IgdHJhbnNtaXNzaW9uLiBJZiB0cmFuc3BvcnQgZmFpbHMsXG4gICAgICogdGhlIHRyYW5zYWN0aW9uIHVzZXIgaXMgbm90aWZpZWQgYnkgY2FsbGJhY2sgdG8gb25UcmFuc3BvcnRFcnJvcigpLlxuICAgICAqIEByZXR1cm5zXG4gICAgICogUmVqZWN0cyB3aXRoIGBUcmFuc3BvcnRFcnJvcmAgaWYgdHJhbnNwb3J0IGZhaWxzLlxuICAgICAqL1xuICAgIHNlbmQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuc2VuZChtZXNzYWdlKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIC8vIElmIHRoZSB0cmFuc3BvcnQgcmVqZWN0cywgaXQgU0hPVUxEIHJlamVjdCB3aXRoIGEgVHJhbnNwb3J0RXJyb3IuXG4gICAgICAgICAgICAvLyBCdXQgdGhlIHRyYW5zcG9ydCBtYXkgYmUgZXh0ZXJuYWwgY29kZSwgc28gd2UgYXJlIGNhcmVmdWxcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBjb252ZXJ0IGl0IHRvIGEgVHJhbnNwb3J0RXJyb3IgaWYgbmVlZCBiZS5cbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFRyYW5zcG9ydEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblRyYW5zcG9ydEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0cmFuc3BvcnRFcnJvcjtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiB0eXBlb2YgZXJyb3IubWVzc2FnZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHRyYW5zcG9ydEVycm9yID0gbmV3IFRyYW5zcG9ydEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0RXJyb3IgPSBuZXcgVHJhbnNwb3J0RXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcih0cmFuc3BvcnRFcnJvcik7XG4gICAgICAgICAgICB0aHJvdyB0cmFuc3BvcnRFcnJvcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTdGF0ZSBjaGFuZ2UgdG8gXCIke3N0YXRlfVwiIG9uICR7dGhpcy50eXBlVG9TdHJpbmcoKX0gd2l0aCBpZCAke3RoaXMuaWR9LmApO1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgICBpZiAodGhpcy5fdXNlci5vblN0YXRlQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLl91c2VyLm9uU3RhdGVDaGFuZ2Uoc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm90aWZ5U3RhdGVDaGFuZ2VMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgdHlwZVRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJVbmtub3duVHlwZVwiO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFRyYW5zYWN0aW9uIH0gZnJvbSBcIi4vdHJhbnNhY3Rpb25cIjtcbi8qKlxuICogQ2xpZW50IFRyYW5zYWN0aW9uLlxuICogQHJlbWFya3NcbiAqIFRoZSBjbGllbnQgdHJhbnNhY3Rpb24gcHJvdmlkZXMgaXRzIGZ1bmN0aW9uYWxpdHkgdGhyb3VnaCB0aGVcbiAqIG1haW50ZW5hbmNlIG9mIGEgc3RhdGUgbWFjaGluZS5cbiAqXG4gKiBUaGUgVFUgY29tbXVuaWNhdGVzIHdpdGggdGhlIGNsaWVudCB0cmFuc2FjdGlvbiB0aHJvdWdoIGEgc2ltcGxlXG4gKiBpbnRlcmZhY2UuICBXaGVuIHRoZSBUVSB3aXNoZXMgdG8gaW5pdGlhdGUgYSBuZXcgdHJhbnNhY3Rpb24sIGl0XG4gKiBjcmVhdGVzIGEgY2xpZW50IHRyYW5zYWN0aW9uIGFuZCBwYXNzZXMgaXQgdGhlIFNJUCByZXF1ZXN0IHRvIHNlbmRcbiAqIGFuZCBhbiBJUCBhZGRyZXNzLCBwb3J0LCBhbmQgdHJhbnNwb3J0IHRvIHdoaWNoIHRvIHNlbmQgaXQuICBUaGVcbiAqIGNsaWVudCB0cmFuc2FjdGlvbiBiZWdpbnMgZXhlY3V0aW9uIG9mIGl0cyBzdGF0ZSBtYWNoaW5lLiAgVmFsaWRcbiAqIHJlc3BvbnNlcyBhcmUgcGFzc2VkIHVwIHRvIHRoZSBUVSBmcm9tIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24uXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjFcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIENsaWVudFRyYW5zYWN0aW9uIGV4dGVuZHMgVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKF9yZXF1ZXN0LCB0cmFuc3BvcnQsIHVzZXIsIHN0YXRlLCBsb2dnZXJDYXRlZ29yeSkge1xuICAgICAgICBzdXBlcih0cmFuc3BvcnQsIHVzZXIsIENsaWVudFRyYW5zYWN0aW9uLm1ha2VJZChfcmVxdWVzdCksIHN0YXRlLCBsb2dnZXJDYXRlZ29yeSk7XG4gICAgICAgIHRoaXMuX3JlcXVlc3QgPSBfcmVxdWVzdDtcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcbiAgICAgICAgLy8gVGhlIFZpYSBoZWFkZXIgZmllbGQgaW5kaWNhdGVzIHRoZSB0cmFuc3BvcnQgdXNlZCBmb3IgdGhlIHRyYW5zYWN0aW9uXG4gICAgICAgIC8vIGFuZCBpZGVudGlmaWVzIHRoZSBsb2NhdGlvbiB3aGVyZSB0aGUgcmVzcG9uc2UgaXMgdG8gYmUgc2VudC4gIEEgVmlhXG4gICAgICAgIC8vIGhlYWRlciBmaWVsZCB2YWx1ZSBpcyBhZGRlZCBvbmx5IGFmdGVyIHRoZSB0cmFuc3BvcnQgdGhhdCB3aWxsIGJlXG4gICAgICAgIC8vIHVzZWQgdG8gcmVhY2ggdGhlIG5leHQgaG9wIGhhcyBiZWVuIHNlbGVjdGVkICh3aGljaCBtYXkgaW52b2x2ZSB0aGVcbiAgICAgICAgLy8gdXNhZ2Ugb2YgdGhlIHByb2NlZHVyZXMgaW4gWzRdKS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjEuMS43XG4gICAgICAgIF9yZXF1ZXN0LnNldFZpYUhlYWRlcih0aGlzLmlkLCB0cmFuc3BvcnQucHJvdG9jb2wpO1xuICAgIH1cbiAgICBzdGF0aWMgbWFrZUlkKHJlcXVlc3QpIHtcbiAgICAgICAgaWYgKHJlcXVlc3QubWV0aG9kID09PSBcIkNBTkNFTFwiKSB7XG4gICAgICAgICAgICBpZiAoIXJlcXVlc3QuYnJhbmNoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3V0Z29pbmcgQ0FOQ0VMIHJlcXVlc3Qgd2l0aG91dCBhIGJyYW5jaC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdC5icmFuY2g7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJ6OWhHNGJLXCIgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFRoZSBvdXRnb2luZyByZXF1ZXN0IHRoZSB0cmFuc2FjdGlvbiBoYW5kbGluZy4gKi9cbiAgICBnZXQgcmVxdWVzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgNDA4IHRvIG5vbi1JTlZJVEUgd2lsbCBhbHdheXMgYXJyaXZlIHRvbyBsYXRlIHRvIGJlIHVzZWZ1bCAoWzNdKSxcbiAgICAgKiBUaGUgY2xpZW50IGFscmVhZHkgaGFzIGZ1bGwga25vd2xlZGdlIG9mIHRoZSB0aW1lb3V0LiBUaGUgb25seVxuICAgICAqIGluZm9ybWF0aW9uIHRoaXMgbWVzc2FnZSB3b3VsZCBjb252ZXkgaXMgd2hldGhlciBvciBub3QgdGhlIHNlcnZlclxuICAgICAqIGJlbGlldmVkIHRoZSB0cmFuc2FjdGlvbiB0aW1lZCBvdXQuIEhvd2V2ZXIsIHdpdGggdGhlIGN1cnJlbnQgZGVzaWduXG4gICAgICogb2YgdGhlIE5JVCwgYSBjbGllbnQgY2Fubm90IGRvIGFueXRoaW5nIHdpdGggdGhpcyBrbm93bGVkZ2UuIFRodXMsXG4gICAgICogdGhlIDQwOCBpcyBzaW1wbHkgd2FzdGluZyBuZXR3b3JrIHJlc291cmNlcyBhbmQgY29udHJpYnV0ZXMgdG8gdGhlXG4gICAgICogcmVzcG9uc2UgYm9tYmFyZG1lbnQgaWxsdXN0cmF0ZWQgaW4gWzNdLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM0MzIwI3NlY3Rpb24tNC4xXG4gICAgICovXG4gICAgb25SZXF1ZXN0VGltZW91dCgpIHtcbiAgICAgICAgaWYgKHRoaXMudXNlci5vblJlcXVlc3RUaW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLnVzZXIub25SZXF1ZXN0VGltZW91dCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyoqXG4gKiBUcmFuc2FjdGlvbiBzdGF0ZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHZhciBUcmFuc2FjdGlvblN0YXRlO1xuKGZ1bmN0aW9uIChUcmFuc2FjdGlvblN0YXRlKSB7XG4gICAgVHJhbnNhY3Rpb25TdGF0ZVtcIkFjY2VwdGVkXCJdID0gXCJBY2NlcHRlZFwiO1xuICAgIFRyYW5zYWN0aW9uU3RhdGVbXCJDYWxsaW5nXCJdID0gXCJDYWxsaW5nXCI7XG4gICAgVHJhbnNhY3Rpb25TdGF0ZVtcIkNvbXBsZXRlZFwiXSA9IFwiQ29tcGxldGVkXCI7XG4gICAgVHJhbnNhY3Rpb25TdGF0ZVtcIkNvbmZpcm1lZFwiXSA9IFwiQ29uZmlybWVkXCI7XG4gICAgVHJhbnNhY3Rpb25TdGF0ZVtcIlByb2NlZWRpbmdcIl0gPSBcIlByb2NlZWRpbmdcIjtcbiAgICBUcmFuc2FjdGlvblN0YXRlW1wiVGVybWluYXRlZFwiXSA9IFwiVGVybWluYXRlZFwiO1xuICAgIFRyYW5zYWN0aW9uU3RhdGVbXCJUcnlpbmdcIl0gPSBcIlRyeWluZ1wiO1xufSkoVHJhbnNhY3Rpb25TdGF0ZSB8fCAoVHJhbnNhY3Rpb25TdGF0ZSA9IHt9KSk7XG4iLCIvKipcbiAqIFNlc3Npb24gc3RhdGUuXG4gKiBAcmVtYXJrc1xuICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xM1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgdmFyIFNlc3Npb25TdGF0ZTtcbihmdW5jdGlvbiAoU2Vzc2lvblN0YXRlKSB7XG4gICAgU2Vzc2lvblN0YXRlW1wiSW5pdGlhbFwiXSA9IFwiSW5pdGlhbFwiO1xuICAgIFNlc3Npb25TdGF0ZVtcIkVhcmx5XCJdID0gXCJFYXJseVwiO1xuICAgIFNlc3Npb25TdGF0ZVtcIkFja1dhaXRcIl0gPSBcIkFja1dhaXRcIjtcbiAgICBTZXNzaW9uU3RhdGVbXCJDb25maXJtZWRcIl0gPSBcIkNvbmZpcm1lZFwiO1xuICAgIFNlc3Npb25TdGF0ZVtcIlRlcm1pbmF0ZWRcIl0gPSBcIlRlcm1pbmF0ZWRcIjtcbn0pKFNlc3Npb25TdGF0ZSB8fCAoU2Vzc2lvblN0YXRlID0ge30pKTtcbi8qKlxuICogT2ZmZXIvQW5zd2VyIHN0YXRlLlxuICogQHJlbWFya3NcbiAqIGBgYHR4dFxuICogICAgICAgICBPZmZlciAgICAgICAgICAgICAgICBBbnN3ZXIgICAgICAgICAgICAgUkZDICAgIEluaSBFc3QgRWFybHlcbiAqICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgMS4gSU5WSVRFIFJlcS4gICAgICAgICAgMnh4IElOVklURSBSZXNwLiAgICAgUkZDIDMyNjEgIFkgICBZICAgIE5cbiAqICAyLiAyeHggSU5WSVRFIFJlc3AuICAgICBBQ0sgUmVxLiAgICAgICAgICAgICBSRkMgMzI2MSAgWSAgIFkgICAgTlxuICogIDMuIElOVklURSBSZXEuICAgICAgICAgIDF4eC1yZWwgSU5WSVRFIFJlc3AuIFJGQyAzMjYyICBZICAgWSAgICBOXG4gKiAgNC4gMXh4LXJlbCBJTlZJVEUgUmVzcC4gUFJBQ0sgUmVxLiAgICAgICAgICAgUkZDIDMyNjIgIFkgICBZICAgIE5cbiAqICA1LiBQUkFDSyBSZXEuICAgICAgICAgICAyMDAgUFJBQ0sgUmVzcC4gICAgICBSRkMgMzI2MiAgTiAgIFkgICAgWVxuICogIDYuIFVQREFURSBSZXEuICAgICAgICAgIDJ4eCBVUERBVEUgUmVzcC4gICAgIFJGQyAzMzExICBOICAgWSAgICBZXG4gKlxuICogICAgICAgVGFibGUgMTogU3VtbWFyeSBvZiBTSVAgVXNhZ2Ugb2YgdGhlIE9mZmVyL0Fuc3dlciBNb2RlbFxuICogYGBgXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjMzNyNzZWN0aW9uLTIuMlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdmFyIFNpZ25hbGluZ1N0YXRlO1xuKGZ1bmN0aW9uIChTaWduYWxpbmdTdGF0ZSkge1xuICAgIFNpZ25hbGluZ1N0YXRlW1wiSW5pdGlhbFwiXSA9IFwiSW5pdGlhbFwiO1xuICAgIFNpZ25hbGluZ1N0YXRlW1wiSGF2ZUxvY2FsT2ZmZXJcIl0gPSBcIkhhdmVMb2NhbE9mZmVyXCI7XG4gICAgU2lnbmFsaW5nU3RhdGVbXCJIYXZlUmVtb3RlT2ZmZXJcIl0gPSBcIkhhdmVSZW1vdGVPZmZlclwiO1xuICAgIFNpZ25hbGluZ1N0YXRlW1wiU3RhYmxlXCJdID0gXCJTdGFibGVcIjtcbiAgICBTaWduYWxpbmdTdGF0ZVtcIkNsb3NlZFwiXSA9IFwiQ2xvc2VkXCI7XG59KShTaWduYWxpbmdTdGF0ZSB8fCAoU2lnbmFsaW5nU3RhdGUgPSB7fSkpO1xuIiwiLyoqXG4gKiBTdWJzY3JpcHRpb24gc3RhdGUuXG4gKiBAcmVtYXJrc1xuICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjEuMlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdmFyIFN1YnNjcmlwdGlvblN0YXRlO1xuKGZ1bmN0aW9uIChTdWJzY3JpcHRpb25TdGF0ZSkge1xuICAgIFN1YnNjcmlwdGlvblN0YXRlW1wiSW5pdGlhbFwiXSA9IFwiSW5pdGlhbFwiO1xuICAgIFN1YnNjcmlwdGlvblN0YXRlW1wiTm90aWZ5V2FpdFwiXSA9IFwiTm90aWZ5V2FpdFwiO1xuICAgIFN1YnNjcmlwdGlvblN0YXRlW1wiUGVuZGluZ1wiXSA9IFwiUGVuZGluZ1wiO1xuICAgIFN1YnNjcmlwdGlvblN0YXRlW1wiQWN0aXZlXCJdID0gXCJBY3RpdmVcIjtcbiAgICBTdWJzY3JpcHRpb25TdGF0ZVtcIlRlcm1pbmF0ZWRcIl0gPSBcIlRlcm1pbmF0ZWRcIjtcbn0pKFN1YnNjcmlwdGlvblN0YXRlIHx8IChTdWJzY3JpcHRpb25TdGF0ZSA9IHt9KSk7XG4iLCJpbXBvcnQgeyBUaW1lcnMgfSBmcm9tIFwiLi4vdGltZXJzXCI7XG5pbXBvcnQgeyBDbGllbnRUcmFuc2FjdGlvbiB9IGZyb20gXCIuL2NsaWVudC10cmFuc2FjdGlvblwiO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25TdGF0ZSB9IGZyb20gXCIuL3RyYW5zYWN0aW9uLXN0YXRlXCI7XG4vKipcbiAqIE5vbi1JTlZJVEUgQ2xpZW50IFRyYW5zYWN0aW9uLlxuICogQHJlbWFya3NcbiAqIE5vbi1JTlZJVEUgdHJhbnNhY3Rpb25zIGRvIG5vdCBtYWtlIHVzZSBvZiBBQ0suXG4gKiBUaGV5IGFyZSBzaW1wbGUgcmVxdWVzdC1yZXNwb25zZSBpbnRlcmFjdGlvbnMuXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjEuMlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24gZXh0ZW5kcyBDbGllbnRUcmFuc2FjdGlvbiB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKiBVcG9uIGNvbnN0cnVjdGlvbiwgdGhlIG91dGdvaW5nIHJlcXVlc3QncyBWaWEgaGVhZGVyIGlzIHVwZGF0ZWQgYnkgY2FsbGluZyBgc2V0VmlhSGVhZGVyYC5cbiAgICAgKiBUaGVuIGB0b1N0cmluZ2AgaXMgY2FsbGVkIG9uIHRoZSBvdXRnb2luZyByZXF1ZXN0IGFuZCB0aGUgbWVzc2FnZSBpcyBzZW50IHZpYSB0aGUgdHJhbnNwb3J0LlxuICAgICAqIEFmdGVyIGNvbnN0cnVjdGlvbiB0aGUgdHJhbnNhY3Rpb24gd2lsbCBiZSBpbiB0aGUgXCJjYWxsaW5nXCIgc3RhdGUgYW5kIHRoZSB0cmFuc2FjdGlvbiBpZFxuICAgICAqIHdpbGwgZXF1YWwgdGhlIGJyYW5jaCBwYXJhbWV0ZXIgc2V0IGluIHRoZSBWaWEgaGVhZGVyIG9mIHRoZSBvdXRnb2luZyByZXF1ZXN0LlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4yXG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBUaGUgb3V0Z29pbmcgTm9uLUlOVklURSByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSB0cmFuc3BvcnQgLSBUaGUgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSB1c2VyIC0gVGhlIHRyYW5zYWN0aW9uIHVzZXIuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVxdWVzdCwgdHJhbnNwb3J0LCB1c2VyKSB7XG4gICAgICAgIHN1cGVyKHJlcXVlc3QsIHRyYW5zcG9ydCwgdXNlciwgVHJhbnNhY3Rpb25TdGF0ZS5UcnlpbmcsIFwic2lwLnRyYW5zYWN0aW9uLm5pY3RcIik7XG4gICAgICAgIC8vIEZJWE1FOiBUaW1lciBFIGZvciB1bnJlbGlhYmxlIHRyYW5zcG9ydHMgbm90IGltcGxlbWVudGVkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgXCJUcnlpbmdcIiBzdGF0ZSBpcyBlbnRlcmVkIHdoZW4gdGhlIFRVIGluaXRpYXRlcyBhIG5ldyBjbGllbnRcbiAgICAgICAgLy8gdHJhbnNhY3Rpb24gd2l0aCBhIHJlcXVlc3QuICBXaGVuIGVudGVyaW5nIHRoaXMgc3RhdGUsIHRoZSBjbGllbnRcbiAgICAgICAgLy8gdHJhbnNhY3Rpb24gU0hPVUxEIHNldCB0aW1lciBGIHRvIGZpcmUgaW4gNjQqVDEgc2Vjb25kcy4gVGhlIHJlcXVlc3RcbiAgICAgICAgLy8gTVVTVCBiZSBwYXNzZWQgdG8gdGhlIHRyYW5zcG9ydCBsYXllciBmb3IgdHJhbnNtaXNzaW9uLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjEuMi4yXG4gICAgICAgIHRoaXMuRiA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy50aW1lckYoKSwgVGltZXJzLlRJTUVSX0YpO1xuICAgICAgICB0aGlzLnNlbmQocmVxdWVzdC50b1N0cmluZygpKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nVHJhbnNwb3J0RXJyb3IoZXJyb3IsIFwiRmFpbGVkIHRvIHNlbmQgaW5pdGlhbCBvdXRnb2luZyByZXF1ZXN0LlwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3RydWN0b3IuXG4gICAgICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuRikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuRik7XG4gICAgICAgICAgICB0aGlzLkYgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuSykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuSyk7XG4gICAgICAgICAgICB0aGlzLksgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIH1cbiAgICAvKiogVHJhbnNhY3Rpb24ga2luZC4gRGVwcmVjYXRlZC4gKi9cbiAgICBnZXQga2luZCgpIHtcbiAgICAgICAgcmV0dXJuIFwibmljdFwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVyIGZvciBpbmNvbWluZyByZXNwb25zZXMgZnJvbSB0aGUgdHJhbnNwb3J0IHdoaWNoIG1hdGNoIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHJlc3BvbnNlIC0gVGhlIGluY29taW5nIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIHJlY2VpdmVSZXNwb25zZShyZXNwb25zZSkge1xuICAgICAgICBjb25zdCBzdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzQ29kZTtcbiAgICAgICAgaWYgKCFzdGF0dXNDb2RlIHx8IHN0YXR1c0NvZGUgPCAxMDAgfHwgc3RhdHVzQ29kZSA+IDY5OSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXR1cyBjb2RlICR7c3RhdHVzQ29kZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Ucnlpbmc6XG4gICAgICAgICAgICAgICAgLy8gSWYgYSBwcm92aXNpb25hbCByZXNwb25zZSBpcyByZWNlaXZlZCB3aGlsZSBpbiB0aGUgXCJUcnlpbmdcIiBzdGF0ZSwgdGhlXG4gICAgICAgICAgICAgICAgLy8gcmVzcG9uc2UgTVVTVCBiZSBwYXNzZWQgdG8gdGhlIFRVLCBhbmQgdGhlbiB0aGUgY2xpZW50IHRyYW5zYWN0aW9uXG4gICAgICAgICAgICAgICAgLy8gU0hPVUxEIG1vdmUgdG8gdGhlIFwiUHJvY2VlZGluZ1wiIHN0YXRlLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4yLjJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA+PSAxMDAgJiYgc3RhdHVzQ29kZSA8PSAxOTkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSWYgYSBmaW5hbCByZXNwb25zZSAoc3RhdHVzIGNvZGVzIDIwMC02OTkpIGlzIHJlY2VpdmVkIHdoaWxlIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIFwiVHJ5aW5nXCIgc3RhdGUsIHRoZSByZXNwb25zZSBNVVNUIGJlIHBhc3NlZCB0byB0aGUgVFUsIGFuZCB0aGVcbiAgICAgICAgICAgICAgICAvLyBjbGllbnQgdHJhbnNhY3Rpb24gTVVTVCB0cmFuc2l0aW9uIHRvIHRoZSBcIkNvbXBsZXRlZFwiIHN0YXRlLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4yLjJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA+PSAyMDAgJiYgc3RhdHVzQ29kZSA8PSA2OTkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gNDA4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVxdWVzdFRpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nOlxuICAgICAgICAgICAgICAgIC8vIElmIGEgcHJvdmlzaW9uYWwgcmVzcG9uc2UgaXMgcmVjZWl2ZWQgd2hpbGUgaW4gdGhlIFwiUHJvY2VlZGluZ1wiIHN0YXRlLFxuICAgICAgICAgICAgICAgIC8vIHRoZSByZXNwb25zZSBNVVNUIGJlIHBhc3NlZCB0byB0aGUgVFUuIChGcm9tIEZpZ3VyZSA2KVxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4yLjJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA+PSAxMDAgJiYgc3RhdHVzQ29kZSA8PSAxOTkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiBhIGZpbmFsIHJlc3BvbnNlIChzdGF0dXMgY29kZXMgMjAwLTY5OSkgaXMgcmVjZWl2ZWQgd2hpbGUgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gXCJQcm9jZWVkaW5nXCIgc3RhdGUsIHRoZSByZXNwb25zZSBNVVNUIGJlIHBhc3NlZCB0byB0aGUgVFUsIGFuZCB0aGVcbiAgICAgICAgICAgICAgICAvLyBjbGllbnQgdHJhbnNhY3Rpb24gTVVTVCB0cmFuc2l0aW9uIHRvIHRoZSBcIkNvbXBsZXRlZFwiIHN0YXRlLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4yLjJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA+PSAyMDAgJiYgc3RhdHVzQ29kZSA8PSA2OTkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gNDA4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVxdWVzdFRpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQ6XG4gICAgICAgICAgICAgICAgLy8gVGhlIFwiQ29tcGxldGVkXCIgc3RhdGUgZXhpc3RzIHRvIGJ1ZmZlciBhbnkgYWRkaXRpb25hbCByZXNwb25zZVxuICAgICAgICAgICAgICAgIC8vIHJldHJhbnNtaXNzaW9ucyB0aGF0IG1heSBiZSByZWNlaXZlZCAod2hpY2ggaXMgd2h5IHRoZSBjbGllbnRcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiByZW1haW5zIHRoZXJlIG9ubHkgZm9yIHVucmVsaWFibGUgdHJhbnNwb3J0cykuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4xLjIuMlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkOlxuICAgICAgICAgICAgICAgIC8vIEZvciBnb29kIG1lYXN1cmUganVzdCBhYnNvcmIgYWRkaXRpb25hbCByZXNwb25zZSByZXRyYW5zbWlzc2lvbnMuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgJHt0aGlzLnN0YXRlfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgTm9uLUlOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gcmVjZWl2ZWQgdW5leHBlY3RlZCAke3N0YXR1c0NvZGV9IHJlc3BvbnNlIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0uYDtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY2xpZW50IHRyYW5zYWN0aW9uIFNIT1VMRCBpbmZvcm0gdGhlIFRVIHRoYXQgYSB0cmFuc3BvcnQgZmFpbHVyZSBoYXMgb2NjdXJyZWQsXG4gICAgICogYW5kIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24gU0hPVUxEIHRyYW5zaXRpb24gZGlyZWN0bHkgdG8gdGhlIFwiVGVybWluYXRlZFwiIHN0YXRlLlxuICAgICAqIFRoZSBUVSB3aWxsIGhhbmRsZSB0aGUgZmFpbCBvdmVyIG1lY2hhbmlzbXMgZGVzY3JpYmVkIGluIFs0XS5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjEuNFxuICAgICAqIEBwYXJhbSBlcnJvciAtIFRyYW5zcG9ydCBlcnJvclxuICAgICAqL1xuICAgIG9uVHJhbnNwb3J0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMudXNlci5vblRyYW5zcG9ydEVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnVzZXIub25UcmFuc3BvcnRFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqIEZvciBsb2dnaW5nLiAqL1xuICAgIHR5cGVUb1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwibm9uLUlOVklURSBjbGllbnQgdHJhbnNhY3Rpb25cIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBhIHN0YXRlIHRyYW5zaXRpb24uXG4gICAgICogQHBhcmFtIG5ld1N0YXRlIC0gTmV3IHN0YXRlLlxuICAgICAqL1xuICAgIHN0YXRlVHJhbnNpdGlvbihuZXdTdGF0ZSwgZHVlVG9UcmFuc3BvcnRFcnJvciA9IGZhbHNlKSB7XG4gICAgICAgIC8vIEFzc2VydCB2YWxpZCBzdGF0ZSB0cmFuc2l0aW9ucy5cbiAgICAgICAgY29uc3QgaW52YWxpZFN0YXRlVHJhbnNpdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLnN0YXRlfSB0byAke25ld1N0YXRlfWApO1xuICAgICAgICB9O1xuICAgICAgICBzd2l0Y2ggKG5ld1N0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuVHJ5aW5nOlxuICAgICAgICAgICAgICAgIGludmFsaWRTdGF0ZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBUcmFuc2FjdGlvblN0YXRlLlRyeWluZykge1xuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkU3RhdGVUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLkNvbXBsZXRlZDpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gVHJhbnNhY3Rpb25TdGF0ZS5UcnlpbmcgJiYgdGhpcy5zdGF0ZSAhPT0gVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRTdGF0ZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuVGVybWluYXRlZDpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gVHJhbnNhY3Rpb25TdGF0ZS5UcnlpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSAhPT0gVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgIT09IFRyYW5zYWN0aW9uU3RhdGUuQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZHVlVG9UcmFuc3BvcnRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpbnZhbGlkU3RhdGVUcmFuc2l0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT25jZSB0aGUgY2xpZW50IHRyYW5zYWN0aW9uIGVudGVycyB0aGUgXCJDb21wbGV0ZWRcIiBzdGF0ZSwgaXQgTVVTVCBzZXRcbiAgICAgICAgLy8gVGltZXIgSyB0byBmaXJlIGluIFQ0IHNlY29uZHMgZm9yIHVucmVsaWFibGUgdHJhbnNwb3J0cywgYW5kIHplcm9cbiAgICAgICAgLy8gc2Vjb25kcyBmb3IgcmVsaWFibGUgdHJhbnNwb3J0cyAgVGhlIFwiQ29tcGxldGVkXCIgc3RhdGUgZXhpc3RzIHRvXG4gICAgICAgIC8vIGJ1ZmZlciBhbnkgYWRkaXRpb25hbCByZXNwb25zZSByZXRyYW5zbWlzc2lvbnMgdGhhdCBtYXkgYmUgcmVjZWl2ZWRcbiAgICAgICAgLy8gKHdoaWNoIGlzIHdoeSB0aGUgY2xpZW50IHRyYW5zYWN0aW9uIHJlbWFpbnMgdGhlcmUgb25seSBmb3IgdW5yZWxpYWJsZSB0cmFuc3BvcnRzKS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4xLjIuMlxuICAgICAgICBpZiAobmV3U3RhdGUgPT09IFRyYW5zYWN0aW9uU3RhdGUuQ29tcGxldGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5GKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuRik7XG4gICAgICAgICAgICAgICAgdGhpcy5GID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5LID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnRpbWVySygpLCBUaW1lcnMuVElNRVJfSyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT25jZSB0aGUgdHJhbnNhY3Rpb24gaXMgaW4gdGhlIHRlcm1pbmF0ZWQgc3RhdGUsIGl0IE1VU1QgYmUgZGVzdHJveWVkIGltbWVkaWF0ZWx5LlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjEuMi4yXG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgc3RhdGUuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiBUaW1lciBGIGZpcmVzIHdoaWxlIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24gaXMgc3RpbGwgaW4gdGhlXG4gICAgICogXCJUcnlpbmdcIiBzdGF0ZSwgdGhlIGNsaWVudCB0cmFuc2FjdGlvbiBTSE9VTEQgaW5mb3JtIHRoZSBUVSBhYm91dCB0aGVcbiAgICAgKiB0aW1lb3V0LCBhbmQgdGhlbiBpdCBTSE9VTEQgZW50ZXIgdGhlIFwiVGVybWluYXRlZFwiIHN0YXRlLlxuICAgICAqIElmIHRpbWVyIEYgZmlyZXMgd2hpbGUgaW4gdGhlIFwiUHJvY2VlZGluZ1wiIHN0YXRlLCB0aGUgVFUgTVVTVCBiZSBpbmZvcm1lZCBvZlxuICAgICAqIGEgdGltZW91dCwgYW5kIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24gTVVTVCB0cmFuc2l0aW9uIHRvIHRoZSB0ZXJtaW5hdGVkIHN0YXRlLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4yLjJcbiAgICAgKi9cbiAgICB0aW1lckYoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBUaW1lciBGIGV4cGlyZWQgZm9yIG5vbi1JTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlRyeWluZyB8fCB0aGlzLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMub25SZXF1ZXN0VGltZW91dCgpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiBUaW1lciBLIGZpcmVzIHdoaWxlIGluIHRoaXMgKENPTVBMRVRFRCkgc3RhdGUsIHRoZSBjbGllbnQgdHJhbnNhY3Rpb25cbiAgICAgKiBNVVNUIHRyYW5zaXRpb24gdG8gdGhlIFwiVGVybWluYXRlZFwiIHN0YXRlLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4yLjJcbiAgICAgKi9cbiAgICB0aW1lcksoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLkNvbXBsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IFRyYW5zYWN0aW9uIH0gZnJvbSBcIi4vdHJhbnNhY3Rpb25cIjtcbi8qKlxuICogU2VydmVyIFRyYW5zYWN0aW9uLlxuICogQHJlbWFya3NcbiAqIFRoZSBzZXJ2ZXIgdHJhbnNhY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIHRoZSBkZWxpdmVyeSBvZiByZXF1ZXN0cyB0b1xuICogdGhlIFRVIGFuZCB0aGUgcmVsaWFibGUgdHJhbnNtaXNzaW9uIG9mIHJlc3BvbnNlcy4gIEl0IGFjY29tcGxpc2hlc1xuICogdGhpcyB0aHJvdWdoIGEgc3RhdGUgbWFjaGluZS4gIFNlcnZlciB0cmFuc2FjdGlvbnMgYXJlIGNyZWF0ZWQgYnkgdGhlXG4gKiBjb3JlIHdoZW4gYSByZXF1ZXN0IGlzIHJlY2VpdmVkLCBhbmQgdHJhbnNhY3Rpb24gaGFuZGxpbmcgaXMgZGVzaXJlZFxuICogZm9yIHRoYXQgcmVxdWVzdCAodGhpcyBpcyBub3QgYWx3YXlzIHRoZSBjYXNlKS5cbiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU2VydmVyVHJhbnNhY3Rpb24gZXh0ZW5kcyBUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoX3JlcXVlc3QsIHRyYW5zcG9ydCwgdXNlciwgc3RhdGUsIGxvZ2dlckNhdGVnb3J5KSB7XG4gICAgICAgIHN1cGVyKHRyYW5zcG9ydCwgdXNlciwgX3JlcXVlc3QudmlhQnJhbmNoLCBzdGF0ZSwgbG9nZ2VyQ2F0ZWdvcnkpO1xuICAgICAgICB0aGlzLl9yZXF1ZXN0ID0gX3JlcXVlc3Q7XG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XG4gICAgfVxuICAgIC8qKiBUaGUgaW5jb21pbmcgcmVxdWVzdCB0aGUgdHJhbnNhY3Rpb24gaGFuZGxpbmcuICovXG4gICAgZ2V0IHJlcXVlc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEMgfSBmcm9tIFwiLi4vbWVzc2FnZXNcIjtcbmltcG9ydCB7IFRpbWVycyB9IGZyb20gXCIuLi90aW1lcnNcIjtcbmltcG9ydCB7IFNlcnZlclRyYW5zYWN0aW9uIH0gZnJvbSBcIi4vc2VydmVyLXRyYW5zYWN0aW9uXCI7XG5pbXBvcnQgeyBUcmFuc2FjdGlvblN0YXRlIH0gZnJvbSBcIi4vdHJhbnNhY3Rpb24tc3RhdGVcIjtcbi8qKlxuICogSU5WSVRFIFNlcnZlciBUcmFuc2FjdGlvbi5cbiAqIEByZW1hcmtzXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjIuMVxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgSW52aXRlU2VydmVyVHJhbnNhY3Rpb24gZXh0ZW5kcyBTZXJ2ZXJUcmFuc2FjdGlvbiB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3IuXG4gICAgICogVXBvbiBjb25zdHJ1Y3Rpb24sIGEgXCIxMDAgVHJ5aW5nXCIgcmVwbHkgd2lsbCBiZSBpbW1lZGlhdGVseSBzZW50LlxuICAgICAqIEFmdGVyIGNvbnN0cnVjdGlvbiB0aGUgdHJhbnNhY3Rpb24gd2lsbCBiZSBpbiB0aGUgXCJwcm9jZWVkaW5nXCIgc3RhdGUgYW5kIHRoZSB0cmFuc2FjdGlvblxuICAgICAqIGBpZGAgd2lsbCBlcXVhbCB0aGUgYnJhbmNoIHBhcmFtZXRlciBzZXQgaW4gdGhlIFZpYSBoZWFkZXIgb2YgdGhlIGluY29taW5nIHJlcXVlc3QuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4yLjFcbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIEluY29taW5nIElOVklURSByZXF1ZXN0IGZyb20gdGhlIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gdHJhbnNwb3J0IC0gVGhlIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gdXNlciAtIFRoZSB0cmFuc2FjdGlvbiB1c2VyLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3QsIHRyYW5zcG9ydCwgdXNlcikge1xuICAgICAgICBzdXBlcihyZXF1ZXN0LCB0cmFuc3BvcnQsIHVzZXIsIFRyYW5zYWN0aW9uU3RhdGUuUHJvY2VlZGluZywgXCJzaXAudHJhbnNhY3Rpb24uaXN0XCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXN0cnVjdG9yLlxuICAgICAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuc3RvcFByb2dyZXNzRXh0ZW5zaW9uVGltZXIoKTtcbiAgICAgICAgaWYgKHRoaXMuSCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuSCk7XG4gICAgICAgICAgICB0aGlzLkggPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuSSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuSSk7XG4gICAgICAgICAgICB0aGlzLkkgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuTCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuTCk7XG4gICAgICAgICAgICB0aGlzLkwgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIH1cbiAgICAvKiogVHJhbnNhY3Rpb24ga2luZC4gRGVwcmVjYXRlZC4gKi9cbiAgICBnZXQga2luZCgpIHtcbiAgICAgICAgcmV0dXJuIFwiaXN0XCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY2VpdmUgcmVxdWVzdHMgZnJvbSB0cmFuc3BvcnQgbWF0Y2hpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIFJlcXVlc3QgbWF0Y2hpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgKi9cbiAgICByZWNlaXZlUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmc6XG4gICAgICAgICAgICAgICAgLy8gSWYgYSByZXF1ZXN0IHJldHJhbnNtaXNzaW9uIGlzIHJlY2VpdmVkIHdoaWxlIGluIHRoZSBcIlByb2NlZWRpbmdcIiBzdGF0ZSwgdGhlIG1vc3RcbiAgICAgICAgICAgICAgICAvLyByZWNlbnQgcHJvdmlzaW9uYWwgcmVzcG9uc2UgdGhhdCB3YXMgcmVjZWl2ZWQgZnJvbSB0aGUgVFUgTVVTVCBiZSBwYXNzZWQgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNwb3J0IGxheWVyIGZvciByZXRyYW5zbWlzc2lvbi5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjIuMVxuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gQy5JTlZJVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdFByb3Zpc2lvbmFsUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZCh0aGlzLmxhc3RQcm92aXNpb25hbFJlc3BvbnNlKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGVycm9yLCBcIkZhaWxlZCB0byBzZW5kIHJldHJhbnNtaXNzaW9uIG9mIHByb3Zpc2lvbmFsIHJlc3BvbnNlLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuQWNjZXB0ZWQ6XG4gICAgICAgICAgICAgICAgLy8gV2hpbGUgaW4gdGhlIFwiQWNjZXB0ZWRcIiBzdGF0ZSwgYW55IHJldHJhbnNtaXNzaW9ucyBvZiB0aGUgSU5WSVRFXG4gICAgICAgICAgICAgICAgLy8gcmVjZWl2ZWQgd2lsbCBtYXRjaCB0aGlzIHRyYW5zYWN0aW9uIHN0YXRlIG1hY2hpbmUgYW5kIHdpbGwgYmVcbiAgICAgICAgICAgICAgICAvLyBhYnNvcmJlZCBieSB0aGUgbWFjaGluZSB3aXRob3V0IGNoYW5naW5nIGl0cyBzdGF0ZS4gVGhlc2VcbiAgICAgICAgICAgICAgICAvLyByZXRyYW5zbWlzc2lvbnMgYXJlIG5vdCBwYXNzZWQgb250byB0aGUgVFUuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi03LjFcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09IEMuSU5WSVRFKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuQ29tcGxldGVkOlxuICAgICAgICAgICAgICAgIC8vIEZ1cnRoZXJtb3JlLCB3aGlsZSBpbiB0aGUgXCJDb21wbGV0ZWRcIiBzdGF0ZSwgaWYgYSByZXF1ZXN0IHJldHJhbnNtaXNzaW9uIGlzXG4gICAgICAgICAgICAgICAgLy8gcmVjZWl2ZWQsIHRoZSBzZXJ2ZXIgU0hPVUxEIHBhc3MgdGhlIHJlc3BvbnNlIHRvIHRoZSB0cmFuc3BvcnQgZm9yIHJldHJhbnNtaXNzaW9uLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4xXG4gICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QubWV0aG9kID09PSBDLklOVklURSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubGFzdEZpbmFsUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxhc3QgZmluYWwgcmVzcG9uc2UgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQodGhpcy5sYXN0RmluYWxSZXNwb25zZSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGVycm9yLCBcIkZhaWxlZCB0byBzZW5kIHJldHJhbnNtaXNzaW9uIG9mIGZpbmFsIHJlc3BvbnNlLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSWYgYW4gQUNLIGlzIHJlY2VpdmVkIHdoaWxlIHRoZSBzZXJ2ZXIgdHJhbnNhY3Rpb24gaXMgaW4gdGhlIFwiQ29tcGxldGVkXCIgc3RhdGUsXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlciB0cmFuc2FjdGlvbiBNVVNUIHRyYW5zaXRpb24gdG8gdGhlIFwiQ29uZmlybWVkXCIgc3RhdGUuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4yLjFcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09IEMuQUNLKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFRyYW5zYWN0aW9uU3RhdGUuQ29uZmlybWVkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Db25maXJtZWQ6XG4gICAgICAgICAgICAgICAgLy8gVGhlIHB1cnBvc2Ugb2YgdGhlIFwiQ29uZmlybWVkXCIgc3RhdGUgaXMgdG8gYWJzb3JiIGFueSBhZGRpdGlvbmFsIEFDSyBtZXNzYWdlcyB0aGF0IGFycml2ZSxcbiAgICAgICAgICAgICAgICAvLyB0cmlnZ2VyZWQgZnJvbSByZXRyYW5zbWlzc2lvbnMgb2YgdGhlIGZpbmFsIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4xXG4gICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QubWV0aG9kID09PSBDLklOVklURSB8fCByZXF1ZXN0Lm1ldGhvZCA9PT0gQy5BQ0spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkOlxuICAgICAgICAgICAgICAgIC8vIEZvciBnb29kIG1lYXN1cmUgYWJzb3JiIGFueSBhZGRpdGlvbmFsIG1lc3NhZ2VzIHRoYXQgYXJyaXZlIChzaG91bGQgbm90IGhhcHBlbikuXG4gICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QubWV0aG9kID09PSBDLklOVklURSB8fCByZXF1ZXN0Lm1ldGhvZCA9PT0gQy5BQ0spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlICR7dGhpcy5zdGF0ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gYElOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24gcmVjZWl2ZWQgdW5leHBlY3RlZCAke3JlcXVlc3QubWV0aG9kfSByZXF1ZXN0IHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0uYDtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNlaXZlIHJlc3BvbnNlcyBmcm9tIFRVIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSBzdGF0dXNDb2RlIC0gU3RhdHVzIGNvZGUgb2YgcmVzcG9uc2UuXG4gICAgICogQHBhcmFtIHJlc3BvbnNlIC0gUmVzcG9uc2UuXG4gICAgICovXG4gICAgcmVjZWl2ZVJlc3BvbnNlKHN0YXR1c0NvZGUsIHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChzdGF0dXNDb2RlIDwgMTAwIHx8IHN0YXR1c0NvZGUgPiA2OTkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0dXMgY29kZSAke3N0YXR1c0NvZGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuUHJvY2VlZGluZzpcbiAgICAgICAgICAgICAgICAvLyBUaGUgVFUgcGFzc2VzIGFueSBudW1iZXIgb2YgcHJvdmlzaW9uYWwgcmVzcG9uc2VzIHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi4gU28gbG9uZyBhcyB0aGUgc2VydmVyIHRyYW5zYWN0aW9uIGlzIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIFwiUHJvY2VlZGluZ1wiIHN0YXRlLCBlYWNoIG9mIHRoZXNlIE1VU1QgYmUgcGFzc2VkIHRvIHRoZSB0cmFuc3BvcnRcbiAgICAgICAgICAgICAgICAvLyBsYXllciBmb3IgdHJhbnNtaXNzaW9uLiBUaGV5IGFyZSBub3Qgc2VudCByZWxpYWJseSBieSB0aGVcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBsYXllciAodGhleSBhcmUgbm90IHJldHJhbnNtaXR0ZWQgYnkgaXQpIGFuZCBkbyBub3QgY2F1c2VcbiAgICAgICAgICAgICAgICAvLyBhIGNoYW5nZSBpbiB0aGUgc3RhdGUgb2YgdGhlIHNlcnZlciB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjIuMVxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID49IDEwMCAmJiBzdGF0dXNDb2RlIDw9IDE5OSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RQcm92aXNpb25hbFJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBwcm9ncmVzcyBleHRlbnNpb24gdGltZXIgb25seSBmb3IgYSBub24tMTAwIHByb3Zpc2lvbmFsIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA+IDEwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFByb2dyZXNzRXh0ZW5zaW9uVGltZXIoKTsgLy8gRklYTUU6IHJlbW92ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZChyZXNwb25zZSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGVycm9yLCBcIkZhaWxlZCB0byBzZW5kIDF4eCByZXNwb25zZS5cIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmLCB3aGlsZSBpbiB0aGUgXCJQcm9jZWVkaW5nXCIgc3RhdGUsIHRoZSBUVSBwYXNzZXMgYSAyeHggcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgc2VydmVyIHRyYW5zYWN0aW9uLCB0aGUgc2VydmVyIHRyYW5zYWN0aW9uIE1VU1QgcGFzcyB0aGlzXG4gICAgICAgICAgICAgICAgLy8gcmVzcG9uc2UgdG8gdGhlIHRyYW5zcG9ydCBsYXllciBmb3IgdHJhbnNtaXNzaW9uLiBJdCBpcyBub3RcbiAgICAgICAgICAgICAgICAvLyByZXRyYW5zbWl0dGVkIGJ5IHRoZSBzZXJ2ZXIgdHJhbnNhY3Rpb247IHJldHJhbnNtaXNzaW9ucyBvZiAyeHhcbiAgICAgICAgICAgICAgICAvLyByZXNwb25zZXMgYXJlIGhhbmRsZWQgYnkgdGhlIFRVLiBUaGUgc2VydmVyIHRyYW5zYWN0aW9uIE1VU1QgdGhlblxuICAgICAgICAgICAgICAgIC8vIHRyYW5zaXRpb24gdG8gdGhlIFwiQWNjZXB0ZWRcIiBzdGF0ZS5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjAyNiNzZWN0aW9uLTguNVxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID49IDIwMCAmJiBzdGF0dXNDb2RlIDw9IDI5OSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RGaW5hbFJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFRyYW5zYWN0aW9uU3RhdGUuQWNjZXB0ZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQocmVzcG9uc2UpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlcnJvciwgXCJGYWlsZWQgdG8gc2VuZCAyeHggcmVzcG9uc2UuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXaGlsZSBpbiB0aGUgXCJQcm9jZWVkaW5nXCIgc3RhdGUsIGlmIHRoZSBUVSBwYXNzZXMgYSByZXNwb25zZSB3aXRoXG4gICAgICAgICAgICAgICAgLy8gc3RhdHVzIGNvZGUgZnJvbSAzMDAgdG8gNjk5IHRvIHRoZSBzZXJ2ZXIgdHJhbnNhY3Rpb24sIHRoZSByZXNwb25zZVxuICAgICAgICAgICAgICAgIC8vIE1VU1QgYmUgcGFzc2VkIHRvIHRoZSB0cmFuc3BvcnQgbGF5ZXIgZm9yIHRyYW5zbWlzc2lvbiwgYW5kIHRoZSBzdGF0ZVxuICAgICAgICAgICAgICAgIC8vIG1hY2hpbmUgTVVTVCBlbnRlciB0aGUgXCJDb21wbGV0ZWRcIiBzdGF0ZS5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjIuMVxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID49IDMwMCAmJiBzdGF0dXNDb2RlIDw9IDY5OSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RGaW5hbFJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFRyYW5zYWN0aW9uU3RhdGUuQ29tcGxldGVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKHJlc3BvbnNlKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nVHJhbnNwb3J0RXJyb3IoZXJyb3IsIFwiRmFpbGVkIHRvIHNlbmQgbm9uLTJ4eCBmaW5hbCByZXNwb25zZS5cIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLkFjY2VwdGVkOlxuICAgICAgICAgICAgICAgIC8vIFdoaWxlIGluIHRoZSBcIkFjY2VwdGVkXCIgc3RhdGUsIGlmIHRoZSBUVSBwYXNzZXMgYSAyeHggcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlciB0cmFuc2FjdGlvbiBNVVNUIHBhc3MgdGhlIHJlc3BvbnNlIHRvIHRoZSB0cmFuc3BvcnQgbGF5ZXIgZm9yIHRyYW5zbWlzc2lvbi5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjAyNiNzZWN0aW9uLTguN1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID49IDIwMCAmJiBzdGF0dXNDb2RlIDw9IDI5OSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQocmVzcG9uc2UpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlcnJvciwgXCJGYWlsZWQgdG8gc2VuZCAyeHggcmVzcG9uc2UuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuQ29uZmlybWVkOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLlRlcm1pbmF0ZWQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSAke3RoaXMuc3RhdGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uIHJlY2VpdmVkIHVuZXhwZWN0ZWQgJHtzdGF0dXNDb2RlfSByZXNwb25zZSBmcm9tIFRVIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0uYDtcbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmFuc21pdCB0aGUgbGFzdCAyeHggcmVzcG9uc2UuIFRoaXMgaXMgYSBub29wIGlmIG5vdCBpbiB0aGUgXCJhY2NlcHRlZFwiIHN0YXRlLlxuICAgICAqL1xuICAgIHJldHJhbnNtaXRBY2NlcHRlZFJlc3BvbnNlKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5BY2NlcHRlZCAmJiB0aGlzLmxhc3RGaW5hbFJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmQodGhpcy5sYXN0RmluYWxSZXNwb25zZSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlcnJvciwgXCJGYWlsZWQgdG8gc2VuZCAyeHggcmVzcG9uc2UuXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlyc3QsIHRoZSBwcm9jZWR1cmVzIGluIFs0XSBhcmUgZm9sbG93ZWQsIHdoaWNoIGF0dGVtcHQgdG8gZGVsaXZlciB0aGUgcmVzcG9uc2UgdG8gYSBiYWNrdXAuXG4gICAgICogSWYgdGhvc2Ugc2hvdWxkIGFsbCBmYWlsLCBiYXNlZCBvbiB0aGUgZGVmaW5pdGlvbiBvZiBmYWlsdXJlIGluIFs0XSwgdGhlIHNlcnZlciB0cmFuc2FjdGlvbiBTSE9VTERcbiAgICAgKiBpbmZvcm0gdGhlIFRVIHRoYXQgYSBmYWlsdXJlIGhhcyBvY2N1cnJlZCwgYW5kIE1VU1QgcmVtYWluIGluIHRoZSBjdXJyZW50IHN0YXRlLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tOC44XG4gICAgICovXG4gICAgb25UcmFuc3BvcnRFcnJvcihlcnJvcikge1xuICAgICAgICBpZiAodGhpcy51c2VyLm9uVHJhbnNwb3J0RXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMudXNlci5vblRyYW5zcG9ydEVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogRm9yIGxvZ2dpbmcuICovXG4gICAgdHlwZVRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGUgYSBzdGF0ZSB0cmFuc2l0aW9uLlxuICAgICAqIEBwYXJhbSBuZXdTdGF0ZSAtIE5ldyBzdGF0ZS5cbiAgICAgKi9cbiAgICBzdGF0ZVRyYW5zaXRpb24obmV3U3RhdGUpIHtcbiAgICAgICAgLy8gQXNzZXJ0IHZhbGlkIHN0YXRlIHRyYW5zaXRpb25zLlxuICAgICAgICBjb25zdCBpbnZhbGlkU3RhdGVUcmFuc2l0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuc3RhdGV9IHRvICR7bmV3U3RhdGV9YCk7XG4gICAgICAgIH07XG4gICAgICAgIHN3aXRjaCAobmV3U3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nOlxuICAgICAgICAgICAgICAgIGludmFsaWRTdGF0ZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5BY2NlcHRlZDpcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQ6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFRyYW5zYWN0aW9uU3RhdGUuUHJvY2VlZGluZykge1xuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkU3RhdGVUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLkNvbmZpcm1lZDpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBUcmFuc2FjdGlvblN0YXRlLkFjY2VwdGVkICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgIT09IFRyYW5zYWN0aW9uU3RhdGUuQ29tcGxldGVkICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgIT09IFRyYW5zYWN0aW9uU3RhdGUuQ29uZmlybWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRTdGF0ZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGludmFsaWRTdGF0ZVRyYW5zaXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBPbiBhbnkgc3RhdGUgdHJhbnNpdGlvbiwgc3RvcCByZXNlbmRpbmcgcHJvdmlzaW9uYWwgcmVzcG9uc2VzXG4gICAgICAgIHRoaXMuc3RvcFByb2dyZXNzRXh0ZW5zaW9uVGltZXIoKTtcbiAgICAgICAgLy8gVGhlIHB1cnBvc2Ugb2YgdGhlIFwiQWNjZXB0ZWRcIiBzdGF0ZSBpcyB0byBhYnNvcmIgcmV0cmFuc21pc3Npb25zIG9mIGFuIGFjY2VwdGVkIElOVklURSByZXF1ZXN0LlxuICAgICAgICAvLyBBbnkgc3VjaCByZXRyYW5zbWlzc2lvbnMgYXJlIGFic29yYmVkIGVudGlyZWx5IHdpdGhpbiB0aGUgc2VydmVyIHRyYW5zYWN0aW9uLlxuICAgICAgICAvLyBUaGV5IGFyZSBub3QgcGFzc2VkIHVwIHRvIHRoZSBUVSBzaW5jZSBhbnkgZG93bnN0cmVhbSBVQVMgY29yZXMgdGhhdCBhY2NlcHRlZCB0aGUgcmVxdWVzdCBoYXZlXG4gICAgICAgIC8vIHRha2VuIHJlc3BvbnNpYmlsaXR5IGZvciByZWxpYWJpbGl0eSBhbmQgd2lsbCBhbHJlYWR5IHJldHJhbnNtaXQgdGhlaXIgMnh4IHJlc3BvbnNlcyBpZiBuZWNlc3NhcnkuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tOC43XG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5BY2NlcHRlZCkge1xuICAgICAgICAgICAgdGhpcy5MID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnRpbWVyTCgpLCBUaW1lcnMuVElNRVJfTCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiB0aGUgXCJDb21wbGV0ZWRcIiBzdGF0ZSBpcyBlbnRlcmVkLCB0aW1lciBIIE1VU1QgYmUgc2V0IHRvIGZpcmUgaW4gNjQqVDEgc2Vjb25kcyBmb3IgYWxsIHRyYW5zcG9ydHMuXG4gICAgICAgIC8vIFRpbWVyIEggZGV0ZXJtaW5lcyB3aGVuIHRoZSBzZXJ2ZXIgdHJhbnNhY3Rpb24gYWJhbmRvbnMgcmV0cmFuc21pdHRpbmcgdGhlIHJlc3BvbnNlLlxuICAgICAgICAvLyBJZiBhbiBBQ0sgaXMgcmVjZWl2ZWQgd2hpbGUgdGhlIHNlcnZlciB0cmFuc2FjdGlvbiBpcyBpbiB0aGUgXCJDb21wbGV0ZWRcIiBzdGF0ZSxcbiAgICAgICAgLy8gdGhlIHNlcnZlciB0cmFuc2FjdGlvbiBNVVNUIHRyYW5zaXRpb24gdG8gdGhlIFwiQ29uZmlybWVkXCIgc3RhdGUuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4xXG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQpIHtcbiAgICAgICAgICAgIC8vIEZJWE1FOiBNaXNzaW5nIHRpbWVyIEcgZm9yIHVucmVsaWFibGUgdHJhbnNwb3J0cy5cbiAgICAgICAgICAgIHRoaXMuSCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy50aW1lckgoKSwgVGltZXJzLlRJTUVSX0gpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBwdXJwb3NlIG9mIHRoZSBcIkNvbmZpcm1lZFwiIHN0YXRlIGlzIHRvIGFic29yYiBhbnkgYWRkaXRpb25hbCBBQ0sgbWVzc2FnZXMgdGhhdCBhcnJpdmUsXG4gICAgICAgIC8vIHRyaWdnZXJlZCBmcm9tIHJldHJhbnNtaXNzaW9ucyBvZiB0aGUgZmluYWwgcmVzcG9uc2UuIFdoZW4gdGhpcyBzdGF0ZSBpcyBlbnRlcmVkLCB0aW1lciBJXG4gICAgICAgIC8vIGlzIHNldCB0byBmaXJlIGluIFQ0IHNlY29uZHMgZm9yIHVucmVsaWFibGUgdHJhbnNwb3J0cywgYW5kIHplcm8gc2Vjb25kcyBmb3IgcmVsaWFibGVcbiAgICAgICAgLy8gdHJhbnNwb3J0cy4gT25jZSB0aW1lciBJIGZpcmVzLCB0aGUgc2VydmVyIE1VU1QgdHJhbnNpdGlvbiB0byB0aGUgXCJUZXJtaW5hdGVkXCIgc3RhdGUuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4xXG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5Db25maXJtZWQpIHtcbiAgICAgICAgICAgIC8vIEZJWE1FOiBUaGlzIHRpbWVyIGlzIG5vdCBnZXR0aW5nIHNldCBjb3JyZWN0bHkgZm9yIHVucmVsaWFibGUgdHJhbnNwb3J0cy5cbiAgICAgICAgICAgIHRoaXMuSSA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy50aW1lckkoKSwgVGltZXJzLlRJTUVSX0kpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE9uY2UgdGhlIHRyYW5zYWN0aW9uIGlzIGluIHRoZSBcIlRlcm1pbmF0ZWRcIiBzdGF0ZSwgaXQgTVVTVCBiZSBkZXN0cm95ZWQgaW1tZWRpYXRlbHkuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tOC43XG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgc3RhdGUuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGSVhNRTogVUFTIFByb3Zpc2lvbmFsIFJldHJhbnNtaXNzaW9uIFRpbWVyLiBTZWUgUkZDIDMyNjEgU2VjdGlvbiAxMy4zLjEuMVxuICAgICAqIFRoaXMgaXMgaW4gdGhlIHdyb25nIHBsYWNlLiBUaGlzIGlzIG5vdCBhIHRyYW5zYWN0aW9uIGxldmVsIHRoaW5nLiBJdCdzIGEgVUFTIGxldmVsIHRoaW5nLlxuICAgICAqL1xuICAgIHN0YXJ0UHJvZ3Jlc3NFeHRlbnNpb25UaW1lcigpIHtcbiAgICAgICAgLy8gU3RhcnQgdGhlIHByb2dyZXNzIGV4dGVuc2lvbiB0aW1lciBvbmx5IGZvciB0aGUgZmlyc3Qgbm9uLTEwMCBwcm92aXNpb25hbCByZXNwb25zZS5cbiAgICAgICAgaWYgKHRoaXMucHJvZ3Jlc3NFeHRlbnNpb25UaW1lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzRXh0ZW5zaW9uVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFByb2dyZXNzIGV4dGVuc2lvbiB0aW1lciBleHBpcmVkIGZvciBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxhc3RQcm92aXNpb25hbFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxhc3QgcHJvdmlzaW9uYWwgcmVzcG9uc2UgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kKHRoaXMubGFzdFByb3Zpc2lvbmFsUmVzcG9uc2UpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGVycm9yLCBcIkZhaWxlZCB0byBzZW5kIHJldHJhbnNtaXNzaW9uIG9mIHByb3Zpc2lvbmFsIHJlc3BvbnNlLlwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIFRpbWVycy5QUk9WSVNJT05BTF9SRVNQT05TRV9JTlRFUlZBTCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRklYTUU6IFVBUyBQcm92aXNpb25hbCBSZXRyYW5zbWlzc2lvbiBUaW1lciBpZC4gU2VlIFJGQyAzMjYxIFNlY3Rpb24gMTMuMy4xLjFcbiAgICAgKiBUaGlzIGlzIGluIHRoZSB3cm9uZyBwbGFjZS4gVGhpcyBpcyBub3QgYSB0cmFuc2FjdGlvbiBsZXZlbCB0aGluZy4gSXQncyBhIFVBUyBsZXZlbCB0aGluZy5cbiAgICAgKi9cbiAgICBzdG9wUHJvZ3Jlc3NFeHRlbnNpb25UaW1lcigpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvZ3Jlc3NFeHRlbnNpb25UaW1lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucHJvZ3Jlc3NFeHRlbnNpb25UaW1lcik7XG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzRXh0ZW5zaW9uVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hpbGUgaW4gdGhlIFwiUHJvY2VlZGluZ1wiIHN0YXRlLCBpZiB0aGUgVFUgcGFzc2VzIGEgcmVzcG9uc2Ugd2l0aCBzdGF0dXMgY29kZVxuICAgICAqIGZyb20gMzAwIHRvIDY5OSB0byB0aGUgc2VydmVyIHRyYW5zYWN0aW9uLCB0aGUgcmVzcG9uc2UgTVVTVCBiZSBwYXNzZWQgdG8gdGhlXG4gICAgICogdHJhbnNwb3J0IGxheWVyIGZvciB0cmFuc21pc3Npb24sIGFuZCB0aGUgc3RhdGUgbWFjaGluZSBNVVNUIGVudGVyIHRoZSBcIkNvbXBsZXRlZFwiIHN0YXRlLlxuICAgICAqIEZvciB1bnJlbGlhYmxlIHRyYW5zcG9ydHMsIHRpbWVyIEcgaXMgc2V0IHRvIGZpcmUgaW4gVDEgc2Vjb25kcywgYW5kIGlzIG5vdCBzZXQgdG8gZmlyZSBmb3JcbiAgICAgKiByZWxpYWJsZSB0cmFuc3BvcnRzLiBJZiB0aW1lciBHIGZpcmVzLCB0aGUgcmVzcG9uc2UgaXMgcGFzc2VkIHRvIHRoZSB0cmFuc3BvcnQgbGF5ZXIgb25jZVxuICAgICAqIG1vcmUgZm9yIHJldHJhbnNtaXNzaW9uLCBhbmQgdGltZXIgRyBpcyBzZXQgdG8gZmlyZSBpbiBNSU4oMipUMSwgVDIpIHNlY29uZHMuIEZyb20gdGhlbiBvbixcbiAgICAgKiB3aGVuIHRpbWVyIEcgZmlyZXMsIHRoZSByZXNwb25zZSBpcyBwYXNzZWQgdG8gdGhlIHRyYW5zcG9ydCBhZ2FpbiBmb3IgdHJhbnNtaXNzaW9uLCBhbmRcbiAgICAgKiB0aW1lciBHIGlzIHJlc2V0IHdpdGggYSB2YWx1ZSB0aGF0IGRvdWJsZXMsIHVubGVzcyB0aGF0IHZhbHVlIGV4Y2VlZHMgVDIsIGluIHdoaWNoIGNhc2VcbiAgICAgKiBpdCBpcyByZXNldCB3aXRoIHRoZSB2YWx1ZSBvZiBUMi5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjIuMVxuICAgICAqL1xuICAgIHRpbWVyRygpIHtcbiAgICAgICAgLy8gVE9ET1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aW1lciBIIGZpcmVzIHdoaWxlIGluIHRoZSBcIkNvbXBsZXRlZFwiIHN0YXRlLCBpdCBpbXBsaWVzIHRoYXQgdGhlIEFDSyB3YXMgbmV2ZXIgcmVjZWl2ZWQuXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgc2VydmVyIHRyYW5zYWN0aW9uIE1VU1QgdHJhbnNpdGlvbiB0byB0aGUgXCJUZXJtaW5hdGVkXCIgc3RhdGUsIGFuZCBNVVNUXG4gICAgICogaW5kaWNhdGUgdG8gdGhlIFRVIHRoYXQgYSB0cmFuc2FjdGlvbiBmYWlsdXJlIGhhcyBvY2N1cnJlZC5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjIuMVxuICAgICAqL1xuICAgIHRpbWVySCgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFRpbWVyIEggZXhwaXJlZCBmb3IgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAke3RoaXMuaWR9LmApO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJBQ0sgdG8gbmVnYXRpdmUgZmluYWwgcmVzcG9uc2Ugd2FzIG5ldmVyIHJlY2VpdmVkLCB0ZXJtaW5hdGluZyB0cmFuc2FjdGlvbi5cIik7XG4gICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihUcmFuc2FjdGlvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9uY2UgdGltZXIgSSBmaXJlcywgdGhlIHNlcnZlciBNVVNUIHRyYW5zaXRpb24gdG8gdGhlIFwiVGVybWluYXRlZFwiIHN0YXRlLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4xXG4gICAgICovXG4gICAgdGltZXJJKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgSSBleHBpcmVkIGZvciBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCk7XG4gICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFRyYW5zYWN0aW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZW4gVGltZXIgTCBmaXJlcyBhbmQgdGhlIHN0YXRlIG1hY2hpbmUgaXMgaW4gdGhlIFwiQWNjZXB0ZWRcIiBzdGF0ZSwgdGhlIG1hY2hpbmUgTVVTVFxuICAgICAqIHRyYW5zaXRpb24gdG8gdGhlIFwiVGVybWluYXRlZFwiIHN0YXRlLiBPbmNlIHRoZSB0cmFuc2FjdGlvbiBpcyBpbiB0aGUgXCJUZXJtaW5hdGVkXCIgc3RhdGUsXG4gICAgICogaXQgTVVTVCBiZSBkZXN0cm95ZWQgaW1tZWRpYXRlbHkuIFRpbWVyIEwgcmVmbGVjdHMgdGhlIGFtb3VudCBvZiB0aW1lIHRoZSBzZXJ2ZXJcbiAgICAgKiB0cmFuc2FjdGlvbiBjb3VsZCByZWNlaXZlIDJ4eCByZXNwb25zZXMgZm9yIHJldHJhbnNtaXNzaW9uIGZyb20gdGhlXG4gICAgICogVFUgd2hpbGUgaXQgaXMgd2FpdGluZyB0byByZWNlaXZlIGFuIEFDSy5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjAyNiNzZWN0aW9uLTcuMVxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tOC43XG4gICAgICovXG4gICAgdGltZXJMKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgTCBleHBpcmVkIGZvciBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLkFjY2VwdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihUcmFuc2FjdGlvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQywgTmFtZUFkZHJIZWFkZXIgfSBmcm9tIFwiLi4vbWVzc2FnZXNcIjtcbi8qKlxuICogRGlhbG9nLlxuICogQHJlbWFya3NcbiAqIEEga2V5IGNvbmNlcHQgZm9yIGEgdXNlciBhZ2VudCBpcyB0aGF0IG9mIGEgZGlhbG9nLiAgQSBkaWFsb2dcbiAqIHJlcHJlc2VudHMgYSBwZWVyLXRvLXBlZXIgU0lQIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHR3byB1c2VyIGFnZW50c1xuICogdGhhdCBwZXJzaXN0cyBmb3Igc29tZSB0aW1lLiAgVGhlIGRpYWxvZyBmYWNpbGl0YXRlcyBzZXF1ZW5jaW5nIG9mXG4gKiBtZXNzYWdlcyBiZXR3ZWVuIHRoZSB1c2VyIGFnZW50cyBhbmQgcHJvcGVyIHJvdXRpbmcgb2YgcmVxdWVzdHNcbiAqIGJldHdlZW4gYm90aCBvZiB0aGVtLiAgVGhlIGRpYWxvZyByZXByZXNlbnRzIGEgY29udGV4dCBpbiB3aGljaCB0b1xuICogaW50ZXJwcmV0IFNJUCBtZXNzYWdlcy5cbiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTJcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIERpYWxvZyB7XG4gICAgLyoqXG4gICAgICogRGlhbG9nIGNvbnN0cnVjdG9yLlxuICAgICAqIEBwYXJhbSBjb3JlIC0gVXNlciBhZ2VudCBjb3JlLlxuICAgICAqIEBwYXJhbSBkaWFsb2dTdGF0ZSAtIEluaXRpYWwgZGlhbG9nIHN0YXRlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvcmUsIGRpYWxvZ1N0YXRlKSB7XG4gICAgICAgIHRoaXMuY29yZSA9IGNvcmU7XG4gICAgICAgIHRoaXMuZGlhbG9nU3RhdGUgPSBkaWFsb2dTdGF0ZTtcbiAgICAgICAgdGhpcy5jb3JlLmRpYWxvZ3Muc2V0KHRoaXMuaWQsIHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGVuIGEgVUFDIHJlY2VpdmVzIGEgcmVzcG9uc2UgdGhhdCBlc3RhYmxpc2hlcyBhIGRpYWxvZywgaXRcbiAgICAgKiBjb25zdHJ1Y3RzIHRoZSBzdGF0ZSBvZiB0aGUgZGlhbG9nLiAgVGhpcyBzdGF0ZSBNVVNUIGJlIG1haW50YWluZWRcbiAgICAgKiBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBkaWFsb2cuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4xLjJcbiAgICAgKiBAcGFyYW0gb3V0Z29pbmdSZXF1ZXN0TWVzc2FnZSAtIE91dGdvaW5nIHJlcXVlc3QgbWVzc2FnZSBmb3IgZGlhbG9nLlxuICAgICAqIEBwYXJhbSBpbmNvbWluZ1Jlc3BvbnNlTWVzc2FnZSAtIEluY29taW5nIHJlc3BvbnNlIG1lc3NhZ2UgY3JlYXRpbmcgZGlhbG9nLlxuICAgICAqL1xuICAgIHN0YXRpYyBpbml0aWFsRGlhbG9nU3RhdGVGb3JVc2VyQWdlbnRDbGllbnQob3V0Z29pbmdSZXF1ZXN0TWVzc2FnZSwgaW5jb21pbmdSZXNwb25zZU1lc3NhZ2UpIHtcbiAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3Qgd2FzIHNlbnQgb3ZlciBUTFMsIGFuZCB0aGUgUmVxdWVzdC1VUkkgY29udGFpbmVkIGFcbiAgICAgICAgLy8gU0lQUyBVUkksIHRoZSBcInNlY3VyZVwiIGZsYWcgaXMgc2V0IHRvIFRSVUUuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMS4yXG4gICAgICAgIGNvbnN0IHNlY3VyZSA9IGZhbHNlOyAvLyBGSVhNRTogQ3VycmVudGx5IG5vIHN1cHBvcnQgZm9yIFRMUy5cbiAgICAgICAgLy8gVGhlIHJvdXRlIHNldCBNVVNUIGJlIHNldCB0byB0aGUgbGlzdCBvZiBVUklzIGluIHRoZSBSZWNvcmQtUm91dGVcbiAgICAgICAgLy8gaGVhZGVyIGZpZWxkIGZyb20gdGhlIHJlc3BvbnNlLCB0YWtlbiBpbiByZXZlcnNlIG9yZGVyIGFuZCBwcmVzZXJ2aW5nXG4gICAgICAgIC8vIGFsbCBVUkkgcGFyYW1ldGVycy4gIElmIG5vIFJlY29yZC1Sb3V0ZSBoZWFkZXIgZmllbGQgaXMgcHJlc2VudCBpblxuICAgICAgICAvLyB0aGUgcmVzcG9uc2UsIHRoZSByb3V0ZSBzZXQgTVVTVCBiZSBzZXQgdG8gdGhlIGVtcHR5IHNldC4gIFRoaXMgcm91dGVcbiAgICAgICAgLy8gc2V0LCBldmVuIGlmIGVtcHR5LCBvdmVycmlkZXMgYW55IHByZS1leGlzdGluZyByb3V0ZSBzZXQgZm9yIGZ1dHVyZVxuICAgICAgICAvLyByZXF1ZXN0cyBpbiB0aGlzIGRpYWxvZy4gIFRoZSByZW1vdGUgdGFyZ2V0IE1VU1QgYmUgc2V0IHRvIHRoZSBVUklcbiAgICAgICAgLy8gZnJvbSB0aGUgQ29udGFjdCBoZWFkZXIgZmllbGQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjEuMlxuICAgICAgICBjb25zdCByb3V0ZVNldCA9IGluY29taW5nUmVzcG9uc2VNZXNzYWdlLmdldEhlYWRlcnMoXCJyZWNvcmQtcm91dGVcIikucmV2ZXJzZSgpO1xuICAgICAgICAvLyBXaGVuIGEgVUFTIHJlc3BvbmRzIHRvIGEgcmVxdWVzdCB3aXRoIGEgcmVzcG9uc2UgdGhhdCBlc3RhYmxpc2hlcyBhXG4gICAgICAgIC8vIGRpYWxvZyAoc3VjaCBhcyBhIDJ4eCB0byBJTlZJVEUpLCB0aGUgVUFTIE1VU1QgY29weSBhbGwgUmVjb3JkLVJvdXRlXG4gICAgICAgIC8vIGhlYWRlciBmaWVsZCB2YWx1ZXMgZnJvbSB0aGUgcmVxdWVzdCBpbnRvIHRoZSByZXNwb25zZSAoaW5jbHVkaW5nIHRoZVxuICAgICAgICAvLyBVUklzLCBVUkkgcGFyYW1ldGVycywgYW5kIGFueSBSZWNvcmQtUm91dGUgaGVhZGVyIGZpZWxkIHBhcmFtZXRlcnMsXG4gICAgICAgIC8vIHdoZXRoZXIgdGhleSBhcmUga25vd24gb3IgdW5rbm93biB0byB0aGUgVUFTKSBhbmQgTVVTVCBtYWludGFpbiB0aGVcbiAgICAgICAgLy8gb3JkZXIgb2YgdGhvc2UgdmFsdWVzLiAgVGhlIFVBUyBNVVNUIGFkZCBhIENvbnRhY3QgaGVhZGVyIGZpZWxkIHRvXG4gICAgICAgIC8vIHRoZSByZXNwb25zZS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4xLjFcbiAgICAgICAgY29uc3QgY29udGFjdCA9IGluY29taW5nUmVzcG9uc2VNZXNzYWdlLnBhcnNlSGVhZGVyKFwiY29udGFjdFwiKTtcbiAgICAgICAgaWYgKCFjb250YWN0KSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBSZXZpZXcgdG8gbWFrZSBzdXJlIHRoaXMgd2lsbCBuZXZlciBoYXBwZW5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRhY3QgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShjb250YWN0IGluc3RhbmNlb2YgTmFtZUFkZHJIZWFkZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250YWN0IG5vdCBpbnN0YW5jZSBvZiBOYW1lQWRkckhlYWRlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3RlVGFyZ2V0ID0gY29udGFjdC51cmk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzZXF1ZW5jZSBudW1iZXIgTVVTVCBiZSBzZXQgdG8gdGhlIHZhbHVlIG9mIHRoZSBzZXF1ZW5jZVxuICAgICAgICAvLyBudW1iZXIgaW4gdGhlIENTZXEgaGVhZGVyIGZpZWxkIG9mIHRoZSByZXF1ZXN0LiAgVGhlIHJlbW90ZSBzZXF1ZW5jZVxuICAgICAgICAvLyBudW1iZXIgTVVTVCBiZSBlbXB0eSAoaXQgaXMgZXN0YWJsaXNoZWQgd2hlbiB0aGUgcmVtb3RlIFVBIHNlbmRzIGFcbiAgICAgICAgLy8gcmVxdWVzdCB3aXRoaW4gdGhlIGRpYWxvZykuICBUaGUgY2FsbCBpZGVudGlmaWVyIGNvbXBvbmVudCBvZiB0aGVcbiAgICAgICAgLy8gZGlhbG9nIElEIE1VU1QgYmUgc2V0IHRvIHRoZSB2YWx1ZSBvZiB0aGUgQ2FsbC1JRCBpbiB0aGUgcmVxdWVzdC5cbiAgICAgICAgLy8gVGhlIGxvY2FsIHRhZyBjb21wb25lbnQgb2YgdGhlIGRpYWxvZyBJRCBNVVNUIGJlIHNldCB0byB0aGUgdGFnIGluXG4gICAgICAgIC8vIHRoZSBGcm9tIGZpZWxkIGluIHRoZSByZXF1ZXN0LCBhbmQgdGhlIHJlbW90ZSB0YWcgY29tcG9uZW50IG9mIHRoZVxuICAgICAgICAvLyBkaWFsb2cgSUQgTVVTVCBiZSBzZXQgdG8gdGhlIHRhZyBpbiB0aGUgVG8gZmllbGQgb2YgdGhlIHJlc3BvbnNlLiAgQVxuICAgICAgICAvLyBVQUMgTVVTVCBiZSBwcmVwYXJlZCB0byByZWNlaXZlIGEgcmVzcG9uc2Ugd2l0aG91dCBhIHRhZyBpbiB0aGUgVG9cbiAgICAgICAgLy8gZmllbGQsIGluIHdoaWNoIGNhc2UgdGhlIHRhZyBpcyBjb25zaWRlcmVkIHRvIGhhdmUgYSB2YWx1ZSBvZiBudWxsLlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBUaGlzIGlzIHRvIG1haW50YWluIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggUkZDIDI1NDMsIHdoaWNoXG4gICAgICAgIC8vICAgIGRpZCBub3QgbWFuZGF0ZSBUbyB0YWdzLlxuICAgICAgICAvL1xuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjEuMlxuICAgICAgICBjb25zdCBsb2NhbFNlcXVlbmNlTnVtYmVyID0gb3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5jc2VxO1xuICAgICAgICBjb25zdCByZW1vdGVTZXF1ZW5jZU51bWJlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgY2FsbElkID0gb3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5jYWxsSWQ7XG4gICAgICAgIGNvbnN0IGxvY2FsVGFnID0gb3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5mcm9tVGFnO1xuICAgICAgICBjb25zdCByZW1vdGVUYWcgPSBpbmNvbWluZ1Jlc3BvbnNlTWVzc2FnZS50b1RhZztcbiAgICAgICAgaWYgKCFjYWxsSWQpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IFJldmlldyB0byBtYWtlIHN1cmUgdGhpcyB3aWxsIG5ldmVyIGhhcHBlblxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FsbCBpZCB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbG9jYWxUYWcpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IFJldmlldyB0byBtYWtlIHN1cmUgdGhpcyB3aWxsIG5ldmVyIGhhcHBlblxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnJvbSB0YWcgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlbW90ZVRhZykge1xuICAgICAgICAgICAgLy8gVE9ETzogUmV2aWV3IHRvIG1ha2Ugc3VyZSB0aGlzIHdpbGwgbmV2ZXIgaGFwcGVuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUbyB0YWcgdW5kZWZpbmVkLlwiKTsgLy8gRklYTUU6IE5vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggUkZDIDI1NDNcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgcmVtb3RlIFVSSSBNVVNUIGJlIHNldCB0byB0aGUgVVJJIGluIHRoZSBUbyBmaWVsZCwgYW5kIHRoZSBsb2NhbFxuICAgICAgICAvLyBVUkkgTVVTVCBiZSBzZXQgdG8gdGhlIFVSSSBpbiB0aGUgRnJvbSBmaWVsZC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4xLjJcbiAgICAgICAgaWYgKCFvdXRnb2luZ1JlcXVlc3RNZXNzYWdlLmZyb20pIHtcbiAgICAgICAgICAgIC8vIFRPRE86IFJldmlldyB0byBtYWtlIHN1cmUgdGhpcyB3aWxsIG5ldmVyIGhhcHBlblxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnJvbSB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS50bykge1xuICAgICAgICAgICAgLy8gVE9ETzogUmV2aWV3IHRvIG1ha2Ugc3VyZSB0aGlzIHdpbGwgbmV2ZXIgaGFwcGVuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUbyB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2FsVVJJID0gb3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5mcm9tLnVyaTtcbiAgICAgICAgY29uc3QgcmVtb3RlVVJJID0gb3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS50by51cmk7XG4gICAgICAgIC8vIEEgZGlhbG9nIGNhbiBhbHNvIGJlIGluIHRoZSBcImVhcmx5XCIgc3RhdGUsIHdoaWNoIG9jY3VycyB3aGVuIGl0IGlzXG4gICAgICAgIC8vIGNyZWF0ZWQgd2l0aCBhIHByb3Zpc2lvbmFsIHJlc3BvbnNlLCBhbmQgdGhlbiB0cmFuc2l0aW9uIHRvIHRoZVxuICAgICAgICAvLyBcImNvbmZpcm1lZFwiIHN0YXRlIHdoZW4gYSAyeHggZmluYWwgcmVzcG9uc2UgYXJyaXZlcy5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMlxuICAgICAgICBpZiAoIWluY29taW5nUmVzcG9uc2VNZXNzYWdlLnN0YXR1c0NvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29taW5nIHJlc3BvbnNlIHN0YXR1cyBjb2RlIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWFybHkgPSBpbmNvbWluZ1Jlc3BvbnNlTWVzc2FnZS5zdGF0dXNDb2RlIDwgMjAwID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICBjb25zdCBkaWFsb2dTdGF0ZSA9IHtcbiAgICAgICAgICAgIGlkOiBjYWxsSWQgKyBsb2NhbFRhZyArIHJlbW90ZVRhZyxcbiAgICAgICAgICAgIGVhcmx5LFxuICAgICAgICAgICAgY2FsbElkLFxuICAgICAgICAgICAgbG9jYWxUYWcsXG4gICAgICAgICAgICByZW1vdGVUYWcsXG4gICAgICAgICAgICBsb2NhbFNlcXVlbmNlTnVtYmVyLFxuICAgICAgICAgICAgcmVtb3RlU2VxdWVuY2VOdW1iZXIsXG4gICAgICAgICAgICBsb2NhbFVSSSxcbiAgICAgICAgICAgIHJlbW90ZVVSSSxcbiAgICAgICAgICAgIHJlbW90ZVRhcmdldCxcbiAgICAgICAgICAgIHJvdXRlU2V0LFxuICAgICAgICAgICAgc2VjdXJlXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkaWFsb2dTdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIFVBUyB0aGVuIGNvbnN0cnVjdHMgdGhlIHN0YXRlIG9mIHRoZSBkaWFsb2cuICBUaGlzIHN0YXRlIE1VU1QgYmVcbiAgICAgKiBtYWludGFpbmVkIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGRpYWxvZy5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjEuMVxuICAgICAqIEBwYXJhbSBpbmNvbWluZ1JlcXVlc3RNZXNzYWdlIC0gSW5jb21pbmcgcmVxdWVzdCBtZXNzYWdlIGNyZWF0aW5nIGRpYWxvZy5cbiAgICAgKiBAcGFyYW0gdG9UYWcgLSBUYWcgaW4gdGhlIFRvIGZpZWxkIGluIHRoZSByZXNwb25zZSB0byB0aGUgaW5jb21pbmcgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgaW5pdGlhbERpYWxvZ1N0YXRlRm9yVXNlckFnZW50U2VydmVyKGluY29taW5nUmVxdWVzdE1lc3NhZ2UsIHRvVGFnLCBlYXJseSA9IGZhbHNlKSB7XG4gICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGFycml2ZWQgb3ZlciBUTFMsIGFuZCB0aGUgUmVxdWVzdC1VUkkgY29udGFpbmVkIGEgU0lQU1xuICAgICAgICAvLyBVUkksIHRoZSBcInNlY3VyZVwiIGZsYWcgaXMgc2V0IHRvIFRSVUUuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMS4xXG4gICAgICAgIGNvbnN0IHNlY3VyZSA9IGZhbHNlOyAvLyBGSVhNRTogQ3VycmVudGx5IG5vIHN1cHBvcnQgZm9yIFRMUy5cbiAgICAgICAgLy8gVGhlIHJvdXRlIHNldCBNVVNUIGJlIHNldCB0byB0aGUgbGlzdCBvZiBVUklzIGluIHRoZSBSZWNvcmQtUm91dGVcbiAgICAgICAgLy8gaGVhZGVyIGZpZWxkIGZyb20gdGhlIHJlcXVlc3QsIHRha2VuIGluIG9yZGVyIGFuZCBwcmVzZXJ2aW5nIGFsbCBVUklcbiAgICAgICAgLy8gcGFyYW1ldGVycy4gIElmIG5vIFJlY29yZC1Sb3V0ZSBoZWFkZXIgZmllbGQgaXMgcHJlc2VudCBpbiB0aGVcbiAgICAgICAgLy8gcmVxdWVzdCwgdGhlIHJvdXRlIHNldCBNVVNUIGJlIHNldCB0byB0aGUgZW1wdHkgc2V0LiAgVGhpcyByb3V0ZSBzZXQsXG4gICAgICAgIC8vIGV2ZW4gaWYgZW1wdHksIG92ZXJyaWRlcyBhbnkgcHJlLWV4aXN0aW5nIHJvdXRlIHNldCBmb3IgZnV0dXJlXG4gICAgICAgIC8vIHJlcXVlc3RzIGluIHRoaXMgZGlhbG9nLiAgVGhlIHJlbW90ZSB0YXJnZXQgTVVTVCBiZSBzZXQgdG8gdGhlIFVSSVxuICAgICAgICAvLyBmcm9tIHRoZSBDb250YWN0IGhlYWRlciBmaWVsZCBvZiB0aGUgcmVxdWVzdC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4xLjFcbiAgICAgICAgY29uc3Qgcm91dGVTZXQgPSBpbmNvbWluZ1JlcXVlc3RNZXNzYWdlLmdldEhlYWRlcnMoXCJyZWNvcmQtcm91dGVcIik7XG4gICAgICAgIGNvbnN0IGNvbnRhY3QgPSBpbmNvbWluZ1JlcXVlc3RNZXNzYWdlLnBhcnNlSGVhZGVyKFwiY29udGFjdFwiKTtcbiAgICAgICAgaWYgKCFjb250YWN0KSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBSZXZpZXcgdG8gbWFrZSBzdXJlIHRoaXMgd2lsbCBuZXZlciBoYXBwZW5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRhY3QgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShjb250YWN0IGluc3RhbmNlb2YgTmFtZUFkZHJIZWFkZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250YWN0IG5vdCBpbnN0YW5jZSBvZiBOYW1lQWRkckhlYWRlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3RlVGFyZ2V0ID0gY29udGFjdC51cmk7XG4gICAgICAgIC8vIFRoZSByZW1vdGUgc2VxdWVuY2UgbnVtYmVyIE1VU1QgYmUgc2V0IHRvIHRoZSB2YWx1ZSBvZiB0aGUgc2VxdWVuY2VcbiAgICAgICAgLy8gbnVtYmVyIGluIHRoZSBDU2VxIGhlYWRlciBmaWVsZCBvZiB0aGUgcmVxdWVzdC4gIFRoZSBsb2NhbCBzZXF1ZW5jZVxuICAgICAgICAvLyBudW1iZXIgTVVTVCBiZSBlbXB0eS4gIFRoZSBjYWxsIGlkZW50aWZpZXIgY29tcG9uZW50IG9mIHRoZSBkaWFsb2cgSURcbiAgICAgICAgLy8gTVVTVCBiZSBzZXQgdG8gdGhlIHZhbHVlIG9mIHRoZSBDYWxsLUlEIGluIHRoZSByZXF1ZXN0LiAgVGhlIGxvY2FsXG4gICAgICAgIC8vIHRhZyBjb21wb25lbnQgb2YgdGhlIGRpYWxvZyBJRCBNVVNUIGJlIHNldCB0byB0aGUgdGFnIGluIHRoZSBUbyBmaWVsZFxuICAgICAgICAvLyBpbiB0aGUgcmVzcG9uc2UgdG8gdGhlIHJlcXVlc3QgKHdoaWNoIGFsd2F5cyBpbmNsdWRlcyBhIHRhZyksIGFuZCB0aGVcbiAgICAgICAgLy8gcmVtb3RlIHRhZyBjb21wb25lbnQgb2YgdGhlIGRpYWxvZyBJRCBNVVNUIGJlIHNldCB0byB0aGUgdGFnIGZyb20gdGhlXG4gICAgICAgIC8vIEZyb20gZmllbGQgaW4gdGhlIHJlcXVlc3QuICBBIFVBUyBNVVNUIGJlIHByZXBhcmVkIHRvIHJlY2VpdmUgYVxuICAgICAgICAvLyByZXF1ZXN0IHdpdGhvdXQgYSB0YWcgaW4gdGhlIEZyb20gZmllbGQsIGluIHdoaWNoIGNhc2UgdGhlIHRhZyBpc1xuICAgICAgICAvLyBjb25zaWRlcmVkIHRvIGhhdmUgYSB2YWx1ZSBvZiBudWxsLlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBUaGlzIGlzIHRvIG1haW50YWluIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggUkZDIDI1NDMsIHdoaWNoXG4gICAgICAgIC8vICAgIGRpZCBub3QgbWFuZGF0ZSBGcm9tIHRhZ3MuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMS4xXG4gICAgICAgIGNvbnN0IHJlbW90ZVNlcXVlbmNlTnVtYmVyID0gaW5jb21pbmdSZXF1ZXN0TWVzc2FnZS5jc2VxO1xuICAgICAgICBjb25zdCBsb2NhbFNlcXVlbmNlTnVtYmVyID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBjYWxsSWQgPSBpbmNvbWluZ1JlcXVlc3RNZXNzYWdlLmNhbGxJZDtcbiAgICAgICAgY29uc3QgbG9jYWxUYWcgPSB0b1RhZztcbiAgICAgICAgY29uc3QgcmVtb3RlVGFnID0gaW5jb21pbmdSZXF1ZXN0TWVzc2FnZS5mcm9tVGFnO1xuICAgICAgICAvLyBUaGUgcmVtb3RlIFVSSSBNVVNUIGJlIHNldCB0byB0aGUgVVJJIGluIHRoZSBGcm9tIGZpZWxkLCBhbmQgdGhlXG4gICAgICAgIC8vIGxvY2FsIFVSSSBNVVNUIGJlIHNldCB0byB0aGUgVVJJIGluIHRoZSBUbyBmaWVsZC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4xLjFcbiAgICAgICAgY29uc3QgcmVtb3RlVVJJID0gaW5jb21pbmdSZXF1ZXN0TWVzc2FnZS5mcm9tLnVyaTtcbiAgICAgICAgY29uc3QgbG9jYWxVUkkgPSBpbmNvbWluZ1JlcXVlc3RNZXNzYWdlLnRvLnVyaTtcbiAgICAgICAgY29uc3QgZGlhbG9nU3RhdGUgPSB7XG4gICAgICAgICAgICBpZDogY2FsbElkICsgbG9jYWxUYWcgKyByZW1vdGVUYWcsXG4gICAgICAgICAgICBlYXJseSxcbiAgICAgICAgICAgIGNhbGxJZCxcbiAgICAgICAgICAgIGxvY2FsVGFnLFxuICAgICAgICAgICAgcmVtb3RlVGFnLFxuICAgICAgICAgICAgbG9jYWxTZXF1ZW5jZU51bWJlcixcbiAgICAgICAgICAgIHJlbW90ZVNlcXVlbmNlTnVtYmVyLFxuICAgICAgICAgICAgbG9jYWxVUkksXG4gICAgICAgICAgICByZW1vdGVVUkksXG4gICAgICAgICAgICByZW1vdGVUYXJnZXQsXG4gICAgICAgICAgICByb3V0ZVNldCxcbiAgICAgICAgICAgIHNlY3VyZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlhbG9nU3RhdGU7XG4gICAgfVxuICAgIC8qKiBEZXN0cnVjdG9yLiAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuY29yZS5kaWFsb2dzLmRlbGV0ZSh0aGlzLmlkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBkaWFsb2cgaXMgaWRlbnRpZmllZCBhdCBlYWNoIFVBIHdpdGggYSBkaWFsb2cgSUQsIHdoaWNoIGNvbnNpc3RzIG9mXG4gICAgICogYSBDYWxsLUlEIHZhbHVlLCBhIGxvY2FsIHRhZyBhbmQgYSByZW1vdGUgdGFnLiAgVGhlIGRpYWxvZyBJRCBhdCBlYWNoXG4gICAgICogVUEgaW52b2x2ZWQgaW4gdGhlIGRpYWxvZyBpcyBub3QgdGhlIHNhbWUuICBTcGVjaWZpY2FsbHksIHRoZSBsb2NhbFxuICAgICAqIHRhZyBhdCBvbmUgVUEgaXMgaWRlbnRpY2FsIHRvIHRoZSByZW1vdGUgdGFnIGF0IHRoZSBwZWVyIFVBLiAgVGhlXG4gICAgICogdGFncyBhcmUgb3BhcXVlIHRva2VucyB0aGF0IGZhY2lsaXRhdGUgdGhlIGdlbmVyYXRpb24gb2YgdW5pcXVlXG4gICAgICogZGlhbG9nIElEcy5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyXG4gICAgICovXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5pZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBkaWFsb2cgY2FuIGFsc28gYmUgaW4gdGhlIFwiZWFybHlcIiBzdGF0ZSwgd2hpY2ggb2NjdXJzIHdoZW4gaXQgaXNcbiAgICAgKiBjcmVhdGVkIHdpdGggYSBwcm92aXNpb25hbCByZXNwb25zZSwgYW5kIHRoZW4gaXQgdHJhbnNpdGlvbiB0byB0aGVcbiAgICAgKiBcImNvbmZpcm1lZFwiIHN0YXRlIHdoZW4gYSAyeHggZmluYWwgcmVzcG9uc2UgcmVjZWl2ZWQgb3IgaXMgc2VudC5cbiAgICAgKlxuICAgICAqIE5vdGU6IFJGQyAzMjYxIGlzIGNvbmNpc2Ugb24gd2hlbiBhIGRpYWxvZyBpcyBcImNvbmZpcm1lZFwiLCBidXQgaXRcbiAgICAgKiBjYW4gYmUgYSBwb2ludCBvZiBjb25mdXNpb24gaWYgYW4gSU5WSVRFIGRpYWxvZyBpcyBcImNvbmZpcm1lZFwiIGFmdGVyXG4gICAgICogYSAyeHggaXMgc2VudCBvciBhZnRlciByZWNlaXZpbmcgdGhlIEFDSyBmb3IgdGhlIDJ4eCByZXNwb25zZS5cbiAgICAgKiBXaXRoIGNhcmVmdWwgcmVhZGluZyBpdCBjYW4gYmUgaW5mZXJyZWQgYSBkaWFsb2cgaXMgYWx3YXlzIGlzXG4gICAgICogXCJjb25maXJtZWRcIiB3aGVuIHRoZSAyeHggaXMgc2VudCAocmVnYXJkbGVzcyBvZiB0eXBlIG9mIGRpYWxvZykuXG4gICAgICogSG93ZXZlciBhIElOVklURSBkaWFsb2cgZG9lcyBoYXZlIGFkZGl0aW9uYWwgY29uc2lkZXJhdGlvbnNcbiAgICAgKiB3aGVuIGl0IGlzIGNvbmZpcm1lZCBidXQgYW4gQUNLIGhhcyBub3QgeWV0IGJlZW4gcmVjZWl2ZWQgKGluXG4gICAgICogcGFydGljdWxhciB3aXRoIHJlZ2FyZCB0byBhIGNhbGxlZSBzZW5kaW5nIEJZRSByZXF1ZXN0cykuXG4gICAgICovXG4gICAgZ2V0IGVhcmx5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5lYXJseTtcbiAgICB9XG4gICAgLyoqIENhbGwgaWRlbnRpZmllciBjb21wb25lbnQgb2YgdGhlIGRpYWxvZyBpZC4gKi9cbiAgICBnZXQgY2FsbElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5jYWxsSWQ7XG4gICAgfVxuICAgIC8qKiBMb2NhbCB0YWcgY29tcG9uZW50IG9mIHRoZSBkaWFsb2cgaWQuICovXG4gICAgZ2V0IGxvY2FsVGFnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFRhZztcbiAgICB9XG4gICAgLyoqIFJlbW90ZSB0YWcgY29tcG9uZW50IG9mIHRoZSBkaWFsb2cgaWQuICovXG4gICAgZ2V0IHJlbW90ZVRhZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUucmVtb3RlVGFnO1xuICAgIH1cbiAgICAvKiogTG9jYWwgc2VxdWVuY2UgbnVtYmVyICh1c2VkIHRvIG9yZGVyIHJlcXVlc3RzIGZyb20gdGhlIFVBIHRvIGl0cyBwZWVyKS4gKi9cbiAgICBnZXQgbG9jYWxTZXF1ZW5jZU51bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUubG9jYWxTZXF1ZW5jZU51bWJlcjtcbiAgICB9XG4gICAgLyoqIFJlbW90ZSBzZXF1ZW5jZSBudW1iZXIgKHVzZWQgdG8gb3JkZXIgcmVxdWVzdHMgZnJvbSBpdHMgcGVlciB0byB0aGUgVUEpLiAqL1xuICAgIGdldCByZW1vdGVTZXF1ZW5jZU51bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUucmVtb3RlU2VxdWVuY2VOdW1iZXI7XG4gICAgfVxuICAgIC8qKiBMb2NhbCBVUkkuICovXG4gICAgZ2V0IGxvY2FsVVJJKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFVSSTtcbiAgICB9XG4gICAgLyoqIFJlbW90ZSBVUkkuICovXG4gICAgZ2V0IHJlbW90ZVVSSSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUucmVtb3RlVVJJO1xuICAgIH1cbiAgICAvKiogUmVtb3RlIHRhcmdldC4gKi9cbiAgICBnZXQgcmVtb3RlVGFyZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5yZW1vdGVUYXJnZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJvdXRlIHNldCwgd2hpY2ggaXMgYW4gb3JkZXJlZCBsaXN0IG9mIFVSSXMuIFRoZSByb3V0ZSBzZXQgaXMgdGhlXG4gICAgICogbGlzdCBvZiBzZXJ2ZXJzIHRoYXQgbmVlZCB0byBiZSB0cmF2ZXJzZWQgdG8gc2VuZCBhIHJlcXVlc3QgdG8gdGhlIHBlZXIuXG4gICAgICovXG4gICAgZ2V0IHJvdXRlU2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5yb3V0ZVNldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdGhlIHJlcXVlc3Qgd2FzIHNlbnQgb3ZlciBUTFMsIGFuZCB0aGUgUmVxdWVzdC1VUkkgY29udGFpbmVkXG4gICAgICogYSBTSVBTIFVSSSwgdGhlIFwic2VjdXJlXCIgZmxhZyBpcyBzZXQgdG8gdHJ1ZS4gKk5PVCBJTVBMRU1FTlRFRCpcbiAgICAgKi9cbiAgICBnZXQgc2VjdXJlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5zZWN1cmU7XG4gICAgfVxuICAgIC8qKiBUaGUgdXNlciBhZ2VudCBjb3JlIHNlcnZpY2luZyB0aGlzIGRpYWxvZy4gKi9cbiAgICBnZXQgdXNlckFnZW50Q29yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29yZTtcbiAgICB9XG4gICAgLyoqIENvbmZpcm0gdGhlIGRpYWxvZy4gT25seSBtYXR0ZXJzIGlmIGRpYWxvZyBpcyBjdXJyZW50bHkgZWFybHkuICovXG4gICAgY29uZmlybSgpIHtcbiAgICAgICAgdGhpcy5kaWFsb2dTdGF0ZS5lYXJseSA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0cyBzZW50IHdpdGhpbiBhIGRpYWxvZywgYXMgYW55IG90aGVyIHJlcXVlc3RzLCBhcmUgYXRvbWljLiAgSWZcbiAgICAgKiBhIHBhcnRpY3VsYXIgcmVxdWVzdCBpcyBhY2NlcHRlZCBieSB0aGUgVUFTLCBhbGwgdGhlIHN0YXRlIGNoYW5nZXNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggaXQgYXJlIHBlcmZvcm1lZC4gIElmIHRoZSByZXF1ZXN0IGlzIHJlamVjdGVkLCBub25lXG4gICAgICogb2YgdGhlIHN0YXRlIGNoYW5nZXMgYXJlIHBlcmZvcm1lZC5cbiAgICAgKlxuICAgICAqICAgIE5vdGUgdGhhdCBzb21lIHJlcXVlc3RzLCBzdWNoIGFzIElOVklURXMsIGFmZmVjdCBzZXZlcmFsIHBpZWNlcyBvZlxuICAgICAqICAgIHN0YXRlLlxuICAgICAqXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4yLjJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIEluY29taW5nIHJlcXVlc3QgbWVzc2FnZSB3aXRoaW4gdGhpcyBkaWFsb2cuXG4gICAgICovXG4gICAgcmVjZWl2ZVJlcXVlc3QobWVzc2FnZSkge1xuICAgICAgICAvLyBBQ0sgZ3VhcmQuXG4gICAgICAgIC8vIEJ5IGNvbnZlbnRpb24sIHRoZSBoYW5kbGluZyBvZiBBQ0tzIGlzIHRoZSByZXNwb25zaWJpbGl0eVxuICAgICAgICAvLyB0aGUgcGFydGljdWxhciBkaWFsb2cgaW1wbGVtZW50YXRpb24uIEZvciBleGFtcGxlLCBzZWUgU2Vzc2lvbkRpYWxvZy5cbiAgICAgICAgLy8gRnVydGhlcm1vcmUsIEFDS3MgaGF2ZSBzYW1lIHNlcXVlbmNlIG51bWJlciBhcyB0aGUgYXNzb2NpYXRlZCBJTlZJVEUuXG4gICAgICAgIGlmIChtZXNzYWdlLm1ldGhvZCA9PT0gQy5BQ0spIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgcmVtb3RlIHNlcXVlbmNlIG51bWJlciB3YXMgbm90IGVtcHR5LCBidXQgdGhlIHNlcXVlbmNlIG51bWJlclxuICAgICAgICAvLyBvZiB0aGUgcmVxdWVzdCBpcyBsb3dlciB0aGFuIHRoZSByZW1vdGUgc2VxdWVuY2UgbnVtYmVyLCB0aGUgcmVxdWVzdFxuICAgICAgICAvLyBpcyBvdXQgb2Ygb3JkZXIgYW5kIE1VU1QgYmUgcmVqZWN0ZWQgd2l0aCBhIDUwMCAoU2VydmVyIEludGVybmFsXG4gICAgICAgIC8vIEVycm9yKSByZXNwb25zZS4gIElmIHRoZSByZW1vdGUgc2VxdWVuY2UgbnVtYmVyIHdhcyBub3QgZW1wdHksIGFuZFxuICAgICAgICAvLyB0aGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSByZXF1ZXN0IGlzIGdyZWF0ZXIgdGhhbiB0aGUgcmVtb3RlXG4gICAgICAgIC8vIHNlcXVlbmNlIG51bWJlciwgdGhlIHJlcXVlc3QgaXMgaW4gb3JkZXIuICBJdCBpcyBwb3NzaWJsZSBmb3IgdGhlXG4gICAgICAgIC8vIENTZXEgc2VxdWVuY2UgbnVtYmVyIHRvIGJlIGhpZ2hlciB0aGFuIHRoZSByZW1vdGUgc2VxdWVuY2UgbnVtYmVyIGJ5XG4gICAgICAgIC8vIG1vcmUgdGhhbiBvbmUuICBUaGlzIGlzIG5vdCBhbiBlcnJvciBjb25kaXRpb24sIGFuZCBhIFVBUyBTSE9VTEQgYmVcbiAgICAgICAgLy8gcHJlcGFyZWQgdG8gcmVjZWl2ZSBhbmQgcHJvY2VzcyByZXF1ZXN0cyB3aXRoIENTZXEgdmFsdWVzIG1vcmUgdGhhblxuICAgICAgICAvLyBvbmUgaGlnaGVyIHRoYW4gdGhlIHByZXZpb3VzIHJlY2VpdmVkIHJlcXVlc3QuICBUaGUgVUFTIE1VU1QgdGhlbiBzZXRcbiAgICAgICAgLy8gdGhlIHJlbW90ZSBzZXF1ZW5jZSBudW1iZXIgdG8gdGhlIHZhbHVlIG9mIHRoZSBzZXF1ZW5jZSBudW1iZXIgaW4gdGhlXG4gICAgICAgIC8vIENTZXEgaGVhZGVyIGZpZWxkIHZhbHVlIGluIHRoZSByZXF1ZXN0LlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBJZiBhIHByb3h5IGNoYWxsZW5nZXMgYSByZXF1ZXN0IGdlbmVyYXRlZCBieSB0aGUgVUFDLCB0aGUgVUFDIGhhc1xuICAgICAgICAvLyAgICB0byByZXN1Ym1pdCB0aGUgcmVxdWVzdCB3aXRoIGNyZWRlbnRpYWxzLiAgVGhlIHJlc3VibWl0dGVkIHJlcXVlc3RcbiAgICAgICAgLy8gICAgd2lsbCBoYXZlIGEgbmV3IENTZXEgbnVtYmVyLiAgVGhlIFVBUyB3aWxsIG5ldmVyIHNlZSB0aGUgZmlyc3RcbiAgICAgICAgLy8gICAgcmVxdWVzdCwgYW5kIHRodXMsIGl0IHdpbGwgbm90aWNlIGEgZ2FwIGluIHRoZSBDU2VxIG51bWJlciBzcGFjZS5cbiAgICAgICAgLy8gICAgU3VjaCBhIGdhcCBkb2VzIG5vdCByZXByZXNlbnQgYW55IGVycm9yIGNvbmRpdGlvbi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4yLjJcbiAgICAgICAgaWYgKHRoaXMucmVtb3RlU2VxdWVuY2VOdW1iZXIpIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNzZXEgPD0gdGhpcy5yZW1vdGVTZXF1ZW5jZU51bWJlcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk91dCBvZiBzZXF1ZW5jZSBpbiBkaWFsb2cgcmVxdWVzdC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBzZXF1ZW5jZUd1YXJkKCk/XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kaWFsb2dTdGF0ZS5yZW1vdGVTZXF1ZW5jZU51bWJlciA9IG1lc3NhZ2UuY3NlcTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgcmVtb3RlIHNlcXVlbmNlIG51bWJlciBpcyBlbXB0eSwgaXQgTVVTVCBiZSBzZXQgdG8gdGhlIHZhbHVlXG4gICAgICAgIC8vIG9mIHRoZSBzZXF1ZW5jZSBudW1iZXIgaW4gdGhlIENTZXEgaGVhZGVyIGZpZWxkIHZhbHVlIGluIHRoZSByZXF1ZXN0LlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjIuMlxuICAgICAgICBpZiAoIXRoaXMucmVtb3RlU2VxdWVuY2VOdW1iZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nU3RhdGUucmVtb3RlU2VxdWVuY2VOdW1iZXIgPSBtZXNzYWdlLmNzZXE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiBhIFVBUyByZWNlaXZlcyBhIHRhcmdldCByZWZyZXNoIHJlcXVlc3QsIGl0IE1VU1QgcmVwbGFjZSB0aGVcbiAgICAgICAgLy8gZGlhbG9nJ3MgcmVtb3RlIHRhcmdldCBVUkkgd2l0aCB0aGUgVVJJIGZyb20gdGhlIENvbnRhY3QgaGVhZGVyIGZpZWxkXG4gICAgICAgIC8vIGluIHRoYXQgcmVxdWVzdCwgaWYgcHJlc2VudC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4yLjJcbiAgICAgICAgLy8gTm90ZTogXCJ0YXJnZXQgcmVmcmVzaCByZXF1ZXN0XCIgcHJvY2Vzc2luZyBkZWxlZ2F0ZWQgdG8gc3ViLWNsYXNzLlxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgZGlhbG9nIGlkZW50aWZpZXIgaW4gdGhlIDJ4eCByZXNwb25zZSBtYXRjaGVzIHRoZSBkaWFsb2dcbiAgICAgKiBpZGVudGlmaWVyIG9mIGFuIGV4aXN0aW5nIGRpYWxvZywgdGhlIGRpYWxvZyBNVVNUIGJlIHRyYW5zaXRpb25lZCB0b1xuICAgICAqIHRoZSBcImNvbmZpcm1lZFwiIHN0YXRlLCBhbmQgdGhlIHJvdXRlIHNldCBmb3IgdGhlIGRpYWxvZyBNVVNUIGJlXG4gICAgICogcmVjb21wdXRlZCBiYXNlZCBvbiB0aGUgMnh4IHJlc3BvbnNlIHVzaW5nIHRoZSBwcm9jZWR1cmVzIG9mIFNlY3Rpb25cbiAgICAgKiAxMi4yLjEuMi4gIE90aGVyd2lzZSwgYSBuZXcgZGlhbG9nIGluIHRoZSBcImNvbmZpcm1lZFwiIHN0YXRlIE1VU1QgYmVcbiAgICAgKiBjb25zdHJ1Y3RlZCB1c2luZyB0aGUgcHJvY2VkdXJlcyBvZiBTZWN0aW9uIDEyLjEuMi5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGUgb25seSBwaWVjZSBvZiBzdGF0ZSB0aGF0IGlzIHJlY29tcHV0ZWQgaXMgdGhlIHJvdXRlXG4gICAgICogc2V0LiAgT3RoZXIgcGllY2VzIG9mIHN0YXRlIHN1Y2ggYXMgdGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyc1xuICAgICAqIChyZW1vdGUgYW5kIGxvY2FsKSBzZW50IHdpdGhpbiB0aGUgZGlhbG9nIGFyZSBub3QgcmVjb21wdXRlZC4gIFRoZVxuICAgICAqIHJvdXRlIHNldCBvbmx5IGlzIHJlY29tcHV0ZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LiAgUkZDXG4gICAgICogMjU0MyBkaWQgbm90IG1hbmRhdGUgbWlycm9yaW5nIG9mIHRoZSBSZWNvcmQtUm91dGUgaGVhZGVyIGZpZWxkIGluXG4gICAgICogYSAxeHgsIG9ubHkgMnh4LiAgSG93ZXZlciwgd2UgY2Fubm90IHVwZGF0ZSB0aGUgZW50aXJlIHN0YXRlIG9mXG4gICAgICogdGhlIGRpYWxvZywgc2luY2UgbWlkLWRpYWxvZyByZXF1ZXN0cyBtYXkgaGF2ZSBiZWVuIHNlbnQgd2l0aGluXG4gICAgICogdGhlIGVhcmx5IGRpYWxvZywgbW9kaWZ5aW5nIHRoZSBzZXF1ZW5jZSBudW1iZXJzLCBmb3IgZXhhbXBsZS5cbiAgICAgKlxuICAgICAqICBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjIuMi40XG4gICAgICovXG4gICAgcmVjb21wdXRlUm91dGVTZXQobWVzc2FnZSkge1xuICAgICAgICB0aGlzLmRpYWxvZ1N0YXRlLnJvdXRlU2V0ID0gbWVzc2FnZS5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLnJldmVyc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZXF1ZXN0IHdpdGhpbiBhIGRpYWxvZyBpcyBjb25zdHJ1Y3RlZCBieSB1c2luZyBtYW55IG9mIHRoZVxuICAgICAqIGNvbXBvbmVudHMgb2YgdGhlIHN0YXRlIHN0b3JlZCBhcyBwYXJ0IG9mIHRoZSBkaWFsb2cuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4yLjEuMVxuICAgICAqIEBwYXJhbSBtZXRob2QgLSBPdXRnb2luZyByZXF1ZXN0IG1ldGhvZC5cbiAgICAgKi9cbiAgICBjcmVhdGVPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKG1ldGhvZCwgb3B0aW9ucykge1xuICAgICAgICAvLyBUaGUgVVJJIGluIHRoZSBUbyBmaWVsZCBvZiB0aGUgcmVxdWVzdCBNVVNUIGJlIHNldCB0byB0aGUgcmVtb3RlIFVSSVxuICAgICAgICAvLyBmcm9tIHRoZSBkaWFsb2cgc3RhdGUuICBUaGUgdGFnIGluIHRoZSBUbyBoZWFkZXIgZmllbGQgb2YgdGhlIHJlcXVlc3RcbiAgICAgICAgLy8gTVVTVCBiZSBzZXQgdG8gdGhlIHJlbW90ZSB0YWcgb2YgdGhlIGRpYWxvZyBJRC4gIFRoZSBGcm9tIFVSSSBvZiB0aGVcbiAgICAgICAgLy8gcmVxdWVzdCBNVVNUIGJlIHNldCB0byB0aGUgbG9jYWwgVVJJIGZyb20gdGhlIGRpYWxvZyBzdGF0ZS4gIFRoZSB0YWdcbiAgICAgICAgLy8gaW4gdGhlIEZyb20gaGVhZGVyIGZpZWxkIG9mIHRoZSByZXF1ZXN0IE1VU1QgYmUgc2V0IHRvIHRoZSBsb2NhbCB0YWdcbiAgICAgICAgLy8gb2YgdGhlIGRpYWxvZyBJRC4gIElmIHRoZSB2YWx1ZSBvZiB0aGUgcmVtb3RlIG9yIGxvY2FsIHRhZ3MgaXMgbnVsbCxcbiAgICAgICAgLy8gdGhlIHRhZyBwYXJhbWV0ZXIgTVVTVCBiZSBvbWl0dGVkIGZyb20gdGhlIFRvIG9yIEZyb20gaGVhZGVyIGZpZWxkcyxcbiAgICAgICAgLy8gcmVzcGVjdGl2ZWx5LlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBVc2FnZSBvZiB0aGUgVVJJIGZyb20gdGhlIFRvIGFuZCBGcm9tIGZpZWxkcyBpbiB0aGUgb3JpZ2luYWxcbiAgICAgICAgLy8gICAgcmVxdWVzdCB3aXRoaW4gc3Vic2VxdWVudCByZXF1ZXN0cyBpcyBkb25lIGZvciBiYWNrd2FyZHNcbiAgICAgICAgLy8gICAgY29tcGF0aWJpbGl0eSB3aXRoIFJGQyAyNTQzLCB3aGljaCB1c2VkIHRoZSBVUkkgZm9yIGRpYWxvZ1xuICAgICAgICAvLyAgICBpZGVudGlmaWNhdGlvbi4gIEluIHRoaXMgc3BlY2lmaWNhdGlvbiwgb25seSB0aGUgdGFncyBhcmUgdXNlZCBmb3JcbiAgICAgICAgLy8gICAgZGlhbG9nIGlkZW50aWZpY2F0aW9uLiAgSXQgaXMgZXhwZWN0ZWQgdGhhdCBtYW5kYXRvcnkgcmVmbGVjdGlvblxuICAgICAgICAvLyAgICBvZiB0aGUgb3JpZ2luYWwgVG8gYW5kIEZyb20gVVJJIGluIG1pZC1kaWFsb2cgcmVxdWVzdHMgd2lsbCBiZVxuICAgICAgICAvLyAgICBkZXByZWNhdGVkIGluIGEgc3Vic2VxdWVudCByZXZpc2lvbiBvZiB0aGlzIHNwZWNpZmljYXRpb24uXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMi4xLjFcbiAgICAgICAgY29uc3QgdG9VcmkgPSB0aGlzLnJlbW90ZVVSSTtcbiAgICAgICAgY29uc3QgdG9UYWcgPSB0aGlzLnJlbW90ZVRhZztcbiAgICAgICAgY29uc3QgZnJvbVVyaSA9IHRoaXMubG9jYWxVUkk7XG4gICAgICAgIGNvbnN0IGZyb21UYWcgPSB0aGlzLmxvY2FsVGFnO1xuICAgICAgICAvLyBUaGUgQ2FsbC1JRCBvZiB0aGUgcmVxdWVzdCBNVVNUIGJlIHNldCB0byB0aGUgQ2FsbC1JRCBvZiB0aGUgZGlhbG9nLlxuICAgICAgICAvLyBSZXF1ZXN0cyB3aXRoaW4gYSBkaWFsb2cgTVVTVCBjb250YWluIHN0cmljdGx5IG1vbm90b25pY2FsbHlcbiAgICAgICAgLy8gaW5jcmVhc2luZyBhbmQgY29udGlndW91cyBDU2VxIHNlcXVlbmNlIG51bWJlcnMgKGluY3JlYXNpbmctYnktb25lKVxuICAgICAgICAvLyBpbiBlYWNoIGRpcmVjdGlvbiAoZXhjZXB0aW5nIEFDSyBhbmQgQ0FOQ0VMIG9mIGNvdXJzZSwgd2hvc2UgbnVtYmVyc1xuICAgICAgICAvLyBlcXVhbCB0aGUgcmVxdWVzdHMgYmVpbmcgYWNrbm93bGVkZ2VkIG9yIGNhbmNlbGxlZCkuICBUaGVyZWZvcmUsIGlmXG4gICAgICAgIC8vIHRoZSBsb2NhbCBzZXF1ZW5jZSBudW1iZXIgaXMgbm90IGVtcHR5LCB0aGUgdmFsdWUgb2YgdGhlIGxvY2FsXG4gICAgICAgIC8vIHNlcXVlbmNlIG51bWJlciBNVVNUIGJlIGluY3JlbWVudGVkIGJ5IG9uZSwgYW5kIHRoaXMgdmFsdWUgTVVTVCBiZVxuICAgICAgICAvLyBwbGFjZWQgaW50byB0aGUgQ1NlcSBoZWFkZXIgZmllbGQuICBJZiB0aGUgbG9jYWwgc2VxdWVuY2UgbnVtYmVyIGlzXG4gICAgICAgIC8vIGVtcHR5LCBhbiBpbml0aWFsIHZhbHVlIE1VU1QgYmUgY2hvc2VuIHVzaW5nIHRoZSBndWlkZWxpbmVzIG9mXG4gICAgICAgIC8vIFNlY3Rpb24gOC4xLjEuNS4gIFRoZSBtZXRob2QgZmllbGQgaW4gdGhlIENTZXEgaGVhZGVyIGZpZWxkIHZhbHVlXG4gICAgICAgIC8vIE1VU1QgbWF0Y2ggdGhlIG1ldGhvZCBvZiB0aGUgcmVxdWVzdC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4yLjEuMVxuICAgICAgICBjb25zdCBjYWxsSWQgPSB0aGlzLmNhbGxJZDtcbiAgICAgICAgbGV0IGNzZXE7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuY3NlcSkge1xuICAgICAgICAgICAgY3NlcSA9IG9wdGlvbnMuY3NlcTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFNlcXVlbmNlTnVtYmVyKSB7XG4gICAgICAgICAgICBjc2VxID0gdGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFNlcXVlbmNlTnVtYmVyID0gMTsgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjEuMS41XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjc2VxID0gdGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFNlcXVlbmNlTnVtYmVyICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFVBQyB1c2VzIHRoZSByZW1vdGUgdGFyZ2V0IGFuZCByb3V0ZSBzZXQgdG8gYnVpbGQgdGhlIFJlcXVlc3QtVVJJXG4gICAgICAgIC8vIGFuZCBSb3V0ZSBoZWFkZXIgZmllbGQgb2YgdGhlIHJlcXVlc3QuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIElmIHRoZSByb3V0ZSBzZXQgaXMgZW1wdHksIHRoZSBVQUMgTVVTVCBwbGFjZSB0aGUgcmVtb3RlIHRhcmdldCBVUklcbiAgICAgICAgLy8gaW50byB0aGUgUmVxdWVzdC1VUkkuICBUaGUgVUFDIE1VU1QgTk9UIGFkZCBhIFJvdXRlIGhlYWRlciBmaWVsZCB0b1xuICAgICAgICAvLyB0aGUgcmVxdWVzdC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgdGhlIHJvdXRlIHNldCBpcyBub3QgZW1wdHksIGFuZCB0aGUgZmlyc3QgVVJJIGluIHRoZSByb3V0ZSBzZXRcbiAgICAgICAgLy8gY29udGFpbnMgdGhlIGxyIHBhcmFtZXRlciAoc2VlIFNlY3Rpb24gMTkuMS4xKSwgdGhlIFVBQyBNVVNUIHBsYWNlXG4gICAgICAgIC8vIHRoZSByZW1vdGUgdGFyZ2V0IFVSSSBpbnRvIHRoZSBSZXF1ZXN0LVVSSSBhbmQgTVVTVCBpbmNsdWRlIGEgUm91dGVcbiAgICAgICAgLy8gaGVhZGVyIGZpZWxkIGNvbnRhaW5pbmcgdGhlIHJvdXRlIHNldCB2YWx1ZXMgaW4gb3JkZXIsIGluY2x1ZGluZyBhbGxcbiAgICAgICAgLy8gcGFyYW1ldGVycy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgdGhlIHJvdXRlIHNldCBpcyBub3QgZW1wdHksIGFuZCBpdHMgZmlyc3QgVVJJIGRvZXMgbm90IGNvbnRhaW4gdGhlXG4gICAgICAgIC8vIGxyIHBhcmFtZXRlciwgdGhlIFVBQyBNVVNUIHBsYWNlIHRoZSBmaXJzdCBVUkkgZnJvbSB0aGUgcm91dGUgc2V0XG4gICAgICAgIC8vIGludG8gdGhlIFJlcXVlc3QtVVJJLCBzdHJpcHBpbmcgYW55IHBhcmFtZXRlcnMgdGhhdCBhcmUgbm90IGFsbG93ZWRcbiAgICAgICAgLy8gaW4gYSBSZXF1ZXN0LVVSSS4gIFRoZSBVQUMgTVVTVCBhZGQgYSBSb3V0ZSBoZWFkZXIgZmllbGQgY29udGFpbmluZ1xuICAgICAgICAvLyB0aGUgcmVtYWluZGVyIG9mIHRoZSByb3V0ZSBzZXQgdmFsdWVzIGluIG9yZGVyLCBpbmNsdWRpbmcgYWxsXG4gICAgICAgIC8vIHBhcmFtZXRlcnMuICBUaGUgVUFDIE1VU1QgdGhlbiBwbGFjZSB0aGUgcmVtb3RlIHRhcmdldCBVUkkgaW50byB0aGVcbiAgICAgICAgLy8gUm91dGUgaGVhZGVyIGZpZWxkIGFzIHRoZSBsYXN0IHZhbHVlLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjIuMS4xXG4gICAgICAgIC8vIFRoZSBsciBwYXJhbWV0ZXIsIHdoZW4gcHJlc2VudCwgaW5kaWNhdGVzIHRoYXQgdGhlIGVsZW1lbnRcbiAgICAgICAgLy8gcmVzcG9uc2libGUgZm9yIHRoaXMgcmVzb3VyY2UgaW1wbGVtZW50cyB0aGUgcm91dGluZyBtZWNoYW5pc21zXG4gICAgICAgIC8vIHNwZWNpZmllZCBpbiB0aGlzIGRvY3VtZW50LiAgVGhpcyBwYXJhbWV0ZXIgd2lsbCBiZSB1c2VkIGluIHRoZVxuICAgICAgICAvLyBVUklzIHByb3hpZXMgcGxhY2UgaW50byBSZWNvcmQtUm91dGUgaGVhZGVyIGZpZWxkIHZhbHVlcywgYW5kXG4gICAgICAgIC8vIG1heSBhcHBlYXIgaW4gdGhlIFVSSXMgaW4gYSBwcmUtZXhpc3Rpbmcgcm91dGUgc2V0LlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIHBhcmFtZXRlciBpcyB1c2VkIHRvIGFjaGlldmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aFxuICAgICAgICAvLyBzeXN0ZW1zIGltcGxlbWVudGluZyB0aGUgc3RyaWN0LXJvdXRpbmcgbWVjaGFuaXNtcyBvZiBSRkMgMjU0M1xuICAgICAgICAvLyBhbmQgdGhlIHJmYzI1NDNiaXMgZHJhZnRzIHVwIHRvIGJpcy0wNS4gIEFuIGVsZW1lbnQgcHJlcGFyaW5nXG4gICAgICAgIC8vIHRvIHNlbmQgYSByZXF1ZXN0IGJhc2VkIG9uIGEgVVJJIG5vdCBjb250YWluaW5nIHRoaXMgcGFyYW1ldGVyXG4gICAgICAgIC8vIGNhbiBhc3N1bWUgdGhlIHJlY2VpdmluZyBlbGVtZW50IGltcGxlbWVudHMgc3RyaWN0LXJvdXRpbmcgYW5kXG4gICAgICAgIC8vIHJlZm9ybWF0IHRoZSBtZXNzYWdlIHRvIHByZXNlcnZlIHRoZSBpbmZvcm1hdGlvbiBpbiB0aGVcbiAgICAgICAgLy8gUmVxdWVzdC1VUkkuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTkuMS4xXG4gICAgICAgIC8vIE5PVEU6IE5vdCBiYWNrd2FyZHMgY29tcGF0aWJsZSB3aXRoIFJGQyAyNTQzIChubyBzdXBwb3J0IGZvciBzdHJpY3Qtcm91dGluZykuXG4gICAgICAgIGNvbnN0IHJ1cmkgPSB0aGlzLnJlbW90ZVRhcmdldDtcbiAgICAgICAgY29uc3Qgcm91dGVTZXQgPSB0aGlzLnJvdXRlU2V0O1xuICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSBvcHRpb25zICYmIG9wdGlvbnMuZXh0cmFIZWFkZXJzO1xuICAgICAgICBjb25zdCBib2R5ID0gb3B0aW9ucyAmJiBvcHRpb25zLmJvZHk7XG4gICAgICAgIC8vIFRoZSByZWxhdGl2ZSBvcmRlciBvZiBoZWFkZXIgZmllbGRzIHdpdGggZGlmZmVyZW50IGZpZWxkIG5hbWVzIGlzIG5vdFxuICAgICAgICAvLyBzaWduaWZpY2FudC4gIEhvd2V2ZXIsIGl0IGlzIFJFQ09NTUVOREVEIHRoYXQgaGVhZGVyIGZpZWxkcyB3aGljaCBhcmVcbiAgICAgICAgLy8gbmVlZGVkIGZvciBwcm94eSBwcm9jZXNzaW5nIChWaWEsIFJvdXRlLCBSZWNvcmQtUm91dGUsIFByb3h5LVJlcXVpcmUsXG4gICAgICAgIC8vIE1heC1Gb3J3YXJkcywgYW5kIFByb3h5LUF1dGhvcml6YXRpb24sIGZvciBleGFtcGxlKSBhcHBlYXIgdG93YXJkc1xuICAgICAgICAvLyB0aGUgdG9wIG9mIHRoZSBtZXNzYWdlIHRvIGZhY2lsaXRhdGUgcmFwaWQgcGFyc2luZy5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi03LjMuMVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy51c2VyQWdlbnRDb3JlLm1ha2VPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKG1ldGhvZCwgcnVyaSwgZnJvbVVyaSwgdG9VcmksIHtcbiAgICAgICAgICAgIGNhbGxJZCxcbiAgICAgICAgICAgIGNzZXEsXG4gICAgICAgICAgICBmcm9tVGFnLFxuICAgICAgICAgICAgdG9UYWcsXG4gICAgICAgICAgICByb3V0ZVNldFxuICAgICAgICB9LCBleHRyYUhlYWRlcnMsIGJvZHkpO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IHRoZSBsb2NhbCBzZXF1ZW5jZSBudW1iZXIgYnkgb25lLlxuICAgICAqIEl0IGZlZWxzIGxpa2UgdGhpcyBzaG91bGQgYmUgcHJvdGVjdGVkLCBidXQgdGhlIGN1cnJlbnQgYXV0aGVudGljYXRpb24gaGFuZGxpbmcgY3VycmVudGx5XG4gICAgICogbmVlZHMgdGhpcyB0byBrZWVwIHRoZSBkaWFsb2cgaW4gc3luYyB3aGVuIFwiYXV0byByZS1zZW5kc1wiIHJlcXVlc3QgbWVzc2FnZXMuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaW5jcmVtZW50TG9jYWxTZXF1ZW5jZU51bWJlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpYWxvZ1N0YXRlLmxvY2FsU2VxdWVuY2VOdW1iZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxvY2FsIHNlcXVlbmNlIG51bWJlciB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlhbG9nU3RhdGUubG9jYWxTZXF1ZW5jZU51bWJlciArPSAxO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgcmVtb3RlIHNlcXVlbmNlIG51bWJlciB3YXMgbm90IGVtcHR5LCBidXQgdGhlIHNlcXVlbmNlIG51bWJlclxuICAgICAqIG9mIHRoZSByZXF1ZXN0IGlzIGxvd2VyIHRoYW4gdGhlIHJlbW90ZSBzZXF1ZW5jZSBudW1iZXIsIHRoZSByZXF1ZXN0XG4gICAgICogaXMgb3V0IG9mIG9yZGVyIGFuZCBNVVNUIGJlIHJlamVjdGVkIHdpdGggYSA1MDAgKFNlcnZlciBJbnRlcm5hbFxuICAgICAqIEVycm9yKSByZXNwb25zZS5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjIuMlxuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gSW5jb21pbmcgcmVxdWVzdCB0byBndWFyZC5cbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBwcm9ncmFtIGV4ZWN1dGlvbiBpcyB0byBjb250aW51ZSBpbiB0aGUgYnJhbmNoIGluIHF1ZXN0aW9uLlxuICAgICAqICAgICAgICAgIE90aGVyd2lzZSBhIDUwMCBTZXJ2ZXIgSW50ZXJuYWwgRXJyb3Igd2FzIHN0YXRlbGVzcyBzZW50IGFuZCByZXF1ZXN0IHByb2Nlc3NpbmcgbXVzdCBzdG9wLlxuICAgICAqL1xuICAgIHNlcXVlbmNlR3VhcmQobWVzc2FnZSkge1xuICAgICAgICAvLyBBQ0sgZ3VhcmQuXG4gICAgICAgIC8vIEJ5IGNvbnZlbnRpb24sIGhhbmRsaW5nIG9mIHVuZXhwZWN0ZWQgQUNLcyBpcyByZXNwb25zaWJpbGl0eVxuICAgICAgICAvLyB0aGUgcGFydGljdWxhciBkaWFsb2cgaW1wbGVtZW50YXRpb24uIEZvciBleGFtcGxlLCBzZWUgU2Vzc2lvbkRpYWxvZy5cbiAgICAgICAgLy8gRnVydGhlcm1vcmUsIHdlIGNhbm5vdCByZXBseSB0byBhbiBcIm91dCBvZiBzZXF1ZW5jZVwiIEFDSy5cbiAgICAgICAgaWYgKG1lc3NhZ2UubWV0aG9kID09PSBDLkFDSykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm90ZTogV2UgYXJlIHJlamVjdGluZyBvbiBcImxlc3MgdGhhbiBvciBlcXVhbCB0b1wiIHRoZSByZW1vdGVcbiAgICAgICAgLy8gc2VxdWVuY2UgbnVtYmVyIChleGNlcHRpbmcgQUNLIHdob3NlIG51bWJlcnMgZXF1YWwgdGhlIHJlcXVlc3RzXG4gICAgICAgIC8vIGJlaW5nIGFja25vd2xlZGdlZCBvciBjYW5jZWxsZWQpLCB3aGljaCBpcyB0aGUgY29ycmVjdCB0aGluZyB0b1xuICAgICAgICAvLyBkbyBpbiBvdXIgY2FzZS4gVGhlIG9ubHkgdGltZSBhIHJlcXVlc3Qgd2l0aCB0aGUgc2FtZSBzZXF1ZW5jZSBudW1iZXJcbiAgICAgICAgLy8gd2lsbCBzaG93IHVwIGhlcmUgaWYgaXMgYSkgaXQgaXMgYSB2ZXJ5IGxhdGUgcmV0cmFuc21pc3Npb24gb2YgYVxuICAgICAgICAvLyByZXF1ZXN0IHdlIGFscmVhZHkgaGFuZGxlZCBvciBiKSBpdCBpcyBhIGRpZmZlcmVudCByZXF1ZXN0IHdpdGggdGhlXG4gICAgICAgIC8vIHNhbWUgc2VxdWVuY2UgbnVtYmVyIHdoaWNoIHdvdWxkIGJlIHZpb2xhdGlvbiBvZiB0aGUgc3RhbmRhcmQuXG4gICAgICAgIC8vIFJlcXVlc3QgcmV0cmFuc21pc3Npb25zIGFyZSBhYnNvcmJlZCBieSB0aGUgdHJhbnNhY3Rpb24gbGF5ZXIsXG4gICAgICAgIC8vIHNvIGFueSByZXF1ZXN0IHdpdGggYSBkdXBsaWNhdGUgc2VxdWVuY2UgbnVtYmVyIGdldHRpbmcgaGVyZVxuICAgICAgICAvLyB3b3VsZCBoYXZlIHRvIGJlIGEgcmV0cmFuc21pc3Npb24gYWZ0ZXIgdGhlIHRyYW5zYWN0aW9uIHRlcm1pbmF0ZWRcbiAgICAgICAgLy8gb3IgYSBicm9rZW4gcmVxdWVzdCAod2l0aCB1bmlxdWUgdmlhIGJyYW5jaCB2YWx1ZSkuXG4gICAgICAgIC8vIFJlcXVlc3RzIHdpdGhpbiBhIGRpYWxvZyBNVVNUIGNvbnRhaW4gc3RyaWN0bHkgbW9ub3RvbmljYWxseVxuICAgICAgICAvLyBpbmNyZWFzaW5nIGFuZCBjb250aWd1b3VzIENTZXEgc2VxdWVuY2UgbnVtYmVycyAoaW5jcmVhc2luZy1ieS1vbmUpXG4gICAgICAgIC8vIGluIGVhY2ggZGlyZWN0aW9uIChleGNlcHRpbmcgQUNLIGFuZCBDQU5DRUwgb2YgY291cnNlLCB3aG9zZSBudW1iZXJzXG4gICAgICAgIC8vIGVxdWFsIHRoZSByZXF1ZXN0cyBiZWluZyBhY2tub3dsZWRnZWQgb3IgY2FuY2VsbGVkKS4gIFRoZXJlZm9yZSwgaWZcbiAgICAgICAgLy8gdGhlIGxvY2FsIHNlcXVlbmNlIG51bWJlciBpcyBub3QgZW1wdHksIHRoZSB2YWx1ZSBvZiB0aGUgbG9jYWxcbiAgICAgICAgLy8gc2VxdWVuY2UgbnVtYmVyIE1VU1QgYmUgaW5jcmVtZW50ZWQgYnkgb25lLCBhbmQgdGhpcyB2YWx1ZSBNVVNUIGJlXG4gICAgICAgIC8vIHBsYWNlZCBpbnRvIHRoZSBDU2VxIGhlYWRlciBmaWVsZC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4yLjEuMVxuICAgICAgICBpZiAodGhpcy5yZW1vdGVTZXF1ZW5jZU51bWJlciAmJiBtZXNzYWdlLmNzZXEgPD0gdGhpcy5yZW1vdGVTZXF1ZW5jZU51bWJlcikge1xuICAgICAgICAgICAgdGhpcy5jb3JlLnJlcGx5U3RhdGVsZXNzKG1lc3NhZ2UsIHsgc3RhdHVzQ29kZTogNTAwIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEdyYW1tYXIgfSBmcm9tIFwiLi4vLi4vZ3JhbW1hclwiO1xuaW1wb3J0IHsgaGVhZGVyaXplIH0gZnJvbSBcIi4vdXRpbHNcIjtcbi8qKlxuICogSW5jb21pbmcgbWVzc2FnZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEluY29taW5nTWVzc2FnZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnQgYSBoZWFkZXIgb2YgdGhlIGdpdmVuIG5hbWUgYW5kIHZhbHVlIGludG8gdGhlIGxhc3QgcG9zaXRpb24gb2YgdGhlXG4gICAgICogaGVhZGVyIGFycmF5LlxuICAgICAqIEBwYXJhbSBuYW1lIC0gaGVhZGVyIG5hbWVcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBoZWFkZXIgdmFsdWVcbiAgICAgKi9cbiAgICBhZGRIZWFkZXIobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0geyByYXc6IHZhbHVlIH07XG4gICAgICAgIG5hbWUgPSBoZWFkZXJpemUobmFtZSk7XG4gICAgICAgIGlmICh0aGlzLmhlYWRlcnNbbmFtZV0pIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyc1tuYW1lXS5wdXNoKGhlYWRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNbbmFtZV0gPSBbaGVhZGVyXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBoZWFkZXIgbmFtZSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgICogQHBhcmFtIG5hbWUgLSBoZWFkZXIgbmFtZVxuICAgICAqIEByZXR1cm5zIFJldHVybnMgdGhlIHNwZWNpZmllZCBoZWFkZXIsIHVuZGVmaW5lZCBpZiBoZWFkZXIgZG9lc24ndCBleGlzdC5cbiAgICAgKi9cbiAgICBnZXRIZWFkZXIobmFtZSkge1xuICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmhlYWRlcnNbaGVhZGVyaXplKG5hbWUpXTtcbiAgICAgICAgaWYgKGhlYWRlcikge1xuICAgICAgICAgICAgaWYgKGhlYWRlclswXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoZWFkZXJbMF0ucmF3O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaGVhZGVyL3Mgb2YgdGhlIGdpdmVuIG5hbWUuXG4gICAgICogQHBhcmFtIG5hbWUgLSBoZWFkZXIgbmFtZVxuICAgICAqIEByZXR1cm5zIEFycmF5IC0gd2l0aCBhbGwgdGhlIGhlYWRlcnMgb2YgdGhlIHNwZWNpZmllZCBuYW1lLlxuICAgICAqL1xuICAgIGdldEhlYWRlcnMobmFtZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmhlYWRlcnNbaGVhZGVyaXplKG5hbWUpXTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIGlmICghaGVhZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBoZWFkZXJQYXJ0IG9mIGhlYWRlcikge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goaGVhZGVyUGFydC5yYXcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmeSB0aGUgZXhpc3RlbmNlIG9mIHRoZSBnaXZlbiBoZWFkZXIuXG4gICAgICogQHBhcmFtIG5hbWUgLSBoZWFkZXIgbmFtZVxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgaGVhZGVyIHdpdGggZ2l2ZW4gbmFtZSBleGlzdHMsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGhhc0hlYWRlcihuYW1lKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuaGVhZGVyc1toZWFkZXJpemUobmFtZSldO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgZ2l2ZW4gaGVhZGVyIG9uIHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKiBAcGFyYW0gbmFtZSAtIGhlYWRlciBuYW1lXG4gICAgICogQHBhcmFtIGlkeCAtIGhlYWRlciBpbmRleFxuICAgICAqIEByZXR1cm5zIFBhcnNlZCBoZWFkZXIgb2JqZWN0LCB1bmRlZmluZWQgaWYgdGhlXG4gICAgICogICBoZWFkZXIgaXMgbm90IHByZXNlbnQgb3IgaW4gY2FzZSBvZiBhIHBhcnNpbmcgZXJyb3IuXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBwYXJzZUhlYWRlcihuYW1lLCBpZHggPSAwKSB7XG4gICAgICAgIG5hbWUgPSBoZWFkZXJpemUobmFtZSk7XG4gICAgICAgIGlmICghdGhpcy5oZWFkZXJzW25hbWVdKSB7XG4gICAgICAgICAgICAvLyB0aGlzLmxvZ2dlci5sb2coXCJoZWFkZXIgJ1wiICsgbmFtZSArIFwiJyBub3QgcHJlc2VudFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpZHggPj0gdGhpcy5oZWFkZXJzW25hbWVdLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gdGhpcy5sb2dnZXIubG9nKFwibm90IHNvIG1hbnkgJ1wiICsgbmFtZSArIFwiJyBoZWFkZXJzIHByZXNlbnRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5oZWFkZXJzW25hbWVdW2lkeF07XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaGVhZGVyLnJhdztcbiAgICAgICAgaWYgKGhlYWRlci5wYXJzZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXIucGFyc2VkO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN1YnN0aXR1dGUgJy0nIGJ5ICdfJyBmb3IgZ3JhbW1hciBydWxlIG1hdGNoaW5nLlxuICAgICAgICBjb25zdCBwYXJzZWQgPSBHcmFtbWFyLnBhcnNlKHZhbHVlLCBuYW1lLnJlcGxhY2UoLy0vZywgXCJfXCIpKTtcbiAgICAgICAgaWYgKHBhcnNlZCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyc1tuYW1lXS5zcGxpY2UoaWR4LCAxKTsgLy8gZGVsZXRlIGZyb20gaGVhZGVyc1xuICAgICAgICAgICAgLy8gdGhpcy5sb2dnZXIud2FybignZXJyb3IgcGFyc2luZyBcIicgKyBuYW1lICsgJ1wiIGhlYWRlciBmaWVsZCB3aXRoIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoZWFkZXIucGFyc2VkID0gcGFyc2VkO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXNzYWdlIEhlYWRlciBhdHRyaWJ1dGUgc2VsZWN0b3IuIEFsaWFzIG9mIHBhcnNlSGVhZGVyLlxuICAgICAqIEBwYXJhbSBuYW1lIC0gaGVhZGVyIG5hbWVcbiAgICAgKiBAcGFyYW0gaWR4IC0gaGVhZGVyIGluZGV4XG4gICAgICogQHJldHVybnMgUGFyc2VkIGhlYWRlciBvYmplY3QsIHVuZGVmaW5lZCBpZiB0aGVcbiAgICAgKiAgIGhlYWRlciBpcyBub3QgcHJlc2VudCBvciBpbiBjYXNlIG9mIGEgcGFyc2luZyBlcnJvci5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogbWVzc2FnZS5zKCd2aWEnLDMpLnBvcnRcbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHMobmFtZSwgaWR4ID0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUhlYWRlcihuYW1lLCBpZHgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlIHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gaGVhZGVyIGJ5IHRoZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gbmFtZSAtIGhlYWRlciBuYW1lXG4gICAgICogQHBhcmFtIHZhbHVlIC0gaGVhZGVyIHZhbHVlXG4gICAgICovXG4gICAgc2V0SGVhZGVyKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVhZGVyc1toZWFkZXJpemUobmFtZSldID0gW3sgcmF3OiB2YWx1ZSB9XTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGE7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSW5jb21pbmdNZXNzYWdlIH0gZnJvbSBcIi4vaW5jb21pbmctbWVzc2FnZVwiO1xuLyoqXG4gKiBJbmNvbWluZyByZXF1ZXN0IG1lc3NhZ2UuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBJbmNvbWluZ1JlcXVlc3RNZXNzYWdlIGV4dGVuZHMgSW5jb21pbmdNZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJbmNvbWluZ01lc3NhZ2UgfSBmcm9tIFwiLi9pbmNvbWluZy1tZXNzYWdlXCI7XG4vKipcbiAqIEluY29taW5nIHJlc3BvbnNlIG1lc3NhZ2UuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBJbmNvbWluZ1Jlc3BvbnNlTWVzc2FnZSBleHRlbmRzIEluY29taW5nTWVzc2FnZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSW5jb21pbmdSZXF1ZXN0TWVzc2FnZSB9IGZyb20gXCIuL2luY29taW5nLXJlcXVlc3QtbWVzc2FnZVwiO1xuaW1wb3J0IHsgSW5jb21pbmdSZXNwb25zZU1lc3NhZ2UgfSBmcm9tIFwiLi9pbmNvbWluZy1yZXNwb25zZS1tZXNzYWdlXCI7XG5pbXBvcnQgeyBPdXRnb2luZ1JlcXVlc3RNZXNzYWdlIH0gZnJvbSBcIi4vb3V0Z29pbmctcmVxdWVzdC1tZXNzYWdlXCI7XG4vLyBJZiB0aGUgQ29udGVudC1EaXNwb3NpdGlvbiBoZWFkZXIgZmllbGQgaXMgbWlzc2luZywgYm9kaWVzIG9mXG4vLyBDb250ZW50LVR5cGUgYXBwbGljYXRpb24vc2RwIGltcGx5IHRoZSBkaXNwb3NpdGlvbiBcInNlc3Npb25cIiwgd2hpbGVcbi8vIG90aGVyIGNvbnRlbnQgdHlwZXMgaW1wbHkgXCJyZW5kZXJcIi5cbi8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMi4xXG5mdW5jdGlvbiBjb250ZW50VHlwZVRvQ29udGVudERpc3Bvc2l0aW9uKGNvbnRlbnRUeXBlKSB7XG4gICAgaWYgKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL3NkcFwiKSB7XG4gICAgICAgIHJldHVybiBcInNlc3Npb25cIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBcInJlbmRlclwiO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlIGEgQm9keSBnaXZlbiBhIGxlZ2FjeSBib2R5IHR5cGUuXG4gKiBAcGFyYW0gYm9keUxlZ2FjeSAtIEJvZHkgT2JqZWN0XG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Cb2R5TGVnYWN5KGJvZHlMZWdhY3kpIHtcbiAgICBjb25zdCBjb250ZW50ID0gdHlwZW9mIGJvZHlMZWdhY3kgPT09IFwic3RyaW5nXCIgPyBib2R5TGVnYWN5IDogYm9keUxlZ2FjeS5ib2R5O1xuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gdHlwZW9mIGJvZHlMZWdhY3kgPT09IFwic3RyaW5nXCIgPyBcImFwcGxpY2F0aW9uL3NkcFwiIDogYm9keUxlZ2FjeS5jb250ZW50VHlwZTtcbiAgICBjb25zdCBjb250ZW50RGlzcG9zaXRpb24gPSBjb250ZW50VHlwZVRvQ29udGVudERpc3Bvc2l0aW9uKGNvbnRlbnRUeXBlKTtcbiAgICBjb25zdCBib2R5ID0geyBjb250ZW50RGlzcG9zaXRpb24sIGNvbnRlbnRUeXBlLCBjb250ZW50IH07XG4gICAgcmV0dXJuIGJvZHk7XG59XG4vKipcbiAqIFVzZXItRGVmaW5lZCBUeXBlIEd1YXJkIGZvciBCb2R5LlxuICogQHBhcmFtIGJvZHkgLSBCb2R5IHRvIGNoZWNrLlxuICogQGludGVybmFsXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gaXNCb2R5KGJvZHkpIHtcbiAgICByZXR1cm4gYm9keSAmJlxuICAgICAgICB0eXBlb2YgYm9keS5jb250ZW50ID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIHR5cGVvZiBib2R5LmNvbnRlbnRUeXBlID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIGJvZHkuY29udGVudERpc3Bvc2l0aW9uID09PSB1bmRlZmluZWRcbiAgICAgICAgPyB0cnVlXG4gICAgICAgIDogdHlwZW9mIGJvZHkuY29udGVudERpc3Bvc2l0aW9uID09PSBcInN0cmluZ1wiO1xufVxuLyoqXG4gKiBHaXZlbiBhIG1lc3NhZ2UsIGdldCBhIG5vcm1hbGl6ZWQgYm9keS5cbiAqIFRoZSBjb250ZW50IGRpc3Bvc2l0aW9uIGlzIGluZmVycmVkIGlmIG5vdCBzZXQuXG4gKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCb2R5KG1lc3NhZ2UpIHtcbiAgICBsZXQgY29udGVudERpc3Bvc2l0aW9uO1xuICAgIGxldCBjb250ZW50VHlwZTtcbiAgICBsZXQgY29udGVudDtcbiAgICAvLyBXZSdyZSBpbiBVQVMgcm9sZSwgcmVjZWl2aW5nIGluY29taW5nIHJlcXVlc3RcbiAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEluY29taW5nUmVxdWVzdE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuYm9keSkge1xuICAgICAgICAgICAgLy8gRklYTUU6IFBhcnNpbmcgbmVlZHMgdHlwaW5nXG4gICAgICAgICAgICBjb25zdCBwYXJzZSA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoXCJDb250ZW50LURpc3Bvc2l0aW9uXCIpO1xuICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uID0gcGFyc2UgPyBwYXJzZS50eXBlIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29udGVudFR5cGUgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpO1xuICAgICAgICAgICAgY29udGVudCA9IG1lc3NhZ2UuYm9keTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBXZSdyZSBpbiBVQUMgcm9sZSwgcmVjZWl2aW5nIGluY29taW5nIHJlc3BvbnNlXG4gICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBJbmNvbWluZ1Jlc3BvbnNlTWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZS5ib2R5KSB7XG4gICAgICAgICAgICAvLyBGSVhNRTogUGFyc2luZyBuZWVkcyB0eXBpbmdcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlID0gbWVzc2FnZS5wYXJzZUhlYWRlcihcIkNvbnRlbnQtRGlzcG9zaXRpb25cIik7XG4gICAgICAgICAgICBjb250ZW50RGlzcG9zaXRpb24gPSBwYXJzZSA/IHBhcnNlLnR5cGUgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb250ZW50VHlwZSA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIik7XG4gICAgICAgICAgICBjb250ZW50ID0gbWVzc2FnZS5ib2R5O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFdlJ3JlIGluIFVBQyByb2xlLCBzZW5kaW5nIG91dGdvaW5nIHJlcXVlc3RcbiAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIE91dGdvaW5nUmVxdWVzdE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuYm9keSkge1xuICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uID0gbWVzc2FnZS5nZXRIZWFkZXIoXCJDb250ZW50LURpc3Bvc2l0aW9uXCIpO1xuICAgICAgICAgICAgY29udGVudFR5cGUgPSBtZXNzYWdlLmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5ib2R5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgLy8gRklYTUU6IE91dGdvaW5nUmVxdWVzdCBzaG91bGQgbm90IGFsbG93IGEgXCJzdHJpbmdcIiBib2R5IHdpdGhvdXQgYSBcIkNvbnRlbnQtVHlwZVwiIGhlYWRlci5cbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkhlYWRlciBjb250ZW50IHR5cGUgaGVhZGVyIGRvZXMgbm90IGVxdWFsIGJvZHkgY29udGVudCB0eXBlLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGVudCA9IG1lc3NhZ2UuYm9keTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBPdXRnb2luZ1JlcXVlc3Qgc2hvdWxkIG5vdCBhbGxvdyB0aGUgXCJDb250ZW50LVR5cGVcIiBoZWFkZXIgbm90IHRvIG1hdGNoIHRoIGJvZHkgY29udGVudCB0eXBlXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlICE9PSBtZXNzYWdlLmJvZHkuY29udGVudFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSGVhZGVyIGNvbnRlbnQgdHlwZSBoZWFkZXIgZG9lcyBub3QgZXF1YWwgYm9keSBjb250ZW50IHR5cGUuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IG1lc3NhZ2UuYm9keS5jb250ZW50VHlwZTtcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gbWVzc2FnZS5ib2R5LmJvZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gV2UncmUgaW4gVUFTIHJvbGUsIHNlbmRpbmcgb3V0Z29pbmcgcmVzcG9uc2VcbiAgICBpZiAoaXNCb2R5KG1lc3NhZ2UpKSB7XG4gICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbiA9IG1lc3NhZ2UuY29udGVudERpc3Bvc2l0aW9uO1xuICAgICAgICBjb250ZW50VHlwZSA9IG1lc3NhZ2UuY29udGVudFR5cGU7XG4gICAgICAgIGNvbnRlbnQgPSBtZXNzYWdlLmNvbnRlbnQ7XG4gICAgfVxuICAgIC8vIE5vIGNvbnRlbnQsIG5vIGJvZHkuXG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChjb250ZW50VHlwZSAmJiAhY29udGVudERpc3Bvc2l0aW9uKSB7XG4gICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbiA9IGNvbnRlbnRUeXBlVG9Db250ZW50RGlzcG9zaXRpb24oY29udGVudFR5cGUpO1xuICAgIH1cbiAgICBpZiAoIWNvbnRlbnREaXNwb3NpdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250ZW50IGRpc3Bvc2l0aW9uIHVuZGVmaW5lZC5cIik7XG4gICAgfVxuICAgIGlmICghY29udGVudFR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udGVudCB0eXBlIHVuZGVmaW5lZC5cIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgY29udGVudFR5cGUsXG4gICAgICAgIGNvbnRlbnRcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgVGltZXJzIH0gZnJvbSBcIi4uL3RpbWVyc1wiO1xuaW1wb3J0IHsgQ2xpZW50VHJhbnNhY3Rpb24gfSBmcm9tIFwiLi9jbGllbnQtdHJhbnNhY3Rpb25cIjtcbmltcG9ydCB7IFRyYW5zYWN0aW9uU3RhdGUgfSBmcm9tIFwiLi90cmFuc2FjdGlvbi1zdGF0ZVwiO1xuLyoqXG4gKiBJTlZJVEUgQ2xpZW50IFRyYW5zYWN0aW9uLlxuICogQHJlbWFya3NcbiAqIFRoZSBJTlZJVEUgdHJhbnNhY3Rpb24gY29uc2lzdHMgb2YgYSB0aHJlZS13YXkgaGFuZHNoYWtlLiAgVGhlIGNsaWVudFxuICogdHJhbnNhY3Rpb24gc2VuZHMgYW4gSU5WSVRFLCB0aGUgc2VydmVyIHRyYW5zYWN0aW9uIHNlbmRzIHJlc3BvbnNlcyxcbiAqIGFuZCB0aGUgY2xpZW50IHRyYW5zYWN0aW9uIHNlbmRzIGFuIEFDSy5cbiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4xXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbiBleHRlbmRzIENsaWVudFRyYW5zYWN0aW9uIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3Rvci5cbiAgICAgKiBVcG9uIGNvbnN0cnVjdGlvbiwgdGhlIG91dGdvaW5nIHJlcXVlc3QncyBWaWEgaGVhZGVyIGlzIHVwZGF0ZWQgYnkgY2FsbGluZyBgc2V0VmlhSGVhZGVyYC5cbiAgICAgKiBUaGVuIGB0b1N0cmluZ2AgaXMgY2FsbGVkIG9uIHRoZSBvdXRnb2luZyByZXF1ZXN0IGFuZCB0aGUgbWVzc2FnZSBpcyBzZW50IHZpYSB0aGUgdHJhbnNwb3J0LlxuICAgICAqIEFmdGVyIGNvbnN0cnVjdGlvbiB0aGUgdHJhbnNhY3Rpb24gd2lsbCBiZSBpbiB0aGUgXCJjYWxsaW5nXCIgc3RhdGUgYW5kIHRoZSB0cmFuc2FjdGlvbiBpZFxuICAgICAqIHdpbGwgZXF1YWwgdGhlIGJyYW5jaCBwYXJhbWV0ZXIgc2V0IGluIHRoZSBWaWEgaGVhZGVyIG9mIHRoZSBvdXRnb2luZyByZXF1ZXN0LlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4xXG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBUaGUgb3V0Z29pbmcgSU5WSVRFIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIHRyYW5zcG9ydCAtIFRoZSB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIHVzZXIgLSBUaGUgdHJhbnNhY3Rpb24gdXNlci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0LCB0cmFuc3BvcnQsIHVzZXIpIHtcbiAgICAgICAgc3VwZXIocmVxdWVzdCwgdHJhbnNwb3J0LCB1c2VyLCBUcmFuc2FjdGlvblN0YXRlLkNhbGxpbmcsIFwic2lwLnRyYW5zYWN0aW9uLmljdFwiKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcCBvZiAyeHggdG8tdGFnIHRvIEFDSy5cbiAgICAgICAgICogSWYgdmFsdWUgaXMgbm90IHVuZGVmaW5lZCwgdmFsdWUgaXMgdGhlIEFDSyB3aGljaCB3YXMgc2VudC5cbiAgICAgICAgICogSWYga2V5IGV4aXN0cyBidXQgdmFsdWUgaXMgdW5kZWZpbmVkLCBhIDJ4eCB3YXMgcmVjZWl2ZWQgYnV0IHRoZSBBQ0sgbm90IHlldCBzZW50LlxuICAgICAgICAgKiBPdGhlcndpc2UsIGEgMnh4IHdhcyBub3QgKHlldCkgcmVjZWl2ZWQgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFja1JldHJhbnNtaXNzaW9uQ2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIEZJWE1FOiBUaW1lciBBIGZvciB1bnJlbGlhYmxlIHRyYW5zcG9ydCBub3QgaW1wbGVtZW50ZWRcbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgYW4gdW5yZWxpYWJsZSB0cmFuc3BvcnQgaXMgYmVpbmcgdXNlZCwgdGhlIGNsaWVudCB0cmFuc2FjdGlvblxuICAgICAgICAvLyBNVVNUIHN0YXJ0IHRpbWVyIEEgd2l0aCBhIHZhbHVlIG9mIFQxLiBJZiBhIHJlbGlhYmxlIHRyYW5zcG9ydCBpcyBiZWluZyB1c2VkLFxuICAgICAgICAvLyB0aGUgY2xpZW50IHRyYW5zYWN0aW9uIFNIT1VMRCBOT1Qgc3RhcnQgdGltZXIgQSAoVGltZXIgQSBjb250cm9scyByZXF1ZXN0IHJldHJhbnNtaXNzaW9ucykuXG4gICAgICAgIC8vIEZvciBhbnkgdHJhbnNwb3J0LCB0aGUgY2xpZW50IHRyYW5zYWN0aW9uIE1VU1Qgc3RhcnQgdGltZXIgQiB3aXRoIGEgdmFsdWVcbiAgICAgICAgLy8gb2YgNjQqVDEgc2Vjb25kcyAoVGltZXIgQiBjb250cm9scyB0cmFuc2FjdGlvbiB0aW1lb3V0cykuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4xLjJcbiAgICAgICAgLy9cbiAgICAgICAgLy8gV2hpbGUgbm90IHNwZWxsZWQgb3V0IGluIHRoZSBSRkMsIFRpbWVyIEIgaXMgdGhlIG1heGltdW0gYW1vdW50IG9mIHRpbWUgdGhhdCBhIHNlbmRlclxuICAgICAgICAvLyB3aWxsIHdhaXQgZm9yIGFuIElOVklURSBtZXNzYWdlIHRvIGJlIGFja25vd2xlZGdlZCAoYSBTSVAgcmVzcG9uc2UgbWVzc2FnZSBpcyByZWNlaXZlZCkuXG4gICAgICAgIC8vIFNvIFRpbWVyIEIgc2hvdWxkIGJlIGNsZWFyZWQgd2hlbiB0aGUgdHJhbnNhY3Rpb24gc3RhdGUgcHJvY2VlZHMgZnJvbSBcIkNhbGxpbmdcIi5cbiAgICAgICAgdGhpcy5CID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnRpbWVyQigpLCBUaW1lcnMuVElNRVJfQik7XG4gICAgICAgIHRoaXMuc2VuZChyZXF1ZXN0LnRvU3RyaW5nKCkpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlcnJvciwgXCJGYWlsZWQgdG8gc2VuZCBpbml0aWFsIG91dGdvaW5nIHJlcXVlc3QuXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzdHJ1Y3Rvci5cbiAgICAgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5CKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5CKTtcbiAgICAgICAgICAgIHRoaXMuQiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5EKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5EKTtcbiAgICAgICAgICAgIHRoaXMuRCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5NKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5NKTtcbiAgICAgICAgICAgIHRoaXMuTSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgfVxuICAgIC8qKiBUcmFuc2FjdGlvbiBraW5kLiBEZXByZWNhdGVkLiAqL1xuICAgIGdldCBraW5kKCkge1xuICAgICAgICByZXR1cm4gXCJpY3RcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQUNLIGEgMnh4IGZpbmFsIHJlc3BvbnNlLlxuICAgICAqXG4gICAgICogVGhlIHRyYW5zYWN0aW9uIGluY2x1ZGVzIHRoZSBBQ0sgb25seSBpZiB0aGUgZmluYWwgcmVzcG9uc2Ugd2FzIG5vdCBhIDJ4eCByZXNwb25zZSAodGhlXG4gICAgICogdHJhbnNhY3Rpb24gd2lsbCBnZW5lcmF0ZSBhbmQgc2VuZCB0aGUgQUNLIHRvIHRoZSB0cmFuc3BvcnQgYXV0b21hZ2ljYWxseSkuIElmIHRoZVxuICAgICAqIGZpbmFsIHJlc3BvbnNlIHdhcyBhIDJ4eCwgdGhlIEFDSyBpcyBub3QgY29uc2lkZXJlZCBwYXJ0IG9mIHRoZSB0cmFuc2FjdGlvbiAodGhlXG4gICAgICogdHJhbnNhY3Rpb24gdXNlciBuZWVkcyB0byBnZW5lcmF0ZSBhbmQgc2VuZCB0aGUgQUNLKS5cbiAgICAgKlxuICAgICAqIFRoaXMgbGlicmFyeSBpcyBub3Qgc3RyaWN0bHkgUkZDIGNvbXBsaWFudCB3aXRoIHJlZ2FyZCB0byBBQ0sgaGFuZGxpbmcgZm9yIDJ4eCBmaW5hbFxuICAgICAqIHJlc3BvbnNlcy4gU3BlY2lmaWNhbGx5LCByZXRyYW5zbWlzc2lvbnMgb2YgQUNLcyB0byBhIDJ4eCBmaW5hbCByZXNwb25zZXMgaXMgaGFuZGxlZFxuICAgICAqIGJ5IHRoZSB0cmFuc2FjdGlvbiBsYXllciAoaW5zdGVhZCBvZiB0aGUgVUFDIGNvcmUpLiBUaGUgXCJzdGFuZGFyZFwiIGFwcHJvYWNoIGlzIGZvclxuICAgICAqIHRoZSBVQUMgY29yZSB0byByZWNlaXZlIGFsbCAyeHggcmVzcG9uc2VzIGFuZCBtYW5hZ2Ugc2VuZGluZyBBQ0sgcmV0cmFuc21pc3Npb25zIHRvXG4gICAgICogdGhlIHRyYW5zcG9ydCBkaXJlY3RseS4gSGVyZWluIHRoZSB0cmFuc2FjdGlvbiBsYXllciBtYW5hZ2VzIHNlbmRpbmcgQUNLcyB0byAyeHggcmVzcG9uc2VzXG4gICAgICogYW5kIGFueSByZXRyYW5zbWlzc2lvbnMgb2YgdGhvc2UgQUNLcyBhcyBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWNrIC0gVGhlIG91dGdvaW5nIEFDSyByZXF1ZXN0LlxuICAgICAqL1xuICAgIGFja1Jlc3BvbnNlKGFjaykge1xuICAgICAgICBjb25zdCB0b1RhZyA9IGFjay50b1RhZztcbiAgICAgICAgaWYgKCF0b1RhZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG8gdGFnIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWQgPSBcIno5aEc0YktcIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDAwKTtcbiAgICAgICAgYWNrLnNldFZpYUhlYWRlcihpZCwgdGhpcy50cmFuc3BvcnQucHJvdG9jb2wpO1xuICAgICAgICB0aGlzLmFja1JldHJhbnNtaXNzaW9uQ2FjaGUuc2V0KHRvVGFnLCBhY2spOyAvLyBBZGQgdG8gQUNLIHJldHJhbnNtaXNzaW9uIGNhY2hlXG4gICAgICAgIHRoaXMuc2VuZChhY2sudG9TdHJpbmcoKSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGVycm9yLCBcIkZhaWxlZCB0byBzZW5kIEFDSyB0byAyeHggcmVzcG9uc2UuXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlciBmb3IgaW5jb21pbmcgcmVzcG9uc2VzIGZyb20gdGhlIHRyYW5zcG9ydCB3aGljaCBtYXRjaCB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSByZXNwb25zZSAtIFRoZSBpbmNvbWluZyByZXNwb25zZS5cbiAgICAgKi9cbiAgICByZWNlaXZlUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICAgICAgY29uc3Qgc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1c0NvZGU7XG4gICAgICAgIGlmICghc3RhdHVzQ29kZSB8fCBzdGF0dXNDb2RlIDwgMTAwIHx8IHN0YXR1c0NvZGUgPiA2OTkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0dXMgY29kZSAke3N0YXR1c0NvZGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuQ2FsbGluZzpcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2xpZW50IHRyYW5zYWN0aW9uIHJlY2VpdmVzIGEgcHJvdmlzaW9uYWwgcmVzcG9uc2Ugd2hpbGUgaW5cbiAgICAgICAgICAgICAgICAvLyB0aGUgXCJDYWxsaW5nXCIgc3RhdGUsIGl0IHRyYW5zaXRpb25zIHRvIHRoZSBcIlByb2NlZWRpbmdcIiBzdGF0ZS4gSW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gXCJQcm9jZWVkaW5nXCIgc3RhdGUsIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24gU0hPVUxEIE5PVCByZXRyYW5zbWl0IHRoZVxuICAgICAgICAgICAgICAgIC8vIHJlcXVlc3QgYW55IGxvbmdlci4gRnVydGhlcm1vcmUsIHRoZSBwcm92aXNpb25hbCByZXNwb25zZSBNVVNUIGJlXG4gICAgICAgICAgICAgICAgLy8gcGFzc2VkIHRvIHRoZSBUVS4gIEFueSBmdXJ0aGVyIHByb3Zpc2lvbmFsIHJlc3BvbnNlcyBNVVNUIGJlIHBhc3NlZFxuICAgICAgICAgICAgICAgIC8vIHVwIHRvIHRoZSBUVSB3aGlsZSBpbiB0aGUgXCJQcm9jZWVkaW5nXCIgc3RhdGUuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4xLjEuMlxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID49IDEwMCAmJiBzdGF0dXNDb2RlIDw9IDE5OSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXaGVuIGEgMnh4IHJlc3BvbnNlIGlzIHJlY2VpdmVkIHdoaWxlIGluIGVpdGhlciB0aGUgXCJDYWxsaW5nXCIgb3JcbiAgICAgICAgICAgICAgICAvLyBcIlByb2NlZWRpbmdcIiBzdGF0ZXMsIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24gTVVTVCB0cmFuc2l0aW9uIHRvXG4gICAgICAgICAgICAgICAgLy8gdGhlIFwiQWNjZXB0ZWRcIiBzdGF0ZS4uLiBUaGUgMnh4IHJlc3BvbnNlIE1VU1QgYmUgcGFzc2VkIHVwIHRvIHRoZSBUVS5cbiAgICAgICAgICAgICAgICAvLyBUaGUgY2xpZW50IHRyYW5zYWN0aW9uIE1VU1QgTk9UIGdlbmVyYXRlIGFuIEFDSyB0byB0aGUgMnh4IHJlc3BvbnNlIC0tIGl0c1xuICAgICAgICAgICAgICAgIC8vIGhhbmRsaW5nIGlzIGRlbGVnYXRlZCB0byB0aGUgVFUuIEEgVUFDIGNvcmUgd2lsbCBzZW5kIGFuIEFDSyB0b1xuICAgICAgICAgICAgICAgIC8vIHRoZSAyeHggcmVzcG9uc2UgdXNpbmcgYSBuZXcgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi04LjRcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA+PSAyMDAgJiYgc3RhdHVzQ29kZSA8PSAyOTkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2tSZXRyYW5zbWlzc2lvbkNhY2hlLnNldChyZXNwb25zZS50b1RhZywgdW5kZWZpbmVkKTsgLy8gUHJpbWUgdGhlIEFDSyBjYWNoZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihUcmFuc2FjdGlvblN0YXRlLkFjY2VwdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBpbiBlaXRoZXIgdGhlIFwiQ2FsbGluZ1wiIG9yIFwiUHJvY2VlZGluZ1wiIHN0YXRlcywgcmVjZXB0aW9uIG9mXG4gICAgICAgICAgICAgICAgLy8gYSByZXNwb25zZSB3aXRoIHN0YXR1cyBjb2RlIGZyb20gMzAwLTY5OSBNVVNUIGNhdXNlIHRoZSBjbGllbnRcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiB0byB0cmFuc2l0aW9uIHRvIFwiQ29tcGxldGVkXCIuIFRoZSBjbGllbnQgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgICAgICAvLyBNVVNUIHBhc3MgdGhlIHJlY2VpdmVkIHJlc3BvbnNlIHVwIHRvIHRoZSBUVSwgYW5kIHRoZSBjbGllbnRcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBNVVNUIGdlbmVyYXRlIGFuIEFDSyByZXF1ZXN0LCBldmVuIGlmIHRoZSB0cmFuc3BvcnQgaXNcbiAgICAgICAgICAgICAgICAvLyByZWxpYWJsZSAoZ3VpZGVsaW5lcyBmb3IgY29uc3RydWN0aW5nIHRoZSBBQ0sgZnJvbSB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAvLyBhcmUgZ2l2ZW4gaW4gU2VjdGlvbiAxNy4xLjEuMyksIGFuZCB0aGVuIHBhc3MgdGhlIEFDSyB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyB0cmFuc3BvcnQgbGF5ZXIgZm9yIHRyYW5zbWlzc2lvbi4gVGhlIEFDSyBNVVNUIGJlIHNlbnQgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gc2FtZSBhZGRyZXNzLCBwb3J0LCBhbmQgdHJhbnNwb3J0IHRvIHdoaWNoIHRoZSBvcmlnaW5hbCByZXF1ZXN0IHdhcyBzZW50LlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tOC40XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPj0gMzAwICYmIHN0YXR1c0NvZGUgPD0gNjk5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFRyYW5zYWN0aW9uU3RhdGUuQ29tcGxldGVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nOlxuICAgICAgICAgICAgICAgIC8vIEluIHRoZSBcIlByb2NlZWRpbmdcIiBzdGF0ZSwgdGhlIGNsaWVudCB0cmFuc2FjdGlvbiBTSE9VTEQgTk9UIHJldHJhbnNtaXQgdGhlXG4gICAgICAgICAgICAgICAgLy8gcmVxdWVzdCBhbnkgbG9uZ2VyLiBGdXJ0aGVybW9yZSwgdGhlIHByb3Zpc2lvbmFsIHJlc3BvbnNlIE1VU1QgYmVcbiAgICAgICAgICAgICAgICAvLyBwYXNzZWQgdG8gdGhlIFRVLiAgQW55IGZ1cnRoZXIgcHJvdmlzaW9uYWwgcmVzcG9uc2VzIE1VU1QgYmUgcGFzc2VkXG4gICAgICAgICAgICAgICAgLy8gdXAgdG8gdGhlIFRVIHdoaWxlIGluIHRoZSBcIlByb2NlZWRpbmdcIiBzdGF0ZS5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjEuMS4yXG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPj0gMTAwICYmIHN0YXR1c0NvZGUgPD0gMTk5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdoZW4gYSAyeHggcmVzcG9uc2UgaXMgcmVjZWl2ZWQgd2hpbGUgaW4gZWl0aGVyIHRoZSBcIkNhbGxpbmdcIiBvciBcIlByb2NlZWRpbmdcIiBzdGF0ZXMsXG4gICAgICAgICAgICAgICAgLy8gdGhlIGNsaWVudCB0cmFuc2FjdGlvbiBNVVNUIHRyYW5zaXRpb24gdG8gdGhlIFwiQWNjZXB0ZWRcIiBzdGF0ZS4uLlxuICAgICAgICAgICAgICAgIC8vIFRoZSAyeHggcmVzcG9uc2UgTVVTVCBiZSBwYXNzZWQgdXAgdG8gdGhlIFRVLiBUaGUgY2xpZW50XG4gICAgICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb24gTVVTVCBOT1QgZ2VuZXJhdGUgYW4gQUNLIHRvIHRoZSAyeHggcmVzcG9uc2UgLS0gaXRzXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxpbmcgaXMgZGVsZWdhdGVkIHRvIHRoZSBUVS4gQSBVQUMgY29yZSB3aWxsIHNlbmQgYW4gQUNLIHRvXG4gICAgICAgICAgICAgICAgLy8gdGhlIDJ4eCByZXNwb25zZSB1c2luZyBhIG5ldyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjAyNiNzZWN0aW9uLTguNFxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID49IDIwMCAmJiBzdGF0dXNDb2RlIDw9IDI5OSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFja1JldHJhbnNtaXNzaW9uQ2FjaGUuc2V0KHJlc3BvbnNlLnRvVGFnLCB1bmRlZmluZWQpOyAvLyBQcmltZSB0aGUgQUNLIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFRyYW5zYWN0aW9uU3RhdGUuQWNjZXB0ZWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXaGVuIGluIGVpdGhlciB0aGUgXCJDYWxsaW5nXCIgb3IgXCJQcm9jZWVkaW5nXCIgc3RhdGVzLCByZWNlcHRpb24gb2ZcbiAgICAgICAgICAgICAgICAvLyBhIHJlc3BvbnNlIHdpdGggc3RhdHVzIGNvZGUgZnJvbSAzMDAtNjk5IE1VU1QgY2F1c2UgdGhlIGNsaWVudFxuICAgICAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uIHRvIHRyYW5zaXRpb24gdG8gXCJDb21wbGV0ZWRcIi4gVGhlIGNsaWVudCB0cmFuc2FjdGlvblxuICAgICAgICAgICAgICAgIC8vIE1VU1QgcGFzcyB0aGUgcmVjZWl2ZWQgcmVzcG9uc2UgdXAgdG8gdGhlIFRVLCBhbmQgdGhlIGNsaWVudFxuICAgICAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uIE1VU1QgZ2VuZXJhdGUgYW4gQUNLIHJlcXVlc3QsIGV2ZW4gaWYgdGhlIHRyYW5zcG9ydCBpc1xuICAgICAgICAgICAgICAgIC8vIHJlbGlhYmxlIChndWlkZWxpbmVzIGZvciBjb25zdHJ1Y3RpbmcgdGhlIEFDSyBmcm9tIHRoZSByZXNwb25zZVxuICAgICAgICAgICAgICAgIC8vIGFyZSBnaXZlbiBpbiBTZWN0aW9uIDE3LjEuMS4zKSwgYW5kIHRoZW4gcGFzcyB0aGUgQUNLIHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIHRyYW5zcG9ydCBsYXllciBmb3IgdHJhbnNtaXNzaW9uLiBUaGUgQUNLIE1VU1QgYmUgc2VudCB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBzYW1lIGFkZHJlc3MsIHBvcnQsIGFuZCB0cmFuc3BvcnQgdG8gd2hpY2ggdGhlIG9yaWdpbmFsIHJlcXVlc3Qgd2FzIHNlbnQuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi04LjRcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA+PSAzMDAgJiYgc3RhdHVzQ29kZSA8PSA2OTkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjayhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLkFjY2VwdGVkOlxuICAgICAgICAgICAgICAgIC8vIFRoZSBwdXJwb3NlIG9mIHRoZSBcIkFjY2VwdGVkXCIgc3RhdGUgaXMgdG8gYWxsb3cgdGhlIGNsaWVudFxuICAgICAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uIHRvIGNvbnRpbnVlIHRvIGV4aXN0IHRvIHJlY2VpdmUsIGFuZCBwYXNzIHRvIHRoZSBUVSxcbiAgICAgICAgICAgICAgICAvLyBhbnkgcmV0cmFuc21pc3Npb25zIG9mIHRoZSAyeHggcmVzcG9uc2UgYW5kIGFueSBhZGRpdGlvbmFsIDJ4eFxuICAgICAgICAgICAgICAgIC8vIHJlc3BvbnNlcyBmcm9tIG90aGVyIGJyYW5jaGVzIG9mIHRoZSBJTlZJVEUgaWYgaXQgZm9ya2VkXG4gICAgICAgICAgICAgICAgLy8gZG93bnN0cmVhbS4gVGltZXIgTSByZWZsZWN0cyB0aGUgYW1vdW50IG9mIHRpbWUgdGhhdCB0aGVcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiB1c2VyIHdpbGwgd2FpdCBmb3Igc3VjaCBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIEFueSAyeHggcmVzcG9uc2VzIHRoYXQgbWF0Y2ggdGhpcyBjbGllbnQgdHJhbnNhY3Rpb24gYW5kIHRoYXQgYXJlXG4gICAgICAgICAgICAgICAgLy8gcmVjZWl2ZWQgd2hpbGUgaW4gdGhlIFwiQWNjZXB0ZWRcIiBzdGF0ZSBNVVNUIGJlIHBhc3NlZCB1cCB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBUVS4gVGhlIGNsaWVudCB0cmFuc2FjdGlvbiBNVVNUIE5PVCBnZW5lcmF0ZSBhbiBBQ0sgdG8gdGhlIDJ4eFxuICAgICAgICAgICAgICAgIC8vIHJlc3BvbnNlLiBUaGUgY2xpZW50IHRyYW5zYWN0aW9uIHRha2VzIG5vIGZ1cnRoZXIgYWN0aW9uLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tOC40XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPD0gMjk5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgaW1wbGVtZW50YXRpb24gaGVyZWluIGlzIGludGVudGlvbmFsbHkgbm90IFJGQyBjb21wbGlhbnQuXG4gICAgICAgICAgICAgICAgICAgIC8vIFdoaWxlIHRoZSBmaXJzdCAyeHggcmVzcG9uc2UgZm9yIGEgZ2l2ZW4gYnJhbmNoIGlzIHBhc3NlZCB1cCB0byB0aGUgVFUsXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHJhbnNtaXNzaW9ucyBvZiAyeHggcmVzcG9uc2VzIGFyZSBhYnNvcmJlZCBhbmQgdGhlIEFDSyBhc3NvY2lhdGVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHdpdGggdGhlIG9yaWdpbmFsIHJlc3BvbnNlIGlzIHJlc2VudC4gVGhpcyBhcHByb2FjaCBpcyB0YWtlbiBiZWNhdXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIG91ciBjdXJyZW50IHRyYW5zYWN0aW9uIHVzZXJzIGFyZSBub3QgY3VycmVudGx5IGluIGEgZ29vZCBwb3NpdGlvbiB0b1xuICAgICAgICAgICAgICAgICAgICAvLyBkZWFsIHdpdGggMnh4IHJldHJhbnNtaXNzaW9uLiBUaGlzIFNIT1VMRCBOT1QgY2F1c2UgYW55IGNvbXBsaWFuY2UgaXNzdWVzIC0gOylcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIGNhY2hlIGhpdCwgcGFzcyB0aGUgcmVzcG9uc2UgdG8gdGhlIFRVLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWNrUmV0cmFuc21pc3Npb25DYWNoZS5oYXMocmVzcG9uc2UudG9UYWcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFja1JldHJhbnNtaXNzaW9uQ2FjaGUuc2V0KHJlc3BvbnNlLnRvVGFnLCB1bmRlZmluZWQpOyAvLyBQcmltZSB0aGUgQUNLIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgYSBjYWNoZSBoaXQsIHRyeSBwdWxsaW5nIHRoZSBBQ0sgZnJvbSBjYWNoZSBhbmQgcmV0cmFuc21pdHRpbmcgaXQuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjayA9IHRoaXMuYWNrUmV0cmFuc21pc3Npb25DYWNoZS5nZXQocmVzcG9uc2UudG9UYWcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQoYWNrLnRvU3RyaW5nKCkpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nVHJhbnNwb3J0RXJyb3IoZXJyb3IsIFwiRmFpbGVkIHRvIHNlbmQgcmV0cmFuc21pc3Npb24gb2YgQUNLIHRvIDJ4eCByZXNwb25zZS5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbiBBQ0sgd2FzIG5vdCBmb3VuZCBpbiBjYWNoZSB0aGVuIHdlIGhhdmUgcmVjZWl2ZWQgYSByZXRyYW5zbWl0dGVkIDJ4eFxuICAgICAgICAgICAgICAgICAgICAvLyByZXNwb25zZSBiZWZvcmUgdGhlIFRVIHJlc3BvbmRlZCB0byB0aGUgb3JpZ2luYWwgcmVzcG9uc2UgKHdlIGRvbid0IGhhdmUgYW4gQUNLIHlldCkuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNvIGRpc2NhcmQgdGhpcyByZXNwb25zZSB1bmRlciB0aGUgYXNzdW1wdGlvbiB0aGF0IHRoZSBUVSB3aWxsIGV2ZW50dWFsbHlcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHVzIGEgQUNLIGZvciB0aGUgb3JpZ2luYWwgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuQ29tcGxldGVkOlxuICAgICAgICAgICAgICAgIC8vIEFueSByZXRyYW5zbWlzc2lvbnMgb2YgYSByZXNwb25zZSB3aXRoIHN0YXR1cyBjb2RlIDMwMC02OTkgdGhhdFxuICAgICAgICAgICAgICAgIC8vIGFyZSByZWNlaXZlZCB3aGlsZSBpbiB0aGUgXCJDb21wbGV0ZWRcIiBzdGF0ZSBNVVNUIGNhdXNlIHRoZSBBQ0sgdG9cbiAgICAgICAgICAgICAgICAvLyBiZSByZS1wYXNzZWQgdG8gdGhlIHRyYW5zcG9ydCBsYXllciBmb3IgcmV0cmFuc21pc3Npb24sIGJ1dCB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXdseSByZWNlaXZlZCByZXNwb25zZSBNVVNUIE5PVCBiZSBwYXNzZWQgdXAgdG8gdGhlIFRVLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tOC40XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPj0gMzAwICYmIHN0YXR1c0NvZGUgPD0gNjk5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWNrKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgJHt0aGlzLnN0YXRlfWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFueSByZXNwb25zZSByZWNlaXZlZCB0aGF0IGRvZXMgbm90IG1hdGNoIGFuIGV4aXN0aW5nIGNsaWVudFxuICAgICAgICAvLyB0cmFuc2FjdGlvbiBzdGF0ZSBtYWNoaW5lIGlzIHNpbXBseSBkcm9wcGVkLiAoSW1wbGVtZW50YXRpb25zIGFyZSxcbiAgICAgICAgLy8gb2YgY291cnNlLCBmcmVlIHRvIGxvZyBvciBkbyBvdGhlciBpbXBsZW1lbnRhdGlvbi1zcGVjaWZpYyB0aGluZ3NcbiAgICAgICAgLy8gd2l0aCBzdWNoIHJlc3BvbnNlcywgYnV0IHRoZSBpbXBsZW1lbnRlciBzaG91bGQgYmUgc3VyZSB0byBjb25zaWRlclxuICAgICAgICAvLyB0aGUgaW1wYWN0IG9mIGxhcmdlIG51bWJlcnMgb2YgbWFsaWNpb3VzIHN0cmF5IHJlc3BvbnNlcy4pXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tNy4yXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgUmVjZWl2ZWQgdW5leHBlY3RlZCAke3N0YXR1c0NvZGV9IHJlc3BvbnNlIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0uYDtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY2xpZW50IHRyYW5zYWN0aW9uIFNIT1VMRCBpbmZvcm0gdGhlIFRVIHRoYXQgYSB0cmFuc3BvcnQgZmFpbHVyZVxuICAgICAqIGhhcyBvY2N1cnJlZCwgYW5kIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24gU0hPVUxEIHRyYW5zaXRpb24gZGlyZWN0bHlcbiAgICAgKiB0byB0aGUgXCJUZXJtaW5hdGVkXCIgc3RhdGUuICBUaGUgVFUgd2lsbCBoYW5kbGUgdGhlIGZhaWxvdmVyXG4gICAgICogbWVjaGFuaXNtcyBkZXNjcmliZWQgaW4gWzRdLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS40XG4gICAgICogQHBhcmFtIGVycm9yIC0gVGhlIGVycm9yLlxuICAgICAqL1xuICAgIG9uVHJhbnNwb3J0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMudXNlci5vblRyYW5zcG9ydEVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnVzZXIub25UcmFuc3BvcnRFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqIEZvciBsb2dnaW5nLiAqL1xuICAgIHR5cGVUb1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvblwiO1xuICAgIH1cbiAgICBhY2socmVzcG9uc2UpIHtcbiAgICAgICAgLy8gVGhlIEFDSyByZXF1ZXN0IGNvbnN0cnVjdGVkIGJ5IHRoZSBjbGllbnQgdHJhbnNhY3Rpb24gTVVTVCBjb250YWluXG4gICAgICAgIC8vIHZhbHVlcyBmb3IgdGhlIENhbGwtSUQsIEZyb20sIGFuZCBSZXF1ZXN0LVVSSSB0aGF0IGFyZSBlcXVhbCB0byB0aGVcbiAgICAgICAgLy8gdmFsdWVzIG9mIHRob3NlIGhlYWRlciBmaWVsZHMgaW4gdGhlIHJlcXVlc3QgcGFzc2VkIHRvIHRoZSB0cmFuc3BvcnRcbiAgICAgICAgLy8gYnkgdGhlIGNsaWVudCB0cmFuc2FjdGlvbiAoY2FsbCB0aGlzIHRoZSBcIm9yaWdpbmFsIHJlcXVlc3RcIikuIFRoZSBUb1xuICAgICAgICAvLyBoZWFkZXIgZmllbGQgaW4gdGhlIEFDSyBNVVNUIGVxdWFsIHRoZSBUbyBoZWFkZXIgZmllbGQgaW4gdGhlXG4gICAgICAgIC8vIHJlc3BvbnNlIGJlaW5nIGFja25vd2xlZGdlZCwgYW5kIHRoZXJlZm9yZSB3aWxsIHVzdWFsbHkgZGlmZmVyIGZyb21cbiAgICAgICAgLy8gdGhlIFRvIGhlYWRlciBmaWVsZCBpbiB0aGUgb3JpZ2luYWwgcmVxdWVzdCBieSB0aGUgYWRkaXRpb24gb2YgdGhlXG4gICAgICAgIC8vIHRhZyBwYXJhbWV0ZXIuIFRoZSBBQ0sgTVVTVCBjb250YWluIGEgc2luZ2xlIFZpYSBoZWFkZXIgZmllbGQsIGFuZFxuICAgICAgICAvLyB0aGlzIE1VU1QgYmUgZXF1YWwgdG8gdGhlIHRvcCBWaWEgaGVhZGVyIGZpZWxkIG9mIHRoZSBvcmlnaW5hbFxuICAgICAgICAvLyByZXF1ZXN0LiBUaGUgQ1NlcSBoZWFkZXIgZmllbGQgaW4gdGhlIEFDSyBNVVNUIGNvbnRhaW4gdGhlIHNhbWVcbiAgICAgICAgLy8gdmFsdWUgZm9yIHRoZSBzZXF1ZW5jZSBudW1iZXIgYXMgd2FzIHByZXNlbnQgaW4gdGhlIG9yaWdpbmFsIHJlcXVlc3QsXG4gICAgICAgIC8vIGJ1dCB0aGUgbWV0aG9kIHBhcmFtZXRlciBNVVNUIGJlIGVxdWFsIHRvIFwiQUNLXCIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIElmIHRoZSBJTlZJVEUgcmVxdWVzdCB3aG9zZSByZXNwb25zZSBpcyBiZWluZyBhY2tub3dsZWRnZWQgaGFkIFJvdXRlXG4gICAgICAgIC8vIGhlYWRlciBmaWVsZHMsIHRob3NlIGhlYWRlciBmaWVsZHMgTVVTVCBhcHBlYXIgaW4gdGhlIEFDSy4gVGhpcyBpc1xuICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCB0aGUgQUNLIGNhbiBiZSByb3V0ZWQgcHJvcGVybHkgdGhyb3VnaCBhbnkgZG93bnN0cmVhbVxuICAgICAgICAvLyBzdGF0ZWxlc3MgcHJveGllcy5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4xLjEuM1xuICAgICAgICBjb25zdCBydXJpID0gdGhpcy5yZXF1ZXN0LnJ1cmk7XG4gICAgICAgIGNvbnN0IGNhbGxJZCA9IHRoaXMucmVxdWVzdC5jYWxsSWQ7XG4gICAgICAgIGNvbnN0IGNzZXEgPSB0aGlzLnJlcXVlc3QuY3NlcTtcbiAgICAgICAgY29uc3QgZnJvbSA9IHRoaXMucmVxdWVzdC5nZXRIZWFkZXIoXCJmcm9tXCIpO1xuICAgICAgICBjb25zdCB0byA9IHJlc3BvbnNlLmdldEhlYWRlcihcInRvXCIpO1xuICAgICAgICBjb25zdCB2aWEgPSB0aGlzLnJlcXVlc3QuZ2V0SGVhZGVyKFwidmlhXCIpO1xuICAgICAgICBjb25zdCByb3V0ZSA9IHRoaXMucmVxdWVzdC5nZXRIZWFkZXIoXCJyb3V0ZVwiKTtcbiAgICAgICAgaWYgKCFmcm9tKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGcm9tIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0bykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG8gdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXZpYSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmlhIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFjayA9IGBBQ0sgJHtydXJpfSBTSVAvMi4wXFxyXFxuYDtcbiAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICBhY2sgKz0gYFJvdXRlOiAke3JvdXRlfVxcclxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgYWNrICs9IGBWaWE6ICR7dmlhfVxcclxcbmA7XG4gICAgICAgIGFjayArPSBgVG86ICR7dG99XFxyXFxuYDtcbiAgICAgICAgYWNrICs9IGBGcm9tOiAke2Zyb219XFxyXFxuYDtcbiAgICAgICAgYWNrICs9IGBDYWxsLUlEOiAke2NhbGxJZH1cXHJcXG5gO1xuICAgICAgICBhY2sgKz0gYENTZXE6ICR7Y3NlcX0gQUNLXFxyXFxuYDtcbiAgICAgICAgYWNrICs9IGBNYXgtRm9yd2FyZHM6IDcwXFxyXFxuYDtcbiAgICAgICAgYWNrICs9IGBDb250ZW50LUxlbmd0aDogMFxcclxcblxcclxcbmA7XG4gICAgICAgIC8vIFRPT086IFwiVXNlci1BZ2VudFwiIGhlYWRlclxuICAgICAgICB0aGlzLnNlbmQoYWNrKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nVHJhbnNwb3J0RXJyb3IoZXJyb3IsIFwiRmFpbGVkIHRvIHNlbmQgQUNLIHRvIG5vbi0yeHggcmVzcG9uc2UuXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIGEgc3RhdGUgdHJhbnNpdGlvbi5cbiAgICAgKiBAcGFyYW0gbmV3U3RhdGUgLSBOZXcgc3RhdGUuXG4gICAgICovXG4gICAgc3RhdGVUcmFuc2l0aW9uKG5ld1N0YXRlLCBkdWVUb1RyYW5zcG9ydEVycm9yID0gZmFsc2UpIHtcbiAgICAgICAgLy8gQXNzZXJ0IHZhbGlkIHN0YXRlIHRyYW5zaXRpb25zLlxuICAgICAgICBjb25zdCBpbnZhbGlkU3RhdGVUcmFuc2l0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuc3RhdGV9IHRvICR7bmV3U3RhdGV9YCk7XG4gICAgICAgIH07XG4gICAgICAgIHN3aXRjaCAobmV3U3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5DYWxsaW5nOlxuICAgICAgICAgICAgICAgIGludmFsaWRTdGF0ZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBUcmFuc2FjdGlvblN0YXRlLkNhbGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5BY2NlcHRlZDpcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQ6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFRyYW5zYWN0aW9uU3RhdGUuQ2FsbGluZyAmJiB0aGlzLnN0YXRlICE9PSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBUcmFuc2FjdGlvblN0YXRlLkNhbGxpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSAhPT0gVHJhbnNhY3Rpb25TdGF0ZS5BY2NlcHRlZCAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlICE9PSBUcmFuc2FjdGlvblN0YXRlLkNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWR1ZVRvVHJhbnNwb3J0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRTdGF0ZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdoaWxlIG5vdCBzcGVsbGVkIG91dCBpbiB0aGUgUkZDLCBUaW1lciBCIGlzIHRoZSBtYXhpbXVtIGFtb3VudCBvZiB0aW1lIHRoYXQgYSBzZW5kZXJcbiAgICAgICAgLy8gd2lsbCB3YWl0IGZvciBhbiBJTlZJVEUgbWVzc2FnZSB0byBiZSBhY2tub3dsZWRnZWQgKGEgU0lQIHJlc3BvbnNlIG1lc3NhZ2UgaXMgcmVjZWl2ZWQpLlxuICAgICAgICAvLyBTbyBUaW1lciBCIHNob3VsZCBiZSBjbGVhcmVkIHdoZW4gdGhlIHRyYW5zYWN0aW9uIHN0YXRlIHByb2NlZWRzIGZyb20gXCJDYWxsaW5nXCIuXG4gICAgICAgIGlmICh0aGlzLkIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLkIpO1xuICAgICAgICAgICAgdGhpcy5CID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nKSB7XG4gICAgICAgICAgICAvLyBUaW1lcnMgaGF2ZSBubyBlZmZlY3Qgb24gXCJQcm9jZWVkaW5nXCIgc3RhdGUuXG4gICAgICAgICAgICAvLyBJbiB0aGUgXCJQcm9jZWVkaW5nXCIgc3RhdGUsIHRoZSBjbGllbnQgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgIC8vIFNIT1VMRCBOT1QgcmV0cmFuc21pdCB0aGUgcmVxdWVzdCBhbnkgbG9uZ2VyLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4xLjEuMlxuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBjbGllbnQgdHJhbnNhY3Rpb24gTVVTVCBzdGFydCBUaW1lciBEIHdoZW4gaXQgZW50ZXJzIHRoZSBcIkNvbXBsZXRlZFwiIHN0YXRlXG4gICAgICAgIC8vIGZvciBhbnkgcmVhc29uLCB3aXRoIGEgdmFsdWUgb2YgYXQgbGVhc3QgMzIgc2Vjb25kcyBmb3IgdW5yZWxpYWJsZSB0cmFuc3BvcnRzLFxuICAgICAgICAvLyBhbmQgYSB2YWx1ZSBvZiB6ZXJvIHNlY29uZHMgZm9yIHJlbGlhYmxlIHRyYW5zcG9ydHMuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tOC40XG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuRCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy50aW1lckQoKSwgVGltZXJzLlRJTUVSX0QpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBjbGllbnQgdHJhbnNhY3Rpb24gTVVTVCB0cmFuc2l0aW9uIHRvIHRoZSBcIkFjY2VwdGVkXCIgc3RhdGUsXG4gICAgICAgIC8vIGFuZCBUaW1lciBNIE1VU1QgYmUgc3RhcnRlZCB3aXRoIGEgdmFsdWUgb2YgNjQqVDEuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tOC40XG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5BY2NlcHRlZCkge1xuICAgICAgICAgICAgdGhpcy5NID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnRpbWVyTSgpLCBUaW1lcnMuVElNRVJfTSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT25jZSB0aGUgdHJhbnNhY3Rpb24gaXMgaW4gdGhlIFwiVGVybWluYXRlZFwiIHN0YXRlLCBpdCBNVVNUIGJlIGRlc3Ryb3llZCBpbW1lZGlhdGVseS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi04LjdcbiAgICAgICAgaWYgKG5ld1N0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlRlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBzdGF0ZS5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZW4gdGltZXIgQSBmaXJlcywgdGhlIGNsaWVudCB0cmFuc2FjdGlvbiBNVVNUIHJldHJhbnNtaXQgdGhlXG4gICAgICogcmVxdWVzdCBieSBwYXNzaW5nIGl0IHRvIHRoZSB0cmFuc3BvcnQgbGF5ZXIsIGFuZCBNVVNUIHJlc2V0IHRoZVxuICAgICAqIHRpbWVyIHdpdGggYSB2YWx1ZSBvZiAyKlQxLlxuICAgICAqIFdoZW4gdGltZXIgQSBmaXJlcyAyKlQxIHNlY29uZHMgbGF0ZXIsIHRoZSByZXF1ZXN0IE1VU1QgYmVcbiAgICAgKiByZXRyYW5zbWl0dGVkIGFnYWluIChhc3N1bWluZyB0aGUgY2xpZW50IHRyYW5zYWN0aW9uIGlzIHN0aWxsIGluIHRoaXNcbiAgICAgKiBzdGF0ZSkuIFRoaXMgcHJvY2VzcyBNVVNUIGNvbnRpbnVlIHNvIHRoYXQgdGhlIHJlcXVlc3QgaXNcbiAgICAgKiByZXRyYW5zbWl0dGVkIHdpdGggaW50ZXJ2YWxzIHRoYXQgZG91YmxlIGFmdGVyIGVhY2ggdHJhbnNtaXNzaW9uLlxuICAgICAqIFRoZXNlIHJldHJhbnNtaXNzaW9ucyBTSE9VTEQgb25seSBiZSBkb25lIHdoaWxlIHRoZSBjbGllbnRcbiAgICAgKiB0cmFuc2FjdGlvbiBpcyBpbiB0aGUgXCJDYWxsaW5nXCIgc3RhdGUuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4xLjEuMlxuICAgICAqL1xuICAgIHRpbWVyQSgpIHtcbiAgICAgICAgLy8gVE9ET1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgY2xpZW50IHRyYW5zYWN0aW9uIGlzIHN0aWxsIGluIHRoZSBcIkNhbGxpbmdcIiBzdGF0ZSB3aGVuIHRpbWVyXG4gICAgICogQiBmaXJlcywgdGhlIGNsaWVudCB0cmFuc2FjdGlvbiBTSE9VTEQgaW5mb3JtIHRoZSBUVSB0aGF0IGEgdGltZW91dFxuICAgICAqIGhhcyBvY2N1cnJlZC4gIFRoZSBjbGllbnQgdHJhbnNhY3Rpb24gTVVTVCBOT1QgZ2VuZXJhdGUgYW4gQUNLLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4xLjJcbiAgICAgKi9cbiAgICB0aW1lckIoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBUaW1lciBCIGV4cGlyZWQgZm9yIElOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gJHt0aGlzLmlkfS5gKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFRyYW5zYWN0aW9uU3RhdGUuQ2FsbGluZykge1xuICAgICAgICAgICAgdGhpcy5vblJlcXVlc3RUaW1lb3V0KCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihUcmFuc2FjdGlvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIFRpbWVyIEQgZmlyZXMgd2hpbGUgdGhlIGNsaWVudCB0cmFuc2FjdGlvbiBpcyBpbiB0aGUgXCJDb21wbGV0ZWRcIiBzdGF0ZSxcbiAgICAgKiB0aGUgY2xpZW50IHRyYW5zYWN0aW9uIE1VU1QgbW92ZSB0byB0aGUgXCJUZXJtaW5hdGVkXCIgc3RhdGUuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi04LjRcbiAgICAgKi9cbiAgICB0aW1lckQoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBUaW1lciBEIGV4cGlyZWQgZm9yIElOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gJHt0aGlzLmlkfS5gKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFRyYW5zYWN0aW9uU3RhdGUuQ29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihUcmFuc2FjdGlvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIFRpbWVyIE0gZmlyZXMgd2hpbGUgdGhlIGNsaWVudCB0cmFuc2FjdGlvbiBpcyBpbiB0aGUgXCJBY2NlcHRlZFwiXG4gICAgICogc3RhdGUsIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24gTVVTVCBtb3ZlIHRvIHRoZSBcIlRlcm1pbmF0ZWRcIiBzdGF0ZS5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjAyNiNzZWN0aW9uLTguNFxuICAgICAqL1xuICAgIHRpbWVyTSgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFRpbWVyIE0gZXhwaXJlZCBmb3IgSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiAke3RoaXMuaWR9LmApO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5BY2NlcHRlZCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IEMsIEluY29taW5nUmVzcG9uc2VNZXNzYWdlIH0gZnJvbSBcIi4uL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwgVHJhbnNhY3Rpb25TdGF0ZSB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbi8qKlxuICogVXNlciBBZ2VudCBDbGllbnQgKFVBQykuXG4gKiBAcmVtYXJrc1xuICogQSB1c2VyIGFnZW50IGNsaWVudCBpcyBhIGxvZ2ljYWwgZW50aXR5XG4gKiB0aGF0IGNyZWF0ZXMgYSBuZXcgcmVxdWVzdCwgYW5kIHRoZW4gdXNlcyB0aGUgY2xpZW50XG4gKiB0cmFuc2FjdGlvbiBzdGF0ZSBtYWNoaW5lcnkgdG8gc2VuZCBpdC4gIFRoZSByb2xlIG9mIFVBQyBsYXN0c1xuICogb25seSBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoYXQgdHJhbnNhY3Rpb24uICBJbiBvdGhlciB3b3JkcywgaWZcbiAqIGEgcGllY2Ugb2Ygc29mdHdhcmUgaW5pdGlhdGVzIGEgcmVxdWVzdCwgaXQgYWN0cyBhcyBhIFVBQyBmb3JcbiAqIHRoZSBkdXJhdGlvbiBvZiB0aGF0IHRyYW5zYWN0aW9uLiAgSWYgaXQgcmVjZWl2ZXMgYSByZXF1ZXN0XG4gKiBsYXRlciwgaXQgYXNzdW1lcyB0aGUgcm9sZSBvZiBhIHVzZXIgYWdlbnQgc2VydmVyIGZvciB0aGVcbiAqIHByb2Nlc3Npbmcgb2YgdGhhdCB0cmFuc2FjdGlvbi5cbiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tNlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgVXNlckFnZW50Q2xpZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0cmFuc2FjdGlvbkNvbnN0cnVjdG9yLCBjb3JlLCBtZXNzYWdlLCBkZWxlZ2F0ZSkge1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uQ29uc3RydWN0b3IgPSB0cmFuc2FjdGlvbkNvbnN0cnVjdG9yO1xuICAgICAgICB0aGlzLmNvcmUgPSBjb3JlO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgIHRoaXMuY2hhbGxlbmdlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0YWxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gdGhpcy5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcihcInNpcC51c2VyLWFnZW50LWNsaWVudFwiKTtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24uZGlzcG9zZSgpO1xuICAgIH1cbiAgICBnZXQgbG9nZ2VyRmFjdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29yZS5sb2dnZXJGYWN0b3J5O1xuICAgIH1cbiAgICAvKiogVGhlIHRyYW5zYWN0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJlcXVlc3QuICovXG4gICAgZ2V0IHRyYW5zYWN0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3RyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2FjdGlvbiB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2luY2UgcmVxdWVzdHMgb3RoZXIgdGhhbiBJTlZJVEUgYXJlIHJlc3BvbmRlZCB0byBpbW1lZGlhdGVseSwgc2VuZGluZyBhXG4gICAgICogQ0FOQ0VMIGZvciBhIG5vbi1JTlZJVEUgcmVxdWVzdCB3b3VsZCBhbHdheXMgY3JlYXRlIGEgcmFjZSBjb25kaXRpb24uXG4gICAgICogQSBDQU5DRUwgcmVxdWVzdCBTSE9VTEQgTk9UIGJlIHNlbnQgdG8gY2FuY2VsIGEgcmVxdWVzdCBvdGhlciB0aGFuIElOVklURS5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTkuMVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQ2FuY2VsIG9wdGlvbnMgYnVja2V0LlxuICAgICAqL1xuICAgIGNhbmNlbChyZWFzb24sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyYW5zYWN0aW9uIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm1lc3NhZ2UudG8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm1lc3NhZ2UuZnJvbSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnJvbSB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgcHJvY2VkdXJlcyBhcmUgdXNlZCB0byBjb25zdHJ1Y3QgYSBDQU5DRUwgcmVxdWVzdC4gIFRoZVxuICAgICAgICAvLyBSZXF1ZXN0LVVSSSwgQ2FsbC1JRCwgVG8sIHRoZSBudW1lcmljIHBhcnQgb2YgQ1NlcSwgYW5kIEZyb20gaGVhZGVyXG4gICAgICAgIC8vIGZpZWxkcyBpbiB0aGUgQ0FOQ0VMIHJlcXVlc3QgTVVTVCBiZSBpZGVudGljYWwgdG8gdGhvc2UgaW4gdGhlXG4gICAgICAgIC8vIHJlcXVlc3QgYmVpbmcgY2FuY2VsbGVkLCBpbmNsdWRpbmcgdGFncy4gIEEgQ0FOQ0VMIGNvbnN0cnVjdGVkIGJ5IGFcbiAgICAgICAgLy8gY2xpZW50IE1VU1QgaGF2ZSBvbmx5IGEgc2luZ2xlIFZpYSBoZWFkZXIgZmllbGQgdmFsdWUgbWF0Y2hpbmcgdGhlXG4gICAgICAgIC8vIHRvcCBWaWEgdmFsdWUgaW4gdGhlIHJlcXVlc3QgYmVpbmcgY2FuY2VsbGVkLiAgVXNpbmcgdGhlIHNhbWUgdmFsdWVzXG4gICAgICAgIC8vIGZvciB0aGVzZSBoZWFkZXIgZmllbGRzIGFsbG93cyB0aGUgQ0FOQ0VMIHRvIGJlIG1hdGNoZWQgd2l0aCB0aGVcbiAgICAgICAgLy8gcmVxdWVzdCBpdCBjYW5jZWxzIChTZWN0aW9uIDkuMiBpbmRpY2F0ZXMgaG93IHN1Y2ggbWF0Y2hpbmcgb2NjdXJzKS5cbiAgICAgICAgLy8gSG93ZXZlciwgdGhlIG1ldGhvZCBwYXJ0IG9mIHRoZSBDU2VxIGhlYWRlciBmaWVsZCBNVVNUIGhhdmUgYSB2YWx1ZVxuICAgICAgICAvLyBvZiBDQU5DRUwuICBUaGlzIGFsbG93cyBpdCB0byBiZSBpZGVudGlmaWVkIGFuZCBwcm9jZXNzZWQgYXMgYVxuICAgICAgICAvLyB0cmFuc2FjdGlvbiBpbiBpdHMgb3duIHJpZ2h0IChTZWUgU2VjdGlvbiAxNykuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOS4xXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmNvcmUubWFrZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoQy5DQU5DRUwsIHRoaXMubWVzc2FnZS5ydXJpLCB0aGlzLm1lc3NhZ2UuZnJvbS51cmksIHRoaXMubWVzc2FnZS50by51cmksIHtcbiAgICAgICAgICAgIHRvVGFnOiB0aGlzLm1lc3NhZ2UudG9UYWcsXG4gICAgICAgICAgICBmcm9tVGFnOiB0aGlzLm1lc3NhZ2UuZnJvbVRhZyxcbiAgICAgICAgICAgIGNhbGxJZDogdGhpcy5tZXNzYWdlLmNhbGxJZCxcbiAgICAgICAgICAgIGNzZXE6IHRoaXMubWVzc2FnZS5jc2VxXG4gICAgICAgIH0sIG9wdGlvbnMuZXh0cmFIZWFkZXJzKTtcbiAgICAgICAgLy8gVE9ETzogUmV2aXNpdCB0aGlzLlxuICAgICAgICAvLyBUaGUgQ0FOQ0VMIG5lZWRzIHRvIHVzZSB0aGUgc2FtZSBicmFuY2ggcGFyYW1ldGVyIHNvIHRoYXRcbiAgICAgICAgLy8gaXQgbWF0Y2hlcyB0aGUgSU5WSVRFIHRyYW5zYWN0aW9uLCBidXQgdGhpcyBpcyBhIGhhY2t5IHdheSB0byBkbyB0aGlzLlxuICAgICAgICAvLyBPciBhdCB0aGUgdmVyeSBsZWFzdCBub3Qgd2VsbCBkb2N1bWVudGVkLiBJZiB0aGUgdGhlIGJyYW5jaCBwYXJhbWV0ZXJcbiAgICAgICAgLy8gaXMgc2V0IG9uIHRoZSBvdXRnb2luZyByZXF1ZXN0LCB0aGUgdHJhbnNhY3Rpb24gd2lsbCB1c2UgaXQuXG4gICAgICAgIC8vIE90aGVyd2lzZSB0aGUgdHJhbnNhY3Rpb24gd2lsbCBtYWtlIGEgbmV3IG9uZS5cbiAgICAgICAgbWVzc2FnZS5icmFuY2ggPSB0aGlzLm1lc3NhZ2UuYnJhbmNoO1xuICAgICAgICBpZiAodGhpcy5tZXNzYWdlLmhlYWRlcnMuUm91dGUpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UuaGVhZGVycy5Sb3V0ZSA9IHRoaXMubWVzc2FnZS5oZWFkZXJzLlJvdXRlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWFzb24pIHtcbiAgICAgICAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKFwiUmVhc29uXCIsIHJlYXNvbik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgbm8gcHJvdmlzaW9uYWwgcmVzcG9uc2UgaGFzIGJlZW4gcmVjZWl2ZWQsIHRoZSBDQU5DRUwgcmVxdWVzdCBNVVNUXG4gICAgICAgIC8vIE5PVCBiZSBzZW50OyByYXRoZXIsIHRoZSBjbGllbnQgTVVTVCB3YWl0IGZvciB0aGUgYXJyaXZhbCBvZiBhXG4gICAgICAgIC8vIHByb3Zpc2lvbmFsIHJlc3BvbnNlIGJlZm9yZSBzZW5kaW5nIHRoZSByZXF1ZXN0LiBJZiB0aGUgb3JpZ2luYWxcbiAgICAgICAgLy8gcmVxdWVzdCBoYXMgZ2VuZXJhdGVkIGEgZmluYWwgcmVzcG9uc2UsIHRoZSBDQU5DRUwgU0hPVUxEIE5PVCBiZVxuICAgICAgICAvLyBzZW50LCBhcyBpdCBpcyBhbiBlZmZlY3RpdmUgbm8tb3AsIHNpbmNlIENBTkNFTCBoYXMgbm8gZWZmZWN0IG9uXG4gICAgICAgIC8vIHJlcXVlc3RzIHRoYXQgaGF2ZSBhbHJlYWR5IGdlbmVyYXRlZCBhIGZpbmFsIHJlc3BvbnNlLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTkuMVxuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nKSB7XG4gICAgICAgICAgICBuZXcgVXNlckFnZW50Q2xpZW50KE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uLCB0aGlzLmNvcmUsIG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvbi5hZGRTdGF0ZUNoYW5nZUxpc3RlbmVyKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbiAmJiB0aGlzLnRyYW5zYWN0aW9uLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFVzZXJBZ2VudENsaWVudChOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwgdGhpcy5jb3JlLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIGEgNDAxIChVbmF1dGhvcml6ZWQpIG9yIDQwNyAoUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWQpXG4gICAgICogcmVzcG9uc2UgaXMgcmVjZWl2ZWQsIHRoZSBVQUMgU0hPVUxEIGZvbGxvdyB0aGUgYXV0aG9yaXphdGlvblxuICAgICAqIHByb2NlZHVyZXMgb2YgU2VjdGlvbiAyMi4yIGFuZCBTZWN0aW9uIDIyLjMgdG8gcmV0cnkgdGhlIHJlcXVlc3Qgd2l0aFxuICAgICAqIGNyZWRlbnRpYWxzLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOC4xLjMuNVxuICAgICAqIDIyIFVzYWdlIG9mIEhUVFAgQXV0aGVudGljYXRpb25cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTIyXG4gICAgICogMjIuMSBGcmFtZXdvcmtcbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTIyLjFcbiAgICAgKiAyMi4yIFVzZXItdG8tVXNlciBBdXRoZW50aWNhdGlvblxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMjIuMlxuICAgICAqIDIyLjMgUHJveHktdG8tVXNlciBBdXRoZW50aWNhdGlvblxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMjIuM1xuICAgICAqXG4gICAgICogRklYTUU6IFRoaXMgXCJndWFyZCBmb3IgYW5kIHJldHJ5IHRoZSByZXF1ZXN0IHdpdGggY3JlZGVudGlhbHNcIlxuICAgICAqIGltcGxlbWVudGF0aW9uIGlzIG5vdCBjb21wbGV0ZSBhbmQgYXQgYmVzdCBtaW5pbWFsbHkgcGFzc2FibGUuXG4gICAgICogQHBhcmFtIHJlc3BvbnNlIC0gVGhlIGluY29taW5nIHJlc3BvbnNlIHRvIGd1YXJkLlxuICAgICAqIEBwYXJhbSBkaWFsb2cgLSBJZiBkZWZpbmVkLCB0aGUgZGlhbG9nIHdpdGhpbiB3aGljaCB0aGUgcmVzcG9uc2Ugd2FzIHJlY2VpdmVkLlxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHByb2dyYW0gZXhlY3V0aW9uIGlzIHRvIGNvbnRpbnVlIGluIHRoZSBicmFuY2ggaW4gcXVlc3Rpb24uXG4gICAgICogICAgICAgICAgT3RoZXJ3aXNlIHRoZSByZXF1ZXN0IGlzIHJldHJpZWQgd2l0aCBjcmVkZW50aWFscyBhbmQgY3VycmVudCByZXF1ZXN0IHByb2Nlc3NpbmcgbXVzdCBzdG9wLlxuICAgICAqL1xuICAgIGF1dGhlbnRpY2F0aW9uR3VhcmQobWVzc2FnZSwgZGlhbG9nKSB7XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBtZXNzYWdlLnN0YXR1c0NvZGU7XG4gICAgICAgIGlmICghc3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVzcG9uc2Ugc3RhdHVzIGNvZGUgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBhIDQwMSAoVW5hdXRob3JpemVkKSBvciA0MDcgKFByb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkKVxuICAgICAgICAvLyByZXNwb25zZSBpcyByZWNlaXZlZCwgdGhlIFVBQyBTSE9VTEQgZm9sbG93IHRoZSBhdXRob3JpemF0aW9uXG4gICAgICAgIC8vIHByb2NlZHVyZXMgb2YgU2VjdGlvbiAyMi4yIGFuZCBTZWN0aW9uIDIyLjMgdG8gcmV0cnkgdGhlIHJlcXVlc3Qgd2l0aFxuICAgICAgICAvLyBjcmVkZW50aWFscy5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjEuMy41XG4gICAgICAgIGlmIChzdGF0dXNDb2RlICE9PSA0MDEgJiYgc3RhdHVzQ29kZSAhPT0gNDA3KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBHZXQgYW5kIHBhcnNlIHRoZSBhcHByb3ByaWF0ZSBXV1ctQXV0aGVudGljYXRlIG9yIFByb3h5LUF1dGhlbnRpY2F0ZSBoZWFkZXIuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCBjaGFsbGVuZ2U7XG4gICAgICAgIGxldCBhdXRob3JpemF0aW9uSGVhZGVyTmFtZTtcbiAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT09IDQwMSkge1xuICAgICAgICAgICAgY2hhbGxlbmdlID0gbWVzc2FnZS5wYXJzZUhlYWRlcihcInd3dy1hdXRoZW50aWNhdGVcIik7XG4gICAgICAgICAgICBhdXRob3JpemF0aW9uSGVhZGVyTmFtZSA9IFwiYXV0aG9yaXphdGlvblwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlID0gbWVzc2FnZS5wYXJzZUhlYWRlcihcInByb3h5LWF1dGhlbnRpY2F0ZVwiKTtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb25IZWFkZXJOYW1lID0gXCJwcm94eS1hdXRob3JpemF0aW9uXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVmVyaWZ5IGl0IHNlZW1zIGEgdmFsaWQgY2hhbGxlbmdlLlxuICAgICAgICBpZiAoIWNoYWxsZW5nZSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihzdGF0dXNDb2RlICsgXCIgd2l0aCB3cm9uZyBvciBtaXNzaW5nIGNoYWxsZW5nZSwgY2Fubm90IGF1dGhlbnRpY2F0ZVwiKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEF2b2lkIGluZmluaXRlIGF1dGhlbnRpY2F0aW9ucy5cbiAgICAgICAgaWYgKHRoaXMuY2hhbGxlbmdlZCAmJiAodGhpcy5zdGFsZSB8fCBjaGFsbGVuZ2Uuc3RhbGUgIT09IHRydWUpKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKHN0YXR1c0NvZGUgKyBcIiBhcHBhcmVudGx5IGluIGF1dGhlbnRpY2F0aW9uIGxvb3AsIGNhbm5vdCBhdXRoZW50aWNhdGVcIik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBHZXQgY3JlZGVudGlhbHMuXG4gICAgICAgIGlmICghdGhpcy5jcmVkZW50aWFscykge1xuICAgICAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IHRoaXMuY29yZS5jb25maWd1cmF0aW9uLmF1dGhlbnRpY2F0aW9uRmFjdG9yeSgpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIlVuYWJsZSB0byBvYnRhaW4gY3JlZGVudGlhbHMsIGNhbm5vdCBhdXRoZW50aWNhdGVcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlIGNoYWxsZW5nZSBpcyByZWFsbHkgdmFsaWQuXG4gICAgICAgIGlmICghdGhpcy5jcmVkZW50aWFscy5hdXRoZW50aWNhdGUodGhpcy5tZXNzYWdlLCBjaGFsbGVuZ2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYWxsZW5nZWQgPSB0cnVlO1xuICAgICAgICBpZiAoY2hhbGxlbmdlLnN0YWxlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YWxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiByZXNwb25zZSB0byBvdXQgb2YgZGlhbG9nIHJlcXVlc3QsIGFzc3VtZSBpbmNyZW1lbnRpbmcgdGhlIENTZXEgd2lsbCBzdWZmaWNlLlxuICAgICAgICBsZXQgY3NlcSA9ICh0aGlzLm1lc3NhZ2UuY3NlcSArPSAxKTtcbiAgICAgICAgLy8gSWYgcmVzcG9uc2UgdG8gaW4gZGlhbG9nIHJlcXVlc3QsIGdldCBhIHZhbGlkIG5leHQgQ1NlcSBudW1iZXIuXG4gICAgICAgIGlmIChkaWFsb2cgJiYgZGlhbG9nLmxvY2FsU2VxdWVuY2VOdW1iZXIpIHtcbiAgICAgICAgICAgIGRpYWxvZy5pbmNyZW1lbnRMb2NhbFNlcXVlbmNlTnVtYmVyKCk7XG4gICAgICAgICAgICBjc2VxID0gdGhpcy5tZXNzYWdlLmNzZXEgPSBkaWFsb2cubG9jYWxTZXF1ZW5jZU51bWJlcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1lc3NhZ2Uuc2V0SGVhZGVyKFwiY3NlcVwiLCBjc2VxICsgXCIgXCIgKyB0aGlzLm1lc3NhZ2UubWV0aG9kKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlLnNldEhlYWRlcihhdXRob3JpemF0aW9uSGVhZGVyTmFtZSwgdGhpcy5jcmVkZW50aWFscy50b1N0cmluZygpKTtcbiAgICAgICAgLy8gQ2FsbGluZyBpbml0IChhZ2Fpbikgd2lsbCBzd2FwIG91dCBvdXIgZXhpc3RpbmcgY2xpZW50IHRyYW5zYWN0aW9uIHdpdGggYSBuZXcgb25lLlxuICAgICAgICAvLyBGSVhNRTogSEFDSzogQW4gYXNzdW1wdGlvbiBpcyBiZWluZyBtYWRlIGhlcmUgdGhhdCB0aGVyZSBpcyBub3RoaW5nIHRoYXQgbmVlZHMgdG9cbiAgICAgICAgLy8gYmUgY2xlYW5lZCB1cCBiZXlvbmQgdGhlIGNsaWVudCB0cmFuc2FjdGlvbiB3aGljaCBpcyBiZWluZyByZXBsYWNlZC4gRm9yIGV4YW1wbGUsXG4gICAgICAgIC8vIGl0IGlzIGFzc3VtZWQgdGhhdCBubyBlYXJseSBkaWFsb2dzIGhhdmUgYmVlbiBjcmVhdGVkLlxuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiA4LjEuMy4xIFRyYW5zYWN0aW9uIExheWVyIEVycm9yc1xuICAgICAqIEluIHNvbWUgY2FzZXMsIHRoZSByZXNwb25zZSByZXR1cm5lZCBieSB0aGUgdHJhbnNhY3Rpb24gbGF5ZXIgd2lsbFxuICAgICAqIG5vdCBiZSBhIFNJUCBtZXNzYWdlLCBidXQgcmF0aGVyIGEgdHJhbnNhY3Rpb24gbGF5ZXIgZXJyb3IuICBXaGVuIGFcbiAgICAgKiB0aW1lb3V0IGVycm9yIGlzIHJlY2VpdmVkIGZyb20gdGhlIHRyYW5zYWN0aW9uIGxheWVyLCBpdCBNVVNUIGJlXG4gICAgICogdHJlYXRlZCBhcyBpZiBhIDQwOCAoUmVxdWVzdCBUaW1lb3V0KSBzdGF0dXMgY29kZSBoYXMgYmVlbiByZWNlaXZlZC5cbiAgICAgKiBJZiBhIGZhdGFsIHRyYW5zcG9ydCBlcnJvciBpcyByZXBvcnRlZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyXG4gICAgICogKGdlbmVyYWxseSwgZHVlIHRvIGZhdGFsIElDTVAgZXJyb3JzIGluIFVEUCBvciBjb25uZWN0aW9uIGZhaWx1cmVzIGluXG4gICAgICogVENQKSwgdGhlIGNvbmRpdGlvbiBNVVNUIGJlIHRyZWF0ZWQgYXMgYSA1MDMgKFNlcnZpY2UgVW5hdmFpbGFibGUpXG4gICAgICogc3RhdHVzIGNvZGUuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjEuMy4xXG4gICAgICovXG4gICAgb25SZXF1ZXN0VGltZW91dCgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIlVzZXIgYWdlbnQgY2xpZW50IHJlcXVlc3QgdGltZWQgb3V0LiBHZW5lcmF0aW5nIGludGVybmFsIDQwOCBSZXF1ZXN0IFRpbWVvdXQuXCIpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gbmV3IEluY29taW5nUmVzcG9uc2VNZXNzYWdlKCk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhdHVzQ29kZSA9IDQwODtcbiAgICAgICAgbWVzc2FnZS5yZWFzb25QaHJhc2UgPSBcIlJlcXVlc3QgVGltZW91dFwiO1xuICAgICAgICB0aGlzLnJlY2VpdmVSZXNwb25zZShtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiA4LjEuMy4xIFRyYW5zYWN0aW9uIExheWVyIEVycm9yc1xuICAgICAqIEluIHNvbWUgY2FzZXMsIHRoZSByZXNwb25zZSByZXR1cm5lZCBieSB0aGUgdHJhbnNhY3Rpb24gbGF5ZXIgd2lsbFxuICAgICAqIG5vdCBiZSBhIFNJUCBtZXNzYWdlLCBidXQgcmF0aGVyIGEgdHJhbnNhY3Rpb24gbGF5ZXIgZXJyb3IuICBXaGVuIGFcbiAgICAgKiB0aW1lb3V0IGVycm9yIGlzIHJlY2VpdmVkIGZyb20gdGhlIHRyYW5zYWN0aW9uIGxheWVyLCBpdCBNVVNUIGJlXG4gICAgICogdHJlYXRlZCBhcyBpZiBhIDQwOCAoUmVxdWVzdCBUaW1lb3V0KSBzdGF0dXMgY29kZSBoYXMgYmVlbiByZWNlaXZlZC5cbiAgICAgKiBJZiBhIGZhdGFsIHRyYW5zcG9ydCBlcnJvciBpcyByZXBvcnRlZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyXG4gICAgICogKGdlbmVyYWxseSwgZHVlIHRvIGZhdGFsIElDTVAgZXJyb3JzIGluIFVEUCBvciBjb25uZWN0aW9uIGZhaWx1cmVzIGluXG4gICAgICogVENQKSwgdGhlIGNvbmRpdGlvbiBNVVNUIGJlIHRyZWF0ZWQgYXMgYSA1MDMgKFNlcnZpY2UgVW5hdmFpbGFibGUpXG4gICAgICogc3RhdHVzIGNvZGUuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjEuMy4xXG4gICAgICogQHBhcmFtIGVycm9yIC0gVHJhbnNwb3J0IGVycm9yXG4gICAgICovXG4gICAgb25UcmFuc3BvcnRFcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJVc2VyIGFnZW50IGNsaWVudCByZXF1ZXN0IHRyYW5zcG9ydCBlcnJvci4gR2VuZXJhdGluZyBpbnRlcm5hbCA1MDMgU2VydmljZSBVbmF2YWlsYWJsZS5cIik7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgSW5jb21pbmdSZXNwb25zZU1lc3NhZ2UoKTtcbiAgICAgICAgbWVzc2FnZS5zdGF0dXNDb2RlID0gNTAzO1xuICAgICAgICBtZXNzYWdlLnJlYXNvblBocmFzZSA9IFwiU2VydmljZSBVbmF2YWlsYWJsZVwiO1xuICAgICAgICB0aGlzLnJlY2VpdmVSZXNwb25zZShtZXNzYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjZWl2ZSBhIHJlc3BvbnNlIGZyb20gdGhlIHRyYW5zYWN0aW9uIGxheWVyLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gSW5jb21pbmcgcmVzcG9uc2UgbWVzc2FnZS5cbiAgICAgKi9cbiAgICByZWNlaXZlUmVzcG9uc2UobWVzc2FnZSkge1xuICAgICAgICBpZiAoIXRoaXMuYXV0aGVudGljYXRpb25HdWFyZChtZXNzYWdlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBtZXNzYWdlLnN0YXR1c0NvZGUgPyBtZXNzYWdlLnN0YXR1c0NvZGUudG9TdHJpbmcoKSA6IFwiXCI7XG4gICAgICAgIGlmICghc3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVzcG9uc2Ugc3RhdHVzIGNvZGUgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgICAgIGNhc2UgL14xMDAkLy50ZXN0KHN0YXR1c0NvZGUpOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25UcnlpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblRyeWluZyh7IG1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAvXjFbMC05XXsyfSQvLnRlc3Qoc3RhdHVzQ29kZSk6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25Qcm9ncmVzcyh7IG1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAvXjJbMC05XXsyfSQvLnRlc3Qoc3RhdHVzQ29kZSk6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uQWNjZXB0KHsgbWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIC9eM1swLTldezJ9JC8udGVzdChzdGF0dXNDb2RlKTpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uUmVkaXJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblJlZGlyZWN0KHsgbWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIC9eWzQtNl1bMC05XXsyfSQvLnRlc3Qoc3RhdHVzQ29kZSk6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vblJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uUmVqZWN0KHsgbWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0dXMgY29kZSAke3N0YXR1c0NvZGV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgLy8gV2UgYXJlIHRoZSB0cmFuc2FjdGlvbiB1c2VyLlxuICAgICAgICBjb25zdCB1c2VyID0ge1xuICAgICAgICAgICAgbG9nZ2VyRmFjdG9yeTogdGhpcy5sb2dnZXJGYWN0b3J5LFxuICAgICAgICAgICAgb25SZXF1ZXN0VGltZW91dDogKCkgPT4gdGhpcy5vblJlcXVlc3RUaW1lb3V0KCksXG4gICAgICAgICAgICBvblN0YXRlQ2hhbmdlOiAobmV3U3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobmV3U3RhdGUgPT09IFRyYW5zYWN0aW9uU3RhdGUuVGVybWluYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHRlcm1pbmF0ZWQgdHJhbnNhY3Rpb24gZnJvbSB0aGUgY29yZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcmUudXNlckFnZW50Q2xpZW50cy5kZWxldGUodXNlckFnZW50Q2xpZW50SWQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRTogSEFDSzogT3VyIHRyYW5zYWN0aW9uIG1heSBoYXZlIGJlZW4gc3dhcHBlZCBvdXQgd2l0aCBhIG5ldyBvbmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9zdCBhdXRoZW50aWNhdGlvbiAoc2VlIGFib3ZlKSwgc28gbWFrZSBzdXJlIHRvIG9ubHkgdG8gZGlzcG9zZSBvZlxuICAgICAgICAgICAgICAgICAgICAvLyBvdXJzZWx2ZXMgaWYgdGhpcyB0ZXJtaW5hdGluZyB0cmFuc2FjdGlvbiBpcyBvdXIgY3VycmVudCB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24gPT09IHRoaXMuX3RyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblRyYW5zcG9ydEVycm9yOiAoZXJyb3IpID0+IHRoaXMub25UcmFuc3BvcnRFcnJvcihlcnJvciksXG4gICAgICAgICAgICByZWNlaXZlUmVzcG9uc2U6IChtZXNzYWdlKSA9PiB0aGlzLnJlY2VpdmVSZXNwb25zZShtZXNzYWdlKVxuICAgICAgICB9O1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgdHJhbnNhY3Rpb24gd2l0aCB1cyBhcyB0aGUgdXNlci5cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBuZXcgdGhpcy50cmFuc2FjdGlvbkNvbnN0cnVjdG9yKHRoaXMubWVzc2FnZSwgdGhpcy5jb3JlLnRyYW5zcG9ydCwgdXNlcik7XG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb247XG4gICAgICAgIC8vIEFkZCB0aGUgbmV3IHRyYW5zYWN0aW9uIHRvIHRoZSBjb3JlLlxuICAgICAgICBjb25zdCB1c2VyQWdlbnRDbGllbnRJZCA9IHRyYW5zYWN0aW9uLmlkICsgdHJhbnNhY3Rpb24ucmVxdWVzdC5tZXRob2Q7XG4gICAgICAgIHRoaXMuY29yZS51c2VyQWdlbnRDbGllbnRzLnNldCh1c2VyQWdlbnRDbGllbnRJZCwgdGhpcyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQyB9IGZyb20gXCIuLi9tZXNzYWdlc1wiO1xuaW1wb3J0IHsgTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24gfSBmcm9tIFwiLi4vdHJhbnNhY3Rpb25zXCI7XG5pbXBvcnQgeyBVc2VyQWdlbnRDbGllbnQgfSBmcm9tIFwiLi91c2VyLWFnZW50LWNsaWVudFwiO1xuLyoqXG4gKiBCWUUgVUFDLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQnllVXNlckFnZW50Q2xpZW50IGV4dGVuZHMgVXNlckFnZW50Q2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihkaWFsb2csIGRlbGVnYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBkaWFsb2cuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShDLkJZRSwgb3B0aW9ucyk7XG4gICAgICAgIHN1cGVyKE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uLCBkaWFsb2cudXNlckFnZW50Q29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpO1xuICAgICAgICBkaWFsb2cuZGlzcG9zZSgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFRpbWVycyB9IGZyb20gXCIuLi90aW1lcnNcIjtcbmltcG9ydCB7IFNlcnZlclRyYW5zYWN0aW9uIH0gZnJvbSBcIi4vc2VydmVyLXRyYW5zYWN0aW9uXCI7XG5pbXBvcnQgeyBUcmFuc2FjdGlvblN0YXRlIH0gZnJvbSBcIi4vdHJhbnNhY3Rpb24tc3RhdGVcIjtcbi8qKlxuICogTm9uLUlOVklURSBTZXJ2ZXIgVHJhbnNhY3Rpb24uXG4gKiBAcmVtYXJrc1xuICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4yLjJcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uIGV4dGVuZHMgU2VydmVyVHJhbnNhY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yLlxuICAgICAqIEFmdGVyIGNvbnN0cnVjdGlvbiB0aGUgdHJhbnNhY3Rpb24gd2lsbCBiZSBpbiB0aGUgXCJ0cnlpbmdcIjogc3RhdGUgYW5kIHRoZSB0cmFuc2FjdGlvblxuICAgICAqIGBpZGAgd2lsbCBlcXVhbCB0aGUgYnJhbmNoIHBhcmFtZXRlciBzZXQgaW4gdGhlIFZpYSBoZWFkZXIgb2YgdGhlIGluY29taW5nIHJlcXVlc3QuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4yLjJcbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIEluY29taW5nIE5vbi1JTlZJVEUgcmVxdWVzdCBmcm9tIHRoZSB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIHRyYW5zcG9ydCAtIFRoZSB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIHVzZXIgLSBUaGUgdHJhbnNhY3Rpb24gdXNlci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0LCB0cmFuc3BvcnQsIHVzZXIpIHtcbiAgICAgICAgc3VwZXIocmVxdWVzdCwgdHJhbnNwb3J0LCB1c2VyLCBUcmFuc2FjdGlvblN0YXRlLlRyeWluZywgXCJzaXAudHJhbnNhY3Rpb24ubmlzdFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzdHJ1Y3Rvci5cbiAgICAgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5KKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5KKTtcbiAgICAgICAgICAgIHRoaXMuSiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgfVxuICAgIC8qKiBUcmFuc2FjdGlvbiBraW5kLiBEZXByZWNhdGVkLiAqL1xuICAgIGdldCBraW5kKCkge1xuICAgICAgICByZXR1cm4gXCJuaXN0XCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY2VpdmUgcmVxdWVzdHMgZnJvbSB0cmFuc3BvcnQgbWF0Y2hpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIFJlcXVlc3QgbWF0Y2hpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgcmVjZWl2ZVJlcXVlc3QocmVxdWVzdCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Ucnlpbmc6XG4gICAgICAgICAgICAgICAgLy8gT25jZSBpbiB0aGUgXCJUcnlpbmdcIiBzdGF0ZSwgYW55IGZ1cnRoZXIgcmVxdWVzdCByZXRyYW5zbWlzc2lvbnMgYXJlIGRpc2NhcmRlZC5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjIuMlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmc6XG4gICAgICAgICAgICAgICAgLy8gSWYgYSByZXRyYW5zbWlzc2lvbiBvZiB0aGUgcmVxdWVzdCBpcyByZWNlaXZlZCB3aGlsZSBpbiB0aGUgXCJQcm9jZWVkaW5nXCIgc3RhdGUsXG4gICAgICAgICAgICAgICAgLy8gdGhlIG1vc3QgcmVjZW50bHkgc2VudCBwcm92aXNpb25hbCByZXNwb25zZSBNVVNUIGJlIHBhc3NlZCB0byB0aGUgdHJhbnNwb3J0IGxheWVyIGZvciByZXRyYW5zbWlzc2lvbi5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjIuMlxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5sYXN0UmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGFzdCByZXNwb25zZSB1bmRlZmluZWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQodGhpcy5sYXN0UmVzcG9uc2UpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGVycm9yLCBcIkZhaWxlZCB0byBzZW5kIHJldHJhbnNtaXNzaW9uIG9mIHByb3Zpc2lvbmFsIHJlc3BvbnNlLlwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQ6XG4gICAgICAgICAgICAgICAgLy8gV2hpbGUgaW4gdGhlIFwiQ29tcGxldGVkXCIgc3RhdGUsIHRoZSBzZXJ2ZXIgdHJhbnNhY3Rpb24gTVVTVCBwYXNzIHRoZSBmaW5hbCByZXNwb25zZSB0byB0aGUgdHJhbnNwb3J0XG4gICAgICAgICAgICAgICAgLy8gbGF5ZXIgZm9yIHJldHJhbnNtaXNzaW9uIHdoZW5ldmVyIGEgcmV0cmFuc21pc3Npb24gb2YgdGhlIHJlcXVlc3QgaXMgcmVjZWl2ZWQuIEFueSBvdGhlciBmaW5hbCByZXNwb25zZXNcbiAgICAgICAgICAgICAgICAvLyBwYXNzZWQgYnkgdGhlIFRVIHRvIHRoZSBzZXJ2ZXIgdHJhbnNhY3Rpb24gTVVTVCBiZSBkaXNjYXJkZWQgd2hpbGUgaW4gdGhlIFwiQ29tcGxldGVkXCIgc3RhdGUuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4yLjJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubGFzdFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxhc3QgcmVzcG9uc2UgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kKHRoaXMubGFzdFJlc3BvbnNlKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlcnJvciwgXCJGYWlsZWQgdG8gc2VuZCByZXRyYW5zbWlzc2lvbiBvZiBmaW5hbCByZXNwb25zZS5cIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuVGVybWluYXRlZDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlICR7dGhpcy5zdGF0ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNlaXZlIHJlc3BvbnNlcyBmcm9tIFRVIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSBzdGF0dXNDb2RlIC0gU3RhdHVzIGNvZGUgb2YgcmVzcG9uc2UuIDEwMS0xOTkgbm90IGFsbG93ZWQgcGVyIFJGQyA0MzIwLlxuICAgICAqIEBwYXJhbSByZXNwb25zZSAtIFJlc3BvbnNlIHRvIHNlbmQuXG4gICAgICovXG4gICAgcmVjZWl2ZVJlc3BvbnNlKHN0YXR1c0NvZGUsIHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChzdGF0dXNDb2RlIDwgMTAwIHx8IHN0YXR1c0NvZGUgPiA2OTkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0dXMgY29kZSAke3N0YXR1c0NvZGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQW4gU0lQIGVsZW1lbnQgTVVTVCBOT1Qgc2VuZCBhbnkgcHJvdmlzaW9uYWwgcmVzcG9uc2Ugd2l0aCBhXG4gICAgICAgIC8vIFN0YXR1cy1Db2RlIG90aGVyIHRoYW4gMTAwIHRvIGEgbm9uLUlOVklURSByZXF1ZXN0LlxuICAgICAgICAvLyBBbiBTSVAgZWxlbWVudCBNVVNUIE5PVCByZXNwb25kIHRvIGEgbm9uLUlOVklURSByZXF1ZXN0IHdpdGggYVxuICAgICAgICAvLyBTdGF0dXMtQ29kZSBvZiAxMDAgb3ZlciBhbnkgdW5yZWxpYWJsZSB0cmFuc3BvcnQsIHN1Y2ggYXMgVURQLFxuICAgICAgICAvLyBiZWZvcmUgdGhlIGFtb3VudCBvZiB0aW1lIGl0IHRha2VzIGEgY2xpZW50IHRyYW5zYWN0aW9uJ3MgVGltZXIgRSB0byBiZSByZXNldCB0byBUMi5cbiAgICAgICAgLy8gQW4gU0lQIGVsZW1lbnQgTUFZIHJlc3BvbmQgdG8gYSBub24tSU5WSVRFIHJlcXVlc3Qgd2l0aCBhXG4gICAgICAgIC8vIFN0YXR1cy1Db2RlIG9mIDEwMCBvdmVyIGEgcmVsaWFibGUgdHJhbnNwb3J0IGF0IGFueSB0aW1lLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNDMyMCNzZWN0aW9uLTQuMVxuICAgICAgICBpZiAoc3RhdHVzQ29kZSA+IDEwMCAmJiBzdGF0dXNDb2RlIDw9IDE5OSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvdmlzaW9uYWwgcmVzcG9uc2Ugb3RoZXIgdGhhbiAxMDAgbm90IGFsbG93ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLlRyeWluZzpcbiAgICAgICAgICAgICAgICAvLyBXaGlsZSBpbiB0aGUgXCJUcnlpbmdcIiBzdGF0ZSwgaWYgdGhlIFRVIHBhc3NlcyBhIHByb3Zpc2lvbmFsIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIHNlcnZlciB0cmFuc2FjdGlvbiwgdGhlIHNlcnZlciB0cmFuc2FjdGlvbiBNVVNUIGVudGVyIHRoZSBcIlByb2NlZWRpbmdcIiBzdGF0ZS5cbiAgICAgICAgICAgICAgICAvLyBUaGUgcmVzcG9uc2UgTVVTVCBiZSBwYXNzZWQgdG8gdGhlIHRyYW5zcG9ydCBsYXllciBmb3IgdHJhbnNtaXNzaW9uLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4yXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA+PSAxMDAgJiYgc3RhdHVzQ29kZSA8IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQocmVzcG9uc2UpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlcnJvciwgXCJGYWlsZWQgdG8gc2VuZCBwcm92aXNpb25hbCByZXNwb25zZS5cIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID49IDIwMCAmJiBzdGF0dXNDb2RlIDw9IDY5OSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihUcmFuc2FjdGlvblN0YXRlLkNvbXBsZXRlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZChyZXNwb25zZSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGVycm9yLCBcIkZhaWxlZCB0byBzZW5kIGZpbmFsIHJlc3BvbnNlLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuUHJvY2VlZGluZzpcbiAgICAgICAgICAgICAgICAvLyBBbnkgZnVydGhlciBwcm92aXNpb25hbCByZXNwb25zZXMgdGhhdCBhcmUgcmVjZWl2ZWQgZnJvbSB0aGUgVFUgd2hpbGVcbiAgICAgICAgICAgICAgICAvLyBpbiB0aGUgXCJQcm9jZWVkaW5nXCIgc3RhdGUgTVVTVCBiZSBwYXNzZWQgdG8gdGhlIHRyYW5zcG9ydCBsYXllciBmb3IgdHJhbnNtaXNzaW9uLlxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBUVSBwYXNzZXMgYSBmaW5hbCByZXNwb25zZSAoc3RhdHVzIGNvZGVzIDIwMC02OTkpIHRvIHRoZSBzZXJ2ZXIgd2hpbGUgaW5cbiAgICAgICAgICAgICAgICAvLyB0aGUgXCJQcm9jZWVkaW5nXCIgc3RhdGUsIHRoZSB0cmFuc2FjdGlvbiBNVVNUIGVudGVyIHRoZSBcIkNvbXBsZXRlZFwiIHN0YXRlLCBhbmRcbiAgICAgICAgICAgICAgICAvLyB0aGUgcmVzcG9uc2UgTVVTVCBiZSBwYXNzZWQgdG8gdGhlIHRyYW5zcG9ydCBsYXllciBmb3IgdHJhbnNtaXNzaW9uLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4yXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA+PSAyMDAgJiYgc3RhdHVzQ29kZSA8PSA2OTkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQocmVzcG9uc2UpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlcnJvciwgXCJGYWlsZWQgdG8gc2VuZCBmaW5hbCByZXNwb25zZS5cIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLkNvbXBsZXRlZDpcbiAgICAgICAgICAgICAgICAvLyBBbnkgb3RoZXIgZmluYWwgcmVzcG9uc2VzIHBhc3NlZCBieSB0aGUgVFUgdG8gdGhlIHNlcnZlclxuICAgICAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uIE1VU1QgYmUgZGlzY2FyZGVkIHdoaWxlIGluIHRoZSBcIkNvbXBsZXRlZFwiIHN0YXRlLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4yXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLlRlcm1pbmF0ZWQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSAke3RoaXMuc3RhdGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBOb24tSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiByZWNlaXZlZCB1bmV4cGVjdGVkICR7c3RhdHVzQ29kZX0gcmVzcG9uc2UgZnJvbSBUVSB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LmA7XG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpcnN0LCB0aGUgcHJvY2VkdXJlcyBpbiBbNF0gYXJlIGZvbGxvd2VkLCB3aGljaCBhdHRlbXB0IHRvIGRlbGl2ZXIgdGhlIHJlc3BvbnNlIHRvIGEgYmFja3VwLlxuICAgICAqIElmIHRob3NlIHNob3VsZCBhbGwgZmFpbCwgYmFzZWQgb24gdGhlIGRlZmluaXRpb24gb2YgZmFpbHVyZSBpbiBbNF0sIHRoZSBzZXJ2ZXIgdHJhbnNhY3Rpb24gU0hPVUxEXG4gICAgICogaW5mb3JtIHRoZSBUVSB0aGF0IGEgZmFpbHVyZSBoYXMgb2NjdXJyZWQsIGFuZCBTSE9VTEQgdHJhbnNpdGlvbiB0byB0aGUgdGVybWluYXRlZCBzdGF0ZS5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjIuNFxuICAgICAqL1xuICAgIG9uVHJhbnNwb3J0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMudXNlci5vblRyYW5zcG9ydEVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnVzZXIub25UcmFuc3BvcnRFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqIEZvciBsb2dnaW5nLiAqL1xuICAgIHR5cGVUb1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwibm9uLUlOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb25cIjtcbiAgICB9XG4gICAgc3RhdGVUcmFuc2l0aW9uKG5ld1N0YXRlLCBkdWVUb1RyYW5zcG9ydEVycm9yID0gZmFsc2UpIHtcbiAgICAgICAgLy8gQXNzZXJ0IHZhbGlkIHN0YXRlIHRyYW5zaXRpb25zLlxuICAgICAgICBjb25zdCBpbnZhbGlkU3RhdGVUcmFuc2l0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuc3RhdGV9IHRvICR7bmV3U3RhdGV9YCk7XG4gICAgICAgIH07XG4gICAgICAgIHN3aXRjaCAobmV3U3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5Ucnlpbmc6XG4gICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmc6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFRyYW5zYWN0aW9uU3RhdGUuVHJ5aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRTdGF0ZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zYWN0aW9uU3RhdGUuQ29tcGxldGVkOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBUcmFuc2FjdGlvblN0YXRlLlRyeWluZyAmJiB0aGlzLnN0YXRlICE9PSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmcgJiYgdGhpcy5zdGF0ZSAhPT0gVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkdWVUb1RyYW5zcG9ydEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkU3RhdGVUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGludmFsaWRTdGF0ZVRyYW5zaXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIHRoZSBzZXJ2ZXIgdHJhbnNhY3Rpb24gZW50ZXJzIHRoZSBcIkNvbXBsZXRlZFwiIHN0YXRlLCBpdCBNVVNUIHNldCBUaW1lciBKIHRvIGZpcmVcbiAgICAgICAgLy8gaW4gNjQqVDEgc2Vjb25kcyBmb3IgdW5yZWxpYWJsZSB0cmFuc3BvcnRzLCBhbmQgemVybyBzZWNvbmRzIGZvciByZWxpYWJsZSB0cmFuc3BvcnRzLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE3LjIuMlxuICAgICAgICBpZiAobmV3U3RhdGUgPT09IFRyYW5zYWN0aW9uU3RhdGUuQ29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLkogPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudGltZXJKKCksIFRpbWVycy5USU1FUl9KKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgc2VydmVyIHRyYW5zYWN0aW9uIE1VU1QgYmUgZGVzdHJveWVkIHRoZSBpbnN0YW50IGl0IGVudGVycyB0aGUgXCJUZXJtaW5hdGVkXCIgc3RhdGUuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4yXG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNlcnZlciB0cmFuc2FjdGlvbiByZW1haW5zIGluIHRoaXMgc3RhdGUgdW50aWwgVGltZXIgSiBmaXJlcyxcbiAgICAgKiBhdCB3aGljaCBwb2ludCBpdCBNVVNUIHRyYW5zaXRpb24gdG8gdGhlIFwiVGVybWluYXRlZFwiIHN0YXRlLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4yXG4gICAgICovXG4gICAgdGltZXJKKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgSiBleHBpcmVkIGZvciBOT04tSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAke3RoaXMuaWR9LmApO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5Db21wbGV0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFRyYW5zYWN0aW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBFeGNlcHRpb24gfSBmcm9tIFwiLi9leGNlcHRpb25cIjtcbi8qKlxuICogSW5kaWNhdGVzIHRoYXQgdGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkIGdpdmVuIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uIHN0YXRlLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNhY3Rpb25TdGF0ZUVycm9yIGV4dGVuZHMgRXhjZXB0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgPyBtZXNzYWdlIDogXCJUcmFuc2FjdGlvbiBzdGF0ZSBlcnJvci5cIik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVHJhbnNhY3Rpb25TdGF0ZUVycm9yIH0gZnJvbSBcIi4uL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCB7IGNvbnN0cnVjdE91dGdvaW5nUmVzcG9uc2UgfSBmcm9tIFwiLi4vbWVzc2FnZXNcIjtcbmltcG9ydCB7IG5ld1RhZyB9IGZyb20gXCIuLi9tZXNzYWdlcy91dGlsc1wiO1xuaW1wb3J0IHsgSW52aXRlU2VydmVyVHJhbnNhY3Rpb24sIE5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uLCBUcmFuc2FjdGlvblN0YXRlIH0gZnJvbSBcIi4uL3RyYW5zYWN0aW9uc1wiO1xuLyoqXG4gKiBVc2VyIEFnZW50IFNlcnZlciAoVUFTKS5cbiAqIEByZW1hcmtzXG4gKiBBIHVzZXIgYWdlbnQgc2VydmVyIGlzIGEgbG9naWNhbCBlbnRpdHlcbiAqIHRoYXQgZ2VuZXJhdGVzIGEgcmVzcG9uc2UgdG8gYSBTSVAgcmVxdWVzdC4gIFRoZSByZXNwb25zZVxuICogYWNjZXB0cywgcmVqZWN0cywgb3IgcmVkaXJlY3RzIHRoZSByZXF1ZXN0LiAgVGhpcyByb2xlIGxhc3RzXG4gKiBvbmx5IGZvciB0aGUgZHVyYXRpb24gb2YgdGhhdCB0cmFuc2FjdGlvbi4gIEluIG90aGVyIHdvcmRzLCBpZlxuICogYSBwaWVjZSBvZiBzb2Z0d2FyZSByZXNwb25kcyB0byBhIHJlcXVlc3QsIGl0IGFjdHMgYXMgYSBVQVMgZm9yXG4gKiB0aGUgZHVyYXRpb24gb2YgdGhhdCB0cmFuc2FjdGlvbi4gIElmIGl0IGdlbmVyYXRlcyBhIHJlcXVlc3RcbiAqIGxhdGVyLCBpdCBhc3N1bWVzIHRoZSByb2xlIG9mIGEgdXNlciBhZ2VudCBjbGllbnQgZm9yIHRoZVxuICogcHJvY2Vzc2luZyBvZiB0aGF0IHRyYW5zYWN0aW9uLlxuICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi02XG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBVc2VyQWdlbnRTZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHRyYW5zYWN0aW9uQ29uc3RydWN0b3IsIGNvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25Db25zdHJ1Y3RvciA9IHRyYW5zYWN0aW9uQ29uc3RydWN0b3I7XG4gICAgICAgIHRoaXMuY29yZSA9IGNvcmU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSB0aGlzLmxvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFwic2lwLnVzZXItYWdlbnQtc2VydmVyXCIpO1xuICAgICAgICB0aGlzLnRvVGFnID0gbWVzc2FnZS50b1RhZyA/IG1lc3NhZ2UudG9UYWcgOiBuZXdUYWcoKTtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24uZGlzcG9zZSgpO1xuICAgIH1cbiAgICBnZXQgbG9nZ2VyRmFjdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29yZS5sb2dnZXJGYWN0b3J5O1xuICAgIH1cbiAgICAvKiogVGhlIHRyYW5zYWN0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJlcXVlc3QuICovXG4gICAgZ2V0IHRyYW5zYWN0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3RyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2FjdGlvbiB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbjtcbiAgICB9XG4gICAgYWNjZXB0KG9wdGlvbnMgPSB7IHN0YXR1c0NvZGU6IDIwMCB9KSB7XG4gICAgICAgIGlmICghdGhpcy5hY2NlcHRhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHJhbnNhY3Rpb25TdGF0ZUVycm9yKGAke3RoaXMubWVzc2FnZS5tZXRob2R9IG5vdCBhY2NlcHRhYmxlIGluIHN0YXRlICR7dGhpcy50cmFuc2FjdGlvbi5zdGF0ZX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzQ29kZSA9IG9wdGlvbnMuc3RhdHVzQ29kZTtcbiAgICAgICAgaWYgKHN0YXR1c0NvZGUgPCAyMDAgfHwgc3RhdHVzQ29kZSA+IDI5OSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBzdGF0dXNDb2RlOiAke3N0YXR1c0NvZGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLnJlcGx5KG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICAgIHByb2dyZXNzKG9wdGlvbnMgPSB7IHN0YXR1c0NvZGU6IDE4MCB9KSB7XG4gICAgICAgIGlmICghdGhpcy5wcm9ncmVzc2FibGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUcmFuc2FjdGlvblN0YXRlRXJyb3IoYCR7dGhpcy5tZXNzYWdlLm1ldGhvZH0gbm90IHByb2dyZXNzYWJsZSBpbiBzdGF0ZSAke3RoaXMudHJhbnNhY3Rpb24uc3RhdGV9LmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGU7XG4gICAgICAgIGlmIChzdGF0dXNDb2RlIDwgMTAxIHx8IHN0YXR1c0NvZGUgPiAxOTkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgc3RhdHVzQ29kZTogJHtzdGF0dXNDb2RlfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5yZXBseShvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICByZWRpcmVjdChjb250YWN0cywgb3B0aW9ucyA9IHsgc3RhdHVzQ29kZTogMzAyIH0pIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlZGlyZWN0YWJsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRyYW5zYWN0aW9uU3RhdGVFcnJvcihgJHt0aGlzLm1lc3NhZ2UubWV0aG9kfSBub3QgcmVkaXJlY3RhYmxlIGluIHN0YXRlICR7dGhpcy50cmFuc2FjdGlvbi5zdGF0ZX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzQ29kZSA9IG9wdGlvbnMuc3RhdHVzQ29kZTtcbiAgICAgICAgaWYgKHN0YXR1c0NvZGUgPCAzMDAgfHwgc3RhdHVzQ29kZSA+IDM5OSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBzdGF0dXNDb2RlOiAke3N0YXR1c0NvZGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGFjdEhlYWRlcnMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgY29udGFjdHMuZm9yRWFjaCgoY29udGFjdCkgPT4gY29udGFjdEhlYWRlcnMucHVzaChgQ29udGFjdDogJHtjb250YWN0LnRvU3RyaW5nKCl9YCkpO1xuICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuY29uY2F0KGNvbnRhY3RIZWFkZXJzKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLnJlcGx5KG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICAgIHJlamVjdChvcHRpb25zID0geyBzdGF0dXNDb2RlOiA0ODAgfSkge1xuICAgICAgICBpZiAoIXRoaXMucmVqZWN0YWJsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRyYW5zYWN0aW9uU3RhdGVFcnJvcihgJHt0aGlzLm1lc3NhZ2UubWV0aG9kfSBub3QgcmVqZWN0YWJsZSBpbiBzdGF0ZSAke3RoaXMudHJhbnNhY3Rpb24uc3RhdGV9LmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGU7XG4gICAgICAgIGlmIChzdGF0dXNDb2RlIDwgNDAwIHx8IHN0YXR1c0NvZGUgPiA2OTkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgc3RhdHVzQ29kZTogJHtzdGF0dXNDb2RlfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5yZXBseShvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgdHJ5aW5nKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyeWluZ2FibGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUcmFuc2FjdGlvblN0YXRlRXJyb3IoYCR7dGhpcy5tZXNzYWdlLm1ldGhvZH0gbm90IHRyeWluZ2FibGUgaW4gc3RhdGUgJHt0aGlzLnRyYW5zYWN0aW9uLnN0YXRlfS5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHRoaXMucmVwbHkoeyBzdGF0dXNDb2RlOiAxMDAgfSk7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdGhlIFVBUyBkaWQgbm90IGZpbmQgYSBtYXRjaGluZyB0cmFuc2FjdGlvbiBmb3IgdGhlIENBTkNFTFxuICAgICAqIGFjY29yZGluZyB0byB0aGUgcHJvY2VkdXJlIGFib3ZlLCBpdCBTSE9VTEQgcmVzcG9uZCB0byB0aGUgQ0FOQ0VMXG4gICAgICogd2l0aCBhIDQ4MSAoQ2FsbCBMZWcvVHJhbnNhY3Rpb24gRG9lcyBOb3QgRXhpc3QpLiAgSWYgdGhlIHRyYW5zYWN0aW9uXG4gICAgICogZm9yIHRoZSBvcmlnaW5hbCByZXF1ZXN0IHN0aWxsIGV4aXN0cywgdGhlIGJlaGF2aW9yIG9mIHRoZSBVQVMgb25cbiAgICAgKiByZWNlaXZpbmcgYSBDQU5DRUwgcmVxdWVzdCBkZXBlbmRzIG9uIHdoZXRoZXIgaXQgaGFzIGFscmVhZHkgc2VudCBhXG4gICAgICogZmluYWwgcmVzcG9uc2UgZm9yIHRoZSBvcmlnaW5hbCByZXF1ZXN0LiAgSWYgaXQgaGFzLCB0aGUgQ0FOQ0VMXG4gICAgICogcmVxdWVzdCBoYXMgbm8gZWZmZWN0IG9uIHRoZSBwcm9jZXNzaW5nIG9mIHRoZSBvcmlnaW5hbCByZXF1ZXN0LCBub1xuICAgICAqIGVmZmVjdCBvbiBhbnkgc2Vzc2lvbiBzdGF0ZSwgYW5kIG5vIGVmZmVjdCBvbiB0aGUgcmVzcG9uc2VzIGdlbmVyYXRlZFxuICAgICAqIGZvciB0aGUgb3JpZ2luYWwgcmVxdWVzdC4gIElmIHRoZSBVQVMgaGFzIG5vdCBpc3N1ZWQgYSBmaW5hbCByZXNwb25zZVxuICAgICAqIGZvciB0aGUgb3JpZ2luYWwgcmVxdWVzdCwgaXRzIGJlaGF2aW9yIGRlcGVuZHMgb24gdGhlIG1ldGhvZCBvZiB0aGVcbiAgICAgKiBvcmlnaW5hbCByZXF1ZXN0LiAgSWYgdGhlIG9yaWdpbmFsIHJlcXVlc3Qgd2FzIGFuIElOVklURSwgdGhlIFVBU1xuICAgICAqIFNIT1VMRCBpbW1lZGlhdGVseSByZXNwb25kIHRvIHRoZSBJTlZJVEUgd2l0aCBhIDQ4NyAoUmVxdWVzdFxuICAgICAqIFRlcm1pbmF0ZWQpLiAgQSBDQU5DRUwgcmVxdWVzdCBoYXMgbm8gaW1wYWN0IG9uIHRoZSBwcm9jZXNzaW5nIG9mXG4gICAgICogdHJhbnNhY3Rpb25zIHdpdGggYW55IG90aGVyIG1ldGhvZCBkZWZpbmVkIGluIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTkuMlxuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gSW5jb21pbmcgQ0FOQ0VMIHJlcXVlc3QuXG4gICAgICovXG4gICAgcmVjZWl2ZUNhbmNlbChtZXNzYWdlKSB7XG4gICAgICAgIC8vIE5vdGU6IEN1cnJlbnRseSBDQU5DRUwgaXMgYmVpbmcgaGFuZGxlZCBhcyBhIHNwZWNpYWwgY2FzZS5cbiAgICAgICAgLy8gTm8gVUFTIGlzIGNyZWF0ZWQgdG8gaGFuZGxlIHRoZSBDQU5DRUwgYW5kIHRoZSByZXNwb25zZSB0b1xuICAgICAgICAvLyBpdCBDQU5DRUwgaXMgYmVpbmcgaGFuZGxlZCBzdGF0ZWxlc3NseSBieSB0aGUgdXNlciBhZ2VudCBjb3JlLlxuICAgICAgICAvLyBBcyBzdWNoLCB0aGVyZSBpcyBjdXJyZW50bHkgbm8gd2F5IHRvIGV4dGVybmFsbHkgaW1wYWN0IHRoZVxuICAgICAgICAvLyByZXNwb25zZSB0byB0aGUgYSBDQU5DRUwgcmVxdWVzdC5cbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vbkNhbmNlbCkge1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vbkNhbmNlbChtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgYWNjZXB0YWJsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnRyYW5zYWN0aW9uLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmcgfHwgdGhpcy50cmFuc2FjdGlvbi5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5BY2NlcHRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnRyYW5zYWN0aW9uLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlRyeWluZyB8fCB0aGlzLnRyYW5zYWN0aW9uLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZS5cIik7XG4gICAgfVxuICAgIGdldCBwcm9ncmVzc2FibGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgSW52aXRlU2VydmVyVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNDMyMCNzZWN0aW9uLTQuMVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZS5cIik7XG4gICAgfVxuICAgIGdldCByZWRpcmVjdGFibGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgSW52aXRlU2VydmVyVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnRyYW5zYWN0aW9uLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlRyeWluZyB8fCB0aGlzLnRyYW5zYWN0aW9uLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlByb2NlZWRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZS5cIik7XG4gICAgfVxuICAgIGdldCByZWplY3RhYmxlKCkge1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEludml0ZVNlcnZlclRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy50cmFuc2FjdGlvbi5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5UcnlpbmcgfHwgdGhpcy50cmFuc2FjdGlvbi5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5Qcm9jZWVkaW5nKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHRyYW5zYWN0aW9uIHR5cGUuXCIpO1xuICAgIH1cbiAgICBnZXQgdHJ5aW5nYWJsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uc3RhdGUgPT09IFRyYW5zYWN0aW9uU3RhdGUuUHJvY2VlZGluZztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbiBpbnN0YW5jZW9mIE5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5Ucnlpbmc7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0cmFuc2FjdGlvbiB0eXBlLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hlbiBhIFVBUyB3aXNoZXMgdG8gY29uc3RydWN0IGEgcmVzcG9uc2UgdG8gYSByZXF1ZXN0LCBpdCBmb2xsb3dzXG4gICAgICogdGhlIGdlbmVyYWwgcHJvY2VkdXJlcyBkZXRhaWxlZCBpbiB0aGUgZm9sbG93aW5nIHN1YnNlY3Rpb25zLlxuICAgICAqIEFkZGl0aW9uYWwgYmVoYXZpb3JzIHNwZWNpZmljIHRvIHRoZSByZXNwb25zZSBjb2RlIGluIHF1ZXN0aW9uLCB3aGljaFxuICAgICAqIGFyZSBub3QgZGV0YWlsZWQgaW4gdGhpcyBzZWN0aW9uLCBtYXkgYWxzbyBiZSByZXF1aXJlZC5cbiAgICAgKlxuICAgICAqIE9uY2UgYWxsIHByb2NlZHVyZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjcmVhdGlvbiBvZiBhIHJlc3BvbnNlIGhhdmVcbiAgICAgKiBiZWVuIGNvbXBsZXRlZCwgdGhlIFVBUyBoYW5kcyB0aGUgcmVzcG9uc2UgYmFjayB0byB0aGUgc2VydmVyXG4gICAgICogdHJhbnNhY3Rpb24gZnJvbSB3aGljaCBpdCByZWNlaXZlZCB0aGUgcmVxdWVzdC5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTguMi42XG4gICAgICogQHBhcmFtIHN0YXR1c0NvZGUgLSBTdGF0dXMgY29kZSB0byByZXBseSB3aXRoLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gUmVwbHkgb3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgcmVwbHkob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMudG9UYWcgJiYgb3B0aW9ucy5zdGF0dXNDb2RlICE9PSAxMDApIHtcbiAgICAgICAgICAgIG9wdGlvbnMudG9UYWcgPSB0aGlzLnRvVGFnO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMudXNlckFnZW50ID0gb3B0aW9ucy51c2VyQWdlbnQgfHwgdGhpcy5jb3JlLmNvbmZpZ3VyYXRpb24udXNlckFnZW50SGVhZGVyRmllbGRWYWx1ZTtcbiAgICAgICAgb3B0aW9ucy5zdXBwb3J0ZWQgPSBvcHRpb25zLnN1cHBvcnRlZCB8fCB0aGlzLmNvcmUuY29uZmlndXJhdGlvbi5zdXBwb3J0ZWRPcHRpb25UYWdzUmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gY29uc3RydWN0T3V0Z29pbmdSZXNwb25zZSh0aGlzLm1lc3NhZ2UsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uLnJlY2VpdmVSZXNwb25zZShvcHRpb25zLnN0YXR1c0NvZGUsIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIFdlIGFyZSB0aGUgdHJhbnNhY3Rpb24gdXNlci5cbiAgICAgICAgY29uc3QgdXNlciA9IHtcbiAgICAgICAgICAgIGxvZ2dlckZhY3Rvcnk6IHRoaXMubG9nZ2VyRmFjdG9yeSxcbiAgICAgICAgICAgIG9uU3RhdGVDaGFuZ2U6IChuZXdTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdGVybWluYXRlZCB0cmFuc2FjdGlvbiBmcm9tIHRoZSBjb3JlLlxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29yZS51c2VyQWdlbnRTZXJ2ZXJzLmRlbGV0ZSh1c2VyQWdlbnRTZXJ2ZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblRyYW5zcG9ydEVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uVHJhbnNwb3J0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblRyYW5zcG9ydEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiVXNlciBhZ2VudCBzZXJ2ZXIgcmVzcG9uc2UgdHJhbnNwb3J0IGVycm9yLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyB0cmFuc2FjdGlvbiB3aXRoIHVzIGFzIHRoZSB1c2VyLlxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IG5ldyB0aGlzLnRyYW5zYWN0aW9uQ29uc3RydWN0b3IodGhpcy5tZXNzYWdlLCB0aGlzLmNvcmUudHJhbnNwb3J0LCB1c2VyKTtcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24gPSB0cmFuc2FjdGlvbjtcbiAgICAgICAgLy8gQWRkIHRoZSBuZXcgdHJhbnNhY3Rpb24gdG8gdGhlIGNvcmUuXG4gICAgICAgIGNvbnN0IHVzZXJBZ2VudFNlcnZlcklkID0gdHJhbnNhY3Rpb24uaWQ7XG4gICAgICAgIHRoaXMuY29yZS51c2VyQWdlbnRTZXJ2ZXJzLnNldCh0cmFuc2FjdGlvbi5pZCwgdGhpcyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24gfSBmcm9tIFwiLi4vdHJhbnNhY3Rpb25zXCI7XG5pbXBvcnQgeyBVc2VyQWdlbnRTZXJ2ZXIgfSBmcm9tIFwiLi91c2VyLWFnZW50LXNlcnZlclwiO1xuLyoqXG4gKiBCWUUgVUFTLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQnllVXNlckFnZW50U2VydmVyIGV4dGVuZHMgVXNlckFnZW50U2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihkaWFsb2csIG1lc3NhZ2UsIGRlbGVnYXRlKSB7XG4gICAgICAgIHN1cGVyKE5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uLCBkaWFsb2cudXNlckFnZW50Q29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEMgfSBmcm9tIFwiLi4vbWVzc2FnZXNcIjtcbmltcG9ydCB7IE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uIH0gZnJvbSBcIi4uL3RyYW5zYWN0aW9uc1wiO1xuaW1wb3J0IHsgVXNlckFnZW50Q2xpZW50IH0gZnJvbSBcIi4vdXNlci1hZ2VudC1jbGllbnRcIjtcbi8qKlxuICogSU5GTyBVQUMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBJbmZvVXNlckFnZW50Q2xpZW50IGV4dGVuZHMgVXNlckFnZW50Q2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihkaWFsb2csIGRlbGVnYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBkaWFsb2cuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShDLklORk8sIG9wdGlvbnMpO1xuICAgICAgICBzdXBlcihOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwgZGlhbG9nLnVzZXJBZ2VudENvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IFVzZXJBZ2VudFNlcnZlciB9IGZyb20gXCIuL3VzZXItYWdlbnQtc2VydmVyXCI7XG4vKipcbiAqIElORk8gVUFTLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgSW5mb1VzZXJBZ2VudFNlcnZlciBleHRlbmRzIFVzZXJBZ2VudFNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZGlhbG9nLCBtZXNzYWdlLCBkZWxlZ2F0ZSkge1xuICAgICAgICBzdXBlcihOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiwgZGlhbG9nLnVzZXJBZ2VudENvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IFVzZXJBZ2VudENsaWVudCB9IGZyb20gXCIuL3VzZXItYWdlbnQtY2xpZW50XCI7XG4vKipcbiAqIE1FU1NBR0UgVUFDLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTWVzc2FnZVVzZXJBZ2VudENsaWVudCBleHRlbmRzIFVzZXJBZ2VudENsaWVudCB7XG4gICAgY29uc3RydWN0b3IoY29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpIHtcbiAgICAgICAgc3VwZXIoTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24sIGNvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IFVzZXJBZ2VudFNlcnZlciB9IGZyb20gXCIuL3VzZXItYWdlbnQtc2VydmVyXCI7XG4vKipcbiAqIE1FU1NBR0UgVUFTLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTWVzc2FnZVVzZXJBZ2VudFNlcnZlciBleHRlbmRzIFVzZXJBZ2VudFNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoY29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpIHtcbiAgICAgICAgc3VwZXIoTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24sIGNvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDIH0gZnJvbSBcIi4uL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IFVzZXJBZ2VudENsaWVudCB9IGZyb20gXCIuL3VzZXItYWdlbnQtY2xpZW50XCI7XG4vKipcbiAqIE5PVElGWSBVQVMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBOb3RpZnlVc2VyQWdlbnRDbGllbnQgZXh0ZW5kcyBVc2VyQWdlbnRDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKGRpYWxvZywgZGVsZWdhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGRpYWxvZy5jcmVhdGVPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKEMuTk9USUZZLCBvcHRpb25zKTtcbiAgICAgICAgc3VwZXIoTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24sIGRpYWxvZy51c2VyQWdlbnRDb3JlLCBtZXNzYWdlLCBkZWxlZ2F0ZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24gfSBmcm9tIFwiLi4vdHJhbnNhY3Rpb25zXCI7XG5pbXBvcnQgeyBVc2VyQWdlbnRTZXJ2ZXIgfSBmcm9tIFwiLi91c2VyLWFnZW50LXNlcnZlclwiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIGluc3RhbmNlT2ZEaWFsb2cob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdC51c2VyQWdlbnRDb3JlICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIE5PVElGWSBVQVMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBOb3RpZnlVc2VyQWdlbnRTZXJ2ZXIgZXh0ZW5kcyBVc2VyQWdlbnRTZXJ2ZXIge1xuICAgIC8qKlxuICAgICAqIE5PVElGWSBVQVMgY29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIGRpYWxvZ09yQ29yZSAtIERpYWxvZyBmb3IgaW4gZGlhbG9nIE5PVElGWSwgVXNlckFnZW50Q29yZSBmb3Igb3V0IG9mIGRpYWxvZyBOT1RJRlkgKGRlcHJlY2F0ZWQpLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gSW5jb21pbmcgTk9USUZZIHJlcXVlc3QgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkaWFsb2dPckNvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKSB7XG4gICAgICAgIGNvbnN0IHVzZXJBZ2VudENvcmUgPSBpbnN0YW5jZU9mRGlhbG9nKGRpYWxvZ09yQ29yZSkgPyBkaWFsb2dPckNvcmUudXNlckFnZW50Q29yZSA6IGRpYWxvZ09yQ29yZTtcbiAgICAgICAgc3VwZXIoTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24sIHVzZXJBZ2VudENvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDIH0gZnJvbSBcIi4uL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IFVzZXJBZ2VudENsaWVudCB9IGZyb20gXCIuL3VzZXItYWdlbnQtY2xpZW50XCI7XG4vKipcbiAqIFBSQUNLIFVBQy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFByYWNrVXNlckFnZW50Q2xpZW50IGV4dGVuZHMgVXNlckFnZW50Q2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihkaWFsb2csIGRlbGVnYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBkaWFsb2cuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShDLlBSQUNLLCBvcHRpb25zKTtcbiAgICAgICAgc3VwZXIoTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24sIGRpYWxvZy51c2VyQWdlbnRDb3JlLCBtZXNzYWdlLCBkZWxlZ2F0ZSk7XG4gICAgICAgIGRpYWxvZy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24obWVzc2FnZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24gfSBmcm9tIFwiLi4vdHJhbnNhY3Rpb25zXCI7XG5pbXBvcnQgeyBVc2VyQWdlbnRTZXJ2ZXIgfSBmcm9tIFwiLi91c2VyLWFnZW50LXNlcnZlclwiO1xuLyoqXG4gKiBQUkFDSyBVQVMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBQcmFja1VzZXJBZ2VudFNlcnZlciBleHRlbmRzIFVzZXJBZ2VudFNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZGlhbG9nLCBtZXNzYWdlLCBkZWxlZ2F0ZSkge1xuICAgICAgICBzdXBlcihOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiwgZGlhbG9nLnVzZXJBZ2VudENvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICAgICAgLy8gVXBkYXRlIGRpYWxvZyBzaWduYWxpbmcgc3RhdGUgd2l0aCBvZmZlci9hbnN3ZXIgaW4gYm9keVxuICAgICAgICBkaWFsb2cuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmRpYWxvZyA9IGRpYWxvZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBkaWFsb2cgc2lnbmFsaW5nIHN0YXRlIG9uIGEgMnh4IHJlc3BvbnNlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgYWNjZXB0KG9wdGlvbnMgPSB7IHN0YXR1c0NvZGU6IDIwMCB9KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmJvZHkpIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBkaWFsb2cgc2lnbmFsaW5nIHN0YXRlIHdpdGggb2ZmZXIvYW5zd2VyIGluIGJvZHlcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihvcHRpb25zLmJvZHkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5hY2NlcHQob3B0aW9ucyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQyB9IGZyb20gXCIuLi9tZXNzYWdlc1wiO1xuaW1wb3J0IHsgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24gfSBmcm9tIFwiLi4vdHJhbnNhY3Rpb25zXCI7XG5pbXBvcnQgeyBVc2VyQWdlbnRDbGllbnQgfSBmcm9tIFwiLi91c2VyLWFnZW50LWNsaWVudFwiO1xuLyoqXG4gKiBSZS1JTlZJVEUgVUFDLlxuICogQHJlbWFya3NcbiAqIDE0IE1vZGlmeWluZyBhbiBFeGlzdGluZyBTZXNzaW9uXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE0XG4gKiAxNC4xIFVBQyBCZWhhdmlvclxuICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNC4xXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBSZUludml0ZVVzZXJBZ2VudENsaWVudCBleHRlbmRzIFVzZXJBZ2VudENsaWVudCB7XG4gICAgY29uc3RydWN0b3IoZGlhbG9nLCBkZWxlZ2F0ZSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gZGlhbG9nLmNyZWF0ZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoQy5JTlZJVEUsIG9wdGlvbnMpO1xuICAgICAgICBzdXBlcihJbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwgZGlhbG9nLnVzZXJBZ2VudENvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICBkaWFsb2cuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKG1lc3NhZ2UpO1xuICAgICAgICAvLyBGSVhNRTogVE9ETzogbmV4dCBsaW5lIG9idmlvdXNseSBuZWVkcyB0byBiZSBpbXByb3ZlZC4uLlxuICAgICAgICBkaWFsb2cucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQgPSB0aGlzOyAvLyBsZXQgdGhlIGRpYWxvZyBrbm93IHJlLWludml0ZSByZXF1ZXN0IHNlbnRcbiAgICAgICAgdGhpcy5kaWFsb2cgPSBkaWFsb2c7XG4gICAgfVxuICAgIHJlY2VpdmVSZXNwb25zZShtZXNzYWdlKSB7XG4gICAgICAgIGlmICghdGhpcy5hdXRoZW50aWNhdGlvbkd1YXJkKG1lc3NhZ2UsIHRoaXMuZGlhbG9nKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBtZXNzYWdlLnN0YXR1c0NvZGUgPyBtZXNzYWdlLnN0YXR1c0NvZGUudG9TdHJpbmcoKSA6IFwiXCI7XG4gICAgICAgIGlmICghc3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVzcG9uc2Ugc3RhdHVzIGNvZGUgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgICAgIGNhc2UgL14xMDAkLy50ZXN0KHN0YXR1c0NvZGUpOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25UcnlpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblRyeWluZyh7IG1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAvXjFbMC05XXsyfSQvLnRlc3Qoc3RhdHVzQ29kZSk6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25Qcm9ncmVzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbjogdGhpcy5kaWFsb2csXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmFjazogKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmltcGxlbWVudGVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAvXjJbMC05XXsyfSQvLnRlc3Qoc3RhdHVzQ29kZSk6XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGRpYWxvZyBzaWduYWxpbmcgc3RhdGUgd2l0aCBvZmZlci9hbnN3ZXIgaW4gYm9keVxuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uQWNjZXB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25BY2NlcHQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb246IHRoaXMuZGlhbG9nLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWNrOiAob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dGdvaW5nQWNrUmVxdWVzdCA9IHRoaXMuZGlhbG9nLmFjayhvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0Z29pbmdBY2tSZXF1ZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIC9eM1swLTldezJ9JC8udGVzdChzdGF0dXNDb2RlKTpcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZVJvbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQgPSB1bmRlZmluZWQ7IC8vIEFDSyB3YXMgaGFuZGxlZCBieSB0cmFuc2FjdGlvblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25SZWRpcmVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uUmVkaXJlY3QoeyBtZXNzYWdlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgL15bNC02XVswLTldezJ9JC8udGVzdChzdGF0dXNDb2RlKTpcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZVJvbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQgPSB1bmRlZmluZWQ7IC8vIEFDSyB3YXMgaGFuZGxlZCBieSB0cmFuc2FjdGlvblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25SZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblJlamVjdCh7IG1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhIFVBIHJlY2VpdmVzIGEgbm9uLTJ4eCBmaW5hbCByZXNwb25zZSB0byBhIHJlLUlOVklURSwgdGhlIHNlc3Npb25cbiAgICAgICAgICAgICAgICAgICAgLy8gcGFyYW1ldGVycyBNVVNUIHJlbWFpbiB1bmNoYW5nZWQsIGFzIGlmIG5vIHJlLUlOVklURSBoYWQgYmVlbiBpc3N1ZWQuXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCwgYXMgc3RhdGVkIGluIFNlY3Rpb24gMTIuMi4xLjIsIGlmIHRoZSBub24tMnh4IGZpbmFsXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3BvbnNlIGlzIGEgNDgxIChDYWxsL1RyYW5zYWN0aW9uIERvZXMgTm90IEV4aXN0KSwgb3IgYSA0MDhcbiAgICAgICAgICAgICAgICAgICAgLy8gKFJlcXVlc3QgVGltZW91dCksIG9yIG5vIHJlc3BvbnNlIGF0IGFsbCBpcyByZWNlaXZlZCBmb3IgdGhlIHJlLVxuICAgICAgICAgICAgICAgICAgICAvLyBJTlZJVEUgKHRoYXQgaXMsIGEgdGltZW91dCBpcyByZXR1cm5lZCBieSB0aGUgSU5WSVRFIGNsaWVudFxuICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiksIHRoZSBVQUMgd2lsbCB0ZXJtaW5hdGUgdGhlIGRpYWxvZy5cbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgYSBVQUMgcmVjZWl2ZXMgYSA0OTEgcmVzcG9uc2UgdG8gYSByZS1JTlZJVEUsIGl0IFNIT1VMRCBzdGFydCBhXG4gICAgICAgICAgICAgICAgICAgIC8vIHRpbWVyIHdpdGggYSB2YWx1ZSBUIGNob3NlbiBhcyBmb2xsb3dzOlxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAxLiBJZiB0aGUgVUFDIGlzIHRoZSBvd25lciBvZiB0aGUgQ2FsbC1JRCBvZiB0aGUgZGlhbG9nIElEXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgIChtZWFuaW5nIGl0IGdlbmVyYXRlZCB0aGUgdmFsdWUpLCBUIGhhcyBhIHJhbmRvbWx5IGNob3NlbiB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBiZXR3ZWVuIDIuMSBhbmQgNCBzZWNvbmRzIGluIHVuaXRzIG9mIDEwIG1zLlxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAyLiBJZiB0aGUgVUFDIGlzIG5vdCB0aGUgb3duZXIgb2YgdGhlIENhbGwtSUQgb2YgdGhlIGRpYWxvZyBJRCwgVFxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBoYXMgYSByYW5kb21seSBjaG9zZW4gdmFsdWUgb2YgYmV0d2VlbiAwIGFuZCAyIHNlY29uZHMgaW4gdW5pdHNcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgb2YgMTAgbXMuXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHRpbWVyIGZpcmVzLCB0aGUgVUFDIFNIT1VMRCBhdHRlbXB0IHRoZSByZS1JTlZJVEUgb25jZSBtb3JlLFxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCBzdGlsbCBkZXNpcmVzIGZvciB0aGF0IHNlc3Npb24gbW9kaWZpY2F0aW9uIHRvIHRha2UgcGxhY2UuICBGb3JcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhhbXBsZSwgaWYgdGhlIGNhbGwgd2FzIGFscmVhZHkgaHVuZyB1cCB3aXRoIGEgQllFLCB0aGUgcmUtSU5WSVRFXG4gICAgICAgICAgICAgICAgICAgIC8vIHdvdWxkIG5vdCB0YWtlIHBsYWNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE0LjFcbiAgICAgICAgICAgICAgICAgICAgLy8gRklYTUU6IFRPRE86IFRoZSBhYm92ZS5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0dXMgY29kZSAke3N0YXR1c0NvZGV9YCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IFVzZXJBZ2VudFNlcnZlciB9IGZyb20gXCIuL3VzZXItYWdlbnQtc2VydmVyXCI7XG4vKipcbiAqIFJlLUlOVklURSBVQVMuXG4gKiBAcmVtYXJrc1xuICogMTQgTW9kaWZ5aW5nIGFuIEV4aXN0aW5nIFNlc3Npb25cbiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTRcbiAqIDE0LjIgVUFTIEJlaGF2aW9yXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE0LjJcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFJlSW52aXRlVXNlckFnZW50U2VydmVyIGV4dGVuZHMgVXNlckFnZW50U2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihkaWFsb2csIG1lc3NhZ2UsIGRlbGVnYXRlKSB7XG4gICAgICAgIHN1cGVyKEludml0ZVNlcnZlclRyYW5zYWN0aW9uLCBkaWFsb2cudXNlckFnZW50Q29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpO1xuICAgICAgICBkaWFsb2cucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXIgPSB0aGlzO1xuICAgICAgICB0aGlzLmRpYWxvZyA9IGRpYWxvZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBkaWFsb2cgc2lnbmFsaW5nIHN0YXRlIG9uIGEgMnh4IHJlc3BvbnNlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgYWNjZXB0KG9wdGlvbnMgPSB7IHN0YXR1c0NvZGU6IDIwMCB9KSB7XG4gICAgICAgIC8vIEZJWE1FOiBUaGUgbmV4dCB0d28gbGluZXMgU0hPVUxEIGdvIGF3YXksIGJ1dCBJIHN1cHBvc2UgaXQncyB0ZWNobmljYWxseSBoYXJtbGVzcy4uLlxuICAgICAgICAvLyBUaGVzZSBhcmUgaGVyZSBiZWNhdXNlIHNvbWUgdmVyc2lvbnMgb2YgU0lQLmpzIHByaW9yIHRvIDAuMTMuOCBzZXQgdGhlIHJvdXRlIHNldFxuICAgICAgICAvLyBvZiBhbGwgaW4gZGlhbG9nIEFDS3MgYmFzZWQgb24gdGhlIFJlY29yZC1Sb3V0ZSBoZWFkZXJzIGluIHRoZSBhc3NvY2lhdGVkIDJ4eFxuICAgICAgICAvLyByZXNwb25zZS4gV2hpbGUgdGhpcyB3b3JrZWQgZm9yIGRpYWxvZyBmb3JtaW5nIDJ4eCByZXNwb25zZXMsIGl0IHdhcyB0ZWNobmljYWxseVxuICAgICAgICAvLyBicm9rZW4gZm9yIHJlLUlOVklURSBBQ0tTIGFzIGl0IG9ubHkgd29ya2VkIGlmIHRoZSBVQVMgcG9wdWxhdGVkIHRoZSBSZWNvcmQtUm91dGVcbiAgICAgICAgLy8gaGVhZGVycyBpbiB0aGUgcmUtSU5WSVRFIDJ4eCByZXNwb25zZSAod2hpY2ggaXMgbm90IHJlcXVpcmVkIGFuZCBhIHdhc3RlIG9mIGJhbmR3aWR0aFxuICAgICAgICAvLyBhcyB0aGUgc2hvdWxkIGJlIGlnbm9yZWQgaWYgcHJlc2VudCBpbiByZS1JTlZJVEUgQUNLUykgYW5kIHRoZSBVQVMgcG9wdWxhdGVkXG4gICAgICAgIC8vIHRoZSBSZWNvcmQtUm91dGUgaGVhZGVycyB3aXRoIHRoZSBjb3JyZWN0IHZhbHVlcyAod291bGQgYmUgd2VpcmQgbm90IHRvbywgYnV0Li4uKS5cbiAgICAgICAgLy8gQW55d2F5LCBmb3Igbm93IHRoZSB0ZWNobmljYWxseSB1c2VsZXNzIFJlY29yZC1Sb3V0ZSBoZWFkZXJzIGFyZSBiZWluZyBhZGRlZFxuICAgICAgICAvLyB0byBtYWludGFpbiBcImJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XCIgd2l0aCB0aGUgb2xkZXIgYnJva2VuIHZlcnNpb25zIG9mIFNJUC5qcy5cbiAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSBvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXTtcbiAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSBvcHRpb25zLmV4dHJhSGVhZGVycy5jb25jYXQodGhpcy5kaWFsb2cucm91dGVTZXQubWFwKChyb3V0ZSkgPT4gYFJlY29yZC1Sb3V0ZTogJHtyb3V0ZX1gKSk7XG4gICAgICAgIC8vIFNlbmQgYW5kIHJldHVybiB0aGUgcmVzcG9uc2VcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBzdXBlci5hY2NlcHQob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLmRpYWxvZztcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZSksIHsgc2Vzc2lvbiB9KTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYm9keSkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIGRpYWxvZyBzaWduYWxpbmcgc3RhdGUgd2l0aCBvZmZlci9hbnN3ZXIgaW4gYm9keVxuICAgICAgICAgICAgdGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKG9wdGlvbnMuYm9keSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXBkYXRlIGRpYWxvZ1xuICAgICAgICB0aGlzLmRpYWxvZy5yZUNvbmZpcm0oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBkaWFsb2cgc2lnbmFsaW5nIHN0YXRlIG9uIGEgMXh4IHJlc3BvbnNlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gUHJvZ3Jlc3Mgb3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgcHJvZ3Jlc3Mob3B0aW9ucyA9IHsgc3RhdHVzQ29kZTogMTgwIH0pIHtcbiAgICAgICAgLy8gU2VuZCBhbmQgcmV0dXJuIHRoZSByZXNwb25zZVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHN1cGVyLnByb2dyZXNzKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5kaWFsb2c7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UpLCB7IHNlc3Npb24gfSk7XG4gICAgICAgIC8vIFVwZGF0ZSBkaWFsb2cgc2lnbmFsaW5nIHN0YXRlXG4gICAgICAgIGlmIChvcHRpb25zLmJvZHkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihvcHRpb25zLmJvZHkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRPRE86IE5vdCBZZXQgU3VwcG9ydGVkXG4gICAgICogQHBhcmFtIGNvbnRhY3RzIC0gQ29udGFjdHMgdG8gcmVkaXJlY3QgdG8uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBSZWRpcmVjdCBvcHRpb25zIGJ1Y2tldC5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgcmVkaXJlY3QoY29udGFjdHMsIG9wdGlvbnMgPSB7IHN0YXR1c0NvZGU6IDMwMiB9KSB7XG4gICAgICAgIHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlUm9sbGJhY2soKTtcbiAgICAgICAgdGhpcy5kaWFsb2cucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXIgPSB1bmRlZmluZWQ7IC8vIEFDSyB3aWxsIGJlIGhhbmRsZWQgYnkgdHJhbnNhY3Rpb25cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5pbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIDMuMSBCYWNrZ3JvdW5kIG9uIFJlLUlOVklURSBIYW5kbGluZyBieSBVQVNzXG4gICAgICogQW4gZXJyb3IgcmVzcG9uc2UgdG8gYSByZS1JTlZJVEUgaGFzIHRoZSBmb2xsb3dpbmcgc2VtYW50aWNzLiAgQXNcbiAgICAgKiBzcGVjaWZpZWQgaW4gU2VjdGlvbiAxMi4yLjIgb2YgUkZDIDMyNjEgW1JGQzMyNjFdLCBpZiBhIHJlLUlOVklURSBpc1xuICAgICAqIHJlamVjdGVkLCBubyBzdGF0ZSBjaGFuZ2VzIGFyZSBwZXJmb3JtZWQuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYxNDEjc2VjdGlvbi0zLjFcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFJlamVjdCBvcHRpb25zIGJ1Y2tldC5cbiAgICAgKi9cbiAgICByZWplY3Qob3B0aW9ucyA9IHsgc3RhdHVzQ29kZTogNDg4IH0pIHtcbiAgICAgICAgdGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGVSb2xsYmFjaygpO1xuICAgICAgICB0aGlzLmRpYWxvZy5yZWludml0ZVVzZXJBZ2VudFNlcnZlciA9IHVuZGVmaW5lZDsgLy8gQUNLIHdpbGwgYmUgaGFuZGxlZCBieSB0cmFuc2FjdGlvblxuICAgICAgICByZXR1cm4gc3VwZXIucmVqZWN0KG9wdGlvbnMpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEMgfSBmcm9tIFwiLi4vbWVzc2FnZXNcIjtcbmltcG9ydCB7IE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uIH0gZnJvbSBcIi4uL3RyYW5zYWN0aW9uc1wiO1xuaW1wb3J0IHsgVXNlckFnZW50Q2xpZW50IH0gZnJvbSBcIi4vdXNlci1hZ2VudC1jbGllbnRcIjtcbi8qKlxuICogUkVGRVIgVUFDLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUmVmZXJVc2VyQWdlbnRDbGllbnQgZXh0ZW5kcyBVc2VyQWdlbnRDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKGRpYWxvZywgZGVsZWdhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGRpYWxvZy5jcmVhdGVPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKEMuUkVGRVIsIG9wdGlvbnMpO1xuICAgICAgICBzdXBlcihOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwgZGlhbG9nLnVzZXJBZ2VudENvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IFVzZXJBZ2VudFNlcnZlciB9IGZyb20gXCIuL3VzZXItYWdlbnQtc2VydmVyXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gaW5zdGFuY2VPZlNlc3Npb25EaWFsb2cob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdC51c2VyQWdlbnRDb3JlICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIFJFRkVSIFVBUy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFJlZmVyVXNlckFnZW50U2VydmVyIGV4dGVuZHMgVXNlckFnZW50U2VydmVyIHtcbiAgICAvKipcbiAgICAgKiBSRUZFUiBVQVMgY29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIGRpYWxvZ09yQ29yZSAtIERpYWxvZyBmb3IgaW4gZGlhbG9nIFJFRkVSLCBVc2VyQWdlbnRDb3JlIGZvciBvdXQgb2YgZGlhbG9nIFJFRkVSLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gSW5jb21pbmcgUkVGRVIgcmVxdWVzdCBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRpYWxvZ09yQ29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpIHtcbiAgICAgICAgY29uc3QgdXNlckFnZW50Q29yZSA9IGluc3RhbmNlT2ZTZXNzaW9uRGlhbG9nKGRpYWxvZ09yQ29yZSkgPyBkaWFsb2dPckNvcmUudXNlckFnZW50Q29yZSA6IGRpYWxvZ09yQ29yZTtcbiAgICAgICAgc3VwZXIoTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24sIHVzZXJBZ2VudENvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDLCBnZXRCb2R5LCBJbmNvbWluZ1JlcXVlc3RNZXNzYWdlLCBJbmNvbWluZ1Jlc3BvbnNlTWVzc2FnZSwgaXNCb2R5LCBOYW1lQWRkckhlYWRlciwgT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZSB9IGZyb20gXCIuLi9tZXNzYWdlc1wiO1xuaW1wb3J0IHsgU2Vzc2lvblN0YXRlLCBTaWduYWxpbmdTdGF0ZSB9IGZyb20gXCIuLi9zZXNzaW9uXCI7XG5pbXBvcnQgeyBUaW1lcnMgfSBmcm9tIFwiLi4vdGltZXJzXCI7XG5pbXBvcnQgeyBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwgSW52aXRlU2VydmVyVHJhbnNhY3Rpb24sIFRyYW5zYWN0aW9uU3RhdGUgfSBmcm9tIFwiLi4vdHJhbnNhY3Rpb25zXCI7XG5pbXBvcnQgeyBCeWVVc2VyQWdlbnRDbGllbnQgfSBmcm9tIFwiLi4vdXNlci1hZ2VudHMvYnllLXVzZXItYWdlbnQtY2xpZW50XCI7XG5pbXBvcnQgeyBCeWVVc2VyQWdlbnRTZXJ2ZXIgfSBmcm9tIFwiLi4vdXNlci1hZ2VudHMvYnllLXVzZXItYWdlbnQtc2VydmVyXCI7XG5pbXBvcnQgeyBJbmZvVXNlckFnZW50Q2xpZW50IH0gZnJvbSBcIi4uL3VzZXItYWdlbnRzL2luZm8tdXNlci1hZ2VudC1jbGllbnRcIjtcbmltcG9ydCB7IEluZm9Vc2VyQWdlbnRTZXJ2ZXIgfSBmcm9tIFwiLi4vdXNlci1hZ2VudHMvaW5mby11c2VyLWFnZW50LXNlcnZlclwiO1xuaW1wb3J0IHsgTWVzc2FnZVVzZXJBZ2VudENsaWVudCB9IGZyb20gXCIuLi91c2VyLWFnZW50cy9tZXNzYWdlLXVzZXItYWdlbnQtY2xpZW50XCI7XG5pbXBvcnQgeyBNZXNzYWdlVXNlckFnZW50U2VydmVyIH0gZnJvbSBcIi4uL3VzZXItYWdlbnRzL21lc3NhZ2UtdXNlci1hZ2VudC1zZXJ2ZXJcIjtcbmltcG9ydCB7IE5vdGlmeVVzZXJBZ2VudENsaWVudCB9IGZyb20gXCIuLi91c2VyLWFnZW50cy9ub3RpZnktdXNlci1hZ2VudC1jbGllbnRcIjtcbmltcG9ydCB7IE5vdGlmeVVzZXJBZ2VudFNlcnZlciB9IGZyb20gXCIuLi91c2VyLWFnZW50cy9ub3RpZnktdXNlci1hZ2VudC1zZXJ2ZXJcIjtcbmltcG9ydCB7IFByYWNrVXNlckFnZW50Q2xpZW50IH0gZnJvbSBcIi4uL3VzZXItYWdlbnRzL3ByYWNrLXVzZXItYWdlbnQtY2xpZW50XCI7XG5pbXBvcnQgeyBQcmFja1VzZXJBZ2VudFNlcnZlciB9IGZyb20gXCIuLi91c2VyLWFnZW50cy9wcmFjay11c2VyLWFnZW50LXNlcnZlclwiO1xuaW1wb3J0IHsgUmVJbnZpdGVVc2VyQWdlbnRDbGllbnQgfSBmcm9tIFwiLi4vdXNlci1hZ2VudHMvcmUtaW52aXRlLXVzZXItYWdlbnQtY2xpZW50XCI7XG5pbXBvcnQgeyBSZUludml0ZVVzZXJBZ2VudFNlcnZlciB9IGZyb20gXCIuLi91c2VyLWFnZW50cy9yZS1pbnZpdGUtdXNlci1hZ2VudC1zZXJ2ZXJcIjtcbmltcG9ydCB7IFJlZmVyVXNlckFnZW50Q2xpZW50IH0gZnJvbSBcIi4uL3VzZXItYWdlbnRzL3JlZmVyLXVzZXItYWdlbnQtY2xpZW50XCI7XG5pbXBvcnQgeyBSZWZlclVzZXJBZ2VudFNlcnZlciB9IGZyb20gXCIuLi91c2VyLWFnZW50cy9yZWZlci11c2VyLWFnZW50LXNlcnZlclwiO1xuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4vZGlhbG9nXCI7XG4vKipcbiAqIFNlc3Npb24gRGlhbG9nLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU2Vzc2lvbkRpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gICAgY29uc3RydWN0b3IoaW5pdGlhbFRyYW5zYWN0aW9uLCBjb3JlLCBzdGF0ZSwgZGVsZWdhdGUpIHtcbiAgICAgICAgc3VwZXIoY29yZSwgc3RhdGUpO1xuICAgICAgICB0aGlzLmluaXRpYWxUcmFuc2FjdGlvbiA9IGluaXRpYWxUcmFuc2FjdGlvbjtcbiAgICAgICAgLyoqIFRoZSBzdGF0ZSBvZiB0aGUgb2ZmZXIvYW5zd2VyIGV4Y2hhbmdlLiAqL1xuICAgICAgICB0aGlzLl9zaWduYWxpbmdTdGF0ZSA9IFNpZ25hbGluZ1N0YXRlLkluaXRpYWw7XG4gICAgICAgIC8qKiBUcnVlIGlmIHdhaXRpbmcgZm9yIGFuIEFDSyB0byB0aGUgaW5pdGlhbCB0cmFuc2FjdGlvbiAyeHggKFVBUyBvbmx5KS4gKi9cbiAgICAgICAgdGhpcy5hY2tXYWl0ID0gZmFsc2U7XG4gICAgICAgIC8qKiBUcnVlIGlmIHByb2Nlc3NpbmcgYW4gQUNLIHRvIHRoZSBpbml0aWFsIHRyYW5zYWN0aW9uIDJ4eCAoVUFTIG9ubHkpLiAqL1xuICAgICAgICB0aGlzLmFja1Byb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICBpZiAoaW5pdGlhbFRyYW5zYWN0aW9uIGluc3RhbmNlb2YgSW52aXRlU2VydmVyVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIGNyZWF0ZWQgYnkgYW4gaW52aXRlIHNlcnZlciB0cmFuc2FjdGlvbiwgd2UncmVcbiAgICAgICAgICAgIC8vIGdvaW5nIHRvIGJlIHdhaXRpbmcgZm9yIGFuIEFDSyBpZiBhcmUgdG8gYmUgY29uZmlybWVkLlxuICAgICAgICAgICAgdGhpcy5hY2tXYWl0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSdyZSBjb25maXJtZWQgdXBvbiBjcmVhdGlvbiBzdGFydCB0aGUgcmV0cmFuc21pdHRpbmcgd2hhdGV2ZXJcbiAgICAgICAgLy8gdGhlIDJ4eCBmaW5hbCByZXNwb25zZSB3YXMgdGhhdCBjb25maXJtZWQgdXMgaW50byBleGlzdGVuY2UuXG4gICAgICAgIGlmICghdGhpcy5lYXJseSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydDJ4eFJldHJhbnNtaXNzaW9uVGltZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihpbml0aWFsVHJhbnNhY3Rpb24ucmVxdWVzdCk7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gY29yZS5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcihcInNpcC5pbnZpdGUtZGlhbG9nXCIpO1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSBjb25zdHJ1Y3RlZGApO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuX3NpZ25hbGluZ1N0YXRlID0gU2lnbmFsaW5nU3RhdGUuQ2xvc2VkO1xuICAgICAgICB0aGlzLl9vZmZlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYW5zd2VyID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5pbnZpdGUyeHhUaW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaW52aXRlMnh4VGltZXIpO1xuICAgICAgICAgICAgdGhpcy5pbnZpdGUyeHhUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgVUFTIE1VU1Qgc3RpbGwgcmVzcG9uZCB0byBhbnkgcGVuZGluZyByZXF1ZXN0cyByZWNlaXZlZCBmb3IgdGhhdFxuICAgICAgICAvLyBkaWFsb2cuICBJdCBpcyBSRUNPTU1FTkRFRCB0aGF0IGEgNDg3IChSZXF1ZXN0IFRlcm1pbmF0ZWQpIHJlc3BvbnNlXG4gICAgICAgIC8vIGJlIGdlbmVyYXRlZCB0byB0aG9zZSBwZW5kaW5nIHJlcXVlc3RzLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE1LjEuMlxuICAgICAgICAvLyBUT0RPOlxuICAgICAgICAvLyB0aGlzLnVzZXJBZ2VudFNlcnZlcnMuZm9yRWFjaCgodWFzKSA9PiB1YXMucmVwbHkoNDg3KSk7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IGRlc3Ryb3llZGApO1xuICAgIH1cbiAgICAvLyBGSVhNRTogTmVlZCByZWFsIHN0YXRlIG1hY2hpbmVcbiAgICBnZXQgc2Vzc2lvblN0YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5lYXJseSkge1xuICAgICAgICAgICAgcmV0dXJuIFNlc3Npb25TdGF0ZS5FYXJseTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFja1dhaXQpIHtcbiAgICAgICAgICAgIHJldHVybiBTZXNzaW9uU3RhdGUuQWNrV2FpdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9zaWduYWxpbmdTdGF0ZSA9PT0gU2lnbmFsaW5nU3RhdGUuQ2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gU2Vzc2lvblN0YXRlLkNvbmZpcm1lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogVGhlIHN0YXRlIG9mIHRoZSBvZmZlci9hbnN3ZXIgZXhjaGFuZ2UuICovXG4gICAgZ2V0IHNpZ25hbGluZ1N0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2lnbmFsaW5nU3RhdGU7XG4gICAgfVxuICAgIC8qKiBUaGUgY3VycmVudCBvZmZlci4gVW5kZWZpbmVkIHVubGVzcyBzaWduYWxpbmcgc3RhdGUgSGF2ZUxvY2FsT2ZmZXIsIEhhdmVSZW1vdGVPZmZlciwgb2YgU3RhYmxlLiAqL1xuICAgIGdldCBvZmZlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29mZmVyO1xuICAgIH1cbiAgICAvKiogVGhlIGN1cnJlbnQgYW5zd2VyLiBVbmRlZmluZWQgdW5sZXNzIHNpZ25hbGluZyBzdGF0ZSBTdGFibGUuICovXG4gICAgZ2V0IGFuc3dlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Fuc3dlcjtcbiAgICB9XG4gICAgLyoqIENvbmZpcm0gdGhlIGRpYWxvZy4gT25seSBtYXR0ZXJzIGlmIGRpYWxvZyBpcyBjdXJyZW50bHkgZWFybHkuICovXG4gICAgY29uZmlybSgpIHtcbiAgICAgICAgLy8gV2hlbiB3ZSdyZSBjb25maXJtZWQgc3RhcnQgdGhlIHJldHJhbnNtaXR0aW5nIHdoYXRldmVyXG4gICAgICAgIC8vIHRoZSAyeHggZmluYWwgcmVzcG9uc2UgdGhhdCBtYXkgaGF2ZSBjb25maXJtZWQgdXMuXG4gICAgICAgIGlmICh0aGlzLmVhcmx5KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0Mnh4UmV0cmFuc21pc3Npb25UaW1lcigpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmNvbmZpcm0oKTtcbiAgICB9XG4gICAgLyoqIFJlLWNvbmZpcm0gdGhlIGRpYWxvZy4gT25seSBtYXR0ZXJzIGlmIGhhbmRsaW5nIHJlLUlOVklURSByZXF1ZXN0LiAqL1xuICAgIHJlQ29uZmlybSgpIHtcbiAgICAgICAgLy8gV2hlbiB3ZSdyZSBjb25maXJtZWQgc3RhcnQgdGhlIHJldHJhbnNtaXR0aW5nIHdoYXRldmVyXG4gICAgICAgIC8vIHRoZSAyeHggZmluYWwgcmVzcG9uc2UgdGhhdCBtYXkgaGF2ZSBjb25maXJtZWQgdXMuXG4gICAgICAgIGlmICh0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UmVJbnZpdGUyeHhSZXRyYW5zbWlzc2lvblRpbWVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIFVBQyBjb3JlIE1VU1QgZ2VuZXJhdGUgYW4gQUNLIHJlcXVlc3QgZm9yIGVhY2ggMnh4IHJlY2VpdmVkIGZyb21cbiAgICAgKiB0aGUgdHJhbnNhY3Rpb24gbGF5ZXIuICBUaGUgaGVhZGVyIGZpZWxkcyBvZiB0aGUgQUNLIGFyZSBjb25zdHJ1Y3RlZFxuICAgICAqIGluIHRoZSBzYW1lIHdheSBhcyBmb3IgYW55IHJlcXVlc3Qgc2VudCB3aXRoaW4gYSBkaWFsb2cgKHNlZSBTZWN0aW9uXG4gICAgICogMTIpIHdpdGggdGhlIGV4Y2VwdGlvbiBvZiB0aGUgQ1NlcSBhbmQgdGhlIGhlYWRlciBmaWVsZHMgcmVsYXRlZCB0b1xuICAgICAqIGF1dGhlbnRpY2F0aW9uLiAgVGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgQ1NlcSBoZWFkZXIgZmllbGQgTVVTVCBiZVxuICAgICAqIHRoZSBzYW1lIGFzIHRoZSBJTlZJVEUgYmVpbmcgYWNrbm93bGVkZ2VkLCBidXQgdGhlIENTZXEgbWV0aG9kIE1VU1RcbiAgICAgKiBiZSBBQ0suICBUaGUgQUNLIE1VU1QgY29udGFpbiB0aGUgc2FtZSBjcmVkZW50aWFscyBhcyB0aGUgSU5WSVRFLiAgSWZcbiAgICAgKiB0aGUgMnh4IGNvbnRhaW5zIGFuIG9mZmVyIChiYXNlZCBvbiB0aGUgcnVsZXMgYWJvdmUpLCB0aGUgQUNLIE1VU1RcbiAgICAgKiBjYXJyeSBhbiBhbnN3ZXIgaW4gaXRzIGJvZHkuICBJZiB0aGUgb2ZmZXIgaW4gdGhlIDJ4eCByZXNwb25zZSBpcyBub3RcbiAgICAgKiBhY2NlcHRhYmxlLCB0aGUgVUFDIGNvcmUgTVVTVCBnZW5lcmF0ZSBhIHZhbGlkIGFuc3dlciBpbiB0aGUgQUNLIGFuZFxuICAgICAqIHRoZW4gc2VuZCBhIEJZRSBpbW1lZGlhdGVseS5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjIuMi40XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBQ0sgb3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgYWNrKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSBzZW5kaW5nIEFDSyByZXF1ZXN0YCk7XG4gICAgICAgIGxldCB0cmFuc2FjdGlvbjtcbiAgICAgICAgaWYgKHRoaXMucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQpIHtcbiAgICAgICAgICAgIC8vIFdlJ3JlIHNlbmRpbmcgQUNLIGZvciBhIHJlLUlOVklURVxuICAgICAgICAgICAgaWYgKCEodGhpcy5yZWludml0ZVVzZXJBZ2VudENsaWVudC50cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEludml0ZUNsaWVudFRyYW5zYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyYW5zYWN0aW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFuc2FjdGlvbiA9IHRoaXMucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQudHJhbnNhY3Rpb247XG4gICAgICAgICAgICB0aGlzLnJlaW52aXRlVXNlckFnZW50Q2xpZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV2UncmUgc2VuZGluZyBBQ0sgZm9yIHRoZSBpbml0aWFsIElOVklURVxuICAgICAgICAgICAgaWYgKCEodGhpcy5pbml0aWFsVHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbml0aWFsIHRyYW5zYWN0aW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFuc2FjdGlvbiA9IHRoaXMuaW5pdGlhbFRyYW5zYWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmNyZWF0ZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoQy5BQ0ssIHtcbiAgICAgICAgICAgIGNzZXE6IHRyYW5zYWN0aW9uLnJlcXVlc3QuY3NlcSxcbiAgICAgICAgICAgIGV4dHJhSGVhZGVyczogb3B0aW9ucy5leHRyYUhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBvcHRpb25zLmJvZHlcbiAgICAgICAgfSk7XG4gICAgICAgIHRyYW5zYWN0aW9uLmFja1Jlc3BvbnNlKG1lc3NhZ2UpOyAvLyBTZWUgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24gZm9yIGRldGFpbHMuXG4gICAgICAgIHRoaXMuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4geyBtZXNzYWdlIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0aW5nIGEgU2Vzc2lvblxuICAgICAqXG4gICAgICogVGhpcyBzZWN0aW9uIGRlc2NyaWJlcyB0aGUgcHJvY2VkdXJlcyBmb3IgdGVybWluYXRpbmcgYSBzZXNzaW9uXG4gICAgICogZXN0YWJsaXNoZWQgYnkgU0lQLiAgVGhlIHN0YXRlIG9mIHRoZSBzZXNzaW9uIGFuZCB0aGUgc3RhdGUgb2YgdGhlXG4gICAgICogZGlhbG9nIGFyZSB2ZXJ5IGNsb3NlbHkgcmVsYXRlZC4gIFdoZW4gYSBzZXNzaW9uIGlzIGluaXRpYXRlZCB3aXRoIGFuXG4gICAgICogSU5WSVRFLCBlYWNoIDF4eCBvciAyeHggcmVzcG9uc2UgZnJvbSBhIGRpc3RpbmN0IFVBUyBjcmVhdGVzIGFcbiAgICAgKiBkaWFsb2csIGFuZCBpZiB0aGF0IHJlc3BvbnNlIGNvbXBsZXRlcyB0aGUgb2ZmZXIvYW5zd2VyIGV4Y2hhbmdlLCBpdFxuICAgICAqIGFsc28gY3JlYXRlcyBhIHNlc3Npb24uICBBcyBhIHJlc3VsdCwgZWFjaCBzZXNzaW9uIGlzIFwiYXNzb2NpYXRlZFwiXG4gICAgICogd2l0aCBhIHNpbmdsZSBkaWFsb2cgLSB0aGUgb25lIHdoaWNoIHJlc3VsdGVkIGluIGl0cyBjcmVhdGlvbi4gIElmIGFuXG4gICAgICogaW5pdGlhbCBJTlZJVEUgZ2VuZXJhdGVzIGEgbm9uLTJ4eCBmaW5hbCByZXNwb25zZSwgdGhhdCB0ZXJtaW5hdGVzXG4gICAgICogYWxsIHNlc3Npb25zIChpZiBhbnkpIGFuZCBhbGwgZGlhbG9ncyAoaWYgYW55KSB0aGF0IHdlcmUgY3JlYXRlZFxuICAgICAqIHRocm91Z2ggcmVzcG9uc2VzIHRvIHRoZSByZXF1ZXN0LiAgQnkgdmlydHVlIG9mIGNvbXBsZXRpbmcgdGhlXG4gICAgICogdHJhbnNhY3Rpb24sIGEgbm9uLTJ4eCBmaW5hbCByZXNwb25zZSBhbHNvIHByZXZlbnRzIGZ1cnRoZXIgc2Vzc2lvbnNcbiAgICAgKiBmcm9tIGJlaW5nIGNyZWF0ZWQgYXMgYSByZXN1bHQgb2YgdGhlIElOVklURS4gIFRoZSBCWUUgcmVxdWVzdCBpc1xuICAgICAqIHVzZWQgdG8gdGVybWluYXRlIGEgc3BlY2lmaWMgc2Vzc2lvbiBvciBhdHRlbXB0ZWQgc2Vzc2lvbi4gIEluIHRoaXNcbiAgICAgKiBjYXNlLCB0aGUgc3BlY2lmaWMgc2Vzc2lvbiBpcyB0aGUgb25lIHdpdGggdGhlIHBlZXIgVUEgb24gdGhlIG90aGVyXG4gICAgICogc2lkZSBvZiB0aGUgZGlhbG9nLiAgV2hlbiBhIEJZRSBpcyByZWNlaXZlZCBvbiBhIGRpYWxvZywgYW55IHNlc3Npb25cbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhhdCBkaWFsb2cgU0hPVUxEIHRlcm1pbmF0ZS4gIEEgVUEgTVVTVCBOT1Qgc2VuZCBhXG4gICAgICogQllFIG91dHNpZGUgb2YgYSBkaWFsb2cuICBUaGUgY2FsbGVyJ3MgVUEgTUFZIHNlbmQgYSBCWUUgZm9yIGVpdGhlclxuICAgICAqIGNvbmZpcm1lZCBvciBlYXJseSBkaWFsb2dzLCBhbmQgdGhlIGNhbGxlZSdzIFVBIE1BWSBzZW5kIGEgQllFIG9uXG4gICAgICogY29uZmlybWVkIGRpYWxvZ3MsIGJ1dCBNVVNUIE5PVCBzZW5kIGEgQllFIG9uIGVhcmx5IGRpYWxvZ3MuXG4gICAgICpcbiAgICAgKiBIb3dldmVyLCB0aGUgY2FsbGVlJ3MgVUEgTVVTVCBOT1Qgc2VuZCBhIEJZRSBvbiBhIGNvbmZpcm1lZCBkaWFsb2dcbiAgICAgKiB1bnRpbCBpdCBoYXMgcmVjZWl2ZWQgYW4gQUNLIGZvciBpdHMgMnh4IHJlc3BvbnNlIG9yIHVudGlsIHRoZSBzZXJ2ZXJcbiAgICAgKiB0cmFuc2FjdGlvbiB0aW1lcyBvdXQuICBJZiBubyBTSVAgZXh0ZW5zaW9ucyBoYXZlIGRlZmluZWQgb3RoZXJcbiAgICAgKiBhcHBsaWNhdGlvbiBsYXllciBzdGF0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaWFsb2csIHRoZSBCWUUgYWxzb1xuICAgICAqIHRlcm1pbmF0ZXMgdGhlIGRpYWxvZy5cbiAgICAgKlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTVcbiAgICAgKiBGSVhNRTogTWFrZSB0aGVzZSBwcm9wZXIgRXhjZXB0aW9ucy4uLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQllFIG9wdGlvbnMgYnVja2V0LlxuICAgICAqIEByZXR1cm5zXG4gICAgICogVGhyb3dzIGBFcnJvcmAgaWYgY2FsbGVlJ3MgVUEgYXR0ZW1wdHMgYSBCWUUgb24gYW4gZWFybHkgZGlhbG9nLlxuICAgICAqIFRocm93cyBgRXJyb3JgIGlmIGNhbGxlZSdzIFVBIGF0dGVtcHRzIGEgQllFIG9uIGEgY29uZmlybWVkIGRpYWxvZ1xuICAgICAqICAgICAgICAgICAgICAgIHdoaWxlIGl0J3Mgd2FpdGluZyBvbiB0aGUgQUNLIGZvciBpdHMgMnh4IHJlc3BvbnNlLlxuICAgICAqL1xuICAgIGJ5ZShkZWxlZ2F0ZSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSBzZW5kaW5nIEJZRSByZXF1ZXN0YCk7XG4gICAgICAgIC8vIFRoZSBjYWxsZXIncyBVQSBNQVkgc2VuZCBhIEJZRSBmb3IgZWl0aGVyXG4gICAgICAgIC8vIGNvbmZpcm1lZCBvciBlYXJseSBkaWFsb2dzLCBhbmQgdGhlIGNhbGxlZSdzIFVBIE1BWSBzZW5kIGEgQllFIG9uXG4gICAgICAgIC8vIGNvbmZpcm1lZCBkaWFsb2dzLCBidXQgTVVTVCBOT1Qgc2VuZCBhIEJZRSBvbiBlYXJseSBkaWFsb2dzLlxuICAgICAgICAvL1xuICAgICAgICAvLyBIb3dldmVyLCB0aGUgY2FsbGVlJ3MgVUEgTVVTVCBOT1Qgc2VuZCBhIEJZRSBvbiBhIGNvbmZpcm1lZCBkaWFsb2dcbiAgICAgICAgLy8gdW50aWwgaXQgaGFzIHJlY2VpdmVkIGFuIEFDSyBmb3IgaXRzIDJ4eCByZXNwb25zZSBvciB1bnRpbCB0aGUgc2VydmVyXG4gICAgICAgIC8vIHRyYW5zYWN0aW9uIHRpbWVzIG91dC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNVxuICAgICAgICBpZiAodGhpcy5pbml0aWFsVHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWFybHkpIHtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRTogVE9ETzogVGhpcyBzaG91bGQgdGhyb3cgYSBwcm9wZXIgZXhjZXB0aW9uLlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVBUyBNVVNUIE5PVCBzZW5kIGEgQllFIG9uIGVhcmx5IGRpYWxvZ3MuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWNrV2FpdCAmJiB0aGlzLmluaXRpYWxUcmFuc2FjdGlvbi5zdGF0ZSAhPT0gVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gRklYTUU6IFRPRE86IFRoaXMgc2hvdWxkIHRocm93IGEgcHJvcGVyIGV4Y2VwdGlvbi5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVQVMgTVVTVCBOT1Qgc2VuZCBhIEJZRSBvbiBhIGNvbmZpcm1lZCBkaWFsb2cgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInVudGlsIGl0IGhhcyByZWNlaXZlZCBhbiBBQ0sgZm9yIGl0cyAyeHggcmVzcG9uc2UgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIm9yIHVudGlsIHRoZSBzZXJ2ZXIgdHJhbnNhY3Rpb24gdGltZXMgb3V0LlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBBIEJZRSByZXF1ZXN0IGlzIGNvbnN0cnVjdGVkIGFzIHdvdWxkIGFueSBvdGhlciByZXF1ZXN0IHdpdGhpbiBhXG4gICAgICAgIC8vIGRpYWxvZywgYXMgZGVzY3JpYmVkIGluIFNlY3Rpb24gMTIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIE9uY2UgdGhlIEJZRSBpcyBjb25zdHJ1Y3RlZCwgdGhlIFVBQyBjb3JlIGNyZWF0ZXMgYSBuZXcgbm9uLUlOVklURVxuICAgICAgICAvLyBjbGllbnQgdHJhbnNhY3Rpb24sIGFuZCBwYXNzZXMgaXQgdGhlIEJZRSByZXF1ZXN0LiAgVGhlIFVBQyBNVVNUXG4gICAgICAgIC8vIGNvbnNpZGVyIHRoZSBzZXNzaW9uIHRlcm1pbmF0ZWQgKGFuZCB0aGVyZWZvcmUgc3RvcCBzZW5kaW5nIG9yXG4gICAgICAgIC8vIGxpc3RlbmluZyBmb3IgbWVkaWEpIGFzIHNvb24gYXMgdGhlIEJZRSByZXF1ZXN0IGlzIHBhc3NlZCB0byB0aGVcbiAgICAgICAgLy8gY2xpZW50IHRyYW5zYWN0aW9uLiAgSWYgdGhlIHJlc3BvbnNlIGZvciB0aGUgQllFIGlzIGEgNDgxXG4gICAgICAgIC8vIChDYWxsL1RyYW5zYWN0aW9uIERvZXMgTm90IEV4aXN0KSBvciBhIDQwOCAoUmVxdWVzdCBUaW1lb3V0KSBvciBub1xuICAgICAgICAvLyByZXNwb25zZSBhdCBhbGwgaXMgcmVjZWl2ZWQgZm9yIHRoZSBCWUUgKHRoYXQgaXMsIGEgdGltZW91dCBpc1xuICAgICAgICAvLyByZXR1cm5lZCBieSB0aGUgY2xpZW50IHRyYW5zYWN0aW9uKSwgdGhlIFVBQyBNVVNUIGNvbnNpZGVyIHRoZVxuICAgICAgICAvLyBzZXNzaW9uIGFuZCB0aGUgZGlhbG9nIHRlcm1pbmF0ZWQuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTUuMS4xXG4gICAgICAgIHJldHVybiBuZXcgQnllVXNlckFnZW50Q2xpZW50KHRoaXMsIGRlbGVnYXRlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW4gSU5GTyByZXF1ZXN0IGNhbiBiZSBhc3NvY2lhdGVkIHdpdGggYW4gSW5mbyBQYWNrYWdlIChzZWVcbiAgICAgKiBTZWN0aW9uIDUpLCBvciBhc3NvY2lhdGVkIHdpdGggYSBsZWdhY3kgSU5GTyB1c2FnZSAoc2VlIFNlY3Rpb24gMikuXG4gICAgICpcbiAgICAgKiBUaGUgY29uc3RydWN0aW9uIG9mIHRoZSBJTkZPIHJlcXVlc3QgaXMgdGhlIHNhbWUgYXMgYW55IG90aGVyXG4gICAgICogbm9uLXRhcmdldCByZWZyZXNoIHJlcXVlc3Qgd2l0aGluIGFuIGV4aXN0aW5nIGludml0ZSBkaWFsb2cgdXNhZ2UgYXNcbiAgICAgKiBkZXNjcmliZWQgaW4gU2VjdGlvbiAxMi4yIG9mIFJGQyAzMjYxLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDg2I3NlY3Rpb24tNC4yLjFcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgYnVja2V0LlxuICAgICAqL1xuICAgIGluZm8oZGVsZWdhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gc2VuZGluZyBJTkZPIHJlcXVlc3RgKTtcbiAgICAgICAgaWYgKHRoaXMuZWFybHkpIHtcbiAgICAgICAgICAgIC8vIEZJWE1FOiBUT0RPOiBUaGlzIHNob3VsZCB0aHJvdyBhIHByb3BlciBleGNlcHRpb24uXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaWFsb2cgbm90IGNvbmZpcm1lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBJbmZvVXNlckFnZW50Q2xpZW50KHRoaXMsIGRlbGVnYXRlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZ5aW5nIGFuIEV4aXN0aW5nIFNlc3Npb25cbiAgICAgKlxuICAgICAqIEEgc3VjY2Vzc2Z1bCBJTlZJVEUgcmVxdWVzdCAoc2VlIFNlY3Rpb24gMTMpIGVzdGFibGlzaGVzIGJvdGggYVxuICAgICAqIGRpYWxvZyBiZXR3ZWVuIHR3byB1c2VyIGFnZW50cyBhbmQgYSBzZXNzaW9uIHVzaW5nIHRoZSBvZmZlci1hbnN3ZXJcbiAgICAgKiBtb2RlbC4gIFNlY3Rpb24gMTIgZXhwbGFpbnMgaG93IHRvIG1vZGlmeSBhbiBleGlzdGluZyBkaWFsb2cgdXNpbmcgYVxuICAgICAqIHRhcmdldCByZWZyZXNoIHJlcXVlc3QgKGZvciBleGFtcGxlLCBjaGFuZ2luZyB0aGUgcmVtb3RlIHRhcmdldCBVUklcbiAgICAgKiBvZiB0aGUgZGlhbG9nKS4gIFRoaXMgc2VjdGlvbiBkZXNjcmliZXMgaG93IHRvIG1vZGlmeSB0aGUgYWN0dWFsXG4gICAgICogc2Vzc2lvbi4gIFRoaXMgbW9kaWZpY2F0aW9uIGNhbiBpbnZvbHZlIGNoYW5naW5nIGFkZHJlc3NlcyBvciBwb3J0cyxcbiAgICAgKiBhZGRpbmcgYSBtZWRpYSBzdHJlYW0sIGRlbGV0aW5nIGEgbWVkaWEgc3RyZWFtLCBhbmQgc28gb24uICBUaGlzIGlzXG4gICAgICogYWNjb21wbGlzaGVkIGJ5IHNlbmRpbmcgYSBuZXcgSU5WSVRFIHJlcXVlc3Qgd2l0aGluIHRoZSBzYW1lIGRpYWxvZ1xuICAgICAqIHRoYXQgZXN0YWJsaXNoZWQgdGhlIHNlc3Npb24uICBBbiBJTlZJVEUgcmVxdWVzdCBzZW50IHdpdGhpbiBhblxuICAgICAqIGV4aXN0aW5nIGRpYWxvZyBpcyBrbm93biBhcyBhIHJlLUlOVklURS5cbiAgICAgKlxuICAgICAqICAgIE5vdGUgdGhhdCBhIHNpbmdsZSByZS1JTlZJVEUgY2FuIG1vZGlmeSB0aGUgZGlhbG9nIGFuZCB0aGVcbiAgICAgKiAgICBwYXJhbWV0ZXJzIG9mIHRoZSBzZXNzaW9uIGF0IHRoZSBzYW1lIHRpbWUuXG4gICAgICpcbiAgICAgKiBFaXRoZXIgdGhlIGNhbGxlciBvciBjYWxsZWUgY2FuIG1vZGlmeSBhbiBleGlzdGluZyBzZXNzaW9uLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTRcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgYnVja2V0XG4gICAgICovXG4gICAgaW52aXRlKGRlbGVnYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHNlbmRpbmcgSU5WSVRFIHJlcXVlc3RgKTtcbiAgICAgICAgaWYgKHRoaXMuZWFybHkpIHtcbiAgICAgICAgICAgIC8vIEZJWE1FOiBUT0RPOiBUaGlzIHNob3VsZCB0aHJvdyBhIHByb3BlciBleGNlcHRpb24uXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaWFsb2cgbm90IGNvbmZpcm1lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm90ZSB0aGF0IGEgVUFDIE1VU1QgTk9UIGluaXRpYXRlIGEgbmV3IElOVklURSB0cmFuc2FjdGlvbiB3aXRoaW4gYVxuICAgICAgICAvLyBkaWFsb2cgd2hpbGUgYW5vdGhlciBJTlZJVEUgdHJhbnNhY3Rpb24gaXMgaW4gcHJvZ3Jlc3MgaW4gZWl0aGVyXG4gICAgICAgIC8vIGRpcmVjdGlvbi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgMS4gSWYgdGhlcmUgaXMgYW4gb25nb2luZyBJTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uLCB0aGUgVFUgTVVTVFxuICAgICAgICAvLyAgICAgICB3YWl0IHVudGlsIHRoZSB0cmFuc2FjdGlvbiByZWFjaGVzIHRoZSBjb21wbGV0ZWQgb3IgdGVybWluYXRlZFxuICAgICAgICAvLyAgICAgICBzdGF0ZSBiZWZvcmUgaW5pdGlhdGluZyB0aGUgbmV3IElOVklURS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgMi4gSWYgdGhlcmUgaXMgYW4gb25nb2luZyBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uLCB0aGUgVFUgTVVTVFxuICAgICAgICAvLyAgICAgICB3YWl0IHVudGlsIHRoZSB0cmFuc2FjdGlvbiByZWFjaGVzIHRoZSBjb25maXJtZWQgb3IgdGVybWluYXRlZFxuICAgICAgICAvLyAgICAgICBzdGF0ZSBiZWZvcmUgaW5pdGlhdGluZyB0aGUgbmV3IElOVklURS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSG93ZXZlciwgYSBVQSBNQVkgaW5pdGlhdGUgYSByZWd1bGFyIHRyYW5zYWN0aW9uIHdoaWxlIGFuIElOVklURVxuICAgICAgICAvLyB0cmFuc2FjdGlvbiBpcyBpbiBwcm9ncmVzcy4gIEEgVUEgTUFZIGFsc28gaW5pdGlhdGUgYW4gSU5WSVRFXG4gICAgICAgIC8vIHRyYW5zYWN0aW9uIHdoaWxlIGEgcmVndWxhciB0cmFuc2FjdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNC4xXG4gICAgICAgIGlmICh0aGlzLnJlaW52aXRlVXNlckFnZW50Q2xpZW50KSB7XG4gICAgICAgICAgICAvLyBGSVhNRTogVE9ETzogVGhpcyBzaG91bGQgdGhyb3cgYSBwcm9wZXIgZXhjZXB0aW9uLlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgYW4gb25nb2luZyByZS1JTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yZWludml0ZVVzZXJBZ2VudFNlcnZlcikge1xuICAgICAgICAgICAgLy8gRklYTUU6IFRPRE86IFRoaXMgc2hvdWxkIHRocm93IGEgcHJvcGVyIGV4Y2VwdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIGFuIG9uZ29pbmcgcmUtSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBSZUludml0ZVVzZXJBZ2VudENsaWVudCh0aGlzLCBkZWxlZ2F0ZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgVUFDIE1BWSBhc3NvY2lhdGUgYSBNRVNTQUdFIHJlcXVlc3Qgd2l0aCBhbiBleGlzdGluZyBkaWFsb2cuICBJZiBhXG4gICAgICogTUVTU0FHRSByZXF1ZXN0IGlzIHNlbnQgd2l0aGluIGEgZGlhbG9nLCBpdCBpcyBcImFzc29jaWF0ZWRcIiB3aXRoIGFueVxuICAgICAqIG1lZGlhIHNlc3Npb24gb3Igc2Vzc2lvbnMgYXNzb2NpYXRlZCB3aXRoIHRoYXQgZGlhbG9nLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNDI4I3NlY3Rpb24tNFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgbWVzc2FnZShkZWxlZ2F0ZSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSBzZW5kaW5nIE1FU1NBR0UgcmVxdWVzdGApO1xuICAgICAgICBpZiAodGhpcy5lYXJseSkge1xuICAgICAgICAgICAgLy8gRklYTUU6IFRPRE86IFRoaXMgc2hvdWxkIHRocm93IGEgcHJvcGVyIGV4Y2VwdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRpYWxvZyBub3QgY29uZmlybWVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5jcmVhdGVPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKEMuTUVTU0FHRSwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBuZXcgTWVzc2FnZVVzZXJBZ2VudENsaWVudCh0aGlzLmNvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIE5PVElGWSBtZWNoYW5pc20gZGVmaW5lZCBpbiBbMl0gTVVTVCBiZSB1c2VkIHRvIGluZm9ybSB0aGUgYWdlbnRcbiAgICAgKiBzZW5kaW5nIHRoZSBSRUZFUiBvZiB0aGUgc3RhdHVzIG9mIHRoZSByZWZlcmVuY2UuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM1MTUjc2VjdGlvbi0yLjQuNFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgbm90aWZ5KGRlbGVnYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHNlbmRpbmcgTk9USUZZIHJlcXVlc3RgKTtcbiAgICAgICAgaWYgKHRoaXMuZWFybHkpIHtcbiAgICAgICAgICAgIC8vIEZJWE1FOiBUT0RPOiBUaGlzIHNob3VsZCB0aHJvdyBhIHByb3BlciBleGNlcHRpb24uXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaWFsb2cgbm90IGNvbmZpcm1lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBOb3RpZnlVc2VyQWdlbnRDbGllbnQodGhpcywgZGVsZWdhdGUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBc3N1bWluZyB0aGUgcmVzcG9uc2UgaXMgdG8gYmUgdHJhbnNtaXR0ZWQgcmVsaWFibHksIHRoZSBVQUMgTVVTVFxuICAgICAqIGNyZWF0ZSBhIG5ldyByZXF1ZXN0IHdpdGggbWV0aG9kIFBSQUNLLiAgVGhpcyByZXF1ZXN0IGlzIHNlbnQgd2l0aGluXG4gICAgICogdGhlIGRpYWxvZyBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3Zpc2lvbmFsIHJlc3BvbnNlIChpbmRlZWQsIHRoZVxuICAgICAqIHByb3Zpc2lvbmFsIHJlc3BvbnNlIG1heSBoYXZlIGNyZWF0ZWQgdGhlIGRpYWxvZykuICBQUkFDSyByZXF1ZXN0c1xuICAgICAqIE1BWSBjb250YWluIGJvZGllcywgd2hpY2ggYXJlIGludGVycHJldGVkIGFjY29yZGluZyB0byB0aGVpciB0eXBlIGFuZFxuICAgICAqIGRpc3Bvc2l0aW9uLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYyI3NlY3Rpb24tNFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgcHJhY2soZGVsZWdhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gc2VuZGluZyBQUkFDSyByZXF1ZXN0YCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJhY2tVc2VyQWdlbnRDbGllbnQodGhpcywgZGVsZWdhdGUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSRUZFUiBpcyBhIFNJUCByZXF1ZXN0IGFuZCBpcyBjb25zdHJ1Y3RlZCBhcyBkZWZpbmVkIGluIFsxXS4gIEEgUkVGRVJcbiAgICAgKiByZXF1ZXN0IE1VU1QgY29udGFpbiBleGFjdGx5IG9uZSBSZWZlci1UbyBoZWFkZXIgZmllbGQgdmFsdWUuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM1MTUjc2VjdGlvbi0yLjQuMVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgcmVmZXIoZGVsZWdhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gc2VuZGluZyBSRUZFUiByZXF1ZXN0YCk7XG4gICAgICAgIGlmICh0aGlzLmVhcmx5KSB7XG4gICAgICAgICAgICAvLyBGSVhNRTogVE9ETzogVGhpcyBzaG91bGQgdGhyb3cgYSBwcm9wZXIgZXhjZXB0aW9uLlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGlhbG9nIG5vdCBjb25maXJtZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZJWE1FOiBUT0RPOiBWYWxpZGF0ZSBSZWZlci1UbyBoZWFkZXIgZmllbGQgdmFsdWUuXG4gICAgICAgIHJldHVybiBuZXcgUmVmZXJVc2VyQWdlbnRDbGllbnQodGhpcywgZGVsZWdhdGUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0cyBzZW50IHdpdGhpbiBhIGRpYWxvZywgYXMgYW55IG90aGVyIHJlcXVlc3RzLCBhcmUgYXRvbWljLiAgSWZcbiAgICAgKiBhIHBhcnRpY3VsYXIgcmVxdWVzdCBpcyBhY2NlcHRlZCBieSB0aGUgVUFTLCBhbGwgdGhlIHN0YXRlIGNoYW5nZXNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggaXQgYXJlIHBlcmZvcm1lZC4gIElmIHRoZSByZXF1ZXN0IGlzIHJlamVjdGVkLCBub25lXG4gICAgICogb2YgdGhlIHN0YXRlIGNoYW5nZXMgYXJlIHBlcmZvcm1lZC5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjIuMlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gSW5jb21pbmcgcmVxdWVzdCBtZXNzYWdlIHdpdGhpbiB0aGlzIGRpYWxvZy5cbiAgICAgKi9cbiAgICByZWNlaXZlUmVxdWVzdChtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkICR7bWVzc2FnZS5tZXRob2R9IHJlcXVlc3RgKTtcbiAgICAgICAgLy8gUmVzcG9uc2UgcmV0cmFuc21pc3Npb25zIGNlYXNlIHdoZW4gYW4gQUNLIHJlcXVlc3QgZm9yIHRoZVxuICAgICAgICAvLyByZXNwb25zZSBpcyByZWNlaXZlZC4gIFRoaXMgaXMgaW5kZXBlbmRlbnQgb2Ygd2hhdGV2ZXIgdHJhbnNwb3J0XG4gICAgICAgIC8vIHByb3RvY29scyBhcmUgdXNlZCB0byBzZW5kIHRoZSByZXNwb25zZS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi04LjFcbiAgICAgICAgaWYgKG1lc3NhZ2UubWV0aG9kID09PSBDLkFDSykge1xuICAgICAgICAgICAgLy8gSWYgYWNrV2FpdCBpcyB0cnVlLCB0aGVuIHRoaXMgaXMgdGhlIEFDSyB0byB0aGUgaW5pdGlhbCBJTlZJVEUsXG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgdGhpcyBpcyBhbiBBQ0sgdG8gYW4gaW4gZGlhbG9nIElOVklURS4gSW4gZWl0aGVyIGNhc2UsXG4gICAgICAgICAgICAvLyBndWFyZCB0byBtYWtlIHN1cmUgdGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgQUNLIG1hdGNoZXMgdGhlIElOVklURS5cbiAgICAgICAgICAgIGlmICh0aGlzLmFja1dhaXQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsVHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gcmVjZWl2ZWQgdW5leHBlY3RlZCAke21lc3NhZ2UubWV0aG9kfSByZXF1ZXN0LCBkcm9wcGluZy5gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsVHJhbnNhY3Rpb24ucmVxdWVzdC5jc2VxICE9PSBtZXNzYWdlLmNzZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkIHVuZXhwZWN0ZWQgJHttZXNzYWdlLm1ldGhvZH0gcmVxdWVzdCwgZHJvcHBpbmcuYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGJlZm9yZSB0aGUgZGVsZWdhdGUgaGFzIGEgY2hhbmNlIHRvIGhhbmRsZSB0aGVcbiAgICAgICAgICAgICAgICAvLyBtZXNzYWdlIGFzIGRlbGVnYXRlIG1heSBjYWxsYmFjayBpbnRvIHRoaXMgZGlhbG9nLlxuICAgICAgICAgICAgICAgIHRoaXMuYWNrV2FpdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSByZWNlaXZlZCB1bmV4cGVjdGVkICR7bWVzc2FnZS5tZXRob2R9IHJlcXVlc3QsIGRyb3BwaW5nLmApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyLnRyYW5zYWN0aW9uLnJlcXVlc3QuY3NlcSAhPT0gbWVzc2FnZS5jc2VxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSByZWNlaXZlZCB1bmV4cGVjdGVkICR7bWVzc2FnZS5tZXRob2R9IHJlcXVlc3QsIGRyb3BwaW5nLmApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihtZXNzYWdlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25BY2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlT3JWb2lkID0gdGhpcy5kZWxlZ2F0ZS5vbkFjayh7IG1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHByb21pc2VPclZvaWQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWNrUHJvY2Vzc2luZyA9IHRydWU7IC8vIG1ha2Ugc3VyZSB0aGlzIGlzIGFsd2F5cyByZXNldCB0byBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlT3JWb2lkLnRoZW4oKCkgPT4gKHRoaXMuYWNrUHJvY2Vzc2luZyA9IGZhbHNlKSkuY2F0Y2goKCkgPT4gKHRoaXMuYWNrUHJvY2Vzc2luZyA9IGZhbHNlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlcXVlc3Qgd2l0aGluIGEgZGlhbG9nIG91dCBvZiBzZXF1ZW5jZSBndWFyZC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4yLjJcbiAgICAgICAgaWYgKCF0aGlzLnNlcXVlbmNlR3VhcmQobWVzc2FnZSkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHJlamVjdGVkIG91dCBvZiBvcmRlciAke21lc3NhZ2UubWV0aG9kfSByZXF1ZXN0LmApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlcXVlc3Qgd2l0aGluIGEgZGlhbG9nIGNvbW1vbiBwcm9jZXNzaW5nLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjIuMlxuICAgICAgICBzdXBlci5yZWNlaXZlUmVxdWVzdChtZXNzYWdlKTtcbiAgICAgICAgLy8gSGFuZGxlIHZhcmlvdXMgSU5WSVRFIHJlbGF0ZWQgY3Jvc3Mtb3ZlciwgZ2xhcmUgYW5kIHJhY2UgY29uZGl0aW9uc1xuICAgICAgICBpZiAobWVzc2FnZS5tZXRob2QgPT09IEMuSU5WSVRFKSB7XG4gICAgICAgICAgICAvLyBIb3BlZnVsbHkgdGhpcyBtZXNzYWdlIGlzIGhlbHBmdWwuLi5cbiAgICAgICAgICAgIGNvbnN0IHdhcm5pbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhc29uID0gdGhpcy5hY2tXYWl0ID8gXCJ3YWl0aW5nIGZvciBpbml0aWFsIEFDS1wiIDogXCJwcm9jZXNzaW5nIGluaXRpYWwgQUNLXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkIHJlLUlOVklURSB3aGlsZSAke3JlYXNvbn1gKTtcbiAgICAgICAgICAgICAgICBsZXQgbXNnID0gXCJSRkMgNTQwNyBzdWdnZXN0cyB0aGUgZm9sbG93aW5nIHRvIGF2b2lkIHRoaXMgcmFjZSBjb25kaXRpb24uLi4gXCI7XG4gICAgICAgICAgICAgICAgbXNnICs9IFwiIE5vdGU6IEltcGxlbWVudGF0aW9uIGlzc3VlcyBhcmUgb3V0c2lkZSB0aGUgc2NvcGUgb2YgdGhpcyBkb2N1bWVudCxcIjtcbiAgICAgICAgICAgICAgICBtc2cgKz0gXCIgYnV0IHRoZSBmb2xsb3dpbmcgdGlwIGlzIHByb3ZpZGVkIGZvciBhdm9pZGluZyByYWNlIGNvbmRpdGlvbnMgb2ZcIjtcbiAgICAgICAgICAgICAgICBtc2cgKz0gXCIgdGhpcyB0eXBlLiAgVGhlIGNhbGxlciBjYW4gZGVsYXkgc2VuZGluZyByZS1JTlZJVEUgRjYgZm9yIHNvbWUgcGVyaW9kXCI7XG4gICAgICAgICAgICAgICAgbXNnICs9IFwiIG9mIHRpbWUgKDIgc2Vjb25kcywgcGVyaGFwcyksIGFmdGVyIHdoaWNoIHRoZSBjYWxsZXIgY2FuIHJlYXNvbmFibHlcIjtcbiAgICAgICAgICAgICAgICBtc2cgKz0gXCIgYXNzdW1lIHRoYXQgaXRzIEFDSyBoYXMgYmVlbiByZWNlaXZlZC4gIEltcGxlbWVudG9ycyBjYW4gZGVjb3VwbGUgdGhlXCI7XG4gICAgICAgICAgICAgICAgbXNnICs9IFwiIGFjdGlvbnMgb2YgdGhlIHVzZXIgKGUuZy4sIHByZXNzaW5nIHRoZSBob2xkIGJ1dHRvbikgZnJvbSB0aGUgYWN0aW9uc1wiO1xuICAgICAgICAgICAgICAgIG1zZyArPSBcIiBvZiB0aGUgcHJvdG9jb2wgKHRoZSBzZW5kaW5nIG9mIHJlLUlOVklURSBGNiksIHNvIHRoYXQgdGhlIFVBIGNhblwiO1xuICAgICAgICAgICAgICAgIG1zZyArPSBcIiBiZWhhdmUgbGlrZSB0aGlzLiAgSW4gdGhpcyBjYXNlLCBpdCBpcyB0aGUgaW1wbGVtZW50b3IncyBjaG9pY2UgYXMgdG9cIjtcbiAgICAgICAgICAgICAgICBtc2cgKz0gXCIgaG93IGxvbmcgdG8gd2FpdC4gIEluIG1vc3QgY2FzZXMsIHN1Y2ggYW4gaW1wbGVtZW50YXRpb24gbWF5IGJlXCI7XG4gICAgICAgICAgICAgICAgbXNnICs9IFwiIHVzZWZ1bCB0byBwcmV2ZW50IHRoZSB0eXBlIG9mIHJhY2UgY29uZGl0aW9uIHNob3duIGluIHRoaXMgc2VjdGlvbi5cIjtcbiAgICAgICAgICAgICAgICBtc2cgKz0gXCIgVGhpcyBkb2N1bWVudCBleHByZXNzZXMgbm8gcHJlZmVyZW5jZSBhYm91dCB3aGV0aGVyIG9yIG5vdCB0aGV5XCI7XG4gICAgICAgICAgICAgICAgbXNnICs9IFwiIHNob3VsZCB3YWl0IGZvciBhbiBBQ0sgdG8gYmUgZGVsaXZlcmVkLiAgQWZ0ZXIgY29uc2lkZXJpbmcgdGhlIGltcGFjdFwiO1xuICAgICAgICAgICAgICAgIG1zZyArPSBcIiBvbiB1c2VyIGV4cGVyaWVuY2UsIGltcGxlbWVudG9ycyBzaG91bGQgZGVjaWRlIHdoZXRoZXIgb3Igbm90IHRvIHdhaXRcIjtcbiAgICAgICAgICAgICAgICBtc2cgKz0gXCIgZm9yIGEgd2hpbGUsIGJlY2F1c2UgdGhlIHVzZXIgZXhwZXJpZW5jZSBkZXBlbmRzIG9uIHRoZVwiO1xuICAgICAgICAgICAgICAgIG1zZyArPSBcIiBpbXBsZW1lbnRhdGlvbiBhbmQgaGFzIG5vIGRpcmVjdCBiZWFyaW5nIG9uIHByb3RvY29sIGJlaGF2aW9yLlwiO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4obXNnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIGRyb3AgcmUtSU5WSVRFIHJlcXVlc3QgbWVzc2FnZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIEEgVUFTIHRoYXQgcmVjZWl2ZXMgYSBzZWNvbmQgSU5WSVRFIGJlZm9yZSBpdCBzZW5kcyB0aGUgZmluYWxcbiAgICAgICAgICAgIC8vIHJlc3BvbnNlIHRvIGEgZmlyc3QgSU5WSVRFIHdpdGggYSBsb3dlciBDU2VxIHNlcXVlbmNlIG51bWJlciBvbiB0aGVcbiAgICAgICAgICAgIC8vIHNhbWUgZGlhbG9nIE1VU1QgcmV0dXJuIGEgNTAwIChTZXJ2ZXIgSW50ZXJuYWwgRXJyb3IpIHJlc3BvbnNlIHRvIHRoZVxuICAgICAgICAgICAgLy8gc2Vjb25kIElOVklURSBhbmQgTVVTVCBpbmNsdWRlIGEgUmV0cnktQWZ0ZXIgaGVhZGVyIGZpZWxkIHdpdGggYVxuICAgICAgICAgICAgLy8gcmFuZG9tbHkgY2hvc2VuIHZhbHVlIG9mIGJldHdlZW4gMCBhbmQgMTAgc2Vjb25kcy5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTQuMlxuICAgICAgICAgICAgY29uc3QgcmV0cnlBZnRlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSArIDE7XG4gICAgICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSBbYFJldHJ5LUFmdGVyOiAke3JldHJ5QWZ0ZXJ9YF07XG4gICAgICAgICAgICAvLyBUaGVyZSBtYXkgYmUgT05MWSBPTkUgb2ZmZXIvYW5zd2VyIG5lZ290aWF0aW9uIGluIHByb2dyZXNzIGZvciBhXG4gICAgICAgICAgICAvLyBzaW5nbGUgZGlhbG9nIGF0IGFueSBwb2ludCBpbiB0aW1lLiAgU2VjdGlvbiA0IGV4cGxhaW5zIGhvdyB0byBlbnN1cmVcbiAgICAgICAgICAgIC8vIHRoaXMuXG4gICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjMzNyNzZWN0aW9uLTIuMlxuICAgICAgICAgICAgaWYgKHRoaXMuYWNrUHJvY2Vzc2luZykge1xuICAgICAgICAgICAgICAgIC8vIFVBUy1Jc0k6ICBXaGlsZSBhbiBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uIGlzIGluY29tcGxldGUgb3IgQUNLXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgIHRyYW5zYWN0aW9uIGFzc29jaWF0ZWQgd2l0aCBhbiBvZmZlci9hbnN3ZXIgaXMgaW5jb21wbGV0ZSxcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgYSBVQSBtdXN0IHJlamVjdCBhbm90aGVyIElOVklURSByZXF1ZXN0IHdpdGggYSA1MDBcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYzMzcjc2VjdGlvbi00LjNcbiAgICAgICAgICAgICAgICB0aGlzLmNvcmUucmVwbHlTdGF0ZWxlc3MobWVzc2FnZSwgeyBzdGF0dXNDb2RlOiA1MDAsIGV4dHJhSGVhZGVycyB9KTtcbiAgICAgICAgICAgICAgICB3YXJuaW5nKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gMy4xLjQuICBDYWxsZWUgUmVjZWl2ZXMgcmUtSU5WSVRFIChFc3RhYmxpc2hlZCBTdGF0ZSkgIFdoaWxlIGluIHRoZVxuICAgICAgICAgICAgLy8gTW9yYXRvcml1bSBTdGF0ZSAoQ2FzZSAxKVxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzU0MDcjc2VjdGlvbi0zLjEuNFxuICAgICAgICAgICAgLy8gMy4xLjUuICBDYWxsZWUgUmVjZWl2ZXMgcmUtSU5WSVRFIChFc3RhYmxpc2hlZCBTdGF0ZSkgV2hpbGUgaW4gdGhlXG4gICAgICAgICAgICAvLyBNb3JhdG9yaXVtIFN0YXRlIChDYXNlIDIpXG4gICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNTQwNyNzZWN0aW9uLTMuMS41XG4gICAgICAgICAgICBpZiAodGhpcy5hY2tXYWl0ICYmIHRoaXMuc2lnbmFsaW5nU3RhdGUgIT09IFNpZ25hbGluZ1N0YXRlLlN0YWJsZSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2NlbmFyaW8gaXMgYmFzaWNhbGx5IHRoZSBzYW1lIGFzIHRoYXQgb2YgU2VjdGlvbiAzLjEuNCwgYnV0XG4gICAgICAgICAgICAgICAgLy8gZGlmZmVycyBpbiBzZW5kaW5nIGFuIG9mZmVyIGluIHRoZSAyMDAgYW5kIGFuIGFuc3dlciBpbiB0aGUgQUNLLiAgSW5cbiAgICAgICAgICAgICAgICAvLyBjb250cmFzdCB0byB0aGUgcHJldmlvdXMgY2FzZSwgdGhlIG9mZmVyIGluIHRoZSAyMDAgKEYzKSBhbmQgdGhlXG4gICAgICAgICAgICAgICAgLy8gb2ZmZXIgaW4gdGhlIHJlLUlOVklURSAoRjYpIGNvbGxpZGUgd2l0aCBlYWNoIG90aGVyLlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gQm9iIHNlbmRzIGEgNDkxIHRvIHRoZSByZS1JTlZJVEUgKEY2KSBzaW5jZSBoZSBpcyBub3QgYWJsZSB0b1xuICAgICAgICAgICAgICAgIC8vIHByb3Blcmx5IGhhbmRsZSBhIG5ldyByZXF1ZXN0IHVudGlsIGhlIHJlY2VpdmVzIGFuIGFuc3dlci4gIChOb3RlOlxuICAgICAgICAgICAgICAgIC8vIDUwMCB3aXRoIGEgUmV0cnktQWZ0ZXIgaGVhZGVyIG1heSBiZSByZXR1cm5lZCBpZiB0aGUgNDkxIHJlc3BvbnNlIGlzXG4gICAgICAgICAgICAgICAgLy8gdW5kZXJzdG9vZCB0byBpbmRpY2F0ZSByZXF1ZXN0IGNvbGxpc2lvbi4gIEhvd2V2ZXIsIDQ5MSBpc1xuICAgICAgICAgICAgICAgIC8vIHJlY29tbWVuZGVkIGhlcmUgYmVjYXVzZSA1MDAgYXBwbGllcyB0byBzbyBtYW55IGNhc2VzIHRoYXQgaXQgaXNcbiAgICAgICAgICAgICAgICAvLyBkaWZmaWN1bHQgdG8gZGV0ZXJtaW5lIHdoYXQgdGhlIHJlYWwgcHJvYmxlbSB3YXMuKVxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM1NDA3I3NlY3Rpb24tMy4xLjVcbiAgICAgICAgICAgICAgICAvLyBVQVMtSXNJOiAgV2hpbGUgYW4gSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiBpcyBpbmNvbXBsZXRlIG9yIEFDS1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICB0cmFuc2FjdGlvbiBhc3NvY2lhdGVkIHdpdGggYW4gb2ZmZXIvYW5zd2VyIGlzIGluY29tcGxldGUsXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgIGEgVUEgbXVzdCByZWplY3QgYW5vdGhlciBJTlZJVEUgcmVxdWVzdCB3aXRoIGEgNTAwXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MzM3I3NlY3Rpb24tNC4zXG4gICAgICAgICAgICAgICAgdGhpcy5jb3JlLnJlcGx5U3RhdGVsZXNzKG1lc3NhZ2UsIHsgc3RhdHVzQ29kZTogNTAwLCBleHRyYUhlYWRlcnMgfSk7XG4gICAgICAgICAgICAgICAgd2FybmluZygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEEgVUFTIHRoYXQgcmVjZWl2ZXMgYSBzZWNvbmQgSU5WSVRFIGJlZm9yZSBpdCBzZW5kcyB0aGUgZmluYWxcbiAgICAgICAgICAgIC8vIHJlc3BvbnNlIHRvIGEgZmlyc3QgSU5WSVRFIHdpdGggYSBsb3dlciBDU2VxIHNlcXVlbmNlIG51bWJlciBvbiB0aGVcbiAgICAgICAgICAgIC8vIHNhbWUgZGlhbG9nIE1VU1QgcmV0dXJuIGEgNTAwIChTZXJ2ZXIgSW50ZXJuYWwgRXJyb3IpIHJlc3BvbnNlIHRvIHRoZVxuICAgICAgICAgICAgLy8gc2Vjb25kIElOVklURSBhbmQgTVVTVCBpbmNsdWRlIGEgUmV0cnktQWZ0ZXIgaGVhZGVyIGZpZWxkIHdpdGggYVxuICAgICAgICAgICAgLy8gcmFuZG9tbHkgY2hvc2VuIHZhbHVlIG9mIGJldHdlZW4gMCBhbmQgMTAgc2Vjb25kcy5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTQuMlxuICAgICAgICAgICAgaWYgKHRoaXMucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvcmUucmVwbHlTdGF0ZWxlc3MobWVzc2FnZSwgeyBzdGF0dXNDb2RlOiA1MDAsIGV4dHJhSGVhZGVycyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBIFVBUyB0aGF0IHJlY2VpdmVzIGFuIElOVklURSBvbiBhIGRpYWxvZyB3aGlsZSBhbiBJTlZJVEUgaXQgaGFkIHNlbnRcbiAgICAgICAgICAgIC8vIG9uIHRoYXQgZGlhbG9nIGlzIGluIHByb2dyZXNzIE1VU1QgcmV0dXJuIGEgNDkxIChSZXF1ZXN0IFBlbmRpbmcpXG4gICAgICAgICAgICAvLyByZXNwb25zZSB0byB0aGUgcmVjZWl2ZWQgSU5WSVRFLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNC4yXG4gICAgICAgICAgICBpZiAodGhpcy5yZWludml0ZVVzZXJBZ2VudENsaWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7IHN0YXR1c0NvZGU6IDQ5MSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVxdWVzdHMgd2l0aGluIGEgZGlhbG9nIE1BWSBjb250YWluIFJlY29yZC1Sb3V0ZSBhbmQgQ29udGFjdCBoZWFkZXJcbiAgICAgICAgLy8gZmllbGRzLiAgSG93ZXZlciwgdGhlc2UgcmVxdWVzdHMgZG8gbm90IGNhdXNlIHRoZSBkaWFsb2cncyByb3V0ZSBzZXRcbiAgICAgICAgLy8gdG8gYmUgbW9kaWZpZWQsIGFsdGhvdWdoIHRoZXkgbWF5IG1vZGlmeSB0aGUgcmVtb3RlIHRhcmdldCBVUkkuXG4gICAgICAgIC8vIFNwZWNpZmljYWxseSwgcmVxdWVzdHMgdGhhdCBhcmUgbm90IHRhcmdldCByZWZyZXNoIHJlcXVlc3RzIGRvIG5vdFxuICAgICAgICAvLyBtb2RpZnkgdGhlIGRpYWxvZydzIHJlbW90ZSB0YXJnZXQgVVJJLCBhbmQgcmVxdWVzdHMgdGhhdCBhcmUgdGFyZ2V0XG4gICAgICAgIC8vIHJlZnJlc2ggcmVxdWVzdHMgZG8uICBGb3IgZGlhbG9ncyB0aGF0IGhhdmUgYmVlbiBlc3RhYmxpc2hlZCB3aXRoIGFuXG4gICAgICAgIC8vIElOVklURSwgdGhlIG9ubHkgdGFyZ2V0IHJlZnJlc2ggcmVxdWVzdCBkZWZpbmVkIGlzIHJlLUlOVklURSAoc2VlXG4gICAgICAgIC8vIFNlY3Rpb24gMTQpLiAgT3RoZXIgZXh0ZW5zaW9ucyBtYXkgZGVmaW5lIGRpZmZlcmVudCB0YXJnZXQgcmVmcmVzaFxuICAgICAgICAvLyByZXF1ZXN0cyBmb3IgZGlhbG9ncyBlc3RhYmxpc2hlZCBpbiBvdGhlciB3YXlzLlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBOb3RlIHRoYXQgYW4gQUNLIGlzIE5PVCBhIHRhcmdldCByZWZyZXNoIHJlcXVlc3QuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRhcmdldCByZWZyZXNoIHJlcXVlc3RzIG9ubHkgdXBkYXRlIHRoZSBkaWFsb2cncyByZW1vdGUgdGFyZ2V0IFVSSSxcbiAgICAgICAgLy8gYW5kIG5vdCB0aGUgcm91dGUgc2V0IGZvcm1lZCBmcm9tIHRoZSBSZWNvcmQtUm91dGUuICBVcGRhdGluZyB0aGVcbiAgICAgICAgLy8gbGF0dGVyIHdvdWxkIGludHJvZHVjZSBzZXZlcmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgcHJvYmxlbXMgd2l0aFxuICAgICAgICAvLyBSRkMgMjU0My1jb21wbGlhbnQgc3lzdGVtcy5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNVxuICAgICAgICBpZiAobWVzc2FnZS5tZXRob2QgPT09IEMuSU5WSVRFKSB7XG4gICAgICAgICAgICAvLyBGSVhNRTogcGFyc2VyIG5lZWRzIHRvIGJlIHR5cGVkLi4uXG4gICAgICAgICAgICBjb25zdCBjb250YWN0ID0gbWVzc2FnZS5wYXJzZUhlYWRlcihcImNvbnRhY3RcIik7XG4gICAgICAgICAgICBpZiAoIWNvbnRhY3QpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBSZXZpZXcgdG8gbWFrZSBzdXJlIHRoaXMgd2lsbCBuZXZlciBoYXBwZW5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250YWN0IHVuZGVmaW5lZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIShjb250YWN0IGluc3RhbmNlb2YgTmFtZUFkZHJIZWFkZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udGFjdCBub3QgaW5zdGFuY2Ugb2YgTmFtZUFkZHJIZWFkZXIuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kaWFsb2dTdGF0ZS5yZW1vdGVUYXJnZXQgPSBjb250YWN0LnVyaTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTd2l0Y2ggb24gbWV0aG9kIGFuZCB0aGVuIGRlbGVnYXRlLlxuICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UubWV0aG9kKSB7XG4gICAgICAgICAgICBjYXNlIEMuQllFOlxuICAgICAgICAgICAgICAgIC8vIEEgVUFTIGNvcmUgcmVjZWl2aW5nIGEgQllFIHJlcXVlc3QgZm9yIGFuIGV4aXN0aW5nIGRpYWxvZyBNVVNUIGZvbGxvd1xuICAgICAgICAgICAgICAgIC8vIHRoZSBwcm9jZWR1cmVzIG9mIFNlY3Rpb24gMTIuMi4yIHRvIHByb2Nlc3MgdGhlIHJlcXVlc3QuICBPbmNlIGRvbmUsXG4gICAgICAgICAgICAgICAgLy8gdGhlIFVBUyBTSE9VTEQgdGVybWluYXRlIHRoZSBzZXNzaW9uIChhbmQgdGhlcmVmb3JlIHN0b3Agc2VuZGluZyBhbmRcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5pbmcgZm9yIG1lZGlhKS4gIFRoZSBvbmx5IGNhc2Ugd2hlcmUgaXQgY2FuIGVsZWN0IG5vdCB0byBhcmVcbiAgICAgICAgICAgICAgICAvLyBtdWx0aWNhc3Qgc2Vzc2lvbnMsIHdoZXJlIHBhcnRpY2lwYXRpb24gaXMgcG9zc2libGUgZXZlbiBpZiB0aGUgb3RoZXJcbiAgICAgICAgICAgICAgICAvLyBwYXJ0aWNpcGFudCBpbiB0aGUgZGlhbG9nIGhhcyB0ZXJtaW5hdGVkIGl0cyBpbnZvbHZlbWVudCBpbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBzZXNzaW9uLiAgV2hldGhlciBvciBub3QgaXQgZW5kcyBpdHMgcGFydGljaXBhdGlvbiBvbiB0aGUgc2Vzc2lvbixcbiAgICAgICAgICAgICAgICAvLyB0aGUgVUFTIGNvcmUgTVVTVCBnZW5lcmF0ZSBhIDJ4eCByZXNwb25zZSB0byB0aGUgQllFLCBhbmQgTVVTVCBwYXNzXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB0byB0aGUgc2VydmVyIHRyYW5zYWN0aW9uIGZvciB0cmFuc21pc3Npb24uXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBUaGUgVUFTIE1VU1Qgc3RpbGwgcmVzcG9uZCB0byBhbnkgcGVuZGluZyByZXF1ZXN0cyByZWNlaXZlZCBmb3IgdGhhdFxuICAgICAgICAgICAgICAgIC8vIGRpYWxvZy4gIEl0IGlzIFJFQ09NTUVOREVEIHRoYXQgYSA0ODcgKFJlcXVlc3QgVGVybWluYXRlZCkgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAvLyBiZSBnZW5lcmF0ZWQgdG8gdGhvc2UgcGVuZGluZyByZXF1ZXN0cy5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTE1LjEuMlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdWFzID0gbmV3IEJ5ZVVzZXJBZ2VudFNlcnZlcih0aGlzLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uQnllID8gdGhpcy5kZWxlZ2F0ZS5vbkJ5ZSh1YXMpIDogdWFzLmFjY2VwdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEMuSU5GTzpcbiAgICAgICAgICAgICAgICAvLyBJZiBhIFVBIHJlY2VpdmVzIGFuIElORk8gcmVxdWVzdCBhc3NvY2lhdGVkIHdpdGggYW4gSW5mbyBQYWNrYWdlIHRoYXRcbiAgICAgICAgICAgICAgICAvLyB0aGUgVUEgaGFzIG5vdCBpbmRpY2F0ZWQgd2lsbGluZ25lc3MgdG8gcmVjZWl2ZSwgdGhlIFVBIE1VU1Qgc2VuZCBhXG4gICAgICAgICAgICAgICAgLy8gNDY5IChCYWQgSW5mbyBQYWNrYWdlKSByZXNwb25zZSAoc2VlIFNlY3Rpb24gMTEuNiksIHdoaWNoIGNvbnRhaW5zIGFcbiAgICAgICAgICAgICAgICAvLyBSZWN2LUluZm8gaGVhZGVyIGZpZWxkIHdpdGggSW5mbyBQYWNrYWdlcyBmb3Igd2hpY2ggdGhlIFVBIGlzIHdpbGxpbmdcbiAgICAgICAgICAgICAgICAvLyB0byByZWNlaXZlIElORk8gcmVxdWVzdHMuXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1YXMgPSBuZXcgSW5mb1VzZXJBZ2VudFNlcnZlcih0aGlzLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uSW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmRlbGVnYXRlLm9uSW5mbyh1YXMpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHVhcy5yZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDQ2OSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYUhlYWRlcnM6IFtcIlJlY3YtSW5mbzpcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQy5JTlZJVEU6XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5ldyBzZXNzaW9uIGRlc2NyaXB0aW9uIGlzIG5vdCBhY2NlcHRhYmxlLCB0aGUgVUFTIGNhbiByZWplY3RcbiAgICAgICAgICAgICAgICAvLyBpdCBieSByZXR1cm5pbmcgYSA0ODggKE5vdCBBY2NlcHRhYmxlIEhlcmUpIHJlc3BvbnNlIGZvciB0aGUgcmUtXG4gICAgICAgICAgICAgICAgLy8gSU5WSVRFLiAgVGhpcyByZXNwb25zZSBTSE9VTEQgaW5jbHVkZSBhIFdhcm5pbmcgaGVhZGVyIGZpZWxkLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTQuMlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdWFzID0gbmV3IFJlSW52aXRlVXNlckFnZW50U2VydmVyKHRoaXMsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uSW52aXRlID8gdGhpcy5kZWxlZ2F0ZS5vbkludml0ZSh1YXMpIDogdWFzLnJlamVjdCh7IHN0YXR1c0NvZGU6IDQ4OCB9KTsgLy8gVE9ETzogV2FybmluZyBoZWFkZXIgZmllbGQuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDLk1FU1NBR0U6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1YXMgPSBuZXcgTWVzc2FnZVVzZXJBZ2VudFNlcnZlcih0aGlzLmNvcmUsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25NZXNzYWdlID8gdGhpcy5kZWxlZ2F0ZS5vbk1lc3NhZ2UodWFzKSA6IHVhcy5hY2NlcHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEMuTk9USUZZOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNTE1I3NlY3Rpb24tMi40LjRcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVhcyA9IG5ldyBOb3RpZnlVc2VyQWdlbnRTZXJ2ZXIodGhpcywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeSA/IHRoaXMuZGVsZWdhdGUub25Ob3RpZnkodWFzKSA6IHVhcy5hY2NlcHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEMuUFJBQ0s6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjIjc2VjdGlvbi00XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1YXMgPSBuZXcgUHJhY2tVc2VyQWdlbnRTZXJ2ZXIodGhpcywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vblByYWNrID8gdGhpcy5kZWxlZ2F0ZS5vblByYWNrKHVhcykgOiB1YXMuYWNjZXB0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDLlJFRkVSOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNTE1I3NlY3Rpb24tMi40LjJcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVhcyA9IG5ldyBSZWZlclVzZXJBZ2VudFNlcnZlcih0aGlzLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uUmVmZXIgPyB0aGlzLmRlbGVnYXRlLm9uUmVmZXIodWFzKSA6IHVhcy5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gcmVjZWl2ZWQgdW5pbXBsZW1lbnRlZCAke21lc3NhZ2UubWV0aG9kfSByZXF1ZXN0YCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7IHN0YXR1c0NvZGU6IDUwMSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmQgYWdhaW5zdCBvdXQgb2Ygb3JkZXIgcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2VzIGFuZCByZXRyYW5zbWlzc2lvbnMuXG4gICAgICogUmV0dXJucyBmYWxzZSBpZiB0aGUgcmVzcG9uc2Ugc2hvdWxkIGJlIGRpc2NhcmRlZCwgb3RoZXJ3aXNlIHRydWUuXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBJbmNvbWluZyByZXNwb25zZSBtZXNzYWdlIHdpdGhpbiB0aGlzIGRpYWxvZy5cbiAgICAgKi9cbiAgICByZWxpYWJsZVNlcXVlbmNlR3VhcmQobWVzc2FnZSkge1xuICAgICAgICBjb25zdCBzdGF0dXNDb2RlID0gbWVzc2FnZS5zdGF0dXNDb2RlO1xuICAgICAgICBpZiAoIXN0YXR1c0NvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0YXR1cyBjb2RlIHVuZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdHVzQ29kZSA+IDEwMCAmJiBzdGF0dXNDb2RlIDwgMjAwKSB7XG4gICAgICAgICAgICAvLyBJZiBhIHByb3Zpc2lvbmFsIHJlc3BvbnNlIGlzIHJlY2VpdmVkIGZvciBhbiBpbml0aWFsIHJlcXVlc3QsIGFuZFxuICAgICAgICAgICAgLy8gdGhhdCByZXNwb25zZSBjb250YWlucyBhIFJlcXVpcmUgaGVhZGVyIGZpZWxkIGNvbnRhaW5pbmcgdGhlIG9wdGlvblxuICAgICAgICAgICAgLy8gdGFnIDEwMHJlbCwgdGhlIHJlc3BvbnNlIGlzIHRvIGJlIHNlbnQgcmVsaWFibHkuICBJZiB0aGUgcmVzcG9uc2UgaXNcbiAgICAgICAgICAgIC8vIGEgMTAwIChUcnlpbmcpIChhcyBvcHBvc2VkIHRvIDEwMSB0byAxOTkpLCB0aGlzIG9wdGlvbiB0YWcgTVVTVCBiZVxuICAgICAgICAgICAgLy8gaWdub3JlZCwgYW5kIHRoZSBwcm9jZWR1cmVzIGJlbG93IE1VU1QgTk9UIGJlIHVzZWQuXG4gICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MiNzZWN0aW9uLTRcbiAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVIZWFkZXIgPSBtZXNzYWdlLmdldEhlYWRlcihcInJlcXVpcmVcIik7XG4gICAgICAgICAgICBjb25zdCByc2VxSGVhZGVyID0gbWVzc2FnZS5nZXRIZWFkZXIoXCJyc2VxXCIpO1xuICAgICAgICAgICAgY29uc3QgcnNlcSA9IHJlcXVpcmVIZWFkZXIgJiYgcmVxdWlyZUhlYWRlci5pbmNsdWRlcyhcIjEwMHJlbFwiKSAmJiByc2VxSGVhZGVyID8gTnVtYmVyKHJzZXFIZWFkZXIpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHJzZXEpIHtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGluZyBvZiBzdWJzZXF1ZW50IHJlbGlhYmxlIHByb3Zpc2lvbmFsIHJlc3BvbnNlcyBmb3IgdGhlIHNhbWVcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsIHJlcXVlc3QgZm9sbG93cyB0aGUgc2FtZSBydWxlcyBhcyBhYm92ZSwgd2l0aCB0aGUgZm9sbG93aW5nXG4gICAgICAgICAgICAgICAgLy8gZGlmZmVyZW5jZTogcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2VzIGFyZSBndWFyYW50ZWVkIHRvIGJlIGluXG4gICAgICAgICAgICAgICAgLy8gb3JkZXIuICBBcyBhIHJlc3VsdCwgaWYgdGhlIFVBQyByZWNlaXZlcyBhbm90aGVyIHJlbGlhYmxlIHByb3Zpc2lvbmFsXG4gICAgICAgICAgICAgICAgLy8gcmVzcG9uc2UgdG8gdGhlIHNhbWUgcmVxdWVzdCwgYW5kIGl0cyBSU2VxIHZhbHVlIGlzIG5vdCBvbmUgaGlnaGVyXG4gICAgICAgICAgICAgICAgLy8gdGhhbiB0aGUgdmFsdWUgb2YgdGhlIHNlcXVlbmNlIG51bWJlciwgdGhhdCByZXNwb25zZSBNVVNUIE5PVCBiZVxuICAgICAgICAgICAgICAgIC8vIGFja25vd2xlZGdlZCB3aXRoIGEgUFJBQ0ssIGFuZCBNVVNUIE5PVCBiZSBwcm9jZXNzZWQgZnVydGhlciBieSB0aGVcbiAgICAgICAgICAgICAgICAvLyBVQUMuICBBbiBpbXBsZW1lbnRhdGlvbiBNQVkgZGlzY2FyZCB0aGUgcmVzcG9uc2UsIG9yIE1BWSBjYWNoZSB0aGVcbiAgICAgICAgICAgICAgICAvLyByZXNwb25zZSBpbiB0aGUgaG9wZXMgb2YgcmVjZWl2aW5nIHRoZSBtaXNzaW5nIHJlc3BvbnNlcy5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MiNzZWN0aW9uLTRcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yc2VxICYmIHRoaXMucnNlcSArIDEgIT09IHJzZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBPbmNlIGEgcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2UgaXMgcmVjZWl2ZWQsIHJldHJhbnNtaXNzaW9ucyBvZlxuICAgICAgICAgICAgICAgIC8vIHRoYXQgcmVzcG9uc2UgTVVTVCBiZSBkaXNjYXJkZWQuICBBIHJlc3BvbnNlIGlzIGEgcmV0cmFuc21pc3Npb24gd2hlblxuICAgICAgICAgICAgICAgIC8vIGl0cyBkaWFsb2cgSUQsIENTZXEsIGFuZCBSU2VxIG1hdGNoIHRoZSBvcmlnaW5hbCByZXNwb25zZS4gIFRoZSBVQUNcbiAgICAgICAgICAgICAgICAvLyBNVVNUIG1haW50YWluIGEgc2VxdWVuY2UgbnVtYmVyIHRoYXQgaW5kaWNhdGVzIHRoZSBtb3N0IHJlY2VudGx5XG4gICAgICAgICAgICAgICAgLy8gcmVjZWl2ZWQgaW4tb3JkZXIgcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2UgZm9yIHRoZSBpbml0aWFsXG4gICAgICAgICAgICAgICAgLy8gcmVxdWVzdC4gIFRoaXMgc2VxdWVuY2UgbnVtYmVyIE1VU1QgYmUgbWFpbnRhaW5lZCB1bnRpbCBhIGZpbmFsXG4gICAgICAgICAgICAgICAgLy8gcmVzcG9uc2UgaXMgcmVjZWl2ZWQgZm9yIHRoZSBpbml0aWFsIHJlcXVlc3QuICBJdHMgdmFsdWUgTVVTVCBiZVxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemVkIHRvIHRoZSBSU2VxIGhlYWRlciBmaWVsZCBpbiB0aGUgZmlyc3QgcmVsaWFibGVcbiAgICAgICAgICAgICAgICAvLyBwcm92aXNpb25hbCByZXNwb25zZSByZWNlaXZlZCBmb3IgdGhlIGluaXRpYWwgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MiNzZWN0aW9uLTRcbiAgICAgICAgICAgICAgICB0aGlzLnJzZXEgPSB0aGlzLnJzZXEgPyB0aGlzLnJzZXEgKyAxIDogcnNlcTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgbm90IGluIGEgc3RhYmxlIHNpZ25hbGluZyBzdGF0ZSwgcm9sbGJhY2sgdG8gcHJpb3Igc3RhYmxlIHNpZ25hbGluZyBzdGF0ZS5cbiAgICAgKi9cbiAgICBzaWduYWxpbmdTdGF0ZVJvbGxiYWNrKCkge1xuICAgICAgICBpZiAodGhpcy5fc2lnbmFsaW5nU3RhdGUgPT09IFNpZ25hbGluZ1N0YXRlLkhhdmVMb2NhbE9mZmVyIHx8XG4gICAgICAgICAgICB0aGlzLnNpZ25hbGluZ1N0YXRlID09PSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9yb2xsYmFja09mZmVyICYmIHRoaXMuX3JvbGxiYWNrQW5zd2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2lnbmFsaW5nU3RhdGUgPSBTaWduYWxpbmdTdGF0ZS5TdGFibGU7XG4gICAgICAgICAgICAgICAgdGhpcy5fb2ZmZXIgPSB0aGlzLl9yb2xsYmFja09mZmVyO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Fuc3dlciA9IHRoaXMuX3JvbGxiYWNrQW5zd2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgc2lnbmFsaW5nIHN0YXRlIG9mIHRoZSBkaWFsb2cuXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byBiYXNlIHRoZSB1cGRhdGUgb2ZmIG9mLlxuICAgICAqL1xuICAgIHNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBnZXRCb2R5KG1lc3NhZ2UpO1xuICAgICAgICAvLyBObyBib2R5LCBubyBzZXNzaW9uLiBObywgd29tYW4sIG5vIGNyeS5cbiAgICAgICAgaWYgKCFib2R5IHx8IGJvZHkuY29udGVudERpc3Bvc2l0aW9uICE9PSBcInNlc3Npb25cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlJ3ZlIGdvdCBhbiBleGlzdGluZyBvZmZlciBhbmQgYW5zd2VyIHdoaWNoIHdlIG1heSB3aXNoIHRvIHJvbGxiYWNrIHRvXG4gICAgICAgIGlmICh0aGlzLl9zaWduYWxpbmdTdGF0ZSA9PT0gU2lnbmFsaW5nU3RhdGUuU3RhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9yb2xsYmFja09mZmVyID0gdGhpcy5fb2ZmZXI7XG4gICAgICAgICAgICB0aGlzLl9yb2xsYmFja0Fuc3dlciA9IHRoaXMuX2Fuc3dlcjtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSdyZSBpbiBVQVMgcm9sZSwgcmVjZWl2aW5nIGluY29taW5nIHJlcXVlc3Qgd2l0aCBzZXNzaW9uIGRlc2NyaXB0aW9uXG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgSW5jb21pbmdSZXF1ZXN0TWVzc2FnZSkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLl9zaWduYWxpbmdTdGF0ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuSW5pdGlhbDpcbiAgICAgICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLlN0YWJsZTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2lnbmFsaW5nU3RhdGUgPSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29mZmVyID0gYm9keTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYW5zd2VyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLkhhdmVMb2NhbE9mZmVyOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaWduYWxpbmdTdGF0ZSA9IFNpZ25hbGluZ1N0YXRlLlN0YWJsZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYW5zd2VyID0gYm9keTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXI6XG4gICAgICAgICAgICAgICAgICAgIC8vIFlvdSBjYW5ub3QgbWFrZSBhIG5ldyBvZmZlciB3aGlsZSBvbmUgaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMi4xXG4gICAgICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBXaGF0IHRvIGRvIGhlcmU/XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuQ2xvc2VkOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHNpZ25hbGluZyBzdGF0ZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UncmUgaW4gVUFDIHJvbGUsIHJlY2VpdmluZyBpbmNvbWluZyByZXNwb25zZSB3aXRoIHNlc3Npb24gZGVzY3JpcHRpb25cbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBJbmNvbWluZ1Jlc3BvbnNlTWVzc2FnZSkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLl9zaWduYWxpbmdTdGF0ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuSW5pdGlhbDpcbiAgICAgICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLlN0YWJsZTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2lnbmFsaW5nU3RhdGUgPSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29mZmVyID0gYm9keTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYW5zd2VyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLkhhdmVMb2NhbE9mZmVyOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaWduYWxpbmdTdGF0ZSA9IFNpZ25hbGluZ1N0YXRlLlN0YWJsZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYW5zd2VyID0gYm9keTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXI6XG4gICAgICAgICAgICAgICAgICAgIC8vIFlvdSBjYW5ub3QgbWFrZSBhIG5ldyBvZmZlciB3aGlsZSBvbmUgaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMi4xXG4gICAgICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBXaGF0IHRvIGRvIGhlcmU/XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuQ2xvc2VkOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHNpZ25hbGluZyBzdGF0ZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UncmUgaW4gVUFDIHJvbGUsIHNlbmRpbmcgb3V0Z29pbmcgcmVxdWVzdCB3aXRoIHNlc3Npb24gZGVzY3JpcHRpb25cbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuX3NpZ25hbGluZ1N0YXRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5Jbml0aWFsOlxuICAgICAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuU3RhYmxlOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaWduYWxpbmdTdGF0ZSA9IFNpZ25hbGluZ1N0YXRlLkhhdmVMb2NhbE9mZmVyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vZmZlciA9IGJvZHk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2Fuc3dlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5IYXZlTG9jYWxPZmZlcjpcbiAgICAgICAgICAgICAgICAgICAgLy8gWW91IGNhbm5vdCBtYWtlIGEgbmV3IG9mZmVyIHdoaWxlIG9uZSBpcyBpbiBwcm9ncmVzcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjFcbiAgICAgICAgICAgICAgICAgICAgLy8gRklYTUU6IFdoYXQgdG8gZG8gaGVyZT9cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NpZ25hbGluZ1N0YXRlID0gU2lnbmFsaW5nU3RhdGUuU3RhYmxlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hbnN3ZXIgPSBib2R5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLkNsb3NlZDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBzaWduYWxpbmcgc3RhdGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFdlJ3JlIGluIFVBUyByb2xlLCBzZW5kaW5nIG91dGdvaW5nIHJlc3BvbnNlIHdpdGggc2Vzc2lvbiBkZXNjcmlwdGlvblxuICAgICAgICBpZiAoaXNCb2R5KG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuX3NpZ25hbGluZ1N0YXRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5Jbml0aWFsOlxuICAgICAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuU3RhYmxlOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaWduYWxpbmdTdGF0ZSA9IFNpZ25hbGluZ1N0YXRlLkhhdmVMb2NhbE9mZmVyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vZmZlciA9IGJvZHk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2Fuc3dlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5IYXZlTG9jYWxPZmZlcjpcbiAgICAgICAgICAgICAgICAgICAgLy8gWW91IGNhbm5vdCBtYWtlIGEgbmV3IG9mZmVyIHdoaWxlIG9uZSBpcyBpbiBwcm9ncmVzcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjFcbiAgICAgICAgICAgICAgICAgICAgLy8gRklYTUU6IFdoYXQgdG8gZG8gaGVyZT9cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NpZ25hbGluZ1N0YXRlID0gU2lnbmFsaW5nU3RhdGUuU3RhYmxlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hbnN3ZXIgPSBib2R5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLkNsb3NlZDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBzaWduYWxpbmcgc3RhdGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0Mnh4UmV0cmFuc21pc3Npb25UaW1lcigpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbFRyYW5zYWN0aW9uIGluc3RhbmNlb2YgSW52aXRlU2VydmVyVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5pbml0aWFsVHJhbnNhY3Rpb247XG4gICAgICAgICAgICAvLyBPbmNlIHRoZSByZXNwb25zZSBoYXMgYmVlbiBjb25zdHJ1Y3RlZCwgaXQgaXMgcGFzc2VkIHRvIHRoZSBJTlZJVEVcbiAgICAgICAgICAgIC8vIHNlcnZlciB0cmFuc2FjdGlvbi4gIEluIG9yZGVyIHRvIGVuc3VyZSByZWxpYWJsZSBlbmQtdG8tZW5kXG4gICAgICAgICAgICAvLyB0cmFuc3BvcnQgb2YgdGhlIHJlc3BvbnNlLCBpdCBpcyBuZWNlc3NhcnkgdG8gcGVyaW9kaWNhbGx5IHBhc3NcbiAgICAgICAgICAgIC8vIHRoZSByZXNwb25zZSBkaXJlY3RseSB0byB0aGUgdHJhbnNwb3J0IHVudGlsIHRoZSBBQ0sgYXJyaXZlcy4gIFRoZVxuICAgICAgICAgICAgLy8gMnh4IHJlc3BvbnNlIGlzIHBhc3NlZCB0byB0aGUgdHJhbnNwb3J0IHdpdGggYW4gaW50ZXJ2YWwgdGhhdFxuICAgICAgICAgICAgLy8gc3RhcnRzIGF0IFQxIHNlY29uZHMgYW5kIGRvdWJsZXMgZm9yIGVhY2ggcmV0cmFuc21pc3Npb24gdW50aWwgaXRcbiAgICAgICAgICAgIC8vIHJlYWNoZXMgVDIgc2Vjb25kcyAoVDEgYW5kIFQyIGFyZSBkZWZpbmVkIGluIFNlY3Rpb24gMTcpLlxuICAgICAgICAgICAgLy8gUmVzcG9uc2UgcmV0cmFuc21pc3Npb25zIGNlYXNlIHdoZW4gYW4gQUNLIHJlcXVlc3QgZm9yIHRoZVxuICAgICAgICAgICAgLy8gcmVzcG9uc2UgaXMgcmVjZWl2ZWQuICBUaGlzIGlzIGluZGVwZW5kZW50IG9mIHdoYXRldmVyIHRyYW5zcG9ydFxuICAgICAgICAgICAgLy8gcHJvdG9jb2xzIGFyZSB1c2VkIHRvIHNlbmQgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi04LjFcbiAgICAgICAgICAgIGxldCB0aW1lb3V0ID0gVGltZXJzLlQxO1xuICAgICAgICAgICAgY29uc3QgcmV0cmFuc21pc3Npb24gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFja1dhaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZpdGUyeHhUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJObyBBQ0sgZm9yIDJ4eCByZXNwb25zZSByZWNlaXZlZCwgYXR0ZW1wdGluZyByZXRyYW5zbWlzc2lvblwiKTtcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5yZXRyYW5zbWl0QWNjZXB0ZWRSZXNwb25zZSgpO1xuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBNYXRoLm1pbih0aW1lb3V0ICogMiwgVGltZXJzLlQyKTtcbiAgICAgICAgICAgICAgICB0aGlzLmludml0ZTJ4eFRpbWVyID0gc2V0VGltZW91dChyZXRyYW5zbWlzc2lvbiwgdGltZW91dCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5pbnZpdGUyeHhUaW1lciA9IHNldFRpbWVvdXQocmV0cmFuc21pc3Npb24sIHRpbWVvdXQpO1xuICAgICAgICAgICAgLy8gSWYgdGhlIHNlcnZlciByZXRyYW5zbWl0cyB0aGUgMnh4IHJlc3BvbnNlIGZvciA2NCpUMSBzZWNvbmRzIHdpdGhvdXRcbiAgICAgICAgICAgIC8vIHJlY2VpdmluZyBhbiBBQ0ssIHRoZSBkaWFsb2cgaXMgY29uZmlybWVkLCBidXQgdGhlIHNlc3Npb24gU0hPVUxEIGJlXG4gICAgICAgICAgICAvLyB0ZXJtaW5hdGVkLiAgVGhpcyBpcyBhY2NvbXBsaXNoZWQgd2l0aCBhIEJZRSwgYXMgZGVzY3JpYmVkIGluIFNlY3Rpb24gMTUuXG4gICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjMuMS40XG4gICAgICAgICAgICBjb25zdCBzdGF0ZUNoYW5nZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYW5zYWN0aW9uLnN0YXRlID09PSBUcmFuc2FjdGlvblN0YXRlLlRlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ucmVtb3ZlU3RhdGVDaGFuZ2VMaXN0ZW5lcihzdGF0ZUNoYW5nZWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnZpdGUyeHhUaW1lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaW52aXRlMnh4VGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZpdGUyeHhUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY2tXYWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uQWNrVGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25BY2tUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ5ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLmFkZFN0YXRlQ2hhbmdlTGlzdGVuZXIoc3RhdGVDaGFuZ2VkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBGSVhNRTogUmVmYWN0b3JcbiAgICBzdGFydFJlSW52aXRlMnh4UmV0cmFuc21pc3Npb25UaW1lcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXIgJiYgdGhpcy5yZWludml0ZVVzZXJBZ2VudFNlcnZlci50cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEludml0ZVNlcnZlclRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXIudHJhbnNhY3Rpb247XG4gICAgICAgICAgICAvLyBPbmNlIHRoZSByZXNwb25zZSBoYXMgYmVlbiBjb25zdHJ1Y3RlZCwgaXQgaXMgcGFzc2VkIHRvIHRoZSBJTlZJVEVcbiAgICAgICAgICAgIC8vIHNlcnZlciB0cmFuc2FjdGlvbi4gIEluIG9yZGVyIHRvIGVuc3VyZSByZWxpYWJsZSBlbmQtdG8tZW5kXG4gICAgICAgICAgICAvLyB0cmFuc3BvcnQgb2YgdGhlIHJlc3BvbnNlLCBpdCBpcyBuZWNlc3NhcnkgdG8gcGVyaW9kaWNhbGx5IHBhc3NcbiAgICAgICAgICAgIC8vIHRoZSByZXNwb25zZSBkaXJlY3RseSB0byB0aGUgdHJhbnNwb3J0IHVudGlsIHRoZSBBQ0sgYXJyaXZlcy4gIFRoZVxuICAgICAgICAgICAgLy8gMnh4IHJlc3BvbnNlIGlzIHBhc3NlZCB0byB0aGUgdHJhbnNwb3J0IHdpdGggYW4gaW50ZXJ2YWwgdGhhdFxuICAgICAgICAgICAgLy8gc3RhcnRzIGF0IFQxIHNlY29uZHMgYW5kIGRvdWJsZXMgZm9yIGVhY2ggcmV0cmFuc21pc3Npb24gdW50aWwgaXRcbiAgICAgICAgICAgIC8vIHJlYWNoZXMgVDIgc2Vjb25kcyAoVDEgYW5kIFQyIGFyZSBkZWZpbmVkIGluIFNlY3Rpb24gMTcpLlxuICAgICAgICAgICAgLy8gUmVzcG9uc2UgcmV0cmFuc21pc3Npb25zIGNlYXNlIHdoZW4gYW4gQUNLIHJlcXVlc3QgZm9yIHRoZVxuICAgICAgICAgICAgLy8gcmVzcG9uc2UgaXMgcmVjZWl2ZWQuICBUaGlzIGlzIGluZGVwZW5kZW50IG9mIHdoYXRldmVyIHRyYW5zcG9ydFxuICAgICAgICAgICAgLy8gcHJvdG9jb2xzIGFyZSB1c2VkIHRvIHNlbmQgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi04LjFcbiAgICAgICAgICAgIGxldCB0aW1lb3V0ID0gVGltZXJzLlQxO1xuICAgICAgICAgICAgY29uc3QgcmV0cmFuc21pc3Npb24gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW52aXRlMnh4VGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiTm8gQUNLIGZvciAyeHggcmVzcG9uc2UgcmVjZWl2ZWQsIGF0dGVtcHRpbmcgcmV0cmFuc21pc3Npb25cIik7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ucmV0cmFuc21pdEFjY2VwdGVkUmVzcG9uc2UoKTtcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gTWF0aC5taW4odGltZW91dCAqIDIsIFRpbWVycy5UMik7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnZpdGUyeHhUaW1lciA9IHNldFRpbWVvdXQocmV0cmFuc21pc3Npb24sIHRpbWVvdXQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuaW52aXRlMnh4VGltZXIgPSBzZXRUaW1lb3V0KHJldHJhbnNtaXNzaW9uLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBzZXJ2ZXIgcmV0cmFuc21pdHMgdGhlIDJ4eCByZXNwb25zZSBmb3IgNjQqVDEgc2Vjb25kcyB3aXRob3V0XG4gICAgICAgICAgICAvLyByZWNlaXZpbmcgYW4gQUNLLCB0aGUgZGlhbG9nIGlzIGNvbmZpcm1lZCwgYnV0IHRoZSBzZXNzaW9uIFNIT1VMRCBiZVxuICAgICAgICAgICAgLy8gdGVybWluYXRlZC4gIFRoaXMgaXMgYWNjb21wbGlzaGVkIHdpdGggYSBCWUUsIGFzIGRlc2NyaWJlZCBpbiBTZWN0aW9uIDE1LlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4zLjEuNFxuICAgICAgICAgICAgY29uc3Qgc3RhdGVDaGFuZ2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbi5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnJlbW92ZVN0YXRlQ2hhbmdlTGlzdGVuZXIoc3RhdGVDaGFuZ2VkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW52aXRlMnh4VGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmludml0ZTJ4eFRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52aXRlMnh4VGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBUT0RPOiBXaGF0IHRvIGRvIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5hZGRTdGF0ZUNoYW5nZUxpc3RlbmVyKHN0YXRlQ2hhbmdlZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBEaWFsb2csIFNlc3Npb25EaWFsb2cgfSBmcm9tIFwiLi4vZGlhbG9nc1wiO1xuaW1wb3J0IHsgU2lnbmFsaW5nU3RhdGUgfSBmcm9tIFwiLi4vc2Vzc2lvblwiO1xuaW1wb3J0IHsgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24sIFRyYW5zYWN0aW9uU3RhdGUgfSBmcm9tIFwiLi4vdHJhbnNhY3Rpb25zXCI7XG5pbXBvcnQgeyBVc2VyQWdlbnRDbGllbnQgfSBmcm9tIFwiLi91c2VyLWFnZW50LWNsaWVudFwiO1xuLyoqXG4gKiBJTlZJVEUgVUFDLlxuICogQHJlbWFya3NcbiAqIDEzIEluaXRpYXRpbmcgYSBTZXNzaW9uXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzXG4gKiAxMy4xIE92ZXJ2aWV3XG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjFcbiAqIDEzLjIgVUFDIFByb2Nlc3NpbmdcbiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgSW52aXRlVXNlckFnZW50Q2xpZW50IGV4dGVuZHMgVXNlckFnZW50Q2xpZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb3JlLCBtZXNzYWdlLCBkZWxlZ2F0ZSkge1xuICAgICAgICBzdXBlcihJbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwgY29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpO1xuICAgICAgICB0aGlzLmNvbmZpcm1lZERpYWxvZ0Fja3MgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuY29uZmlybWVkRGlhbG9ncyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5lYXJseURpYWxvZ3MgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgLy8gVGhlIFVBQyBjb3JlIGNvbnNpZGVycyB0aGUgSU5WSVRFIHRyYW5zYWN0aW9uIGNvbXBsZXRlZCA2NCpUMSBzZWNvbmRzXG4gICAgICAgIC8vIGFmdGVyIHRoZSByZWNlcHRpb24gb2YgdGhlIGZpcnN0IDJ4eCByZXNwb25zZS4gIEF0IHRoaXMgcG9pbnQgYWxsIHRoZVxuICAgICAgICAvLyBlYXJseSBkaWFsb2dzIHRoYXQgaGF2ZSBub3QgdHJhbnNpdGlvbmVkIHRvIGVzdGFibGlzaGVkIGRpYWxvZ3MgYXJlXG4gICAgICAgIC8vIHRlcm1pbmF0ZWQuICBPbmNlIHRoZSBJTlZJVEUgdHJhbnNhY3Rpb24gaXMgY29uc2lkZXJlZCBjb21wbGV0ZWQgYnlcbiAgICAgICAgLy8gdGhlIFVBQyBjb3JlLCBubyBtb3JlIG5ldyAyeHggcmVzcG9uc2VzIGFyZSBleHBlY3RlZCB0byBhcnJpdmUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIElmLCBhZnRlciBhY2tub3dsZWRnaW5nIGFueSAyeHggcmVzcG9uc2UgdG8gYW4gSU5WSVRFLCB0aGUgVUFDIGRvZXNcbiAgICAgICAgLy8gbm90IHdhbnQgdG8gY29udGludWUgd2l0aCB0aGF0IGRpYWxvZywgdGhlbiB0aGUgVUFDIE1VU1QgdGVybWluYXRlXG4gICAgICAgIC8vIHRoZSBkaWFsb2cgYnkgc2VuZGluZyBhIEJZRSByZXF1ZXN0IGFzIGRlc2NyaWJlZCBpbiBTZWN0aW9uIDE1LlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjIuMi40XG4gICAgICAgIHRoaXMuZWFybHlEaWFsb2dzLmZvckVhY2goKGVhcmx5RGlhbG9nKSA9PiBlYXJseURpYWxvZy5kaXNwb3NlKCkpO1xuICAgICAgICB0aGlzLmVhcmx5RGlhbG9ncy5jbGVhcigpO1xuICAgICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpYWwgY2FzZSBmb3IgdHJhbnNwb3J0IGVycm9yIHdoaWxlIHNlbmRpbmcgQUNLLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIFRyYW5zcG9ydCBlcnJvclxuICAgICAqL1xuICAgIG9uVHJhbnNwb3J0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24uc3RhdGUgPT09IFRyYW5zYWN0aW9uU3RhdGUuQ2FsbGluZykge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uVHJhbnNwb3J0RXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIG5vdCBpbiAnY2FsbGluZycgc3RhdGUsIHRoZSB0cmFuc3BvcnQgZXJyb3Igb2NjdXJyZWQgd2hpbGUgc2VuZGluZyBhbiBBQ0suXG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIlVzZXIgYWdlbnQgY2xpZW50IHJlcXVlc3QgdHJhbnNwb3J0IGVycm9yIHdoaWxlIHNlbmRpbmcgQUNLLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT25jZSB0aGUgSU5WSVRFIGhhcyBiZWVuIHBhc3NlZCB0byB0aGUgSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiwgdGhlXG4gICAgICogVUFDIHdhaXRzIGZvciByZXNwb25zZXMgZm9yIHRoZSBJTlZJVEUuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjJcbiAgICAgKiBAcGFyYW0gaW5jb21pbmdSZXNwb25zZSAtIEluY29taW5nIHJlc3BvbnNlIHRvIElOVklURSByZXF1ZXN0LlxuICAgICAqL1xuICAgIHJlY2VpdmVSZXNwb25zZShtZXNzYWdlKSB7XG4gICAgICAgIGlmICghdGhpcy5hdXRoZW50aWNhdGlvbkd1YXJkKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzQ29kZSA9IG1lc3NhZ2Uuc3RhdHVzQ29kZSA/IG1lc3NhZ2Uuc3RhdHVzQ29kZS50b1N0cmluZygpIDogXCJcIjtcbiAgICAgICAgaWYgKCFzdGF0dXNDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZXNwb25zZSBzdGF0dXMgY29kZSB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodHJ1ZSkge1xuICAgICAgICAgICAgY2FzZSAvXjEwMCQvLnRlc3Qoc3RhdHVzQ29kZSk6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vblRyeWluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uVHJ5aW5nKHsgbWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSAvXjFbMC05XXsyfSQvLnRlc3Qoc3RhdHVzQ29kZSk6XG4gICAgICAgICAgICAgICAgLy8gWmVybywgb25lIG9yIG11bHRpcGxlIHByb3Zpc2lvbmFsIHJlc3BvbnNlcyBtYXkgYXJyaXZlIGJlZm9yZSBvbmUgb3JcbiAgICAgICAgICAgICAgICAvLyBtb3JlIGZpbmFsIHJlc3BvbnNlcyBhcmUgcmVjZWl2ZWQuICBQcm92aXNpb25hbCByZXNwb25zZXMgZm9yIGFuXG4gICAgICAgICAgICAgICAgLy8gSU5WSVRFIHJlcXVlc3QgY2FuIGNyZWF0ZSBcImVhcmx5IGRpYWxvZ3NcIi4gIElmIGEgcHJvdmlzaW9uYWwgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAvLyBoYXMgYSB0YWcgaW4gdGhlIFRvIGZpZWxkLCBhbmQgaWYgdGhlIGRpYWxvZyBJRCBvZiB0aGUgcmVzcG9uc2UgZG9lc1xuICAgICAgICAgICAgICAgIC8vIG5vdCBtYXRjaCBhbiBleGlzdGluZyBkaWFsb2csIG9uZSBpcyBjb25zdHJ1Y3RlZCB1c2luZyB0aGUgcHJvY2VkdXJlc1xuICAgICAgICAgICAgICAgIC8vIGRlZmluZWQgaW4gU2VjdGlvbiAxMi4xLjIuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBUaGUgZWFybHkgZGlhbG9nIHdpbGwgb25seSBiZSBuZWVkZWQgaWYgdGhlIFVBQyBuZWVkcyB0byBzZW5kIGFcbiAgICAgICAgICAgICAgICAvLyByZXF1ZXN0IHRvIGl0cyBwZWVyIHdpdGhpbiB0aGUgZGlhbG9nIGJlZm9yZSB0aGUgaW5pdGlhbCBJTlZJVEVcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBjb21wbGV0ZXMuICBIZWFkZXIgZmllbGRzIHByZXNlbnQgaW4gYSBwcm92aXNpb25hbFxuICAgICAgICAgICAgICAgIC8vIHJlc3BvbnNlIGFyZSBhcHBsaWNhYmxlIGFzIGxvbmcgYXMgdGhlIGRpYWxvZyBpcyBpbiB0aGUgZWFybHkgc3RhdGVcbiAgICAgICAgICAgICAgICAvLyAoZm9yIGV4YW1wbGUsIGFuIEFsbG93IGhlYWRlciBmaWVsZCBpbiBhIHByb3Zpc2lvbmFsIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgLy8gY29udGFpbnMgdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBpbiB0aGUgZGlhbG9nIHdoaWxlIHRoaXMgaXMgaW5cbiAgICAgICAgICAgICAgICAvLyB0aGUgZWFybHkgc3RhdGUpLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMi4yLjFcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERpYWxvZ3MgYXJlIGNyZWF0ZWQgdGhyb3VnaCB0aGUgZ2VuZXJhdGlvbiBvZiBub24tZmFpbHVyZSByZXNwb25zZXNcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gcmVxdWVzdHMgd2l0aCBzcGVjaWZpYyBtZXRob2RzLiAgV2l0aGluIHRoaXMgc3BlY2lmaWNhdGlvbiwgb25seVxuICAgICAgICAgICAgICAgICAgICAvLyAyeHggYW5kIDEwMS0xOTkgcmVzcG9uc2VzIHdpdGggYSBUbyB0YWcsIHdoZXJlIHRoZSByZXF1ZXN0IHdhc1xuICAgICAgICAgICAgICAgICAgICAvLyBJTlZJVEUsIHdpbGwgZXN0YWJsaXNoIGEgZGlhbG9nLiAgQSBkaWFsb2cgZXN0YWJsaXNoZWQgYnkgYSBub24tZmluYWxcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzcG9uc2UgdG8gYSByZXF1ZXN0IGlzIGluIHRoZSBcImVhcmx5XCIgc3RhdGUgYW5kIGl0IGlzIGNhbGxlZCBhblxuICAgICAgICAgICAgICAgICAgICAvLyBlYXJseSBkaWFsb2cuXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMVxuICAgICAgICAgICAgICAgICAgICAvLyBQcm92aXNpb25hbCB3aXRob3V0IHRvIHRhZywgbm8gZGlhbG9nIHRvIGNyZWF0ZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnRvVGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiTm9uLTEwMCAxeHggSU5WSVRFIHJlc3BvbnNlIHJlY2VpdmVkIHdpdGhvdXQgYSB0byB0YWcsIGRyb3BwaW5nLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIGEgVUFTIHJlc3BvbmRzIHRvIGEgcmVxdWVzdCB3aXRoIGEgcmVzcG9uc2UgdGhhdCBlc3RhYmxpc2hlcyBhXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpYWxvZyAoc3VjaCBhcyBhIDJ4eCB0byBJTlZJVEUpLCB0aGUgVUFTIE1VU1QgY29weSBhbGwgUmVjb3JkLVJvdXRlXG4gICAgICAgICAgICAgICAgICAgIC8vIGhlYWRlciBmaWVsZCB2YWx1ZXMgZnJvbSB0aGUgcmVxdWVzdCBpbnRvIHRoZSByZXNwb25zZSAoaW5jbHVkaW5nIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBVUklzLCBVUkkgcGFyYW1ldGVycywgYW5kIGFueSBSZWNvcmQtUm91dGUgaGVhZGVyIGZpZWxkIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZXRoZXIgdGhleSBhcmUga25vd24gb3IgdW5rbm93biB0byB0aGUgVUFTKSBhbmQgTVVTVCBtYWludGFpbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gb3JkZXIgb2YgdGhvc2UgdmFsdWVzLiAgVGhlIFVBUyBNVVNUIGFkZCBhIENvbnRhY3QgaGVhZGVyIGZpZWxkIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4xLjFcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvdmlzaW9uYWwgd2l0aG91dCBDb250YWN0IGhlYWRlciBmaWVsZCwgbWFsZm9ybWVkIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWN0ID0gbWVzc2FnZS5wYXJzZUhlYWRlcihcImNvbnRhY3RcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGFjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJOb24tMTAwIDF4eCBJTlZJVEUgcmVzcG9uc2UgcmVjZWl2ZWQgd2l0aG91dCBhIENvbnRhY3QgaGVhZGVyIGZpZWxkLCBkcm9wcGluZy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHV0ZSBkaWFsb2cgc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ1N0YXRlID0gRGlhbG9nLmluaXRpYWxEaWFsb2dTdGF0ZUZvclVzZXJBZ2VudENsaWVudCh0aGlzLm1lc3NhZ2UsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAvLyBIYXZlIGV4aXN0aW5nIGVhcmx5IGRpYWxvZyBvciBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAgICAgICAgICAgICAgICBsZXQgZWFybHlEaWFsb2cgPSB0aGlzLmVhcmx5RGlhbG9ncy5nZXQoZGlhbG9nU3RhdGUuaWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVhcmx5RGlhbG9nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMudHJhbnNhY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEludml0ZUNsaWVudFRyYW5zYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyYW5zYWN0aW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlYXJseURpYWxvZyA9IG5ldyBTZXNzaW9uRGlhbG9nKHRyYW5zYWN0aW9uLCB0aGlzLmNvcmUsIGRpYWxvZ1N0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzLnNldChlYXJseURpYWxvZy5pZCwgZWFybHlEaWFsb2cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3Qgb3V0IG9mIG9yZGVyIHJlbGlhYmxlIHByb3Zpc2lvbmFsIHJlc3BvbnNlcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgaXMgd2hlcmUgdGhlIHJzZXEgdHJhY2tpbmcgaXMgZG9uZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlYXJseURpYWxvZy5yZWxpYWJsZVNlcXVlbmNlR3VhcmQobWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCIxeHggSU5WSVRFIHJlbGlhYmxlIHJlc3BvbnNlIHJlY2VpdmVkIG91dCBvZiBvcmRlciBvciBpcyBhIHJldHJhbnNtaXNzaW9uLCBkcm9wcGluZy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGluaXRpYWwgb2ZmZXIgaXMgaW4gYW4gSU5WSVRFLCB0aGUgYW5zd2VyIE1VU1QgYmUgaW4gYVxuICAgICAgICAgICAgICAgICAgICAvLyByZWxpYWJsZSBub24tZmFpbHVyZSBtZXNzYWdlIGZyb20gVUFTIGJhY2sgdG8gVUFDIHdoaWNoIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvcnJlbGF0ZWQgdG8gdGhhdCBJTlZJVEUuICBGb3IgdGhpcyBzcGVjaWZpY2F0aW9uLCB0aGF0IGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgdGhlIGZpbmFsIDJ4eCByZXNwb25zZSB0byB0aGF0IElOVklURS4gIFRoYXQgc2FtZSBleGFjdFxuICAgICAgICAgICAgICAgICAgICAvLyBhbnN3ZXIgTUFZIGFsc28gYmUgcGxhY2VkIGluIGFueSBwcm92aXNpb25hbCByZXNwb25zZXMgc2VudFxuICAgICAgICAgICAgICAgICAgICAvLyBwcmlvciB0byB0aGUgYW5zd2VyLiAgVGhlIFVBQyBNVVNUIHRyZWF0IHRoZSBmaXJzdCBzZXNzaW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlc2NyaXB0aW9uIGl0IHJlY2VpdmVzIGFzIHRoZSBhbnN3ZXIsIGFuZCBNVVNUIGlnbm9yZSBhbnlcbiAgICAgICAgICAgICAgICAgICAgLy8gc2Vzc2lvbiBkZXNjcmlwdGlvbnMgaW4gc3Vic2VxdWVudCByZXNwb25zZXMgdG8gdGhlIGluaXRpYWxcbiAgICAgICAgICAgICAgICAgICAgLy8gSU5WSVRFLlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjIuMVxuICAgICAgICAgICAgICAgICAgICBpZiAoZWFybHlEaWFsb2cuc2lnbmFsaW5nU3RhdGUgPT09IFNpZ25hbGluZ1N0YXRlLkluaXRpYWwgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhcmx5RGlhbG9nLnNpZ25hbGluZ1N0YXRlID09PSBTaWduYWxpbmdTdGF0ZS5IYXZlTG9jYWxPZmZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWFybHlEaWFsb2cuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFBhc3MgcmVzcG9uc2UgdG8gZGVsZWdhdGUuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBlYXJseURpYWxvZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uUHJvZ3Jlc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmFjazogKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Z29pbmdQcmFja1JlcXVlc3QgPSBzZXNzaW9uLnByYWNrKHVuZGVmaW5lZCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXRnb2luZ1ByYWNrUmVxdWVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYXNlIC9eMlswLTldezJ9JC8udGVzdChzdGF0dXNDb2RlKTpcbiAgICAgICAgICAgICAgICAvLyBNdWx0aXBsZSAyeHggcmVzcG9uc2VzIG1heSBhcnJpdmUgYXQgdGhlIFVBQyBmb3IgYSBzaW5nbGUgSU5WSVRFXG4gICAgICAgICAgICAgICAgLy8gcmVxdWVzdCBkdWUgdG8gYSBmb3JraW5nIHByb3h5LiAgRWFjaCByZXNwb25zZSBpcyBkaXN0aW5ndWlzaGVkIGJ5XG4gICAgICAgICAgICAgICAgLy8gdGhlIHRhZyBwYXJhbWV0ZXIgaW4gdGhlIFRvIGhlYWRlciBmaWVsZCwgYW5kIGVhY2ggcmVwcmVzZW50cyBhXG4gICAgICAgICAgICAgICAgLy8gZGlzdGluY3QgZGlhbG9nLCB3aXRoIGEgZGlzdGluY3QgZGlhbG9nIGlkZW50aWZpZXIuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZGlhbG9nIGlkZW50aWZpZXIgaW4gdGhlIDJ4eCByZXNwb25zZSBtYXRjaGVzIHRoZSBkaWFsb2dcbiAgICAgICAgICAgICAgICAvLyBpZGVudGlmaWVyIG9mIGFuIGV4aXN0aW5nIGRpYWxvZywgdGhlIGRpYWxvZyBNVVNUIGJlIHRyYW5zaXRpb25lZCB0b1xuICAgICAgICAgICAgICAgIC8vIHRoZSBcImNvbmZpcm1lZFwiIHN0YXRlLCBhbmQgdGhlIHJvdXRlIHNldCBmb3IgdGhlIGRpYWxvZyBNVVNUIGJlXG4gICAgICAgICAgICAgICAgLy8gcmVjb21wdXRlZCBiYXNlZCBvbiB0aGUgMnh4IHJlc3BvbnNlIHVzaW5nIHRoZSBwcm9jZWR1cmVzIG9mIFNlY3Rpb25cbiAgICAgICAgICAgICAgICAvLyAxMi4yLjEuMi4gIE90aGVyd2lzZSwgYSBuZXcgZGlhbG9nIGluIHRoZSBcImNvbmZpcm1lZFwiIHN0YXRlIE1VU1QgYmVcbiAgICAgICAgICAgICAgICAvLyBjb25zdHJ1Y3RlZCB1c2luZyB0aGUgcHJvY2VkdXJlcyBvZiBTZWN0aW9uIDEyLjEuMi5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjIuMi40XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBEaWFsb2dzIGFyZSBjcmVhdGVkIHRocm91Z2ggdGhlIGdlbmVyYXRpb24gb2Ygbm9uLWZhaWx1cmUgcmVzcG9uc2VzXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIHJlcXVlc3RzIHdpdGggc3BlY2lmaWMgbWV0aG9kcy4gIFdpdGhpbiB0aGlzIHNwZWNpZmljYXRpb24sIG9ubHlcbiAgICAgICAgICAgICAgICAgICAgLy8gMnh4IGFuZCAxMDEtMTk5IHJlc3BvbnNlcyB3aXRoIGEgVG8gdGFnLCB3aGVyZSB0aGUgcmVxdWVzdCB3YXNcbiAgICAgICAgICAgICAgICAgICAgLy8gSU5WSVRFLCB3aWxsIGVzdGFibGlzaCBhIGRpYWxvZy4gIEEgZGlhbG9nIGVzdGFibGlzaGVkIGJ5IGEgbm9uLWZpbmFsXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3BvbnNlIHRvIGEgcmVxdWVzdCBpcyBpbiB0aGUgXCJlYXJseVwiIHN0YXRlIGFuZCBpdCBpcyBjYWxsZWQgYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gZWFybHkgZGlhbG9nLlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjFcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluYWwgd2l0aG91dCB0byB0YWcsIG1hbGZvcm1lZCByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnRvVGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIjJ4eCBJTlZJVEUgcmVzcG9uc2UgcmVjZWl2ZWQgd2l0aG91dCBhIHRvIHRhZywgZHJvcHBpbmcuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gYSBVQVMgcmVzcG9uZHMgdG8gYSByZXF1ZXN0IHdpdGggYSByZXNwb25zZSB0aGF0IGVzdGFibGlzaGVzIGFcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlhbG9nIChzdWNoIGFzIGEgMnh4IHRvIElOVklURSksIHRoZSBVQVMgTVVTVCBjb3B5IGFsbCBSZWNvcmQtUm91dGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaGVhZGVyIGZpZWxkIHZhbHVlcyBmcm9tIHRoZSByZXF1ZXN0IGludG8gdGhlIHJlc3BvbnNlIChpbmNsdWRpbmcgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIFVSSXMsIFVSSSBwYXJhbWV0ZXJzLCBhbmQgYW55IFJlY29yZC1Sb3V0ZSBoZWFkZXIgZmllbGQgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hldGhlciB0aGV5IGFyZSBrbm93biBvciB1bmtub3duIHRvIHRoZSBVQVMpIGFuZCBNVVNUIG1haW50YWluIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBvcmRlciBvZiB0aG9zZSB2YWx1ZXMuICBUaGUgVUFTIE1VU1QgYWRkIGEgQ29udGFjdCBoZWFkZXIgZmllbGQgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjEuMVxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5hbCB3aXRob3V0IENvbnRhY3QgaGVhZGVyIGZpZWxkLCBtYWxmb3JtZWQgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhY3QgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKFwiY29udGFjdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250YWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIjJ4eCBJTlZJVEUgcmVzcG9uc2UgcmVjZWl2ZWQgd2l0aG91dCBhIENvbnRhY3QgaGVhZGVyIGZpZWxkLCBkcm9wcGluZy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHV0ZSBkaWFsb2cgc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ1N0YXRlID0gRGlhbG9nLmluaXRpYWxEaWFsb2dTdGF0ZUZvclVzZXJBZ2VudENsaWVudCh0aGlzLm1lc3NhZ2UsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBDdXJyZW50bHkgb3VyIHRyYW5zYWN0aW9uIGxheWVyIGlzIGNhY2hpbmcgdGhlIDJ4eCBBQ0tzIGFuZFxuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGluZyByZXRyYW5zbWlzc2lvbnMgb2YgdGhlIEFDSyB3aGljaCBpcyBhbiBhcHByb2FjaCB3aGljaCBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBub3QgdG8gc3BlYy4gSW4gYW55IGV2ZW50LCB0aGlzIGJsb2NrIGlzIGludGVuZGVkIHRvIHByb3ZpZGUgYSB0b1xuICAgICAgICAgICAgICAgICAgICAvLyBzcGVjIGltcGxlbWVudGF0aW9uIG9mIEFDSyByZXRyYW5zbWlzc2lvbnMsIGJ1dCBpdCBzaG91bGQgbm90IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGhpdCBjdXJyZW50bHkuXG4gICAgICAgICAgICAgICAgICAgIGxldCBkaWFsb2cgPSB0aGlzLmNvbmZpcm1lZERpYWxvZ3MuZ2V0KGRpYWxvZ1N0YXRlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpYWxvZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25jZSB0aGUgQUNLIGhhcyBiZWVuIGNvbnN0cnVjdGVkLCB0aGUgcHJvY2VkdXJlcyBvZiBbNF0gYXJlIHVzZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSB0aGUgZGVzdGluYXRpb24gYWRkcmVzcywgcG9ydCBhbmQgdHJhbnNwb3J0LiAgSG93ZXZlciwgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXF1ZXN0IGlzIHBhc3NlZCB0byB0aGUgdHJhbnNwb3J0IGxheWVyIGRpcmVjdGx5IGZvciB0cmFuc21pc3Npb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByYXRoZXIgdGhhbiBhIGNsaWVudCB0cmFuc2FjdGlvbi4gIFRoaXMgaXMgYmVjYXVzZSB0aGUgVUFDIGNvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZXMgcmV0cmFuc21pc3Npb25zIG9mIHRoZSBBQ0ssIG5vdCB0aGUgdHJhbnNhY3Rpb24gbGF5ZXIuICBUaGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFDSyBNVVNUIGJlIHBhc3NlZCB0byB0aGUgY2xpZW50IHRyYW5zcG9ydCBldmVyeSB0aW1lIGFcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHJhbnNtaXNzaW9uIG9mIHRoZSAyeHggZmluYWwgcmVzcG9uc2UgdGhhdCB0cmlnZ2VyZWQgdGhlIEFDS1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXJyaXZlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMi4yLjRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dGdvaW5nQWNrUmVxdWVzdCA9IHRoaXMuY29uZmlybWVkRGlhbG9nQWNrcy5nZXQoZGlhbG9nU3RhdGUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG91dGdvaW5nQWNrUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy50cmFuc2FjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEludml0ZUNsaWVudFRyYW5zYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDbGllbnQgdHJhbnNhY3Rpb24gbm90IGluc3RhbmNlIG9mIEludml0ZUNsaWVudFRyYW5zYWN0aW9uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uYWNrUmVzcG9uc2Uob3V0Z29pbmdBY2tSZXF1ZXN0Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3RpbGwgd2FpdGluZyBmb3IgYW4gQUNLLCBkcm9wIHRoZSByZXRyYW5zbWlzc2lvbiBvZiB0aGUgMnh4IGZpbmFsIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBkaWFsb2cgaWRlbnRpZmllciBpbiB0aGUgMnh4IHJlc3BvbnNlIG1hdGNoZXMgdGhlIGRpYWxvZ1xuICAgICAgICAgICAgICAgICAgICAvLyBpZGVudGlmaWVyIG9mIGFuIGV4aXN0aW5nIGRpYWxvZywgdGhlIGRpYWxvZyBNVVNUIGJlIHRyYW5zaXRpb25lZCB0b1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgXCJjb25maXJtZWRcIiBzdGF0ZSwgYW5kIHRoZSByb3V0ZSBzZXQgZm9yIHRoZSBkaWFsb2cgTVVTVCBiZVxuICAgICAgICAgICAgICAgICAgICAvLyByZWNvbXB1dGVkIGJhc2VkIG9uIHRoZSAyeHggcmVzcG9uc2UgdXNpbmcgdGhlIHByb2NlZHVyZXMgb2YgU2VjdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyAxMi4yLjEuMi4gT3RoZXJ3aXNlLCBhIG5ldyBkaWFsb2cgaW4gdGhlIFwiY29uZmlybWVkXCIgc3RhdGUgTVVTVCBiZVxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zdHJ1Y3RlZCB1c2luZyB0aGUgcHJvY2VkdXJlcyBvZiBTZWN0aW9uIDEyLjEuMi5cbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjIuNFxuICAgICAgICAgICAgICAgICAgICBkaWFsb2cgPSB0aGlzLmVhcmx5RGlhbG9ncy5nZXQoZGlhbG9nU3RhdGUuaWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlhbG9nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY29uZmlybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLnJlY29tcHV0ZVJvdXRlU2V0KG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lYXJseURpYWxvZ3MuZGVsZXRlKGRpYWxvZy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1lZERpYWxvZ3Muc2V0KGRpYWxvZy5pZCwgZGlhbG9nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy50cmFuc2FjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRyYW5zYWN0aW9uIGluc3RhbmNlb2YgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNhY3Rpb24gbm90IGluc3RhbmNlIG9mIEludml0ZUNsaWVudFRyYW5zYWN0aW9uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZyA9IG5ldyBTZXNzaW9uRGlhbG9nKHRyYW5zYWN0aW9uLCB0aGlzLmNvcmUsIGRpYWxvZ1N0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlybWVkRGlhbG9ncy5zZXQoZGlhbG9nLmlkLCBkaWFsb2cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBpbml0aWFsIG9mZmVyIGlzIGluIGFuIElOVklURSwgdGhlIGFuc3dlciBNVVNUIGJlIGluIGFcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVsaWFibGUgbm9uLWZhaWx1cmUgbWVzc2FnZSBmcm9tIFVBUyBiYWNrIHRvIFVBQyB3aGljaCBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBjb3JyZWxhdGVkIHRvIHRoYXQgSU5WSVRFLiAgRm9yIHRoaXMgc3BlY2lmaWNhdGlvbiwgdGhhdCBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IHRoZSBmaW5hbCAyeHggcmVzcG9uc2UgdG8gdGhhdCBJTlZJVEUuICBUaGF0IHNhbWUgZXhhY3RcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5zd2VyIE1BWSBhbHNvIGJlIHBsYWNlZCBpbiBhbnkgcHJvdmlzaW9uYWwgcmVzcG9uc2VzIHNlbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJpb3IgdG8gdGhlIGFuc3dlci4gIFRoZSBVQUMgTVVTVCB0cmVhdCB0aGUgZmlyc3Qgc2Vzc2lvblxuICAgICAgICAgICAgICAgICAgICAvLyBkZXNjcmlwdGlvbiBpdCByZWNlaXZlcyBhcyB0aGUgYW5zd2VyLCBhbmQgTVVTVCBpZ25vcmUgYW55XG4gICAgICAgICAgICAgICAgICAgIC8vIHNlc3Npb24gZGVzY3JpcHRpb25zIGluIHN1YnNlcXVlbnQgcmVzcG9uc2VzIHRvIHRoZSBpbml0aWFsXG4gICAgICAgICAgICAgICAgICAgIC8vIElOVklURS5cbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjFcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpYWxvZy5zaWduYWxpbmdTdGF0ZSA9PT0gU2lnbmFsaW5nU3RhdGUuSW5pdGlhbCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLnNpZ25hbGluZ1N0YXRlID09PSBTaWduYWxpbmdTdGF0ZS5IYXZlTG9jYWxPZmZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBTZXNzaW9uIEluaXRpYXRlZCEgOilcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGRpYWxvZztcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIFVBQyBjb3JlIE1VU1QgZ2VuZXJhdGUgYW4gQUNLIHJlcXVlc3QgZm9yIGVhY2ggMnh4IHJlY2VpdmVkIGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHRyYW5zYWN0aW9uIGxheWVyLiAgVGhlIGhlYWRlciBmaWVsZHMgb2YgdGhlIEFDSyBhcmUgY29uc3RydWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW4gdGhlIHNhbWUgd2F5IGFzIGZvciBhbnkgcmVxdWVzdCBzZW50IHdpdGhpbiBhIGRpYWxvZyAoc2VlIFNlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gMTIpIHdpdGggdGhlIGV4Y2VwdGlvbiBvZiB0aGUgQ1NlcSBhbmQgdGhlIGhlYWRlciBmaWVsZHMgcmVsYXRlZCB0b1xuICAgICAgICAgICAgICAgICAgICAvLyBhdXRoZW50aWNhdGlvbi4gIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIENTZXEgaGVhZGVyIGZpZWxkIE1VU1QgYmVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNhbWUgYXMgdGhlIElOVklURSBiZWluZyBhY2tub3dsZWRnZWQsIGJ1dCB0aGUgQ1NlcSBtZXRob2QgTVVTVFxuICAgICAgICAgICAgICAgICAgICAvLyBiZSBBQ0suICBUaGUgQUNLIE1VU1QgY29udGFpbiB0aGUgc2FtZSBjcmVkZW50aWFscyBhcyB0aGUgSU5WSVRFLiAgSWZcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIDJ4eCBjb250YWlucyBhbiBvZmZlciAoYmFzZWQgb24gdGhlIHJ1bGVzIGFib3ZlKSwgdGhlIEFDSyBNVVNUXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhcnJ5IGFuIGFuc3dlciBpbiBpdHMgYm9keS4gIElmIHRoZSBvZmZlciBpbiB0aGUgMnh4IHJlc3BvbnNlIGlzIG5vdFxuICAgICAgICAgICAgICAgICAgICAvLyBhY2NlcHRhYmxlLCB0aGUgVUFDIGNvcmUgTVVTVCBnZW5lcmF0ZSBhIHZhbGlkIGFuc3dlciBpbiB0aGUgQUNLIGFuZFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIHNlbmQgYSBCWUUgaW1tZWRpYXRlbHkuXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMi4yLjRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjazogKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Z29pbmdBY2tSZXF1ZXN0ID0gc2Vzc2lvbi5hY2sob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlybWVkRGlhbG9nQWNrcy5zZXQoc2Vzc2lvbi5pZCwgb3V0Z29pbmdBY2tSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dGdvaW5nQWNrUmVxdWVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dGdvaW5nQWNrUmVxdWVzdCA9IHNlc3Npb24uYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1lZERpYWxvZ0Fja3Muc2V0KHNlc3Npb24uaWQsIG91dGdvaW5nQWNrUmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSAvXjNbMC05XXsyfSQvLnRlc3Qoc3RhdHVzQ29kZSk6XG4gICAgICAgICAgICAgICAgLy8gMTIuMyBUZXJtaW5hdGlvbiBvZiBhIERpYWxvZ1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gSW5kZXBlbmRlbnQgb2YgdGhlIG1ldGhvZCwgaWYgYSByZXF1ZXN0IG91dHNpZGUgb2YgYSBkaWFsb2cgZ2VuZXJhdGVzXG4gICAgICAgICAgICAgICAgLy8gYSBub24tMnh4IGZpbmFsIHJlc3BvbnNlLCBhbnkgZWFybHkgZGlhbG9ncyBjcmVhdGVkIHRocm91Z2hcbiAgICAgICAgICAgICAgICAvLyBwcm92aXNpb25hbCByZXNwb25zZXMgdG8gdGhhdCByZXF1ZXN0IGFyZSB0ZXJtaW5hdGVkLiAgVGhlIG1lY2hhbmlzbVxuICAgICAgICAgICAgICAgIC8vIGZvciB0ZXJtaW5hdGluZyBjb25maXJtZWQgZGlhbG9ncyBpcyBtZXRob2Qgc3BlY2lmaWMuICBJbiB0aGlzXG4gICAgICAgICAgICAgICAgLy8gc3BlY2lmaWNhdGlvbiwgdGhlIEJZRSBtZXRob2QgdGVybWluYXRlcyBhIHNlc3Npb24gYW5kIHRoZSBkaWFsb2dcbiAgICAgICAgICAgICAgICAvLyBhc3NvY2lhdGVkIHdpdGggaXQuICBTZWUgU2VjdGlvbiAxNSBmb3IgZGV0YWlscy5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjNcbiAgICAgICAgICAgICAgICAvLyBBbGwgZWFybHkgZGlhbG9ncyBhcmUgY29uc2lkZXJlZCB0ZXJtaW5hdGVkIHVwb24gcmVjZXB0aW9uIG9mIHRoZVxuICAgICAgICAgICAgICAgIC8vIG5vbi0yeHggZmluYWwgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBBZnRlciBoYXZpbmcgcmVjZWl2ZWQgdGhlIG5vbi0yeHggZmluYWwgcmVzcG9uc2UgdGhlIFVBQyBjb3JlXG4gICAgICAgICAgICAgICAgLy8gY29uc2lkZXJzIHRoZSBJTlZJVEUgdHJhbnNhY3Rpb24gY29tcGxldGVkLiAgVGhlIElOVklURSBjbGllbnRcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBoYW5kbGVzIHRoZSBnZW5lcmF0aW9uIG9mIEFDS3MgZm9yIHRoZSByZXNwb25zZSAoc2VlXG4gICAgICAgICAgICAgICAgLy8gU2VjdGlvbiAxNykuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjIuM1xuICAgICAgICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzLmZvckVhY2goKGVhcmx5RGlhbG9nKSA9PiBlYXJseURpYWxvZy5kaXNwb3NlKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgLy8gQSAzeHggcmVzcG9uc2UgbWF5IGNvbnRhaW4gb25lIG9yIG1vcmUgQ29udGFjdCBoZWFkZXIgZmllbGQgdmFsdWVzXG4gICAgICAgICAgICAgICAgLy8gcHJvdmlkaW5nIG5ldyBhZGRyZXNzZXMgd2hlcmUgdGhlIGNhbGxlZSBtaWdodCBiZSByZWFjaGFibGUuXG4gICAgICAgICAgICAgICAgLy8gRGVwZW5kaW5nIG9uIHRoZSBzdGF0dXMgY29kZSBvZiB0aGUgM3h4IHJlc3BvbnNlIChzZWUgU2VjdGlvbiAyMS4zKSxcbiAgICAgICAgICAgICAgICAvLyB0aGUgVUFDIE1BWSBjaG9vc2UgdG8gdHJ5IHRob3NlIG5ldyBhZGRyZXNzZXMuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjIuMlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25SZWRpcmVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uUmVkaXJlY3QoeyBtZXNzYWdlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYXNlIC9eWzQtNl1bMC05XXsyfSQvLnRlc3Qoc3RhdHVzQ29kZSk6XG4gICAgICAgICAgICAgICAgLy8gMTIuMyBUZXJtaW5hdGlvbiBvZiBhIERpYWxvZ1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gSW5kZXBlbmRlbnQgb2YgdGhlIG1ldGhvZCwgaWYgYSByZXF1ZXN0IG91dHNpZGUgb2YgYSBkaWFsb2cgZ2VuZXJhdGVzXG4gICAgICAgICAgICAgICAgLy8gYSBub24tMnh4IGZpbmFsIHJlc3BvbnNlLCBhbnkgZWFybHkgZGlhbG9ncyBjcmVhdGVkIHRocm91Z2hcbiAgICAgICAgICAgICAgICAvLyBwcm92aXNpb25hbCByZXNwb25zZXMgdG8gdGhhdCByZXF1ZXN0IGFyZSB0ZXJtaW5hdGVkLiAgVGhlIG1lY2hhbmlzbVxuICAgICAgICAgICAgICAgIC8vIGZvciB0ZXJtaW5hdGluZyBjb25maXJtZWQgZGlhbG9ncyBpcyBtZXRob2Qgc3BlY2lmaWMuICBJbiB0aGlzXG4gICAgICAgICAgICAgICAgLy8gc3BlY2lmaWNhdGlvbiwgdGhlIEJZRSBtZXRob2QgdGVybWluYXRlcyBhIHNlc3Npb24gYW5kIHRoZSBkaWFsb2dcbiAgICAgICAgICAgICAgICAvLyBhc3NvY2lhdGVkIHdpdGggaXQuICBTZWUgU2VjdGlvbiAxNSBmb3IgZGV0YWlscy5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjNcbiAgICAgICAgICAgICAgICAvLyBBbGwgZWFybHkgZGlhbG9ncyBhcmUgY29uc2lkZXJlZCB0ZXJtaW5hdGVkIHVwb24gcmVjZXB0aW9uIG9mIHRoZVxuICAgICAgICAgICAgICAgIC8vIG5vbi0yeHggZmluYWwgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBBZnRlciBoYXZpbmcgcmVjZWl2ZWQgdGhlIG5vbi0yeHggZmluYWwgcmVzcG9uc2UgdGhlIFVBQyBjb3JlXG4gICAgICAgICAgICAgICAgLy8gY29uc2lkZXJzIHRoZSBJTlZJVEUgdHJhbnNhY3Rpb24gY29tcGxldGVkLiAgVGhlIElOVklURSBjbGllbnRcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBoYW5kbGVzIHRoZSBnZW5lcmF0aW9uIG9mIEFDS3MgZm9yIHRoZSByZXNwb25zZSAoc2VlXG4gICAgICAgICAgICAgICAgLy8gU2VjdGlvbiAxNykuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjIuM1xuICAgICAgICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzLmZvckVhY2goKGVhcmx5RGlhbG9nKSA9PiBlYXJseURpYWxvZy5kaXNwb3NlKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgLy8gQSBzaW5nbGUgbm9uLTJ4eCBmaW5hbCByZXNwb25zZSBtYXkgYmUgcmVjZWl2ZWQgZm9yIHRoZSBJTlZJVEUuICA0eHgsXG4gICAgICAgICAgICAgICAgLy8gNXh4IGFuZCA2eHggcmVzcG9uc2VzIG1heSBjb250YWluIGEgQ29udGFjdCBoZWFkZXIgZmllbGQgdmFsdWVcbiAgICAgICAgICAgICAgICAvLyBpbmRpY2F0aW5nIHRoZSBsb2NhdGlvbiB3aGVyZSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBlcnJvclxuICAgICAgICAgICAgICAgIC8vIGNhbiBiZSBmb3VuZC4gIFN1YnNlcXVlbnQgZmluYWwgcmVzcG9uc2VzICh3aGljaCB3b3VsZCBvbmx5IGFycml2ZVxuICAgICAgICAgICAgICAgIC8vIHVuZGVyIGVycm9yIGNvbmRpdGlvbnMpIE1VU1QgYmUgaWdub3JlZC5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjIuMi4zXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vblJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uUmVqZWN0KHsgbWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdHVzIGNvZGUgJHtzdGF0dXNDb2RlfWApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhlY3V0aW5nIHdoYXQgc2hvdWxkIGJlIGFuIHVucmVhY2hhYmxlIGNvZGUgcGF0aCByZWNlaXZpbmcgJHtzdGF0dXNDb2RlfSByZXNwb25zZS5gKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IFVzZXJBZ2VudENsaWVudCB9IGZyb20gXCIuL3VzZXItYWdlbnQtY2xpZW50XCI7XG4vKipcbiAqIFBVQkxJU0ggVUFDLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUHVibGlzaFVzZXJBZ2VudENsaWVudCBleHRlbmRzIFVzZXJBZ2VudENsaWVudCB7XG4gICAgY29uc3RydWN0b3IoY29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpIHtcbiAgICAgICAgc3VwZXIoTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24sIGNvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IFVzZXJBZ2VudENsaWVudCB9IGZyb20gXCIuL3VzZXItYWdlbnQtY2xpZW50XCI7XG4vKipcbiAqIFJFR0lTVEVSIFVBQy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFJlZ2lzdGVyVXNlckFnZW50Q2xpZW50IGV4dGVuZHMgVXNlckFnZW50Q2xpZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb3JlLCBtZXNzYWdlLCBkZWxlZ2F0ZSkge1xuICAgICAgICBzdXBlcihOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwgY29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEMgfSBmcm9tIFwiLi4vbWVzc2FnZXNcIjtcbi8qKlxuICogRklYTUU6IFRPRE86IFNob3VsZCBiZSBjb25maWd1cmFibGUvdmFyaWFibGUuXG4gKi9cbmV4cG9ydCBjb25zdCBBbGxvd2VkTWV0aG9kcyA9IFtcbiAgICBDLkFDSyxcbiAgICBDLkJZRSxcbiAgICBDLkNBTkNFTCxcbiAgICBDLklORk8sXG4gICAgQy5JTlZJVEUsXG4gICAgQy5NRVNTQUdFLFxuICAgIEMuTk9USUZZLFxuICAgIEMuT1BUSU9OUyxcbiAgICBDLlBSQUNLLFxuICAgIEMuUkVGRVIsXG4gICAgQy5SRUdJU1RFUixcbiAgICBDLlNVQlNDUklCRVxuXTtcbiIsImltcG9ydCB7IEMgfSBmcm9tIFwiLi4vbWVzc2FnZXNcIjtcbmltcG9ydCB7IE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uIH0gZnJvbSBcIi4uL3RyYW5zYWN0aW9uc1wiO1xuaW1wb3J0IHsgVXNlckFnZW50Q2xpZW50IH0gZnJvbSBcIi4vdXNlci1hZ2VudC1jbGllbnRcIjtcbi8qKlxuICogUmUtU1VCU0NSSUJFIFVBQy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFJlU3Vic2NyaWJlVXNlckFnZW50Q2xpZW50IGV4dGVuZHMgVXNlckFnZW50Q2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihkaWFsb2csIGRlbGVnYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBkaWFsb2cuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShDLlNVQlNDUklCRSwgb3B0aW9ucyk7XG4gICAgICAgIHN1cGVyKE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uLCBkaWFsb2cudXNlckFnZW50Q29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpO1xuICAgICAgICB0aGlzLmRpYWxvZyA9IGRpYWxvZztcbiAgICB9XG4gICAgd2FpdE5vdGlmeVN0b3AoKSB7XG4gICAgICAgIC8vIFRPRE86IFBsYWNlaG9sZGVyLiBOb3QgdXRpbGl6ZWQgY3VycmVudGx5LlxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY2VpdmUgYSByZXNwb25zZSBmcm9tIHRoZSB0cmFuc2FjdGlvbiBsYXllci5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIEluY29taW5nIHJlc3BvbnNlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgcmVjZWl2ZVJlc3BvbnNlKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHVzQ29kZSAmJiBtZXNzYWdlLnN0YXR1c0NvZGUgPj0gMjAwICYmIG1lc3NhZ2Uuc3RhdHVzQ29kZSA8IDMwMCkge1xuICAgICAgICAgICAgLy8gIFRoZSBcIkV4cGlyZXNcIiBoZWFkZXIgZmllbGQgaW4gYSAyMDAtY2xhc3MgcmVzcG9uc2UgdG8gU1VCU0NSSUJFXG4gICAgICAgICAgICAvLyAgcmVxdWVzdCBpbmRpY2F0ZXMgdGhlIGFjdHVhbCBkdXJhdGlvbiBmb3Igd2hpY2ggdGhlIHN1YnNjcmlwdGlvbiB3aWxsXG4gICAgICAgICAgICAvLyAgcmVtYWluIGFjdGl2ZSAodW5sZXNzIHJlZnJlc2hlZCkuICBUaGUgcmVjZWl2ZWQgdmFsdWUgbWlnaHQgYmVcbiAgICAgICAgICAgIC8vICBzbWFsbGVyIHRoYW4gdGhlIHZhbHVlIGluZGljYXRlZCBpbiB0aGUgU1VCU0NSSUJFIHJlcXVlc3QgYnV0IGNhbm5vdFxuICAgICAgICAgICAgLy8gIGJlIGxhcmdlcjsgc2VlIFNlY3Rpb24gNC4yLjEgZm9yIGRldGFpbHMuXG4gICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjY2NSNzZWN0aW9uLTQuMS4yLjFcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyZXMgPSBtZXNzYWdlLmdldEhlYWRlcihcIkV4cGlyZXNcIik7XG4gICAgICAgICAgICBpZiAoIWV4cGlyZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiRXhwaXJlcyBoZWFkZXIgbWlzc2luZyBpbiBhIDIwMC1jbGFzcyByZXNwb25zZSB0byBTVUJTQ1JJQkVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25FeHBpcmVzUmVjZWl2ZWQgPSBOdW1iZXIoZXhwaXJlcyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlhbG9nLnN1YnNjcmlwdGlvbkV4cGlyZXMgPiBzdWJzY3JpcHRpb25FeHBpcmVzUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cuc3Vic2NyaXB0aW9uRXhwaXJlcyA9IHN1YnNjcmlwdGlvbkV4cGlyZXNSZWNlaXZlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHVzQ29kZSAmJiBtZXNzYWdlLnN0YXR1c0NvZGUgPj0gNDAwICYmIG1lc3NhZ2Uuc3RhdHVzQ29kZSA8IDcwMCkge1xuICAgICAgICAgICAgLy8gSWYgYSBTVUJTQ1JJQkUgcmVxdWVzdCB0byByZWZyZXNoIGEgc3Vic2NyaXB0aW9uIHJlY2VpdmVzIGEgNDA0LCA0MDUsXG4gICAgICAgICAgICAvLyA0MTAsIDQxNiwgNDgwLTQ4NSwgNDg5LCA1MDEsIG9yIDYwNCByZXNwb25zZSwgdGhlIHN1YnNjcmliZXIgTVVTVFxuICAgICAgICAgICAgLy8gY29uc2lkZXIgdGhlIHN1YnNjcmlwdGlvbiB0ZXJtaW5hdGVkLiAgKFNlZSBbUkZDNTA1N10gZm9yIGZ1cnRoZXJcbiAgICAgICAgICAgIC8vIGRldGFpbHMgYW5kIG5vdGVzIGFib3V0IHRoZSBlZmZlY3Qgb2YgZXJyb3IgY29kZXMgb24gZGlhbG9ncyBhbmRcbiAgICAgICAgICAgIC8vIHVzYWdlcyB3aXRoaW4gZGlhbG9nLCBzdWNoIGFzIHN1YnNjcmlwdGlvbnMpLiAgSWYgdGhlIHN1YnNjcmliZXJcbiAgICAgICAgICAgIC8vIHdpc2hlcyB0byByZS1zdWJzY3JpYmUgdG8gdGhlIHN0YXRlLCBoZSBkb2VzIHNvIGJ5IGNvbXBvc2luZyBhblxuICAgICAgICAgICAgLy8gdW5yZWxhdGVkIGluaXRpYWwgU1VCU0NSSUJFIHJlcXVlc3Qgd2l0aCBhIGZyZXNobHkgZ2VuZXJhdGVkIENhbGwtSURcbiAgICAgICAgICAgIC8vIGFuZCBhIG5ldywgdW5pcXVlIFwiRnJvbVwiIHRhZyAoc2VlIFNlY3Rpb24gNC4xLjIuMSkuXG4gICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjY2NSNzZWN0aW9uLTQuMS4yLjJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yQ29kZXMgPSBbNDA0LCA0MDUsIDQxMCwgNDE2LCA0ODAsIDQ4MSwgNDgyLCA0ODMsIDQ4NCwgNDg1LCA0ODksIDUwMSwgNjA0XTtcbiAgICAgICAgICAgIGlmIChlcnJvckNvZGVzLmluY2x1ZGVzKG1lc3NhZ2Uuc3RhdHVzQ29kZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIGEgU1VCU0NSSUJFIHJlcXVlc3QgdG8gcmVmcmVzaCBhIHN1YnNjcmlwdGlvbiBmYWlscyB3aXRoIGFueSBlcnJvclxuICAgICAgICAgICAgLy8gY29kZSBvdGhlciB0aGFuIHRob3NlIGxpc3RlZCBhYm92ZSwgdGhlIG9yaWdpbmFsIHN1YnNjcmlwdGlvbiBpc1xuICAgICAgICAgICAgLy8gc3RpbGwgY29uc2lkZXJlZCB2YWxpZCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBtb3N0IHJlY2VudGx5IGtub3duXG4gICAgICAgICAgICAvLyBcIkV4cGlyZXNcIiB2YWx1ZSBhcyBuZWdvdGlhdGVkIGJ5IHRoZSBtb3N0IHJlY2VudCBzdWNjZXNzZnVsIFNVQlNDUklCRVxuICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb24sIG9yIGFzIGNvbW11bmljYXRlZCBieSBhIE5PVElGWSByZXF1ZXN0IGluIGl0c1xuICAgICAgICAgICAgLy8gXCJTdWJzY3JpcHRpb24tU3RhdGVcIiBoZWFkZXIgZmllbGQgXCJleHBpcmVzXCIgcGFyYW1ldGVyLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjEuMi4yXG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIucmVjZWl2ZVJlc3BvbnNlKG1lc3NhZ2UpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEMsIE5hbWVBZGRySGVhZGVyIH0gZnJvbSBcIi4uL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25TdGF0ZSB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb25cIjtcbmltcG9ydCB7IFRpbWVycyB9IGZyb20gXCIuLi90aW1lcnNcIjtcbmltcG9ydCB7IEFsbG93ZWRNZXRob2RzIH0gZnJvbSBcIi4uL3VzZXItYWdlbnQtY29yZS9hbGxvd2VkLW1ldGhvZHNcIjtcbmltcG9ydCB7IE5vdGlmeVVzZXJBZ2VudFNlcnZlciB9IGZyb20gXCIuLi91c2VyLWFnZW50cy9ub3RpZnktdXNlci1hZ2VudC1zZXJ2ZXJcIjtcbmltcG9ydCB7IFJlU3Vic2NyaWJlVXNlckFnZW50Q2xpZW50IH0gZnJvbSBcIi4uL3VzZXItYWdlbnRzL3JlLXN1YnNjcmliZS11c2VyLWFnZW50LWNsaWVudFwiO1xuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4vZGlhbG9nXCI7XG4vKipcbiAqIFN1YnNjcmlwdGlvbiBEaWFsb2cuXG4gKiBAcmVtYXJrc1xuICogU0lQLVNwZWNpZmljIEV2ZW50IE5vdGlmaWNhdGlvblxuICpcbiAqIEFic3RyYWN0XG4gKlxuICogICAgVGhpcyBkb2N1bWVudCBkZXNjcmliZXMgYW4gZXh0ZW5zaW9uIHRvIHRoZSBTZXNzaW9uIEluaXRpYXRpb25cbiAqICAgIFByb3RvY29sIChTSVApIGRlZmluZWQgYnkgUkZDIDMyNjEuICBUaGUgcHVycG9zZSBvZiB0aGlzIGV4dGVuc2lvbiBpc1xuICogICAgdG8gcHJvdmlkZSBhbiBleHRlbnNpYmxlIGZyYW1ld29yayBieSB3aGljaCBTSVAgbm9kZXMgY2FuIHJlcXVlc3RcbiAqICAgIG5vdGlmaWNhdGlvbiBmcm9tIHJlbW90ZSBub2RlcyBpbmRpY2F0aW5nIHRoYXQgY2VydGFpbiBldmVudHMgaGF2ZVxuICogICAgb2NjdXJyZWQuXG4gKlxuICogICAgTm90ZSB0aGF0IHRoZSBldmVudCBub3RpZmljYXRpb24gbWVjaGFuaXNtcyBkZWZpbmVkIGhlcmVpbiBhcmUgTk9UXG4gKiAgICBpbnRlbmRlZCB0byBiZSBhIGdlbmVyYWwtcHVycG9zZSBpbmZyYXN0cnVjdHVyZSBmb3IgYWxsIGNsYXNzZXMgb2ZcbiAqICAgIGV2ZW50IHN1YnNjcmlwdGlvbiBhbmQgbm90aWZpY2F0aW9uLlxuICpcbiAqICAgIFRoaXMgZG9jdW1lbnQgcmVwcmVzZW50cyBhIGJhY2t3YXJkcy1jb21wYXRpYmxlIGltcHJvdmVtZW50IG9uIHRoZVxuICogICAgb3JpZ2luYWwgbWVjaGFuaXNtIGRlc2NyaWJlZCBieSBSRkMgMzI2NSwgdGFraW5nIGludG8gYWNjb3VudCBzZXZlcmFsXG4gKiAgICB5ZWFycyBvZiBpbXBsZW1lbnRhdGlvbiBleHBlcmllbmNlLiAgQWNjb3JkaW5nbHksIHRoaXMgZG9jdW1lbnRcbiAqICAgIG9ic29sZXRlcyBSRkMgMzI2NS4gIFRoaXMgZG9jdW1lbnQgYWxzbyB1cGRhdGVzIFJGQyA0NjYwIHNsaWdodGx5IHRvXG4gKiAgICBhY2NvbW1vZGF0ZSBzb21lIHNtYWxsIGNoYW5nZXMgdG8gdGhlIG1lY2hhbmlzbSB0aGF0IHdlcmUgZGlzY3Vzc2VkXG4gKiAgICBpbiB0aGF0IGRvY3VtZW50LlxuICpcbiAqICBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjY2NVxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9uRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgICBjb25zdHJ1Y3RvcihzdWJzY3JpcHRpb25FdmVudCwgc3Vic2NyaXB0aW9uRXhwaXJlcywgc3Vic2NyaXB0aW9uU3RhdGUsIGNvcmUsIHN0YXRlLCBkZWxlZ2F0ZSkge1xuICAgICAgICBzdXBlcihjb3JlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5fYXV0b1JlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uRXZlbnQgPSBzdWJzY3JpcHRpb25FdmVudDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uRXhwaXJlcyA9IHN1YnNjcmlwdGlvbkV4cGlyZXM7XG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbkV4cGlyZXNJbml0aWFsID0gc3Vic2NyaXB0aW9uRXhwaXJlcztcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uRXhwaXJlc0xhc3RTZXQgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaExhc3RTZXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvblN0YXRlID0gc3Vic2NyaXB0aW9uU3RhdGU7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gY29yZS5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcihcInNpcC5zdWJzY3JpYmUtZGlhbG9nXCIpO1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFNVQlNDUklCRSBkaWFsb2cgJHt0aGlzLmlkfSBjb25zdHJ1Y3RlZGApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGVuIGEgVUFDIHJlY2VpdmVzIGEgcmVzcG9uc2UgdGhhdCBlc3RhYmxpc2hlcyBhIGRpYWxvZywgaXRcbiAgICAgKiBjb25zdHJ1Y3RzIHRoZSBzdGF0ZSBvZiB0aGUgZGlhbG9nLiAgVGhpcyBzdGF0ZSBNVVNUIGJlIG1haW50YWluZWRcbiAgICAgKiBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBkaWFsb2cuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4xLjJcbiAgICAgKiBAcGFyYW0gb3V0Z29pbmdSZXF1ZXN0TWVzc2FnZSAtIE91dGdvaW5nIHJlcXVlc3QgbWVzc2FnZSBmb3IgZGlhbG9nLlxuICAgICAqIEBwYXJhbSBpbmNvbWluZ1Jlc3BvbnNlTWVzc2FnZSAtIEluY29taW5nIHJlc3BvbnNlIG1lc3NhZ2UgY3JlYXRpbmcgZGlhbG9nLlxuICAgICAqL1xuICAgIHN0YXRpYyBpbml0aWFsRGlhbG9nU3RhdGVGb3JTdWJzY3JpcHRpb24ob3V0Z29pbmdTdWJzY3JpYmVSZXF1ZXN0TWVzc2FnZSwgaW5jb21pbmdOb3RpZnlSZXF1ZXN0TWVzc2FnZSkge1xuICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCB3YXMgc2VudCBvdmVyIFRMUywgYW5kIHRoZSBSZXF1ZXN0LVVSSSBjb250YWluZWQgYVxuICAgICAgICAvLyBTSVBTIFVSSSwgdGhlIFwic2VjdXJlXCIgZmxhZyBpcyBzZXQgdG8gVFJVRS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4xLjJcbiAgICAgICAgY29uc3Qgc2VjdXJlID0gZmFsc2U7IC8vIEZJWE1FOiBDdXJyZW50bHkgbm8gc3VwcG9ydCBmb3IgVExTLlxuICAgICAgICAvLyBUaGUgcm91dGUgc2V0IE1VU1QgYmUgc2V0IHRvIHRoZSBsaXN0IG9mIFVSSXMgaW4gdGhlIFJlY29yZC1Sb3V0ZVxuICAgICAgICAvLyBoZWFkZXIgZmllbGQgZnJvbSB0aGUgcmVzcG9uc2UsIHRha2VuIGluIHJldmVyc2Ugb3JkZXIgYW5kIHByZXNlcnZpbmdcbiAgICAgICAgLy8gYWxsIFVSSSBwYXJhbWV0ZXJzLiAgSWYgbm8gUmVjb3JkLVJvdXRlIGhlYWRlciBmaWVsZCBpcyBwcmVzZW50IGluXG4gICAgICAgIC8vIHRoZSByZXNwb25zZSwgdGhlIHJvdXRlIHNldCBNVVNUIGJlIHNldCB0byB0aGUgZW1wdHkgc2V0LiAgVGhpcyByb3V0ZVxuICAgICAgICAvLyBzZXQsIGV2ZW4gaWYgZW1wdHksIG92ZXJyaWRlcyBhbnkgcHJlLWV4aXN0aW5nIHJvdXRlIHNldCBmb3IgZnV0dXJlXG4gICAgICAgIC8vIHJlcXVlc3RzIGluIHRoaXMgZGlhbG9nLiAgVGhlIHJlbW90ZSB0YXJnZXQgTVVTVCBiZSBzZXQgdG8gdGhlIFVSSVxuICAgICAgICAvLyBmcm9tIHRoZSBDb250YWN0IGhlYWRlciBmaWVsZCBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMS4yXG4gICAgICAgIGNvbnN0IHJvdXRlU2V0ID0gaW5jb21pbmdOb3RpZnlSZXF1ZXN0TWVzc2FnZS5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpO1xuICAgICAgICBjb25zdCBjb250YWN0ID0gaW5jb21pbmdOb3RpZnlSZXF1ZXN0TWVzc2FnZS5wYXJzZUhlYWRlcihcImNvbnRhY3RcIik7XG4gICAgICAgIGlmICghY29udGFjdCkge1xuICAgICAgICAgICAgLy8gVE9ETzogUmV2aWV3IHRvIG1ha2Ugc3VyZSB0aGlzIHdpbGwgbmV2ZXIgaGFwcGVuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250YWN0IHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoY29udGFjdCBpbnN0YW5jZW9mIE5hbWVBZGRySGVhZGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udGFjdCBub3QgaW5zdGFuY2Ugb2YgTmFtZUFkZHJIZWFkZXIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW90ZVRhcmdldCA9IGNvbnRhY3QudXJpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc2VxdWVuY2UgbnVtYmVyIE1VU1QgYmUgc2V0IHRvIHRoZSB2YWx1ZSBvZiB0aGUgc2VxdWVuY2VcbiAgICAgICAgLy8gbnVtYmVyIGluIHRoZSBDU2VxIGhlYWRlciBmaWVsZCBvZiB0aGUgcmVxdWVzdC4gIFRoZSByZW1vdGUgc2VxdWVuY2VcbiAgICAgICAgLy8gbnVtYmVyIE1VU1QgYmUgZW1wdHkgKGl0IGlzIGVzdGFibGlzaGVkIHdoZW4gdGhlIHJlbW90ZSBVQSBzZW5kcyBhXG4gICAgICAgIC8vIHJlcXVlc3Qgd2l0aGluIHRoZSBkaWFsb2cpLiAgVGhlIGNhbGwgaWRlbnRpZmllciBjb21wb25lbnQgb2YgdGhlXG4gICAgICAgIC8vIGRpYWxvZyBJRCBNVVNUIGJlIHNldCB0byB0aGUgdmFsdWUgb2YgdGhlIENhbGwtSUQgaW4gdGhlIHJlcXVlc3QuXG4gICAgICAgIC8vIFRoZSBsb2NhbCB0YWcgY29tcG9uZW50IG9mIHRoZSBkaWFsb2cgSUQgTVVTVCBiZSBzZXQgdG8gdGhlIHRhZyBpblxuICAgICAgICAvLyB0aGUgRnJvbSBmaWVsZCBpbiB0aGUgcmVxdWVzdCwgYW5kIHRoZSByZW1vdGUgdGFnIGNvbXBvbmVudCBvZiB0aGVcbiAgICAgICAgLy8gZGlhbG9nIElEIE1VU1QgYmUgc2V0IHRvIHRoZSB0YWcgaW4gdGhlIFRvIGZpZWxkIG9mIHRoZSByZXNwb25zZS4gIEFcbiAgICAgICAgLy8gVUFDIE1VU1QgYmUgcHJlcGFyZWQgdG8gcmVjZWl2ZSBhIHJlc3BvbnNlIHdpdGhvdXQgYSB0YWcgaW4gdGhlIFRvXG4gICAgICAgIC8vIGZpZWxkLCBpbiB3aGljaCBjYXNlIHRoZSB0YWcgaXMgY29uc2lkZXJlZCB0byBoYXZlIGEgdmFsdWUgb2YgbnVsbC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgVGhpcyBpcyB0byBtYWludGFpbiBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIFJGQyAyNTQzLCB3aGljaFxuICAgICAgICAvLyAgICBkaWQgbm90IG1hbmRhdGUgVG8gdGFncy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMi4xLjJcbiAgICAgICAgY29uc3QgbG9jYWxTZXF1ZW5jZU51bWJlciA9IG91dGdvaW5nU3Vic2NyaWJlUmVxdWVzdE1lc3NhZ2UuY3NlcTtcbiAgICAgICAgY29uc3QgcmVtb3RlU2VxdWVuY2VOdW1iZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGNhbGxJZCA9IG91dGdvaW5nU3Vic2NyaWJlUmVxdWVzdE1lc3NhZ2UuY2FsbElkO1xuICAgICAgICBjb25zdCBsb2NhbFRhZyA9IG91dGdvaW5nU3Vic2NyaWJlUmVxdWVzdE1lc3NhZ2UuZnJvbVRhZztcbiAgICAgICAgY29uc3QgcmVtb3RlVGFnID0gaW5jb21pbmdOb3RpZnlSZXF1ZXN0TWVzc2FnZS5mcm9tVGFnO1xuICAgICAgICBpZiAoIWNhbGxJZCkge1xuICAgICAgICAgICAgLy8gVE9ETzogUmV2aWV3IHRvIG1ha2Ugc3VyZSB0aGlzIHdpbGwgbmV2ZXIgaGFwcGVuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWxsIGlkIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsb2NhbFRhZykge1xuICAgICAgICAgICAgLy8gVE9ETzogUmV2aWV3IHRvIG1ha2Ugc3VyZSB0aGlzIHdpbGwgbmV2ZXIgaGFwcGVuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGcm9tIHRhZyB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVtb3RlVGFnKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBSZXZpZXcgdG8gbWFrZSBzdXJlIHRoaXMgd2lsbCBuZXZlciBoYXBwZW5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvIHRhZyB1bmRlZmluZWQuXCIpOyAvLyBGSVhNRTogTm8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBSRkMgMjU0M1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSByZW1vdGUgVVJJIE1VU1QgYmUgc2V0IHRvIHRoZSBVUkkgaW4gdGhlIFRvIGZpZWxkLCBhbmQgdGhlIGxvY2FsXG4gICAgICAgIC8vIFVSSSBNVVNUIGJlIHNldCB0byB0aGUgVVJJIGluIHRoZSBGcm9tIGZpZWxkLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjEuMlxuICAgICAgICBpZiAoIW91dGdvaW5nU3Vic2NyaWJlUmVxdWVzdE1lc3NhZ2UuZnJvbSkge1xuICAgICAgICAgICAgLy8gVE9ETzogUmV2aWV3IHRvIG1ha2Ugc3VyZSB0aGlzIHdpbGwgbmV2ZXIgaGFwcGVuXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGcm9tIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvdXRnb2luZ1N1YnNjcmliZVJlcXVlc3RNZXNzYWdlLnRvKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBSZXZpZXcgdG8gbWFrZSBzdXJlIHRoaXMgd2lsbCBuZXZlciBoYXBwZW5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxVUkkgPSBvdXRnb2luZ1N1YnNjcmliZVJlcXVlc3RNZXNzYWdlLmZyb20udXJpO1xuICAgICAgICBjb25zdCByZW1vdGVVUkkgPSBvdXRnb2luZ1N1YnNjcmliZVJlcXVlc3RNZXNzYWdlLnRvLnVyaTtcbiAgICAgICAgLy8gQSBkaWFsb2cgY2FuIGFsc28gYmUgaW4gdGhlIFwiZWFybHlcIiBzdGF0ZSwgd2hpY2ggb2NjdXJzIHdoZW4gaXQgaXNcbiAgICAgICAgLy8gY3JlYXRlZCB3aXRoIGEgcHJvdmlzaW9uYWwgcmVzcG9uc2UsIGFuZCB0aGVuIHRyYW5zaXRpb24gdG8gdGhlXG4gICAgICAgIC8vIFwiY29uZmlybWVkXCIgc3RhdGUgd2hlbiBhIDJ4eCBmaW5hbCByZXNwb25zZSBhcnJpdmVzLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyXG4gICAgICAgIGNvbnN0IGVhcmx5ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGRpYWxvZ1N0YXRlID0ge1xuICAgICAgICAgICAgaWQ6IGNhbGxJZCArIGxvY2FsVGFnICsgcmVtb3RlVGFnLFxuICAgICAgICAgICAgZWFybHksXG4gICAgICAgICAgICBjYWxsSWQsXG4gICAgICAgICAgICBsb2NhbFRhZyxcbiAgICAgICAgICAgIHJlbW90ZVRhZyxcbiAgICAgICAgICAgIGxvY2FsU2VxdWVuY2VOdW1iZXIsXG4gICAgICAgICAgICByZW1vdGVTZXF1ZW5jZU51bWJlcixcbiAgICAgICAgICAgIGxvY2FsVVJJLFxuICAgICAgICAgICAgcmVtb3RlVVJJLFxuICAgICAgICAgICAgcmVtb3RlVGFyZ2V0LFxuICAgICAgICAgICAgcm91dGVTZXQsXG4gICAgICAgICAgICBzZWN1cmVcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpYWxvZ1N0YXRlO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgICAgIGlmICh0aGlzLk4pIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLk4pO1xuICAgICAgICAgICAgdGhpcy5OID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVmcmVzaFRpbWVyQ2xlYXIoKTtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBTVUJTQ1JJQkUgZGlhbG9nICR7dGhpcy5pZH0gZGVzdHJveWVkYCk7XG4gICAgfVxuICAgIGdldCBhdXRvUmVmcmVzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9SZWZyZXNoO1xuICAgIH1cbiAgICBzZXQgYXV0b1JlZnJlc2goYXV0b1JlZnJlc2gpIHtcbiAgICAgICAgdGhpcy5fYXV0b1JlZnJlc2ggPSB0cnVlO1xuICAgICAgICB0aGlzLnJlZnJlc2hUaW1lclNldCgpO1xuICAgIH1cbiAgICBnZXQgc3Vic2NyaXB0aW9uRXZlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb25FdmVudDtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiBzZWNvbmRzIHVudGlsIHN1YnNjcmlwdGlvbiBleHBpcmVzLiAqL1xuICAgIGdldCBzdWJzY3JpcHRpb25FeHBpcmVzKCkge1xuICAgICAgICBjb25zdCBzZWNvbmRzU2luY2VMYXN0U2V0ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgLSB0aGlzLl9zdWJzY3JpcHRpb25FeHBpcmVzTGFzdFNldDtcbiAgICAgICAgY29uc3Qgc2Vjb25kc1VudGlsRXhwaXJlcyA9IHRoaXMuX3N1YnNjcmlwdGlvbkV4cGlyZXMgLSBzZWNvbmRzU2luY2VMYXN0U2V0O1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoc2Vjb25kc1VudGlsRXhwaXJlcywgMCk7XG4gICAgfVxuICAgIHNldCBzdWJzY3JpcHRpb25FeHBpcmVzKGV4cGlyZXMpIHtcbiAgICAgICAgaWYgKGV4cGlyZXMgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBpcmVzIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHplcm8uXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbkV4cGlyZXMgPSBleHBpcmVzO1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25FeHBpcmVzTGFzdFNldCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuICAgICAgICBpZiAodGhpcy5hdXRvUmVmcmVzaCkge1xuICAgICAgICAgICAgY29uc3QgcmVmcmVzaCA9IHRoaXMuc3Vic2NyaXB0aW9uUmVmcmVzaDtcbiAgICAgICAgICAgIGlmIChyZWZyZXNoID09PSB1bmRlZmluZWQgfHwgcmVmcmVzaCA+PSBleHBpcmVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVGltZXJTZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgc3Vic2NyaXB0aW9uRXhwaXJlc0luaXRpYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb25FeHBpcmVzSW5pdGlhbDtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiBzZWNvbmRzIHVudGlsIHN1YnNjcmlwdGlvbiBhdXRvIHJlZnJlc2guICovXG4gICAgZ2V0IHN1YnNjcmlwdGlvblJlZnJlc2goKSB7XG4gICAgICAgIGlmICh0aGlzLl9zdWJzY3JpcHRpb25SZWZyZXNoID09PSB1bmRlZmluZWQgfHwgdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaExhc3RTZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWNvbmRzU2luY2VMYXN0U2V0ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgLSB0aGlzLl9zdWJzY3JpcHRpb25SZWZyZXNoTGFzdFNldDtcbiAgICAgICAgY29uc3Qgc2Vjb25kc1VudGlsRXhwaXJlcyA9IHRoaXMuX3N1YnNjcmlwdGlvblJlZnJlc2ggLSBzZWNvbmRzU2luY2VMYXN0U2V0O1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoc2Vjb25kc1VudGlsRXhwaXJlcywgMCk7XG4gICAgfVxuICAgIGdldCBzdWJzY3JpcHRpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvblN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNlaXZlIGluIGRpYWxvZyByZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSAgVGhlIGluY29taW5nIHJlcXVlc3QgbWVzc2FnZS5cbiAgICAgKi9cbiAgICByZWNlaXZlUmVxdWVzdChtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgU1VCU0NSSUJFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkICR7bWVzc2FnZS5tZXRob2R9IHJlcXVlc3RgKTtcbiAgICAgICAgLy8gUmVxdWVzdCB3aXRoaW4gYSBkaWFsb2cgb3V0IG9mIHNlcXVlbmNlIGd1YXJkLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjIuMlxuICAgICAgICBpZiAoIXRoaXMuc2VxdWVuY2VHdWFyZChtZXNzYWdlKSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBTVUJTQ1JJQkUgZGlhbG9nICR7dGhpcy5pZH0gcmVqZWN0ZWQgb3V0IG9mIG9yZGVyICR7bWVzc2FnZS5tZXRob2R9IHJlcXVlc3QuYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVxdWVzdCB3aXRoaW4gYSBkaWFsb2cgY29tbW9uIHByb2Nlc3NpbmcuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMi4yXG4gICAgICAgIHN1cGVyLnJlY2VpdmVSZXF1ZXN0KG1lc3NhZ2UpO1xuICAgICAgICAvLyBTd2l0Y2ggb24gbWV0aG9kIGFuZCB0aGVuIGRlbGVnYXRlLlxuICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UubWV0aG9kKSB7XG4gICAgICAgICAgICBjYXNlIEMuTk9USUZZOlxuICAgICAgICAgICAgICAgIHRoaXMub25Ob3RpZnkobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgU1VCU0NSSUJFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkIHVuaW1wbGVtZW50ZWQgJHttZXNzYWdlLm1ldGhvZH0gcmVxdWVzdGApO1xuICAgICAgICAgICAgICAgIHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7IHN0YXR1c0NvZGU6IDUwMSB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiA0LjEuMi4yLiAgUmVmcmVzaGluZyBvZiBTdWJzY3JpcHRpb25zXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjEuMi4yXG4gICAgICovXG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgY29uc3QgYWxsb3dIZWFkZXIgPSBcIkFsbG93OiBcIiArIEFsbG93ZWRNZXRob2RzLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcbiAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7XG4gICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzLnB1c2goYWxsb3dIZWFkZXIpO1xuICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycy5wdXNoKFwiRXZlbnQ6IFwiICsgdGhpcy5zdWJzY3JpcHRpb25FdmVudCk7XG4gICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzLnB1c2goXCJFeHBpcmVzOiBcIiArIHRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlc0luaXRpYWwpO1xuICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycy5wdXNoKFwiQ29udGFjdDogXCIgKyB0aGlzLmNvcmUuY29uZmlndXJhdGlvbi5jb250YWN0LnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmUodW5kZWZpbmVkLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogNC4xLjIuMi4gIFJlZnJlc2hpbmcgb2YgU3Vic2NyaXB0aW9uc1xuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NjY1I3NlY3Rpb24tNC4xLjIuMlxuICAgICAqIEBwYXJhbSBkZWxlZ2F0ZSAtIERlbGVnYXRlIHRvIGhhbmRsZSByZXNwb25zZXMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGJ1Y2tldC5cbiAgICAgKi9cbiAgICBzdWJzY3JpYmUoZGVsZWdhdGUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25TdGF0ZSAhPT0gU3Vic2NyaXB0aW9uU3RhdGUuUGVuZGluZyAmJiB0aGlzLnN1YnNjcmlwdGlvblN0YXRlICE9PSBTdWJzY3JpcHRpb25TdGF0ZS5BY3RpdmUpIHtcbiAgICAgICAgICAgIC8vIEZJWE1FOiBUaGlzIG5lZWRzIHRvIGJlIGEgcHJvcGVyIGV4Y2VwdGlvblxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlICR7dGhpcy5zdWJzY3JpcHRpb25TdGF0ZX0uIE1heSBvbmx5IHJlLXN1YnNjcmliZSB3aGlsZSBpbiBzdGF0ZSBcInBlbmRpbmdcIiBvciBcImFjdGl2ZVwiLmApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgU1VCU0NSSUJFIGRpYWxvZyAke3RoaXMuaWR9IHNlbmRpbmcgU1VCU0NSSUJFIHJlcXVlc3RgKTtcbiAgICAgICAgY29uc3QgdWFjID0gbmV3IFJlU3Vic2NyaWJlVXNlckFnZW50Q2xpZW50KHRoaXMsIGRlbGVnYXRlLCBvcHRpb25zKTtcbiAgICAgICAgLy8gQWJvcnQgYW55IG91dHN0YW5kaW5nIHRpbWVyIChhcyBpdCB3b3VsZCBvdGhlcndpc2UgYmVjb21lIGd1YXJhbnRlZWQgdG8gdGVybWluYXRlIHVzKS5cbiAgICAgICAgaWYgKHRoaXMuTikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuTik7XG4gICAgICAgICAgICB0aGlzLk4gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiByZWZyZXNoaW5nIGEgc3Vic2NyaXB0aW9uLCBhIHN1YnNjcmliZXIgc3RhcnRzIFRpbWVyIE4sIHNldCB0b1xuICAgICAgICAvLyA2NCpUMSwgd2hlbiBpdCBzZW5kcyB0aGUgU1VCU0NSSUJFIHJlcXVlc3QuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NjY1I3NlY3Rpb24tNC4xLjIuMlxuICAgICAgICB0aGlzLk4gPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudGltZXJOKCksIFRpbWVycy5USU1FUl9OKTtcbiAgICAgICAgcmV0dXJuIHVhYztcbiAgICB9XG4gICAgLyoqXG4gICAgICogNC40LjEuICBEaWFsb2cgQ3JlYXRpb24gYW5kIFRlcm1pbmF0aW9uXG4gICAgICogQSBzdWJzY3JpcHRpb24gaXMgZGVzdHJveWVkIGFmdGVyIGEgbm90aWZpZXIgc2VuZHMgYSBOT1RJRlkgcmVxdWVzdFxuICAgICAqIHdpdGggYSBcIlN1YnNjcmlwdGlvbi1TdGF0ZVwiIG9mIFwidGVybWluYXRlZFwiLCBvciBpbiBjZXJ0YWluIGVycm9yXG4gICAgICogc2l0dWF0aW9ucyBkZXNjcmliZWQgZWxzZXdoZXJlIGluIHRoaXMgZG9jdW1lbnQuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjQuMVxuICAgICAqL1xuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU3Vic2NyaXB0aW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgIHRoaXMub25UZXJtaW5hdGVkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIDQuMS4yLjMuICBVbnN1YnNjcmliaW5nXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjEuMi4zXG4gICAgICovXG4gICAgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgIGNvbnN0IGFsbG93SGVhZGVyID0gXCJBbGxvdzogXCIgKyBBbGxvd2VkTWV0aG9kcy50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge307XG4gICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpO1xuICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycy5wdXNoKGFsbG93SGVhZGVyKTtcbiAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMucHVzaChcIkV2ZW50OiBcIiArIHRoaXMuc3Vic2NyaXB0aW9uRXZlbnQpO1xuICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycy5wdXNoKFwiRXhwaXJlczogMFwiKTtcbiAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMucHVzaChcIkNvbnRhY3Q6IFwiICsgdGhpcy5jb3JlLmNvbmZpZ3VyYXRpb24uY29udGFjdC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlKHVuZGVmaW5lZCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBpbiBkaWFsb2cgTk9USUZZIHJlcXVlc3RzLlxuICAgICAqIFRoaXMgZG9lcyBub3QgaW5jbHVkZSB0aGUgZmlyc3QgTk9USUZZIHdoaWNoIGNyZWF0ZWQgdGhlIGRpYWxvZy5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBpbmNvbWluZyBOT1RJRlkgcmVxdWVzdCBtZXNzYWdlLlxuICAgICAqL1xuICAgIG9uTm90aWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gSWYsIGZvciBzb21lIHJlYXNvbiwgdGhlIGV2ZW50IHBhY2thZ2UgZGVzaWduYXRlZCBpbiB0aGUgXCJFdmVudFwiXG4gICAgICAgIC8vIGhlYWRlciBmaWVsZCBvZiB0aGUgTk9USUZZIHJlcXVlc3QgaXMgbm90IHN1cHBvcnRlZCwgdGhlIHN1YnNjcmliZXJcbiAgICAgICAgLy8gd2lsbCByZXNwb25kIHdpdGggYSA0ODkgKEJhZCBFdmVudCkgcmVzcG9uc2UuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NjY1I3NlY3Rpb24tNC4xLjNcbiAgICAgICAgY29uc3QgZXZlbnQgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKFwiRXZlbnRcIikuZXZlbnQ7XG4gICAgICAgIGlmICghZXZlbnQgfHwgZXZlbnQgIT09IHRoaXMuc3Vic2NyaXB0aW9uRXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7IHN0YXR1c0NvZGU6IDQ4OSB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbiB0aGUgc3RhdGUgZGlhZ3JhbSwgXCJSZS1zdWJzY3JpcHRpb24gdGltZXMgb3V0XCIgbWVhbnMgdGhhdCBhblxuICAgICAgICAvLyBhdHRlbXB0IHRvIHJlZnJlc2ggb3IgdXBkYXRlIHRoZSBzdWJzY3JpcHRpb24gdXNpbmcgYSBuZXcgU1VCU0NSSUJFXG4gICAgICAgIC8vIHJlcXVlc3QgZG9lcyBub3QgcmVzdWx0IGluIGEgTk9USUZZIHJlcXVlc3QgYmVmb3JlIHRoZSBjb3JyZXNwb25kaW5nXG4gICAgICAgIC8vIFRpbWVyIE4gZXhwaXJlcy5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjEuMlxuICAgICAgICBpZiAodGhpcy5OKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5OKTtcbiAgICAgICAgICAgIHRoaXMuTiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBOT1RJRlkgcmVxdWVzdHMgTVVTVCBjb250YWluIFwiU3Vic2NyaXB0aW9uLVN0YXRlXCIgaGVhZGVyIGZpZWxkcyB0aGF0XG4gICAgICAgIC8vIGluZGljYXRlIHRoZSBzdGF0dXMgb2YgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjEuM1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25TdGF0ZSA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoXCJTdWJzY3JpcHRpb24tU3RhdGVcIik7XG4gICAgICAgIGlmICghc3Vic2NyaXB0aW9uU3RhdGUgfHwgIXN1YnNjcmlwdGlvblN0YXRlLnN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLmNvcmUucmVwbHlTdGF0ZWxlc3MobWVzc2FnZSwgeyBzdGF0dXNDb2RlOiA0ODkgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBzdWJzY3JpcHRpb25TdGF0ZS5zdGF0ZTtcbiAgICAgICAgY29uc3QgZXhwaXJlcyA9IHN1YnNjcmlwdGlvblN0YXRlLmV4cGlyZXMgPyBNYXRoLm1heChzdWJzY3JpcHRpb25TdGF0ZS5leHBpcmVzLCAwKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gVXBkYXRlIG91ciBzdGF0ZSBhbmQgZXhwaXJhdGlvbi5cbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBcInBlbmRpbmdcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTdWJzY3JpcHRpb25TdGF0ZS5QZW5kaW5nLCBleHBpcmVzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhY3RpdmVcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTdWJzY3JpcHRpb25TdGF0ZS5BY3RpdmUsIGV4cGlyZXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInRlcm1pbmF0ZWRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTdWJzY3JpcHRpb25TdGF0ZS5UZXJtaW5hdGVkLCBleHBpcmVzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIlVucmVjb2duaXplZCBzdWJzY3JpcHRpb24gc3RhdGUuXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlbGVnYXRlIHJlbWFpbmRlciBvZiBOT1RJRlkgaGFuZGxpbmcuXG4gICAgICAgIGNvbnN0IHVhcyA9IG5ldyBOb3RpZnlVc2VyQWdlbnRTZXJ2ZXIodGhpcywgbWVzc2FnZSk7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25Ob3RpZnkpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25Ob3RpZnkodWFzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVhcy5hY2NlcHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblJlZnJlc2gocmVxdWVzdCkge1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uUmVmcmVzaCkge1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblJlZnJlc2gocmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25UZXJtaW5hdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uVGVybWluYXRlZCkge1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblRlcm1pbmF0ZWQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoVGltZXJDbGVhcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVmcmVzaFRpbWVyKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZWZyZXNoVGltZXIpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVmcmVzaFRpbWVyU2V0KCkge1xuICAgICAgICB0aGlzLnJlZnJlc2hUaW1lckNsZWFyKCk7XG4gICAgICAgIGlmICh0aGlzLmF1dG9SZWZyZXNoICYmIHRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlcyA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZnJlc2ggPSB0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXMgKiA5MDA7XG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25SZWZyZXNoID0gTWF0aC5mbG9vcihyZWZyZXNoIC8gMTAwMCk7XG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25SZWZyZXNoTGFzdFNldCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25SZWZyZXNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvblJlZnJlc2hMYXN0U2V0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMub25SZWZyZXNoKHRoaXMucmVmcmVzaCgpKTtcbiAgICAgICAgICAgIH0sIHJlZnJlc2gpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlVHJhbnNpdGlvbihuZXdTdGF0ZSwgbmV3RXhwaXJlcykge1xuICAgICAgICAvLyBBc3NlcnQgdmFsaWQgc3RhdGUgdHJhbnNpdGlvbnMuXG4gICAgICAgIGNvbnN0IGludmFsaWRTdGF0ZVRyYW5zaXRpb24gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBJbnZhbGlkIHN1YnNjcmlwdGlvbiBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLnN1YnNjcmlwdGlvblN0YXRlfSB0byAke25ld1N0YXRlfWApO1xuICAgICAgICB9O1xuICAgICAgICBzd2l0Y2ggKG5ld1N0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFN1YnNjcmlwdGlvblN0YXRlLkluaXRpYWw6XG4gICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uU3RhdGUuTm90aWZ5V2FpdDpcbiAgICAgICAgICAgICAgICBpbnZhbGlkU3RhdGVUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25TdGF0ZS5QZW5kaW5nOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvblN0YXRlICE9PSBTdWJzY3JpcHRpb25TdGF0ZS5Ob3RpZnlXYWl0ICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uU3RhdGUgIT09IFN1YnNjcmlwdGlvblN0YXRlLlBlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25TdGF0ZS5BY3RpdmU6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uU3RhdGUgIT09IFN1YnNjcmlwdGlvblN0YXRlLk5vdGlmeVdhaXQgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSAhPT0gU3Vic2NyaXB0aW9uU3RhdGUuUGVuZGluZyAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblN0YXRlICE9PSBTdWJzY3JpcHRpb25TdGF0ZS5BY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25TdGF0ZS5UZXJtaW5hdGVkOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvblN0YXRlICE9PSBTdWJzY3JpcHRpb25TdGF0ZS5Ob3RpZnlXYWl0ICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uU3RhdGUgIT09IFN1YnNjcmlwdGlvblN0YXRlLlBlbmRpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSAhPT0gU3Vic2NyaXB0aW9uU3RhdGUuQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRTdGF0ZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaW52YWxpZFN0YXRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgXCJTdWJzY3JpcHRpb24tU3RhdGVcIiB2YWx1ZSBpcyBcInBlbmRpbmdcIiwgdGhlIHN1YnNjcmlwdGlvbiBoYXNcbiAgICAgICAgLy8gYmVlbiByZWNlaXZlZCBieSB0aGUgbm90aWZpZXIsIGJ1dCB0aGVyZSBpcyBpbnN1ZmZpY2llbnQgcG9saWN5XG4gICAgICAgIC8vIGluZm9ybWF0aW9uIHRvIGdyYW50IG9yIGRlbnkgdGhlIHN1YnNjcmlwdGlvbiB5ZXQuICBJZiB0aGUgaGVhZGVyXG4gICAgICAgIC8vIGZpZWxkIGFsc28gY29udGFpbnMgYW4gXCJleHBpcmVzXCIgcGFyYW1ldGVyLCB0aGUgc3Vic2NyaWJlciBTSE9VTERcbiAgICAgICAgLy8gdGFrZSBpdCBhcyB0aGUgYXV0aG9yaXRhdGl2ZSBzdWJzY3JpcHRpb24gZHVyYXRpb24gYW5kIGFkanVzdFxuICAgICAgICAvLyBhY2NvcmRpbmdseS4gIE5vIGZ1cnRoZXIgYWN0aW9uIGlzIG5lY2Vzc2FyeSBvbiB0aGUgcGFydCBvZiB0aGVcbiAgICAgICAgLy8gc3Vic2NyaWJlci4gIFRoZSBcInJldHJ5LWFmdGVyXCIgYW5kIFwicmVhc29uXCIgcGFyYW1ldGVycyBoYXZlIG5vXG4gICAgICAgIC8vIHNlbWFudGljcyBmb3IgXCJwZW5kaW5nXCIuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NjY1I3NlY3Rpb24tNC4xLjNcbiAgICAgICAgaWYgKG5ld1N0YXRlID09PSBTdWJzY3JpcHRpb25TdGF0ZS5QZW5kaW5nKSB7XG4gICAgICAgICAgICBpZiAobmV3RXhwaXJlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlcyA9IG5ld0V4cGlyZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIFwiU3Vic2NyaXB0aW9uLVN0YXRlXCIgaGVhZGVyIGZpZWxkIHZhbHVlIGlzIFwiYWN0aXZlXCIsIGl0IG1lYW5zXG4gICAgICAgIC8vIHRoYXQgdGhlIHN1YnNjcmlwdGlvbiBoYXMgYmVlbiBhY2NlcHRlZCBhbmQgKGluIGdlbmVyYWwpIGhhcyBiZWVuXG4gICAgICAgIC8vIGF1dGhvcml6ZWQuICBJZiB0aGUgaGVhZGVyIGZpZWxkIGFsc28gY29udGFpbnMgYW4gXCJleHBpcmVzXCJcbiAgICAgICAgLy8gcGFyYW1ldGVyLCB0aGUgc3Vic2NyaWJlciBTSE9VTEQgdGFrZSBpdCBhcyB0aGUgYXV0aG9yaXRhdGl2ZVxuICAgICAgICAvLyBzdWJzY3JpcHRpb24gZHVyYXRpb24gYW5kIGFkanVzdCBhY2NvcmRpbmdseS4gIFRoZSBcInJldHJ5LWFmdGVyXCIgYW5kXG4gICAgICAgIC8vIFwicmVhc29uXCIgcGFyYW1ldGVycyBoYXZlIG5vIHNlbWFudGljcyBmb3IgXCJhY3RpdmVcIi5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjEuM1xuICAgICAgICBpZiAobmV3U3RhdGUgPT09IFN1YnNjcmlwdGlvblN0YXRlLkFjdGl2ZSkge1xuICAgICAgICAgICAgaWYgKG5ld0V4cGlyZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXMgPSBuZXdFeHBpcmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSBcIlN1YnNjcmlwdGlvbi1TdGF0ZVwiIHZhbHVlIGlzIFwidGVybWluYXRlZFwiLCB0aGUgc3Vic2NyaWJlclxuICAgICAgICAvLyBNVVNUIGNvbnNpZGVyIHRoZSBzdWJzY3JpcHRpb24gdGVybWluYXRlZC4gIFRoZSBcImV4cGlyZXNcIiBwYXJhbWV0ZXJcbiAgICAgICAgLy8gaGFzIG5vIHNlbWFudGljcyBmb3IgXCJ0ZXJtaW5hdGVkXCIgLS0gbm90aWZpZXJzIFNIT1VMRCBOT1QgaW5jbHVkZSBhblxuICAgICAgICAvLyBcImV4cGlyZXNcIiBwYXJhbWV0ZXIgb24gYSBcIlN1YnNjcmlwdGlvbi1TdGF0ZVwiIGhlYWRlciBmaWVsZCB3aXRoIGFcbiAgICAgICAgLy8gdmFsdWUgb2YgXCJ0ZXJtaW5hdGVkXCIsIGFuZCBzdWJzY3JpYmVycyBNVVNUIGlnbm9yZSBhbnkgc3VjaFxuICAgICAgICAvLyBwYXJhbWV0ZXIsIGlmIHByZXNlbnQuXG4gICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gU3Vic2NyaXB0aW9uU3RhdGUuVGVybWluYXRlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uU3RhdGUgPSBuZXdTdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hlbiByZWZyZXNoaW5nIGEgc3Vic2NyaXB0aW9uLCBhIHN1YnNjcmliZXIgc3RhcnRzIFRpbWVyIE4sIHNldCB0b1xuICAgICAqIDY0KlQxLCB3aGVuIGl0IHNlbmRzIHRoZSBTVUJTQ1JJQkUgcmVxdWVzdC4gIElmIHRoaXMgVGltZXIgTiBleHBpcmVzXG4gICAgICogcHJpb3IgdG8gdGhlIHJlY2VpcHQgb2YgYSBOT1RJRlkgcmVxdWVzdCwgdGhlIHN1YnNjcmliZXIgY29uc2lkZXJzXG4gICAgICogdGhlIHN1YnNjcmlwdGlvbiB0ZXJtaW5hdGVkLiAgSWYgdGhlIHN1YnNjcmliZXIgcmVjZWl2ZXMgYSBzdWNjZXNzXG4gICAgICogcmVzcG9uc2UgdG8gdGhlIFNVQlNDUklCRSByZXF1ZXN0IHRoYXQgaW5kaWNhdGVzIHRoYXQgbm8gTk9USUZZXG4gICAgICogcmVxdWVzdCB3aWxsIGJlIGdlbmVyYXRlZCAtLSBzdWNoIGFzIHRoZSAyMDQgcmVzcG9uc2UgZGVmaW5lZCBmb3IgdXNlXG4gICAgICogd2l0aCB0aGUgb3B0aW9uYWwgZXh0ZW5zaW9uIGRlc2NyaWJlZCBpbiBbUkZDNTgzOV0gLS0gdGhlbiBpdCBNVVNUXG4gICAgICogY2FuY2VsIFRpbWVyIE4uXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjEuMi4yXG4gICAgICovXG4gICAgdGltZXJOKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBUaW1lciBOIGV4cGlyZWQgZm9yIFNVQlNDUklCRSBkaWFsb2cuIFRpbWVkIG91dCB3YWl0aW5nIGZvciBOT1RJRlkuYCk7XG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvblN0YXRlICE9PSBTdWJzY3JpcHRpb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTdWJzY3JpcHRpb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICAgICAgICAgIHRoaXMub25UZXJtaW5hdGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTdWJzY3JpcHRpb25EaWFsb2cgfSBmcm9tIFwiLi4vZGlhbG9ncy9zdWJzY3JpcHRpb24tZGlhbG9nXCI7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25TdGF0ZSB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb25cIjtcbmltcG9ydCB7IFRpbWVycyB9IGZyb20gXCIuLi90aW1lcnNcIjtcbmltcG9ydCB7IE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uIH0gZnJvbSBcIi4uL3RyYW5zYWN0aW9uc1wiO1xuaW1wb3J0IHsgVXNlckFnZW50Q2xpZW50IH0gZnJvbSBcIi4vdXNlci1hZ2VudC1jbGllbnRcIjtcbi8qKlxuICogU1VCU0NSSUJFIFVBQy5cbiAqIEByZW1hcmtzXG4gKiA0LjEuICBTdWJzY3JpYmVyIEJlaGF2aW9yXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjY2NSNzZWN0aW9uLTQuMVxuICpcbiAqIFVzZXIgYWdlbnQgY2xpZW50IGZvciBpbnN0YWxsYXRpb24gb2YgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHBlciBTVUJTQ1JJQkUgcmVxdWVzdC5cbiAqIFRPRE86IFN1cHBvcnQgZm9yIGluc3RhbGxhdGlvbiBvZiBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIG9uIGZvcmtlZCBTVUJTQ1JJQkUgcmVxdWVzdHMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJzY3JpYmVVc2VyQWdlbnRDbGllbnQgZXh0ZW5kcyBVc2VyQWdlbnRDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKSB7XG4gICAgICAgIC8vIEdldCBldmVudCBmcm9tIHJlcXVlc3QgbWVzc2FnZS5cbiAgICAgICAgY29uc3QgZXZlbnQgPSBtZXNzYWdlLmdldEhlYWRlcihcIkV2ZW50XCIpO1xuICAgICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFdmVudCB1bmRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2V0IGV4cGlyZXMgZnJvbSByZXF1ZXN0IG1lc3NhZ2UuXG4gICAgICAgIGNvbnN0IGV4cGlyZXMgPSBtZXNzYWdlLmdldEhlYWRlcihcIkV4cGlyZXNcIik7XG4gICAgICAgIGlmICghZXhwaXJlcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwaXJlcyB1bmRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24sIGNvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICAvLyBGSVhNRTogU3Vic2NyaWJlciBpZCBzaG91bGQgYWxzbyBiZSBtYXRjaGluZyBvbiBldmVudCBpZC5cbiAgICAgICAgdGhpcy5zdWJzY3JpYmVySWQgPSBtZXNzYWdlLmNhbGxJZCArIG1lc3NhZ2UuZnJvbVRhZyArIGV2ZW50O1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXNSZXF1ZXN0ZWQgPSB0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXMgPSBOdW1iZXIoZXhwaXJlcyk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uRXZlbnQgPSBldmVudDtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSA9IFN1YnNjcmlwdGlvblN0YXRlLk5vdGlmeVdhaXQ7XG4gICAgICAgIC8vIFN0YXJ0IHdhaXRpbmcgZm9yIGEgTk9USUZZIHdlIGNhbiB1c2UgdG8gY3JlYXRlIGEgc3Vic2NyaXB0aW9uLlxuICAgICAgICB0aGlzLndhaXROb3RpZnlTdGFydCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXN0cnVjdG9yLlxuICAgICAqIE5vdGUgdGhhdCBUaW1lciBOIG1heSBsaXZlIG9uIHdhaXRpbmcgZm9yIGFuIGluaXRpYWwgTk9USUZZIGFuZFxuICAgICAqIHRoZSBkZWxlZ2F0ZSBtYXkgc3RpbGwgcmVjZWl2ZSB0aGF0IE5PVElGWS4gSWYgeW91IGRvbid0IHdhbnRcbiAgICAgKiB0aGF0IGJlaGF2aW9yIHRoZW4gZWl0aGVyIGNsZWFyIHRoZSBkZWxlZ2F0ZSBzbyB0aGUgZGVsZWdhdGVcbiAgICAgKiBkb2Vzbid0IGdldCBjYWxsZWQgKGEgMjAwIHdpbGwgYmUgc2VudCBpbiByZXNwb25zZSB0byB0aGUgTk9USUZZKVxuICAgICAqIG9yIGNhbGwgYHdhaXROb3RpZnlTdG9wYCB3aGljaCB3aWxsIGNsZWFyIFRpbWVyIE4gYW5kIHJlbW92ZSB0aGlzXG4gICAgICogVUFDIGZyb20gdGhlIGNvcmUgKGEgNDgxIHdpbGwgYmUgc2VudCBpbiByZXNwb25zZSB0byB0aGUgTk9USUZZKS5cbiAgICAgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBvdXQgb2YgZGlhbG9nIE5PVElGWSBhc3NvY2lhdGVkIHdpdGggU1VCU0NSSUJFIHJlcXVlc3QuXG4gICAgICogVGhpcyBpcyB0aGUgZmlyc3QgTk9USUZZIHJlY2VpdmVkIGFmdGVyIHRoZSBTVUJTQ1JJQkUgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0gdWFzIC0gVXNlciBhZ2VudCBzZXJ2ZXIgaGFuZGxpbmcgdGhlIHN1YnNjcmlwdGlvbiBjcmVhdGluZyBOT1RJRlkuXG4gICAgICovXG4gICAgb25Ob3RpZnkodWFzKSB7XG4gICAgICAgIC8vIE5PVElGWSByZXF1ZXN0cyBhcmUgbWF0Y2hlZCB0byBzdWNoIFNVQlNDUklCRSByZXF1ZXN0cyBpZiB0aGV5XG4gICAgICAgIC8vIGNvbnRhaW4gdGhlIHNhbWUgXCJDYWxsLUlEXCIsIGEgXCJUb1wiIGhlYWRlciBmaWVsZCBcInRhZ1wiIHBhcmFtZXRlciB0aGF0XG4gICAgICAgIC8vIG1hdGNoZXMgdGhlIFwiRnJvbVwiIGhlYWRlciBmaWVsZCBcInRhZ1wiIHBhcmFtZXRlciBvZiB0aGUgU1VCU0NSSUJFXG4gICAgICAgIC8vIHJlcXVlc3QsIGFuZCB0aGUgc2FtZSBcIkV2ZW50XCIgaGVhZGVyIGZpZWxkLiAgUnVsZXMgZm9yIGNvbXBhcmlzb25zIG9mXG4gICAgICAgIC8vIHRoZSBcIkV2ZW50XCIgaGVhZGVyIGZpZWxkcyBhcmUgZGVzY3JpYmVkIGluIFNlY3Rpb24gOC4yLjEuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NjY1I3NlY3Rpb24tNC40LjFcbiAgICAgICAgY29uc3QgZXZlbnQgPSB1YXMubWVzc2FnZS5wYXJzZUhlYWRlcihcIkV2ZW50XCIpLmV2ZW50O1xuICAgICAgICBpZiAoIWV2ZW50IHx8IGV2ZW50ICE9PSB0aGlzLnN1YnNjcmlwdGlvbkV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBGYWlsZWQgdG8gcGFyc2UgZXZlbnQuYCk7XG4gICAgICAgICAgICB1YXMucmVqZWN0KHsgc3RhdHVzQ29kZTogNDg5IH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5PVElGWSByZXF1ZXN0cyBNVVNUIGNvbnRhaW4gXCJTdWJzY3JpcHRpb24tU3RhdGVcIiBoZWFkZXIgZmllbGRzIHRoYXRcbiAgICAgICAgLy8gaW5kaWNhdGUgdGhlIHN0YXR1cyBvZiB0aGUgc3Vic2NyaXB0aW9uLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjY2NSNzZWN0aW9uLTQuMS4zXG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvblN0YXRlID0gdWFzLm1lc3NhZ2UucGFyc2VIZWFkZXIoXCJTdWJzY3JpcHRpb24tU3RhdGVcIik7XG4gICAgICAgIGlmICghc3Vic2NyaXB0aW9uU3RhdGUgfHwgIXN1YnNjcmlwdGlvblN0YXRlLnN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiRmFpbGVkIHRvIHBhcnNlIHN1YnNjcmlwdGlvbiBzdGF0ZS5cIik7XG4gICAgICAgICAgICB1YXMucmVqZWN0KHsgc3RhdHVzQ29kZTogNDg5IH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFZhbGlkYXRlIHN1YnNjcmlwdGlvbiBzdGF0ZS5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBzdWJzY3JpcHRpb25TdGF0ZS5zdGF0ZTtcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBcInBlbmRpbmdcIjpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhY3RpdmVcIjpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYEludmFsaWQgc3Vic2NyaXB0aW9uIHN0YXRlICR7c3RhdGV9YCk7XG4gICAgICAgICAgICAgICAgdWFzLnJlamVjdCh7IHN0YXR1c0NvZGU6IDQ4OSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGlhbG9ncyB1c2FnZXMgYXJlIGNyZWF0ZWQgdXBvbiBjb21wbGV0aW9uIG9mIGEgTk9USUZZIHRyYW5zYWN0aW9uXG4gICAgICAgIC8vIGZvciBhIG5ldyBzdWJzY3JpcHRpb24sIHVubGVzcyB0aGUgTk9USUZZIHJlcXVlc3QgY29udGFpbnMgYVxuICAgICAgICAvLyBcIlN1YnNjcmlwdGlvbi1TdGF0ZVwiIG9mIFwidGVybWluYXRlZC5cIlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjY2NSNzZWN0aW9uLTQuNC4xXG4gICAgICAgIGlmIChzdGF0ZSAhPT0gXCJ0ZXJtaW5hdGVkXCIpIHtcbiAgICAgICAgICAgIC8vIFRoZSBDb250YWN0IGhlYWRlciBmaWVsZCBNVVNUIGJlIHByZXNlbnQgYW5kIGNvbnRhaW4gZXhhY3RseSBvbmUgU0lQXG4gICAgICAgICAgICAvLyBvciBTSVBTIFVSSSBpbiBhbnkgcmVxdWVzdCB0aGF0IGNhbiByZXN1bHQgaW4gdGhlIGVzdGFibGlzaG1lbnQgb2YgYVxuICAgICAgICAgICAgLy8gZGlhbG9nLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjEuMS44XG4gICAgICAgICAgICBjb25zdCBjb250YWN0ID0gdWFzLm1lc3NhZ2UucGFyc2VIZWFkZXIoXCJjb250YWN0XCIpO1xuICAgICAgICAgICAgaWYgKCFjb250YWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIkZhaWxlZCB0byBwYXJzZSBjb250YWN0LlwiKTtcbiAgICAgICAgICAgICAgICB1YXMucmVqZWN0KHsgc3RhdHVzQ29kZTogNDg5IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJbiBhY2NvcmRhbmNlIHdpdGggdGhlIHJ1bGVzIGZvciBwcm94eWluZyBub24tSU5WSVRFIHJlcXVlc3RzIGFzXG4gICAgICAgIC8vIGRlZmluZWQgaW4gW1JGQzMyNjFdLCBzdWNjZXNzZnVsIFNVQlNDUklCRSByZXF1ZXN0cyB3aWxsIHJlY2VpdmUgb25seVxuICAgICAgICAvLyBvbmUgMjAwLWNsYXNzIHJlc3BvbnNlOyBob3dldmVyLCBkdWUgdG8gZm9ya2luZywgdGhlIHN1YnNjcmlwdGlvbiBtYXlcbiAgICAgICAgLy8gaGF2ZSBiZWVuIGFjY2VwdGVkIGJ5IG11bHRpcGxlIG5vZGVzLiAgVGhlIHN1YnNjcmliZXIgTVVTVCB0aGVyZWZvcmVcbiAgICAgICAgLy8gYmUgcHJlcGFyZWQgdG8gcmVjZWl2ZSBOT1RJRlkgcmVxdWVzdHMgd2l0aCBcIkZyb206XCIgdGFncyB0aGF0IGRpZmZlclxuICAgICAgICAvLyBmcm9tIHRoZSBcIlRvOlwiIHRhZyByZWNlaXZlZCBpbiB0aGUgU1VCU0NSSUJFIDIwMC1jbGFzcyByZXNwb25zZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgbXVsdGlwbGUgTk9USUZZIHJlcXVlc3RzIGFyZSByZWNlaXZlZCBpbiBkaWZmZXJlbnQgZGlhbG9ncyBpblxuICAgICAgICAvLyByZXNwb25zZSB0byBhIHNpbmdsZSBTVUJTQ1JJQkUgcmVxdWVzdCwgZWFjaCBkaWFsb2cgcmVwcmVzZW50cyBhXG4gICAgICAgIC8vIGRpZmZlcmVudCBkZXN0aW5hdGlvbiB0byB3aGljaCB0aGUgU1VCU0NSSUJFIHJlcXVlc3Qgd2FzIGZvcmtlZC5cbiAgICAgICAgLy8gU3Vic2NyaWJlciBoYW5kbGluZyBpbiBzdWNoIHNpdHVhdGlvbnMgdmFyaWVzIGJ5IGV2ZW50IHBhY2thZ2U7IHNlZVxuICAgICAgICAvLyBTZWN0aW9uIDUuNC45IGZvciBkZXRhaWxzLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjY2NSNzZWN0aW9uLTQuMS40XG4gICAgICAgIC8vIEVhY2ggZXZlbnQgcGFja2FnZSBNVVNUIHNwZWNpZnkgd2hldGhlciBmb3JrZWQgU1VCU0NSSUJFIHJlcXVlc3RzIGFyZVxuICAgICAgICAvLyBhbGxvd2VkIHRvIGluc3RhbGwgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgc3VjaCBiZWhhdmlvciBpcyBub3QgYWxsb3dlZCwgdGhlIGZpcnN0IHBvdGVudGlhbCBkaWFsb2ctXG4gICAgICAgIC8vIGVzdGFibGlzaGluZyBtZXNzYWdlIHdpbGwgY3JlYXRlIGEgZGlhbG9nLiAgQWxsIHN1YnNlcXVlbnQgTk9USUZZXG4gICAgICAgIC8vIHJlcXVlc3RzIHRoYXQgY29ycmVzcG9uZCB0byB0aGUgU1VCU0NSSUJFIHJlcXVlc3QgKGkuZS4sIGhhdmVcbiAgICAgICAgLy8gbWF0Y2hpbmcgXCJUb1wiLCBcIkZyb21cIiwgXCJDYWxsLUlEXCIsIGFuZCBcIkV2ZW50XCIgaGVhZGVyIGZpZWxkcywgYXMgd2VsbFxuICAgICAgICAvLyBhcyBcIkZyb21cIiBoZWFkZXIgZmllbGQgXCJ0YWdcIiBwYXJhbWV0ZXIgYW5kIFwiRXZlbnRcIiBoZWFkZXIgZmllbGQgXCJpZFwiXG4gICAgICAgIC8vIHBhcmFtZXRlcikgYnV0IHRoYXQgZG8gbm90IG1hdGNoIHRoZSBkaWFsb2cgd291bGQgYmUgcmVqZWN0ZWQgd2l0aCBhXG4gICAgICAgIC8vIDQ4MSByZXNwb25zZS4gIE5vdGUgdGhhdCB0aGUgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIHRoZSBTVUJTQ1JJQkVcbiAgICAgICAgLy8gcmVxdWVzdCBjYW4gYXJyaXZlIGFmdGVyIGEgbWF0Y2hpbmcgTk9USUZZIHJlcXVlc3QgaGFzIGJlZW4gcmVjZWl2ZWQ7XG4gICAgICAgIC8vIHN1Y2ggcmVzcG9uc2VzIG1pZ2h0IG5vdCBjb3JyZWxhdGUgdG8gdGhlIHNhbWUgZGlhbG9nIGVzdGFibGlzaGVkIGJ5XG4gICAgICAgIC8vIHRoZSBOT1RJRlkgcmVxdWVzdC4gIEV4Y2VwdCBhcyByZXF1aXJlZCB0byBjb21wbGV0ZSB0aGUgU1VCU0NSSUJFXG4gICAgICAgIC8vIHRyYW5zYWN0aW9uLCBzdWNoIG5vbi1tYXRjaGluZyAyMDAtY2xhc3MgcmVzcG9uc2VzIGFyZSBpZ25vcmVkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiBpbnN0YWxsaW5nIG9mIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgYnkgd2F5IG9mIGEgc2luZ2xlIGZvcmtlZFxuICAgICAgICAvLyBTVUJTQ1JJQkUgcmVxdWVzdCBpcyBhbGxvd2VkLCB0aGUgc3Vic2NyaWJlciBlc3RhYmxpc2hlcyBhIG5ldyBkaWFsb2dcbiAgICAgICAgLy8gdG93YXJkcyBlYWNoIG5vdGlmaWVyIGJ5IHJldHVybmluZyBhIDIwMC1jbGFzcyByZXNwb25zZSB0byBlYWNoXG4gICAgICAgIC8vIE5PVElGWSByZXF1ZXN0LiAgRWFjaCBkaWFsb2cgaXMgdGhlbiBoYW5kbGVkIGFzIGl0cyBvd24gZW50aXR5IGFuZCBpc1xuICAgICAgICAvLyByZWZyZXNoZWQgaW5kZXBlbmRlbnRseSBvZiB0aGUgb3RoZXIgZGlhbG9ncy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSW4gdGhlIGNhc2UgdGhhdCBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIGFyZSBhbGxvd2VkLCB0aGUgZXZlbnRcbiAgICAgICAgLy8gcGFja2FnZSBNVVNUIHNwZWNpZnkgd2hldGhlciBtZXJnaW5nIG9mIHRoZSBub3RpZmljYXRpb25zIHRvIGZvcm0gYVxuICAgICAgICAvLyBzaW5nbGUgc3RhdGUgaXMgcmVxdWlyZWQsIGFuZCBob3cgc3VjaCBtZXJnaW5nIGlzIHRvIGJlIHBlcmZvcm1lZC5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGl0IGlzIHBvc3NpYmxlIHRoYXQgc29tZSBldmVudCBwYWNrYWdlcyBtYXkgYmUgZGVmaW5lZCBpblxuICAgICAgICAvLyBzdWNoIGEgd2F5IHRoYXQgZWFjaCBkaWFsb2cgaXMgdGllZCB0byBhIG11dHVhbGx5IGV4Y2x1c2l2ZSBzdGF0ZVxuICAgICAgICAvLyB0aGF0IGlzIHVuYWZmZWN0ZWQgYnkgdGhlIG90aGVyIGRpYWxvZ3M7IHRoaXMgTVVTVCBiZSBjbGVhcmx5IHN0YXRlZFxuICAgICAgICAvLyBpZiBpdCBpcyB0aGUgY2FzZS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi01LjQuOVxuICAgICAgICAvLyAqKiogTk9URTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBvbmx5IGZvciBldmVudCBwYWNrYWdlcyB3aGljaFxuICAgICAgICAvLyBkbyBub3QgYWxsb3cgZm9ya2VkIHJlcXVlc3RzIHRvIGluc3RhbGwgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucy5cbiAgICAgICAgLy8gQXMgc3VjaCBhbmQgaW4gYWNjb3JkYW5jZSB3aXRoIHRoZSBzcGVjaWZpY2F0aW9uLCB3ZSBzdG9wIHdhaXRpbmdcbiAgICAgICAgLy8gYW5kIGFueSBmdXR1cmUgTk9USUZZIHJlcXVlc3RzIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCBhIDQ4MS5cbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaWFsb2cgYWxyZWFkeSBjcmVhdGVkLiBUaGlzIGltcGxlbWVudGF0aW9uIG9ubHkgc3VwcG9ydHMgaW5zdGFsbCBvZiBzaW5nbGUgc3Vic2NyaXB0aW9ucy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YWl0Tm90aWZ5U3RvcCgpO1xuICAgICAgICAvLyBVcGRhdGUgZXhwaXJlcy5cbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzID0gc3Vic2NyaXB0aW9uU3RhdGUuZXhwaXJlc1xuICAgICAgICAgICAgPyBNYXRoLm1pbih0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXMsIE1hdGgubWF4KHN1YnNjcmlwdGlvblN0YXRlLmV4cGlyZXMsIDApKVxuICAgICAgICAgICAgOiB0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXM7XG4gICAgICAgIC8vIFVwZGF0ZSBzdWJzY3JpcHRpb24gc3RhdGUuXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJwZW5kaW5nXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSA9IFN1YnNjcmlwdGlvblN0YXRlLlBlbmRpbmc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYWN0aXZlXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSA9IFN1YnNjcmlwdGlvblN0YXRlLkFjdGl2ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSA9IFN1YnNjcmlwdGlvblN0YXRlLlRlcm1pbmF0ZWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIHN0YXRlICR7c3RhdGV9LmApO1xuICAgICAgICB9XG4gICAgICAgIC8vIERpYWxvZ3MgdXNhZ2VzIGFyZSBjcmVhdGVkIHVwb24gY29tcGxldGlvbiBvZiBhIE5PVElGWSB0cmFuc2FjdGlvblxuICAgICAgICAvLyBmb3IgYSBuZXcgc3Vic2NyaXB0aW9uLCB1bmxlc3MgdGhlIE5PVElGWSByZXF1ZXN0IGNvbnRhaW5zIGFcbiAgICAgICAgLy8gXCJTdWJzY3JpcHRpb24tU3RhdGVcIiBvZiBcInRlcm1pbmF0ZWQuXCJcbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjQuMVxuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25TdGF0ZSAhPT0gU3Vic2NyaXB0aW9uU3RhdGUuVGVybWluYXRlZCkge1xuICAgICAgICAgICAgLy8gQmVjYXVzZSB0aGUgZGlhbG9nIHVzYWdlIGlzIGVzdGFibGlzaGVkIGJ5IHRoZSBOT1RJRlkgcmVxdWVzdCwgdGhlXG4gICAgICAgICAgICAvLyByb3V0ZSBzZXQgYXQgdGhlIHN1YnNjcmliZXIgaXMgdGFrZW4gZnJvbSB0aGUgTk9USUZZIHJlcXVlc3QgaXRzZWxmLFxuICAgICAgICAgICAgLy8gYXMgb3Bwb3NlZCB0byB0aGUgcm91dGUgc2V0IHByZXNlbnQgaW4gdGhlIDIwMC1jbGFzcyByZXNwb25zZSB0byB0aGVcbiAgICAgICAgICAgIC8vIFNVQlNDUklCRSByZXF1ZXN0LlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjQuMVxuICAgICAgICAgICAgY29uc3QgZGlhbG9nU3RhdGUgPSBTdWJzY3JpcHRpb25EaWFsb2cuaW5pdGlhbERpYWxvZ1N0YXRlRm9yU3Vic2NyaXB0aW9uKHRoaXMubWVzc2FnZSwgdWFzLm1lc3NhZ2UpO1xuICAgICAgICAgICAgLy8gU3Vic2NyaXB0aW9uIEluaXRpYXRlZCEgOilcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nID0gbmV3IFN1YnNjcmlwdGlvbkRpYWxvZyh0aGlzLnN1YnNjcmlwdGlvbkV2ZW50LCB0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXMsIHRoaXMuc3Vic2NyaXB0aW9uU3RhdGUsIHRoaXMuY29yZSwgZGlhbG9nU3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlbGVnYXRlLlxuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uTm90aWZ5KSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gdWFzO1xuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy5kaWFsb2c7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uTm90aWZ5KHsgcmVxdWVzdCwgc3Vic2NyaXB0aW9uIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdWFzLmFjY2VwdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdhaXROb3RpZnlTdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLk4pIHtcbiAgICAgICAgICAgIC8vIEFkZCBvdXJzZWx2ZXMgdG8gdGhlIGNvcmUncyBzdWJzY3JpYmVyIG1hcC5cbiAgICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIHRoZSBjb3JlIHRvIHJvdXRlIG91dCBvZiBkaWFsb2cgTk9USUZZIG1lc3NhZ2VzIHRvIHVzLlxuICAgICAgICAgICAgdGhpcy5jb3JlLnN1YnNjcmliZXJzLnNldCh0aGlzLnN1YnNjcmliZXJJZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLk4gPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudGltZXJOKCksIFRpbWVycy5USU1FUl9OKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3YWl0Tm90aWZ5U3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuTikge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIG91cnNlbHZlcyB0byB0aGUgY29yZSdzIHN1YnNjcmliZXIgbWFwLlxuICAgICAgICAgICAgLy8gQW55IGZ1dHVyZSBvdXQgb2YgZGlhbG9nIE5PVElGWSBtZXNzYWdlcyB3aWxsIGJlIHJlamVjdGVkIHdpdGggYSA0ODEuXG4gICAgICAgICAgICB0aGlzLmNvcmUuc3Vic2NyaWJlcnMuZGVsZXRlKHRoaXMuc3Vic2NyaWJlcklkKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLk4pO1xuICAgICAgICAgICAgdGhpcy5OID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY2VpdmUgYSByZXNwb25zZSBmcm9tIHRoZSB0cmFuc2FjdGlvbiBsYXllci5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIEluY29taW5nIHJlc3BvbnNlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgcmVjZWl2ZVJlc3BvbnNlKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmF1dGhlbnRpY2F0aW9uR3VhcmQobWVzc2FnZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdGF0dXNDb2RlICYmIG1lc3NhZ2Uuc3RhdHVzQ29kZSA+PSAyMDAgJiYgbWVzc2FnZS5zdGF0dXNDb2RlIDwgMzAwKSB7XG4gICAgICAgICAgICAvLyAgVGhlIFwiRXhwaXJlc1wiIGhlYWRlciBmaWVsZCBpbiBhIDIwMC1jbGFzcyByZXNwb25zZSB0byBTVUJTQ1JJQkVcbiAgICAgICAgICAgIC8vICByZXF1ZXN0IGluZGljYXRlcyB0aGUgYWN0dWFsIGR1cmF0aW9uIGZvciB3aGljaCB0aGUgc3Vic2NyaXB0aW9uIHdpbGxcbiAgICAgICAgICAgIC8vICByZW1haW4gYWN0aXZlICh1bmxlc3MgcmVmcmVzaGVkKS4gIFRoZSByZWNlaXZlZCB2YWx1ZSBtaWdodCBiZVxuICAgICAgICAgICAgLy8gIHNtYWxsZXIgdGhhbiB0aGUgdmFsdWUgaW5kaWNhdGVkIGluIHRoZSBTVUJTQ1JJQkUgcmVxdWVzdCBidXQgY2Fubm90XG4gICAgICAgICAgICAvLyAgYmUgbGFyZ2VyOyBzZWUgU2VjdGlvbiA0LjIuMSBmb3IgZGV0YWlscy5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NjY1I3NlY3Rpb24tNC4xLjIuMVxuICAgICAgICAgICAgLy8gVGhlIFwiRXhwaXJlc1wiIHZhbHVlcyBwcmVzZW50IGluIFNVQlNDUklCRSAyMDAtY2xhc3MgcmVzcG9uc2VzIGJlaGF2ZVxuICAgICAgICAgICAgLy8gaW4gdGhlIHNhbWUgd2F5IGFzIHRoZXkgZG8gaW4gUkVHSVNURVIgcmVzcG9uc2VzOiB0aGUgc2VydmVyIE1BWVxuICAgICAgICAgICAgLy8gc2hvcnRlbiB0aGUgaW50ZXJ2YWwgYnV0IE1VU1QgTk9UIGxlbmd0aGVuIGl0LlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgIElmIHRoZSBkdXJhdGlvbiBzcGVjaWZpZWQgaW4gYSBTVUJTQ1JJQkUgcmVxdWVzdCBpcyB1bmFjY2VwdGFibHlcbiAgICAgICAgICAgIC8vICAgIHNob3J0LCB0aGUgbm90aWZpZXIgbWF5IGJlIGFibGUgdG8gc2VuZCBhIDQyMyByZXNwb25zZSwgYXNcbiAgICAgICAgICAgIC8vICAgIGRlc2NyaWJlZCBlYXJsaWVyIGluIHRoaXMgc2VjdGlvbi5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAyMDAtY2xhc3MgcmVzcG9uc2VzIHRvIFNVQlNDUklCRSByZXF1ZXN0cyB3aWxsIG5vdCBnZW5lcmFsbHkgY29udGFpblxuICAgICAgICAgICAgLy8gYW55IHVzZWZ1bCBpbmZvcm1hdGlvbiBiZXlvbmQgc3Vic2NyaXB0aW9uIGR1cmF0aW9uOyB0aGVpciBwcmltYXJ5XG4gICAgICAgICAgICAvLyBwdXJwb3NlIGlzIHRvIHNlcnZlIGFzIGEgcmVsaWFiaWxpdHkgbWVjaGFuaXNtLiAgU3RhdGUgaW5mb3JtYXRpb25cbiAgICAgICAgICAgIC8vIHdpbGwgYmUgY29tbXVuaWNhdGVkIHZpYSBhIHN1YnNlcXVlbnQgTk9USUZZIHJlcXVlc3QgZnJvbSB0aGVcbiAgICAgICAgICAgIC8vIG5vdGlmaWVyLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjIuMS4xXG4gICAgICAgICAgICBjb25zdCBleHBpcmVzID0gbWVzc2FnZS5nZXRIZWFkZXIoXCJFeHBpcmVzXCIpO1xuICAgICAgICAgICAgaWYgKCFleHBpcmVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIkV4cGlyZXMgaGVhZGVyIG1pc3NpbmcgaW4gYSAyMDAtY2xhc3MgcmVzcG9uc2UgdG8gU1VCU0NSSUJFXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uRXhwaXJlc1JlY2VpdmVkID0gTnVtYmVyKGV4cGlyZXMpO1xuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25FeHBpcmVzUmVjZWl2ZWQgPiB0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXNSZXF1ZXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIkV4cGlyZXMgaGVhZGVyIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFNVQlNDUklCRSB3aXRoIGEgaGlnaGVyIHZhbHVlIHRoYW4gdGhlIG9uZSBpbiB0aGUgcmVxdWVzdFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbkV4cGlyZXNSZWNlaXZlZCA8IHRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXMgPSBzdWJzY3JpcHRpb25FeHBpcmVzUmVjZWl2ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgYSBOT1RJRlkgYXJyaXZlZCBiZWZvcmUgMjAwLWNsYXNzIHJlc3BvbnNlIGEgZGlhbG9nIG1heSBoYXZlIGJlZW4gY3JlYXRlZC5cbiAgICAgICAgICAgIC8vIFVwZGF0ZWQgdGhlIGRpYWxvZ3MgZXhwaXJhdGlvbiBvbmx5IGlmIHRoaXMgaW5kaWNhdGVzIGVhcmxpZXIgZXhwaXJhdGlvbi5cbiAgICAgICAgICAgIGlmICh0aGlzLmRpYWxvZykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpYWxvZy5zdWJzY3JpcHRpb25FeHBpcmVzID4gdGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLnN1YnNjcmlwdGlvbkV4cGlyZXMgPSB0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXR1c0NvZGUgJiYgbWVzc2FnZS5zdGF0dXNDb2RlID49IDMwMCAmJiBtZXNzYWdlLnN0YXR1c0NvZGUgPCA3MDApIHtcbiAgICAgICAgICAgIHRoaXMud2FpdE5vdGlmeVN0b3AoKTsgLy8gTm8gTk9USUZZIHdpbGwgYmUgc2VudCBhZnRlciBhIG5lZ2F0aXZlIGZpbmFsIHJlc3BvbnNlLlxuICAgICAgICB9XG4gICAgICAgIHN1cGVyLnJlY2VpdmVSZXNwb25zZShtZXNzYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVG8gZW5zdXJlIHRoYXQgc3Vic2NyaWJlcnMgZG8gbm90IHdhaXQgaW5kZWZpbml0ZWx5IGZvciBhXG4gICAgICogc3Vic2NyaXB0aW9uIHRvIGJlIGVzdGFibGlzaGVkLCBhIHN1YnNjcmliZXIgc3RhcnRzIGEgVGltZXIgTiwgc2V0IHRvXG4gICAgICogNjQqVDEsIHdoZW4gaXQgc2VuZHMgYSBTVUJTQ1JJQkUgcmVxdWVzdC4gIElmIHRoaXMgVGltZXIgTiBleHBpcmVzXG4gICAgICogcHJpb3IgdG8gdGhlIHJlY2VpcHQgb2YgYSBOT1RJRlkgcmVxdWVzdCwgdGhlIHN1YnNjcmliZXIgY29uc2lkZXJzXG4gICAgICogdGhlIHN1YnNjcmlwdGlvbiBmYWlsZWQsIGFuZCBjbGVhbnMgdXAgYW55IHN0YXRlIGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgKiBzdWJzY3JpcHRpb24gYXR0ZW1wdC5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjY2NSNzZWN0aW9uLTQuMS4yLjRcbiAgICAgKi9cbiAgICB0aW1lck4oKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYFRpbWVyIE4gZXhwaXJlZCBmb3IgU1VCU0NSSUJFIHVzZXIgYWdlbnQgY2xpZW50LiBUaW1lZCBvdXQgd2FpdGluZyBmb3IgTk9USUZZLmApO1xuICAgICAgICB0aGlzLndhaXROb3RpZnlTdG9wKCk7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25Ob3RpZnlUaW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uTm90aWZ5VGltZW91dCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgRGlhbG9nLCBTZXNzaW9uRGlhbG9nIH0gZnJvbSBcIi4uL2RpYWxvZ3NcIjtcbmltcG9ydCB7IFRyYW5zYWN0aW9uU3RhdGVFcnJvciB9IGZyb20gXCIuLi9leGNlcHRpb25zXCI7XG5pbXBvcnQgeyBTaWduYWxpbmdTdGF0ZSB9IGZyb20gXCIuLi9zZXNzaW9uXCI7XG5pbXBvcnQgeyBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IEFsbG93ZWRNZXRob2RzIH0gZnJvbSBcIi4uL3VzZXItYWdlbnQtY29yZS9hbGxvd2VkLW1ldGhvZHNcIjtcbmltcG9ydCB7IFVzZXJBZ2VudFNlcnZlciB9IGZyb20gXCIuL3VzZXItYWdlbnQtc2VydmVyXCI7XG4vKipcbiAqIElOVklURSBVQVMuXG4gKiBAcmVtYXJrc1xuICogMTMgSW5pdGlhdGluZyBhIFNlc3Npb25cbiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTNcbiAqIDEzLjEgT3ZlcnZpZXdcbiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMVxuICogMTMuMyBVQVMgUHJvY2Vzc2luZ1xuICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4zXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZpdGVVc2VyQWdlbnRTZXJ2ZXIgZXh0ZW5kcyBVc2VyQWdlbnRTZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKSB7XG4gICAgICAgIHN1cGVyKEludml0ZVNlcnZlclRyYW5zYWN0aW9uLCBjb3JlLCBtZXNzYWdlLCBkZWxlZ2F0ZSk7XG4gICAgICAgIHRoaXMuY29yZSA9IGNvcmU7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmVhcmx5RGlhbG9nKSB7XG4gICAgICAgICAgICB0aGlzLmVhcmx5RGlhbG9nLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIDEzLjMuMS40IFRoZSBJTlZJVEUgaXMgQWNjZXB0ZWRcbiAgICAgKiBUaGUgVUFTIGNvcmUgZ2VuZXJhdGVzIGEgMnh4IHJlc3BvbnNlLiAgVGhpcyByZXNwb25zZSBlc3RhYmxpc2hlcyBhXG4gICAgICogZGlhbG9nLCBhbmQgdGhlcmVmb3JlIGZvbGxvd3MgdGhlIHByb2NlZHVyZXMgb2YgU2VjdGlvbiAxMi4xLjEgaW5cbiAgICAgKiBhZGRpdGlvbiB0byB0aG9zZSBvZiBTZWN0aW9uIDguMi42LlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMy4xLjRcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFjY2VwdCBvcHRpb25zIGJ1Y2tldC5cbiAgICAgKi9cbiAgICBhY2NlcHQob3B0aW9ucyA9IHsgc3RhdHVzQ29kZTogMjAwIH0pIHtcbiAgICAgICAgaWYgKCF0aGlzLmFjY2VwdGFibGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUcmFuc2FjdGlvblN0YXRlRXJyb3IoYCR7dGhpcy5tZXNzYWdlLm1ldGhvZH0gbm90IGFjY2VwdGFibGUgaW4gc3RhdGUgJHt0aGlzLnRyYW5zYWN0aW9uLnN0YXRlfS5gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGlzIHJlc3BvbnNlIGVzdGFibGlzaGVzIGEgZGlhbG9nLi4uXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMy4xLjRcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpcm1lZERpYWxvZykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWFybHlEaWFsb2cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVhcmx5RGlhbG9nLmNvbmZpcm0oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1lZERpYWxvZyA9IHRoaXMuZWFybHlEaWFsb2c7XG4gICAgICAgICAgICAgICAgdGhpcy5lYXJseURpYWxvZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy50cmFuc2FjdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAoISh0cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEludml0ZVNlcnZlclRyYW5zYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2FjdGlvbiBub3QgaW5zdGFuY2Ugb2YgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24uXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IERpYWxvZy5pbml0aWFsRGlhbG9nU3RhdGVGb3JVc2VyQWdlbnRTZXJ2ZXIodGhpcy5tZXNzYWdlLCB0aGlzLnRvVGFnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1lZERpYWxvZyA9IG5ldyBTZXNzaW9uRGlhbG9nKHRyYW5zYWN0aW9uLCB0aGlzLmNvcmUsIHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIGEgVUFTIHJlc3BvbmRzIHRvIGEgcmVxdWVzdCB3aXRoIGEgcmVzcG9uc2UgdGhhdCBlc3RhYmxpc2hlcyBhXG4gICAgICAgIC8vIGRpYWxvZyAoc3VjaCBhcyBhIDJ4eCB0byBJTlZJVEUpLCB0aGUgVUFTIE1VU1QgY29weSBhbGwgUmVjb3JkLVJvdXRlXG4gICAgICAgIC8vIGhlYWRlciBmaWVsZCB2YWx1ZXMgZnJvbSB0aGUgcmVxdWVzdCBpbnRvIHRoZSByZXNwb25zZSAoaW5jbHVkaW5nIHRoZVxuICAgICAgICAvLyBVUklzLCBVUkkgcGFyYW1ldGVycywgYW5kIGFueSBSZWNvcmQtUm91dGUgaGVhZGVyIGZpZWxkIHBhcmFtZXRlcnMsXG4gICAgICAgIC8vIHdoZXRoZXIgdGhleSBhcmUga25vd24gb3IgdW5rbm93biB0byB0aGUgVUFTKSBhbmQgTVVTVCBtYWludGFpbiB0aGVcbiAgICAgICAgLy8gb3JkZXIgb2YgdGhvc2UgdmFsdWVzLiAgVGhlIFVBUyBNVVNUIGFkZCBhIENvbnRhY3QgaGVhZGVyIGZpZWxkIHRvXG4gICAgICAgIC8vIHRoZSByZXNwb25zZS4gIFRoZSBDb250YWN0IGhlYWRlciBmaWVsZCBjb250YWlucyBhbiBhZGRyZXNzIHdoZXJlIHRoZVxuICAgICAgICAvLyBVQVMgd291bGQgbGlrZSB0byBiZSBjb250YWN0ZWQgZm9yIHN1YnNlcXVlbnQgcmVxdWVzdHMgaW4gdGhlIGRpYWxvZ1xuICAgICAgICAvLyAod2hpY2ggaW5jbHVkZXMgdGhlIEFDSyBmb3IgYSAyeHggcmVzcG9uc2UgaW4gdGhlIGNhc2Ugb2YgYW4gSU5WSVRFKS5cbiAgICAgICAgLy8gR2VuZXJhbGx5LCB0aGUgaG9zdCBwb3J0aW9uIG9mIHRoaXMgVVJJIGlzIHRoZSBJUCBhZGRyZXNzIG9yIEZRRE4gb2ZcbiAgICAgICAgLy8gdGhlIGhvc3QuICBUaGUgVVJJIHByb3ZpZGVkIGluIHRoZSBDb250YWN0IGhlYWRlciBmaWVsZCBNVVNUIGJlIGEgU0lQXG4gICAgICAgIC8vIG9yIFNJUFMgVVJJLiAgSWYgdGhlIHJlcXVlc3QgdGhhdCBpbml0aWF0ZWQgdGhlIGRpYWxvZyBjb250YWluZWQgYVxuICAgICAgICAvLyBTSVBTIFVSSSBpbiB0aGUgUmVxdWVzdC1VUkkgb3IgaW4gdGhlIHRvcCBSZWNvcmQtUm91dGUgaGVhZGVyIGZpZWxkXG4gICAgICAgIC8vIHZhbHVlLCBpZiB0aGVyZSB3YXMgYW55LCBvciB0aGUgQ29udGFjdCBoZWFkZXIgZmllbGQgaWYgdGhlcmUgd2FzIG5vXG4gICAgICAgIC8vIFJlY29yZC1Sb3V0ZSBoZWFkZXIgZmllbGQsIHRoZSBDb250YWN0IGhlYWRlciBmaWVsZCBpbiB0aGUgcmVzcG9uc2VcbiAgICAgICAgLy8gTVVTVCBiZSBhIFNJUFMgVVJJLiAgVGhlIFVSSSBTSE9VTEQgaGF2ZSBnbG9iYWwgc2NvcGUgKHRoYXQgaXMsIHRoZVxuICAgICAgICAvLyBzYW1lIFVSSSBjYW4gYmUgdXNlZCBpbiBtZXNzYWdlcyBvdXRzaWRlIHRoaXMgZGlhbG9nKS4gIFRoZSBzYW1lIHdheSxcbiAgICAgICAgLy8gdGhlIHNjb3BlIG9mIHRoZSBVUkkgaW4gdGhlIENvbnRhY3QgaGVhZGVyIGZpZWxkIG9mIHRoZSBJTlZJVEUgaXMgbm90XG4gICAgICAgIC8vIGxpbWl0ZWQgdG8gdGhpcyBkaWFsb2cgZWl0aGVyLiAgSXQgY2FuIHRoZXJlZm9yZSBiZSB1c2VkIGluIG1lc3NhZ2VzXG4gICAgICAgIC8vIHRvIHRoZSBVQUMgZXZlbiBvdXRzaWRlIHRoaXMgZGlhbG9nLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEyLjEuMVxuICAgICAgICBjb25zdCByZWNvcmRSb3V0ZUhlYWRlciA9IHRoaXMubWVzc2FnZS5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLm1hcCgoaGVhZGVyKSA9PiBgUmVjb3JkLVJvdXRlOiAke2hlYWRlcn1gKTtcbiAgICAgICAgY29uc3QgY29udGFjdEhlYWRlciA9IGBDb250YWN0OiAke3RoaXMuY29yZS5jb25maWd1cmF0aW9uLmNvbnRhY3QudG9TdHJpbmcoKX1gO1xuICAgICAgICAvLyBBIDJ4eCByZXNwb25zZSB0byBhbiBJTlZJVEUgU0hPVUxEIGNvbnRhaW4gdGhlIEFsbG93IGhlYWRlciBmaWVsZCBhbmRcbiAgICAgICAgLy8gdGhlIFN1cHBvcnRlZCBoZWFkZXIgZmllbGQsIGFuZCBNQVkgY29udGFpbiB0aGUgQWNjZXB0IGhlYWRlciBmaWVsZC5cbiAgICAgICAgLy8gSW5jbHVkaW5nIHRoZXNlIGhlYWRlciBmaWVsZHMgYWxsb3dzIHRoZSBVQUMgdG8gZGV0ZXJtaW5lIHRoZVxuICAgICAgICAvLyBmZWF0dXJlcyBhbmQgZXh0ZW5zaW9ucyBzdXBwb3J0ZWQgYnkgdGhlIFVBUyBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZVxuICAgICAgICAvLyBjYWxsLCB3aXRob3V0IHByb2JpbmcuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMy4xLjRcbiAgICAgICAgLy8gRklYTUU6IFRPRE86IFRoaXMgc2hvdWxkIG5vdCBiZSBoYXJkIGNvZGVkLlxuICAgICAgICBjb25zdCBhbGxvd0hlYWRlciA9IFwiQWxsb3c6IFwiICsgQWxsb3dlZE1ldGhvZHMudG9TdHJpbmcoKTtcbiAgICAgICAgLy8gRklYTUU6IFRPRE86IFN1cHBvcnRlZCBoZWFkZXIgKHNlZSByZXBseSgpKVxuICAgICAgICAvLyBGSVhNRTogVE9ETzogQWNjZXB0IGhlYWRlclxuICAgICAgICAvLyBJZiB0aGUgSU5WSVRFIHJlcXVlc3QgY29udGFpbmVkIGFuIG9mZmVyLCBhbmQgdGhlIFVBUyBoYWQgbm90IHlldFxuICAgICAgICAvLyBzZW50IGFuIGFuc3dlciwgdGhlIDJ4eCBNVVNUIGNvbnRhaW4gYW4gYW5zd2VyLiAgSWYgdGhlIElOVklURSBkaWRcbiAgICAgICAgLy8gbm90IGNvbnRhaW4gYW4gb2ZmZXIsIHRoZSAyeHggTVVTVCBjb250YWluIGFuIG9mZmVyIGlmIHRoZSBVQVMgaGFkXG4gICAgICAgIC8vIG5vdCB5ZXQgc2VudCBhbiBvZmZlci5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4zLjEuNFxuICAgICAgICBpZiAoIW9wdGlvbnMuYm9keSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlybWVkRGlhbG9nLnNpZ25hbGluZ1N0YXRlID09PSBTaWduYWxpbmdTdGF0ZS5TdGFibGUpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmJvZHkgPSB0aGlzLmNvbmZpcm1lZERpYWxvZy5hbnN3ZXI7IC8vIHJlc2VuZCB0aGUgYW5zd2VyIHNlbnQgaW4gcHJvdmlzaW9uYWwgcmVzcG9uc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY29uZmlybWVkRGlhbG9nLnNpZ25hbGluZ1N0YXRlID09PSBTaWduYWxpbmdTdGF0ZS5Jbml0aWFsIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maXJtZWREaWFsb2cuc2lnbmFsaW5nU3RhdGUgPT09IFNpZ25hbGluZ1N0YXRlLkhhdmVSZW1vdGVPZmZlcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlc3BvbnNlIG11c3QgaGF2ZSBhIGJvZHkuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMuc3RhdHVzQ29kZSA9IG9wdGlvbnMuc3RhdHVzQ29kZSB8fCAyMDA7XG4gICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzID0gb3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW107XG4gICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzID0gb3B0aW9ucy5leHRyYUhlYWRlcnMuY29uY2F0KHJlY29yZFJvdXRlSGVhZGVyKTtcbiAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMucHVzaChhbGxvd0hlYWRlcik7XG4gICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzLnB1c2goY29udGFjdEhlYWRlcik7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gc3VwZXIuYWNjZXB0KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5jb25maXJtZWREaWFsb2c7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UpLCB7IHNlc3Npb24gfSk7XG4gICAgICAgIC8vIFVwZGF0ZSBkaWFsb2cgc2lnbmFsaW5nIHN0YXRlXG4gICAgICAgIGlmIChvcHRpb25zLmJvZHkpIHtcbiAgICAgICAgICAgIC8vIE9uY2UgdGhlIFVBUyBoYXMgc2VudCBvciByZWNlaXZlZCBhbiBhbnN3ZXIgdG8gdGhlIGluaXRpYWxcbiAgICAgICAgICAgIC8vIG9mZmVyLCBpdCBNVVNUIE5PVCBnZW5lcmF0ZSBzdWJzZXF1ZW50IG9mZmVycyBpbiBhbnkgcmVzcG9uc2VzXG4gICAgICAgICAgICAvLyB0byB0aGUgaW5pdGlhbCBJTlZJVEUuICBUaGlzIG1lYW5zIHRoYXQgYSBVQVMgYmFzZWQgb24gdGhpc1xuICAgICAgICAgICAgLy8gc3BlY2lmaWNhdGlvbiBhbG9uZSBjYW4gbmV2ZXIgZ2VuZXJhdGUgc3Vic2VxdWVudCBvZmZlcnMgdW50aWxcbiAgICAgICAgICAgIC8vIGNvbXBsZXRpb24gb2YgdGhlIGluaXRpYWwgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjIuMVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlybWVkRGlhbG9nLnNpZ25hbGluZ1N0YXRlICE9PSBTaWduYWxpbmdTdGF0ZS5TdGFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1lZERpYWxvZy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24ob3B0aW9ucy5ib2R5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiAxMy4zLjEuMSBQcm9ncmVzc1xuICAgICAqIElmIHRoZSBVQVMgaXMgbm90IGFibGUgdG8gYW5zd2VyIHRoZSBpbnZpdGF0aW9uIGltbWVkaWF0ZWx5LCBpdCBjYW5cbiAgICAgKiBjaG9vc2UgdG8gaW5kaWNhdGUgc29tZSBraW5kIG9mIHByb2dyZXNzIHRvIHRoZSBVQUMgKGZvciBleGFtcGxlLCBhblxuICAgICAqIGluZGljYXRpb24gdGhhdCBhIHBob25lIGlzIHJpbmdpbmcpLiAgVGhpcyBpcyBhY2NvbXBsaXNoZWQgd2l0aCBhXG4gICAgICogcHJvdmlzaW9uYWwgcmVzcG9uc2UgYmV0d2VlbiAxMDEgYW5kIDE5OS4gIFRoZXNlIHByb3Zpc2lvbmFsXG4gICAgICogcmVzcG9uc2VzIGVzdGFibGlzaCBlYXJseSBkaWFsb2dzIGFuZCB0aGVyZWZvcmUgZm9sbG93IHRoZSBwcm9jZWR1cmVzXG4gICAgICogb2YgU2VjdGlvbiAxMi4xLjEgaW4gYWRkaXRpb24gdG8gdGhvc2Ugb2YgU2VjdGlvbiA4LjIuNi4gIEEgVUFTIE1BWVxuICAgICAqIHNlbmQgYXMgbWFueSBwcm92aXNpb25hbCByZXNwb25zZXMgYXMgaXQgbGlrZXMuICBFYWNoIG9mIHRoZXNlIE1VU1RcbiAgICAgKiBpbmRpY2F0ZSB0aGUgc2FtZSBkaWFsb2cgSUQuICBIb3dldmVyLCB0aGVzZSB3aWxsIG5vdCBiZSBkZWxpdmVyZWRcbiAgICAgKiByZWxpYWJseS5cbiAgICAgKlxuICAgICAqIElmIHRoZSBVQVMgZGVzaXJlcyBhbiBleHRlbmRlZCBwZXJpb2Qgb2YgdGltZSB0byBhbnN3ZXIgdGhlIElOVklURSxcbiAgICAgKiBpdCB3aWxsIG5lZWQgdG8gYXNrIGZvciBhbiBcImV4dGVuc2lvblwiIGluIG9yZGVyIHRvIHByZXZlbnQgcHJveGllc1xuICAgICAqIGZyb20gY2FuY2VsaW5nIHRoZSB0cmFuc2FjdGlvbi4gIEEgcHJveHkgaGFzIHRoZSBvcHRpb24gb2YgY2FuY2VsaW5nXG4gICAgICogYSB0cmFuc2FjdGlvbiB3aGVuIHRoZXJlIGlzIGEgZ2FwIG9mIDMgbWludXRlcyBiZXR3ZWVuIHJlc3BvbnNlcyBpbiBhXG4gICAgICogdHJhbnNhY3Rpb24uICBUbyBwcmV2ZW50IGNhbmNlbGxhdGlvbiwgdGhlIFVBUyBNVVNUIHNlbmQgYSBub24tMTAwXG4gICAgICogcHJvdmlzaW9uYWwgcmVzcG9uc2UgYXQgZXZlcnkgbWludXRlLCB0byBoYW5kbGUgdGhlIHBvc3NpYmlsaXR5IG9mXG4gICAgICogbG9zdCBwcm92aXNpb25hbCByZXNwb25zZXMuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4zLjEuMVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gUHJvZ3Jlc3Mgb3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgcHJvZ3Jlc3Mob3B0aW9ucyA9IHsgc3RhdHVzQ29kZTogMTgwIH0pIHtcbiAgICAgICAgaWYgKCF0aGlzLnByb2dyZXNzYWJsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRyYW5zYWN0aW9uU3RhdGVFcnJvcihgJHt0aGlzLm1lc3NhZ2UubWV0aG9kfSBub3QgcHJvZ3Jlc3NhYmxlIGluIHN0YXRlICR7dGhpcy50cmFuc2FjdGlvbi5zdGF0ZX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyByZXNwb25zZSBlc3RhYmxpc2hlcyBhIGRpYWxvZy4uLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjMuMS40XG4gICAgICAgIGlmICghdGhpcy5lYXJseURpYWxvZykge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLnRyYW5zYWN0aW9uO1xuICAgICAgICAgICAgaWYgKCEodHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2FjdGlvbiBub3QgaW5zdGFuY2Ugb2YgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBEaWFsb2cuaW5pdGlhbERpYWxvZ1N0YXRlRm9yVXNlckFnZW50U2VydmVyKHRoaXMubWVzc2FnZSwgdGhpcy50b1RhZywgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmVhcmx5RGlhbG9nID0gbmV3IFNlc3Npb25EaWFsb2codHJhbnNhY3Rpb24sIHRoaXMuY29yZSwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdoZW4gYSBVQVMgcmVzcG9uZHMgdG8gYSByZXF1ZXN0IHdpdGggYSByZXNwb25zZSB0aGF0IGVzdGFibGlzaGVzIGFcbiAgICAgICAgLy8gZGlhbG9nIChzdWNoIGFzIGEgMnh4IHRvIElOVklURSksIHRoZSBVQVMgTVVTVCBjb3B5IGFsbCBSZWNvcmQtUm91dGVcbiAgICAgICAgLy8gaGVhZGVyIGZpZWxkIHZhbHVlcyBmcm9tIHRoZSByZXF1ZXN0IGludG8gdGhlIHJlc3BvbnNlIChpbmNsdWRpbmcgdGhlXG4gICAgICAgIC8vIFVSSXMsIFVSSSBwYXJhbWV0ZXJzLCBhbmQgYW55IFJlY29yZC1Sb3V0ZSBoZWFkZXIgZmllbGQgcGFyYW1ldGVycyxcbiAgICAgICAgLy8gd2hldGhlciB0aGV5IGFyZSBrbm93biBvciB1bmtub3duIHRvIHRoZSBVQVMpIGFuZCBNVVNUIG1haW50YWluIHRoZVxuICAgICAgICAvLyBvcmRlciBvZiB0aG9zZSB2YWx1ZXMuICBUaGUgVUFTIE1VU1QgYWRkIGEgQ29udGFjdCBoZWFkZXIgZmllbGQgdG9cbiAgICAgICAgLy8gdGhlIHJlc3BvbnNlLiAgVGhlIENvbnRhY3QgaGVhZGVyIGZpZWxkIGNvbnRhaW5zIGFuIGFkZHJlc3Mgd2hlcmUgdGhlXG4gICAgICAgIC8vIFVBUyB3b3VsZCBsaWtlIHRvIGJlIGNvbnRhY3RlZCBmb3Igc3Vic2VxdWVudCByZXF1ZXN0cyBpbiB0aGUgZGlhbG9nXG4gICAgICAgIC8vICh3aGljaCBpbmNsdWRlcyB0aGUgQUNLIGZvciBhIDJ4eCByZXNwb25zZSBpbiB0aGUgY2FzZSBvZiBhbiBJTlZJVEUpLlxuICAgICAgICAvLyBHZW5lcmFsbHksIHRoZSBob3N0IHBvcnRpb24gb2YgdGhpcyBVUkkgaXMgdGhlIElQIGFkZHJlc3Mgb3IgRlFETiBvZlxuICAgICAgICAvLyB0aGUgaG9zdC4gIFRoZSBVUkkgcHJvdmlkZWQgaW4gdGhlIENvbnRhY3QgaGVhZGVyIGZpZWxkIE1VU1QgYmUgYSBTSVBcbiAgICAgICAgLy8gb3IgU0lQUyBVUkkuICBJZiB0aGUgcmVxdWVzdCB0aGF0IGluaXRpYXRlZCB0aGUgZGlhbG9nIGNvbnRhaW5lZCBhXG4gICAgICAgIC8vIFNJUFMgVVJJIGluIHRoZSBSZXF1ZXN0LVVSSSBvciBpbiB0aGUgdG9wIFJlY29yZC1Sb3V0ZSBoZWFkZXIgZmllbGRcbiAgICAgICAgLy8gdmFsdWUsIGlmIHRoZXJlIHdhcyBhbnksIG9yIHRoZSBDb250YWN0IGhlYWRlciBmaWVsZCBpZiB0aGVyZSB3YXMgbm9cbiAgICAgICAgLy8gUmVjb3JkLVJvdXRlIGhlYWRlciBmaWVsZCwgdGhlIENvbnRhY3QgaGVhZGVyIGZpZWxkIGluIHRoZSByZXNwb25zZVxuICAgICAgICAvLyBNVVNUIGJlIGEgU0lQUyBVUkkuICBUaGUgVVJJIFNIT1VMRCBoYXZlIGdsb2JhbCBzY29wZSAodGhhdCBpcywgdGhlXG4gICAgICAgIC8vIHNhbWUgVVJJIGNhbiBiZSB1c2VkIGluIG1lc3NhZ2VzIG91dHNpZGUgdGhpcyBkaWFsb2cpLiAgVGhlIHNhbWUgd2F5LFxuICAgICAgICAvLyB0aGUgc2NvcGUgb2YgdGhlIFVSSSBpbiB0aGUgQ29udGFjdCBoZWFkZXIgZmllbGQgb2YgdGhlIElOVklURSBpcyBub3RcbiAgICAgICAgLy8gbGltaXRlZCB0byB0aGlzIGRpYWxvZyBlaXRoZXIuICBJdCBjYW4gdGhlcmVmb3JlIGJlIHVzZWQgaW4gbWVzc2FnZXNcbiAgICAgICAgLy8gdG8gdGhlIFVBQyBldmVuIG91dHNpZGUgdGhpcyBkaWFsb2cuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMS4xXG4gICAgICAgIGNvbnN0IHJlY29yZFJvdXRlSGVhZGVyID0gdGhpcy5tZXNzYWdlLmdldEhlYWRlcnMoXCJyZWNvcmQtcm91dGVcIikubWFwKChoZWFkZXIpID0+IGBSZWNvcmQtUm91dGU6ICR7aGVhZGVyfWApO1xuICAgICAgICBjb25zdCBjb250YWN0SGVhZGVyID0gYENvbnRhY3Q6ICR7dGhpcy5jb3JlLmNvbmZpZ3VyYXRpb24uY29udGFjdH1gO1xuICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycyA9IG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdO1xuICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycyA9IG9wdGlvbnMuZXh0cmFIZWFkZXJzLmNvbmNhdChyZWNvcmRSb3V0ZUhlYWRlcik7XG4gICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzLnB1c2goY29udGFjdEhlYWRlcik7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gc3VwZXIucHJvZ3Jlc3Mob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLmVhcmx5RGlhbG9nO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlKSwgeyBzZXNzaW9uIH0pO1xuICAgICAgICAvLyBVcGRhdGUgZGlhbG9nIHNpZ25hbGluZyBzdGF0ZVxuICAgICAgICBpZiAob3B0aW9ucy5ib2R5KSB7XG4gICAgICAgICAgICAvLyBPbmNlIHRoZSBVQVMgaGFzIHNlbnQgb3IgcmVjZWl2ZWQgYW4gYW5zd2VyIHRvIHRoZSBpbml0aWFsXG4gICAgICAgICAgICAvLyBvZmZlciwgaXQgTVVTVCBOT1QgZ2VuZXJhdGUgc3Vic2VxdWVudCBvZmZlcnMgaW4gYW55IHJlc3BvbnNlc1xuICAgICAgICAgICAgLy8gdG8gdGhlIGluaXRpYWwgSU5WSVRFLiAgVGhpcyBtZWFucyB0aGF0IGEgVUFTIGJhc2VkIG9uIHRoaXNcbiAgICAgICAgICAgIC8vIHNwZWNpZmljYXRpb24gYWxvbmUgY2FuIG5ldmVyIGdlbmVyYXRlIHN1YnNlcXVlbnQgb2ZmZXJzIHVudGlsXG4gICAgICAgICAgICAvLyBjb21wbGV0aW9uIG9mIHRoZSBpbml0aWFsIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjFcbiAgICAgICAgICAgIGlmICh0aGlzLmVhcmx5RGlhbG9nLnNpZ25hbGluZ1N0YXRlICE9PSBTaWduYWxpbmdTdGF0ZS5TdGFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVhcmx5RGlhbG9nLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihvcHRpb25zLmJvZHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIDEzLjMuMS4yIFRoZSBJTlZJVEUgaXMgUmVkaXJlY3RlZFxuICAgICAqIElmIHRoZSBVQVMgZGVjaWRlcyB0byByZWRpcmVjdCB0aGUgY2FsbCwgYSAzeHggcmVzcG9uc2UgaXMgc2VudC4gIEFcbiAgICAgKiAzMDAgKE11bHRpcGxlIENob2ljZXMpLCAzMDEgKE1vdmVkIFBlcm1hbmVudGx5KSBvciAzMDIgKE1vdmVkXG4gICAgICogVGVtcG9yYXJpbHkpIHJlc3BvbnNlIFNIT1VMRCBjb250YWluIGEgQ29udGFjdCBoZWFkZXIgZmllbGRcbiAgICAgKiBjb250YWluaW5nIG9uZSBvciBtb3JlIFVSSXMgb2YgbmV3IGFkZHJlc3NlcyB0byBiZSB0cmllZC4gIFRoZVxuICAgICAqIHJlc3BvbnNlIGlzIHBhc3NlZCB0byB0aGUgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiwgd2hpY2ggd2lsbCBkZWFsXG4gICAgICogd2l0aCBpdHMgcmV0cmFuc21pc3Npb25zLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMy4xLjJcbiAgICAgKiBAcGFyYW0gY29udGFjdHMgLSBDb250YWN0cyB0byByZWRpcmVjdCB0by5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFJlZGlyZWN0IG9wdGlvbnMgYnVja2V0LlxuICAgICAqL1xuICAgIHJlZGlyZWN0KGNvbnRhY3RzLCBvcHRpb25zID0geyBzdGF0dXNDb2RlOiAzMDIgfSkge1xuICAgICAgICByZXR1cm4gc3VwZXIucmVkaXJlY3QoY29udGFjdHMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiAxMy4zLjEuMyBUaGUgSU5WSVRFIGlzIFJlamVjdGVkXG4gICAgICogQSBjb21tb24gc2NlbmFyaW8gb2NjdXJzIHdoZW4gdGhlIGNhbGxlZSBpcyBjdXJyZW50bHkgbm90IHdpbGxpbmcgb3JcbiAgICAgKiBhYmxlIHRvIHRha2UgYWRkaXRpb25hbCBjYWxscyBhdCB0aGlzIGVuZCBzeXN0ZW0uICBBIDQ4NiAoQnVzeSBIZXJlKVxuICAgICAqIFNIT1VMRCBiZSByZXR1cm5lZCBpbiBzdWNoIGEgc2NlbmFyaW8uXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4zLjEuM1xuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gUmVqZWN0IG9wdGlvbnMgYnVja2V0LlxuICAgICAqL1xuICAgIHJlamVjdChvcHRpb25zID0geyBzdGF0dXNDb2RlOiA0ODYgfSkge1xuICAgICAgICByZXR1cm4gc3VwZXIucmVqZWN0KG9wdGlvbnMpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uIH0gZnJvbSBcIi4uL3RyYW5zYWN0aW9uc1wiO1xuaW1wb3J0IHsgVXNlckFnZW50U2VydmVyIH0gZnJvbSBcIi4vdXNlci1hZ2VudC1zZXJ2ZXJcIjtcbi8qKlxuICogUkVHSVNURVIgVUFTLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUmVnaXN0ZXJVc2VyQWdlbnRTZXJ2ZXIgZXh0ZW5kcyBVc2VyQWdlbnRTZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvcmUsIG1lc3NhZ2UsIGRlbGVnYXRlKSB7XG4gICAgICAgIHN1cGVyKE5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uLCBjb3JlLCBtZXNzYWdlLCBkZWxlZ2F0ZSk7XG4gICAgICAgIHRoaXMuY29yZSA9IGNvcmU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24gfSBmcm9tIFwiLi4vdHJhbnNhY3Rpb25zXCI7XG5pbXBvcnQgeyBVc2VyQWdlbnRTZXJ2ZXIgfSBmcm9tIFwiLi91c2VyLWFnZW50LXNlcnZlclwiO1xuLyoqXG4gKiBTVUJTQ1JJQkUgVUFTLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU3Vic2NyaWJlVXNlckFnZW50U2VydmVyIGV4dGVuZHMgVXNlckFnZW50U2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb3JlLCBtZXNzYWdlLCBkZWxlZ2F0ZSkge1xuICAgICAgICBzdXBlcihOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiwgY29yZSwgbWVzc2FnZSwgZGVsZWdhdGUpO1xuICAgICAgICB0aGlzLmNvcmUgPSBjb3JlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEMsIGNvbnN0cnVjdE91dGdvaW5nUmVzcG9uc2UsIE91dGdvaW5nUmVxdWVzdE1lc3NhZ2UgfSBmcm9tIFwiLi4vbWVzc2FnZXNcIjtcbmltcG9ydCB7IEludml0ZVNlcnZlclRyYW5zYWN0aW9uLCBOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwgVHJhbnNhY3Rpb25TdGF0ZSB9IGZyb20gXCIuLi90cmFuc2FjdGlvbnNcIjtcbmltcG9ydCB7IEludml0ZVVzZXJBZ2VudENsaWVudCwgSW52aXRlVXNlckFnZW50U2VydmVyLCBNZXNzYWdlVXNlckFnZW50Q2xpZW50LCBNZXNzYWdlVXNlckFnZW50U2VydmVyLCBOb3RpZnlVc2VyQWdlbnRTZXJ2ZXIsIFB1Ymxpc2hVc2VyQWdlbnRDbGllbnQsIFJlZmVyVXNlckFnZW50U2VydmVyLCBSZWdpc3RlclVzZXJBZ2VudENsaWVudCwgUmVnaXN0ZXJVc2VyQWdlbnRTZXJ2ZXIsIFN1YnNjcmliZVVzZXJBZ2VudENsaWVudCwgU3Vic2NyaWJlVXNlckFnZW50U2VydmVyLCBVc2VyQWdlbnRDbGllbnQgfSBmcm9tIFwiLi4vdXNlci1hZ2VudHNcIjtcbmltcG9ydCB7IEFsbG93ZWRNZXRob2RzIH0gZnJvbSBcIi4vYWxsb3dlZC1tZXRob2RzXCI7XG4vKipcbiAqIFRoaXMgaXMgcG9ydGVkIGZyb20gVUEuQy5BQ0NFUFRFRF9CT0RZX1RZUEVTLlxuICogRklYTUU6IFRPRE86IFNob3VsZCBiZSBjb25maWd1cmFibGUvdmFyaWFibGUuXG4gKi9cbmNvbnN0IGFjY2VwdGVkQm9keVR5cGVzID0gW1wiYXBwbGljYXRpb24vc2RwXCIsIFwiYXBwbGljYXRpb24vZHRtZi1yZWxheVwiXTtcbi8qKlxuICogVXNlciBBZ2VudCBDb3JlLlxuICogQHJlbWFya3NcbiAqIENvcmUgZGVzaWduYXRlcyB0aGUgZnVuY3Rpb25zIHNwZWNpZmljIHRvIGEgcGFydGljdWxhciB0eXBlXG4gKiBvZiBTSVAgZW50aXR5LCBpLmUuLCBzcGVjaWZpYyB0byBlaXRoZXIgYSBzdGF0ZWZ1bCBvciBzdGF0ZWxlc3NcbiAqIHByb3h5LCBhIHVzZXIgYWdlbnQgb3IgcmVnaXN0cmFyLiAgQWxsIGNvcmVzLCBleGNlcHQgdGhvc2UgZm9yXG4gKiB0aGUgc3RhdGVsZXNzIHByb3h5LCBhcmUgdHJhbnNhY3Rpb24gdXNlcnMuXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTZcbiAqXG4gKiBVQUMgQ29yZTogVGhlIHNldCBvZiBwcm9jZXNzaW5nIGZ1bmN0aW9ucyByZXF1aXJlZCBvZiBhIFVBQyB0aGF0XG4gKiByZXNpZGUgYWJvdmUgdGhlIHRyYW5zYWN0aW9uIGFuZCB0cmFuc3BvcnQgbGF5ZXJzLlxuICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi02XG4gKlxuICogVUFTIENvcmU6IFRoZSBzZXQgb2YgcHJvY2Vzc2luZyBmdW5jdGlvbnMgcmVxdWlyZWQgYXQgYSBVQVMgdGhhdFxuICogcmVzaWRlcyBhYm92ZSB0aGUgdHJhbnNhY3Rpb24gYW5kIHRyYW5zcG9ydCBsYXllcnMuXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTZcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJBZ2VudENvcmUge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yLlxuICAgICAqIEBwYXJhbSBjb25maWd1cmF0aW9uIC0gQ29uZmlndXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gZGVsZWdhdGUgLSBEZWxlZ2F0ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25maWd1cmF0aW9uLCBkZWxlZ2F0ZSA9IHt9KSB7XG4gICAgICAgIC8qKiBVQUNzLiAqL1xuICAgICAgICB0aGlzLnVzZXJBZ2VudENsaWVudHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8qKiBVQVNzLiAqL1xuICAgICAgICB0aGlzLnVzZXJBZ2VudFNlcnZlcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247XG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5kaWFsb2dzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGNvbmZpZ3VyYXRpb24ubG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoXCJzaXAudXNlci1hZ2VudC1jb3JlXCIpO1xuICAgIH1cbiAgICAvKiogRGVzdHJ1Y3Rvci4gKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKiBSZXNldC4gKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5kaWFsb2dzLmZvckVhY2goKGRpYWxvZykgPT4gZGlhbG9nLmRpc3Bvc2UoKSk7XG4gICAgICAgIHRoaXMuZGlhbG9ncy5jbGVhcigpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goKHN1YnNjcmliZXIpID0+IHN1YnNjcmliZXIuZGlzcG9zZSgpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLnVzZXJBZ2VudENsaWVudHMuZm9yRWFjaCgodWFjKSA9PiB1YWMuZGlzcG9zZSgpKTtcbiAgICAgICAgdGhpcy51c2VyQWdlbnRDbGllbnRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMudXNlckFnZW50U2VydmVycy5mb3JFYWNoKCh1YWMpID0+IHVhYy5kaXNwb3NlKCkpO1xuICAgICAgICB0aGlzLnVzZXJBZ2VudFNlcnZlcnMuY2xlYXIoKTtcbiAgICB9XG4gICAgLyoqIExvZ2dlciBmYWN0b3J5LiAqL1xuICAgIGdldCBsb2dnZXJGYWN0b3J5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLmxvZ2dlckZhY3Rvcnk7XG4gICAgfVxuICAgIC8qKiBUcmFuc3BvcnQuICovXG4gICAgZ2V0IHRyYW5zcG9ydCgpIHtcbiAgICAgICAgY29uc3QgdHJhbnNwb3J0ID0gdGhpcy5jb25maWd1cmF0aW9uLnRyYW5zcG9ydEFjY2Vzc29yKCk7XG4gICAgICAgIGlmICghdHJhbnNwb3J0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc3BvcnQgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhbnNwb3J0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIElOVklURS5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIE91dGdvaW5nIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIGRlbGVnYXRlIC0gUmVxdWVzdCBkZWxlZ2F0ZS5cbiAgICAgKi9cbiAgICBpbnZpdGUocmVxdWVzdCwgZGVsZWdhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnZpdGVVc2VyQWdlbnRDbGllbnQodGhpcywgcmVxdWVzdCwgZGVsZWdhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIE1FU1NBR0UuXG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBPdXRnb2luZyByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSBkZWxlZ2F0ZSAtIFJlcXVlc3QgZGVsZWdhdGUuXG4gICAgICovXG4gICAgbWVzc2FnZShyZXF1ZXN0LCBkZWxlZ2F0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VVc2VyQWdlbnRDbGllbnQodGhpcywgcmVxdWVzdCwgZGVsZWdhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIFBVQkxJU0guXG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBPdXRnb2luZyByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSBkZWxlZ2F0ZSAtIFJlcXVlc3QgZGVsZWdhdGUuXG4gICAgICovXG4gICAgcHVibGlzaChyZXF1ZXN0LCBkZWxlZ2F0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFB1Ymxpc2hVc2VyQWdlbnRDbGllbnQodGhpcywgcmVxdWVzdCwgZGVsZWdhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIFJFR0lTVEVSLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gT3V0Z29pbmcgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0gZGVsZWdhdGUgLSBSZXF1ZXN0IGRlbGVnYXRlLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyKHJlcXVlc3QsIGRlbGVnYXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnaXN0ZXJVc2VyQWdlbnRDbGllbnQodGhpcywgcmVxdWVzdCwgZGVsZWdhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIFNVQlNDUklCRS5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIE91dGdvaW5nIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIGRlbGVnYXRlIC0gUmVxdWVzdCBkZWxlZ2F0ZS5cbiAgICAgKi9cbiAgICBzdWJzY3JpYmUocmVxdWVzdCwgZGVsZWdhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVVc2VyQWdlbnRDbGllbnQodGhpcywgcmVxdWVzdCwgZGVsZWdhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIE91dGdvaW5nIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIGRlbGVnYXRlIC0gUmVxdWVzdCBkZWxlZ2F0ZS5cbiAgICAgKi9cbiAgICByZXF1ZXN0KHJlcXVlc3QsIGRlbGVnYXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckFnZW50Q2xpZW50KE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uLCB0aGlzLCByZXF1ZXN0LCBkZWxlZ2F0ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE91dGdvaW5nIHJlcXVlc3QgbWVzc2FnZSBmYWN0b3J5IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBtZXRob2QgLSBNZXRob2QuXG4gICAgICogQHBhcmFtIHJlcXVlc3RVUkkgLSBSZXF1ZXN0LVVSSS5cbiAgICAgKiBAcGFyYW0gZnJvbVVSSSAtIEZyb20gVVJJLlxuICAgICAqIEBwYXJhbSB0b1VSSSAtIFRvIFVSSS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFJlcXVlc3Qgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gZXh0cmFIZWFkZXJzIC0gRXh0cmEgaGVhZGVycyB0byBhZGQuXG4gICAgICogQHBhcmFtIGJvZHkgLSBNZXNzYWdlIGJvZHkuXG4gICAgICovXG4gICAgbWFrZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UobWV0aG9kLCByZXF1ZXN0VVJJLCBmcm9tVVJJLCB0b1VSSSwgb3B0aW9ucywgZXh0cmFIZWFkZXJzLCBib2R5KSB7XG4gICAgICAgIC8vIGRlZmF1bHQgdmFsdWVzIGZyb20gdXNlciBhZ2VudCBjb25maWd1cmF0aW9uXG4gICAgICAgIGNvbnN0IGNhbGxJZFByZWZpeCA9IHRoaXMuY29uZmlndXJhdGlvbi5zaXBqc0lkO1xuICAgICAgICBjb25zdCBmcm9tRGlzcGxheU5hbWUgPSB0aGlzLmNvbmZpZ3VyYXRpb24uZGlzcGxheU5hbWU7XG4gICAgICAgIGNvbnN0IGZvcmNlUnBvcnQgPSB0aGlzLmNvbmZpZ3VyYXRpb24udmlhRm9yY2VScG9ydDtcbiAgICAgICAgY29uc3QgaGFja1ZpYVRjcCA9IHRoaXMuY29uZmlndXJhdGlvbi5oYWNrVmlhVGNwO1xuICAgICAgICBjb25zdCBvcHRpb25UYWdzID0gdGhpcy5jb25maWd1cmF0aW9uLnN1cHBvcnRlZE9wdGlvblRhZ3Muc2xpY2UoKTtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gQy5SRUdJU1RFUikge1xuICAgICAgICAgICAgb3B0aW9uVGFncy5wdXNoKFwicGF0aFwiLCBcImdydXVcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gQy5JTlZJVEUgJiYgKHRoaXMuY29uZmlndXJhdGlvbi5jb250YWN0LnB1YkdydXUgfHwgdGhpcy5jb25maWd1cmF0aW9uLmNvbnRhY3QudGVtcEdydXUpKSB7XG4gICAgICAgICAgICBvcHRpb25UYWdzLnB1c2goXCJncnV1XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJvdXRlU2V0ID0gdGhpcy5jb25maWd1cmF0aW9uLnJvdXRlU2V0O1xuICAgICAgICBjb25zdCB1c2VyQWdlbnRTdHJpbmcgPSB0aGlzLmNvbmZpZ3VyYXRpb24udXNlckFnZW50SGVhZGVyRmllbGRWYWx1ZTtcbiAgICAgICAgY29uc3QgdmlhSG9zdCA9IHRoaXMuY29uZmlndXJhdGlvbi52aWFIb3N0O1xuICAgICAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNhbGxJZFByZWZpeCxcbiAgICAgICAgICAgIGZvcmNlUnBvcnQsXG4gICAgICAgICAgICBmcm9tRGlzcGxheU5hbWUsXG4gICAgICAgICAgICBoYWNrVmlhVGNwLFxuICAgICAgICAgICAgb3B0aW9uVGFncyxcbiAgICAgICAgICAgIHJvdXRlU2V0LFxuICAgICAgICAgICAgdXNlckFnZW50U3RyaW5nLFxuICAgICAgICAgICAgdmlhSG9zdFxuICAgICAgICB9O1xuICAgICAgICAvLyBtZXJnZSBwcm92aWRlZCBvcHRpb25zIHdpdGggZGVmYXVsdCBvcHRpb25zXG4gICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gbmV3IE91dGdvaW5nUmVxdWVzdE1lc3NhZ2UobWV0aG9kLCByZXF1ZXN0VVJJLCBmcm9tVVJJLCB0b1VSSSwgcmVxdWVzdE9wdGlvbnMsIGV4dHJhSGVhZGVycywgYm9keSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBhbiBpbmNvbWluZyByZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gSW5jb21pbmcgcmVxdWVzdCBtZXNzYWdlIGZyb20gdHJhbnNwb3J0IGxheWVyLlxuICAgICAqL1xuICAgIHJlY2VpdmVJbmNvbWluZ1JlcXVlc3RGcm9tVHJhbnNwb3J0KG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5yZWNlaXZlUmVxdWVzdEZyb21UcmFuc3BvcnQobWVzc2FnZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBhbiBpbmNvbWluZyByZXNwb25zZSBtZXNzYWdlIGZyb20gdGhlIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIEluY29taW5nIHJlc3BvbnNlIG1lc3NhZ2UgZnJvbSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICovXG4gICAgcmVjZWl2ZUluY29taW5nUmVzcG9uc2VGcm9tVHJhbnNwb3J0KG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5yZWNlaXZlUmVzcG9uc2VGcm9tVHJhbnNwb3J0KG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0YXRlbGVzcyBVQVMgaXMgYSBVQVMgdGhhdCBkb2VzIG5vdCBtYWludGFpbiB0cmFuc2FjdGlvbiBzdGF0ZS5cbiAgICAgKiBJdCByZXBsaWVzIHRvIHJlcXVlc3RzIG5vcm1hbGx5LCBidXQgZGlzY2FyZHMgYW55IHN0YXRlIHRoYXQgd291bGRcbiAgICAgKiBvcmRpbmFyaWx5IGJlIHJldGFpbmVkIGJ5IGEgVUFTIGFmdGVyIGEgcmVzcG9uc2UgaGFzIGJlZW4gc2VudC4gIElmIGFcbiAgICAgKiBzdGF0ZWxlc3MgVUFTIHJlY2VpdmVzIGEgcmV0cmFuc21pc3Npb24gb2YgYSByZXF1ZXN0LCBpdCByZWdlbmVyYXRlc1xuICAgICAqIHRoZSByZXNwb25zZSBhbmQgcmUtc2VuZHMgaXQsIGp1c3QgYXMgaWYgaXQgd2VyZSByZXBseWluZyB0byB0aGUgZmlyc3RcbiAgICAgKiBpbnN0YW5jZSBvZiB0aGUgcmVxdWVzdC4gQSBVQVMgY2Fubm90IGJlIHN0YXRlbGVzcyB1bmxlc3MgdGhlIHJlcXVlc3RcbiAgICAgKiBwcm9jZXNzaW5nIGZvciB0aGF0IG1ldGhvZCB3b3VsZCBhbHdheXMgcmVzdWx0IGluIHRoZSBzYW1lIHJlc3BvbnNlXG4gICAgICogaWYgdGhlIHJlcXVlc3RzIGFyZSBpZGVudGljYWwuIFRoaXMgcnVsZXMgb3V0IHN0YXRlbGVzcyByZWdpc3RyYXJzLFxuICAgICAqIGZvciBleGFtcGxlLiAgU3RhdGVsZXNzIFVBU3MgZG8gbm90IHVzZSBhIHRyYW5zYWN0aW9uIGxheWVyOyB0aGV5XG4gICAgICogcmVjZWl2ZSByZXF1ZXN0cyBkaXJlY3RseSBmcm9tIHRoZSB0cmFuc3BvcnQgbGF5ZXIgYW5kIHNlbmQgcmVzcG9uc2VzXG4gICAgICogZGlyZWN0bHkgdG8gdGhlIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTguMi43XG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBJbmNvbWluZyByZXF1ZXN0IG1lc3NhZ2UgdG8gcmVwbHkgdG8uXG4gICAgICogQHBhcmFtIHN0YXR1c0NvZGUgLSBTdGF0dXMgY29kZSB0byByZXBseSB3aXRoLlxuICAgICAqL1xuICAgIHJlcGx5U3RhdGVsZXNzKG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdXNlckFnZW50ID0gdGhpcy5jb25maWd1cmF0aW9uLnVzZXJBZ2VudEhlYWRlckZpZWxkVmFsdWU7XG4gICAgICAgIGNvbnN0IHN1cHBvcnRlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zdXBwb3J0ZWRPcHRpb25UYWdzUmVzcG9uc2U7XG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IHVzZXJBZ2VudCwgc3VwcG9ydGVkIH0pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGNvbnN0cnVjdE91dGdvaW5nUmVzcG9uc2UobWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMudHJhbnNwb3J0LnNlbmQocmVzcG9uc2UubWVzc2FnZSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgdHJhbnNwb3J0IHJlamVjdHMsIGl0IFNIT1VMRCByZWplY3Qgd2l0aCBhIFRyYW5zcG9ydEVycm9yLlxuICAgICAgICAgICAgLy8gQnV0IHRoZSB0cmFuc3BvcnQgbWF5IGJlIGV4dGVybmFsIGNvZGUsIHNvIHdlIGFyZSBjYXJlZnVsLi4uXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYFRyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCBzZW5kaW5nIHN0YXRlbGVzcyByZXBseSB0byAke21lc3NhZ2UubWV0aG9kfSByZXF1ZXN0LmApO1xuICAgICAgICAgICAgLy8gVE9ETzogQ3VycmVudGx5IHRoZXJlIGlzIG5vIGhvb2sgdG8gcHJvdmlkZSBub3RpZmljYXRpb24gdGhhdCBhIHRyYW5zcG9ydCBlcnJvciBvY2N1cnJlZFxuICAgICAgICAgICAgLy8gYW5kIHRocm93aW5nIHdvdWxkIHJlc3VsdCBpbiBhbiB1bmNhdWdodCBlcnJvciAoaW4gcHJvbWlzZSksIHNvIHdlIHNpbGVudGx5IGVhdCB0aGUgZXJyb3IuXG4gICAgICAgICAgICAvLyBGdXJ0aGVybW9yZSwgc2lsZW50bHkgZWF0aW5nIHN0YXRlbGVzcyByZXBseSB0cmFuc3BvcnQgZXJyb3JzIGlzIGFyZ3VhYmx5IHdoYXQgd2Ugd2FudCB0byBkbyBoZXJlLlxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbiBTZWN0aW9uIDE4LjIuMSwgcmVwbGFjZSB0aGUgbGFzdCBwYXJhZ3JhcGggd2l0aDpcbiAgICAgKlxuICAgICAqIE5leHQsIHRoZSBzZXJ2ZXIgdHJhbnNwb3J0IGF0dGVtcHRzIHRvIG1hdGNoIHRoZSByZXF1ZXN0IHRvIGFcbiAgICAgKiBzZXJ2ZXIgdHJhbnNhY3Rpb24uICBJdCBkb2VzIHNvIHVzaW5nIHRoZSBtYXRjaGluZyBydWxlcyBkZXNjcmliZWRcbiAgICAgKiBpbiBTZWN0aW9uIDE3LjIuMy4gIElmIGEgbWF0Y2hpbmcgc2VydmVyIHRyYW5zYWN0aW9uIGlzIGZvdW5kLCB0aGVcbiAgICAgKiByZXF1ZXN0IGlzIHBhc3NlZCB0byB0aGF0IHRyYW5zYWN0aW9uIGZvciBwcm9jZXNzaW5nLiAgSWYgbm8gbWF0Y2hcbiAgICAgKiBpcyBmb3VuZCwgdGhlIHJlcXVlc3QgaXMgcGFzc2VkIHRvIHRoZSBjb3JlLCB3aGljaCBtYXkgZGVjaWRlIHRvXG4gICAgICogY29uc3RydWN0IGEgbmV3IHNlcnZlciB0cmFuc2FjdGlvbiBmb3IgdGhhdCByZXF1ZXN0LlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDI2I3NlY3Rpb24tOC4xMFxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gSW5jb21pbmcgcmVxdWVzdCBtZXNzYWdlIGZyb20gdHJhbnNwb3J0IGxheWVyLlxuICAgICAqL1xuICAgIHJlY2VpdmVSZXF1ZXN0RnJvbVRyYW5zcG9ydChtZXNzYWdlKSB7XG4gICAgICAgIC8vIFdoZW4gYSByZXF1ZXN0IGlzIHJlY2VpdmVkIGZyb20gdGhlIG5ldHdvcmsgYnkgdGhlIHNlcnZlciwgaXQgaGFzIHRvXG4gICAgICAgIC8vIGJlIG1hdGNoZWQgdG8gYW4gZXhpc3RpbmcgdHJhbnNhY3Rpb24uICBUaGlzIGlzIGFjY29tcGxpc2hlZCBpbiB0aGVcbiAgICAgICAgLy8gZm9sbG93aW5nIG1hbm5lci5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGhlIGJyYW5jaCBwYXJhbWV0ZXIgaW4gdGhlIHRvcG1vc3QgVmlhIGhlYWRlciBmaWVsZCBvZiB0aGUgcmVxdWVzdFxuICAgICAgICAvLyBpcyBleGFtaW5lZC4gIElmIGl0IGlzIHByZXNlbnQgYW5kIGJlZ2lucyB3aXRoIHRoZSBtYWdpYyBjb29raWVcbiAgICAgICAgLy8gXCJ6OWhHNGJLXCIsIHRoZSByZXF1ZXN0IHdhcyBnZW5lcmF0ZWQgYnkgYSBjbGllbnQgdHJhbnNhY3Rpb25cbiAgICAgICAgLy8gY29tcGxpYW50IHRvIHRoaXMgc3BlY2lmaWNhdGlvbi4gIFRoZXJlZm9yZSwgdGhlIGJyYW5jaCBwYXJhbWV0ZXJcbiAgICAgICAgLy8gd2lsbCBiZSB1bmlxdWUgYWNyb3NzIGFsbCB0cmFuc2FjdGlvbnMgc2VudCBieSB0aGF0IGNsaWVudC4gIFRoZVxuICAgICAgICAvLyByZXF1ZXN0IG1hdGNoZXMgYSB0cmFuc2FjdGlvbiBpZjpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgMS4gdGhlIGJyYW5jaCBwYXJhbWV0ZXIgaW4gdGhlIHJlcXVlc3QgaXMgZXF1YWwgdG8gdGhlIG9uZSBpbiB0aGVcbiAgICAgICAgLy8gICAgICAgdG9wIFZpYSBoZWFkZXIgZmllbGQgb2YgdGhlIHJlcXVlc3QgdGhhdCBjcmVhdGVkIHRoZVxuICAgICAgICAvLyAgICAgICB0cmFuc2FjdGlvbiwgYW5kXG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgIDIuIHRoZSBzZW50LWJ5IHZhbHVlIGluIHRoZSB0b3AgVmlhIG9mIHRoZSByZXF1ZXN0IGlzIGVxdWFsIHRvIHRoZVxuICAgICAgICAvLyAgICAgICBvbmUgaW4gdGhlIHJlcXVlc3QgdGhhdCBjcmVhdGVkIHRoZSB0cmFuc2FjdGlvbiwgYW5kXG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgIDMuIHRoZSBtZXRob2Qgb2YgdGhlIHJlcXVlc3QgbWF0Y2hlcyB0aGUgb25lIHRoYXQgY3JlYXRlZCB0aGVcbiAgICAgICAgLy8gICAgICAgdHJhbnNhY3Rpb24sIGV4Y2VwdCBmb3IgQUNLLCB3aGVyZSB0aGUgbWV0aG9kIG9mIHRoZSByZXF1ZXN0XG4gICAgICAgIC8vICAgICAgIHRoYXQgY3JlYXRlZCB0aGUgdHJhbnNhY3Rpb24gaXMgSU5WSVRFLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIG1hdGNoaW5nIHJ1bGUgYXBwbGllcyB0byBib3RoIElOVklURSBhbmQgbm9uLUlOVklURSB0cmFuc2FjdGlvbnNcbiAgICAgICAgLy8gYWxpa2UuXG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgIFRoZSBzZW50LWJ5IHZhbHVlIGlzIHVzZWQgYXMgcGFydCBvZiB0aGUgbWF0Y2hpbmcgcHJvY2VzcyBiZWNhdXNlXG4gICAgICAgIC8vICAgIHRoZXJlIGNvdWxkIGJlIGFjY2lkZW50YWwgb3IgbWFsaWNpb3VzIGR1cGxpY2F0aW9uIG9mIGJyYW5jaFxuICAgICAgICAvLyAgICBwYXJhbWV0ZXJzIGZyb20gZGlmZmVyZW50IGNsaWVudHMuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMi4zXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uSWQgPSBtZXNzYWdlLnZpYUJyYW5jaDsgLy8gRklYTUU6IEN1cnJlbnRseSBvbmx5IHVzaW5nIHJ1bGUgMS4uLlxuICAgICAgICBjb25zdCB1YXMgPSB0aGlzLnVzZXJBZ2VudFNlcnZlcnMuZ2V0KHRyYW5zYWN0aW9uSWQpO1xuICAgICAgICAvLyBXaGVuIHJlY2VpdmluZyBhbiBBQ0sgdGhhdCBtYXRjaGVzIGFuIGV4aXN0aW5nIElOVklURSBzZXJ2ZXJcbiAgICAgICAgLy8gdHJhbnNhY3Rpb24gYW5kIHRoYXQgZG9lcyBub3QgY29udGFpbiBhIGJyYW5jaCBwYXJhbWV0ZXIgY29udGFpbmluZ1xuICAgICAgICAvLyB0aGUgbWFnaWMgY29va2llIGRlZmluZWQgaW4gUkZDIDMyNjEsIHRoZSBtYXRjaGluZyB0cmFuc2FjdGlvbiBNVVNUXG4gICAgICAgIC8vIGJlIGNoZWNrZWQgdG8gc2VlIGlmIGl0IGlzIGluIHRoZSBcIkFjY2VwdGVkXCIgc3RhdGUuICBJZiBpdCBpcywgdGhlblxuICAgICAgICAvLyB0aGUgQUNLIG11c3QgYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSB0cmFuc2FjdGlvbiB1c2VyIGluc3RlYWQgb2ZcbiAgICAgICAgLy8gYmVpbmcgYWJzb3JiZWQgYnkgdGhlIHRyYW5zYWN0aW9uIHN0YXRlIG1hY2hpbmUuICBUaGlzIGlzIG5lY2Vzc2FyeVxuICAgICAgICAvLyBhcyByZXF1ZXN0cyBmcm9tIFJGQyAyNTQzIGNsaWVudHMgd2lsbCBub3QgaW5jbHVkZSBhIHVuaXF1ZSBicmFuY2hcbiAgICAgICAgLy8gcGFyYW1ldGVyLCBhbmQgdGhlIG1lY2hhbmlzbXMgZm9yIGNhbGN1bGF0aW5nIHRoZSB0cmFuc2FjdGlvbiBJRCBmcm9tXG4gICAgICAgIC8vIHN1Y2ggYSByZXF1ZXN0IHdpbGwgYmUgdGhlIHNhbWUgZm9yIGJvdGggSU5WSVRFIGFuZCBBQ0tzLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjAyNiNzZWN0aW9uLTZcbiAgICAgICAgLy8gQW55IEFDS3MgcmVjZWl2ZWQgZnJvbSB0aGUgbmV0d29yayB3aGlsZSBpbiB0aGUgXCJBY2NlcHRlZFwiIHN0YXRlIE1VU1QgYmVcbiAgICAgICAgLy8gcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBUVSBhbmQgbm90IGFic29yYmVkLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjAyNiNzZWN0aW9uLTcuMVxuICAgICAgICBpZiAobWVzc2FnZS5tZXRob2QgPT09IEMuQUNLKSB7XG4gICAgICAgICAgICBpZiAodWFzICYmIHVhcy50cmFuc2FjdGlvbi5zdGF0ZSA9PT0gVHJhbnNhY3Rpb25TdGF0ZS5BY2NlcHRlZCkge1xuICAgICAgICAgICAgICAgIGlmICh1YXMgaW5zdGFuY2VvZiBJbnZpdGVVc2VyQWdlbnRTZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2UgYXJlIEFDS3MgbWF0Y2hpbmcgYW4gSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2Ugc2hvdWxkIG5ldmVyIGhhcHBlbiB3aXRoIFJGQyAzMjYxIGNvbXBsaWFudCB1c2VyIGFnZW50c1xuICAgICAgICAgICAgICAgICAgICAvLyAod291bGQgYmUgYSBicm9rZW4gQUNLIHRvIG5lZ2F0aXZlIGZpbmFsIHJlc3BvbnNlIG9yIHNvbWV0aGluZylcbiAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGlzIGFwcGFyZW50bHkgaG93IFJGQyAyNTQzIHVzZXIgYWdlbnRzIGRvIHRoaW5ncy5cbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgYXJlIG5vdCBjdXJyZW50bHkgc3VwcG9ydGluZyB0aGlzIGNhc2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IE5vdCBiYWNrd2FyZHMgY29tcGF0aWJsZSB3aXRoIFJGQyAyNTQzIChubyBzdXBwb3J0IGZvciBzdHJpY3Qtcm91dGluZykuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYERpc2NhcmRpbmcgb3V0IG9mIGRpYWxvZyBBQ0sgYWZ0ZXIgMnh4IHJlc3BvbnNlIHNlbnQgb24gdHJhbnNhY3Rpb24gJHt0cmFuc2FjdGlvbklkfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgQ0FOQ0VMIG1ldGhvZCByZXF1ZXN0cyB0aGF0IHRoZSBUVSBhdCB0aGUgc2VydmVyIHNpZGUgY2FuY2VsIGFcbiAgICAgICAgLy8gcGVuZGluZyB0cmFuc2FjdGlvbi4gIFRoZSBUVSBkZXRlcm1pbmVzIHRoZSB0cmFuc2FjdGlvbiB0byBiZVxuICAgICAgICAvLyBjYW5jZWxsZWQgYnkgdGFraW5nIHRoZSBDQU5DRUwgcmVxdWVzdCwgYW5kIHRoZW4gYXNzdW1pbmcgdGhhdCB0aGVcbiAgICAgICAgLy8gcmVxdWVzdCBtZXRob2QgaXMgYW55dGhpbmcgYnV0IENBTkNFTCBvciBBQ0sgYW5kIGFwcGx5aW5nIHRoZVxuICAgICAgICAvLyB0cmFuc2FjdGlvbiBtYXRjaGluZyBwcm9jZWR1cmVzIG9mIFNlY3Rpb24gMTcuMi4zLiAgVGhlIG1hdGNoaW5nXG4gICAgICAgIC8vIHRyYW5zYWN0aW9uIGlzIHRoZSBvbmUgdG8gYmUgY2FuY2VsbGVkLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTkuMlxuICAgICAgICBpZiAobWVzc2FnZS5tZXRob2QgPT09IEMuQ0FOQ0VMKSB7XG4gICAgICAgICAgICBpZiAodWFzKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVnYXJkbGVzcyBvZiB0aGUgbWV0aG9kIG9mIHRoZSBvcmlnaW5hbCByZXF1ZXN0LCBhcyBsb25nIGFzIHRoZVxuICAgICAgICAgICAgICAgIC8vIENBTkNFTCBtYXRjaGVkIGFuIGV4aXN0aW5nIHRyYW5zYWN0aW9uLCB0aGUgVUFTIGFuc3dlcnMgdGhlIENBTkNFTFxuICAgICAgICAgICAgICAgIC8vIHJlcXVlc3QgaXRzZWxmIHdpdGggYSAyMDAgKE9LKSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTkuMlxuICAgICAgICAgICAgICAgIHRoaXMucmVwbHlTdGF0ZWxlc3MobWVzc2FnZSwgeyBzdGF0dXNDb2RlOiAyMDAgfSk7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRyYW5zYWN0aW9uIGZvciB0aGUgb3JpZ2luYWwgcmVxdWVzdCBzdGlsbCBleGlzdHMsIHRoZSBiZWhhdmlvclxuICAgICAgICAgICAgICAgIC8vIG9mIHRoZSBVQVMgb24gcmVjZWl2aW5nIGEgQ0FOQ0VMIHJlcXVlc3QgZGVwZW5kcyBvbiB3aGV0aGVyIGl0IGhhcyBhbHJlYWR5XG4gICAgICAgICAgICAgICAgLy8gc2VudCBhIGZpbmFsIHJlc3BvbnNlIGZvciB0aGUgb3JpZ2luYWwgcmVxdWVzdC4gSWYgaXQgaGFzLCB0aGUgQ0FOQ0VMXG4gICAgICAgICAgICAgICAgLy8gcmVxdWVzdCBoYXMgbm8gZWZmZWN0IG9uIHRoZSBwcm9jZXNzaW5nIG9mIHRoZSBvcmlnaW5hbCByZXF1ZXN0LCBub1xuICAgICAgICAgICAgICAgIC8vIGVmZmVjdCBvbiBhbnkgc2Vzc2lvbiBzdGF0ZSwgYW5kIG5vIGVmZmVjdCBvbiB0aGUgcmVzcG9uc2VzIGdlbmVyYXRlZFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGUgb3JpZ2luYWwgcmVxdWVzdC4gSWYgdGhlIFVBUyBoYXMgbm90IGlzc3VlZCBhIGZpbmFsIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgLy8gZm9yIHRoZSBvcmlnaW5hbCByZXF1ZXN0LCBpdHMgYmVoYXZpb3IgZGVwZW5kcyBvbiB0aGUgbWV0aG9kIG9mIHRoZVxuICAgICAgICAgICAgICAgIC8vIG9yaWdpbmFsIHJlcXVlc3QuIElmIHRoZSBvcmlnaW5hbCByZXF1ZXN0IHdhcyBhbiBJTlZJVEUsIHRoZSBVQVNcbiAgICAgICAgICAgICAgICAvLyBTSE9VTEQgaW1tZWRpYXRlbHkgcmVzcG9uZCB0byB0aGUgSU5WSVRFIHdpdGggYSA0ODcgKFJlcXVlc3RcbiAgICAgICAgICAgICAgICAvLyBUZXJtaW5hdGVkKS5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTkuMlxuICAgICAgICAgICAgICAgIGlmICh1YXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICB1YXMudHJhbnNhY3Rpb24uc3RhdGUgPT09IFRyYW5zYWN0aW9uU3RhdGUuUHJvY2VlZGluZykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodWFzIGluc3RhbmNlb2YgSW52aXRlVXNlckFnZW50U2VydmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1YXMucmVjZWl2ZUNhbmNlbChtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBBIENBTkNFTCByZXF1ZXN0IGhhcyBubyBpbXBhY3Qgb24gdGhlIHByb2Nlc3Npbmcgb2ZcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb25zIHdpdGggYW55IG90aGVyIG1ldGhvZCBkZWZpbmVkIGluIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi05LjJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgVUFTIGRpZCBub3QgZmluZCBhIG1hdGNoaW5nIHRyYW5zYWN0aW9uIGZvciB0aGUgQ0FOQ0VMXG4gICAgICAgICAgICAgICAgLy8gYWNjb3JkaW5nIHRvIHRoZSBwcm9jZWR1cmUgYWJvdmUsIGl0IFNIT1VMRCByZXNwb25kIHRvIHRoZSBDQU5DRUxcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGEgNDgxIChDYWxsIExlZy9UcmFuc2FjdGlvbiBEb2VzIE5vdCBFeGlzdCkuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi05LjJcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGx5U3RhdGVsZXNzKG1lc3NhZ2UsIHsgc3RhdHVzQ29kZTogNDgxIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGEgbWF0Y2hpbmcgc2VydmVyIHRyYW5zYWN0aW9uIGlzIGZvdW5kLCB0aGUgcmVxdWVzdCBpcyBwYXNzZWQgdG8gdGhhdFxuICAgICAgICAvLyB0cmFuc2FjdGlvbiBmb3IgcHJvY2Vzc2luZy5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi04LjEwXG4gICAgICAgIGlmICh1YXMpIHtcbiAgICAgICAgICAgIHVhcy50cmFuc2FjdGlvbi5yZWNlaXZlUmVxdWVzdChtZXNzYWdlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBubyBtYXRjaCBpcyBmb3VuZCwgdGhlIHJlcXVlc3QgaXMgcGFzc2VkIHRvIHRoZSBjb3JlLCB3aGljaCBtYXkgZGVjaWRlIHRvXG4gICAgICAgIC8vIGNvbnN0cnVjdCBhIG5ldyBzZXJ2ZXIgdHJhbnNhY3Rpb24gZm9yIHRoYXQgcmVxdWVzdC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi04LjEwXG4gICAgICAgIHRoaXMucmVjZWl2ZVJlcXVlc3QobWVzc2FnZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVUFDIGFuZCBVQVMgcHJvY2VkdXJlcyBkZXBlbmQgc3Ryb25nbHkgb24gdHdvIGZhY3RvcnMuICBGaXJzdCwgYmFzZWRcbiAgICAgKiBvbiB3aGV0aGVyIHRoZSByZXF1ZXN0IG9yIHJlc3BvbnNlIGlzIGluc2lkZSBvciBvdXRzaWRlIG9mIGEgZGlhbG9nLFxuICAgICAqIGFuZCBzZWNvbmQsIGJhc2VkIG9uIHRoZSBtZXRob2Qgb2YgYSByZXF1ZXN0LiAgRGlhbG9ncyBhcmUgZGlzY3Vzc2VkXG4gICAgICogdGhvcm91Z2hseSBpbiBTZWN0aW9uIDEyOyB0aGV5IHJlcHJlc2VudCBhIHBlZXItdG8tcGVlciByZWxhdGlvbnNoaXBcbiAgICAgKiBiZXR3ZWVuIHVzZXIgYWdlbnRzIGFuZCBhcmUgZXN0YWJsaXNoZWQgYnkgc3BlY2lmaWMgU0lQIG1ldGhvZHMsIHN1Y2hcbiAgICAgKiBhcyBJTlZJVEUuXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBJbmNvbWluZyByZXF1ZXN0IG1lc3NhZ2UuXG4gICAgICovXG4gICAgcmVjZWl2ZVJlcXVlc3QobWVzc2FnZSkge1xuICAgICAgICAvLyA4LjIgVUFTIEJlaGF2aW9yXG4gICAgICAgIC8vIFVBU3MgU0hPVUxEIHByb2Nlc3MgdGhlIHJlcXVlc3RzIGluIHRoZSBvcmRlciBvZiB0aGUgc3RlcHMgdGhhdFxuICAgICAgICAvLyBmb2xsb3cgaW4gdGhpcyBzZWN0aW9uICh0aGF0IGlzLCBzdGFydGluZyB3aXRoIGF1dGhlbnRpY2F0aW9uLCB0aGVuXG4gICAgICAgIC8vIGluc3BlY3RpbmcgdGhlIG1ldGhvZCwgdGhlIGhlYWRlciBmaWVsZHMsIGFuZCBzbyBvbiB0aHJvdWdob3V0IHRoZVxuICAgICAgICAvLyByZW1haW5kZXIgb2YgdGhpcyBzZWN0aW9uKS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjJcbiAgICAgICAgLy8gOC4yLjEgTWV0aG9kIEluc3BlY3Rpb25cbiAgICAgICAgLy8gT25jZSBhIHJlcXVlc3QgaXMgYXV0aGVudGljYXRlZCAob3IgYXV0aGVudGljYXRpb24gaXMgc2tpcHBlZCksIHRoZVxuICAgICAgICAvLyBVQVMgTVVTVCBpbnNwZWN0IHRoZSBtZXRob2Qgb2YgdGhlIHJlcXVlc3QuICBJZiB0aGUgVUFTIHJlY29nbml6ZXNcbiAgICAgICAgLy8gYnV0IGRvZXMgbm90IHN1cHBvcnQgdGhlIG1ldGhvZCBvZiBhIHJlcXVlc3QsIGl0IE1VU1QgZ2VuZXJhdGUgYSA0MDVcbiAgICAgICAgLy8gKE1ldGhvZCBOb3QgQWxsb3dlZCkgcmVzcG9uc2UuICBQcm9jZWR1cmVzIGZvciBnZW5lcmF0aW5nIHJlc3BvbnNlc1xuICAgICAgICAvLyBhcmUgZGVzY3JpYmVkIGluIFNlY3Rpb24gOC4yLjYuICBUaGUgVUFTIE1VU1QgYWxzbyBhZGQgYW4gQWxsb3dcbiAgICAgICAgLy8gaGVhZGVyIGZpZWxkIHRvIHRoZSA0MDUgKE1ldGhvZCBOb3QgQWxsb3dlZCkgcmVzcG9uc2UuICBUaGUgQWxsb3dcbiAgICAgICAgLy8gaGVhZGVyIGZpZWxkIE1VU1QgbGlzdCB0aGUgc2V0IG9mIG1ldGhvZHMgc3VwcG9ydGVkIGJ5IHRoZSBVQVNcbiAgICAgICAgLy8gZ2VuZXJhdGluZyB0aGUgbWVzc2FnZS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjIuMVxuICAgICAgICBpZiAoIUFsbG93ZWRNZXRob2RzLmluY2x1ZGVzKG1lc3NhZ2UubWV0aG9kKSkge1xuICAgICAgICAgICAgY29uc3QgYWxsb3dIZWFkZXIgPSBcIkFsbG93OiBcIiArIEFsbG93ZWRNZXRob2RzLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnJlcGx5U3RhdGVsZXNzKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiA0MDUsXG4gICAgICAgICAgICAgICAgZXh0cmFIZWFkZXJzOiBbYWxsb3dIZWFkZXJdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyA4LjIuMiBIZWFkZXIgSW5zcGVjdGlvblxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTguMi4yXG4gICAgICAgIGlmICghbWVzc2FnZS5ydXJpKSB7XG4gICAgICAgICAgICAvLyBGSVhNRTogQSByZXF1ZXN0IG1lc3NhZ2Ugc2hvdWxkIGFsd2F5cyBoYXZlIGFuIHJ1cmlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlcXVlc3QtVVJJIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gOC4yLjIuMSBUbyBhbmQgUmVxdWVzdC1VUklcbiAgICAgICAgLy8gSWYgdGhlIFJlcXVlc3QtVVJJIHVzZXMgYSBzY2hlbWUgbm90IHN1cHBvcnRlZCBieSB0aGUgVUFTLCBpdCBTSE9VTERcbiAgICAgICAgLy8gcmVqZWN0IHRoZSByZXF1ZXN0IHdpdGggYSA0MTYgKFVuc3VwcG9ydGVkIFVSSSBTY2hlbWUpIHJlc3BvbnNlLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTguMi4yLjFcbiAgICAgICAgaWYgKG1lc3NhZ2UucnVyaS5zY2hlbWUgIT09IFwic2lwXCIpIHtcbiAgICAgICAgICAgIHRoaXMucmVwbHlTdGF0ZWxlc3MobWVzc2FnZSwgeyBzdGF0dXNDb2RlOiA0MTYgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gOC4yLjIuMSBUbyBhbmQgUmVxdWVzdC1VUklcbiAgICAgICAgLy8gSWYgdGhlIFJlcXVlc3QtVVJJIGRvZXMgbm90IGlkZW50aWZ5IGFuIGFkZHJlc3MgdGhhdCB0aGVcbiAgICAgICAgLy8gVUFTIGlzIHdpbGxpbmcgdG8gYWNjZXB0IHJlcXVlc3RzIGZvciwgaXQgU0hPVUxEIHJlamVjdFxuICAgICAgICAvLyB0aGUgcmVxdWVzdCB3aXRoIGEgNDA0IChOb3QgRm91bmQpIHJlc3BvbnNlLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTguMi4yLjFcbiAgICAgICAgY29uc3QgcnVyaSA9IG1lc3NhZ2UucnVyaTtcbiAgICAgICAgY29uc3QgcnVyaU1hdGNoZXMgPSAodXJpKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gISF1cmkgJiYgdXJpLnVzZXIgPT09IHJ1cmkudXNlcjtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFydXJpTWF0Y2hlcyh0aGlzLmNvbmZpZ3VyYXRpb24uYW9yKSAmJlxuICAgICAgICAgICAgIShydXJpTWF0Y2hlcyh0aGlzLmNvbmZpZ3VyYXRpb24uY29udGFjdC51cmkpIHx8XG4gICAgICAgICAgICAgICAgcnVyaU1hdGNoZXModGhpcy5jb25maWd1cmF0aW9uLmNvbnRhY3QucHViR3J1dSkgfHxcbiAgICAgICAgICAgICAgICBydXJpTWF0Y2hlcyh0aGlzLmNvbmZpZ3VyYXRpb24uY29udGFjdC50ZW1wR3J1dSkpKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiUmVxdWVzdC1VUkkgZG9lcyBub3QgcG9pbnQgdG8gdXMuXCIpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWV0aG9kICE9PSBDLkFDSykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVwbHlTdGF0ZWxlc3MobWVzc2FnZSwgeyBzdGF0dXNDb2RlOiA0MDQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gOC4yLjIuMSBUbyBhbmQgUmVxdWVzdC1VUklcbiAgICAgICAgLy8gT3RoZXIgcG90ZW50aWFsIHNvdXJjZXMgb2YgcmVjZWl2ZWQgUmVxdWVzdC1VUklzIGluY2x1ZGVcbiAgICAgICAgLy8gdGhlIENvbnRhY3QgaGVhZGVyIGZpZWxkcyBvZiByZXF1ZXN0cyBhbmQgcmVzcG9uc2VzIHNlbnQgYnkgdGhlIFVBXG4gICAgICAgIC8vIHRoYXQgZXN0YWJsaXNoIG9yIHJlZnJlc2ggZGlhbG9ncy5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjIuMi4xXG4gICAgICAgIGlmIChtZXNzYWdlLm1ldGhvZCA9PT0gQy5JTlZJVEUpIHtcbiAgICAgICAgICAgIGlmICghbWVzc2FnZS5oYXNIZWFkZXIoXCJDb250YWN0XCIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDQwMCxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uUGhyYXNlOiBcIk1pc3NpbmcgQ29udGFjdCBIZWFkZXJcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyA4LjIuMi4yIE1lcmdlZCBSZXF1ZXN0c1xuICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBoYXMgbm8gdGFnIGluIHRoZSBUbyBoZWFkZXIgZmllbGQsIHRoZSBVQVMgY29yZSBNVVNUXG4gICAgICAgIC8vIGNoZWNrIHRoZSByZXF1ZXN0IGFnYWluc3Qgb25nb2luZyB0cmFuc2FjdGlvbnMuICBJZiB0aGUgRnJvbSB0YWcsXG4gICAgICAgIC8vIENhbGwtSUQsIGFuZCBDU2VxIGV4YWN0bHkgbWF0Y2ggdGhvc2UgYXNzb2NpYXRlZCB3aXRoIGFuIG9uZ29pbmdcbiAgICAgICAgLy8gdHJhbnNhY3Rpb24sIGJ1dCB0aGUgcmVxdWVzdCBkb2VzIG5vdCBtYXRjaCB0aGF0IHRyYW5zYWN0aW9uIChiYXNlZFxuICAgICAgICAvLyBvbiB0aGUgbWF0Y2hpbmcgcnVsZXMgaW4gU2VjdGlvbiAxNy4yLjMpLCB0aGUgVUFTIGNvcmUgU0hPVUxEXG4gICAgICAgIC8vIGdlbmVyYXRlIGEgNDgyIChMb29wIERldGVjdGVkKSByZXNwb25zZSBhbmQgcGFzcyBpdCB0byB0aGUgc2VydmVyXG4gICAgICAgIC8vIHRyYW5zYWN0aW9uLlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICBUaGUgc2FtZSByZXF1ZXN0IGhhcyBhcnJpdmVkIGF0IHRoZSBVQVMgbW9yZSB0aGFuIG9uY2UsIGZvbGxvd2luZ1xuICAgICAgICAvLyAgICBkaWZmZXJlbnQgcGF0aHMsIG1vc3QgbGlrZWx5IGR1ZSB0byBmb3JraW5nLiAgVGhlIFVBUyBwcm9jZXNzZXNcbiAgICAgICAgLy8gICAgdGhlIGZpcnN0IHN1Y2ggcmVxdWVzdCByZWNlaXZlZCBhbmQgcmVzcG9uZHMgd2l0aCBhIDQ4MiAoTG9vcFxuICAgICAgICAvLyAgICBEZXRlY3RlZCkgdG8gdGhlIHJlc3Qgb2YgdGhlbS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjIuMi4yXG4gICAgICAgIGlmICghbWVzc2FnZS50b1RhZykge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25JZCA9IG1lc3NhZ2UudmlhQnJhbmNoO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnVzZXJBZ2VudFNlcnZlcnMuaGFzKHRyYW5zYWN0aW9uSWQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkUmVxdWVzdCA9IEFycmF5LmZyb20odGhpcy51c2VyQWdlbnRTZXJ2ZXJzLnZhbHVlcygpKS5zb21lKCh1YXMpID0+IHVhcy50cmFuc2FjdGlvbi5yZXF1ZXN0LmZyb21UYWcgPT09IG1lc3NhZ2UuZnJvbVRhZyAmJlxuICAgICAgICAgICAgICAgICAgICB1YXMudHJhbnNhY3Rpb24ucmVxdWVzdC5jYWxsSWQgPT09IG1lc3NhZ2UuY2FsbElkICYmXG4gICAgICAgICAgICAgICAgICAgIHVhcy50cmFuc2FjdGlvbi5yZXF1ZXN0LmNzZXEgPT09IG1lc3NhZ2UuY3NlcSk7XG4gICAgICAgICAgICAgICAgaWYgKG1lcmdlZFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7IHN0YXR1c0NvZGU6IDQ4MiB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyA4LjIuMi4zIFJlcXVpcmVcbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjIuMi4zXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gOC4yLjMgQ29udGVudCBQcm9jZXNzaW5nXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOC4yLjNcbiAgICAgICAgLy8gVE9ET1xuICAgICAgICAvLyA4LjIuNCBBcHBseWluZyBFeHRlbnNpb25zXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOC4yLjRcbiAgICAgICAgLy8gVE9ET1xuICAgICAgICAvLyA4LjIuNSBQcm9jZXNzaW5nIHRoZSBSZXF1ZXN0XG4gICAgICAgIC8vIEFzc3VtaW5nIGFsbCBvZiB0aGUgY2hlY2tzIGluIHRoZSBwcmV2aW91cyBzdWJzZWN0aW9ucyBhcmUgcGFzc2VkLFxuICAgICAgICAvLyB0aGUgVUFTIHByb2Nlc3NpbmcgYmVjb21lcyBtZXRob2Qtc3BlY2lmaWMuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOC4yLjVcbiAgICAgICAgLy8gVGhlIFVBUyB3aWxsIHJlY2VpdmUgdGhlIHJlcXVlc3QgZnJvbSB0aGUgdHJhbnNhY3Rpb24gbGF5ZXIuICBJZiB0aGVcbiAgICAgICAgLy8gcmVxdWVzdCBoYXMgYSB0YWcgaW4gdGhlIFRvIGhlYWRlciBmaWVsZCwgdGhlIFVBUyBjb3JlIGNvbXB1dGVzIHRoZVxuICAgICAgICAvLyBkaWFsb2cgaWRlbnRpZmllciBjb3JyZXNwb25kaW5nIHRvIHRoZSByZXF1ZXN0IGFuZCBjb21wYXJlcyBpdCB3aXRoXG4gICAgICAgIC8vIGV4aXN0aW5nIGRpYWxvZ3MuICBJZiB0aGVyZSBpcyBhIG1hdGNoLCB0aGlzIGlzIGEgbWlkLWRpYWxvZyByZXF1ZXN0LlxuICAgICAgICAvLyBJbiB0aGF0IGNhc2UsIHRoZSBVQVMgZmlyc3QgYXBwbGllcyB0aGUgc2FtZSBwcm9jZXNzaW5nIHJ1bGVzIGZvclxuICAgICAgICAvLyByZXF1ZXN0cyBvdXRzaWRlIG9mIGEgZGlhbG9nLCBkaXNjdXNzZWQgaW4gU2VjdGlvbiA4LjIuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMi4yXG4gICAgICAgIGlmIChtZXNzYWdlLnRvVGFnKSB7XG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVJbnNpZGVEaWFsb2dSZXF1ZXN0KG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZWNlaXZlT3V0c2lkZURpYWxvZ1JlcXVlc3QobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPbmNlIGEgZGlhbG9nIGhhcyBiZWVuIGVzdGFibGlzaGVkIGJldHdlZW4gdHdvIFVBcywgZWl0aGVyIG9mIHRoZW1cbiAgICAgKiBNQVkgaW5pdGlhdGUgbmV3IHRyYW5zYWN0aW9ucyBhcyBuZWVkZWQgd2l0aGluIHRoZSBkaWFsb2cuICBUaGUgVUFcbiAgICAgKiBzZW5kaW5nIHRoZSByZXF1ZXN0IHdpbGwgdGFrZSB0aGUgVUFDIHJvbGUgZm9yIHRoZSB0cmFuc2FjdGlvbi4gIFRoZVxuICAgICAqIFVBIHJlY2VpdmluZyB0aGUgcmVxdWVzdCB3aWxsIHRha2UgdGhlIFVBUyByb2xlLiAgTm90ZSB0aGF0IHRoZXNlIG1heVxuICAgICAqIGJlIGRpZmZlcmVudCByb2xlcyB0aGFuIHRoZSBVQXMgaGVsZCBkdXJpbmcgdGhlIHRyYW5zYWN0aW9uIHRoYXRcbiAgICAgKiBlc3RhYmxpc2hlZCB0aGUgZGlhbG9nLlxuICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gSW5jb21pbmcgcmVxdWVzdCBtZXNzYWdlLlxuICAgICAqL1xuICAgIHJlY2VpdmVJbnNpZGVEaWFsb2dSZXF1ZXN0KG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gTk9USUZZIHJlcXVlc3RzIGFyZSBtYXRjaGVkIHRvIHN1Y2ggU1VCU0NSSUJFIHJlcXVlc3RzIGlmIHRoZXlcbiAgICAgICAgLy8gY29udGFpbiB0aGUgc2FtZSBcIkNhbGwtSURcIiwgYSBcIlRvXCIgaGVhZGVyIGZpZWxkIFwidGFnXCIgcGFyYW1ldGVyIHRoYXRcbiAgICAgICAgLy8gbWF0Y2hlcyB0aGUgXCJGcm9tXCIgaGVhZGVyIGZpZWxkIFwidGFnXCIgcGFyYW1ldGVyIG9mIHRoZSBTVUJTQ1JJQkVcbiAgICAgICAgLy8gcmVxdWVzdCwgYW5kIHRoZSBzYW1lIFwiRXZlbnRcIiBoZWFkZXIgZmllbGQuICBSdWxlcyBmb3IgY29tcGFyaXNvbnMgb2ZcbiAgICAgICAgLy8gdGhlIFwiRXZlbnRcIiBoZWFkZXIgZmllbGRzIGFyZSBkZXNjcmliZWQgaW4gU2VjdGlvbiA4LjIuMS5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY2NjUjc2VjdGlvbi00LjQuMVxuICAgICAgICBpZiAobWVzc2FnZS5tZXRob2QgPT09IEMuTk9USUZZKSB7XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoXCJFdmVudFwiKTtcbiAgICAgICAgICAgIGlmICghZXZlbnQgfHwgIWV2ZW50LmV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7IHN0YXR1c0NvZGU6IDQ4OSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGSVhNRTogU3Vic2NyaWJlciBpZCBzaG91bGQgYWxzbyBtYXRjaGluZyBvbiBldmVudCBpZC5cbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmliZXJJZCA9IG1lc3NhZ2UuY2FsbElkICsgbWVzc2FnZS50b1RhZyArIGV2ZW50LmV2ZW50O1xuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaWJlciA9IHRoaXMuc3Vic2NyaWJlcnMuZ2V0KHN1YnNjcmliZXJJZCk7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVhcyA9IG5ldyBOb3RpZnlVc2VyQWdlbnRTZXJ2ZXIodGhpcywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5vbk5vdGlmeSh1YXMpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBSZXF1ZXN0cyBzZW50IHdpdGhpbiBhIGRpYWxvZywgYXMgYW55IG90aGVyIHJlcXVlc3RzLCBhcmUgYXRvbWljLiAgSWZcbiAgICAgICAgLy8gYSBwYXJ0aWN1bGFyIHJlcXVlc3QgaXMgYWNjZXB0ZWQgYnkgdGhlIFVBUywgYWxsIHRoZSBzdGF0ZSBjaGFuZ2VzXG4gICAgICAgIC8vIGFzc29jaWF0ZWQgd2l0aCBpdCBhcmUgcGVyZm9ybWVkLiAgSWYgdGhlIHJlcXVlc3QgaXMgcmVqZWN0ZWQsIG5vbmVcbiAgICAgICAgLy8gb2YgdGhlIHN0YXRlIGNoYW5nZXMgYXJlIHBlcmZvcm1lZC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgTm90ZSB0aGF0IHNvbWUgcmVxdWVzdHMsIHN1Y2ggYXMgSU5WSVRFcywgYWZmZWN0IHNldmVyYWwgcGllY2VzIG9mXG4gICAgICAgIC8vICAgIHN0YXRlLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgVUFTIHdpbGwgcmVjZWl2ZSB0aGUgcmVxdWVzdCBmcm9tIHRoZSB0cmFuc2FjdGlvbiBsYXllci4gIElmIHRoZVxuICAgICAgICAvLyByZXF1ZXN0IGhhcyBhIHRhZyBpbiB0aGUgVG8gaGVhZGVyIGZpZWxkLCB0aGUgVUFTIGNvcmUgY29tcHV0ZXMgdGhlXG4gICAgICAgIC8vIGRpYWxvZyBpZGVudGlmaWVyIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHJlcXVlc3QgYW5kIGNvbXBhcmVzIGl0IHdpdGhcbiAgICAgICAgLy8gZXhpc3RpbmcgZGlhbG9ncy4gIElmIHRoZXJlIGlzIGEgbWF0Y2gsIHRoaXMgaXMgYSBtaWQtZGlhbG9nIHJlcXVlc3QuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMi4yXG4gICAgICAgIGNvbnN0IGRpYWxvZ0lkID0gbWVzc2FnZS5jYWxsSWQgKyBtZXNzYWdlLnRvVGFnICsgbWVzc2FnZS5mcm9tVGFnO1xuICAgICAgICBjb25zdCBkaWFsb2cgPSB0aGlzLmRpYWxvZ3MuZ2V0KGRpYWxvZ0lkKTtcbiAgICAgICAgaWYgKGRpYWxvZykge1xuICAgICAgICAgICAgLy8gW1NpcC1pbXBsZW1lbnRvcnNdIFJlZy4gU0lQIHJlaW52aXRlLCBVUERBVEUgYW5kIE9QVElPTlNcbiAgICAgICAgICAgIC8vIFlvdSBnb3QgdGhlIHF1ZXN0aW9uIHJpZ2h0LlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEFuZCB5b3UgZ290IHRoZSByaWdodCBhbnN3ZXIgdG9vLiA6LSlcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgIFRoYW5rcyxcbiAgICAgICAgICAgIC8vICAgUGF1bFxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFJvYmVydCBTcGFya3Mgd3JvdGU6XG4gICAgICAgICAgICAvLyA+IFNvIEkndmUgbG9zdCB0cmFjayBvZiB0aGUgcXVlc3Rpb24gZHVyaW5nIHRoZSBtdXNpbmcuXG4gICAgICAgICAgICAvLyA+XG4gICAgICAgICAgICAvLyA+IEkgX3RoaW5rXyB0aGUgZnVuZGFtZW50YWwgcXVlc3Rpb24gYmVpbmcgYXNrZWQgaXMgdGhpczpcbiAgICAgICAgICAgIC8vID5cbiAgICAgICAgICAgIC8vID4gSXMgYW4gZW5kcG9pbnQgcmVxdWlyZWQgdG8gcmVqZWN0ICh3aXRoIGEgNDgxKSBhbiBPUFRJT05TIHJlcXVlc3QgdGhhdFxuICAgICAgICAgICAgLy8gPiBhcnJpdmVzIHdpdGggYXQgdG8tdGFnIGJ1dCBkb2VzIG5vdCBtYXRjaCBhbnkgZXhpc3RpbmcgZGlhbG9nIHN0YXRlLlxuICAgICAgICAgICAgLy8gPiAoQXNzdW1pbmcgc29tZSBlYXJsaWVyIHJlcXVpcmVtZW50IGhhc24ndCBmb3JjZWQgYW5vdGhlciBlcnJvciBjb2RlKS4gT3JcbiAgICAgICAgICAgIC8vID4gaXMgaXQgT0sgaWYgaXQganVzdCBzZW5kc1xuICAgICAgICAgICAgLy8gPiBhIDIwMCBPSyBhbnlob3cuXG4gICAgICAgICAgICAvLyA+XG4gICAgICAgICAgICAvLyA+IE15IHRha2Ugb24gdGhlIGNvbGxlY3Rpb24gb2Ygc3BlY3MgaXMgdGhhdCBpdHMgX25vdF8gb2sgZm9yIGl0IHRvIHNlbmRcbiAgICAgICAgICAgIC8vID4gdGhlIDIwMCBPSyBhbnlob3cgYW5kIHRoYXQgaXQgaXMgcmVxdWlyZWQgdG8gc2VuZFxuICAgICAgICAgICAgLy8gPiB0aGUgNDgxLiBJIGJhc2UgdGhpcyBwcmltYXJpbHkgb24gdGhlc2Ugc2VudGVuY2VzIGZyb20gMTEuMiBpbiAzMjYxOlxuICAgICAgICAgICAgLy8gPlxuICAgICAgICAgICAgLy8gPiAgICBUaGUgcmVzcG9uc2UgdG8gYW4gT1BUSU9OUyBpcyBjb25zdHJ1Y3RlZCB1c2luZyB0aGUgc3RhbmRhcmQgcnVsZXNcbiAgICAgICAgICAgIC8vID4gICAgZm9yIGEgU0lQIHJlc3BvbnNlIGFzIGRpc2N1c3NlZCBpbiBTZWN0aW9uIDguMi42LiAgVGhlIHJlc3BvbnNlIGNvZGVcbiAgICAgICAgICAgIC8vID4gICAgY2hvc2VuIE1VU1QgYmUgdGhlIHNhbWUgdGhhdCB3b3VsZCBoYXZlIGJlZW4gY2hvc2VuIGhhZCB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgLy8gPiAgICBiZWVuIGFuIElOVklURS5cbiAgICAgICAgICAgIC8vID5cbiAgICAgICAgICAgIC8vID4gRGlkIEkgbWlzcyB0aGUgcG9pbnQgb2YgdGhlIHF1ZXN0aW9uP1xuICAgICAgICAgICAgLy8gPlxuICAgICAgICAgICAgLy8gPiBPbiBNYXkgMTUsIDIwMDgsIGF0IDEyOjQ4IFBNLCBQYXVsIEt5eml2YXQgd3JvdGU6XG4gICAgICAgICAgICAvLyA+XG4gICAgICAgICAgICAvLyA+PiBbSW5jbHVkaW5nIFJvYmVydCBpbiBob3BlcyBvZiBnZXR0aW5nIGhpcyBpbnNpZ2h0IG9uIHRoaXMuXVxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9saXN0cy5jcy5jb2x1bWJpYS5lZHUvcGlwZXJtYWlsL3NpcC1pbXBsZW1lbnRvcnMvMjAwOC1NYXkvMDE5MTc4Lmh0bWxcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBSZXF1ZXN0cyB0aGF0IGRvIG5vdCBjaGFuZ2UgaW4gYW55IHdheSB0aGUgc3RhdGUgb2YgYSBkaWFsb2cgbWF5IGJlXG4gICAgICAgICAgICAvLyByZWNlaXZlZCB3aXRoaW4gYSBkaWFsb2cgKGZvciBleGFtcGxlLCBhbiBPUFRJT05TIHJlcXVlc3QpLiAgVGhleSBhcmVcbiAgICAgICAgICAgIC8vIHByb2Nlc3NlZCBhcyBpZiB0aGV5IGhhZCBiZWVuIHJlY2VpdmVkIG91dHNpZGUgdGhlIGRpYWxvZy5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMi4yXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXRob2QgPT09IEMuT1BUSU9OUykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFsbG93SGVhZGVyID0gXCJBbGxvdzogXCIgKyBBbGxvd2VkTWV0aG9kcy50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY2VwdEhlYWRlciA9IFwiQWNjZXB0OiBcIiArIGFjY2VwdGVkQm9keVR5cGVzLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFIZWFkZXJzOiBbYWxsb3dIZWFkZXIsIGFjY2VwdEhlYWRlcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQYXNzIHRoZSBpbmNvbWluZyByZXF1ZXN0IHRvIHRoZSBkaWFsb2cgZm9yIGZ1cnRoZXIgaGFuZGxpbmcuXG4gICAgICAgICAgICBkaWFsb2cucmVjZWl2ZVJlcXVlc3QobWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIG1vc3QgaW1wb3J0YW50IGJlaGF2aW9ycyBvZiBhIHN0YXRlbGVzcyBVQVMgYXJlIHRoZSBmb2xsb3dpbmc6XG4gICAgICAgIC8vIC4uLlxuICAgICAgICAvLyBvICBBIHN0YXRlbGVzcyBVQVMgTVVTVCBpZ25vcmUgQUNLIHJlcXVlc3RzLlxuICAgICAgICAvLyAuLi5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjIuN1xuICAgICAgICBpZiAobWVzc2FnZS5tZXRob2QgPT09IEMuQUNLKSB7XG4gICAgICAgICAgICAvLyBJZiBhIGZpbmFsIHJlc3BvbnNlIHRvIGFuIElOVklURSB3YXMgc2VudCBzdGF0ZWxlc3NseSxcbiAgICAgICAgICAgIC8vIHRoZSBjb3JyZXNwb25kaW5nIEFDSzpcbiAgICAgICAgICAgIC8vIC0gd2lsbCBub3QgbWF0Y2ggYW4gZXhpc3RpbmcgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgIC8vIC0gbWF5IGhhdmUgdGFnIGluIHRoZSBUbyBoZWFkZXIgZmllbGRcbiAgICAgICAgICAgIC8vIC0gbm90IG5vdCBtYXRjaCBhbnkgZXhpc3RpbmcgZGlhbG9nc1xuICAgICAgICAgICAgLy8gQWJzb3JiIHVubWF0Y2hlZCBBQ0tzLlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGhhcyBhIHRhZyBpbiB0aGUgVG8gaGVhZGVyIGZpZWxkLCBidXQgdGhlIGRpYWxvZ1xuICAgICAgICAvLyBpZGVudGlmaWVyIGRvZXMgbm90IG1hdGNoIGFueSBleGlzdGluZyBkaWFsb2dzLCB0aGUgVUFTIG1heSBoYXZlXG4gICAgICAgIC8vIGNyYXNoZWQgYW5kIHJlc3RhcnRlZCwgb3IgaXQgbWF5IGhhdmUgcmVjZWl2ZWQgYSByZXF1ZXN0IGZvciBhXG4gICAgICAgIC8vIGRpZmZlcmVudCAocG9zc2libHkgZmFpbGVkKSBVQVMgKHRoZSBVQVNzIGNhbiBjb25zdHJ1Y3QgdGhlIFRvIHRhZ3NcbiAgICAgICAgLy8gc28gdGhhdCBhIFVBUyBjYW4gaWRlbnRpZnkgdGhhdCB0aGUgdGFnIHdhcyBmb3IgYSBVQVMgZm9yIHdoaWNoIGl0IGlzXG4gICAgICAgIC8vIHByb3ZpZGluZyByZWNvdmVyeSkuICBBbm90aGVyIHBvc3NpYmlsaXR5IGlzIHRoYXQgdGhlIGluY29taW5nXG4gICAgICAgIC8vIHJlcXVlc3QgaGFzIGJlZW4gc2ltcGx5IG1pcy1yb3V0ZWQuICBCYXNlZCBvbiB0aGUgVG8gdGFnLCB0aGUgVUFTIE1BWVxuICAgICAgICAvLyBlaXRoZXIgYWNjZXB0IG9yIHJlamVjdCB0aGUgcmVxdWVzdC4gIEFjY2VwdGluZyB0aGUgcmVxdWVzdCBmb3JcbiAgICAgICAgLy8gYWNjZXB0YWJsZSBUbyB0YWdzIHByb3ZpZGVzIHJvYnVzdG5lc3MsIHNvIHRoYXQgZGlhbG9ncyBjYW4gcGVyc2lzdFxuICAgICAgICAvLyBldmVuIHRocm91Z2ggY3Jhc2hlcy4gIFVBcyB3aXNoaW5nIHRvIHN1cHBvcnQgdGhpcyBjYXBhYmlsaXR5IG11c3RcbiAgICAgICAgLy8gdGFrZSBpbnRvIGNvbnNpZGVyYXRpb24gc29tZSBpc3N1ZXMgc3VjaCBhcyBjaG9vc2luZyBtb25vdG9uaWNhbGx5XG4gICAgICAgIC8vIGluY3JlYXNpbmcgQ1NlcSBzZXF1ZW5jZSBudW1iZXJzIGV2ZW4gYWNyb3NzIHJlYm9vdHMsIHJlY29uc3RydWN0aW5nXG4gICAgICAgIC8vIHRoZSByb3V0ZSBzZXQsIGFuZCBhY2NlcHRpbmcgb3V0LW9mLXJhbmdlIFJUUCB0aW1lc3RhbXBzIGFuZCBzZXF1ZW5jZVxuICAgICAgICAvLyBudW1iZXJzLlxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiB0aGUgVUFTIHdpc2hlcyB0byByZWplY3QgdGhlIHJlcXVlc3QgYmVjYXVzZSBpdCBkb2VzIG5vdCB3aXNoIHRvXG4gICAgICAgIC8vIHJlY3JlYXRlIHRoZSBkaWFsb2csIGl0IE1VU1QgcmVzcG9uZCB0byB0aGUgcmVxdWVzdCB3aXRoIGEgNDgxXG4gICAgICAgIC8vIChDYWxsL1RyYW5zYWN0aW9uIERvZXMgTm90IEV4aXN0KSBzdGF0dXMgY29kZSBhbmQgcGFzcyB0aGF0IHRvIHRoZVxuICAgICAgICAvLyBzZXJ2ZXIgdHJhbnNhY3Rpb24uXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTIuMi4yXG4gICAgICAgIHRoaXMucmVwbHlTdGF0ZWxlc3MobWVzc2FnZSwgeyBzdGF0dXNDb2RlOiA0ODEgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzdW1pbmcgYWxsIG9mIHRoZSBjaGVja3MgaW4gdGhlIHByZXZpb3VzIHN1YnNlY3Rpb25zIGFyZSBwYXNzZWQsXG4gICAgICogdGhlIFVBUyBwcm9jZXNzaW5nIGJlY29tZXMgbWV0aG9kLXNwZWNpZmljLlxuICAgICAqICBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTguMi41XG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBJbmNvbWluZyByZXF1ZXN0IG1lc3NhZ2UuXG4gICAgICovXG4gICAgcmVjZWl2ZU91dHNpZGVEaWFsb2dSZXF1ZXN0KG1lc3NhZ2UpIHtcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlLm1ldGhvZCkge1xuICAgICAgICAgICAgY2FzZSBDLkFDSzpcbiAgICAgICAgICAgICAgICAvLyBBYnNvcmIgc3RyYXkgb3V0IG9mIGRpYWxvZyBBQ0tzXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEMuQllFOlxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBCWUUgZG9lcyBub3QgbWF0Y2ggYW4gZXhpc3RpbmcgZGlhbG9nLCB0aGUgVUFTIGNvcmUgU0hPVUxEXG4gICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgYSA0ODEgKENhbGwvVHJhbnNhY3Rpb24gRG9lcyBOb3QgRXhpc3QpIHJlc3BvbnNlIGFuZCBwYXNzXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB0byB0aGUgc2VydmVyIHRyYW5zYWN0aW9uLiBUaGlzIHJ1bGUgbWVhbnMgdGhhdCBhIEJZRSBzZW50XG4gICAgICAgICAgICAgICAgLy8gd2l0aG91dCB0YWdzIGJ5IGEgVUFDIHdpbGwgYmUgcmVqZWN0ZWQuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNS4xLjJcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGx5U3RhdGVsZXNzKG1lc3NhZ2UsIHsgc3RhdHVzQ29kZTogNDgxIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDLkNBTkNFTDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgb3V0IG9mIGRpYWxvZyByZXF1ZXN0IG1ldGhvZCAke21lc3NhZ2UubWV0aG9kfS5gKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQy5JTkZPOlxuICAgICAgICAgICAgICAgIC8vIFVzZSBvZiB0aGUgSU5GTyBtZXRob2QgZG9lcyBub3QgY29uc3RpdHV0ZSBhIHNlcGFyYXRlIGRpYWxvZyB1c2FnZS5cbiAgICAgICAgICAgICAgICAvLyBJTkZPIG1lc3NhZ2VzIGFyZSBhbHdheXMgcGFydCBvZiwgYW5kIHNoYXJlIHRoZSBmYXRlIG9mLCBhbiBpbnZpdGVcbiAgICAgICAgICAgICAgICAvLyBkaWFsb2cgdXNhZ2UgW1JGQzUwNTddLiAgSU5GTyBtZXNzYWdlcyBjYW5ub3QgYmUgc2VudCBhcyBwYXJ0IG9mXG4gICAgICAgICAgICAgICAgLy8gb3RoZXIgZGlhbG9nIHVzYWdlcywgb3Igb3V0c2lkZSBhbiBleGlzdGluZyBkaWFsb2cuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwODYjc2VjdGlvbi0xXG4gICAgICAgICAgICAgICAgdGhpcy5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7IHN0YXR1c0NvZGU6IDQwNSB9KTsgLy8gU2hvdWxkIG5ldmVyIGhhcHBlblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDLklOVklURTpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjMuMVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdWFzID0gbmV3IEludml0ZVVzZXJBZ2VudFNlcnZlcih0aGlzLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vbkludml0ZSA/IHRoaXMuZGVsZWdhdGUub25JbnZpdGUodWFzKSA6IHVhcy5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEMuTUVTU0FHRTpcbiAgICAgICAgICAgICAgICAvLyBNRVNTQUdFIHJlcXVlc3RzIGFyZSBkaXNjb3VyYWdlZCBpbnNpZGUgYSBkaWFsb2cuICBJbXBsZW1lbnRhdGlvbnNcbiAgICAgICAgICAgICAgICAvLyBhcmUgcmVzdHJpY3RlZCBmcm9tIGNyZWF0aW5nIGEgdXNhZ2UgZm9yIHRoZSBwdXJwb3NlIG9mIGNhcnJ5aW5nIGFcbiAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBvZiBNRVNTQUdFIHJlcXVlc3RzICh0aG91Z2ggc29tZSBpbXBsZW1lbnRhdGlvbnMgdXNlIGl0IHRoYXRcbiAgICAgICAgICAgICAgICAvLyB3YXksIGFnYWluc3QgdGhlIHN0YW5kYXJkIHJlY29tbWVuZGF0aW9uKS5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNTA1NyNzZWN0aW9uLTUuM1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdWFzID0gbmV3IE1lc3NhZ2VVc2VyQWdlbnRTZXJ2ZXIodGhpcywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25NZXNzYWdlID8gdGhpcy5kZWxlZ2F0ZS5vbk1lc3NhZ2UodWFzKSA6IHVhcy5hY2NlcHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEMuTk9USUZZOlxuICAgICAgICAgICAgICAgIC8vIE9ic29sZXRlZCBieTogUkZDIDY2NjVcbiAgICAgICAgICAgICAgICAvLyBJZiBhbnkgbm9uLVNVQlNDUklCRSBtZWNoYW5pc21zIGFyZSBkZWZpbmVkIHRvIGNyZWF0ZSBzdWJzY3JpcHRpb25zLFxuICAgICAgICAgICAgICAgIC8vIGl0IGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgcGFydGllcyBkZWZpbmluZyB0aG9zZSBtZWNoYW5pc21zIHRvXG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlIHRoYXQgY29ycmVsYXRpb24gb2YgYSBOT1RJRlkgbWVzc2FnZSB0byB0aGUgY29ycmVzcG9uZGluZ1xuICAgICAgICAgICAgICAgIC8vIHN1YnNjcmlwdGlvbiBpcyBwb3NzaWJsZS4gIERlc2lnbmVycyBvZiBzdWNoIG1lY2hhbmlzbXMgYXJlIGFsc29cbiAgICAgICAgICAgICAgICAvLyB3YXJuZWQgdG8gbWFrZSBhIGRpc3RpbmN0aW9uIGJldHdlZW4gc2VuZGluZyBhIE5PVElGWSBtZXNzYWdlIHRvIGFcbiAgICAgICAgICAgICAgICAvLyBzdWJzY3JpYmVyIHdobyBpcyBhd2FyZSBvZiB0aGUgc3Vic2NyaXB0aW9uLCBhbmQgc2VuZGluZyBhIE5PVElGWVxuICAgICAgICAgICAgICAgIC8vIG1lc3NhZ2UgdG8gYW4gdW5zdXNwZWN0aW5nIG5vZGUuICBUaGUgbGF0dGVyIGJlaGF2aW9yIGlzIGludmFsaWQsIGFuZFxuICAgICAgICAgICAgICAgIC8vIE1VU1QgcmVjZWl2ZSBhIFwiNDgxIFN1YnNjcmlwdGlvbiBkb2VzIG5vdCBleGlzdFwiIHJlc3BvbnNlICh1bmxlc3NcbiAgICAgICAgICAgICAgICAvLyBzb21lIG90aGVyIDQwMC0gb3IgNTAwLWNsYXNzIGVycm9yIGNvZGUgaXMgbW9yZSBhcHBsaWNhYmxlKSwgYXNcbiAgICAgICAgICAgICAgICAvLyBkZXNjcmliZWQgaW4gc2VjdGlvbiAzLjIuNC4gIEluIG90aGVyIHdvcmRzLCBrbm93bGVkZ2Ugb2YgYVxuICAgICAgICAgICAgICAgIC8vIHN1YnNjcmlwdGlvbiBtdXN0IGV4aXN0IGluIGJvdGggdGhlIHN1YnNjcmliZXIgYW5kIHRoZSBub3RpZmllciB0byBiZVxuICAgICAgICAgICAgICAgIC8vIHZhbGlkLCBldmVuIGlmIGluc3RhbGxlZCB2aWEgYSBub24tU1VCU0NSSUJFIG1lY2hhbmlzbS5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2NSNzZWN0aW9uLTMuMlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gTk9USUZZIHJlcXVlc3RzIGFyZSBzZW50IHRvIGluZm9ybSBzdWJzY3JpYmVycyBvZiBjaGFuZ2VzIGluIHN0YXRlIHRvXG4gICAgICAgICAgICAgICAgLy8gd2hpY2ggdGhlIHN1YnNjcmliZXIgaGFzIGEgc3Vic2NyaXB0aW9uLiAgU3Vic2NyaXB0aW9ucyBhcmUgY3JlYXRlZFxuICAgICAgICAgICAgICAgIC8vIHVzaW5nIHRoZSBTVUJTQ1JJQkUgbWV0aG9kLiAgSW4gbGVnYWN5IGltcGxlbWVudGF0aW9ucywgaXQgaXNcbiAgICAgICAgICAgICAgICAvLyBwb3NzaWJsZSB0aGF0IG90aGVyIG1lYW5zIG9mIHN1YnNjcmlwdGlvbiBjcmVhdGlvbiBoYXZlIGJlZW4gdXNlZC5cbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB0aGlzIHNwZWNpZmljYXRpb24gZG9lcyBub3QgYWxsb3cgdGhlIGNyZWF0aW9uIG9mXG4gICAgICAgICAgICAgICAgLy8gc3Vic2NyaXB0aW9ucyBleGNlcHQgdGhyb3VnaCBTVUJTQ1JJQkUgcmVxdWVzdHMgYW5kIChmb3IgYmFja3dhcmRzLVxuICAgICAgICAgICAgICAgIC8vIGNvbXBhdGliaWxpdHkpIFJFRkVSIHJlcXVlc3RzIFtSRkMzNTE1XS5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjY2NSNzZWN0aW9uLTMuMlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdWFzID0gbmV3IE5vdGlmeVVzZXJBZ2VudFNlcnZlcih0aGlzLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeSA/IHRoaXMuZGVsZWdhdGUub25Ob3RpZnkodWFzKSA6IHVhcy5yZWplY3QoeyBzdGF0dXNDb2RlOiA0MDUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDLk9QVElPTlM6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMS4yXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxvd0hlYWRlciA9IFwiQWxsb3c6IFwiICsgQWxsb3dlZE1ldGhvZHMudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXB0SGVhZGVyID0gXCJBY2NlcHQ6IFwiICsgYWNjZXB0ZWRCb2R5VHlwZXMudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYUhlYWRlcnM6IFthbGxvd0hlYWRlciwgYWNjZXB0SGVhZGVyXVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEMuUkVGRVI6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM1MTUjc2VjdGlvbi0yLjQuMlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdWFzID0gbmV3IFJlZmVyVXNlckFnZW50U2VydmVyKHRoaXMsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uUmVmZXIgPyB0aGlzLmRlbGVnYXRlLm9uUmVmZXIodWFzKSA6IHVhcy5yZWplY3QoeyBzdGF0dXNDb2RlOiA0MDUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDLlJFR0lTVEVSOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTAuM1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdWFzID0gbmV3IFJlZ2lzdGVyVXNlckFnZW50U2VydmVyKHRoaXMsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uUmVnaXN0ZXIgPyB0aGlzLmRlbGVnYXRlLm9uUmVnaXN0ZXIodWFzKSA6IHVhcy5yZWplY3QoeyBzdGF0dXNDb2RlOiA0MDUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDLlNVQlNDUklCRTpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjY2NSNzZWN0aW9uLTQuMlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdWFzID0gbmV3IFN1YnNjcmliZVVzZXJBZ2VudFNlcnZlcih0aGlzLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblN1YnNjcmliZSA/IHRoaXMuZGVsZWdhdGUub25TdWJzY3JpYmUodWFzKSA6IHVhcy5yZWplY3QoeyBzdGF0dXNDb2RlOiA0ODAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgb3V0IG9mIGRpYWxvZyByZXF1ZXN0IG1ldGhvZCAke21lc3NhZ2UubWV0aG9kfS5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc3BvbnNlcyBhcmUgZmlyc3QgcHJvY2Vzc2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIgYW5kIHRoZW4gcGFzc2VkXG4gICAgICogdXAgdG8gdGhlIHRyYW5zYWN0aW9uIGxheWVyLiAgVGhlIHRyYW5zYWN0aW9uIGxheWVyIHBlcmZvcm1zIGl0c1xuICAgICAqIHByb2Nlc3NpbmcgYW5kIHRoZW4gcGFzc2VzIHRoZSByZXNwb25zZSB1cCB0byB0aGUgVFUuICBUaGUgbWFqb3JpdHlcbiAgICAgKiBvZiByZXNwb25zZSBwcm9jZXNzaW5nIGluIHRoZSBUVSBpcyBtZXRob2Qgc3BlY2lmaWMuICBIb3dldmVyLCB0aGVyZVxuICAgICAqIGFyZSBzb21lIGdlbmVyYWwgYmVoYXZpb3JzIGluZGVwZW5kZW50IG9mIHRoZSBtZXRob2QuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjEuM1xuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gSW5jb21pbmcgcmVzcG9uc2UgbWVzc2FnZSBmcm9tIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKi9cbiAgICByZWNlaXZlUmVzcG9uc2VGcm9tVHJhbnNwb3J0KG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gOC4xLjMuMSBUcmFuc2FjdGlvbiBMYXllciBFcnJvcnNcbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjEuMy4xXG4gICAgICAgIC8vIEhhbmRsZWQgYnkgdHJhbnNhY3Rpb24gbGF5ZXIgY2FsbGJhY2tzLlxuICAgICAgICAvLyA4LjEuMy4yIFVucmVjb2duaXplZCBSZXNwb25zZXNcbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi04LjEuMy4xXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gOC4xLjMuMyBWaWFzXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOC4xLjMuM1xuICAgICAgICBpZiAobWVzc2FnZS5nZXRIZWFkZXJzKFwidmlhXCIpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJNb3JlIHRoYW4gb25lIFZpYSBoZWFkZXIgZmllbGQgcHJlc2VudCBpbiB0aGUgcmVzcG9uc2UsIGRyb3BwaW5nXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIDguMS4zLjQgUHJvY2Vzc2luZyAzeHggUmVzcG9uc2VzXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOC4xLjMuNFxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIDguMS4zLjUgUHJvY2Vzc2luZyA0eHggUmVzcG9uc2VzXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOC4xLjMuNVxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIFdoZW4gdGhlIHRyYW5zcG9ydCBsYXllciBpbiB0aGUgY2xpZW50IHJlY2VpdmVzIGEgcmVzcG9uc2UsIGl0IGhhcyB0b1xuICAgICAgICAvLyBkZXRlcm1pbmUgd2hpY2ggY2xpZW50IHRyYW5zYWN0aW9uIHdpbGwgaGFuZGxlIHRoZSByZXNwb25zZSwgc28gdGhhdFxuICAgICAgICAvLyB0aGUgcHJvY2Vzc2luZyBvZiBTZWN0aW9ucyAxNy4xLjEgYW5kIDE3LjEuMiBjYW4gdGFrZSBwbGFjZS4gIFRoZVxuICAgICAgICAvLyBicmFuY2ggcGFyYW1ldGVyIGluIHRoZSB0b3AgVmlhIGhlYWRlciBmaWVsZCBpcyB1c2VkIGZvciB0aGlzXG4gICAgICAgIC8vIHB1cnBvc2UuICBBIHJlc3BvbnNlIG1hdGNoZXMgYSBjbGllbnQgdHJhbnNhY3Rpb24gdW5kZXIgdHdvXG4gICAgICAgIC8vIGNvbmRpdGlvbnM6XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgIDEuICBJZiB0aGUgcmVzcG9uc2UgaGFzIHRoZSBzYW1lIHZhbHVlIG9mIHRoZSBicmFuY2ggcGFyYW1ldGVyIGluXG4gICAgICAgIC8vICAgICAgICB0aGUgdG9wIFZpYSBoZWFkZXIgZmllbGQgYXMgdGhlIGJyYW5jaCBwYXJhbWV0ZXIgaW4gdGhlIHRvcFxuICAgICAgICAvLyAgICAgICAgVmlhIGhlYWRlciBmaWVsZCBvZiB0aGUgcmVxdWVzdCB0aGF0IGNyZWF0ZWQgdGhlIHRyYW5zYWN0aW9uLlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICAyLiAgSWYgdGhlIG1ldGhvZCBwYXJhbWV0ZXIgaW4gdGhlIENTZXEgaGVhZGVyIGZpZWxkIG1hdGNoZXMgdGhlXG4gICAgICAgIC8vICAgICAgICBtZXRob2Qgb2YgdGhlIHJlcXVlc3QgdGhhdCBjcmVhdGVkIHRoZSB0cmFuc2FjdGlvbi4gIFRoZVxuICAgICAgICAvLyAgICAgICAgbWV0aG9kIGlzIG5lZWRlZCBzaW5jZSBhIENBTkNFTCByZXF1ZXN0IGNvbnN0aXR1dGVzIGFcbiAgICAgICAgLy8gICAgICAgIGRpZmZlcmVudCB0cmFuc2FjdGlvbiwgYnV0IHNoYXJlcyB0aGUgc2FtZSB2YWx1ZSBvZiB0aGUgYnJhbmNoXG4gICAgICAgIC8vICAgICAgICBwYXJhbWV0ZXIuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTcuMS4zXG4gICAgICAgIGNvbnN0IHVzZXJBZ2VudENsaWVudElkID0gbWVzc2FnZS52aWFCcmFuY2ggKyBtZXNzYWdlLm1ldGhvZDtcbiAgICAgICAgY29uc3QgdXNlckFnZW50Q2xpZW50ID0gdGhpcy51c2VyQWdlbnRDbGllbnRzLmdldCh1c2VyQWdlbnRDbGllbnRJZCk7XG4gICAgICAgIC8vIFRoZSBjbGllbnQgdHJhbnNwb3J0IHVzZXMgdGhlIG1hdGNoaW5nIHByb2NlZHVyZXMgb2YgU2VjdGlvblxuICAgICAgICAvLyAxNy4xLjMgdG8gYXR0ZW1wdCB0byBtYXRjaCB0aGUgcmVzcG9uc2UgdG8gYW4gZXhpc3RpbmdcbiAgICAgICAgLy8gdHJhbnNhY3Rpb24uICBJZiB0aGVyZSBpcyBhIG1hdGNoLCB0aGUgcmVzcG9uc2UgTVVTVCBiZSBwYXNzZWQgdG9cbiAgICAgICAgLy8gdGhhdCB0cmFuc2FjdGlvbi4gIE90aGVyd2lzZSwgYW55IGVsZW1lbnQgb3RoZXIgdGhhbiBhIHN0YXRlbGVzc1xuICAgICAgICAvLyBwcm94eSBNVVNUIHNpbGVudGx5IGRpc2NhcmQgdGhlIHJlc3BvbnNlLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjAyNiNzZWN0aW9uLTguOVxuICAgICAgICBpZiAodXNlckFnZW50Q2xpZW50KSB7XG4gICAgICAgICAgICB1c2VyQWdlbnRDbGllbnQudHJhbnNhY3Rpb24ucmVjZWl2ZVJlc3BvbnNlKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgRGlzY2FyZGluZyB1bm1hdGNoZWQgJHttZXNzYWdlLnN0YXR1c0NvZGV9IHJlc3BvbnNlIHRvICR7bWVzc2FnZS5tZXRob2R9ICR7dXNlckFnZW50Q2xpZW50SWR9LmApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8taW5uZXItZGVjbGFyYXRpb25zICovXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlICovXG5pbXBvcnQgeyBHcmFtbWFyIH0gZnJvbSBcIi4uLy4uL2dyYW1tYXJcIjtcbmltcG9ydCB7IEluY29taW5nUmVxdWVzdE1lc3NhZ2UgfSBmcm9tIFwiLi9pbmNvbWluZy1yZXF1ZXN0LW1lc3NhZ2VcIjtcbmltcG9ydCB7IEluY29taW5nUmVzcG9uc2VNZXNzYWdlIH0gZnJvbSBcIi4vaW5jb21pbmctcmVzcG9uc2UtbWVzc2FnZVwiO1xuLyoqXG4gKiBFeHRyYWN0IGFuZCBwYXJzZSBldmVyeSBoZWFkZXIgb2YgYSBTSVAgbWVzc2FnZS5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIFBhcnNlcjtcbihmdW5jdGlvbiAoUGFyc2VyKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBmdW5jdGlvbiBnZXRIZWFkZXIoZGF0YSwgaGVhZGVyU3RhcnQpIHtcbiAgICAgICAgLy8gJ3N0YXJ0JyBwb3NpdGlvbiBvZiB0aGUgaGVhZGVyLlxuICAgICAgICBsZXQgc3RhcnQgPSBoZWFkZXJTdGFydDtcbiAgICAgICAgLy8gJ2VuZCcgcG9zaXRpb24gb2YgdGhlIGhlYWRlci5cbiAgICAgICAgbGV0IGVuZCA9IDA7XG4gICAgICAgIC8vICdwYXJ0aWFsIGVuZCcgcG9zaXRpb24gb2YgdGhlIGhlYWRlci5cbiAgICAgICAgbGV0IHBhcnRpYWxFbmQgPSAwO1xuICAgICAgICAvLyBFbmQgb2YgbWVzc2FnZS5cbiAgICAgICAgaWYgKGRhdGEuc3Vic3RyaW5nKHN0YXJ0LCBzdGFydCArIDIpLm1hdGNoKC8oXlxcclxcbikvKSkge1xuICAgICAgICAgICAgcmV0dXJuIC0yO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChlbmQgPT09IDApIHtcbiAgICAgICAgICAgIC8vIFBhcnRpYWwgRW5kIG9mIEhlYWRlci5cbiAgICAgICAgICAgIHBhcnRpYWxFbmQgPSBkYXRhLmluZGV4T2YoXCJcXHJcXG5cIiwgc3RhcnQpO1xuICAgICAgICAgICAgLy8gJ2luZGV4T2YnIHJldHVybnMgLTEgaWYgdGhlIHZhbHVlIHRvIGJlIGZvdW5kIG5ldmVyIG9jY3Vycy5cbiAgICAgICAgICAgIGlmIChwYXJ0aWFsRW5kID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0aWFsRW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkYXRhLnN1YnN0cmluZyhwYXJ0aWFsRW5kICsgMiwgcGFydGlhbEVuZCArIDQpLm1hdGNoKC8oXlxcclxcbikvKSAmJlxuICAgICAgICAgICAgICAgIGRhdGEuY2hhckF0KHBhcnRpYWxFbmQgKyAyKS5tYXRjaCgvKF5cXHMrKS8pKSB7XG4gICAgICAgICAgICAgICAgLy8gTm90IHRoZSBlbmQgb2YgdGhlIG1lc3NhZ2UuIENvbnRpbnVlIGZyb20gdGhlIG5leHQgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgc3RhcnQgPSBwYXJ0aWFsRW5kICsgMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVuZCA9IHBhcnRpYWxFbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuZDtcbiAgICB9XG4gICAgUGFyc2VyLmdldEhlYWRlciA9IGdldEhlYWRlcjtcbiAgICBmdW5jdGlvbiBwYXJzZUhlYWRlcihtZXNzYWdlLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGRhdGEsIGhlYWRlclN0YXJ0LCBoZWFkZXJFbmQpIHtcbiAgICAgICAgY29uc3QgaGNvbG9uSW5kZXggPSBkYXRhLmluZGV4T2YoXCI6XCIsIGhlYWRlclN0YXJ0KTtcbiAgICAgICAgY29uc3QgaGVhZGVyTmFtZSA9IGRhdGEuc3Vic3RyaW5nKGhlYWRlclN0YXJ0LCBoY29sb25JbmRleCkudHJpbSgpO1xuICAgICAgICBjb25zdCBoZWFkZXJWYWx1ZSA9IGRhdGEuc3Vic3RyaW5nKGhjb2xvbkluZGV4ICsgMSwgaGVhZGVyRW5kKS50cmltKCk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCBwYXJzZWQ7XG4gICAgICAgIC8vIElmIGhlYWRlci1maWVsZCBpcyB3ZWxsLWtub3duLCBwYXJzZSBpdC5cbiAgICAgICAgc3dpdGNoIChoZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ2aWFcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ2XCI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hZGRIZWFkZXIoXCJ2aWFcIiwgaGVhZGVyVmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdldEhlYWRlcnMoXCJ2aWFcIikubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoXCJWaWFcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmlhID0gcGFyc2VkO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52aWFCcmFuY2ggPSBwYXJzZWQuYnJhbmNoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWQgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJmcm9tXCI6XG4gICAgICAgICAgICBjYXNlIFwiZlwiOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKFwiZnJvbVwiLCBoZWFkZXJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcihcImZyb21cIik7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZCkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZyb20gPSBwYXJzZWQ7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZnJvbVRhZyA9IHBhcnNlZC5nZXRQYXJhbShcInRhZ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidG9cIjpcbiAgICAgICAgICAgIGNhc2UgXCJ0XCI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zZXRIZWFkZXIoXCJ0b1wiLCBoZWFkZXJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcihcInRvXCIpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50byA9IHBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50b1RhZyA9IHBhcnNlZC5nZXRQYXJhbShcInRhZ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmVjb3JkLXJvdXRlXCI6XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gR3JhbW1hci5wYXJzZShoZWFkZXJWYWx1ZSwgXCJSZWNvcmRfUm91dGVcIik7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEocGFyc2VkIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcnNlZC5mb3JFYWNoKChoZWFkZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hZGRIZWFkZXIoXCJyZWNvcmQtcm91dGVcIiwgaGVhZGVyVmFsdWUuc3Vic3RyaW5nKGhlYWRlci5wb3NpdGlvbiwgaGVhZGVyLm9mZnNldCkpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmhlYWRlcnNbXCJSZWNvcmQtUm91dGVcIl1bbWVzc2FnZS5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLmxlbmd0aCAtIDFdLnBhcnNlZCA9IGhlYWRlci5wYXJzZWQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY2FsbC1pZFwiOlxuICAgICAgICAgICAgY2FzZSBcImlcIjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNldEhlYWRlcihcImNhbGwtaWRcIiwgaGVhZGVyVmFsdWUpO1xuICAgICAgICAgICAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoXCJjYWxsLWlkXCIpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jYWxsSWQgPSBoZWFkZXJWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY29udGFjdFwiOlxuICAgICAgICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgICAgICAgICBwYXJzZWQgPSBHcmFtbWFyLnBhcnNlKGhlYWRlclZhbHVlLCBcIkNvbnRhY3RcIik7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEocGFyc2VkIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcnNlZC5mb3JFYWNoKChoZWFkZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hZGRIZWFkZXIoXCJjb250YWN0XCIsIGhlYWRlclZhbHVlLnN1YnN0cmluZyhoZWFkZXIucG9zaXRpb24sIGhlYWRlci5vZmZzZXQpKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5oZWFkZXJzLkNvbnRhY3RbbWVzc2FnZS5nZXRIZWFkZXJzKFwiY29udGFjdFwiKS5sZW5ndGggLSAxXS5wYXJzZWQgPSBoZWFkZXIucGFyc2VkO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNvbnRlbnQtbGVuZ3RoXCI6XG4gICAgICAgICAgICBjYXNlIFwibFwiOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKFwiY29udGVudC1sZW5ndGhcIiwgaGVhZGVyVmFsdWUpO1xuICAgICAgICAgICAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoXCJjb250ZW50LWxlbmd0aFwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJjb250ZW50LXR5cGVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zZXRIZWFkZXIoXCJjb250ZW50LXR5cGVcIiwgaGVhZGVyVmFsdWUpO1xuICAgICAgICAgICAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoXCJjb250ZW50LXR5cGVcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY3NlcVwiOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKFwiY3NlcVwiLCBoZWFkZXJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcihcImNzZXFcIik7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZCkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNzZXEgPSBwYXJzZWQudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgSW5jb21pbmdSZXNwb25zZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXRob2QgPSBwYXJzZWQubWV0aG9kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJtYXgtZm9yd2FyZHNcIjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNldEhlYWRlcihcIm1heC1mb3J3YXJkc1wiLCBoZWFkZXJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcihcIm1heC1mb3J3YXJkc1wiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ3d3ctYXV0aGVudGljYXRlXCI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zZXRIZWFkZXIoXCJ3d3ctYXV0aGVudGljYXRlXCIsIGhlYWRlclZhbHVlKTtcbiAgICAgICAgICAgICAgICBwYXJzZWQgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKFwid3d3LWF1dGhlbnRpY2F0ZVwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJwcm94eS1hdXRoZW50aWNhdGVcIjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNldEhlYWRlcihcInByb3h5LWF1dGhlbnRpY2F0ZVwiLCBoZWFkZXJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcihcInByb3h5LWF1dGhlbnRpY2F0ZVwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZWZlci10b1wiOlxuICAgICAgICAgICAgY2FzZSBcInJcIjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNldEhlYWRlcihcInJlZmVyLXRvXCIsIGhlYWRlclZhbHVlKTtcbiAgICAgICAgICAgICAgICBwYXJzZWQgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKFwicmVmZXItdG9cIik7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZCkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlZmVyVG8gPSBwYXJzZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBEbyBub3QgcGFyc2UgdGhpcyBoZWFkZXIuXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hZGRIZWFkZXIoaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpLCBoZWFkZXJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZXJyb3I6IFwiZXJyb3IgcGFyc2luZyBoZWFkZXIgJ1wiICsgaGVhZGVyTmFtZSArIFwiJ1wiXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUGFyc2VyLnBhcnNlSGVhZGVyID0gcGFyc2VIZWFkZXI7XG4gICAgZnVuY3Rpb24gcGFyc2VNZXNzYWdlKGRhdGEsIGxvZ2dlcikge1xuICAgICAgICBsZXQgaGVhZGVyU3RhcnQgPSAwO1xuICAgICAgICBsZXQgaGVhZGVyRW5kID0gZGF0YS5pbmRleE9mKFwiXFxyXFxuXCIpO1xuICAgICAgICBpZiAoaGVhZGVyRW5kID09PSAtMSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJubyBDUkxGIGZvdW5kLCBub3QgYSBTSVAgbWVzc2FnZSwgZGlzY2FyZGVkXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIGZpcnN0IGxpbmUuIENoZWNrIGlmIGl0IGlzIGEgUmVxdWVzdCBvciBhIFJlcGx5LlxuICAgICAgICBjb25zdCBmaXJzdExpbmUgPSBkYXRhLnN1YnN0cmluZygwLCBoZWFkZXJFbmQpO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBHcmFtbWFyLnBhcnNlKGZpcnN0TGluZSwgXCJSZXF1ZXN0X1Jlc3BvbnNlXCIpO1xuICAgICAgICBsZXQgbWVzc2FnZTtcbiAgICAgICAgaWYgKHBhcnNlZCA9PT0gLTEpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdlcnJvciBwYXJzaW5nIGZpcnN0IGxpbmUgb2YgU0lQIG1lc3NhZ2U6IFwiJyArIGZpcnN0TGluZSArICdcIicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFwYXJzZWQuc3RhdHVzX2NvZGUpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBuZXcgSW5jb21pbmdSZXF1ZXN0TWVzc2FnZSgpO1xuICAgICAgICAgICAgbWVzc2FnZS5tZXRob2QgPSBwYXJzZWQubWV0aG9kO1xuICAgICAgICAgICAgbWVzc2FnZS5ydXJpID0gcGFyc2VkLnVyaTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBuZXcgSW5jb21pbmdSZXNwb25zZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgIG1lc3NhZ2Uuc3RhdHVzQ29kZSA9IHBhcnNlZC5zdGF0dXNfY29kZTtcbiAgICAgICAgICAgIG1lc3NhZ2UucmVhc29uUGhyYXNlID0gcGFyc2VkLnJlYXNvbl9waHJhc2U7XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZS5kYXRhID0gZGF0YTtcbiAgICAgICAgaGVhZGVyU3RhcnQgPSBoZWFkZXJFbmQgKyAyO1xuICAgICAgICAvLyBMb29wIG92ZXIgZXZlcnkgbGluZSBpbiBkYXRhLiBEZXRlY3QgdGhlIGVuZCBvZiBlYWNoIGhlYWRlciBhbmQgcGFyc2VcbiAgICAgICAgLy8gaXQgb3Igc2ltcGx5IGFkZCB0byB0aGUgaGVhZGVycyBjb2xsZWN0aW9uLlxuICAgICAgICBsZXQgYm9keVN0YXJ0O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBoZWFkZXJFbmQgPSBnZXRIZWFkZXIoZGF0YSwgaGVhZGVyU3RhcnQpO1xuICAgICAgICAgICAgLy8gVGhlIFNJUCBtZXNzYWdlIGhhcyBub3JtYWxseSBmaW5pc2hlZC5cbiAgICAgICAgICAgIGlmIChoZWFkZXJFbmQgPT09IC0yKSB7XG4gICAgICAgICAgICAgICAgYm9keVN0YXJ0ID0gaGVhZGVyU3RhcnQgKyAyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZGVyRW5kID09PSAtMSkge1xuICAgICAgICAgICAgICAgIC8vIGRhdGEuaW5kZXhPZiByZXR1cm5lZCAtMSBkdWUgdG8gYSBtYWxmb3JtZWQgbWVzc2FnZS5cbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJtYWxmb3JtZWQgbWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRIZWFkZXIgPSBwYXJzZUhlYWRlcihtZXNzYWdlLCBkYXRhLCBoZWFkZXJTdGFydCwgaGVhZGVyRW5kKTtcbiAgICAgICAgICAgIGlmIChwYXJzZWRIZWFkZXIgJiYgcGFyc2VkSGVhZGVyICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKHBhcnNlZEhlYWRlci5lcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVhZGVyU3RhcnQgPSBoZWFkZXJFbmQgKyAyO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJGQzMyNjEgMTguMy5cbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGFkZGl0aW9uYWwgYnl0ZXMgaW4gdGhlIHRyYW5zcG9ydCBwYWNrZXRcbiAgICAgICAgLy8gYmV5b25kIHRoZSBlbmQgb2YgdGhlIGJvZHksIHRoZXkgTVVTVCBiZSBkaXNjYXJkZWQuXG4gICAgICAgIGlmIChtZXNzYWdlLmhhc0hlYWRlcihcImNvbnRlbnQtbGVuZ3RoXCIpKSB7XG4gICAgICAgICAgICBtZXNzYWdlLmJvZHkgPSBkYXRhLnN1YnN0cihib2R5U3RhcnQsIE51bWJlcihtZXNzYWdlLmdldEhlYWRlcihcImNvbnRlbnQtbGVuZ3RoXCIpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlLmJvZHkgPSBkYXRhLnN1YnN0cmluZyhib2R5U3RhcnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cbiAgICBQYXJzZXIucGFyc2VNZXNzYWdlID0gcGFyc2VNZXNzYWdlO1xufSkoUGFyc2VyIHx8IChQYXJzZXIgPSB7fSkpO1xuIiwiLyoqXG4gKiB7QGxpbmsgVHJhbnNwb3J0fSBzdGF0ZS5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhlIHtAbGluayBUcmFuc3BvcnR9IGJlaGF2ZXMgaW4gYSBkZXRlcm1pbmlzdGljIG1hbm5lciBhY2NvcmRpbmcgdG8gdGhlIGZvbGxvd2luZ1xuICogRmluaXRlIFN0YXRlIE1hY2hpbmUgKEZTTSkuXG4gKiBgYGB0eHRcbiAqICAgICAgICAgICAgICAgICAgICBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cbiAqICAgICAgICAgICAgICAgICAgIHwgICAgX19fX19fX19fX19fICAgICAgICAgICAgICB8XG4gKiBUcmFuc3BvcnQgICAgICAgICB2ICAgdiAgICAgICAgICAgIHwgICAgICAgICAgICAgfFxuICogQ29uc3RydWN0ZWQgLT4gRGlzY29ubmVjdGVkIC0+IENvbm5lY3RpbmcgLT4gQ29ubmVjdGVkIC0+IERpc2Nvbm5lY3RpbmdcbiAqICAgICAgICAgICAgICAgICAgICAgXiAgICAgICAgICAgIF4gICAgfF9fX19fX19fX19fX19fX19fX19fX14gIHwgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgIHxfX19fX19fX19fX19fX19fX19fX19fX19fX19fX3wgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgfF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX3xcbiAqIGBgYFxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdmFyIFRyYW5zcG9ydFN0YXRlO1xuKGZ1bmN0aW9uIChUcmFuc3BvcnRTdGF0ZSkge1xuICAgIC8qKlxuICAgICAqIFRoZSBgY29ubmVjdCgpYCBtZXRob2Qgd2FzIGNhbGxlZC5cbiAgICAgKi9cbiAgICBUcmFuc3BvcnRTdGF0ZVtcIkNvbm5lY3RpbmdcIl0gPSBcIkNvbm5lY3RpbmdcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgYGNvbm5lY3QoKWAgbWV0aG9kIHJlc29sdmVkLlxuICAgICAqL1xuICAgIFRyYW5zcG9ydFN0YXRlW1wiQ29ubmVjdGVkXCJdID0gXCJDb25uZWN0ZWRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgYGRpc2Nvbm5lY3QoKWAgbWV0aG9kIHdhcyBjYWxsZWQuXG4gICAgICovXG4gICAgVHJhbnNwb3J0U3RhdGVbXCJEaXNjb25uZWN0aW5nXCJdID0gXCJEaXNjb25uZWN0aW5nXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGBjb25uZWN0KClgIG1ldGhvZCB3YXMgcmVqZWN0ZWQsIG9yXG4gICAgICogdGhlIGBkaXNjb25uZWN0KClgIG1ldGhvZCBjb21wbGV0ZWQsIG9yXG4gICAgICogbmV0d29yayBjb25uZWN0aXZpdHkgd2FzIGxvc3QuXG4gICAgICovXG4gICAgVHJhbnNwb3J0U3RhdGVbXCJEaXNjb25uZWN0ZWRcIl0gPSBcIkRpc2Nvbm5lY3RlZFwiO1xufSkoVHJhbnNwb3J0U3RhdGUgfHwgKFRyYW5zcG9ydFN0YXRlID0ge30pKTtcbiIsIi8qKlxuICoge0BsaW5rIFVzZXJBZ2VudH0gc3RhdGUuXG4gKiBAcmVtYXJrc1xuICogVmFsaWQgc3RhdGUgdHJhbnNpdGlvbnM6XG4gKiBgYGBcbiAqIDEuIFwiU3RhcnRlZFwiIC0tPiBcIlN0b3BwZWRcIlxuICogMi4gXCJTdG9wcGVkXCIgLS0+IFwiU3RhcnRlZFwiXG4gKiBgYGBcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHZhciBVc2VyQWdlbnRTdGF0ZTtcbihmdW5jdGlvbiAoVXNlckFnZW50U3RhdGUpIHtcbiAgICBVc2VyQWdlbnRTdGF0ZVtcIlN0YXJ0ZWRcIl0gPSBcIlN0YXJ0ZWRcIjtcbiAgICBVc2VyQWdlbnRTdGF0ZVtcIlN0b3BwZWRcIl0gPSBcIlN0b3BwZWRcIjtcbn0pKFVzZXJBZ2VudFN0YXRlIHx8IChVc2VyQWdlbnRTdGF0ZSA9IHt9KSk7XG4iLCIvKipcbiAqIHtAbGluayBSZWdpc3RlcmVyfSBzdGF0ZS5cbiAqIEByZW1hcmtzXG4gKiBUaGUge0BsaW5rIFJlZ2lzdGVyZXJ9IGJlaGF2ZXMgaW4gYSBkZXRlcm1pbmlzdGljIG1hbm5lciBhY2NvcmRpbmcgdG8gdGhlIGZvbGxvd2luZ1xuICogRmluaXRlIFN0YXRlIE1hY2hpbmUgKEZTTSkuXG4gKiBgYGB0eHRcbiAqICAgICAgICAgICAgICAgICAgIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1xuICogICAgICAgICAgICAgICAgICB8ICBfX19fX19fX19fX19fX19fX19fX19fX19fXyAgICAgICAgICAgICAgfFxuICogUmVnaXN0ZXJlciAgICAgICB8IHwgICAgICAgICAgICAgICAgICAgICAgICAgIHYgICAgICAgICAgICAgdlxuICogQ29uc3RydWN0ZWQgLT4gSW5pdGlhbCAtPiBSZWdpc3RlcmVkIC0+IFVucmVnaXN0ZXJlZCAtPiBUZXJtaW5hdGVkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICBeX19fX19fX19fX19ffCAgICAgICAgICAgICBeXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxfX19fX19fX19fX19fX19fX19fX19fX19fX19fX198XG4gKiBgYGBcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHZhciBSZWdpc3RlcmVyU3RhdGU7XG4oZnVuY3Rpb24gKFJlZ2lzdGVyZXJTdGF0ZSkge1xuICAgIFJlZ2lzdGVyZXJTdGF0ZVtcIkluaXRpYWxcIl0gPSBcIkluaXRpYWxcIjtcbiAgICBSZWdpc3RlcmVyU3RhdGVbXCJSZWdpc3RlcmVkXCJdID0gXCJSZWdpc3RlcmVkXCI7XG4gICAgUmVnaXN0ZXJlclN0YXRlW1wiVW5yZWdpc3RlcmVkXCJdID0gXCJVbnJlZ2lzdGVyZWRcIjtcbiAgICBSZWdpc3RlcmVyU3RhdGVbXCJUZXJtaW5hdGVkXCJdID0gXCJUZXJtaW5hdGVkXCI7XG59KShSZWdpc3RlcmVyU3RhdGUgfHwgKFJlZ2lzdGVyZXJTdGF0ZSA9IHt9KSk7XG4iLCIvKipcbiAqIEFuIHtAbGluayBFbWl0dGVyfSBpbXBsZW1lbnRhdGlvbi5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgRW1pdHRlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IG5ldyBBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuZXZlciB0aGUgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIC0gQ2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0aGF0IHNwZWNpZmllcyBjaGFyYWN0ZXJpc3RpY3MgYWJvdXQgdGhlIGxpc3RlbmVyLlxuICAgICAqICAgICAgICAgICAgICAgICAgSWYgb25jZSB0cnVlLCBpbmRpY2F0ZXMgdGhhdCB0aGUgbGlzdGVuZXIgc2hvdWxkIGJlIGludm9rZWQgYXQgbW9zdCBvbmNlIGFmdGVyIGJlaW5nIGFkZGVkLlxuICAgICAqICAgICAgICAgICAgICAgICAgSWYgb25jZSB0cnVlLCB0aGUgbGlzdGVuZXIgd291bGQgYmUgYXV0b21hdGljYWxseSByZW1vdmVkIHdoZW4gaW52b2tlZC5cbiAgICAgKi9cbiAgICBhZGRMaXN0ZW5lcihsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBvbmNlV3JhcHBlciA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKG9uY2VXcmFwcGVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyKGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9uY2UpID09PSB0cnVlID8gdGhpcy5saXN0ZW5lcnMucHVzaChvbmNlV3JhcHBlcikgOiB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdCBjaGFuZ2UuXG4gICAgICogQHBhcmFtIGRhdGEgLSBEYXRhIHRvIGVtaXQuXG4gICAgICovXG4gICAgZW1pdChkYXRhKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnNsaWNlKCkuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKGRhdGEpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgbGlzdGVuZXJzIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCB3aXRoIGFkZExpc3RlbmVyLlxuICAgICAqL1xuICAgIHJlbW92ZUFsbExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGxpc3RlbmVyIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCB3aXRoIGFkZExpc3RlbmVyLlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciAtIENhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMuZmlsdGVyKChsKSA9PiBsICE9PSBsaXN0ZW5lcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyLlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciAtIENhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBhZGRMaXN0ZW5lci5cbiAgICAgKi9cbiAgICBvbihsaXN0ZW5lcikge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIGEgbGlzdGVuZXIuXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIC0gQ2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHJlbW92ZUxpc3RlbmVyLlxuICAgICAqL1xuICAgIG9mZihsaXN0ZW5lcikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoZW4gdW5yZWdpc3RlcnMgdGhlIGxpc3RlbmVyIGFmdGVyIG9uZSBldmVudCBlbWlzc2lvbi5cbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgLSBDYWxsYmFjayBmdW5jdGlvbi5cbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYWRkTGlzdGVuZXIuXG4gICAgICovXG4gICAgb25jZShsaXN0ZW5lcikge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcihsaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEV4Y2VwdGlvbiB9IGZyb20gXCIuLi8uLi9jb3JlXCI7XG4vKipcbiAqIEFuIGV4Y2VwdGlvbiBpbmRpY2F0aW5nIGFuIGludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBlcnJvciBvY2N1cmVkLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU3RhdGVUcmFuc2l0aW9uRXJyb3IgZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSA/IG1lc3NhZ2UgOiBcIkFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBzdGF0ZSB0cmFuc2l0aW9uLlwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBFbWl0dGVySW1wbCB9IGZyb20gXCIuLi8uLi8uLi9hcGkvZW1pdHRlclwiO1xuaW1wb3J0IHsgU3RhdGVUcmFuc2l0aW9uRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCB7IFRyYW5zcG9ydFN0YXRlIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS90cmFuc3BvcnQtc3RhdGVcIjtcbmltcG9ydCB7IEdyYW1tYXIgfSBmcm9tIFwiLi4vLi4vLi4vY29yZVwiO1xuLyoqXG4gKiBUcmFuc3BvcnQgZm9yIFNJUCBvdmVyIHNlY3VyZSBXZWJTb2NrZXQgKFdTUykuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc3BvcnQge1xuICAgIGNvbnN0cnVjdG9yKGxvZ2dlciwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IFRyYW5zcG9ydFN0YXRlLkRpc2Nvbm5lY3RlZDtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgLy8gc3RhdGUgZW1pdHRlclxuICAgICAgICB0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlciA9IG5ldyBFbWl0dGVySW1wbCgpO1xuICAgICAgICAvLyBsb2dnZXJcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgICAgIC8vIGd1YXJkIGRlcHJlY2F0ZWQgb3B0aW9ucyAocmVtb3ZlIHRoaXMgaW4gdmVyc2lvbiAxNi54KVxuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnNEZXByZWNhdGVkID0gb3B0aW9ucztcbiAgICAgICAgICAgIGNvbnN0IHdzU2VydmVyc0RlcHJlY2F0ZWQgPSBvcHRpb25zRGVwcmVjYXRlZCA9PT0gbnVsbCB8fCBvcHRpb25zRGVwcmVjYXRlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9uc0RlcHJlY2F0ZWQud3NTZXJ2ZXJzO1xuICAgICAgICAgICAgY29uc3QgbWF4UmVjb25uZWN0aW9uQXR0ZW1wdHNEZXByZWNhdGVkID0gb3B0aW9uc0RlcHJlY2F0ZWQgPT09IG51bGwgfHwgb3B0aW9uc0RlcHJlY2F0ZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnNEZXByZWNhdGVkLm1heFJlY29ubmVjdGlvbkF0dGVtcHRzO1xuICAgICAgICAgICAgaWYgKHdzU2VydmVyc0RlcHJlY2F0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcHJlY2F0ZWRNZXNzYWdlID0gYFRoZSB0cmFuc3BvcnQgb3B0aW9uIFwid3NTZXJ2ZXJzXCIgYXMgaGFzIGFwcGFyZW50bHkgYmVlbiBzcGVjaWZpZWQgYW5kIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIGAgK1xuICAgICAgICAgICAgICAgICAgICBcIkl0IHdpbGwgbm8gbG9uZ2VyIGJlIGF2YWlsYWJsZSBzdGFydGluZyB3aXRoIFNJUC5qcyByZWxlYXNlIDAuMTYuMC4gUGxlYXNlIHVwZGF0ZSBhY2NvcmRpbmdseS5cIjtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGRlcHJlY2F0ZWRNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYXhSZWNvbm5lY3Rpb25BdHRlbXB0c0RlcHJlY2F0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcHJlY2F0ZWRNZXNzYWdlID0gYFRoZSB0cmFuc3BvcnQgb3B0aW9uIFwibWF4UmVjb25uZWN0aW9uQXR0ZW1wdHNcIiBhcyBoYXMgYXBwYXJlbnRseSBiZWVuIHNwZWNpZmllZCBhbmQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gYCArXG4gICAgICAgICAgICAgICAgICAgIFwiSXQgd2lsbCBubyBsb25nZXIgYmUgYXZhaWxhYmxlIHN0YXJ0aW5nIHdpdGggU0lQLmpzIHJlbGVhc2UgMC4xNi4wLiBQbGVhc2UgdXBkYXRlIGFjY29yZGluZ2x5LlwiO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oZGVwcmVjYXRlZE1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaGFja1xuICAgICAgICAgICAgaWYgKHdzU2VydmVyc0RlcHJlY2F0ZWQgJiYgIW9wdGlvbnMuc2VydmVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3c1NlcnZlcnNEZXByZWNhdGVkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VydmVyID0gd3NTZXJ2ZXJzRGVwcmVjYXRlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHdzU2VydmVyc0RlcHJlY2F0ZWQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNlcnZlciA9IHdzU2VydmVyc0RlcHJlY2F0ZWRbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGluaXRpYWxpemUgY29uZmlndXJhdGlvblxuICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIFRyYW5zcG9ydC5kZWZhdWx0T3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAvLyB2YWxpZGF0ZSBzZXJ2ZXIgVVJMXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZXJ2ZXI7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEdyYW1tYXIucGFyc2UodXJsLCBcImFic29sdXRlVVJJXCIpO1xuICAgICAgICBpZiAocGFyc2VkID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEludmFsaWQgV2ViU29ja2V0IFNlcnZlciBVUkwgXCIke3VybH1cImApO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBXZWJTb2NrZXQgU2VydmVyIFVSTFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIVtcIndzc1wiLCBcIndzXCIsIFwidWRwXCJdLmluY2x1ZGVzKHBhcnNlZC5zY2hlbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgSW52YWxpZCBzY2hlbWUgaW4gV2ViU29ja2V0IFNlcnZlciBVUkwgXCIke3VybH1cImApO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzY2hlbWUgaW4gV2ViU29ja2V0IFNlcnZlciBVUkxcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHJvdG9jb2wgPSBwYXJzZWQuc2NoZW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHByb3RvY29sLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBGb3JtYXR0ZWQgYXMgZGVmaW5lZCBmb3IgdGhlIFZpYSBoZWFkZXIgc2VudC1wcm90b2NvbCB0cmFuc3BvcnQuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0yMC40MlxuICAgICAqL1xuICAgIGdldCBwcm90b2NvbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3RvY29sO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgVVJMIG9mIHRoZSBXZWJTb2NrZXQgU2VydmVyLlxuICAgICAqL1xuICAgIGdldCBzZXJ2ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24uc2VydmVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc3BvcnQgc3RhdGUuXG4gICAgICovXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zcG9ydCBzdGF0ZSBjaGFuZ2UgZW1pdHRlci5cbiAgICAgKi9cbiAgICBnZXQgc3RhdGVDaGFuZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIFdlYlNvY2tldC5cbiAgICAgKi9cbiAgICBnZXQgd3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0byBuZXR3b3JrLlxuICAgICAqIFJlc29sdmVzIG9uY2UgY29ubmVjdGVkLiBPdGhlcndpc2UgcmVqZWN0cyB3aXRoIGFuIEVycm9yLlxuICAgICAqL1xuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25uZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3QgZnJvbSBuZXR3b3JrLlxuICAgICAqIFJlc29sdmVzIG9uY2UgZGlzY29ubmVjdGVkLiBPdGhlcndpc2UgcmVqZWN0cyB3aXRoIGFuIEVycm9yLlxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNjb25uZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYHN0YXRlYCBlcXVhbHMgXCJDb25uZWN0ZWRcIi5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byBgc3RhdGUgPT09IFRyYW5zcG9ydFN0YXRlLkNvbm5lY3RlZGAuXG4gICAgICovXG4gICAgaXNDb25uZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSBUcmFuc3BvcnRTdGF0ZS5Db25uZWN0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgbWVzc2FnZS5cbiAgICAgKiBSZXNvbHZlcyBvbmNlIG1lc3NhZ2UgaXMgc2VudC4gT3RoZXJ3aXNlIHJlamVjdHMgd2l0aCBhbiBFcnJvci5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIE1lc3NhZ2UgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gRXJyb3IgaGFuZGxpbmcgaXMgaW5kZXBlbmRlbnQgb2Ygd2hldGhlciB0aGUgbWVzc2FnZSB3YXMgYSByZXF1ZXN0IG9yXG4gICAgICAgIC8vIHJlc3BvbnNlLlxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiB0aGUgdHJhbnNwb3J0IHVzZXIgYXNrcyBmb3IgYSBtZXNzYWdlIHRvIGJlIHNlbnQgb3ZlciBhblxuICAgICAgICAvLyB1bnJlbGlhYmxlIHRyYW5zcG9ydCwgYW5kIHRoZSByZXN1bHQgaXMgYW4gSUNNUCBlcnJvciwgdGhlIGJlaGF2aW9yXG4gICAgICAgIC8vIGRlcGVuZHMgb24gdGhlIHR5cGUgb2YgSUNNUCBlcnJvci4gIEhvc3QsIG5ldHdvcmssIHBvcnQgb3IgcHJvdG9jb2xcbiAgICAgICAgLy8gdW5yZWFjaGFibGUgZXJyb3JzLCBvciBwYXJhbWV0ZXIgcHJvYmxlbSBlcnJvcnMgU0hPVUxEIGNhdXNlIHRoZVxuICAgICAgICAvLyB0cmFuc3BvcnQgbGF5ZXIgdG8gaW5mb3JtIHRoZSB0cmFuc3BvcnQgdXNlciBvZiBhIGZhaWx1cmUgaW4gc2VuZGluZy5cbiAgICAgICAgLy8gU291cmNlIHF1ZW5jaCBhbmQgVFRMIGV4Y2VlZGVkIElDTVAgZXJyb3JzIFNIT1VMRCBiZSBpZ25vcmVkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiB0aGUgdHJhbnNwb3J0IHVzZXIgYXNrcyBmb3IgYSByZXF1ZXN0IHRvIGJlIHNlbnQgb3ZlciBhIHJlbGlhYmxlXG4gICAgICAgIC8vIHRyYW5zcG9ydCwgYW5kIHRoZSByZXN1bHQgaXMgYSBjb25uZWN0aW9uIGZhaWx1cmUsIHRoZSB0cmFuc3BvcnRcbiAgICAgICAgLy8gbGF5ZXIgU0hPVUxEIGluZm9ybSB0aGUgdHJhbnNwb3J0IHVzZXIgb2YgYSBmYWlsdXJlIGluIHNlbmRpbmcuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTguNFxuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZChtZXNzYWdlKTtcbiAgICB9XG4gICAgX2Nvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgQ29ubmVjdGluZyAke3RoaXMuc2VydmVyfWApO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgVHJhbnNwb3J0U3RhdGUuQ29ubmVjdGluZzpcbiAgICAgICAgICAgICAgICAvLyBJZiBgc3RhdGVgIGlzIFwiQ29ubmVjdGluZ1wiLCBgc3RhdGVgIE1VU1QgTk9UIHRyYW5zaXRpb24gYmVmb3JlIHJldHVybmluZy5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHRoaXMudHJhbnNpdGlvbkxvb3BEZXRlY3RlZEVycm9yKFRyYW5zcG9ydFN0YXRlLkNvbm5lY3RpbmcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3RQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbm5lY3QgcHJvbWlzZSBtdXN0IGJlIGRlZmluZWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0UHJvbWlzZTsgLy8gQWxyZWFkeSBjb25uZWN0aW5nXG4gICAgICAgICAgICBjYXNlIFRyYW5zcG9ydFN0YXRlLkNvbm5lY3RlZDpcbiAgICAgICAgICAgICAgICAvLyBJZiBgc3RhdGVgIGlzIFwiQ29ubmVjdGVkXCIsIGBzdGF0ZWAgTVVTVCBOT1QgdHJhbnNpdGlvbiBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmdTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QodGhpcy50cmFuc2l0aW9uTG9vcERldGVjdGVkRXJyb3IoVHJhbnNwb3J0U3RhdGUuQ29ubmVjdGluZykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0UHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25uZWN0IHByb21pc2UgbXVzdCBub3QgYmUgZGVmaW5lZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgLy8gQWxyZWFkeSBjb25uZWN0ZWRcbiAgICAgICAgICAgIGNhc2UgVHJhbnNwb3J0U3RhdGUuRGlzY29ubmVjdGluZzpcbiAgICAgICAgICAgICAgICAvLyBJZiBgc3RhdGVgIGlzIFwiRGlzY29ubmVjdGluZ1wiLCBgc3RhdGVgIE1VU1QgdHJhbnNpdGlvbiB0byBcIkNvbm5lY3RpbmdcIiBiZWZvcmUgcmV0dXJuaW5nXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29ubmVjdCBwcm9taXNlIG11c3Qgbm90IGJlIGRlZmluZWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGF0ZShUcmFuc3BvcnRTdGF0ZS5Db25uZWN0aW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTdGF0ZVRyYW5zaXRpb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpOyAvLyBMb29wIGRldGVjdGVkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zcG9ydFN0YXRlLkRpc2Nvbm5lY3RlZDpcbiAgICAgICAgICAgICAgICAvLyBJZiBgc3RhdGVgIGlzIFwiRGlzY29ubmVjdGVkXCIgYHN0YXRlYCBNVVNUIHRyYW5zaXRpb24gdG8gXCJDb25uZWN0aW5nXCIgYmVmb3JlIHJldHVybmluZ1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbm5lY3QgcHJvbWlzZSBtdXN0IG5vdCBiZSBkZWZpbmVkLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uU3RhdGUoVHJhbnNwb3J0U3RhdGUuQ29ubmVjdGluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU3RhdGVUcmFuc2l0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgLy8gTG9vcCBkZXRlY3RlZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHN0YXRlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB3cztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdlYlNvY2tldCgpXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViU29ja2V0L1dlYlNvY2tldFxuICAgICAgICAgICAgd3MgPSBuZXcgV2ViU29ja2V0KHRoaXMuc2VydmVyLCBcInNpcFwiKTtcbiAgICAgICAgICAgIHdzLmJpbmFyeVR5cGUgPSBcImFycmF5YnVmZmVyXCI7IC8vIHNldCBkYXRhIHR5cGUgb2YgcmVjZWl2ZWQgYmluYXJ5IG1lc3NhZ2VzXG4gICAgICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgKGV2KSA9PiB0aGlzLm9uV2ViU29ja2V0Q2xvc2UoZXYsIHdzKSk7XG4gICAgICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKGV2KSA9PiB0aGlzLm9uV2ViU29ja2V0RXJyb3IoZXYsIHdzKSk7XG4gICAgICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLCAoZXYpID0+IHRoaXMub25XZWJTb2NrZXRPcGVuKGV2LCB3cykpO1xuICAgICAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2KSA9PiB0aGlzLm9uV2ViU29ja2V0TWVzc2FnZShldiwgd3MpKTtcbiAgICAgICAgICAgIHRoaXMuX3dzID0gd3M7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLl93cyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiV2ViU29ja2V0IGNvbnN0cnVjdGlvbiBmYWlsZWQuXCIpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RSZWplY3QgPSByZWplY3Q7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGBzdGF0ZWAgTVVTVCB0cmFuc2l0aW9uIHRvIFwiRGlzY29ubmVjdGluZ1wiIG9yIFwiRGlzY29ubmVjdGVkXCIgYmVmb3JlIHJlamVjdGluZ1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvblN0YXRlKFRyYW5zcG9ydFN0YXRlLkRpc2Nvbm5lY3RlZCwgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25uZWN0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdFJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0UmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJDb25uZWN0IHRpbWVkIG91dC4gXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkV4Y2VlZGVkIHRpbWUgc2V0IGluIGNvbmZpZ3VyYXRpb24uY29ubmVjdGlvblRpbWVvdXQ6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLmNvbm5lY3Rpb25UaW1lb3V0ICtcbiAgICAgICAgICAgICAgICAgICAgXCJzLlwiKTtcbiAgICAgICAgICAgICAgICB3cy5jbG9zZSgxMDAwKTsgLy8gY2FyZWZ1bCBoZXJlIHRvIHVzZSBhIGxvY2FsIHJlZmVyZW5jZSBpbnN0ZWFkIG9mIHRoaXMuX3dzXG4gICAgICAgICAgICB9LCB0aGlzLmNvbmZpZ3VyYXRpb24uY29ubmVjdGlvblRpbWVvdXQgKiAxMDAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3RQcm9taXNlO1xuICAgIH1cbiAgICBfZGlzY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBEaXNjb25uZWN0aW5nICR7dGhpcy5zZXJ2ZXJ9YCk7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBUcmFuc3BvcnRTdGF0ZS5Db25uZWN0aW5nOlxuICAgICAgICAgICAgICAgIC8vIElmIGBzdGF0ZWAgaXMgXCJDb25uZWN0aW5nXCIsIGBzdGF0ZWAgTVVTVCB0cmFuc2l0aW9uIHRvIFwiRGlzY29ubmVjdGluZ1wiIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzY29ubmVjdFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGlzY29ubmVjdCBwcm9taXNlIG11c3Qgbm90IGJlIGRlZmluZWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGF0ZShUcmFuc3BvcnRTdGF0ZS5EaXNjb25uZWN0aW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTdGF0ZVRyYW5zaXRpb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpOyAvLyBMb29wIGRldGVjdGVkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zcG9ydFN0YXRlLkNvbm5lY3RlZDpcbiAgICAgICAgICAgICAgICAvLyBJZiBgc3RhdGVgIGlzIFwiQ29ubmVjdGVkXCIsIGBzdGF0ZWAgTVVTVCB0cmFuc2l0aW9uIHRvIFwiRGlzY29ubmVjdGluZ1wiIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzY29ubmVjdFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGlzY29ubmVjdCBwcm9taXNlIG11c3Qgbm90IGJlIGRlZmluZWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGF0ZShUcmFuc3BvcnRTdGF0ZS5EaXNjb25uZWN0aW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTdGF0ZVRyYW5zaXRpb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpOyAvLyBMb29wIGRldGVjdGVkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zcG9ydFN0YXRlLkRpc2Nvbm5lY3Rpbmc6XG4gICAgICAgICAgICAgICAgLy8gSWYgYHN0YXRlYCBpcyBcIkRpc2Nvbm5lY3RpbmdcIiwgYHN0YXRlYCBNVVNUIE5PVCB0cmFuc2l0aW9uIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbmluZ1N0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh0aGlzLnRyYW5zaXRpb25Mb29wRGV0ZWN0ZWRFcnJvcihUcmFuc3BvcnRTdGF0ZS5EaXNjb25uZWN0aW5nKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5kaXNjb25uZWN0UHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaXNjb25uZWN0IHByb21pc2UgbXVzdCBiZSBkZWZpbmVkLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzY29ubmVjdFByb21pc2U7IC8vIEFscmVhZHkgZGlzY29ubmVjdGluZ1xuICAgICAgICAgICAgY2FzZSBUcmFuc3BvcnRTdGF0ZS5EaXNjb25uZWN0ZWQ6XG4gICAgICAgICAgICAgICAgLy8gSWYgYHN0YXRlYCBpcyBcIkRpc2Nvbm5lY3RlZFwiLCBgc3RhdGVgIE1VU1QgTk9UIHRyYW5zaXRpb24gYmVmb3JlIHJldHVybmluZy5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHRoaXMudHJhbnNpdGlvbkxvb3BEZXRlY3RlZEVycm9yKFRyYW5zcG9ydFN0YXRlLkRpc2Nvbm5lY3RpbmcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzY29ubmVjdFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGlzY29ubmVjdCBwcm9taXNlIG11c3Qgbm90IGJlIGRlZmluZWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IC8vIEFscmVhZHkgZGlzY29ubmVjdGVkXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gc3RhdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl93cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2ViU29ja2V0IG11c3QgYmUgZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3MgPSB0aGlzLl93cztcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0UmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBXZWJTb2NrZXQuY2xvc2UoKVxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJTb2NrZXQvY2xvc2VcbiAgICAgICAgICAgICAgICB3cy5jbG9zZSgxMDAwKTsgLy8gY2FyZWZ1bCBoZXJlIHRvIHVzZSBhIGxvY2FsIHJlZmVyZW5jZSBpbnN0ZWFkIG9mIHRoaXMuX3dzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBUcmVhdGluZyB0aGlzIGFzIGEgY29kaW5nIGVycm9yIGFzIGl0IGFwcGFyZW50bHkgY2FuIG9ubHkgaGFwcGVuXG4gICAgICAgICAgICAgICAgLy8gaWYgeW91IHBhc3MgY2xvc2UoKSBpbnZhbGlkIHBhcmFtZXRlcnMgKHNvIGl0IHNob3VsZCBuZXZlciBoYXBwZW4pXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJXZWJTb2NrZXQgY2xvc2UgZmFpbGVkLlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNjb25uZWN0UHJvbWlzZTtcbiAgICB9XG4gICAgX3NlbmQobWVzc2FnZSkge1xuICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uLnRyYWNlU2lwID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJTZW5kaW5nIFdlYlNvY2tldCBtZXNzYWdlOlxcblxcblwiICsgbWVzc2FnZSArIFwiXFxuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gVHJhbnNwb3J0U3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTm90IGNvbm5lY3RlZC5cIikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fd3MpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIldlYlNvY2tldCB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXZWJTb2NrZXQuc2VuZCgpXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViU29ja2V0L3NlbmRcbiAgICAgICAgICAgIHRoaXMuX3dzLnNlbmQobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiV2ViU29ja2V0IHNlbmQgZmFpbGVkLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXZWJTb2NrZXQgXCJvbmNsb3NlXCIgZXZlbnQgaGFuZGxlci5cbiAgICAgKiBAcGFyYW0gZXYgLSBFdmVudC5cbiAgICAgKi9cbiAgICBvbldlYlNvY2tldENsb3NlKGV2LCB3cykge1xuICAgICAgICBpZiAod3MgIT09IHRoaXMuX3dzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBYWFdlYlNvY2tldCBjbG9zZWQgJHt0aGlzLnNlcnZlcn0gKGNvZGU6ICR7ZXYuY29kZX0pYDtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAhdGhpcy5kaXNjb25uZWN0UHJvbWlzZSA/IG5ldyBFcnJvcihtZXNzYWdlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiV2ViU29ja2V0IGNsb3NlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKG1lc3NhZ2UpO1xuICAgICAgICAvL3dzLmNsb3NlKCk7IC8vYWRkIGJ5IHN0YXIgMjIwOTA4XG4gICAgICAgIC8vIFdlIGFyZSBhYm91dCB0byB0cmFuc2l0aW9uIHRvIGRpc2Nvbm5lY3RlZCwgc28gY2xlYXIgb3VyIHdlYiBzb2NrZXRcbiAgICAgICAgdGhpcy5fd3MgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIFRoZSBgc3RhdGVgIE1VU1QgdHJhbnNpdGlvbiB0byBcIkRpc2Nvbm5lY3RlZFwiIGJlZm9yZSByZXNvbHZpbmcgKGFzc3VtaW5nIGBzdGF0ZWAgaXMgbm90IGFscmVhZHkgXCJEaXNjb25uZWN0ZWRcIikuXG4gICAgICAgIHRoaXMudHJhbnNpdGlvblN0YXRlKFRyYW5zcG9ydFN0YXRlLkRpc2Nvbm5lY3RlZCwgZXJyb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXZWJTb2NrZXQgXCJvbmVycm9yXCIgZXZlbnQgaGFuZGxlci5cbiAgICAgKiBAcGFyYW0gZXYgLSBFdmVudC5cbiAgICAgKi9cbiAgICBvbldlYlNvY2tldEVycm9yKGV2LCB3cykge1xuICAgICAgICBpZiAod3MgIT09IHRoaXMuX3dzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJXZWJTb2NrZXQgZXJyb3Igb2NjdXJyZWQuXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXZWJTb2NrZXQgXCJvbm1lc3NhZ2VcIiBldmVudCBoYW5kbGVyLlxuICAgICAqIEBwYXJhbSBldiAtIEV2ZW50LlxuICAgICAqL1xuICAgIG9uV2ViU29ja2V0TWVzc2FnZShldiwgd3MpIHtcbiAgICAgICAgaWYgKHdzICE9PSB0aGlzLl93cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBldi5kYXRhO1xuICAgICAgICBsZXQgZmluaXNoZWREYXRhO1xuICAgICAgICAvLyBDUkxGIEtlZXAgQWxpdmUgcmVzcG9uc2UgZnJvbSBzZXJ2ZXIuIENsZWFyIG91ciBrZWVwIGFsaXZlIHRpbWVvdXQuXG4gICAgICAgIGlmICgvXihcXHJcXG4pKyQvLnRlc3QoZGF0YSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJLZWVwQWxpdmVUaW1lb3V0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uLnRyYWNlU2lwID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiUmVjZWl2ZWQgV2ViU29ja2V0IG1lc3NhZ2Ugd2l0aCBDUkxGIEtlZXAgQWxpdmUgcmVzcG9uc2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiUmVjZWl2ZWQgZW1wdHkgbWVzc2FnZSwgZGlzY2FyZGluZy4uLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIFdlYlNvY2tldCBiaW5hcnkgbWVzc2FnZS5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZmluaXNoZWREYXRhID0gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKG5ldyBVaW50OEFycmF5KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAvLyBUZXh0RGVjb2RlciAoYWJvdmUpIGlzIG5vdCBzdXBwb3J0ZWQgYnkgb2xkIGJyb3dzZXJzLCBidXQgaXQgY29ycmVjdGx5IGRlY29kZXMgVVRGLTguXG4gICAgICAgICAgICAgICAgLy8gVGhlIGxpbmUgYmVsb3cgaXMgYW4gSVNPIDg4NTktMSAoTGF0aW4gMSkgZGVjb2Rlciwgc28ganVzdCBVVEYtOCBjb2RlIHBvaW50cyB0aGF0IGFyZSAxIGJ5dGUuXG4gICAgICAgICAgICAgICAgLy8gSXQncyBvbGQgY29kZSBhbmQgd29ya3MgaW4gb2xkIGJyb3dzZXJzIChJRSksIHNvIGxlYXZpbmcgaXQgaGVyZSBpbiBhIGNvbW1lbnQgaW4gY2FzZSBzb21lb25lIG5lZWRzIGl0LlxuICAgICAgICAgICAgICAgIC8vIGZpbmlzaGVkRGF0YSA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgKG5ldyBVaW50OEFycmF5KGRhdGEpIGFzIHVua25vd24gYXMgQXJyYXk8bnVtYmVyPikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJSZWNlaXZlZCBXZWJTb2NrZXQgYmluYXJ5IG1lc3NhZ2UgZmFpbGVkIHRvIGJlIGNvbnZlcnRlZCBpbnRvIHN0cmluZywgbWVzc2FnZSBkaXNjYXJkZWRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbi50cmFjZVNpcCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIlJlY2VpdmVkIFdlYlNvY2tldCBiaW5hcnkgbWVzc2FnZTpcXG5cXG5cIiArIGZpbmlzaGVkRGF0YSArIFwiXFxuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV2ViU29ja2V0IHRleHQgbWVzc2FnZS5cbiAgICAgICAgICAgIGZpbmlzaGVkRGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uLnRyYWNlU2lwID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiUmVjZWl2ZWQgV2ViU29ja2V0IHRleHQgbWVzc2FnZTpcXG5cXG5cIiArIGZpbmlzaGVkRGF0YSArIFwiXFxuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBUcmFuc3BvcnRTdGF0ZS5Db25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJSZWNlaXZlZCBtZXNzYWdlIHdoaWxlIG5vdCBjb25uZWN0ZWQsIGRpc2NhcmRpbmcuLi5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub25NZXNzYWdlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMub25NZXNzYWdlKGZpbmlzaGVkRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiRXhjZXB0aW9uIHRocm93biBieSBvbk1lc3NhZ2UgY2FsbGJhY2tcIik7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTsgLy8gcmV0aHJvdyB1bmhhbmRsZWQgZXhjZXB0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogV2ViU29ja2V0IFwib25vcGVuXCIgZXZlbnQgaGFuZGxlci5cbiAgICAgKiBAcGFyYW0gZXYgLSBFdmVudC5cbiAgICAgKi9cbiAgICBvbldlYlNvY2tldE9wZW4oZXYsIHdzKSB7XG4gICAgICAgIGlmICh3cyAhPT0gdGhpcy5fd3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fc3RhdGUgPT09IFRyYW5zcG9ydFN0YXRlLkNvbm5lY3RpbmcpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgV2ViU29ja2V0IG9wZW5lZCAke3RoaXMuc2VydmVyfWApO1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uU3RhdGUoVHJhbnNwb3J0U3RhdGUuQ29ubmVjdGVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgYW4gRXJyb3IuXG4gICAgICogQHBhcmFtIHN0YXRlIC0gU3RhdGUgdHJhbnNpdGlvbmluZyB0by5cbiAgICAgKi9cbiAgICB0cmFuc2l0aW9uTG9vcERldGVjdGVkRXJyb3Ioc3RhdGUpIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBgQSBzdGF0ZSB0cmFuc2l0aW9uIGxvb3AgaGFzIGJlZW4gZGV0ZWN0ZWQuYDtcbiAgICAgICAgbWVzc2FnZSArPSBgIEFuIGF0dGVtcHQgdG8gdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5fc3RhdGV9IHRvICR7c3RhdGV9IGJlZm9yZSB0aGUgcHJpb3IgdHJhbnNpdGlvbiBjb21wbGV0ZWQuYDtcbiAgICAgICAgbWVzc2FnZSArPSBgIFBlcmhhcHMgeW91IGFyZSBzeW5jaHJvbm91c2x5IGNhbGxpbmcgY29ubmVjdCgpIG9yIGRpc2Nvbm5lY3QoKSBmcm9tIGEgY2FsbGJhY2sgb3Igc3RhdGUgY2hhbmdlIGhhbmRsZXI/YDtcbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBuZXcgU3RhdGVUcmFuc2l0aW9uRXJyb3IoXCJMb29wIGRldGVjdGVkLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNpdGlvbiB0cmFuc3BvcnQgc3RhdGUuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdHJhbnNpdGlvblN0YXRlKG5ld1N0YXRlLCBlcnJvcikge1xuICAgICAgICBjb25zdCBpbnZhbGlkVHJhbnNpdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLl9zdGF0ZX0gdG8gJHtuZXdTdGF0ZX1gKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbmluZ1N0YXRlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLnRyYW5zaXRpb25Mb29wRGV0ZWN0ZWRFcnJvcihuZXdTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nU3RhdGUgPSB0cnVlO1xuICAgICAgICAvLyBWYWxpZGF0ZSBzdGF0ZSB0cmFuc2l0aW9uXG4gICAgICAgIHN3aXRjaCAodGhpcy5fc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgVHJhbnNwb3J0U3RhdGUuQ29ubmVjdGluZzpcbiAgICAgICAgICAgICAgICBpZiAobmV3U3RhdGUgIT09IFRyYW5zcG9ydFN0YXRlLkNvbm5lY3RlZCAmJlxuICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSAhPT0gVHJhbnNwb3J0U3RhdGUuRGlzY29ubmVjdGluZyAmJlxuICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSAhPT0gVHJhbnNwb3J0U3RhdGUuRGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUcmFuc3BvcnRTdGF0ZS5Db25uZWN0ZWQ6XG4gICAgICAgICAgICAgICAgaWYgKG5ld1N0YXRlICE9PSBUcmFuc3BvcnRTdGF0ZS5EaXNjb25uZWN0aW5nICYmIG5ld1N0YXRlICE9PSBUcmFuc3BvcnRTdGF0ZS5EaXNjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zcG9ydFN0YXRlLkRpc2Nvbm5lY3Rpbmc6XG4gICAgICAgICAgICAgICAgaWYgKG5ld1N0YXRlICE9PSBUcmFuc3BvcnRTdGF0ZS5Db25uZWN0aW5nICYmIG5ld1N0YXRlICE9PSBUcmFuc3BvcnRTdGF0ZS5EaXNjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRyYW5zcG9ydFN0YXRlLkRpc2Nvbm5lY3RlZDpcbiAgICAgICAgICAgICAgICBpZiAobmV3U3RhdGUgIT09IFRyYW5zcG9ydFN0YXRlLkNvbm5lY3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gc3RhdGUuXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBzdGF0ZVxuICAgICAgICBjb25zdCBvbGRTdGF0ZSA9IHRoaXMuX3N0YXRlO1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IG5ld1N0YXRlO1xuICAgICAgICAvLyBMb2NhbCBjb3BpZXMgb2YgY29ubmVjdCBwcm9taXNlcyAoZ3VhcmRpbmcgYWdhaW5zdCBjYWxsYmFja3MgY2hhbmdpbmcgdGhlbSBpbmRpcmVjdGx5KVxuICAgICAgICAvLyBjb25zdCBjb25uZWN0UHJvbWlzZSA9IHRoaXMuY29ubmVjdFByb21pc2U7XG4gICAgICAgIGNvbnN0IGNvbm5lY3RSZXNvbHZlID0gdGhpcy5jb25uZWN0UmVzb2x2ZTtcbiAgICAgICAgY29uc3QgY29ubmVjdFJlamVjdCA9IHRoaXMuY29ubmVjdFJlamVjdDtcbiAgICAgICAgLy8gUmVzZXQgY29ubmVjdCBwcm9taXNlcyBpZiBubyBsb25nZXIgY29ubmVjdGluZ1xuICAgICAgICBpZiAob2xkU3RhdGUgPT09IFRyYW5zcG9ydFN0YXRlLkNvbm5lY3RpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdFByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RSZXNvbHZlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0UmVqZWN0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIC8vIExvY2FsIGNvcGllcyBvZiBkaXNjb25uZWN0IHByb21pc2VzIChndWFyZGluZyBhZ2FpbnN0IGNhbGxiYWNrcyBjaGFuZ2luZyB0aGVtIGluZGlyZWN0bHkpXG4gICAgICAgIC8vIGNvbnN0IGRpc2Nvbm5lY3RQcm9taXNlID0gdGhpcy5kaXNjb25uZWN0UHJvbWlzZTtcbiAgICAgICAgY29uc3QgZGlzY29ubmVjdFJlc29sdmUgPSB0aGlzLmRpc2Nvbm5lY3RSZXNvbHZlO1xuICAgICAgICBjb25zdCBkaXNjb25uZWN0UmVqZWN0ID0gdGhpcy5kaXNjb25uZWN0UmVqZWN0O1xuICAgICAgICAvLyBSZXNldCBkaXNjb25uZWN0IHByb21pc2VzIGlmIG5vIGxvbmdlciBkaXNjb25uZWN0aW5nXG4gICAgICAgIGlmIChvbGRTdGF0ZSA9PT0gVHJhbnNwb3J0U3RhdGUuRGlzY29ubmVjdGluZykge1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0UHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFJlc29sdmUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RSZWplY3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2xlYXIgYW55IG91dHN0YW5kaW5nIGNvbm5lY3QgdGltZW91dFxuICAgICAgICBpZiAodGhpcy5jb25uZWN0VGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY29ubmVjdFRpbWVvdXQpO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0VGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFRyYW5zaXRpb25lZCBmcm9tICR7b2xkU3RhdGV9IHRvICR7dGhpcy5fc3RhdGV9YCk7XG4gICAgICAgIHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyLmVtaXQodGhpcy5fc3RhdGUpO1xuICAgICAgICAvLyAgVHJhbnNpdGlvbiB0byBDb25uZWN0ZWRcbiAgICAgICAgaWYgKG5ld1N0YXRlID09PSBUcmFuc3BvcnRTdGF0ZS5Db25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRTZW5kaW5nS2VlcEFsaXZlcygpO1xuICAgICAgICAgICAgaWYgKHRoaXMub25Db25uZWN0KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiRXhjZXB0aW9uIHRocm93biBieSBvbkNvbm5lY3QgY2FsbGJhY2tcIik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7IC8vIHJldGhyb3cgdW5oYW5kbGVkIGV4Y2VwdGlvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyAgVHJhbnNpdGlvbiBmcm9tIENvbm5lY3RlZFxuICAgICAgICBpZiAob2xkU3RhdGUgPT09IFRyYW5zcG9ydFN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5zdG9wU2VuZGluZ0tlZXBBbGl2ZXMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uRGlzY29ubmVjdCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJFeGNlcHRpb24gdGhyb3duIGJ5IG9uRGlzY29ubmVjdCBjYWxsYmFja1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsgLy8gcmV0aHJvdyB1bmhhbmRsZWQgZXhjZXB0aW9uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENvbXBsZXRlIGNvbm5lY3QgcHJvbWlzZVxuICAgICAgICBpZiAob2xkU3RhdGUgPT09IFRyYW5zcG9ydFN0YXRlLkNvbm5lY3RpbmcpIHtcbiAgICAgICAgICAgIGlmICghY29ubmVjdFJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25uZWN0IHJlc29sdmUgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29ubmVjdFJlamVjdCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbm5lY3QgcmVqZWN0IHVuZGVmaW5lZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdTdGF0ZSA9PT0gVHJhbnNwb3J0U3RhdGUuQ29ubmVjdGVkID8gY29ubmVjdFJlc29sdmUoKSA6IGNvbm5lY3RSZWplY3QoZXJyb3IgfHwgbmV3IEVycm9yKFwiQ29ubmVjdCBhYm9ydGVkLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29tcGxldGUgZGlzY29ubmVjdCBwcm9taXNlXG4gICAgICAgIGlmIChvbGRTdGF0ZSA9PT0gVHJhbnNwb3J0U3RhdGUuRGlzY29ubmVjdGluZykge1xuICAgICAgICAgICAgaWYgKCFkaXNjb25uZWN0UmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRpc2Nvbm5lY3QgcmVzb2x2ZSB1bmRlZmluZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkaXNjb25uZWN0UmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGlzY29ubmVjdCByZWplY3QgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld1N0YXRlID09PSBUcmFuc3BvcnRTdGF0ZS5EaXNjb25uZWN0ZWRcbiAgICAgICAgICAgICAgICA/IGRpc2Nvbm5lY3RSZXNvbHZlKClcbiAgICAgICAgICAgICAgICA6IGRpc2Nvbm5lY3RSZWplY3QoZXJyb3IgfHwgbmV3IEVycm9yKFwiRGlzY29ubmVjdCBhYm9ydGVkLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nU3RhdGUgPSBmYWxzZTtcbiAgICB9XG4gICAgLy8gVE9ETzogUmV2aWV3IFwiS2VlcEFsaXZlIFN0dWZmXCIuXG4gICAgLy8gSXQgaXMgbm90IGNsZWFyIGlmIGl0IHdvcmtzIGFuZCB0aGVyZSBhcmUgbm8gdGVzdHMgZm9yIGl0LlxuICAgIC8vIEl0IHdhcyBibGluZGx5IGxpZnRlZCB0aGUga2VlcCBhbGl2ZSBjb2RlIHVuY2hhbmdlZCBmcm9tIGVhcmxpZXIgdHJhbnNwb3J0IGNvZGUuXG4gICAgLy9cbiAgICAvLyBGcm9tIHRoZSBSRkMuLi5cbiAgICAvL1xuICAgIC8vIFNJUCBXZWJTb2NrZXQgQ2xpZW50cyBhbmQgU2VydmVycyBtYXkga2VlcCB0aGVpciBXZWJTb2NrZXRcbiAgICAvLyBjb25uZWN0aW9ucyBvcGVuIGJ5IHNlbmRpbmcgcGVyaW9kaWMgV2ViU29ja2V0IFwiUGluZ1wiIGZyYW1lcyBhc1xuICAgIC8vIGRlc2NyaWJlZCBpbiBbUkZDNjQ1NV0sIFNlY3Rpb24gNS41LjIuXG4gICAgLy8gLi4uXG4gICAgLy8gVGhlIGluZGljYXRpb24gYW5kIHVzZSBvZiB0aGUgQ1JMRiBOQVQga2VlcC1hbGl2ZSBtZWNoYW5pc20gZGVmaW5lZFxuICAgIC8vIGZvciBTSVAgY29ubmVjdGlvbi1vcmllbnRlZCB0cmFuc3BvcnRzIGluIFtSRkM1NjI2XSwgU2VjdGlvbiAzLjUuMSBvclxuICAgIC8vIFtSRkM2MjIzXSBhcmUsIG9mIGNvdXJzZSwgdXNhYmxlIG92ZXIgdGhlIHRyYW5zcG9ydCBkZWZpbmVkIGluIHRoaXNcbiAgICAvLyBzcGVjaWZpY2F0aW9uLlxuICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MTE4I3NlY3Rpb24tNlxuICAgIC8vXG4gICAgLy8gYW5kLi4uXG4gICAgLy9cbiAgICAvLyBUaGUgUGluZyBmcmFtZSBjb250YWlucyBhbiBvcGNvZGUgb2YgMHg5LlxuICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NDU1I3NlY3Rpb24tNS41LjJcbiAgICAvL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIEtlZXBBbGl2ZSBTdHVmZlxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGNsZWFyS2VlcEFsaXZlVGltZW91dCgpIHtcbiAgICAgICAgaWYgKHRoaXMua2VlcEFsaXZlRGVib3VuY2VUaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5rZWVwQWxpdmVEZWJvdW5jZVRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMua2VlcEFsaXZlRGVib3VuY2VUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEga2VlcC1hbGl2ZSAoYSBkb3VibGUtQ1JMRiBzZXF1ZW5jZSkuXG4gICAgICovXG4gICAgc2VuZEtlZXBBbGl2ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMua2VlcEFsaXZlRGVib3VuY2VUaW1lb3V0KSB7XG4gICAgICAgICAgICAvLyBXZSBhbHJlYWR5IGhhdmUgYW4gb3V0c3RhbmRpbmcga2VlcCBhbGl2ZSwgZG8gbm90IHNlbmQgYW5vdGhlci5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbGVhcktlZXBBbGl2ZVRpbWVvdXQoKTtcbiAgICAgICAgfSwgdGhpcy5jb25maWd1cmF0aW9uLmtlZXBBbGl2ZURlYm91bmNlICogMTAwMCk7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoXCJcXHJcXG5cXHJcXG5cIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0IHNlbmRpbmcga2VlcC1hbGl2ZXMuXG4gICAgICovXG4gICAgc3RhcnRTZW5kaW5nS2VlcEFsaXZlcygpIHtcbiAgICAgICAgLy8gQ29tcHV0ZSBhbiBhbW91bnQgb2YgdGltZSBpbiBzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHNlbmRpbmcgYW5vdGhlciBrZWVwLWFsaXZlLlxuICAgICAgICBjb25zdCBjb21wdXRlS2VlcEFsaXZlVGltZW91dCA9ICh1cHBlckJvdW5kKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsb3dlckJvdW5kID0gdXBwZXJCb3VuZCAqIDAuODtcbiAgICAgICAgICAgIHJldHVybiAxMDAwICogKE1hdGgucmFuZG9tKCkgKiAodXBwZXJCb3VuZCAtIGxvd2VyQm91bmQpICsgbG93ZXJCb3VuZCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24ua2VlcEFsaXZlSW50ZXJ2YWwgJiYgIXRoaXMua2VlcEFsaXZlSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHRoaXMua2VlcEFsaXZlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kS2VlcEFsaXZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFNlbmRpbmdLZWVwQWxpdmVzKCk7XG4gICAgICAgICAgICB9LCBjb21wdXRlS2VlcEFsaXZlVGltZW91dCh0aGlzLmNvbmZpZ3VyYXRpb24ua2VlcEFsaXZlSW50ZXJ2YWwpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wIHNlbmRpbmcga2VlcC1hbGl2ZXMuXG4gICAgICovXG4gICAgc3RvcFNlbmRpbmdLZWVwQWxpdmVzKCkge1xuICAgICAgICBpZiAodGhpcy5rZWVwQWxpdmVJbnRlcnZhbCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmtlZXBBbGl2ZUludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5rZWVwQWxpdmVEZWJvdW5jZVRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5rZWVwQWxpdmVJbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5rZWVwQWxpdmVEZWJvdW5jZVRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuVHJhbnNwb3J0LmRlZmF1bHRPcHRpb25zID0ge1xuICAgIHNlcnZlcjogXCJcIixcbiAgICBjb25uZWN0aW9uVGltZW91dDogNSxcbiAgICBrZWVwQWxpdmVJbnRlcnZhbDogMCxcbiAgICBrZWVwQWxpdmVEZWJvdW5jZTogMTAsXG4gICAgdHJhY2VTaXA6IHRydWVcbn07XG4iLCJpbXBvcnQgeyBFeGNlcHRpb24gfSBmcm9tIFwiLi4vLi4vY29yZVwiO1xuLyoqXG4gKiBBbiBleGNlcHRpb24gaW5kaWNhdGluZyBhbiB1bnN1cHBvcnRlZCBjb250ZW50IHR5cGUgcHJldmVudGVkIGV4ZWN1dGlvbi5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnRlbnRUeXBlVW5zdXBwb3J0ZWRFcnJvciBleHRlbmRzIEV4Y2VwdGlvbiB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlID8gbWVzc2FnZSA6IFwiVW5zdXBwb3J0ZWQgY29udGVudCB0eXBlLlwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBFeGNlcHRpb24gfSBmcm9tIFwiLi4vLi4vY29yZVwiO1xuLyoqXG4gKiBBbiBleGNlcHRpb24gaW5kaWNhdGluZyBhIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBlcnJvciBvY2N1cmVkLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckVycm9yIGV4dGVuZHMgRXhjZXB0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgPyBtZXNzYWdlIDogXCJVbnNwZWNpZmllZCBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgZXJyb3IuXCIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEV4Y2VwdGlvbiB9IGZyb20gXCIuLi8uLi9jb3JlXCI7XG4vKipcbiAqIEFuIGV4Y2VwdGlvbiBpbmRpY2F0aW5nIHRoZSBzZXNzaW9uIHRlcm1pbmF0ZWQgYmVmb3JlIHRoZSBhY3Rpb24gY29tcGxldGVkLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU2Vzc2lvblRlcm1pbmF0ZWRFcnJvciBleHRlbmRzIEV4Y2VwdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKFwiVGhlIHNlc3Npb24gaGFzIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbn1cbiIsIi8qKlxuICogQSByZXF1ZXN0IHRvIGNvbmZpcm0gYSB7QGxpbmsgU2Vzc2lvbn0gKGluY29taW5nIEFDSykuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2sge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3RvcihpbmNvbWluZ0Fja1JlcXVlc3QpIHtcbiAgICAgICAgdGhpcy5pbmNvbWluZ0Fja1JlcXVlc3QgPSBpbmNvbWluZ0Fja1JlcXVlc3Q7XG4gICAgfVxuICAgIC8qKiBJbmNvbWluZyBBQ0sgcmVxdWVzdCBtZXNzYWdlLiAqL1xuICAgIGdldCByZXF1ZXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmNvbWluZ0Fja1JlcXVlc3QubWVzc2FnZTtcbiAgICB9XG59XG4iLCIvKipcbiAqIEEgcmVxdWVzdCB0byBlbmQgYSB7QGxpbmsgU2Vzc2lvbn0gKGluY29taW5nIEJZRSkuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBCeWUge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3RvcihpbmNvbWluZ0J5ZVJlcXVlc3QpIHtcbiAgICAgICAgdGhpcy5pbmNvbWluZ0J5ZVJlcXVlc3QgPSBpbmNvbWluZ0J5ZVJlcXVlc3Q7XG4gICAgfVxuICAgIC8qKiBJbmNvbWluZyBCWUUgcmVxdWVzdCBtZXNzYWdlLiAqL1xuICAgIGdldCByZXF1ZXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmNvbWluZ0J5ZVJlcXVlc3QubWVzc2FnZTtcbiAgICB9XG4gICAgLyoqIEFjY2VwdCB0aGUgcmVxdWVzdC4gKi9cbiAgICBhY2NlcHQob3B0aW9ucykge1xuICAgICAgICB0aGlzLmluY29taW5nQnllUmVxdWVzdC5hY2NlcHQob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLyoqIFJlamVjdCB0aGUgcmVxdWVzdC4gKi9cbiAgICByZWplY3Qob3B0aW9ucykge1xuICAgICAgICB0aGlzLmluY29taW5nQnllUmVxdWVzdC5yZWplY3Qob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBFeGNlcHRpb24gfSBmcm9tIFwiLi4vLi4vY29yZVwiO1xuLyoqXG4gKiBBbiBleGNlcHRpb24gaW5kaWNhdGluZyBhbiBvdXRzdGFuZGluZyBwcmlvciByZXF1ZXN0IHByZXZlbnRlZCBleGVjdXRpb24uXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0UGVuZGluZ0Vycm9yIGV4dGVuZHMgRXhjZXB0aW9uIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlID8gbWVzc2FnZSA6IFwiUmVxdWVzdCBwZW5kaW5nLlwiKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIEFuIGV4Y2hhbmdlIG9mIGluZm9ybWF0aW9uIChpbmNvbWluZyBJTkZPKS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEluZm8ge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3RvcihpbmNvbWluZ0luZm9SZXF1ZXN0KSB7XG4gICAgICAgIHRoaXMuaW5jb21pbmdJbmZvUmVxdWVzdCA9IGluY29taW5nSW5mb1JlcXVlc3Q7XG4gICAgfVxuICAgIC8qKiBJbmNvbWluZyBNRVNTQUdFIHJlcXVlc3QgbWVzc2FnZS4gKi9cbiAgICBnZXQgcmVxdWVzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5jb21pbmdJbmZvUmVxdWVzdC5tZXNzYWdlO1xuICAgIH1cbiAgICAvKiogQWNjZXB0IHRoZSByZXF1ZXN0LiAqL1xuICAgIGFjY2VwdChvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuaW5jb21pbmdJbmZvUmVxdWVzdC5hY2NlcHQob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLyoqIFJlamVjdCB0aGUgcmVxdWVzdC4gKi9cbiAgICByZWplY3Qob3B0aW9ucykge1xuICAgICAgICB0aGlzLmluY29taW5nSW5mb1JlcXVlc3QucmVqZWN0KG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBBIHJlY2VpdmVkIG1lc3NhZ2UgKGluY29taW5nIE1FU1NBR0UpLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTWVzc2FnZSB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKGluY29taW5nTWVzc2FnZVJlcXVlc3QpIHtcbiAgICAgICAgdGhpcy5pbmNvbWluZ01lc3NhZ2VSZXF1ZXN0ID0gaW5jb21pbmdNZXNzYWdlUmVxdWVzdDtcbiAgICB9XG4gICAgLyoqIEluY29taW5nIE1FU1NBR0UgcmVxdWVzdCBtZXNzYWdlLiAqL1xuICAgIGdldCByZXF1ZXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmNvbWluZ01lc3NhZ2VSZXF1ZXN0Lm1lc3NhZ2U7XG4gICAgfVxuICAgIC8qKiBBY2NlcHQgdGhlIHJlcXVlc3QuICovXG4gICAgYWNjZXB0KG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5pbmNvbWluZ01lc3NhZ2VSZXF1ZXN0LmFjY2VwdChvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKiogUmVqZWN0IHRoZSByZXF1ZXN0LiAqL1xuICAgIHJlamVjdChvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuaW5jb21pbmdNZXNzYWdlUmVxdWVzdC5yZWplY3Qob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIEEgbm90aWZpY2F0aW9uIG9mIGFuIGV2ZW50IChpbmNvbWluZyBOT1RJRlkpLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoaW5jb21pbmdOb3RpZnlSZXF1ZXN0KSB7XG4gICAgICAgIHRoaXMuaW5jb21pbmdOb3RpZnlSZXF1ZXN0ID0gaW5jb21pbmdOb3RpZnlSZXF1ZXN0O1xuICAgIH1cbiAgICAvKiogSW5jb21pbmcgTk9USUZZIHJlcXVlc3QgbWVzc2FnZS4gKi9cbiAgICBnZXQgcmVxdWVzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5jb21pbmdOb3RpZnlSZXF1ZXN0Lm1lc3NhZ2U7XG4gICAgfVxuICAgIC8qKiBBY2NlcHQgdGhlIHJlcXVlc3QuICovXG4gICAgYWNjZXB0KG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5pbmNvbWluZ05vdGlmeVJlcXVlc3QuYWNjZXB0KG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKiBSZWplY3QgdGhlIHJlcXVlc3QuICovXG4gICAgcmVqZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5pbmNvbWluZ05vdGlmeVJlcXVlc3QucmVqZWN0KG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTmFtZUFkZHJIZWFkZXIgfSBmcm9tIFwiLi4vY29yZVwiO1xuLyoqXG4gKiBBIHJlcXVlc3QgdG8gZXN0YWJsaXNoIGEge0BsaW5rIFNlc3Npb259IGVsc2V3aGVyZSAoaW5jb21pbmcgUkVGRVIpLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUmVmZXJyYWwge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3RvcihpbmNvbWluZ1JlZmVyUmVxdWVzdCwgc2Vzc2lvbikge1xuICAgICAgICB0aGlzLmluY29taW5nUmVmZXJSZXF1ZXN0ID0gaW5jb21pbmdSZWZlclJlcXVlc3Q7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgfVxuICAgIGdldCByZWZlclRvKCkge1xuICAgICAgICBjb25zdCByZWZlclRvID0gdGhpcy5pbmNvbWluZ1JlZmVyUmVxdWVzdC5tZXNzYWdlLnBhcnNlSGVhZGVyKFwicmVmZXItdG9cIik7XG4gICAgICAgIGlmICghKHJlZmVyVG8gaW5zdGFuY2VvZiBOYW1lQWRkckhlYWRlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBSZWZlci1UbyBoZWFkZXIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWZlclRvO1xuICAgIH1cbiAgICBnZXQgcmVmZXJyZWRCeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5jb21pbmdSZWZlclJlcXVlc3QubWVzc2FnZS5nZXRIZWFkZXIoXCJyZWZlcnJlZC1ieVwiKTtcbiAgICB9XG4gICAgZ2V0IHJlcGxhY2VzKCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMucmVmZXJUby51cmkuZ2V0SGVhZGVyKFwicmVwbGFjZXNcIik7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICAvKiogSW5jb21pbmcgUkVGRVIgcmVxdWVzdCBtZXNzYWdlLiAqL1xuICAgIGdldCByZXF1ZXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmNvbWluZ1JlZmVyUmVxdWVzdC5tZXNzYWdlO1xuICAgIH1cbiAgICAvKiogQWNjZXB0IHRoZSByZXF1ZXN0LiAqL1xuICAgIGFjY2VwdChvcHRpb25zID0geyBzdGF0dXNDb2RlOiAyMDIgfSkge1xuICAgICAgICB0aGlzLmluY29taW5nUmVmZXJSZXF1ZXN0LmFjY2VwdChvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKiogUmVqZWN0IHRoZSByZXF1ZXN0LiAqL1xuICAgIHJlamVjdChvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuaW5jb21pbmdSZWZlclJlcXVlc3QucmVqZWN0KG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW52aXRlciB3aGljaCBtYXkgYmUgdXNlZCB0byBzZW5kIGFuIG91dCBvZiBkaWFsb2cgSU5WSVRFIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgYSBoZWxwZXIgbWV0aG9kIHRvIGNyZWF0ZSBhbiBJbnZpdGVyIHdoaWNoIHdpbGwgZXhlY3V0ZSB0aGUgcmVmZXJyYWxcbiAgICAgKiBvZiB0aGUgYFNlc3Npb25gIHdoaWNoIHdhcyByZWZlcnJlZC4gVGhlIGFwcHJvcHJpYXRlIGhlYWRlcnMgYXJlIHNldCBhbmRcbiAgICAgKiB0aGUgcmVmZXJyZWQgYFNlc3Npb25gIGlzIGxpbmtlZCB0byB0aGUgbmV3IGBTZXNzaW9uYC4gTm90ZSB0aGF0IG9ubHkgYVxuICAgICAqIHNpbmdsZSBpbnN0YW5jZSBvZiB0aGUgYEludml0ZXJgIHdpbGwgYmUgY3JlYXRlZCBhbmQgcmV0dXJuZWQgKGlmIGNhbGxlZFxuICAgICAqIG1vcmUgdGhhbiBvbmNlIGEgcmVmZXJlbmNlIHRvIHRoZSBzYW1lIGBJbnZpdGVyYCB3aWxsIGJlIHJldHVybmVkIGV2ZXJ5IHRpbWUpLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGJ1Y2tldC5cbiAgICAgKiBAcGFyYW0gbW9kaWZpZXJzIC0gU2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIG1vZGlmaWVycy5cbiAgICAgKi9cbiAgICBtYWtlSW52aXRlcihvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLmludml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludml0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0VVJJID0gdGhpcy5yZWZlclRvLnVyaS5jbG9uZSgpO1xuICAgICAgICB0YXJnZXRVUkkuY2xlYXJIZWFkZXJzKCk7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VzID0gdGhpcy5yZXBsYWNlcztcbiAgICAgICAgaWYgKHJlcGxhY2VzKSB7XG4gICAgICAgICAgICAvLyBkZWNvZGVVUklDb21wb25lbnQgaXMgYSBob2xkb3ZlciBmcm9tIDJjMDg2ZWI0LiBOb3Qgc3VyZSB0aGF0IGl0IGlzIGFjdHVhbGx5IG5lY2Vzc2FyeVxuICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goXCJSZXBsYWNlczogXCIgKyBkZWNvZGVVUklDb21wb25lbnQocmVwbGFjZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWZlcnJlZEJ5ID0gdGhpcy5yZWZlcnJlZEJ5O1xuICAgICAgICBpZiAocmVmZXJyZWRCeSkge1xuICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goXCJSZWZlcnJlZC1CeTogXCIgKyByZWZlcnJlZEJ5KTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycyA9IGV4dHJhSGVhZGVycztcbiAgICAgICAgdGhpcy5pbnZpdGVyID0gdGhpcy5zZXNzaW9uLnVzZXJBZ2VudC5fbWFrZUludml0ZXIodGFyZ2V0VVJJLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5pbnZpdGVyLl9yZWZlcnJlZCA9IHRoaXMuc2Vzc2lvbjtcbiAgICAgICAgdGhpcy5zZXNzaW9uLl9yZWZlcnJhbCA9IHRoaXMuaW52aXRlcjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW52aXRlcjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBmcm9tQm9keUxlZ2FjeSwgZ2V0Qm9keSwgR3JhbW1hciwgU2Vzc2lvblN0YXRlIGFzIFNlc3Npb25EaWFsb2dTdGF0ZSwgU2lnbmFsaW5nU3RhdGUsIFVSSSB9IGZyb20gXCIuLi9jb3JlXCI7XG5pbXBvcnQgeyBnZXRSZWFzb25QaHJhc2UgfSBmcm9tIFwiLi4vY29yZS9tZXNzYWdlcy91dGlsc1wiO1xuaW1wb3J0IHsgQWxsb3dlZE1ldGhvZHMgfSBmcm9tIFwiLi4vY29yZS91c2VyLWFnZW50LWNvcmUvYWxsb3dlZC1tZXRob2RzXCI7XG5pbXBvcnQgeyBBY2sgfSBmcm9tIFwiLi9hY2tcIjtcbmltcG9ydCB7IEJ5ZSB9IGZyb20gXCIuL2J5ZVwiO1xuaW1wb3J0IHsgRW1pdHRlckltcGwgfSBmcm9tIFwiLi9lbWl0dGVyXCI7XG5pbXBvcnQgeyBDb250ZW50VHlwZVVuc3VwcG9ydGVkRXJyb3IsIFJlcXVlc3RQZW5kaW5nRXJyb3IgfSBmcm9tIFwiLi9leGNlcHRpb25zXCI7XG5pbXBvcnQgeyBJbmZvIH0gZnJvbSBcIi4vaW5mb1wiO1xuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gXCIuL21lc3NhZ2VcIjtcbmltcG9ydCB7IE5vdGlmaWNhdGlvbiB9IGZyb20gXCIuL25vdGlmaWNhdGlvblwiO1xuaW1wb3J0IHsgUmVmZXJyYWwgfSBmcm9tIFwiLi9yZWZlcnJhbFwiO1xuaW1wb3J0IHsgU2Vzc2lvblN0YXRlIH0gZnJvbSBcIi4vc2Vzc2lvbi1zdGF0ZVwiO1xuLyoqXG4gKiBBIHNlc3Npb24gcHJvdmlkZXMgcmVhbCB0aW1lIGNvbW11bmljYXRpb24gYmV0d2VlbiBvbmUgb3IgbW9yZSBwYXJ0aWNpcGFudHMuXG4gKlxuICogQHJlbWFya3NcbiAqIFRoZSB0cmFuc3BvcnQgYmVoYXZlcyBpbiBhIGRldGVybWluaXN0aWMgbWFubmVyIGFjY29yZGluZyB0byB0aGVcbiAqIHRoZSBzdGF0ZSBkZWZpbmVkIGluIHtAbGluayBTZXNzaW9uU3RhdGV9LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU2Vzc2lvbiB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIHVzZXJBZ2VudCAtIFVzZXIgYWdlbnQuIFNlZSB7QGxpbmsgVXNlckFnZW50fSBmb3IgZGV0YWlscy5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih1c2VyQWdlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvKiogVHJ1ZSBpZiB0aGVyZSBpcyBhbiBvdXRnb2luZyByZS1JTlZJVEUgcmVxdWVzdCBvdXRzdGFuZGluZy4gKi9cbiAgICAgICAgdGhpcy5wZW5kaW5nUmVpbnZpdGUgPSBmYWxzZTtcbiAgICAgICAgLyoqIFRydWUgaWYgdGhlcmUgaXMgYW4gaW5jb21pbmcgcmUtSU5WSVRFIEFDSyByZXF1ZXN0IG91dHN0YW5kaW5nLiAqL1xuICAgICAgICB0aGlzLnBlbmRpbmdSZWludml0ZUFjayA9IGZhbHNlO1xuICAgICAgICAvKiogU2Vzc2lvbiBzdGF0ZS4gKi9cbiAgICAgICAgdGhpcy5fc3RhdGUgPSBTZXNzaW9uU3RhdGUuSW5pdGlhbDtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG9wdGlvbnMuZGVsZWdhdGU7XG4gICAgICAgIHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyID0gbmV3IEVtaXR0ZXJJbXBsKCk7XG4gICAgICAgIHRoaXMuX3VzZXJBZ2VudCA9IHVzZXJBZ2VudDtcbiAgICAgICAgdGhpcy5fZWFybHlNZWRpYUVzdGFibGlzaGVkID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3RydWN0b3IuXG4gICAgICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBTZXNzaW9uICR7dGhpcy5pZH0gaW4gc3RhdGUgJHt0aGlzLl9zdGF0ZX0gaXMgYmVpbmcgZGlzcG9zZWRgKTtcbiAgICAgICAgLy8gUmVtb3ZlIGZyb20gdGhlIHVzZXIgYWdlbnQncyBzZXNzaW9uIGNvbGxlY3Rpb25cbiAgICAgICAgZGVsZXRlIHRoaXMudXNlckFnZW50Ll9zZXNzaW9uc1t0aGlzLmlkXTtcbiAgICAgICAgLy8gRGlzcG9zZSBvZiBkaWFsb2cgbWVkaWFcbiAgICAgICAgaWYgKHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIC8vIFRPRE86IFRoZSBTREggbmVlZHMgdG8gcmVtYWluIGRlZmluZWQgYXMgaXQgd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgaXMgY2xvc2VkIGluIGNhc2VzXG4gICAgICAgICAgICAvLyB3aGVyZSBhbiBhbnN3ZXIvb2ZmZXIgYXJyaXZlcyB3aGlsZSB0aGUgc2Vzc2lvbiBpcyBiZWluZyB0b3JuIGRvd24uIFRoZXJlIGFyZSBhIHZhcmlldHlcbiAgICAgICAgICAgIC8vIG9mIGNpcmN1bXN0YW5jZXMgd2hlcmUgdGhpcyBjYW4gaGFwcGVuIC0gc2VuZGluZyBhIEJZRSBkdXJpbmcgYSByZS1JTlZJVEUgZm9yIGV4YW1wbGUuXG4gICAgICAgICAgICAvLyBUaGUgY29kZSBpcyBjdXJyZW50bHkgd3JpdHRlbiBzdWNoIHRoYXQgaXQgbGF6aWx5IG1ha2VzIGEgbmV3IFNESCB3aGVuIGl0IG5lZWRzIG9uZVxuICAgICAgICAgICAgLy8gYW5kIG9uZSBpcyBub3QgeWV0IGRlZmluZWQuIFRodXMgaWYgd2UgdW5kZWZpbmVkIGl0IGhlcmUsIGl0IHdpbGwgY3VycmVudGx5IG1ha2UgYVxuICAgICAgICAgICAgLy8gbmV3IG9uZSB3aGljaCBpcyBvdXQgb2Ygc3luYyBhbmQgdGhlbiBuZXZlciBnZXRzIGNsZWFuZWQgdXAuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVGhlIGRvd25zaWRlIG9mIGxlYXZpbmcgaXQgZGVmaW5lZCBhcmUgdGhhdCBjYWxscyB0aGlzIGNsb3NlZCBTREggd2lsbCBjb250aW51ZSB0byBiZVxuICAgICAgICAgICAgLy8gbWFkZSAodGhpbmsgc2V0RGVzY3JpcHRpb24pIGFuZCB0aG9zZSBzaG91bGQvd2lsbCBmYWlsLiBUaGVzZSBmYWlsdXJlcyBhcmUgaGFuZGxlZCwgYnV0XG4gICAgICAgICAgICAvLyBpdCB3b3VsZCBiZSBuaWNlIHRvIGhhdmUgaXQgYWxsIGNvZGVkIHVwIGluIGEgd2F5IHdoZXJlIGhhdmluZyBhbiB1bmRlZmluZWQgU0RIIHdoZXJlXG4gICAgICAgICAgICAvLyBvbmUgaXMgZXhwZWN0ZWQgdGhyb3dzIGFuIGVycm9yLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5Jbml0aWFsOlxuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyB0aGUgSW52aXRlci9JbnZpdGF0aW9uIHN1YiBjbGFzcyBkaXNwb3NlIG1ldGhvZCBoYW5kbGVzIHRoaXMgY2FzZVxuICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoaW5nOlxuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyB0aGUgSW52aXRlci9JbnZpdGF0aW9uIHN1YiBjbGFzcyBkaXNwb3NlIG1ldGhvZCBoYW5kbGVzIHRoaXMgY2FzZVxuICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2J5ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3YWl0IGZvciB0aGUgcmVzcG9uc2UgdG8gdGhlIEJZRSBiZWZvcmUgcmVzb2x2aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjY2VwdDogKCkgPT4gcmVzb2x2ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25SZWRpcmVjdDogKCkgPT4gcmVzb2x2ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25SZWplY3Q6ICgpID0+IHJlc29sdmUoKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLlRlcm1pbmF0aW5nOlxuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBub3RoaW5nIHRvIGJlIGRvbmVcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIG5vdGhpbmcgdG8gYmUgZG9uZVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHN0YXRlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBhc3NlcnRlZCBpZGVudGl0eSBvZiB0aGUgcmVtb3RlIHVzZXIuXG4gICAgICovXG4gICAgZ2V0IGFzc2VydGVkSWRlbnRpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hc3NlcnRlZElkZW50aXR5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29uZmlybWVkIHNlc3Npb24gZGlhbG9nLlxuICAgICAqL1xuICAgIGdldCBkaWFsb2coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kaWFsb2c7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNlc3Npb24gYmVpbmcgcmVwbGFjZSBieSB0aGlzIG9uZS5cbiAgICAgKi9cbiAgICBnZXQgcmVwbGFjZWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXBsYWNlZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBlYXJseU1lZGlhRXN0YWJsaXNoZWRcbiAgICAgKi9cbiAgICAgZ2V0IGVhcmx5TWVkaWFFc3RhYmxpc2hlZCgpIHtcbiAgICAgICAgIHJldHVybiB0aGlzLl9lYXJseU1lZGlhRXN0YWJsaXNoZWQ7XG4gICAgIH1cbiAgICAgc2V0IGVhcmx5TWVkaWFFc3RhYmxpc2hlZChmbGFnKXtcbiAgICAgICAgIHRoaXMuX2Vhcmx5TWVkaWFFc3RhYmxpc2hlZCA9IGZsYWc7XG4gICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlci5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIElmIGB0aGlzYCBpcyBhbiBpbnN0YW5jZSBvZiBgSW52aXRhdGlvbmAsXG4gICAgICogYHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJgIHdpbGwgYmUgZGVmaW5lZCB3aGVuIHRoZSBzZXNzaW9uIHN0YXRlIGNoYW5nZXMgdG8gXCJlc3RhYmxpc2hlZFwiLlxuICAgICAqIElmIGB0aGlzYCBpcyBhbiBpbnN0YW5jZSBvZiBgSW52aXRlcmAgYW5kIGFuIG9mZmVyIHdhcyBzZW50IGluIHRoZSBJTlZJVEUsXG4gICAgICogYHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJgIHdpbGwgYmUgZGVmaW5lZCB3aGVuIHRoZSBzZXNzaW9uIHN0YXRlIGNoYW5nZXMgdG8gXCJlc3RhYmxpc2hpbmdcIi5cbiAgICAgKiBJZiBgdGhpc2AgaXMgYW4gaW5zdGFuY2Ugb2YgYEludml0ZXJgIGFuZCBhbiBvZmZlciB3YXMgbm90IHNlbnQgaW4gdGhlIElOVklURSxcbiAgICAgKiBgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcmAgd2lsbCBiZSBkZWZpbmVkIHdoZW4gdGhlIHNlc3Npb24gc3RhdGUgY2hhbmdlcyB0byBcImVzdGFibGlzaGVkXCIuXG4gICAgICogT3RoZXJ3aXNlIGB1bmRlZmluZWRgLlxuICAgICAqL1xuICAgIGdldCBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjtcbiAgICB9XG4gICAgc2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoaGFuZGxlcikge1xuICAgICAgICB0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyID0gaGFuZGxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIGZhY3RvcnkuXG4gICAgICovXG4gICAgZ2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyQWdlbnQuY29uZmlndXJhdGlvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU0RIIG1vZGlmaWVycyBmb3IgdGhlIGluaXRpYWwgSU5WSVRFIHRyYW5zYWN0aW9uLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVXNlZCBpbiBhbGwgY2FzZXMgd2hlbiBoYW5kbGluZyB0aGUgaW5pdGlhbCBJTlZJVEUgdHJhbnNhY3Rpb24gYXMgZWl0aGVyIFVBQyBvciBVQVMuXG4gICAgICogTWF5IGJlIHNldCBkaXJlY3RseSBhdCBhbnl0aW1lLlxuICAgICAqIE1heSBvcHRpb25hbGx5IGJlIHNldCB2aWEgY29uc3RydWN0b3Igb3B0aW9uLlxuICAgICAqIE1heSBvcHRpb25hbGx5IGJlIHNldCB2aWEgb3B0aW9ucyBwYXNzZWQgdG8gSW52aXRlci5pbnZpdGUoKSBvciBJbnZpdGF0aW9uLmFjY2VwdCgpLlxuICAgICAqL1xuICAgIGdldCBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyB8fCBbXTtcbiAgICB9XG4gICAgc2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMobW9kaWZpZXJzKSB7XG4gICAgICAgIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMgPSBtb2RpZmllcnMuc2xpY2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU0RIIG9wdGlvbnMgZm9yIHRoZSBpbml0aWFsIElOVklURSB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFVzZWQgaW4gYWxsIGNhc2VzIHdoZW4gaGFuZGxpbmcgdGhlIGluaXRpYWwgSU5WSVRFIHRyYW5zYWN0aW9uIGFzIGVpdGhlciBVQUMgb3IgVUFTLlxuICAgICAqIE1heSBiZSBzZXQgZGlyZWN0bHkgYXQgYW55dGltZS5cbiAgICAgKiBNYXkgb3B0aW9uYWxseSBiZSBzZXQgdmlhIGNvbnN0cnVjdG9yIG9wdGlvbi5cbiAgICAgKiBNYXkgb3B0aW9uYWxseSBiZSBzZXQgdmlhIG9wdGlvbnMgcGFzc2VkIHRvIEludml0ZXIuaW52aXRlKCkgb3IgSW52aXRhdGlvbi5hY2NlcHQoKS5cbiAgICAgKi9cbiAgICBnZXQgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyB8fCB7fTtcbiAgICB9XG4gICAgc2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU0RIIG1vZGlmaWVycyBmb3IgcmUtSU5WSVRFIHRyYW5zYWN0aW9ucy5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFVzZWQgaW4gYWxsIGNhc2VzIHdoZW4gaGFuZGxpbmcgYSByZS1JTlZJVEUgdHJhbnNhY3Rpb24gYXMgZWl0aGVyIFVBQyBvciBVQVMuXG4gICAgICogTWF5IGJlIHNldCBkaXJlY3RseSBhdCBhbnl0aW1lLlxuICAgICAqIE1heSBvcHRpb25hbGx5IGJlIHNldCB2aWEgY29uc3RydWN0b3Igb3B0aW9uLlxuICAgICAqIE1heSBvcHRpb25hbGx5IGJlIHNldCB2aWEgb3B0aW9ucyBwYXNzZWQgdG8gU2Vzc2lvbi5pbnZpdGUoKS5cbiAgICAgKi9cbiAgICBnZXQgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlIHx8IFtdO1xuICAgIH1cbiAgICBzZXQgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlKG1vZGlmaWVycykge1xuICAgICAgICB0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzUmVJbnZpdGUgPSBtb2RpZmllcnMuc2xpY2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU0RIIG9wdGlvbnMgZm9yIHJlLUlOVklURSB0cmFuc2FjdGlvbnMuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBVc2VkIGluIGFsbCBjYXNlcyB3aGVuIGhhbmRsaW5nIGEgcmUtSU5WSVRFIHRyYW5zYWN0aW9uIGFzIGVpdGhlciBVQUMgb3IgVUFTLlxuICAgICAqIE1heSBiZSBzZXQgZGlyZWN0bHkgYXQgYW55dGltZS5cbiAgICAgKiBNYXkgb3B0aW9uYWxseSBiZSBzZXQgdmlhIGNvbnN0cnVjdG9yIG9wdGlvbi5cbiAgICAgKiBNYXkgb3B0aW9uYWxseSBiZSBzZXQgdmlhIG9wdGlvbnMgcGFzc2VkIHRvIFNlc3Npb24uaW52aXRlKCkuXG4gICAgICovXG4gICAgZ2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlIHx8IHt9O1xuICAgIH1cbiAgICBzZXQgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNSZUludml0ZShvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGUgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2Vzc2lvbiBzdGF0ZS5cbiAgICAgKi9cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICB9XG4gICAgc2V0IHN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlc3Npb24gc3RhdGUgY2hhbmdlIGVtaXR0ZXIuXG4gICAgICovXG4gICAgZ2V0IHN0YXRlQ2hhbmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB1c2VyIGFnZW50LlxuICAgICAqL1xuICAgIGdldCB1c2VyQWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyQWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuZCB0aGUge0BsaW5rIFNlc3Npb259LiBTZW5kcyBhIEJZRS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgYnVja2V0LiBTZWUge0BsaW5rIFNlc3Npb25CeWVPcHRpb25zfSBmb3IgZGV0YWlscy5cbiAgICAgKi9cbiAgICBieWUob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gXCJTZXNzaW9uLmJ5ZSgpIG1heSBvbmx5IGJlIGNhbGxlZCBpZiBlc3RhYmxpc2hlZCBzZXNzaW9uLlwiO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLkluaXRpYWw6XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuY2FuY2VsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSBcIiBIb3dldmVyIEludml0ZXIuaW52aXRlKCkgaGFzIG5vdCB5ZXQgYmVlbiBjYWxsZWQuXCI7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gXCIgUGVyaGFwcyB5b3Ugc2hvdWxkIGhhdmUgY2FsbGVkIEludml0ZXIuY2FuY2VsKCk/XCI7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLnJlamVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gXCIgSG93ZXZlciBJbnZpdGF0aW9uLmFjY2VwdCgpIGhhcyBub3QgeWV0IGJlZW4gY2FsbGVkLlwiO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9IFwiIFBlcmhhcHMgeW91IHNob3VsZCBoYXZlIGNhbGxlZCBJbnZpdGF0aW9uLnJlamVjdCgpP1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLkVzdGFibGlzaGluZzpcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5jYW5jZWwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9IFwiIEhvd2V2ZXIgYSBkaWFsb2cgZG9lcyBub3QgeWV0IGV4aXN0LlwiO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9IFwiIFBlcmhhcHMgeW91IHNob3VsZCBoYXZlIGNhbGxlZCBJbnZpdGVyLmNhbmNlbCgpP1wiO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5yZWplY3QgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9IFwiIEhvd2V2ZXIgSW52aXRhdGlvbi5hY2NlcHQoKSBoYXMgbm90IHlldCBiZWVuIGNhbGxlZCAob3Igbm90IHlldCByZXNvbHZlZCkuXCI7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gXCIgUGVyaGFwcyB5b3Ugc2hvdWxkIGhhdmUgY2FsbGVkIEludml0YXRpb24ucmVqZWN0KCk/XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQ6IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0RGVsZWdhdGUgPSBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHRoaXMuY29weVJlcXVlc3RPcHRpb25zKG9wdGlvbnMucmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9ieWUocmVxdWVzdERlbGVnYXRlLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5UZXJtaW5hdGluZzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlICs9IFwiIEhvd2V2ZXIgdGhpcyBzZXNzaW9uIGlzIGFscmVhZHkgdGVybWluYXRpbmcuXCI7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuY2FuY2VsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSBcIiBQZXJoYXBzIHlvdSBoYXZlIGFscmVhZHkgY2FsbGVkIEludml0ZXIuY2FuY2VsKCk/XCI7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLnJlamVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gXCIgUGVyaGFwcyB5b3UgaGF2ZSBhbHJlYWR5IGNhbGxlZCBTZXNzaW9uLmJ5ZSgpP1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQ6XG4gICAgICAgICAgICAgICAgbWVzc2FnZSArPSBcIiBIb3dldmVyIHRoaXMgc2Vzc2lvbiBpcyBhbHJlYWR5IHRlcm1pbmF0ZWQuXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gc3RhdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYEludmFsaWQgc2Vzc2lvbiBzdGF0ZSAke3RoaXMuc3RhdGV9YCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaGFyZSB7QGxpbmsgSW5mb30gd2l0aCBwZWVyLiBTZW5kcyBhbiBJTkZPLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuIFNlZSB7QGxpbmsgU2Vzc2lvbkluZm9PcHRpb25zfSBmb3IgZGV0YWlscy5cbiAgICAgKi9cbiAgICBpbmZvKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvLyBndWFyZCBzZXNzaW9uIHN0YXRlXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBcIlNlc3Npb24uaW5mbygpIG1heSBvbmx5IGJlIGNhbGxlZCBpZiBlc3RhYmxpc2hlZCBzZXNzaW9uLlwiO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBJbnZhbGlkIHNlc3Npb24gc3RhdGUgJHt0aGlzLnN0YXRlfWApKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1ZXN0RGVsZWdhdGUgPSBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZTtcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB0aGlzLmNvcHlSZXF1ZXN0T3B0aW9ucyhvcHRpb25zLnJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luZm8ocmVxdWVzdERlbGVnYXRlLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbmVnb3RpYXRlIHRoZSBzZXNzaW9uLiBTZW5kcyBhIHJlLUlOVklURS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgYnVja2V0LiBTZWUge0BsaW5rIFNlc3Npb25JbnZpdGVPcHRpb25zfSBmb3IgZGV0YWlscy5cbiAgICAgKi9cbiAgICBpbnZpdGUob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIlNlc3Npb24uaW52aXRlXCIpO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBJbnZhbGlkIHNlc3Npb24gc3RhdGUgJHt0aGlzLnN0YXRlfWApKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nUmVpbnZpdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgUmVxdWVzdFBlbmRpbmdFcnJvcihcIlJlaW52aXRlIGluIHByb2dyZXNzLiBQbGVhc2Ugd2FpdCB1bnRpbCBjb21wbGV0ZSwgdGhlbiB0cnkgYWdhaW4uXCIpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlbmRpbmdSZWludml0ZSA9IHRydWU7XG4gICAgICAgIC8vIE1vZGlmaWVycyBhbmQgb3B0aW9ucyBmb3IgaW5pdGlhbCBJTlZJVEUgdHJhbnNhY3Rpb25cbiAgICAgICAgaWYgKG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycykge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzUmVJbnZpdGUgPSBvcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNSZUludml0ZSA9IG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVsZWdhdGUgPSB7XG4gICAgICAgICAgICBvbkFjY2VwdDogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQSByZS1JTlZJVEUgdHJhbnNhY3Rpb24gaGFzIGFuIG9mZmVyL2Fuc3dlciBbUkZDMzI2NF0gZXhjaGFuZ2VcbiAgICAgICAgICAgICAgICAvLyBhc3NvY2lhdGVkIHdpdGggaXQuICBUaGUgVUFDIChVc2VyIEFnZW50IENsaWVudCkgZ2VuZXJhdGluZyBhIGdpdmVuXG4gICAgICAgICAgICAgICAgLy8gcmUtSU5WSVRFIGNhbiBhY3QgYXMgdGhlIG9mZmVyZXIgb3IgYXMgdGhlIGFuc3dlcmVyLiAgQSBVQUMgd2lsbGluZ1xuICAgICAgICAgICAgICAgIC8vIHRvIGFjdCBhcyB0aGUgb2ZmZXJlciBpbmNsdWRlcyBhbiBvZmZlciBpbiB0aGUgcmUtSU5WSVRFLiAgVGhlIFVBU1xuICAgICAgICAgICAgICAgIC8vIChVc2VyIEFnZW50IFNlcnZlcikgdGhlbiBwcm92aWRlcyBhbiBhbnN3ZXIgaW4gYSByZXNwb25zZSB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyByZS1JTlZJVEUuICBBIFVBQyB3aWxsaW5nIHRvIGFjdCBhcyBhbnN3ZXJlciBkb2VzIG5vdCBpbmNsdWRlIGFuXG4gICAgICAgICAgICAgICAgLy8gb2ZmZXIgaW4gdGhlIHJlLUlOVklURS4gIFRoZSBVQVMgdGhlbiBwcm92aWRlcyBhbiBvZmZlciBpbiBhIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIHJlLUlOVklURSBiZWNvbWluZywgdGh1cywgdGhlIG9mZmVyZXIuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYxNDEjc2VjdGlvbi0xXG4gICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGdldEJvZHkocmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vIHdheSB0byByZWNvdmVyLCBzbyB0ZXJtaW5hdGUgc2Vzc2lvbiBhbmQgbWFyayBhcyBmYWlsZWQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiUmVjZWl2ZWQgMnh4IHJlc3BvbnNlIHRvIHJlLUlOVklURSB3aXRob3V0IGEgc2Vzc2lvbiBkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2tBbmRCeWUocmVzcG9uc2UsIDQwMCwgXCJNaXNzaW5nIHNlc3Npb24gZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nUmVpbnZpdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy53aXRob3V0U2RwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElOVklURSB3aXRob3V0IFNEUCAtIHNldCByZW1vdGUgb2ZmZXIgYW5kIHNlbmQgYW4gYW5zd2VyIGluIHRoZSBBQ0tcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOiB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOiB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnNSZUludml0ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE9mZmVyQW5kR2V0QW5zd2VyKGJvZHksIGFuc3dlck9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoYW5zd2VyQm9keSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuYWNrKHsgYm9keTogYW5zd2VyQm9keSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIHdheSB0byByZWNvdmVyLCBzbyB0ZXJtaW5hdGUgc2Vzc2lvbiBhbmQgbWFyayBhcyBmYWlsZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBoYW5kbGUgb2ZmZXIgaW4gMnh4IHJlc3BvbnNlIHRvIHJlLUlOVklURVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSBCWUUgc2hvdWxkIG5vdCBiZSBzZW50IGlmIGFscmVhZHkgdGVybWluYXRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZXhhbXBsZSwgYSBCWUUgbWF5IGJlIHNlbnQvcmVjZWl2ZWQgd2hpbGUgcmUtSU5WSVRFIGlzIG91dHN0YW5kaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2tBbmRCeWUocmVzcG9uc2UsIDQ4OCwgXCJCYWQgTWVkaWEgRGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nUmVpbnZpdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZSAmJiBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJTlZJVEUgd2l0aCBTRFAgLSBzZXQgcmVtb3RlIGFuc3dlciBhbmQgc2VuZCBhbiBBQ0tcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOiB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOiB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnNSZUludml0ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFuc3dlcihib2R5LCBhbnN3ZXJPcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBObyB3YXkgdG8gcmVjb3Zlciwgc28gdGVybWluYXRlIHNlc3Npb24gYW5kIG1hcmsgYXMgZmFpbGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gaGFuZGxlIGFuc3dlciBpbiAyeHggcmVzcG9uc2UgdG8gcmUtSU5WSVRFXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBIEJZRSBzaG91bGQgb25seSBiZSBzZW50IGlmIHNlc3Npb24gaXMgbm90IGFscmVhZHkgdGVybWluYXRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBleGFtcGxlLCBhIEJZRSBtYXkgYmUgc2VudC9yZWNlaXZlZCB3aGlsZSByZS1JTlZJVEUgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgQUNLIG5lZWRzIHRvIGJlIHNlbnQgcmVnYXJkbGVzcyBhcyBpdCB3YXMgbm90IGhhbmRsZWQgYnkgdGhlIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2tBbmRCeWUocmVzcG9uc2UsIDQ4OCwgXCJCYWQgTWVkaWEgRGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdSZWludml0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVxdWVzdERlbGVnYXRlICYmIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUub25BY2NlcHQocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICAgICAgb25Qcm9ncmVzczogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgICAgIG9uUmVkaXJlY3Q6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblJlamVjdDogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIlJlY2VpdmVkIGEgbm9uLTJ4eCByZXNwb25zZSB0byByZS1JTlZJVEVcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nUmVpbnZpdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy53aXRob3V0U2RwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZSAmJiBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZS5vblJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUub25SZWplY3QocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvbGxiYWNrT2ZmZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gd2F5IHRvIHJlY292ZXIsIHNvIHRlcm1pbmF0ZSBzZXNzaW9uIGFuZCBtYXJrIGFzIGZhaWxlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIHJvbGxiYWNrIG9mZmVyIG9uIG5vbi0yeHggcmVzcG9uc2UgdG8gcmUtSU5WSVRFXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBIEJZRSBzaG91bGQgb25seSBiZSBzZW50IGlmIHNlc3Npb24gaXMgbm90IGFscmVhZHkgdGVybWluYXRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBleGFtcGxlLCBhIEJZRSBtYXkgYmUgc2VudC9yZWNlaXZlZCB3aGlsZSByZS1JTlZJVEUgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIEFDSyB3YXMgYWxyZWFkeSBzZW50IGJ5IHRoZSB0cmFuc2FjdGlvbiwgc28ganVzdCBuZWVkIHRvIHNlbmQgQllFLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRpYWxvZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaWFsb2cgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goXCJSZWFzb246IFwiICsgdGhpcy5nZXRSZWFzb25IZWFkZXJWYWx1ZSg1MDAsIFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5ieWUodW5kZWZpbmVkLCB7IGV4dHJhSGVhZGVycyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUgJiYgb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUub25SZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZS5vblJlamVjdChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgICAgICBvblRyeWluZzogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IG9wdGlvbnMucmVxdWVzdE9wdGlvbnMgfHwge307XG4gICAgICAgIHJlcXVlc3RPcHRpb25zLmV4dHJhSGVhZGVycyA9IChyZXF1ZXN0T3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7XG4gICAgICAgIHJlcXVlc3RPcHRpb25zLmV4dHJhSGVhZGVycy5wdXNoKFwiQWxsb3c6IFwiICsgQWxsb3dlZE1ldGhvZHMudG9TdHJpbmcoKSk7XG4gICAgICAgIHJlcXVlc3RPcHRpb25zLmV4dHJhSGVhZGVycy5wdXNoKFwiQ29udGFjdDogXCIgKyB0aGlzLl9jb250YWN0KTtcbiAgICAgICAgLy8gSnVzdCBzZW5kIGFuIElOVklURSB3aXRoIG5vIHNkcC4uLlxuICAgICAgICBpZiAob3B0aW9ucy53aXRob3V0U2RwKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlhbG9nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nUmVpbnZpdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaWFsb2cgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5kaWFsb2cuaW52aXRlKGRlbGVnYXRlLCByZXF1ZXN0T3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEdldCBhbiBvZmZlciBhbmQgc2VuZCBpdCBpbiBhbiBJTlZJVEVcbiAgICAgICAgY29uc3Qgb2ZmZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6IHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNSZUludml0ZSxcbiAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6IHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9mZmVyKG9mZmVyT3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKChvZmZlckJvZHkpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kaWFsb2cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdSZWludml0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRpYWxvZyB1bmRlZmluZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxdWVzdE9wdGlvbnMuYm9keSA9IG9mZmVyQm9keTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpYWxvZy5pbnZpdGUoZGVsZWdhdGUsIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gc2VuZCByZS1JTlZJVEVcIik7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdSZWludml0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxpdmVyIGEge0BsaW5rIE1lc3NhZ2V9LiBTZW5kcyBhIE1FU1NBR0UuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGJ1Y2tldC4gU2VlIHtAbGluayBTZXNzaW9uTWVzc2FnZU9wdGlvbnN9IGZvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIG1lc3NhZ2Uob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIC8vIGd1YXJkIHNlc3Npb24gc3RhdGVcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IFwiU2Vzc2lvbi5tZXNzYWdlKCkgbWF5IG9ubHkgYmUgY2FsbGVkIGlmIGVzdGFibGlzaGVkIHNlc3Npb24uXCI7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYEludmFsaWQgc2Vzc2lvbiBzdGF0ZSAke3RoaXMuc3RhdGV9YCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcXVlc3REZWxlZ2F0ZSA9IG9wdGlvbnMucmVxdWVzdERlbGVnYXRlO1xuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHRoaXMuY29weVJlcXVlc3RPcHRpb25zKG9wdGlvbnMucmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbWVzc2FnZShyZXF1ZXN0RGVsZWdhdGUsIHJlcXVlc3RPcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvZmZlciBhIHtAbGluayBSZWZlcnJhbH0uIFNlbmQgYSBSRUZFUi5cbiAgICAgKiBAcGFyYW0gcmVmZXJUbyAtIFRoZSByZWZlcnJhbCB0YXJnZXQuIElmIGEgYFNlc3Npb25gLCBhIFJFRkVSIHcvUmVwbGFjZXMgaXMgc2VudC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgYnVja2V0LiBTZWUge0BsaW5rIFNlc3Npb25SZWZlck9wdGlvbnN9IGZvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIHJlZmVyKHJlZmVyVG8sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvLyBndWFyZCBzZXNzaW9uIHN0YXRlXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBcIlNlc3Npb24ucmVmZXIoKSBtYXkgb25seSBiZSBjYWxsZWQgaWYgZXN0YWJsaXNoZWQgc2Vzc2lvbi5cIjtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgSW52YWxpZCBzZXNzaW9uIHN0YXRlICR7dGhpcy5zdGF0ZX1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdERlbGVnYXRlID0gb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGU7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0gdGhpcy5jb3B5UmVxdWVzdE9wdGlvbnMob3B0aW9ucy5yZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIHJlcXVlc3RPcHRpb25zLmV4dHJhSGVhZGVycyA9IHJlcXVlc3RPcHRpb25zLmV4dHJhSGVhZGVyc1xuICAgICAgICAgICAgPyByZXF1ZXN0T3B0aW9ucy5leHRyYUhlYWRlcnMuY29uY2F0KHRoaXMucmVmZXJFeHRyYUhlYWRlcnModGhpcy5yZWZlclRvU3RyaW5nKHJlZmVyVG8pKSlcbiAgICAgICAgICAgIDogdGhpcy5yZWZlckV4dHJhSGVhZGVycyh0aGlzLnJlZmVyVG9TdHJpbmcocmVmZXJUbykpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmZXIob3B0aW9ucy5vbk5vdGlmeSwgcmVxdWVzdERlbGVnYXRlLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgQllFLlxuICAgICAqIEBwYXJhbSBkZWxlZ2F0ZSAtIFJlcXVlc3QgZGVsZWdhdGUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnMgYnVja2V0LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9ieWUoZGVsZWdhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gVXNpbmcgY29yZSBzZXNzaW9uIGRpYWxvZ1xuICAgICAgICBpZiAoIXRoaXMuZGlhbG9nKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiU2Vzc2lvbiBkaWFsb2cgdW5kZWZpbmVkLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlhbG9nID0gdGhpcy5kaWFsb2c7XG4gICAgICAgIC8vIFRoZSBjYWxsZXIncyBVQSBNQVkgc2VuZCBhIEJZRSBmb3IgZWl0aGVyIGNvbmZpcm1lZCBvciBlYXJseSBkaWFsb2dzLFxuICAgICAgICAvLyBhbmQgdGhlIGNhbGxlZSdzIFVBIE1BWSBzZW5kIGEgQllFIG9uIGNvbmZpcm1lZCBkaWFsb2dzLCBidXQgTVVTVCBOT1RcbiAgICAgICAgLy8gc2VuZCBhIEJZRSBvbiBlYXJseSBkaWFsb2dzLiBIb3dldmVyLCB0aGUgY2FsbGVlJ3MgVUEgTVVTVCBOT1Qgc2VuZCBhXG4gICAgICAgIC8vIEJZRSBvbiBhIGNvbmZpcm1lZCBkaWFsb2cgdW50aWwgaXQgaGFzIHJlY2VpdmVkIGFuIEFDSyBmb3IgaXRzIDJ4eFxuICAgICAgICAvLyByZXNwb25zZSBvciB1bnRpbCB0aGUgc2VydmVyIHRyYW5zYWN0aW9uIHRpbWVzIG91dC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNVxuICAgICAgICBzd2l0Y2ggKGRpYWxvZy5zZXNzaW9uU3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvbkRpYWxvZ1N0YXRlLkluaXRpYWw6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRpYWxvZyBzdGF0ZSAke2RpYWxvZy5zZXNzaW9uU3RhdGV9YCk7XG4gICAgICAgICAgICBjYXNlIFNlc3Npb25EaWFsb2dTdGF0ZS5FYXJseTogLy8gSW1wbGVtZW50YXRpb24gY2hvaWNlIC0gbm90IHNlbmRpbmcgQllFIGZvciBlYXJseSBkaWFsb2dzLlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkaWFsb2cgc3RhdGUgJHtkaWFsb2cuc2Vzc2lvblN0YXRlfWApO1xuICAgICAgICAgICAgY2FzZSBTZXNzaW9uRGlhbG9nU3RhdGUuQWNrV2FpdDoge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgc3RhdGUgb25seSBvY2N1cnMgaWYgd2UgYXJlIHRoZSBjYWxsZWUuXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0aW5nKTsgLy8gV2UncmUgdGVybWluYXRpbmdcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmRlbGVnYXRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBBQ0sgc2hvd3MgdXAsIHNheSBCWUUuXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBkaWFsb2cuYnllKGRlbGVnYXRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3IgdGhlIHNlcnZlciB0cmFuc2FjdGlvbiB0aW1lcyBvdXQgYmVmb3JlIHRoZSBBQ0sgYXJyaXZlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNrVGltZW91dDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBkaWFsb2cuYnllKGRlbGVnYXRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvbkRpYWxvZ1N0YXRlLkNvbmZpcm1lZDoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBkaWFsb2cuYnllKGRlbGVnYXRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXF1ZXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvbkRpYWxvZ1N0YXRlLlRlcm1pbmF0ZWQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRpYWxvZyBzdGF0ZSAke2RpYWxvZy5zZXNzaW9uU3RhdGV9YCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBzdGF0ZS5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBJTkZPLlxuICAgICAqIEBwYXJhbSBkZWxlZ2F0ZSAtIFJlcXVlc3QgZGVsZWdhdGUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnMgYnVja2V0LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9pbmZvKGRlbGVnYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIFVzaW5nIGNvcmUgc2Vzc2lvbiBkaWFsb2dcbiAgICAgICAgaWYgKCF0aGlzLmRpYWxvZykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlNlc3Npb24gZGlhbG9nIHVuZGVmaW5lZC5cIikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5kaWFsb2cuaW5mbyhkZWxlZ2F0ZSwgb3B0aW9ucykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIE1FU1NBR0UuXG4gICAgICogQHBhcmFtIGRlbGVnYXRlIC0gUmVxdWVzdCBkZWxlZ2F0ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFJlcXVlc3Qgb3B0aW9ucyBidWNrZXQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX21lc3NhZ2UoZGVsZWdhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gVXNpbmcgY29yZSBzZXNzaW9uIGRpYWxvZ1xuICAgICAgICBpZiAoIXRoaXMuZGlhbG9nKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiU2Vzc2lvbiBkaWFsb2cgdW5kZWZpbmVkLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmRpYWxvZy5tZXNzYWdlKGRlbGVnYXRlLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgUkVGRVIuXG4gICAgICogQHBhcmFtIG9uTm90aWZ5IC0gTm90aWZpY2F0aW9uIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSBkZWxlZ2F0ZSAtIFJlcXVlc3QgZGVsZWdhdGUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnMgYnVja2V0LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9yZWZlcihvbk5vdGlmeSwgZGVsZWdhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gVXNpbmcgY29yZSBzZXNzaW9uIGRpYWxvZ1xuICAgICAgICBpZiAoIXRoaXMuZGlhbG9nKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiU2Vzc2lvbiBkaWFsb2cgdW5kZWZpbmVkLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgc2V0LCBkZWxpdmVyIGFueSBpbi1kaWFsb2cgTk9USUZZIHJlcXVlc3RzIGhlcmUuLi5cbiAgICAgICAgdGhpcy5vbk5vdGlmeSA9IG9uTm90aWZ5O1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuZGlhbG9nLnJlZmVyKGRlbGVnYXRlLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgQUNLIGFuZCB0aGVuIEJZRS4gVGhlcmUgYXJlIHVucmVjb3ZlcmFibGUgZXJyb3JzIHdoaWNoIGNhbiBvY2N1clxuICAgICAqIHdoaWxlIGhhbmRsaW5nIGRpYWxvZyBmb3JtaW5nIGFuZCBpbi1kaWFsb2cgSU5WSVRFIHJlc3BvbnNlcyBhbmQgd2hlblxuICAgICAqIHRoZXkgb2NjdXIgd2UgQUNLIHRoZSByZXNwb25zZSBhbmQgc2VuZCBhIEJZRS5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIEJZRSBpcyBzZW50IGluIHRoZSBkaWFsb2cgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXNwb25zZVxuICAgICAqIHdoaWNoIGlzIG5vdCBuZWNlc3NhcmlseSBgdGhpcy5kaWFsb2dgLiBBbmQsIGFjY29yZGluZ2x5LCB0aGVcbiAgICAgKiBzZXNzaW9uIHN0YXRlIGlzIG5vdCB0cmFuc2l0aW9uZWQgdG8gdGVybWluYXRlZCBhbmQgc2Vzc2lvbiBpcyBub3QgY2xvc2VkLlxuICAgICAqIEBwYXJhbSBpbnZpdGVSZXNwb25zZSAtIFRoZSByZXNwb25zZSBjYXVzaW5nIHRoZSBlcnJvci5cbiAgICAgKiBAcGFyYW0gc3RhdHVzQ29kZSAtIFN0YXR1cyBjb2RlIGZvciBoZSByZWFzb24gcGhyYXNlLlxuICAgICAqIEBwYXJhbSByZWFzb25QaHJhc2UgLSBSZWFzb24gcGhyYXNlIGZvciB0aGUgQllFLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFja0FuZEJ5ZShyZXNwb25zZSwgc3RhdHVzQ29kZSwgcmVhc29uUGhyYXNlKSB7XG4gICAgICAgIHJlc3BvbnNlLmFjaygpO1xuICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSBbXTtcbiAgICAgICAgaWYgKHN0YXR1c0NvZGUpIHtcbiAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKFwiUmVhc29uOiBcIiArIHRoaXMuZ2V0UmVhc29uSGVhZGVyVmFsdWUoc3RhdHVzQ29kZSwgcmVhc29uUGhyYXNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXNpbmcgdGhlIGRpYWxvZyBzZXNzaW9uIGFzc29jaWF0ZSB3aXRoIHRoZSByZXNwb25zZSAod2hpY2ggbWlnaHQgbm90IGJlIHRoaXMuZGlhbG9nKVxuICAgICAgICByZXNwb25zZS5zZXNzaW9uLmJ5ZSh1bmRlZmluZWQsIHsgZXh0cmFIZWFkZXJzIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgaW4gZGlhbG9nIEFDSyByZXF1ZXN0LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uQWNrUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIlNlc3Npb24ub25BY2tSZXF1ZXN0XCIpO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGVkICYmIHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5UZXJtaW5hdGluZykge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEFDSyByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlhbG9nID0gdGhpcy5kaWFsb2c7XG4gICAgICAgIGlmICghZGlhbG9nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaWFsb2cgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiByZWNlaXZlZCBhbnN3ZXIgaW4gQUNLLlxuICAgICAgICBjb25zdCBhbnN3ZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6IHRoaXMucGVuZGluZ1JlaW52aXRlQWNrXG4gICAgICAgICAgICAgICAgPyB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGVcbiAgICAgICAgICAgICAgICA6IHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsXG4gICAgICAgICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOiB0aGlzLnBlbmRpbmdSZWludml0ZUFja1xuICAgICAgICAgICAgICAgID8gdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlXG4gICAgICAgICAgICAgICAgOiB0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25BY2spIHtcbiAgICAgICAgICAgIGNvbnN0IGFjayA9IG5ldyBBY2socmVxdWVzdCk7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uQWNrKGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVzZXQgcGVuZGluZyBBQ0sgZmxhZ1xuICAgICAgICB0aGlzLnBlbmRpbmdSZWludml0ZUFjayA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKGRpYWxvZy5zaWduYWxpbmdTdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5Jbml0aWFsOiB7XG4gICAgICAgICAgICAgICAgLy8gU3RhdGUgc2hvdWxkIG5ldmVyIGJlIHJlYWNoZWQgYXMgZmlyc3QgcmVsaWFibGUgcmVzcG9uc2UgbXVzdCBoYXZlIGFuc3dlci9vZmZlci5cbiAgICAgICAgICAgICAgICAvLyBTbyB3ZSBtdXN0IGhhdmUgbmV2ZXIgaGFzIHNlbnQgYW4gb2ZmZXIuXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEludmFsaWQgc2lnbmFsaW5nIHN0YXRlICR7ZGlhbG9nLnNpZ25hbGluZ1N0YXRlfS5gKTtcbiAgICAgICAgICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSBbXCJSZWFzb246IFwiICsgdGhpcy5nZXRSZWFzb25IZWFkZXJWYWx1ZSg0ODgsIFwiQmFkIE1lZGlhIERlc2NyaXB0aW9uXCIpXTtcbiAgICAgICAgICAgICAgICBkaWFsb2cuYnllKHVuZGVmaW5lZCwgeyBleHRyYUhlYWRlcnMgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuU3RhYmxlOiB7XG4gICAgICAgICAgICAgICAgLy8gU3RhdGUgd2Ugc2hvdWxkIGJlIGluLlxuICAgICAgICAgICAgICAgIC8vIEVpdGhlciB0aGUgQUNLIGhhcyB0aGUgYW5zd2VyIHRoYXQgZ290IHVzIGhlcmUsIG9yIHdlIHdlcmUgaW4gdGhpcyBzdGF0ZSBwcmlvciB0byB0aGUgQUNLLlxuICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBnZXRCb2R5KHJlcXVlc3QubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIEFDSyBkb2Vzbid0IGhhdmUgYW4gYW5zd2VyLCBub3RoaW5nIHRvIGJlIGRvbmUuXG4gICAgICAgICAgICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuY29udGVudERpc3Bvc2l0aW9uID09PSBcInJlbmRlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmJvZHkgPSBib2R5LmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcnR5cGUgPSBib2R5LmNvbnRlbnRUeXBlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChib2R5LmNvbnRlbnREaXNwb3NpdGlvbiAhPT0gXCJzZXNzaW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRBbnN3ZXIoYm9keSwgYW5zd2VyT3B0aW9ucykuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSBbXCJSZWFzb246IFwiICsgdGhpcy5nZXRSZWFzb25IZWFkZXJWYWx1ZSg0ODgsIFwiQmFkIE1lZGlhIERlc2NyaXB0aW9uXCIpXTtcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmJ5ZSh1bmRlZmluZWQsIHsgZXh0cmFIZWFkZXJzIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLkhhdmVMb2NhbE9mZmVyOiB7XG4gICAgICAgICAgICAgICAgLy8gU3RhdGUgc2hvdWxkIG5ldmVyIGJlIHJlYWNoZWQgYXMgbG9jYWwgb2ZmZXIgd291bGQgYmUgYW5zd2VyZWQgYnkgdGhpcyBBQ0suXG4gICAgICAgICAgICAgICAgLy8gU28gd2UgbXVzdCBoYXZlIHJlY2VpdmVkIGFuIEFDSyB3aXRob3V0IGFuIGFuc3dlci5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHtkaWFsb2cuc2lnbmFsaW5nU3RhdGV9LmApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dHJhSGVhZGVycyA9IFtcIlJlYXNvbjogXCIgKyB0aGlzLmdldFJlYXNvbkhlYWRlclZhbHVlKDQ4OCwgXCJCYWQgTWVkaWEgRGVzY3JpcHRpb25cIildO1xuICAgICAgICAgICAgICAgIGRpYWxvZy5ieWUodW5kZWZpbmVkLCB7IGV4dHJhSGVhZGVycyB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXI6IHtcbiAgICAgICAgICAgICAgICAvLyBTdGF0ZSBzaG91bGQgbmV2ZXIgYmUgcmVhY2hlZCBhcyByZW1vdGUgb2ZmZXIgd291bGQgYmUgYW5zd2VyZWQgaW4gZmlyc3QgcmVsaWFibGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgLy8gU28gd2UgbXVzdCBoYXZlIG5ldmVyIGhhcyBzZW50IGFuIGFuc3dlci5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHtkaWFsb2cuc2lnbmFsaW5nU3RhdGV9LmApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dHJhSGVhZGVycyA9IFtcIlJlYXNvbjogXCIgKyB0aGlzLmdldFJlYXNvbkhlYWRlclZhbHVlKDQ4OCwgXCJCYWQgTWVkaWEgRGVzY3JpcHRpb25cIildO1xuICAgICAgICAgICAgICAgIGRpYWxvZy5ieWUodW5kZWZpbmVkLCB7IGV4dHJhSGVhZGVycyB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5DbG9zZWQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSAke2RpYWxvZy5zaWduYWxpbmdTdGF0ZX0uYCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHtkaWFsb2cuc2lnbmFsaW5nU3RhdGV9LmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBpbiBkaWFsb2cgQllFIHJlcXVlc3QuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25CeWVSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiU2Vzc2lvbi5vbkJ5ZVJlcXVlc3RcIik7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBCWUUgcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVxdWVzdGApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25CeWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ5ZSA9IG5ldyBCeWUocmVxdWVzdCk7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uQnllKGJ5ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXF1ZXN0LmFjY2VwdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGluIGRpYWxvZyBJTkZPIHJlcXVlc3QuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25JbmZvUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIlNlc3Npb24ub25JbmZvUmVxdWVzdFwiKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hlZCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYElORk8gcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVxdWVzdGApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25JbmZvKSB7XG4gICAgICAgICAgICBjb25zdCBpbmZvID0gbmV3IEluZm8ocmVxdWVzdCk7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uSW5mbyhpbmZvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZJWE1FOiBUT0RPOiBXZSBzaG91bGQgcmVqZWN0IHJlcXVlc3QuLi5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBJZiBhIFVBIHJlY2VpdmVzIGFuIElORk8gcmVxdWVzdCBhc3NvY2lhdGVkIHdpdGggYW4gSW5mbyBQYWNrYWdlIHRoYXRcbiAgICAgICAgICAgIC8vIHRoZSBVQSBoYXMgbm90IGluZGljYXRlZCB3aWxsaW5nbmVzcyB0byByZWNlaXZlLCB0aGUgVUEgTVVTVCBzZW5kIGFcbiAgICAgICAgICAgIC8vIDQ2OSAoQmFkIEluZm8gUGFja2FnZSkgcmVzcG9uc2UgKHNlZSBTZWN0aW9uIDExLjYpLCB3aGljaCBjb250YWlucyBhXG4gICAgICAgICAgICAvLyBSZWN2LUluZm8gaGVhZGVyIGZpZWxkIHdpdGggSW5mbyBQYWNrYWdlcyBmb3Igd2hpY2ggdGhlIFVBIGlzIHdpbGxpbmdcbiAgICAgICAgICAgIC8vIHRvIHJlY2VpdmUgSU5GTyByZXF1ZXN0cy5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDg2I3NlY3Rpb24tNC4yLjJcbiAgICAgICAgICAgIHJlcXVlc3QuYWNjZXB0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGluIGRpYWxvZyBJTlZJVEUgcmVxdWVzdC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkludml0ZVJlcXVlc3QocmVxdWVzdCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJTZXNzaW9uLm9uSW52aXRlUmVxdWVzdFwiKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hlZCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYElOVklURSByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IHBlbmRpbmcgQUNLIGZsYWdcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVpbnZpdGVBY2sgPSB0cnVlO1xuICAgICAgICAvLyBUT0RPOiB3b3VsZCBiZSBuaWNlIHRvIGhhdmUgY29yZSB0cmFjayBhbmQgc2V0IHRoZSBDb250YWN0IGhlYWRlcixcbiAgICAgICAgLy8gYnV0IGN1cnJlbnRseSB0aGUgc2Vzc2lvbiB3aGljaCBpcyBzZXR0aW5nIGl0IGlzIGhvbGRpbmcgb250byBpdC5cbiAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzID0gW1wiQ29udGFjdDogXCIgKyB0aGlzLl9jb250YWN0XTtcbiAgICAgICAgLy8gSGFuZGxlIFAtQXNzZXJ0ZWQtSWRlbnRpdHlcbiAgICAgICAgaWYgKHJlcXVlc3QubWVzc2FnZS5oYXNIZWFkZXIoXCJQLUFzc2VydGVkLUlkZW50aXR5XCIpKSB7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXIgPSByZXF1ZXN0Lm1lc3NhZ2UuZ2V0SGVhZGVyKFwiUC1Bc3NlcnRlZC1JZGVudGl0eVwiKTtcbiAgICAgICAgICAgIGlmICghaGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSGVhZGVyIHVuZGVmaW5lZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9hc3NlcnRlZElkZW50aXR5ID0gR3JhbW1hci5uYW1lQWRkckhlYWRlclBhcnNlKGhlYWRlcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOiB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGUsXG4gICAgICAgICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOiB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnNSZUludml0ZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdlbmVyYXRlUmVzcG9uc2VPZmZlckFuc3dlckluRGlhbG9nKG9wdGlvbnMpXG4gICAgICAgICAgICAudGhlbigoYm9keSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3V0Z29pbmdSZXNwb25zZSA9IHJlcXVlc3QuYWNjZXB0KHsgc3RhdHVzQ29kZTogMjAwLCBleHRyYUhlYWRlcnMsIGJvZHkgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uSW52aXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vbkludml0ZShyZXF1ZXN0Lm1lc3NhZ2UsIG91dGdvaW5nUmVzcG9uc2UubWVzc2FnZSwgMjAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gaGFuZGxlIHRvIHJlLUlOVklURSByZXF1ZXN0XCIpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRpYWxvZykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRpYWxvZyB1bmRlZmluZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IodGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGUpO1xuICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIGxvY2FsL3JlbW90ZSBvZmZlci4uLlxuICAgICAgICAgICAgaWYgKHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlID09PSBTaWduYWxpbmdTdGF0ZS5TdGFibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRnb2luZ1Jlc3BvbnNlID0gcmVxdWVzdC5yZWplY3QoeyBzdGF0dXNDb2RlOiA0ODggfSk7IC8vIE5vdCBBY2NlcHRhYmxlIEhlcmVcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uSW52aXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25JbnZpdGUocmVxdWVzdC5tZXNzYWdlLCBvdXRnb2luZ1Jlc3BvbnNlLm1lc3NhZ2UsIDQ4OCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByb2xsYmFja1xuICAgICAgICAgICAgdGhpcy5yb2xsYmFja09mZmVyKClcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Z29pbmdSZXNwb25zZSA9IHJlcXVlc3QucmVqZWN0KHsgc3RhdHVzQ29kZTogNDg4IH0pOyAvLyBOb3QgQWNjZXB0YWJsZSBIZXJlXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vbkludml0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uSW52aXRlKHJlcXVlc3QubWVzc2FnZSwgb3V0Z29pbmdSZXNwb25zZS5tZXNzYWdlLCA0ODgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvclJvbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gTm8gd2F5IHRvIHJlY292ZXIsIHNvIHRlcm1pbmF0ZSBzZXNzaW9uIGFuZCBtYXJrIGFzIGZhaWxlZC5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvclJvbGxiYWNrLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIHJvbGxiYWNrIG9mZmVyIG9uIHJlLUlOVklURSByZXF1ZXN0XCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dGdvaW5nUmVzcG9uc2UgPSByZXF1ZXN0LnJlamVjdCh7IHN0YXR1c0NvZGU6IDQ4OCB9KTsgLy8gTm90IEFjY2VwdGFibGUgSGVyZVxuICAgICAgICAgICAgICAgIC8vIEEgQllFIHNob3VsZCBvbmx5IGJlIHNlbnQgaWYgc2Vzc2lvbiBpcyBub3QgYWxyZWFkeSB0ZXJtaW5hdGVkLlxuICAgICAgICAgICAgICAgIC8vIEZvciBleGFtcGxlLCBhIEJZRSBtYXkgYmUgc2VudC9yZWNlaXZlZCB3aGlsZSByZS1JTlZJVEUgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBBQ0sgd2FzIGFscmVhZHkgc2VudCBieSB0aGUgdHJhbnNhY3Rpb24sIHNvIGp1c3QgbmVlZCB0byBzZW5kIEJZRS5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRpYWxvZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGlhbG9nIHVuZGVmaW5lZC5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzQnllID0gW107XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhSGVhZGVyc0J5ZS5wdXNoKFwiUmVhc29uOiBcIiArIHRoaXMuZ2V0UmVhc29uSGVhZGVyVmFsdWUoNTAwLCBcIkludGVybmFsIFNlcnZlciBFcnJvclwiKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmJ5ZSh1bmRlZmluZWQsIHsgZXh0cmFIZWFkZXJzIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25JbnZpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vbkludml0ZShyZXF1ZXN0Lm1lc3NhZ2UsIG91dGdvaW5nUmVzcG9uc2UubWVzc2FnZSwgNDg4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBpbiBkaWFsb2cgTUVTU0FHRSByZXF1ZXN0LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uTWVzc2FnZVJlcXVlc3QocmVxdWVzdCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJTZXNzaW9uLm9uTWVzc2FnZVJlcXVlc3RcIik7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBNRVNTQUdFIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlcXVlc3RgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKHJlcXVlc3QpO1xuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vbk1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXF1ZXN0LmFjY2VwdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBpbiBkaWFsb2cgTk9USUZZIHJlcXVlc3QuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25Ob3RpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiU2Vzc2lvbi5vbk5vdGlmeVJlcXVlc3RcIik7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBOT1RJRlkgcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVxdWVzdGApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoaXMgYSBOT1RJRlkgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm9ncmVzcyBvZiBhIFJFRkVSLFxuICAgICAgICAvLyBsb29rIHRvIGRlbGVnYXRlIGhhbmRsaW5nIHRvIHRoZSBhc3NvY2lhdGVkIGNhbGxiYWNrLlxuICAgICAgICBpZiAodGhpcy5vbk5vdGlmeSkge1xuICAgICAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbihyZXF1ZXN0KTtcbiAgICAgICAgICAgIHRoaXMub25Ob3RpZnkobm90aWZpY2F0aW9uKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UgYWNjZXB0IHRoZSBOT1RJRlkuXG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25Ob3RpZnkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24ocmVxdWVzdCk7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uTm90aWZ5KG5vdGlmaWNhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXF1ZXN0LmFjY2VwdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBpbiBkaWFsb2cgUFJBQ0sgcmVxdWVzdC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgb25QcmFja1JlcXVlc3QocmVxdWVzdCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJTZXNzaW9uLm9uUHJhY2tSZXF1ZXN0XCIpO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgUFJBQ0sgcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVxdWVzdGApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgaW4gZGlhbG9nIFJFRkVSIHJlcXVlc3QuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25SZWZlclJlcXVlc3QocmVxdWVzdCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJTZXNzaW9uLm9uUmVmZXJSZXF1ZXN0XCIpO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgUkVGRVIgcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVxdWVzdGApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJFRkVSIGlzIGEgU0lQIHJlcXVlc3QgYW5kIGlzIGNvbnN0cnVjdGVkIGFzIGRlZmluZWQgaW4gWzFdLiAgQSBSRUZFUlxuICAgICAgICAvLyByZXF1ZXN0IE1VU1QgY29udGFpbiBleGFjdGx5IG9uZSBSZWZlci1UbyBoZWFkZXIgZmllbGQgdmFsdWUuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNTE1I3NlY3Rpb24tMi40LjFcbiAgICAgICAgaWYgKCFyZXF1ZXN0Lm1lc3NhZ2UuaGFzSGVhZGVyKFwicmVmZXItdG9cIikpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJJbnZhbGlkIFJFRkVSIHBhY2tldC4gQSByZWZlci10byBoZWFkZXIgaXMgcmVxdWlyZWQuIFJlamVjdGluZy5cIik7XG4gICAgICAgICAgICByZXF1ZXN0LnJlamVjdCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlZmVycmFsID0gbmV3IFJlZmVycmFsKHJlcXVlc3QsIHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uUmVmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25SZWZlcihyZWZlcnJhbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJObyBkZWxlZ2F0ZSBhdmFpbGFibGUgdG8gaGFuZGxlIFJFRkVSLCBhdXRvbWF0aWNhbGx5IGFjY2VwdGluZyBhbmQgZm9sbG93aW5nLlwiKTtcbiAgICAgICAgICAgIHJlZmVycmFsXG4gICAgICAgICAgICAgICAgLmFjY2VwdCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gcmVmZXJyYWwubWFrZUludml0ZXIodGhpcy5fcmVmZXJyYWxJbnZpdGVyT3B0aW9ucykuaW52aXRlKCkpXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBsb2dnaW5nIGFuZCBlYXRpbmcgZXJyb3IuLi5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGFuIG9mZmVyIG9yIGFuc3dlciBmb3IgYSByZXNwb25zZSB0byBhbiBJTlZJVEUgcmVxdWVzdC5cbiAgICAgKiBJZiBhIHJlbW90ZSBvZmZlciB3YXMgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QsIHNldCB0aGUgcmVtb3RlXG4gICAgICogZGVzY3JpcHRpb24gYW5kIGdldCBhIGxvY2FsIGFuc3dlci4gSWYgYSByZW1vdGUgb2ZmZXIgd2FzIG5vdFxuICAgICAqIHByb3ZpZGVkLCBnZW5lcmF0ZXMgYSBsb2NhbCBvZmZlci5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZW5lcmF0ZVJlc3BvbnNlT2ZmZXJBbnN3ZXIocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5kaWFsb2cpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlUmVzcG9uc2VPZmZlckFuc3dlckluRGlhbG9nKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvZHkgPSBnZXRCb2R5KHJlcXVlc3QubWVzc2FnZSk7XG4gICAgICAgIGlmICghYm9keSB8fCBib2R5LmNvbnRlbnREaXNwb3NpdGlvbiAhPT0gXCJzZXNzaW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9mZmVyKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0T2ZmZXJBbmRHZXRBbnN3ZXIoYm9keSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgYW4gb2ZmZXIgb3IgYW5zd2VyIGZvciBhIHJlc3BvbnNlIHRvIGFuIElOVklURSByZXF1ZXN0XG4gICAgICogd2hlbiBhIGRpYWxvZyAoZWFybHkgb3Igb3RoZXJ3aXNlKSBoYXMgYWxyZWFkeSBiZWVuIGVzdGFibGlzaGVkLlxuICAgICAqIFRoaXMgbWV0aG9kIG1heSBOT1QgYmUgY2FsbGVkIGlmIGEgZGlhbG9nIGhhcyB5ZXQgdG8gYmUgZXN0YWJsaXNoZWQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2VuZXJhdGVSZXNwb25zZU9mZmVyQW5zd2VySW5EaWFsb2cob3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuZGlhbG9nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaWFsb2cgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLkluaXRpYWw6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T2ZmZXIob3B0aW9ucyk7XG4gICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLkhhdmVMb2NhbE9mZmVyOlxuICAgICAgICAgICAgICAgIC8vIG8gIE9uY2UgdGhlIFVBUyBoYXMgc2VudCBvciByZWNlaXZlZCBhbiBhbnN3ZXIgdG8gdGhlIGluaXRpYWxcbiAgICAgICAgICAgICAgICAvLyBvZmZlciwgaXQgTVVTVCBOT1QgZ2VuZXJhdGUgc3Vic2VxdWVudCBvZmZlcnMgaW4gYW55IHJlc3BvbnNlc1xuICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBpbml0aWFsIElOVklURS4gIFRoaXMgbWVhbnMgdGhhdCBhIFVBUyBiYXNlZCBvbiB0aGlzXG4gICAgICAgICAgICAgICAgLy8gc3BlY2lmaWNhdGlvbiBhbG9uZSBjYW4gbmV2ZXIgZ2VuZXJhdGUgc3Vic2VxdWVudCBvZmZlcnMgdW50aWxcbiAgICAgICAgICAgICAgICAvLyBjb21wbGV0aW9uIG9mIHRoZSBpbml0aWFsIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMi4xXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXI6XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRpYWxvZy5vZmZlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNlc3Npb24gb2ZmZXIgdW5kZWZpbmVkIGluIHNpZ25hbGluZyBzdGF0ZSAke3RoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlfS5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0T2ZmZXJBbmRHZXRBbnN3ZXIodGhpcy5kaWFsb2cub2ZmZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5TdGFibGU6XG4gICAgICAgICAgICAgICAgLy8gbyAgT25jZSB0aGUgVUFTIGhhcyBzZW50IG9yIHJlY2VpdmVkIGFuIGFuc3dlciB0byB0aGUgaW5pdGlhbFxuICAgICAgICAgICAgICAgIC8vIG9mZmVyLCBpdCBNVVNUIE5PVCBnZW5lcmF0ZSBzdWJzZXF1ZW50IG9mZmVycyBpbiBhbnkgcmVzcG9uc2VzXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIGluaXRpYWwgSU5WSVRFLiAgVGhpcyBtZWFucyB0aGF0IGEgVUFTIGJhc2VkIG9uIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBzcGVjaWZpY2F0aW9uIGFsb25lIGNhbiBuZXZlciBnZW5lcmF0ZSBzdWJzZXF1ZW50IG9mZmVycyB1bnRpbFxuICAgICAgICAgICAgICAgIC8vIGNvbXBsZXRpb24gb2YgdGhlIGluaXRpYWwgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjFcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSW4gZGlhbG9nIElOVklURSB3aXRob3V0IG9mZmVyLCBnZXQgYW4gb2ZmZXIgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPZmZlcihvcHRpb25zKTtcbiAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuQ2xvc2VkOlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHt0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZX0uYCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHt0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZX0uYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGxvY2FsIG9mZmVyLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldE9mZmVyKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc2RoID0gdGhpcy5zZXR1cFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoKTtcbiAgICAgICAgY29uc3Qgc2RoT3B0aW9ucyA9IG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHNkaE1vZGlmaWVycyA9IG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycztcbiAgICAgICAgLy8gVGhpcyBpcyBpbnRlbnRpb25hbGx5IHdyaXR0ZW4gdmVyeSBkZWZlbnNpdmVseS4gRG9uJ3QgdHJ1c3QgU0RIIHRvIGJlaGF2ZS5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBzZGhcbiAgICAgICAgICAgICAgICAuZ2V0RGVzY3JpcHRpb24oc2RoT3B0aW9ucywgc2RoTW9kaWZpZXJzKVxuICAgICAgICAgICAgICAgIC50aGVuKChib2R5QW5kQ29udGVudFR5cGUpID0+IGZyb21Cb2R5TGVnYWN5KGJvZHlBbmRDb250ZW50VHlwZSkpXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGRvbid0IHRydXN0IFNESCB0byByZWplY3Qgd2l0aCBFcnJvclxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiU2Vzc2lvbi5nZXRPZmZlcjogU0RIIGdldERlc2NyaXB0aW9uIHJlamVjdGVkLi4uXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoXCJTZXNzaW9uLmdldE9mZmVyIHVua25vd24gZXJyb3IuXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gZG9uJ3QgdHJ1c3QgU0RIIHRvIHRocm93IGFuIEVycm9yXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIlNlc3Npb24uZ2V0T2ZmZXI6IFNESCBnZXREZXNjcmlwdGlvbiB0aHJldy4uLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb2xsYmFjayBsb2NhbC9yZW1vdGUgb2ZmZXIuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgcm9sbGJhY2tPZmZlcigpIHtcbiAgICAgICAgY29uc3Qgc2RoID0gdGhpcy5zZXR1cFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoKTtcbiAgICAgICAgaWYgKHNkaC5yb2xsYmFja0Rlc2NyaXB0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgd3JpdHRlbiB2ZXJ5IGRlZmVuc2l2ZWx5LiBEb24ndCB0cnVzdCBTREggdG8gYmVoYXZlLlxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHNkaC5yb2xsYmFja0Rlc2NyaXB0aW9uKCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgdHJ1c3QgU0RIIHRvIHJlamVjdCB3aXRoIEVycm9yXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJTZXNzaW9uLnJvbGxiYWNrT2ZmZXI6IFNESCByb2xsYmFja0Rlc2NyaXB0aW9uIHJlamVjdGVkLi4uXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoXCJTZXNzaW9uLnJvbGxiYWNrT2ZmZXIgdW5rbm93biBlcnJvci5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBkb24ndCB0cnVzdCBTREggdG8gdGhyb3cgYW4gRXJyb3JcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiU2Vzc2lvbi5yb2xsYmFja09mZmVyOiBTREggcm9sbGJhY2tEZXNjcmlwdGlvbiB0aHJldy4uLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgcmVtb3RlIGFuc3dlci5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZXRBbnN3ZXIoYW5zd2VyLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHNkaCA9IHRoaXMuc2V0dXBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKCk7XG4gICAgICAgIGNvbnN0IHNkaE9wdGlvbnMgPSBvcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zO1xuICAgICAgICBjb25zdCBzZGhNb2RpZmllcnMgPSBvcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM7XG4gICAgICAgIC8vIFRoaXMgaXMgaW50ZW50aW9uYWxseSB3cml0dGVuIHZlcnkgZGVmZW5zaXZlbHkuIERvbid0IHRydXN0IFNESCB0byBiZWhhdmUuXG4gICAgICAgIC8vY29uc29sZS5sb2coXCI9Mj0gc2V0QW5zd2VyIGVudGVyXCIsc2RoLHNkaE9wdGlvbnMsc2RoTW9kaWZpZXJzKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghc2RoLmhhc0Rlc2NyaXB0aW9uKGFuc3dlci5jb250ZW50VHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IENvbnRlbnRUeXBlVW5zdXBwb3J0ZWRFcnJvcigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiU2Vzc2lvbi5zZXRBbnN3ZXI6IFNESCBoYXNEZXNjcmlwdGlvbiB0aHJldy4uLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIj09PSBzZXRBbnN3ZXIgc2V0RGVzY3JpcHRpb24gXCIsYW5zd2VyLmNvbnRlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHNkaC5zZXREZXNjcmlwdGlvbihhbnN3ZXIuY29udGVudCwgc2RoT3B0aW9ucywgc2RoTW9kaWZpZXJzKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBkb24ndCB0cnVzdCBTREggdG8gcmVqZWN0IHdpdGggRXJyb3JcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIlNlc3Npb24uc2V0QW5zd2VyOiBTREggc2V0RGVzY3JpcHRpb24gcmVqZWN0ZWQuLi5cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihcIlNlc3Npb24uc2V0QW5zd2VyIHVua25vd24gZXJyb3IuXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gZG9uJ3QgdHJ1c3QgU0RIIHRvIHRocm93IGFuIEVycm9yXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIlNlc3Npb24uc2V0QW5zd2VyOiBTREggc2V0RGVzY3JpcHRpb24gdGhyZXcuLi5cIik7XG4gICAgICAgICAgICBjb25zdCBlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHJlbW90ZSBvZmZlciBhbmQgZ2V0IGxvY2FsIGFuc3dlci5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZXRPZmZlckFuZEdldEFuc3dlcihvZmZlciwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBzZGggPSB0aGlzLnNldHVwU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcigpO1xuICAgICAgICBjb25zdCBzZGhPcHRpb25zID0gb3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucztcbiAgICAgICAgY29uc3Qgc2RoTW9kaWZpZXJzID0gb3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzO1xuICAgICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgd3JpdHRlbiB2ZXJ5IGRlZmVuc2l2ZWx5LiBEb24ndCB0cnVzdCBTREggdG8gYmVoYXZlLlxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFzZGguaGFzRGVzY3JpcHRpb24ob2ZmZXIuY29udGVudFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBDb250ZW50VHlwZVVuc3VwcG9ydGVkRXJyb3IoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIlNlc3Npb24uc2V0T2ZmZXJBbmRHZXRBbnN3ZXI6IFNESCBoYXNEZXNjcmlwdGlvbiB0aHJldy4uLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHNkaFxuICAgICAgICAgICAgICAgIC5zZXREZXNjcmlwdGlvbihvZmZlci5jb250ZW50LCBzZGhPcHRpb25zLCBzZGhNb2RpZmllcnMpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gc2RoLmdldERlc2NyaXB0aW9uKHNkaE9wdGlvbnMsIHNkaE1vZGlmaWVycykpXG4gICAgICAgICAgICAgICAgLnRoZW4oKGJvZHlBbmRDb250ZW50VHlwZSkgPT4gZnJvbUJvZHlMZWdhY3koYm9keUFuZENvbnRlbnRUeXBlKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgdHJ1c3QgU0RIIHRvIHJlamVjdCB3aXRoIEVycm9yXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJTZXNzaW9uLnNldE9mZmVyQW5kR2V0QW5zd2VyOiBTREggc2V0RGVzY3JpcHRpb24gb3IgZ2V0RGVzY3JpcHRpb24gcmVqZWN0ZWQuLi5cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihcIlNlc3Npb24uc2V0T2ZmZXJBbmRHZXRBbnN3ZXIgdW5rbm93biBlcnJvci5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBkb24ndCB0cnVzdCBTREggdG8gdGhyb3cgYW4gRXJyb3JcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiU2Vzc2lvbi5zZXRPZmZlckFuZEdldEFuc3dlcjogU0RIIHNldERlc2NyaXB0aW9uIG9yIGdldERlc2NyaXB0aW9uIHRocmV3Li4uXCIpO1xuICAgICAgICAgICAgY29uc3QgZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNESCBmb3IgY29uZmlybWVkIGRpYWxvZy5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZXRTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKHNkaCkge1xuICAgICAgICBpZiAodGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIGRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIgPSBzZGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNESCBmb3IgY29uZmlybWVkIGRpYWxvZy5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZXR1cFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIgPSB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5KHRoaXMsIHRoaXMudXNlckFnZW50LmNvbmZpZ3VyYXRpb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnlPcHRpb25zKTtcbiAgICAgICAgaWYgKChfYSA9IHRoaXMuZGVsZWdhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vblNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25TZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNpdGlvbiBzZXNzaW9uIHN0YXRlLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHN0YXRlVHJhbnNpdGlvbihuZXdTdGF0ZSkge1xuICAgICAgICBjb25zdCBpbnZhbGlkVHJhbnNpdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLl9zdGF0ZX0gdG8gJHtuZXdTdGF0ZX1gKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVmFsaWRhdGUgdHJhbnNpdGlvblxuICAgICAgICBzd2l0Y2ggKHRoaXMuX3N0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5Jbml0aWFsOlxuICAgICAgICAgICAgICAgIGlmIChuZXdTdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGluZyAmJlxuICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGVkICYmXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlICE9PSBTZXNzaW9uU3RhdGUuVGVybWluYXRpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUgIT09IFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoaW5nOlxuICAgICAgICAgICAgICAgIGlmIChuZXdTdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGVkICYmXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlICE9PSBTZXNzaW9uU3RhdGUuVGVybWluYXRpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUgIT09IFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQ6XG4gICAgICAgICAgICAgICAgaWYgKG5ld1N0YXRlICE9PSBTZXNzaW9uU3RhdGUuVGVybWluYXRpbmcgJiYgbmV3U3RhdGUgIT09IFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuVGVybWluYXRpbmc6XG4gICAgICAgICAgICAgICAgaWYgKG5ld1N0YXRlICE9PSBTZXNzaW9uU3RhdGUuVGVybWluYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQ6XG4gICAgICAgICAgICAgICAgaW52YWxpZFRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIHN0YXRlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUcmFuc2l0aW9uXG4gICAgICAgIHRoaXMuX3N0YXRlID0gbmV3U3RhdGU7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgU2Vzc2lvbiAke3RoaXMuaWR9IHRyYW5zaXRpb25lZCB0byBzdGF0ZSAke3RoaXMuX3N0YXRlfWApO1xuICAgICAgICB0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlci5lbWl0KHRoaXMuX3N0YXRlKTtcbiAgICAgICAgLy8gRGlzcG9zZVxuICAgICAgICBpZiAobmV3U3RhdGUgPT09IFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3B5UmVxdWVzdE9wdGlvbnMocmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSByZXF1ZXN0T3B0aW9ucy5leHRyYUhlYWRlcnMgPyByZXF1ZXN0T3B0aW9ucy5leHRyYUhlYWRlcnMuc2xpY2UoKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RPcHRpb25zLmJvZHlcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbjogcmVxdWVzdE9wdGlvbnMuYm9keS5jb250ZW50RGlzcG9zaXRpb24gfHwgXCJyZW5kZXJcIixcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogcmVxdWVzdE9wdGlvbnMuYm9keS5jb250ZW50VHlwZSB8fCBcInRleHQvcGxhaW5cIixcbiAgICAgICAgICAgICAgICBjb250ZW50OiByZXF1ZXN0T3B0aW9ucy5ib2R5LmNvbnRlbnQgfHwgXCJcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBleHRyYUhlYWRlcnMsXG4gICAgICAgICAgICBib2R5XG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFJlYXNvbkhlYWRlclZhbHVlKGNvZGUsIHJlYXNvbikge1xuICAgICAgICBjb25zdCBjYXVzZSA9IGNvZGU7XG4gICAgICAgIGxldCB0ZXh0ID0gZ2V0UmVhc29uUGhyYXNlKGNvZGUpO1xuICAgICAgICBpZiAoIXRleHQgJiYgcmVhc29uKSB7XG4gICAgICAgICAgICB0ZXh0ID0gcmVhc29uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlNJUDtjYXVzZT1cIiArIGNhdXNlICsgJzt0ZXh0PVwiJyArIHRleHQgKyAnXCInO1xuICAgIH1cbiAgICByZWZlckV4dHJhSGVhZGVycyhyZWZlclRvKSB7XG4gICAgICAgIGNvbnN0IGV4dHJhSGVhZGVycyA9IFtdO1xuICAgICAgICBleHRyYUhlYWRlcnMucHVzaChcIlJlZmVycmVkLUJ5OiA8XCIgKyB0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnVyaSArIFwiPlwiKTtcbiAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goXCJDb250YWN0OiBcIiArIHRoaXMuX2NvbnRhY3QpO1xuICAgICAgICBleHRyYUhlYWRlcnMucHVzaChcIkFsbG93OiBcIiArIFtcIkFDS1wiLCBcIkNBTkNFTFwiLCBcIklOVklURVwiLCBcIk1FU1NBR0VcIiwgXCJCWUVcIiwgXCJPUFRJT05TXCIsIFwiSU5GT1wiLCBcIk5PVElGWVwiLCBcIlJFRkVSXCJdLnRvU3RyaW5nKCkpO1xuICAgICAgICBleHRyYUhlYWRlcnMucHVzaChcIlJlZmVyLVRvOiBcIiArIHJlZmVyVG8pO1xuICAgICAgICByZXR1cm4gZXh0cmFIZWFkZXJzO1xuICAgIH1cbiAgICByZWZlclRvU3RyaW5nKHRhcmdldCkge1xuICAgICAgICBsZXQgcmVmZXJUbztcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFVSSSkge1xuICAgICAgICAgICAgLy8gUkVGRVIgd2l0aG91dCBSZXBsYWNlcyAoQmxpbmQgVHJhbnNmZXIpXG4gICAgICAgICAgICByZWZlclRvID0gdGFyZ2V0LnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBSRUZFUiB3aXRoIFJlcGxhY2VzIChBdHRlbmRlZCBUcmFuc2ZlcilcbiAgICAgICAgICAgIGlmICghdGFyZ2V0LmRpYWxvZykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRpYWxvZyB1bmRlZmluZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSB0YXJnZXQucmVtb3RlSWRlbnRpdHkuZnJpZW5kbHlOYW1lO1xuICAgICAgICAgICAgY29uc3QgcmVtb3RlVGFyZ2V0ID0gdGFyZ2V0LmRpYWxvZy5yZW1vdGVUYXJnZXQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxJZCA9IHRhcmdldC5kaWFsb2cuY2FsbElkO1xuICAgICAgICAgICAgY29uc3QgcmVtb3RlVGFnID0gdGFyZ2V0LmRpYWxvZy5yZW1vdGVUYWc7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFRhZyA9IHRhcmdldC5kaWFsb2cubG9jYWxUYWc7XG4gICAgICAgICAgICBjb25zdCByZXBsYWNlcyA9IGVuY29kZVVSSUNvbXBvbmVudChgJHtjYWxsSWR9O3RvLXRhZz0ke3JlbW90ZVRhZ307ZnJvbS10YWc9JHtsb2NhbFRhZ31gKTtcbiAgICAgICAgICAgIHJlZmVyVG8gPSBgXCIke2Rpc3BsYXlOYW1lfVwiIDwke3JlbW90ZVRhcmdldH0/UmVwbGFjZXM9JHtyZXBsYWNlc30+YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVmZXJUbztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBmcm9tQm9keUxlZ2FjeSwgZ2V0Qm9keSwgR3JhbW1hciwgU2lnbmFsaW5nU3RhdGUsIFRpbWVycywgVHJhbnNhY3Rpb25TdGF0ZUVycm9yIH0gZnJvbSBcIi4uL2NvcmVcIjtcbmltcG9ydCB7IGdldFJlYXNvblBocmFzZSB9IGZyb20gXCIuLi9jb3JlL21lc3NhZ2VzL3V0aWxzXCI7XG5pbXBvcnQgeyBDb250ZW50VHlwZVVuc3VwcG9ydGVkRXJyb3IsIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJFcnJvciwgU2Vzc2lvblRlcm1pbmF0ZWRFcnJvciB9IGZyb20gXCIuL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCB7IFNlc3Npb24gfSBmcm9tIFwiLi9zZXNzaW9uXCI7XG5pbXBvcnQgeyBTZXNzaW9uU3RhdGUgfSBmcm9tIFwiLi9zZXNzaW9uLXN0YXRlXCI7XG5pbXBvcnQgeyBTSVBFeHRlbnNpb24gfSBmcm9tIFwiLi91c2VyLWFnZW50LW9wdGlvbnNcIjtcbi8qKlxuICogQW4gaW52aXRhdGlvbiBpcyBhbiBvZmZlciB0byBlc3RhYmxpc2ggYSB7QGxpbmsgU2Vzc2lvbn0gKGluY29taW5nIElOVklURSkuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZpdGF0aW9uIGV4dGVuZHMgU2Vzc2lvbiB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHVzZXJBZ2VudCwgaW5jb21pbmdJbnZpdGVSZXF1ZXN0KSB7XG4gICAgICAgIHN1cGVyKHVzZXJBZ2VudCk7XG4gICAgICAgIHRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0ID0gaW5jb21pbmdJbnZpdGVSZXF1ZXN0O1xuICAgICAgICAvKiogVHJ1ZSBpZiBkaXNwb3NlKCkgaGFzIGJlZW4gY2FsbGVkLiAqL1xuICAgICAgICB0aGlzLmRpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIC8qKiBJTlZJVEUgd2lsbCBiZSByZWplY3RlZCBpZiBub3QgYWNjZXB0ZWQgd2l0aGluIGEgY2VydGFpbiBwZXJpb2QgdGltZS4gKi9cbiAgICAgICAgdGhpcy5leHBpcmVzVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKiBUcnVlIGlmIHRoaXMgU2Vzc2lvbiBoYXMgYmVlbiBUZXJtaW5hdGVkIGR1ZSB0byBhIENBTkNFTCByZXF1ZXN0LiAqL1xuICAgICAgICB0aGlzLmlzQ2FuY2VsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqIEFyZSByZWxpYWJsZSBwcm92aXNpb25hbCByZXNwb25zZXMgcmVxdWlyZWQgb3Igc3VwcG9ydGVkLiAqL1xuICAgICAgICB0aGlzLnJlbDEwMCA9IFwibm9uZVwiO1xuICAgICAgICAvKiogVGhlIGN1cnJlbnQgUlNlcSBoZWFkZXIgdmFsdWUuICovXG4gICAgICAgIHRoaXMucnNlcSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKTtcbiAgICAgICAgLyoqIElOVklURSB3aWxsIGJlIHJlamVjdGVkIGlmIGZpbmFsIHJlc3BvbnNlIG5vdCBzZW50IGluIGEgY2VydGFpbiBwZXJpb2QgdGltZS4gKi9cbiAgICAgICAgdGhpcy51c2VyTm9BbnN3ZXJUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqIFRydWUgaWYgd2FpdGluZyBmb3IgYSBQUkFDSyBiZWZvcmUgc2VuZGluZyBhIDIwMCBPay4gKi9cbiAgICAgICAgdGhpcy53YWl0aW5nRm9yUHJhY2sgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSB1c2VyQWdlbnQuZ2V0TG9nZ2VyKFwic2lwLkludml0YXRpb25cIik7XG4gICAgICAgIGNvbnN0IGluY29taW5nUmVxdWVzdE1lc3NhZ2UgPSB0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5tZXNzYWdlO1xuICAgICAgICAvLyBTZXQgMTAwcmVsIGlmIG5lY2Vzc2FyeVxuICAgICAgICBjb25zdCByZXF1aXJlSGVhZGVyID0gaW5jb21pbmdSZXF1ZXN0TWVzc2FnZS5nZXRIZWFkZXIoXCJyZXF1aXJlXCIpO1xuICAgICAgICBpZiAocmVxdWlyZUhlYWRlciAmJiByZXF1aXJlSGVhZGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCIxMDByZWxcIikpIHtcbiAgICAgICAgICAgIHRoaXMucmVsMTAwID0gXCJyZXF1aXJlZFwiO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN1cHBvcnRlZEhlYWRlciA9IGluY29taW5nUmVxdWVzdE1lc3NhZ2UuZ2V0SGVhZGVyKFwic3VwcG9ydGVkXCIpO1xuICAgICAgICBpZiAoc3VwcG9ydGVkSGVhZGVyICYmIHN1cHBvcnRlZEhlYWRlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiMTAwcmVsXCIpKSB7XG4gICAgICAgICAgICB0aGlzLnJlbDEwMCA9IFwic3VwcG9ydGVkXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRklYTUU6IEhBQ0s6IFRoaXMgaXMgYSBoYWNrIHRvIHBvcnQgYW4gZXhpc3RpbmcgYmVoYXZpb3IuXG4gICAgICAgIC8vIFNldCB0aGUgdG9UYWcgb24gdGhlIGluY29taW5nIHJlcXVlc3QgbWVzc2FnZSB0byB0aGUgdG9UYWcgd2hpY2hcbiAgICAgICAgLy8gd2lsbCBiZSB1c2VkIGluIHRoZSByZXNwb25zZSB0byB0aGUgaW5jb21pbmcgcmVxdWVzdCEhIVxuICAgICAgICAvLyBUaGUgYmVoYXZpb3IgYmVpbmcgcG9ydGVkIGFwcGVhcnMgdG8gYmUgYSBoYWNrIGl0c2VsZixcbiAgICAgICAgLy8gc28gdGhpcyBpcyBhIGhhY2sgdG8gcG9ydCBhIGhhY2suIEF0IGxlYXN0IG9uZSB0ZXN0IHNwZWNcbiAgICAgICAgLy8gcmVsaWVzIG9uIGl0ICh3aGljaCBpcyB5ZXQgYW5vdGhlciBoYWNrKS5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgaW5jb21pbmdSZXF1ZXN0TWVzc2FnZS50b1RhZyA9IGluY29taW5nSW52aXRlUmVxdWVzdC50b1RhZztcbiAgICAgICAgaWYgKHR5cGVvZiBpbmNvbWluZ1JlcXVlc3RNZXNzYWdlLnRvVGFnICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwidG9UYWcgc2hvdWxkIGhhdmUgYmVlbiBhIHN0cmluZy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBtYXBwaW5nIHZhbHVlcyBhcmUgUkVDT01NRU5ERUQ6XG4gICAgICAgIC8vIC4uLlxuICAgICAgICAvLyAxOSBubyBhbnN3ZXIgZnJvbSB0aGUgdXNlciAgICAgICAgICAgICAgNDgwIFRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMzk4I3NlY3Rpb24tNy4yLjQuMVxuICAgICAgICB0aGlzLnVzZXJOb0Fuc3dlclRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpbmNvbWluZ0ludml0ZVJlcXVlc3QucmVqZWN0KHsgc3RhdHVzQ29kZTogNDgwIH0pO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICB9LCB0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLm5vQW5zd2VyVGltZW91dCA/IHRoaXMudXNlckFnZW50LmNvbmZpZ3VyYXRpb24ubm9BbnN3ZXJUaW1lb3V0ICogMTAwMCA6IDYwMDAwKTtcbiAgICAgICAgLy8gMS4gSWYgdGhlIHJlcXVlc3QgaXMgYW4gSU5WSVRFIHRoYXQgY29udGFpbnMgYW4gRXhwaXJlcyBoZWFkZXJcbiAgICAgICAgLy8gZmllbGQsIHRoZSBVQVMgY29yZSBzZXRzIGEgdGltZXIgZm9yIHRoZSBudW1iZXIgb2Ygc2Vjb25kc1xuICAgICAgICAvLyBpbmRpY2F0ZWQgaW4gdGhlIGhlYWRlciBmaWVsZCB2YWx1ZS4gIFdoZW4gdGhlIHRpbWVyIGZpcmVzLCB0aGVcbiAgICAgICAgLy8gaW52aXRhdGlvbiBpcyBjb25zaWRlcmVkIHRvIGJlIGV4cGlyZWQuICBJZiB0aGUgaW52aXRhdGlvblxuICAgICAgICAvLyBleHBpcmVzIGJlZm9yZSB0aGUgVUFTIGhhcyBnZW5lcmF0ZWQgYSBmaW5hbCByZXNwb25zZSwgYSA0ODdcbiAgICAgICAgLy8gKFJlcXVlc3QgVGVybWluYXRlZCkgcmVzcG9uc2UgU0hPVUxEIGJlIGdlbmVyYXRlZC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4zLjFcbiAgICAgICAgaWYgKGluY29taW5nUmVxdWVzdE1lc3NhZ2UuaGFzSGVhZGVyKFwiZXhwaXJlc1wiKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwaXJlcyA9IE51bWJlcihpbmNvbWluZ1JlcXVlc3RNZXNzYWdlLmdldEhlYWRlcihcImV4cGlyZXNcIikgfHwgMCkgKiAxMDAwO1xuICAgICAgICAgICAgdGhpcy5leHBpcmVzVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU2Vzc2lvblN0YXRlLkluaXRpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5jb21pbmdJbnZpdGVSZXF1ZXN0LnJlamVjdCh7IHN0YXR1c0NvZGU6IDQ4NyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGV4cGlyZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNlc3Npb24gcGFyZW50IHByb3BlcnRpZXNcbiAgICAgICAgY29uc3QgYXNzZXJ0ZWRJZGVudGl0eSA9IHRoaXMucmVxdWVzdC5nZXRIZWFkZXIoXCJQLUFzc2VydGVkLUlkZW50aXR5XCIpO1xuICAgICAgICBpZiAoYXNzZXJ0ZWRJZGVudGl0eSkge1xuICAgICAgICAgICAgdGhpcy5fYXNzZXJ0ZWRJZGVudGl0eSA9IEdyYW1tYXIubmFtZUFkZHJIZWFkZXJQYXJzZShhc3NlcnRlZElkZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jb250YWN0ID0gdGhpcy51c2VyQWdlbnQuY29udGFjdC50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBjb250ZW50RGlzcG9zaXRpb24gPSBpbmNvbWluZ1JlcXVlc3RNZXNzYWdlLnBhcnNlSGVhZGVyKFwiQ29udGVudC1EaXNwb3NpdGlvblwiKTtcbiAgICAgICAgaWYgKGNvbnRlbnREaXNwb3NpdGlvbiAmJiBjb250ZW50RGlzcG9zaXRpb24udHlwZSA9PT0gXCJyZW5kZXJcIikge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyYm9keSA9IGluY29taW5nUmVxdWVzdE1lc3NhZ2UuYm9keTtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcnR5cGUgPSBpbmNvbWluZ1JlcXVlc3RNZXNzYWdlLmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZGVudGlmaWVyXG4gICAgICAgIHRoaXMuX2lkID0gaW5jb21pbmdSZXF1ZXN0TWVzc2FnZS5jYWxsSWQgKyBpbmNvbWluZ1JlcXVlc3RNZXNzYWdlLmZyb21UYWc7XG4gICAgICAgIC8vIEFkZCB0byB0aGUgdXNlciBhZ2VudCdzIHNlc3Npb24gY29sbGVjdGlvbi5cbiAgICAgICAgdGhpcy51c2VyQWdlbnQuX3Nlc3Npb25zW3RoaXMuX2lkXSA9IHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3RydWN0b3IuXG4gICAgICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgLy8gT25seSBydW4gdGhyb3VnaCB0aGlzIG9uY2UuIEl0IGNhbiBhbmQgZG9lcyBnZXQgY2FsbGVkIG11bHRpcGxlIHRpbWVzXG4gICAgICAgIC8vIGRlcGVuZGluZyBvbiB0aGUgd2hhdCB0aGUgc2Vzc2lvbnMgc3RhdGUgaXMgd2hlbiBmaXJzdCBjYWxsZWQuXG4gICAgICAgIC8vIEZvciBleGFtcGxlLCBpZiBjYWxsZWQgd2hlbiBcImVzdGFibGlzaGluZ1wiIGl0IHdpbGwgYmUgY2FsbGVkIGFnYWluXG4gICAgICAgIC8vIGF0IGxlYXN0IG9uY2Ugd2hlbiB0aGUgc2Vzc2lvbiB0cmFuc2l0aW9ucyB0byBcInRlcm1pbmF0ZWRcIi5cbiAgICAgICAgLy8gUmVnYXJkbGVzcywgcnVubmluZyB0aHJvdWdoIHRoaXMgbW9yZSB0aGFuIG9uY2UgaXMgcG9pbnRsZXNzLlxuICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAvLyBDbGVhciB0aW1lcnNcbiAgICAgICAgaWYgKHRoaXMuZXhwaXJlc1RpbWVyKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5leHBpcmVzVGltZXIpO1xuICAgICAgICAgICAgdGhpcy5leHBpcmVzVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudXNlck5vQW5zd2VyVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVzZXJOb0Fuc3dlclRpbWVyKTtcbiAgICAgICAgICAgIHRoaXMudXNlck5vQW5zd2VyVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgYWNjZXB0KCkgaXMgc3RpbGwgd2FpdGluZyBmb3IgYSBQUkFDSywgbWFrZSBzdXJlIGl0IHJlamVjdHNcbiAgICAgICAgdGhpcy5wcmFja05ldmVyQXJyaXZlZCgpO1xuICAgICAgICAvLyBJZiB0aGUgZmluYWwgcmVzcG9uc2UgZm9yIHRoZSBpbml0aWFsIElOVklURSBub3QgeWV0IGJlZW4gc2VudCwgcmVqZWN0IGl0XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuSW5pdGlhbDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWplY3QoKS50aGVuKCgpID0+IHN1cGVyLmRpc3Bvc2UoKSk7XG4gICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hpbmc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVqZWN0KCkudGhlbigoKSA9PiBzdXBlci5kaXNwb3NlKCkpO1xuICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLlRlcm1pbmF0aW5nOlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kaXNwb3NlKCk7XG4gICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkOlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kaXNwb3NlKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gc3RhdGUuXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRydWUsIGEgZmlyc3QgcHJvdmlzaW9uYWwgcmVzcG9uc2UgYWZ0ZXIgdGhlIDEwMCBUcnlpbmdcbiAgICAgKiB3aWxsIGJlIHNlbnQgYXV0b21hdGljYWxseS4gVGhpcyBpcyBmYWxzZSBpdCB0aGUgVUFDIHJlcXVpcmVkXG4gICAgICogcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2VzICgxMDByZWwgaW4gUmVxdWlyZSBoZWFkZXIpIG9yXG4gICAgICogdGhlIHVzZXIgYWdlbnQgY29uZmlndXJhdGlvbiBoYXMgc3BlY2lmaWVkIHRvIG5vdCBzZW5kIGFuXG4gICAgICogaW5pdGlhbCByZXNwb25zZSwgb3RoZXJ3aXNlIGl0IGlzIHRydWUuIFRoZSBwcm92aXNpb25hbCBpcyBzZW50IGJ5XG4gICAgICogY2FsbGluZyBgcHJvZ3Jlc3MoKWAgd2l0aG91dCBhbnkgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBnZXQgYXV0b1NlbmRBbkluaXRpYWxQcm92aXNpb25hbFJlc3BvbnNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWwxMDAgIT09IFwicmVxdWlyZWRcIiAmJiB0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnNlbmRJbml0aWFsUHJvdmlzaW9uYWxSZXNwb25zZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbCBpbmNvbWluZyBJTlZJVEUgcmVxdWVzdCBtZXNzYWdlIGJvZHkuXG4gICAgICovXG4gICAgZ2V0IGJvZHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5tZXNzYWdlLmJvZHk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpZGVudGl0eSBvZiB0aGUgbG9jYWwgdXNlci5cbiAgICAgKi9cbiAgICBnZXQgbG9jYWxJZGVudGl0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdC50bztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGlkZW50aXR5IG9mIHRoZSByZW1vdGUgdXNlci5cbiAgICAgKi9cbiAgICBnZXQgcmVtb3RlSWRlbnRpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QuZnJvbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbCBpbmNvbWluZyBJTlZJVEUgcmVxdWVzdCBtZXNzYWdlLlxuICAgICAqL1xuICAgIGdldCByZXF1ZXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QubWVzc2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWNjZXB0IHRoZSBpbnZpdGF0aW9uLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBBY2NlcHQgdGhlIGluY29taW5nIElOVklURSByZXF1ZXN0IHRvIHN0YXJ0IGEgU2Vzc2lvbi5cbiAgICAgKiBSZXBsaWVzIHRvIHRoZSBJTlZJVEUgcmVxdWVzdCB3aXRoIGEgMjAwIE9rIHJlc3BvbnNlLlxuICAgICAqIFJlc29sdmVzIG9uY2UgdGhlIHJlc3BvbnNlIHNlbnQsIG90aGVyd2lzZSByZWplY3RzLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgbWF5IHJlamVjdCBmb3IgYSB2YXJpZXR5IG9mIHJlYXNvbnMgaW5jbHVkaW5nXG4gICAgICogdGhlIHJlY2VpcHQgb2YgYSBDQU5DRUwgcmVxdWVzdCBiZWZvcmUgYGFjY2VwdGAgaXMgYWJsZVxuICAgICAqIHRvIGNvbnN0cnVjdCBhIHJlc3BvbnNlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgYWNjZXB0KG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJJbnZpdGF0aW9uLmFjY2VwdFwiKTtcbiAgICAgICAgLy8gdmFsaWRhdGUgc3RhdGVcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Jbml0aWFsKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgSW52YWxpZCBzZXNzaW9uIHN0YXRlICR7dGhpcy5zdGF0ZX1gKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBNb2RpZmllcnMgYW5kIG9wdGlvbnMgZm9yIGluaXRpYWwgSU5WSVRFIHRyYW5zYWN0aW9uXG4gICAgICAgIGlmIChvcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyA9IG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycztcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyA9IG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdHJhbnNpdGlvbiBzdGF0ZVxuICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuRXN0YWJsaXNoaW5nKTtcbiAgICAgICAgcmV0dXJuICh0aGlzLnNlbmRBY2NlcHQob3B0aW9ucylcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgICAgIC50aGVuKCh7IG1lc3NhZ2UsIHNlc3Npb24gfSkgPT4ge1xuICAgICAgICAgICAgc2Vzc2lvbi5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgICAgICAgICBvbkFjazogKGFja1JlcXVlc3QpID0+IHRoaXMub25BY2tSZXF1ZXN0KGFja1JlcXVlc3QpLFxuICAgICAgICAgICAgICAgIG9uQWNrVGltZW91dDogKCkgPT4gdGhpcy5vbkFja1RpbWVvdXQoKSxcbiAgICAgICAgICAgICAgICBvbkJ5ZTogKGJ5ZVJlcXVlc3QpID0+IHRoaXMub25CeWVSZXF1ZXN0KGJ5ZVJlcXVlc3QpLFxuICAgICAgICAgICAgICAgIG9uSW5mbzogKGluZm9SZXF1ZXN0KSA9PiB0aGlzLm9uSW5mb1JlcXVlc3QoaW5mb1JlcXVlc3QpLFxuICAgICAgICAgICAgICAgIG9uSW52aXRlOiAoaW52aXRlUmVxdWVzdCkgPT4gdGhpcy5vbkludml0ZVJlcXVlc3QoaW52aXRlUmVxdWVzdCksXG4gICAgICAgICAgICAgICAgb25NZXNzYWdlOiAobWVzc2FnZVJlcXVlc3QpID0+IHRoaXMub25NZXNzYWdlUmVxdWVzdChtZXNzYWdlUmVxdWVzdCksXG4gICAgICAgICAgICAgICAgb25Ob3RpZnk6IChub3RpZnlSZXF1ZXN0KSA9PiB0aGlzLm9uTm90aWZ5UmVxdWVzdChub3RpZnlSZXF1ZXN0KSxcbiAgICAgICAgICAgICAgICBvblByYWNrOiAocHJhY2tSZXF1ZXN0KSA9PiB0aGlzLm9uUHJhY2tSZXF1ZXN0KHByYWNrUmVxdWVzdCksXG4gICAgICAgICAgICAgICAgb25SZWZlcjogKHJlZmVyUmVxdWVzdCkgPT4gdGhpcy5vblJlZmVyUmVxdWVzdChyZWZlclJlcXVlc3QpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5fZGlhbG9nID0gc2Vzc2lvbjtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hlZCk7XG4gICAgICAgICAgICAvLyBUT0RPOiBSZWNvbnNpZGVyIHRoaXMgXCJhdXRvbWFnaWNcIiBzZW5kIG9mIGEgQllFIHRvIHJlcGxhY2VlIGJlaGF2aW9yLlxuICAgICAgICAgICAgLy8gVGhpcyBiZWhhdmlvciBoYXMgYmVlbiBwb3J0ZWQgZm9yd2FyZCBmcm9tIGxlZ2FjeSB2ZXJzaW9ucy5cbiAgICAgICAgICAgIGlmICh0aGlzLl9yZXBsYWNlZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlcGxhY2VlLl9ieWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHRoaXMuaGFuZGxlUmVzcG9uc2VFcnJvcihlcnJvcikpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGUgcHJvZ3Jlc3MgcHJvY2Vzc2luZyB0aGUgaW52aXRhdGlvbi5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogUmVwb3J0IHByb2dyZXNzIHRvIHRoZSB0aGUgY2FsbGVyLlxuICAgICAqIFJlcGxpZXMgdG8gdGhlIElOVklURSByZXF1ZXN0IHdpdGggYSAxeHggcHJvdmlzaW9uYWwgcmVzcG9uc2UuXG4gICAgICogUmVzb2x2ZXMgb25jZSB0aGUgcmVzcG9uc2Ugc2VudCwgb3RoZXJ3aXNlIHJlamVjdHMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGJ1Y2tldC5cbiAgICAgKi9cbiAgICBwcm9ncmVzcyhvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiSW52aXRhdGlvbi5wcm9ncmVzc1wiKTtcbiAgICAgICAgLy8gdmFsaWRhdGUgc3RhdGVcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Jbml0aWFsKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgSW52YWxpZCBzZXNzaW9uIHN0YXRlICR7dGhpcy5zdGF0ZX1gKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQb3J0ZWRcbiAgICAgICAgY29uc3Qgc3RhdHVzQ29kZSA9IG9wdGlvbnMuc3RhdHVzQ29kZSB8fCAxODA7XG4gICAgICAgIGlmIChzdGF0dXNDb2RlIDwgMTAwIHx8IHN0YXR1c0NvZGUgPiAxOTkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c0NvZGU6IFwiICsgc3RhdHVzQ29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTW9kaWZpZXJzIGFuZCBvcHRpb25zIGZvciBpbml0aWFsIElOVklURSB0cmFuc2FjdGlvblxuICAgICAgICBpZiAob3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMgPSBvcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMgPSBvcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFmdGVyIHRoZSBmaXJzdCByZWxpYWJsZSBwcm92aXNpb25hbCByZXNwb25zZSBmb3IgYSByZXF1ZXN0IGhhcyBiZWVuXG4gICAgICAgIC8vIGFja25vd2xlZGdlZCwgdGhlIFVBUyBNQVkgc2VuZCBhZGRpdGlvbmFsIHJlbGlhYmxlIHByb3Zpc2lvbmFsXG4gICAgICAgIC8vIHJlc3BvbnNlcy4gIFRoZSBVQVMgTVVTVCBOT1Qgc2VuZCBhIHNlY29uZCByZWxpYWJsZSBwcm92aXNpb25hbFxuICAgICAgICAvLyByZXNwb25zZSB1bnRpbCB0aGUgZmlyc3QgaXMgYWNrbm93bGVkZ2VkLiAgQWZ0ZXIgdGhlIGZpcnN0LCBpdCBpc1xuICAgICAgICAvLyBSRUNPTU1FTkRFRCB0aGF0IHRoZSBVQVMgbm90IHNlbmQgYW4gYWRkaXRpb25hbCByZWxpYWJsZSBwcm92aXNpb25hbFxuICAgICAgICAvLyByZXNwb25zZSB1bnRpbCB0aGUgcHJldmlvdXMgaXMgYWNrbm93bGVkZ2VkLiAgVGhlIGZpcnN0IHJlbGlhYmxlXG4gICAgICAgIC8vIHByb3Zpc2lvbmFsIHJlc3BvbnNlIHJlY2VpdmVzIHNwZWNpYWwgdHJlYXRtZW50IGJlY2F1c2UgaXQgY29udmV5c1xuICAgICAgICAvLyB0aGUgaW5pdGlhbCBzZXF1ZW5jZSBudW1iZXIuICBJZiBhZGRpdGlvbmFsIHJlbGlhYmxlIHByb3Zpc2lvbmFsXG4gICAgICAgIC8vIHJlc3BvbnNlcyB3ZXJlIHNlbnQgYmVmb3JlIHRoZSBmaXJzdCB3YXMgYWNrbm93bGVkZ2VkLCB0aGUgVUFTIGNvdWxkXG4gICAgICAgIC8vIG5vdCBiZSBjZXJ0YWluIHRoZXNlIHdlcmUgcmVjZWl2ZWQgaW4gb3JkZXIuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYyI3NlY3Rpb24tM1xuICAgICAgICBpZiAodGhpcy53YWl0aW5nRm9yUHJhY2spIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJVbmV4cGVjdGVkIGNhbGwgZm9yIHByb2dyZXNzIHdoaWxlIHdhaXRpbmcgZm9yIHByYWNrLCBpZ25vcmluZ1wiKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUcnlpbmcgcHJvdmlzaW9uYWwgcmVzcG9uc2VcbiAgICAgICAgaWYgKG9wdGlvbnMuc3RhdHVzQ29kZSA9PT0gMTAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kUHJvZ3Jlc3NUcnlpbmcoKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHRoaXMuaGFuZGxlUmVzcG9uc2VFcnJvcihlcnJvcikpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFN0YW5kYXJkIHByb3Zpc2lvbmFsIHJlc3BvbnNlXG4gICAgICAgIGlmICghKHRoaXMucmVsMTAwID09PSBcInJlcXVpcmVkXCIpICYmXG4gICAgICAgICAgICAhKHRoaXMucmVsMTAwID09PSBcInN1cHBvcnRlZFwiICYmIG9wdGlvbnMucmVsMTAwKSAmJlxuICAgICAgICAgICAgISh0aGlzLnJlbDEwMCA9PT0gXCJzdXBwb3J0ZWRcIiAmJiB0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnNpcEV4dGVuc2lvbjEwMHJlbCA9PT0gU0lQRXh0ZW5zaW9uLlJlcXVpcmVkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFByb2dyZXNzKG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gdGhpcy5oYW5kbGVSZXNwb25zZUVycm9yKGVycm9yKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2VcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFByb2dyZXNzUmVsaWFibGVXYWl0Rm9yUHJhY2sob3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHRoaXMuaGFuZGxlUmVzcG9uc2VFcnJvcihlcnJvcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3QgdGhlIGludml0YXRpb24uXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFJlcGxpZXMgdG8gdGhlIElOVklURSByZXF1ZXN0IHdpdGggYSA0eHgsIDV4eCwgb3IgNnh4IGZpbmFsIHJlc3BvbnNlLlxuICAgICAqIFJlc29sdmVzIG9uY2UgdGhlIHJlc3BvbnNlIHNlbnQsIG90aGVyd2lzZSByZWplY3RzLlxuICAgICAqXG4gICAgICogVGhlIGV4cGVjdGF0aW9uIGlzIHRoYXQgdGhpcyBtZXRob2QgaXMgdXNlZCB0byByZWplY3QgYW4gSU5WSVRFIHJlcXVlc3QuXG4gICAgICogVGhhdCBpcyBpbmRlZWQgdGhlIGNhc2UgLSBhIGNhbGwgdG8gYHByb2dyZXNzYCBmb2xsb3dlZCBieSBgcmVqZWN0YCBpc1xuICAgICAqIGEgdHlwaWNhbCB3YXkgdG8gXCJkZWNsaW5lXCIgYW4gaW5jb21pbmcgSU5WSVRFIHJlcXVlc3QuIEhvd2V2ZXIgaXQgbWF5XG4gICAgICogYWxzbyBiZSBjYWxsZWQgYWZ0ZXIgY2FsbGluZyBgYWNjZXB0YCAoYnV0IG9ubHkgYmVmb3JlIGl0IGNvbXBsZXRlcylcbiAgICAgKiB3aGljaCB3aWxsIHJlamVjdCB0aGUgY2FsbCBhbmQgY2F1c2UgYGFjY2VwdGAgdG8gcmVqZWN0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgcmVqZWN0KG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJJbnZpdGF0aW9uLnJlamVjdFwiKTtcbiAgICAgICAgLy8gdmFsaWRhdGUgc3RhdGVcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Jbml0aWFsICYmIHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBJbnZhbGlkIHNlc3Npb24gc3RhdGUgJHt0aGlzLnN0YXRlfWApO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGUgfHwgNDgwO1xuICAgICAgICBjb25zdCByZWFzb25QaHJhc2UgPSBvcHRpb25zLnJlYXNvblBocmFzZSA/IG9wdGlvbnMucmVhc29uUGhyYXNlIDogZ2V0UmVhc29uUGhyYXNlKHN0YXR1c0NvZGUpO1xuICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSBvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXTtcbiAgICAgICAgaWYgKHN0YXR1c0NvZGUgPCAzMDAgfHwgc3RhdHVzQ29kZSA+IDY5OSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzQ29kZTogXCIgKyBzdGF0dXNDb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBib2R5ID0gb3B0aW9ucy5ib2R5ID8gZnJvbUJvZHlMZWdhY3kob3B0aW9ucy5ib2R5KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gRklYTUU6IE5lZWQgdG8gcmVkaXJlY3QgdG8gc29tZXBsYWNlXG4gICAgICAgIHN0YXR1c0NvZGUgPCA0MDBcbiAgICAgICAgICAgID8gdGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucmVkaXJlY3QoW10sIHsgc3RhdHVzQ29kZSwgcmVhc29uUGhyYXNlLCBleHRyYUhlYWRlcnMsIGJvZHkgfSlcbiAgICAgICAgICAgIDogdGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucmVqZWN0KHsgc3RhdHVzQ29kZSwgcmVhc29uUGhyYXNlLCBleHRyYUhlYWRlcnMsIGJvZHkgfSk7XG4gICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgQ0FOQ0VMIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIENBTkNFTCBtZXNzYWdlLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICBfb25DYW5jZWwobWVzc2FnZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJJbnZpdGF0aW9uLl9vbkNhbmNlbFwiKTtcbiAgICAgICAgLy8gdmFsaWRhdGUgc3RhdGVcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Jbml0aWFsICYmIHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hpbmcpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBDQU5DRUwgcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVxdWVzdGApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZsYWcgY2FuY2VsZWRcbiAgICAgICAgdGhpcy5pc0NhbmNlbGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gcmVqZWN0IElOVklURSB3aXRoIDQ4NyBzdGF0dXMgY29kZVxuICAgICAgICB0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5yZWplY3QoeyBzdGF0dXNDb2RlOiA0ODcgfSk7XG4gICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGhhbmRsZSBvZmZlci9hbnN3ZXIgaW4gYSBQUkFDSy5cbiAgICAgKi9cbiAgICBoYW5kbGVQcmFja09mZmVyQW5zd2VyKHJlcXVlc3QpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpYWxvZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGlhbG9nIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIFBSQUNLIGRvZXNuJ3QgaGF2ZSBhbiBvZmZlci9hbnN3ZXIsIG5vdGhpbmcgdG8gYmUgZG9uZS5cbiAgICAgICAgY29uc3QgYm9keSA9IGdldEJvZHkocmVxdWVzdC5tZXNzYWdlKTtcbiAgICAgICAgaWYgKCFib2R5IHx8IGJvZHkuY29udGVudERpc3Bvc2l0aW9uICE9PSBcInNlc3Npb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczogdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6IHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1xuICAgICAgICB9O1xuICAgICAgICAvLyBJZiB0aGUgVUFDIHJlY2VpdmVzIGEgcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2Ugd2l0aCBhbiBvZmZlclxuICAgICAgICAvLyAodGhpcyB3b3VsZCBvY2N1ciBpZiB0aGUgVUFDIHNlbnQgYW4gSU5WSVRFIHdpdGhvdXQgYW4gb2ZmZXIsIGluXG4gICAgICAgIC8vIHdoaWNoIGNhc2UgdGhlIGZpcnN0IHJlbGlhYmxlIHByb3Zpc2lvbmFsIHJlc3BvbnNlIHdpbGwgY29udGFpbiB0aGVcbiAgICAgICAgLy8gb2ZmZXIpLCBpdCBNVVNUIGdlbmVyYXRlIGFuIGFuc3dlciBpbiB0aGUgUFJBQ0suICBJZiB0aGUgVUFDIHJlY2VpdmVzXG4gICAgICAgIC8vIGEgcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2Ugd2l0aCBhbiBhbnN3ZXIsIGl0IE1BWSBnZW5lcmF0ZSBhblxuICAgICAgICAvLyBhZGRpdGlvbmFsIG9mZmVyIGluIHRoZSBQUkFDSy4gIElmIHRoZSBVQVMgcmVjZWl2ZXMgYSBQUkFDSyB3aXRoIGFuXG4gICAgICAgIC8vIG9mZmVyLCBpdCBNVVNUIHBsYWNlIHRoZSBhbnN3ZXIgaW4gdGhlIDJ4eCB0byB0aGUgUFJBQ0suXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYyI3NlY3Rpb24tNVxuICAgICAgICBzd2l0Y2ggKHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLkluaXRpYWw6XG4gICAgICAgICAgICAgICAgLy8gU3RhdGUgc2hvdWxkIG5ldmVyIGJlIHJlYWNoZWQgYXMgZmlyc3QgcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2UgbXVzdCBoYXZlIGFuc3dlci9vZmZlci5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc2lnbmFsaW5nIHN0YXRlICR7dGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGV9LmApO1xuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5TdGFibGU6XG4gICAgICAgICAgICAgICAgLy8gUmVjZXZlZCBhbnN3ZXIuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0QW5zd2VyKGJvZHksIG9wdGlvbnMpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuSGF2ZUxvY2FsT2ZmZXI6XG4gICAgICAgICAgICAgICAgLy8gU3RhdGUgc2hvdWxkIG5ldmVyIGJlIHJlYWNoZWQgYXMgbG9jYWwgb2ZmZXIgd291bGQgYmUgYW5zd2VyZWQgYnkgdGhpcyBQUkFDS1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHt0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZX0uYCk7XG4gICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLkhhdmVSZW1vdGVPZmZlcjpcbiAgICAgICAgICAgICAgICAvLyBSZWNlaXZlZCBvZmZlciwgZ2VuZXJhdGUgYW5zd2VyLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldE9mZmVyQW5kR2V0QW5zd2VyKGJvZHksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5DbG9zZWQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSAke3RoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlfS5gKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSAke3RoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlfS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGhhbmRsZXIgZm9yIGVycm9ycyB3aGljaCBvY2N1ciB3aGlsZSBhdHRlbXB0aW5nIHRvIHNlbmQgMXh4IGFuZCAyeHggcmVzcG9uc2VzLlxuICAgICAqIEluIGFsbCBjYXNlcywgYW4gYXR0ZW1wdCBpcyBtYWRlIHRvIHJlamVjdCB0aGUgcmVxdWVzdCBpZiBpdCBpcyBzdGlsbCBvdXRzdGFuZGluZy5cbiAgICAgKiBBbmQgd2hpbGUgdGhlcmUgYXJlIGEgdmFyaWV0eSBvZiB0aGluZ3Mgd2hpY2ggY2FuIGdvIHdyb25nIGFuZCB3ZSBsb2cgc29tZXRoaW5nIGhlcmVcbiAgICAgKiBmb3IgYWxsIGVycm9ycywgdGhlcmUgYXJlIGEgaGFuZGZ1bCBvZiBjb21tb24gZXhjZXB0aW9ucyB3ZSBwYXkgc29tZSBleHRyYSBhdHRlbnRpb24gdG8uXG4gICAgICogQHBhcmFtIGVycm9yIC0gVGhlIGVycm9yIHdoaWNoIG9jY3VycmVkLlxuICAgICAqL1xuICAgIGhhbmRsZVJlc3BvbnNlRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgbGV0IHN0YXR1c0NvZGUgPSA0ODA7IC8vIFwiVGVtcG9yYXJpbHkgVW5hdmFpbGFibGVcIlxuICAgICAgICAvLyBMb2cgRXJyb3IgbWVzc2FnZVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXZSBkb24ndCBhY3R1YWxseSBrbm93IHdoYXQgYSBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgaW1wbGVtZW50YXRpb24gbWlnaHQgdGhyb3cgb3VyIHdheSxcbiAgICAgICAgICAgIC8vIGFuZCBtb3JlIGdlbmVyYWxseSBhcyBhIGxhc3QgcmVzb3J0IGNhdGNoIGFsbCwganVzdCBhc3N1bWUgd2UgYXJlIGdldHRpbmcgYW4gXCJ1bmtub3duXCIgYW5kIGxvZyBpdC5cbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBMb2cgRXhjZXB0aW9uIG1lc3NhZ2VcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQ29udGVudFR5cGVVbnN1cHBvcnRlZEVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIkEgc2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIG9jY3VycmVkIHdoaWxlIHNlbmRpbmcgcmVzcG9uc2UgKGNvbnRlbnQgdHlwZSB1bnN1cHBvcnRlZFwiKTtcbiAgICAgICAgICAgIHN0YXR1c0NvZGUgPSA0MTU7IC8vIFwiVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZVwiXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiQSBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgb2NjdXJyZWQgd2hpbGUgc2VuZGluZyByZXNwb25zZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlcnJvciBpbnN0YW5jZW9mIFNlc3Npb25UZXJtaW5hdGVkRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiU2Vzc2lvbiBlbmRlZCBiZWZvcmUgcmVzcG9uc2UgY291bGQgYmUgZm9ybXVsYXRlZCBhbmQgc2VudCAod2hpbGUgd2FpdGluZyBmb3IgUFJBQ0spXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgVHJhbnNhY3Rpb25TdGF0ZUVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIlNlc3Npb24gY2hhbmdlZCBzdGF0ZSBiZWZvcmUgcmVzcG9uc2UgY291bGQgYmUgZm9ybXVsYXRlZCBhbmQgc2VudFwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZWplY3QgaWYgc3RpbGwgaW4gXCJpbml0aWFsXCIgb3IgXCJlc3RhYmxpc2hpbmdcIiBzdGF0ZS5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNlc3Npb25TdGF0ZS5Jbml0aWFsIHx8IHRoaXMuc3RhdGUgPT09IFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hpbmcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucmVqZWN0KHsgc3RhdHVzQ29kZSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiQW4gZXJyb3Igb2NjdXJyZWQgYXR0ZW1wdGluZyB0byByZWplY3QgdGhlIHJlcXVlc3Qgd2hpbGUgaGFuZGxpbmcgYW5vdGhlciBlcnJvclwiKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlOyAvLyBUaGlzIGlzIG5vdCBhIGdvb2QgcGxhY2UgdG8gYmUuLi5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBGSVhNRTogVE9ETzpcbiAgICAgICAgLy8gSGVyZSB3ZSBhcmUgc3F1ZWxjaGluZyB0aGUgdGhyb3dpbmcgb2YgZXJyb3JzIGR1ZSB0byBhbiByYWNlIGNvbmRpdGlvbi5cbiAgICAgICAgLy8gV2UgaGF2ZSBhbiBpbnRlcm5hbCByYWNlIGJldHdlZW4gY2FsbGluZyBgYWNjZXB0KClgIGFuZCBoYW5kbGluZyBhbiBpbmNvbWluZ1xuICAgICAgICAvLyBDQU5DRUwgcmVxdWVzdC4gQXMgdGhlcmUgaXMgbm8gZ29vZCB3YXkgY3VycmVudGx5IHRvIGRlbGVnYXRlIHRoZSBoYW5kbGluZyBvZlxuICAgICAgICAvLyB0aGVzZSByYWNlIGVycm9ycyB0byB0aGUgY2FsbGVyIG9mIGBhY2NlcHQoKWAsIHdlIGFyZSBzcXVlbGNoaW5nIHRoZSB0aHJvd2luZ1xuICAgICAgICAvLyBvZiBBTEwgZXJyb3JzIHdoZW4vaWYgdGhleSBvY2N1ciBhZnRlciByZWNlaXZpbmcgYSBDQU5DRUwgdG8gY2F0Y2ggdGhlIE9ORSB3ZSBrbm93XG4gICAgICAgIC8vIGlzIGEgXCJub3JtYWxcIiBleGNlcHRpb25hbCBjb25kaXRpb24uIFdoaWxlIHRoaXMgaXMgYSBjb21wbGV0ZWx5IHJlYXNvbmFibGUgYXBwcm9hY2gsXG4gICAgICAgIC8vIHRoZSBkZWNpc2lvbiBzaG91bGQgYmUgbGVmdCB1cCB0byB0aGUgbGlicmFyeSB1c2VyLiBGdXJ0aGVybW9yZSwgYXMgd2UgYXJlIGVhdGluZ1xuICAgICAgICAvLyBBTEwgZXJyb3JzIGluIHRoaXMgY2FzZSwgd2UgYXJlIHBvdGVudGlhbGx5IChsaWtlbHkpIGhpZGluZyBcInJlYWxcIiBlcnJvcnMgd2hpY2ggb2NjdXIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIE9ubHkgcmV0aHJvdyBlcnJvciBpZiB0aGUgc2Vzc2lvbiBoYXMgbm90IGJlZW4gY2FuY2VsZWQuXG4gICAgICAgIGlmICh0aGlzLmlzQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBhdHRlbXB0aW5nIHRvIGZvcm11bGF0ZSBhbmQgc2VuZCBhIHJlc3BvbnNlIHRvIGFuIGluY29taW5nIElOVklURS5cIiArXG4gICAgICAgICAgICAgICAgXCIgSG93ZXZlciBhIENBTkNFTCB3YXMgcmVjZWl2ZWQgYW5kIHByb2Nlc3NlZCB3aGlsZSBkb2luZyBzbyB3aGljaCBjYW4gKGFuZCBvZnRlbiBkb2VzKSByZXN1bHRcIiArXG4gICAgICAgICAgICAgICAgXCIgaW4gZXJyb3JzIG9jY3VycmluZyBhcyB0aGUgc2Vzc2lvbiB0ZXJtaW5hdGVzIGluIHRoZSBtZWFudGltZS4gU2FpZCBlcnJvciBpcyBiZWluZyBpZ25vcmVkLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgZm9yIHdoZW4gQUNLIGZvciBhIDJ4eCByZXNwb25zZSBpcyBuZXZlciByZWNlaXZlZC5cbiAgICAgKiBAcGFyYW0gc2Vzc2lvbiAtIFNlc3Npb24gdGhlIEFDSyBuZXZlciBhcnJpdmVkIGZvci5cbiAgICAgKi9cbiAgICBvbkFja1RpbWVvdXQoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIkludml0YXRpb24ub25BY2tUaW1lb3V0XCIpO1xuICAgICAgICBpZiAoIXRoaXMuZGlhbG9nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaWFsb2cgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJObyBBQ0sgcmVjZWl2ZWQgZm9yIGFuIGV4dGVuZGVkIHBlcmlvZCBvZiB0aW1lLCB0ZXJtaW5hdGluZyBzZXNzaW9uXCIpO1xuICAgICAgICB0aGlzLmRpYWxvZy5ieWUoKTtcbiAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHZlcnNpb24gb2YgYGFjY2VwdGAgd2hpY2ggcmVzb2x2ZXMgYSBzZXNzaW9uIHdoZW4gdGhlIDIwMCBPayByZXNwb25zZSBpcyBzZW50LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgc2VuZEFjY2VwdChvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VPcHRpb25zID0ge1xuICAgICAgICAgICAgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6IHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsXG4gICAgICAgICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOiB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnNcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzID0gb3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW107XG4gICAgICAgIC8vIFRoZSBVQVMgTUFZIHNlbmQgYSBmaW5hbCByZXNwb25zZSB0byB0aGUgaW5pdGlhbCByZXF1ZXN0IGJlZm9yZVxuICAgICAgICAvLyBoYXZpbmcgcmVjZWl2ZWQgUFJBQ0tzIGZvciBhbGwgdW5hY2tub3dsZWRnZWQgcmVsaWFibGUgcHJvdmlzaW9uYWxcbiAgICAgICAgLy8gcmVzcG9uc2VzLCB1bmxlc3MgdGhlIGZpbmFsIHJlc3BvbnNlIGlzIDJ4eCBhbmQgYW55IG9mIHRoZVxuICAgICAgICAvLyB1bmFja25vd2xlZGdlZCByZWxpYWJsZSBwcm92aXNpb25hbCByZXNwb25zZXMgY29udGFpbmVkIGEgc2Vzc2lvblxuICAgICAgICAvLyBkZXNjcmlwdGlvbi4gIEluIHRoYXQgY2FzZSwgaXQgTVVTVCBOT1Qgc2VuZCBhIGZpbmFsIHJlc3BvbnNlIHVudGlsXG4gICAgICAgIC8vIHRob3NlIHByb3Zpc2lvbmFsIHJlc3BvbnNlcyBhcmUgYWNrbm93bGVkZ2VkLiAgSWYgdGhlIFVBUyBkb2VzIHNlbmQgYVxuICAgICAgICAvLyBmaW5hbCByZXNwb25zZSB3aGVuIHJlbGlhYmxlIHJlc3BvbnNlcyBhcmUgc3RpbGwgdW5hY2tub3dsZWRnZWQsIGl0XG4gICAgICAgIC8vIFNIT1VMRCBOT1QgY29udGludWUgdG8gcmV0cmFuc21pdCB0aGUgdW5hY2tub3dsZWRnZWQgcmVsaWFibGVcbiAgICAgICAgLy8gcHJvdmlzaW9uYWwgcmVzcG9uc2VzLCBidXQgaXQgTVVTVCBiZSBwcmVwYXJlZCB0byBwcm9jZXNzIFBSQUNLXG4gICAgICAgIC8vIHJlcXVlc3RzIGZvciB0aG9zZSBvdXRzdGFuZGluZyByZXNwb25zZXMuICBBIFVBUyBNVVNUIE5PVCBzZW5kIG5ld1xuICAgICAgICAvLyByZWxpYWJsZSBwcm92aXNpb25hbCByZXNwb25zZXMgKGFzIG9wcG9zZWQgdG8gcmV0cmFuc21pc3Npb25zIG9mXG4gICAgICAgIC8vIHVuYWNrbm93bGVkZ2VkIG9uZXMpIGFmdGVyIHNlbmRpbmcgYSBmaW5hbCByZXNwb25zZSB0byBhIHJlcXVlc3QuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYyI3NlY3Rpb24tM1xuICAgICAgICBpZiAodGhpcy53YWl0aW5nRm9yUHJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndhaXRGb3JBcnJpdmFsT2ZQcmFjaygpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gY2xlYXJUaW1lb3V0KHRoaXMudXNlck5vQW5zd2VyVGltZXIpKSAvLyBQb3J0ZWRcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmdlbmVyYXRlUmVzcG9uc2VPZmZlckFuc3dlcih0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdCwgcmVzcG9uc2VPcHRpb25zKSlcbiAgICAgICAgICAgICAgICAudGhlbigoYm9keSkgPT4gdGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QuYWNjZXB0KHsgc3RhdHVzQ29kZTogMjAwLCBib2R5LCBleHRyYUhlYWRlcnMgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVzZXJOb0Fuc3dlclRpbWVyKTsgLy8gUG9ydGVkXG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlUmVzcG9uc2VPZmZlckFuc3dlcih0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdCwgcmVzcG9uc2VPcHRpb25zKS50aGVuKChib2R5KSA9PiB0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5hY2NlcHQoeyBzdGF0dXNDb2RlOiAyMDAsIGJvZHksIGV4dHJhSGVhZGVycyB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdmVyc2lvbiBvZiBgcHJvZ3Jlc3NgIHdoaWNoIHJlc29sdmVzIHdoZW4gdGhlIHByb3Zpc2lvbmFsIHJlc3BvbnNlIGlzIHNlbnQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGJ1Y2tldC5cbiAgICAgKi9cbiAgICBzZW5kUHJvZ3Jlc3Mob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGUgfHwgMTgwO1xuICAgICAgICBjb25zdCByZWFzb25QaHJhc2UgPSBvcHRpb25zLnJlYXNvblBocmFzZTtcbiAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpO1xuICAgICAgICBjb25zdCBib2R5ID0gb3B0aW9ucy5ib2R5ID8gZnJvbUJvZHlMZWdhY3kob3B0aW9ucy5ib2R5KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gVGhlIDE4MyAoU2Vzc2lvbiBQcm9ncmVzcykgcmVzcG9uc2UgaXMgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb25cbiAgICAgICAgLy8gYWJvdXQgdGhlIHByb2dyZXNzIG9mIHRoZSBjYWxsIHRoYXQgaXMgbm90IG90aGVyd2lzZSBjbGFzc2lmaWVkLiAgVGhlXG4gICAgICAgIC8vIFJlYXNvbi1QaHJhc2UsIGhlYWRlciBmaWVsZHMsIG9yIG1lc3NhZ2UgYm9keSBNQVkgYmUgdXNlZCB0byBjb252ZXlcbiAgICAgICAgLy8gbW9yZSBkZXRhaWxzIGFib3V0IHRoZSBjYWxsIHByb2dyZXNzLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTIxLjEuNVxuICAgICAgICAvLyBJdCBpcyB0aGUgZGUgZmFjdG8gaW5kdXN0cnkgc3RhbmRhcmQgdG8gdXRpbGl6ZSAxODMgd2l0aCBTRFAgdG8gcHJvdmlkZSBcImVhcmx5IG1lZGlhXCIuXG4gICAgICAgIC8vIFdoaWxlIGl0IGlzIHVubGlrZWx5IHNvbWVvbmUgd291bGQgd2FudCB0byBzZW5kIGEgMTgzIHdpdGhvdXQgU0RQLCBzbyBpdCBzaG91bGQgYmUgYW4gb3B0aW9uLlxuICAgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gMTgzICYmICFib2R5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kUHJvZ3Jlc3NXaXRoU0RQKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzc1Jlc3BvbnNlID0gdGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucHJvZ3Jlc3MoeyBzdGF0dXNDb2RlLCByZWFzb25QaHJhc2UsIGV4dHJhSGVhZGVycywgYm9keSB9KTtcbiAgICAgICAgICAgIHRoaXMuX2RpYWxvZyA9IHByb2dyZXNzUmVzcG9uc2Uuc2Vzc2lvbjtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocHJvZ3Jlc3NSZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdmVyc2lvbiBvZiBgcHJvZ3Jlc3NgIHdoaWNoIHJlc29sdmVzIHdoZW4gdGhlIHByb3Zpc2lvbmFsIHJlc3BvbnNlIHdpdGggc2RwIGlzIHNlbnQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGJ1Y2tldC5cbiAgICAgKi9cbiAgICBzZW5kUHJvZ3Jlc3NXaXRoU0RQKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCByZXNwb25zZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczogdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6IHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzdGF0dXNDb2RlID0gb3B0aW9ucy5zdGF0dXNDb2RlIHx8IDE4MztcbiAgICAgICAgY29uc3QgcmVhc29uUGhyYXNlID0gb3B0aW9ucy5yZWFzb25QaHJhc2U7XG4gICAgICAgIGNvbnN0IGV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTtcbiAgICAgICAgLy8gR2V0IGFuIG9mZmVyL2Fuc3dlciBhbmQgc2VuZCBhIHJlcGx5LlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVJlc3BvbnNlT2ZmZXJBbnN3ZXIodGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QsIHJlc3BvbnNlT3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKChib2R5KSA9PiB0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5wcm9ncmVzcyh7IHN0YXR1c0NvZGUsIHJlYXNvblBocmFzZSwgZXh0cmFIZWFkZXJzLCBib2R5IH0pKVxuICAgICAgICAgICAgLnRoZW4oKHByb2dyZXNzUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2RpYWxvZyA9IHByb2dyZXNzUmVzcG9uc2Uuc2Vzc2lvbjtcbiAgICAgICAgICAgIHJldHVybiBwcm9ncmVzc1Jlc3BvbnNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSB2ZXJzaW9uIG9mIGBwcm9ncmVzc2Agd2hpY2ggcmVzb2x2ZXMgd2hlbiB0aGUgcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2UgaXMgc2VudC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgYnVja2V0LlxuICAgICAqL1xuICAgIHNlbmRQcm9ncmVzc1JlbGlhYmxlKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTtcbiAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMucHVzaChcIlJlcXVpcmU6IDEwMHJlbFwiKTtcbiAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMucHVzaChcIlJTZXE6IFwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFByb2dyZXNzV2l0aFNEUChvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSB2ZXJzaW9uIG9mIGBwcm9ncmVzc2Agd2hpY2ggcmVzb2x2ZXMgd2hlbiB0aGUgcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2UgaXMgYWNrbm93bGVkZ2VkLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuXG4gICAgICovXG4gICAgc2VuZFByb2dyZXNzUmVsaWFibGVXYWl0Rm9yUHJhY2sob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOiB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLFxuICAgICAgICAgICAgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczogdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGUgfHwgMTgzO1xuICAgICAgICBjb25zdCByZWFzb25QaHJhc2UgPSBvcHRpb25zLnJlYXNvblBocmFzZTtcbiAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpO1xuICAgICAgICBleHRyYUhlYWRlcnMucHVzaChcIlJlcXVpcmU6IDEwMHJlbFwiKTtcbiAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goXCJSU2VxOiBcIiArIHRoaXMucnNlcSsrKTtcbiAgICAgICAgbGV0IGJvZHk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLndhaXRpbmdGb3JQcmFjayA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlUmVzcG9uc2VPZmZlckFuc3dlcih0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdCwgcmVzcG9uc2VPcHRpb25zKVxuICAgICAgICAgICAgICAgIC50aGVuKChvZmZlckFuc3dlcikgPT4ge1xuICAgICAgICAgICAgICAgIGJvZHkgPSBvZmZlckFuc3dlcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucHJvZ3Jlc3MoeyBzdGF0dXNDb2RlLCByZWFzb25QaHJhc2UsIGV4dHJhSGVhZGVycywgYm9keSB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHByb2dyZXNzUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kaWFsb2cgPSBwcm9ncmVzc1Jlc3BvbnNlLnNlc3Npb247XG4gICAgICAgICAgICAgICAgbGV0IHByYWNrUmVxdWVzdDtcbiAgICAgICAgICAgICAgICBsZXQgcHJhY2tSZXNwb25zZTtcbiAgICAgICAgICAgICAgICBwcm9ncmVzc1Jlc3BvbnNlLnNlc3Npb24uZGVsZWdhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIG9uUHJhY2s6IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmFja1JlcXVlc3QgPSByZXF1ZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHByYWNrV2FpdFRpbWVvdXRUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVsMXh4UmV0cmFuc21pc3Npb25UaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMud2FpdGluZ0ZvclByYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YWl0aW5nRm9yUHJhY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUHJhY2tPZmZlckFuc3dlcihwcmFja1JlcXVlc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHByYWNrUmVzcG9uc2VCb2R5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJhY2tSZXNwb25zZSA9IHByYWNrUmVxdWVzdC5hY2NlcHQoeyBzdGF0dXNDb2RlOiAyMDAsIGJvZHk6IHByYWNrUmVzcG9uc2VCb2R5IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByYWNrQXJyaXZlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgcHJhY2tSZXF1ZXN0LCBwcmFja1Jlc3BvbnNlLCBwcm9ncmVzc1Jlc3BvbnNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHJlamVjdChlcnJvcikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MiNzZWN0aW9uLTNcbiAgICAgICAgICAgICAgICBjb25zdCBwcmFja1dhaXRUaW1lb3V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMud2FpdGluZ0ZvclByYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy53YWl0aW5nRm9yUHJhY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIk5vIFBSQUNLIHJlY2VpdmVkLCByZWplY3RpbmcgSU5WSVRFLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVsMXh4UmV0cmFuc21pc3Npb25UaW1lcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KHsgc3RhdHVzQ29kZTogNTA0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiByZWplY3QobmV3IFNlc3Npb25UZXJtaW5hdGVkRXJyb3IoKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiByZWplY3QoZXJyb3IpKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHByYWNrV2FpdFRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQocHJhY2tXYWl0VGltZW91dCwgVGltZXJzLlQxICogNjQpO1xuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYyI3NlY3Rpb24tM1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbDF4eFJldHJhbnNtaXNzaW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucHJvZ3Jlc3MoeyBzdGF0dXNDb2RlLCByZWFzb25QaHJhc2UsIGV4dHJhSGVhZGVycywgYm9keSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2FpdGluZ0ZvclByYWNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICAgICAgICAgICAgcmVsMXh4UmV0cmFuc21pc3Npb25UaW1lciA9IHNldFRpbWVvdXQocmVsMXh4UmV0cmFuc21pc3Npb24sICh0aW1lb3V0ICo9IDIpKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGxldCB0aW1lb3V0ID0gVGltZXJzLlQxO1xuICAgICAgICAgICAgICAgIGxldCByZWwxeHhSZXRyYW5zbWlzc2lvblRpbWVyID0gc2V0VGltZW91dChyZWwxeHhSZXRyYW5zbWlzc2lvbiwgdGltZW91dCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndhaXRpbmdGb3JQcmFjayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdmVyc2lvbiBvZiBgcHJvZ3Jlc3NgIHdoaWNoIHJlc29sdmVzIHdoZW4gYSAxMDAgVHJ5aW5nIHByb3Zpc2lvbmFsIHJlc3BvbnNlIGlzIHNlbnQuXG4gICAgICovXG4gICAgc2VuZFByb2dyZXNzVHJ5aW5nKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NSZXNwb25zZSA9IHRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LnRyeWluZygpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9ncmVzc1Jlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hlbiBhdHRlbXB0aW5nIHRvIGFjY2VwdCB0aGUgSU5WSVRFLCBhbiBpbnZpdGF0aW9uIHdhaXRzXG4gICAgICogZm9yIGFueSBvdXRzdGFuZGluZyBQUkFDSyB0byBhcnJpdmUgYmVmb3JlIHNlbmRpbmcgdGhlIDIwMCBPay5cbiAgICAgKiBJdCB3aWxsIGJlIHdhaXRpbmcgb24gdGhpcyBQcm9taXNlIHRvIHJlc29sdmUgd2hpY2ggbGV0cyBpdCBrbm93XG4gICAgICogdGhlIFBSQUNLIGhhcyBhcnJpdmVkIGFuZCBpdCBtYXkgcHJvY2VlZCB0byBzZW5kIHRoZSAyMDAgT2suXG4gICAgICovXG4gICAgd2FpdEZvckFycml2YWxPZlByYWNrKCkge1xuICAgICAgICBpZiAodGhpcy53YWl0aW5nRm9yUHJhY2tQcm9taXNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IHdhaXRpbmcgZm9yIFBSQUNLXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2FpdGluZ0ZvclByYWNrUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2FpdGluZ0ZvclByYWNrUmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLndhaXRpbmdGb3JQcmFja1JlamVjdCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLndhaXRpbmdGb3JQcmFja1Byb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhlcmUgd2UgYXJlIHJlc29sdmluZyB0aGUgcHJvbWlzZSB3aGljaCBpbiB0dXJuIHdpbGwgY2F1c2VcbiAgICAgKiB0aGUgYWNjZXB0IHRvIHByb2NlZWQgKGl0IG1heSBzdGlsbCBmYWlsIGZvciBvdGhlciByZWFzb25zLCBidXQuLi4pLlxuICAgICAqL1xuICAgIHByYWNrQXJyaXZlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMud2FpdGluZ0ZvclByYWNrUmVzb2x2ZSkge1xuICAgICAgICAgICAgdGhpcy53YWl0aW5nRm9yUHJhY2tSZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YWl0aW5nRm9yUHJhY2tQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLndhaXRpbmdGb3JQcmFja1Jlc29sdmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMud2FpdGluZ0ZvclByYWNrUmVqZWN0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZXJlIHdlIGFyZSByZWplY3RpbmcgdGhlIHByb21pc2Ugd2hpY2ggaW4gdHVybiB3aWxsIGNhdXNlXG4gICAgICogdGhlIGFjY2VwdCB0byBmYWlsIGFuZCB0aGUgc2Vzc2lvbiB0byB0cmFuc2l0aW9uIHRvIFwidGVybWluYXRlZFwiLlxuICAgICAqL1xuICAgIHByYWNrTmV2ZXJBcnJpdmVkKCkge1xuICAgICAgICBpZiAodGhpcy53YWl0aW5nRm9yUHJhY2tSZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMud2FpdGluZ0ZvclByYWNrUmVqZWN0KG5ldyBTZXNzaW9uVGVybWluYXRlZEVycm9yKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2FpdGluZ0ZvclByYWNrUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy53YWl0aW5nRm9yUHJhY2tSZXNvbHZlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLndhaXRpbmdGb3JQcmFja1JlamVjdCA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDLCBHcmFtbWFyLCBTaWduYWxpbmdTdGF0ZSB9IGZyb20gXCIuLi9jb3JlXCI7XG5pbXBvcnQgeyBnZXRSZWFzb25QaHJhc2UsIG5ld1RhZyB9IGZyb20gXCIuLi9jb3JlL21lc3NhZ2VzL3V0aWxzXCI7XG5pbXBvcnQgeyBTZXNzaW9uIH0gZnJvbSBcIi4vc2Vzc2lvblwiO1xuaW1wb3J0IHsgU2Vzc2lvblN0YXRlIH0gZnJvbSBcIi4vc2Vzc2lvbi1zdGF0ZVwiO1xuaW1wb3J0IHsgU0lQRXh0ZW5zaW9uIH0gZnJvbSBcIi4vdXNlci1hZ2VudC1vcHRpb25zXCI7XG4vKipcbiAqIEFuIGludml0ZXIgb2ZmZXJzIHRvIGVzdGFibGlzaCBhIHtAbGluayBTZXNzaW9ufSAob3V0Z29pbmcgSU5WSVRFKS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEludml0ZXIgZXh0ZW5kcyBTZXNzaW9uIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBgSW52aXRlcmAgY2xhc3MuXG4gICAgICogQHBhcmFtIHVzZXJBZ2VudCAtIFVzZXIgYWdlbnQuIFNlZSB7QGxpbmsgVXNlckFnZW50fSBmb3IgZGV0YWlscy5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0VVJJIC0gUmVxdWVzdCBVUkkgaWRlbnRpZnlpbmcgdGhlIHRhcmdldCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgYnVja2V0LiBTZWUge0BsaW5rIEludml0ZXJPcHRpb25zfSBmb3IgZGV0YWlscy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih1c2VyQWdlbnQsIHRhcmdldFVSSSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHVzZXJBZ2VudCwgb3B0aW9ucyk7XG4gICAgICAgIC8qKiBUcnVlIGlmIGRpc3Bvc2UoKSBoYXMgYmVlbiBjYWxsZWQuICovXG4gICAgICAgIHRoaXMuZGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqIFRydWUgaWYgZWFybHkgbWVkaWEgdXNlIGlzIGVuYWJsZWQuICovXG4gICAgICAgIHRoaXMuZWFybHlNZWRpYSA9IGZhbHNlO1xuICAgICAgICAvKiogVGhlIGVhcmx5IG1lZGlhIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlcnMuICovXG4gICAgICAgIHRoaXMuZWFybHlNZWRpYVNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICAvKiogVHJ1ZSBpZiBjYW5jZWwoKSB3YXMgY2FsbGVkLiAqL1xuICAgICAgICB0aGlzLmlzQ2FuY2VsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqIFRydWUgaWYgaW5pdGlhbCBJTlZJVEUgd2l0aG91dCBTRFAuICovXG4gICAgICAgIHRoaXMuaW52aXRlV2l0aG91dFNkcCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IHVzZXJBZ2VudC5nZXRMb2dnZXIoXCJzaXAuSW52aXRlclwiKTtcbiAgICAgICAgLy8gRWFybHkgbWVkaWFcbiAgICAgICAgdGhpcy5lYXJseU1lZGlhID0gb3B0aW9ucy5lYXJseU1lZGlhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmVhcmx5TWVkaWEgOiB0aGlzLmVhcmx5TWVkaWE7XG4gICAgICAgIGNvbnNvbGUubG9nKCdpbnZpdGVyLmpzIDAwMSBlYXJseU1lZGlhPScsdGhpcy5lYXJseU1lZGlhKTtcbiAgICAgICAgLy8gRnJvbSB0YWdcbiAgICAgICAgdGhpcy5mcm9tVGFnID0gbmV3VGFnKCk7XG4gICAgICAgIC8vIEludml0ZSB3aXRob3V0IFNEUFxuICAgICAgICB0aGlzLmludml0ZVdpdGhvdXRTZHAgPSBvcHRpb25zLmludml0ZVdpdGhvdXRTZHAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW52aXRlV2l0aG91dFNkcCA6IHRoaXMuaW52aXRlV2l0aG91dFNkcDtcbiAgICAgICAgLy8gSW52aXRlciBvcHRpb25zIChjb3VsZCBkbyBiZXR0ZXIgY29weWluZyB0aGVzZSBvcHRpb25zKVxuICAgICAgICBjb25zdCBpbnZpdGVyT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBpbnZpdGVyT3B0aW9ucy5wYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLnBhcmFtcyk7XG4gICAgICAgIC8vIEFub255bW91cyBjYWxsXG4gICAgICAgIGNvbnN0IGFub255bW91cyA9IG9wdGlvbnMuYW5vbnltb3VzIHx8IGZhbHNlO1xuICAgICAgICAvLyBDb250YWN0XG4gICAgICAgIGNvbnN0IGNvbnRhY3QgPSB1c2VyQWdlbnQuY29udGFjdC50b1N0cmluZyh7XG4gICAgICAgICAgICBhbm9ueW1vdXMsXG4gICAgICAgICAgICAvLyBEbyBub3QgYWRkIDtvYiBpbiBpbml0aWFsIGZvcm1pbmcgZGlhbG9nIHJlcXVlc3RzIGlmIHRoZVxuICAgICAgICAgICAgLy8gcmVnaXN0cmF0aW9uIG92ZXIgdGhlIGN1cnJlbnQgY29ubmVjdGlvbiBnb3QgYSBHUlVVIFVSSS5cbiAgICAgICAgICAgIG91dGJvdW5kOiBhbm9ueW1vdXMgPyAhdXNlckFnZW50LmNvbnRhY3QudGVtcEdydXUgOiAhdXNlckFnZW50LmNvbnRhY3QucHViR3J1dVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gRklYTUU6IFRPRE86IFdlIHNob3VsZCBub3QgYmUgcGFyc2luZyBVUklzIGhlcmUgYXMgaWYgaXQgZmFpbHMgd2UgaGF2ZSB0byB0aHJvdyBhbiBleGNlcHRpb25cbiAgICAgICAgLy8gd2hpY2ggaXMgbm90IHNvbWV0aGluZyB3ZSB3YW50IG91ciBjb25zdHJ1Y3RvciB0byBkby4gVVJJcyBzaG91bGQgYmUgcGFzc2VkIGluIGFzIHBhcmFtcy5cbiAgICAgICAgLy8gVVJJc1xuICAgICAgICBpZiAoYW5vbnltb3VzICYmIHVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnVyaSkge1xuICAgICAgICAgICAgaW52aXRlck9wdGlvbnMucGFyYW1zLmZyb21EaXNwbGF5TmFtZSA9IFwiQW5vbnltb3VzXCI7XG4gICAgICAgICAgICBpbnZpdGVyT3B0aW9ucy5wYXJhbXMuZnJvbVVyaSA9IFwic2lwOmFub255bW91c0Bhbm9ueW1vdXMuaW52YWxpZFwiO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmcm9tVVJJID0gdXNlckFnZW50LnVzZXJBZ2VudENvcmUuY29uZmlndXJhdGlvbi5hb3I7XG4gICAgICAgIGlmIChpbnZpdGVyT3B0aW9ucy5wYXJhbXMuZnJvbVVyaSkge1xuICAgICAgICAgICAgZnJvbVVSSSA9XG4gICAgICAgICAgICAgICAgdHlwZW9mIGludml0ZXJPcHRpb25zLnBhcmFtcy5mcm9tVXJpID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgID8gR3JhbW1hci5VUklQYXJzZShpbnZpdGVyT3B0aW9ucy5wYXJhbXMuZnJvbVVyaSlcbiAgICAgICAgICAgICAgICAgICAgOiBpbnZpdGVyT3B0aW9ucy5wYXJhbXMuZnJvbVVyaTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZyb21VUkkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGZyb20gVVJJOiBcIiArIGludml0ZXJPcHRpb25zLnBhcmFtcy5mcm9tVXJpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdG9VUkkgPSB0YXJnZXRVUkk7XG4gICAgICAgIGlmIChpbnZpdGVyT3B0aW9ucy5wYXJhbXMudG9VcmkpIHtcbiAgICAgICAgICAgIHRvVVJJID1cbiAgICAgICAgICAgICAgICB0eXBlb2YgaW52aXRlck9wdGlvbnMucGFyYW1zLnRvVXJpID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgID8gR3JhbW1hci5VUklQYXJzZShpbnZpdGVyT3B0aW9ucy5wYXJhbXMudG9VcmkpXG4gICAgICAgICAgICAgICAgICAgIDogaW52aXRlck9wdGlvbnMucGFyYW1zLnRvVXJpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdG9VUkkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRvIFVSSTogXCIgKyBpbnZpdGVyT3B0aW9ucy5wYXJhbXMudG9VcmkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcmFtc1xuICAgICAgICBjb25zdCBtZXNzYWdlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGludml0ZXJPcHRpb25zLnBhcmFtcyk7XG4gICAgICAgIG1lc3NhZ2VPcHRpb25zLmZyb21UYWcgPSB0aGlzLmZyb21UYWc7XG4gICAgICAgIC8vIEV4dHJhIGhlYWRlcnNcbiAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzID0gKGludml0ZXJPcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTtcbiAgICAgICAgaWYgKGFub255bW91cyAmJiB1c2VyQWdlbnQuY29uZmlndXJhdGlvbi51cmkpIHtcbiAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKFwiUC1QcmVmZXJyZWQtSWRlbnRpdHk6IFwiICsgdXNlckFnZW50LmNvbmZpZ3VyYXRpb24udXJpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goXCJQcml2YWN5OiBpZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBleHRyYUhlYWRlcnMucHVzaChcIkNvbnRhY3Q6IFwiICsgY29udGFjdCk7XG4gICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKFwiQWxsb3c6IFwiICsgW1wiQUNLXCIsIFwiQ0FOQ0VMXCIsIFwiSU5WSVRFXCIsIFwiTUVTU0FHRVwiLCBcIkJZRVwiLCBcIk9QVElPTlNcIiwgXCJJTkZPXCIsIFwiTk9USUZZXCIsIFwiUkVGRVJcIl0udG9TdHJpbmcoKSk7XG4gICAgICAgIGlmICh1c2VyQWdlbnQuY29uZmlndXJhdGlvbi5zaXBFeHRlbnNpb24xMDByZWwgPT09IFNJUEV4dGVuc2lvbi5SZXF1aXJlZCkge1xuICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goXCJSZXF1aXJlOiAxMDByZWxcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnNpcEV4dGVuc2lvblJlcGxhY2VzID09PSBTSVBFeHRlbnNpb24uUmVxdWlyZWQpIHtcbiAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKFwiUmVxdWlyZTogcmVwbGFjZXNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaW52aXRlck9wdGlvbnMuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzO1xuICAgICAgICAvLyBCb2R5XG4gICAgICAgIGNvbnN0IGJvZHkgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIE1ha2UgaW5pdGlhbCBvdXRnb2luZyByZXF1ZXN0IG1lc3NhZ2VcbiAgICAgICAgdGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlID0gdXNlckFnZW50LnVzZXJBZ2VudENvcmUubWFrZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoQy5JTlZJVEUsIHRhcmdldFVSSSwgZnJvbVVSSSwgdG9VUkksIG1lc3NhZ2VPcHRpb25zLCBleHRyYUhlYWRlcnMsIGJvZHkpO1xuICAgICAgICAvLyBTZXNzaW9uIHBhcmVudCBwcm9wZXJ0aWVzXG4gICAgICAgIHRoaXMuX2NvbnRhY3QgPSBjb250YWN0O1xuICAgICAgICB0aGlzLl9yZWZlcnJhbEludml0ZXJPcHRpb25zID0gaW52aXRlck9wdGlvbnM7XG4gICAgICAgIHRoaXMuX3JlbmRlcmJvZHkgPSBvcHRpb25zLnJlbmRlcmJvZHk7XG4gICAgICAgIHRoaXMuX3JlbmRlcnR5cGUgPSBvcHRpb25zLnJlbmRlcnR5cGU7XG4gICAgICAgIC8vIE1vZGlmaWVycyBhbmQgb3B0aW9ucyBmb3IgaW5pdGlhbCBJTlZJVEUgdHJhbnNhY3Rpb25cbiAgICAgICAgaWYgKG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycykge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzID0gb3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zID0gb3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICAvLyBNb2RpZmllcnMgYW5kIG9wdGlvbnMgZm9yIHJlLUlOVklURSB0cmFuc2FjdGlvbnNcbiAgICAgICAgaWYgKG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnNSZUludml0ZSA9IG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNSZUludml0ZSA9IG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNSZUludml0ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZGVudGlmaWVyXG4gICAgICAgIHRoaXMuX2lkID0gdGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLmNhbGxJZCArIHRoaXMuZnJvbVRhZztcbiAgICAgICAgLy8gQWRkIHRvIHRoZSB1c2VyIGFnZW50J3Mgc2Vzc2lvbiBjb2xsZWN0aW9uLlxuICAgICAgICB0aGlzLnVzZXJBZ2VudC5fc2Vzc2lvbnNbdGhpcy5faWRdID0gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzdHJ1Y3Rvci5cbiAgICAgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICAvLyBPbmx5IHJ1biB0aHJvdWdoIHRoaXMgb25jZS4gSXQgY2FuIGFuZCBkb2VzIGdldCBjYWxsZWQgbXVsdGlwbGUgdGltZXNcbiAgICAgICAgLy8gZGVwZW5kaW5nIG9uIHRoZSB3aGF0IHRoZSBzZXNzaW9ucyBzdGF0ZSBpcyB3aGVuIGZpcnN0IGNhbGxlZC5cbiAgICAgICAgLy8gRm9yIGV4YW1wbGUsIGlmIGNhbGxlZCB3aGVuIFwiZXN0YWJsaXNoaW5nXCIgaXQgd2lsbCBiZSBjYWxsZWQgYWdhaW5cbiAgICAgICAgLy8gYXQgbGVhc3Qgb25jZSB3aGVuIHRoZSBzZXNzaW9uIHRyYW5zaXRpb25zIHRvIFwidGVybWluYXRlZFwiLlxuICAgICAgICAvLyBSZWdhcmRsZXNzLCBydW5uaW5nIHRocm91Z2ggdGhpcyBtb3JlIHRoYW4gb25jZSBpcyBwb2ludGxlc3MuXG4gICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIC8vIERpc3Bvc2Ugb2YgZWFybHkgZGlhbG9nIG1lZGlhXG4gICAgICAgIHRoaXMuZGlzcG9zZUVhcmx5TWVkaWEoKTtcbiAgICAgICAgLy8gSWYgdGhlIGZpbmFsIHJlc3BvbnNlIGZvciB0aGUgaW5pdGlhbCBJTlZJVEUgbm90IHlldCBiZWVuIHJlY2VpdmVkLCBjYW5jZWwgaXRcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5Jbml0aWFsOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbmNlbCgpLnRoZW4oKCkgPT4gc3VwZXIuZGlzcG9zZSgpKTtcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLkVzdGFibGlzaGluZzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYW5jZWwoKS50aGVuKCgpID0+IHN1cGVyLmRpc3Bvc2UoKSk7XG4gICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hlZDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuVGVybWluYXRpbmc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBzdGF0ZS5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbCBvdXRnb2luZyBJTlZJVEUgcmVxdWVzdCBtZXNzYWdlIGJvZHkuXG4gICAgICovXG4gICAgZ2V0IGJvZHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dGdvaW5nUmVxdWVzdE1lc3NhZ2UuYm9keTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGlkZW50aXR5IG9mIHRoZSBsb2NhbCB1c2VyLlxuICAgICAqL1xuICAgIGdldCBsb2NhbElkZW50aXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLmZyb207XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpZGVudGl0eSBvZiB0aGUgcmVtb3RlIHVzZXIuXG4gICAgICovXG4gICAgZ2V0IHJlbW90ZUlkZW50aXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLnRvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWFsIG91dGdvaW5nIElOVklURSByZXF1ZXN0IG1lc3NhZ2UuXG4gICAgICovXG4gICAgZ2V0IHJlcXVlc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dGdvaW5nUmVxdWVzdE1lc3NhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIElOVklURSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBTZW5kcyBhIENBTkNFTCByZXF1ZXN0LlxuICAgICAqIFJlc29sdmVzIG9uY2UgdGhlIHJlc3BvbnNlIHNlbnQsIG90aGVyd2lzZSByZWplY3RzLlxuICAgICAqXG4gICAgICogQWZ0ZXIgc2VuZGluZyBhIENBTkNFTCByZXF1ZXN0IHRoZSBleHBlY3RhdGlvbiBpcyB0aGF0IGEgNDg3IGZpbmFsIHJlc3BvbnNlXG4gICAgICogd2lsbCBiZSByZWNlaXZlZCBmb3IgdGhlIElOVklURS4gSG93ZXZlciBhIDIwMCBmaW5hbCByZXNwb25zZSB0byB0aGUgSU5WSVRFXG4gICAgICogbWF5IG5vbmV0aGVsZXNzIGFycml2ZSAoaXQncyBhIHJhY2UgYmV0d2VlbiB0aGUgQ0FOQ0VMIHJlYWNoaW5nIHRoZSBVQVMgYmVmb3JlXG4gICAgICogdGhlIFVBUyBzZW5kcyBhIDIwMCkgaW4gd2hpY2ggY2FzZSBhbiBBQ0sgJiBCWUUgd2lsbCBiZSBzZW50LiBUaGUgbmV0IGVmZmVjdFxuICAgICAqIGlzIHRoYXQgdGhpcyBtZXRob2Qgd2lsbCB0ZXJtaW5hdGUgdGhlIHNlc3Npb24gcmVnYXJkbGVzcyBvZiB0aGUgcmFjZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgYnVja2V0LlxuICAgICAqL1xuICAgIGNhbmNlbChvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiSW52aXRlci5jYW5jZWxcIik7XG4gICAgICAgIC8vIHZhbGlkYXRlIHN0YXRlXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTZXNzaW9uU3RhdGUuSW5pdGlhbCAmJiB0aGlzLnN0YXRlICE9PSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoaW5nKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgSW52YWxpZCBzZXNzaW9uIHN0YXRlICR7dGhpcy5zdGF0ZX1gKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBmbGFnIGNhbmNlbGVkXG4gICAgICAgIHRoaXMuaXNDYW5jZWxlZCA9IHRydWU7XG4gICAgICAgIC8vIHRyYW5zaXRpb24gc3RhdGVcbiAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0aW5nKTtcbiAgICAgICAgLy8gaGVscGVyIGZ1bmN0aW9uXG4gICAgICAgIGZ1bmN0aW9uIGdldENhbmNlbFJlYXNvbihjb2RlLCByZWFzb24pIHtcbiAgICAgICAgICAgIGlmICgoY29kZSAmJiBjb2RlIDwgMjAwKSB8fCBjb2RlID4gNjk5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzQ29kZTogXCIgKyBjb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvZGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXVzZSA9IGNvZGU7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGdldFJlYXNvblBocmFzZShjb2RlKSB8fCByZWFzb247XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiU0lQO2NhdXNlPVwiICsgY2F1c2UgKyAnO3RleHQ9XCInICsgdGV4dCArICdcIic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3V0Z29pbmdJbnZpdGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAvLyB0aGUgQ0FOQ0VMIG1heSBub3QgYmUgcmVzcGVjdGVkIGJ5IHBlZXIocyksIHNvIGRvbid0IHRyYW5zaXRpb24gdG8gdGVybWluYXRlZFxuICAgICAgICAgICAgbGV0IGNhbmNlbFJlYXNvbjtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXR1c0NvZGUgJiYgb3B0aW9ucy5yZWFzb25QaHJhc2UpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxSZWFzb24gPSBnZXRDYW5jZWxSZWFzb24ob3B0aW9ucy5zdGF0dXNDb2RlLCBvcHRpb25zLnJlYXNvblBocmFzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm91dGdvaW5nSW52aXRlUmVxdWVzdC5jYW5jZWwoY2FuY2VsUmVhc29uLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJDYW5jZWxlZCBzZXNzaW9uIGJlZm9yZSBJTlZJVEUgd2FzIHNlbnRcIik7XG4gICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyB0aGUgSU5WSVRFIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRMRFIuLi5cbiAgICAgKiAgMSkgT25seSBvbmUgb2ZmZXIvYW5zd2VyIGV4Y2hhbmdlIHBlcm1pdHRlZCBkdXJpbmcgaW5pdGlhbCBJTlZJVEUuXG4gICAgICogIDIpIE5vIFwiZWFybHkgbWVkaWFcIiBpZiB0aGUgaW5pdGlhbCBvZmZlciBpcyBpbiBhbiBJTlZJVEUgKGRlZmF1bHQgYmVoYXZpb3IpLlxuICAgICAqICAzKSBJZiBcImVhcmx5IG1lZGlhXCIgYW5kIHRoZSBpbml0aWFsIG9mZmVyIGlzIGluIGFuIElOVklURSwgbm8gSU5WSVRFIGZvcmtpbmcuXG4gICAgICpcbiAgICAgKiAxKSBPbmx5IG9uZSBvZmZlci9hbnN3ZXIgZXhjaGFuZ2UgcGVybWl0dGVkIGR1cmluZyBpbml0aWFsIElOVklURS5cbiAgICAgKlxuICAgICAqIE91ciBpbXBsZW1lbnRhdGlvbiByZXBsYWNlcyB0aGUgZm9sbG93aW5nIGJ1bGxldCBwb2ludC4uLlxuICAgICAqXG4gICAgICogbyAgQWZ0ZXIgaGF2aW5nIHNlbnQgb3IgcmVjZWl2ZWQgYW4gYW5zd2VyIHRvIHRoZSBmaXJzdCBvZmZlciwgdGhlXG4gICAgICogICAgVUFDIE1BWSBnZW5lcmF0ZSBzdWJzZXF1ZW50IG9mZmVycyBpbiByZXF1ZXN0cyBiYXNlZCBvbiBydWxlc1xuICAgICAqICAgIHNwZWNpZmllZCBmb3IgdGhhdCBtZXRob2QsIGJ1dCBvbmx5IGlmIGl0IGhhcyByZWNlaXZlZCBhbnN3ZXJzXG4gICAgICogICAgdG8gYW55IHByZXZpb3VzIG9mZmVycywgYW5kIGhhcyBub3Qgc2VudCBhbnkgb2ZmZXJzIHRvIHdoaWNoIGl0XG4gICAgICogICAgaGFzbid0IGdvdHRlbiBhbiBhbnN3ZXIuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjFcbiAgICAgKlxuICAgICAqIC4uLndpdGguLi5cbiAgICAgKlxuICAgICAqIG8gIEFmdGVyIGhhdmluZyBzZW50IG9yIHJlY2VpdmVkIGFuIGFuc3dlciB0byB0aGUgZmlyc3Qgb2ZmZXIsIHRoZVxuICAgICAqICAgIFVBQyBNVVNUIE5PVCBnZW5lcmF0ZSBzdWJzZXF1ZW50IG9mZmVycyBpbiByZXF1ZXN0cyBiYXNlZCBvbiBydWxlc1xuICAgICAqICAgIHNwZWNpZmllZCBmb3IgdGhhdCBtZXRob2QuXG4gICAgICpcbiAgICAgKiAuLi53aGljaCBpbiBjb21iaW5hdGlvbiB3aXRoIHRoaXMgYnVsbGV0IHBvaW50Li4uXG4gICAgICpcbiAgICAgKiBvICBPbmNlIHRoZSBVQVMgaGFzIHNlbnQgb3IgcmVjZWl2ZWQgYW4gYW5zd2VyIHRvIHRoZSBpbml0aWFsXG4gICAgICogICAgb2ZmZXIsIGl0IE1VU1QgTk9UIGdlbmVyYXRlIHN1YnNlcXVlbnQgb2ZmZXJzIGluIGFueSByZXNwb25zZXNcbiAgICAgKiAgICB0byB0aGUgaW5pdGlhbCBJTlZJVEUuICBUaGlzIG1lYW5zIHRoYXQgYSBVQVMgYmFzZWQgb24gdGhpc1xuICAgICAqICAgIHNwZWNpZmljYXRpb24gYWxvbmUgY2FuIG5ldmVyIGdlbmVyYXRlIHN1YnNlcXVlbnQgb2ZmZXJzIHVudGlsXG4gICAgICogICAgY29tcGxldGlvbiBvZiB0aGUgaW5pdGlhbCB0cmFuc2FjdGlvbi5cbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjIuMVxuICAgICAqXG4gICAgICogLi4uZW5zdXJlcyB0aGF0IEVYQUNUTFkgT05FIG9mZmVyL2Fuc3dlciBleGNoYW5nZSB3aWxsIG9jY3VyXG4gICAgICogZHVyaW5nIGFuIGluaXRpYWwgb3V0IG9mIGRpYWxvZyBJTlZJVEUgcmVxdWVzdCBtYWRlIGJ5IG91ciBVQUMuXG4gICAgICpcbiAgICAgKlxuICAgICAqIDIpIE5vIFwiZWFybHkgbWVkaWFcIiBpZiB0aGUgaW5pdGlhbCBvZmZlciBpcyBpbiBhbiBJTlZJVEUgKGRlZmF1bHQgYmVoYXZpb3IpLlxuICAgICAqXG4gICAgICogV2hpbGUgb3VyIGltcGxlbWVudGF0aW9uIGFkaGVyZXMgdG8gdGhlIGZvbGxvd2luZyBidWxsZXQgcG9pbnQuLi5cbiAgICAgKlxuICAgICAqIG8gIElmIHRoZSBpbml0aWFsIG9mZmVyIGlzIGluIGFuIElOVklURSwgdGhlIGFuc3dlciBNVVNUIGJlIGluIGFcbiAgICAgKiAgICByZWxpYWJsZSBub24tZmFpbHVyZSBtZXNzYWdlIGZyb20gVUFTIGJhY2sgdG8gVUFDIHdoaWNoIGlzXG4gICAgICogICAgY29ycmVsYXRlZCB0byB0aGF0IElOVklURS4gIEZvciB0aGlzIHNwZWNpZmljYXRpb24sIHRoYXQgaXNcbiAgICAgKiAgICBvbmx5IHRoZSBmaW5hbCAyeHggcmVzcG9uc2UgdG8gdGhhdCBJTlZJVEUuICBUaGF0IHNhbWUgZXhhY3RcbiAgICAgKiAgICBhbnN3ZXIgTUFZIGFsc28gYmUgcGxhY2VkIGluIGFueSBwcm92aXNpb25hbCByZXNwb25zZXMgc2VudFxuICAgICAqICAgIHByaW9yIHRvIHRoZSBhbnN3ZXIuICBUaGUgVUFDIE1VU1QgdHJlYXQgdGhlIGZpcnN0IHNlc3Npb25cbiAgICAgKiAgICBkZXNjcmlwdGlvbiBpdCByZWNlaXZlcyBhcyB0aGUgYW5zd2VyLCBhbmQgTVVTVCBpZ25vcmUgYW55XG4gICAgICogICAgc2Vzc2lvbiBkZXNjcmlwdGlvbnMgaW4gc3Vic2VxdWVudCByZXNwb25zZXMgdG8gdGhlIGluaXRpYWxcbiAgICAgKiAgICBJTlZJVEUuXG4gICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjFcbiAgICAgKlxuICAgICAqIFdlIGhhdmUgbWFkZSB0aGUgZm9sbG93aW5nIGltcGxlbWVudGF0aW9uIGRlY2lzaW9uIHdpdGggcmVnYXJkIHRvIGVhcmx5IG1lZGlhLi4uXG4gICAgICpcbiAgICAgKiBvICBJZiB0aGUgaW5pdGlhbCBvZmZlciBpcyBpbiB0aGUgSU5WSVRFLCB0aGUgYW5zd2VyIGZyb20gdGhlXG4gICAgICogICAgVUFTIGJhY2sgdG8gdGhlIFVBQyB3aWxsIGVzdGFibGlzaCBhIG1lZGlhIHNlc3Npb24gb25seVxuICAgICAqICAgIG9ubHkgYWZ0ZXIgdGhlIGZpbmFsIDJ4eCByZXNwb25zZSB0byB0aGF0IElOVklURSBpcyByZWNlaXZlZC5cbiAgICAgKlxuICAgICAqIFRoZSByZWFzb24gZm9yIHRoaXMgZGVjaXNpb24gaXMgcm9vdGVkIGluIGEgcmVzdHJpY3Rpb24gY3VycmVudGx5XG4gICAgICogaW5oZXJlbnQgaW4gV2ViUlRDLiBTcGVjaWZpY2FsbHksIHdoaWxlIGEgU0lQIElOVklURSByZXF1ZXN0IHdpdGggYW5cbiAgICAgKiBpbml0aWFsIG9mZmVyIG1heSBmb3JrIHJlc3VsdGluZyBpbiBtb3JlIHRoYW4gb25lIHByb3Zpc2lvbmFsIGFuc3dlcixcbiAgICAgKiB0aGVyZSBpcyBjdXJyZW50bHkgbm8gZWFzeS9nb29kIHdheSB0byB0byBcImZvcmtcIiBhbiBvZmZlciBnZW5lcmF0ZWRcbiAgICAgKiBieSBhIHBlZXIgY29ubmVjdGlvbi4gSW4gcGFydGljdWxhciwgYSBXZWJSVEMgb2ZmZXIgY3VycmVudGx5IG1heSBvbmx5XG4gICAgICogYmUgbWF0Y2hlZCB3aXRoIG9uZSBhbnN3ZXIgYW5kIHdlIGhhdmUgbm8gZ29vZCB3YXkgdG8ga25vdyB3aGljaFxuICAgICAqIFwicHJvdmlzaW9uYWwgYW5zd2VyXCIgaXMgZ29pbmcgdG8gYmUgdGhlIFwiZmluYWwgYW5zd2VyXCIuIFNvIHdlIGhhdmVcbiAgICAgKiBkZWNpZGVkIHRvIHB1bnQgYW5kIG5vdCBjcmVhdGUgYW55IFwiZWFybHkgbWVkaWFcIiBzZXNzaW9ucyBpbiB0aGlzIGNhc2UuXG4gICAgICpcbiAgICAgKiBUaGUgdXBzaG90IGlzIHRoYXQgaWYgeW91IHdhbnQgXCJlYXJseSBtZWRpYVwiLCB5b3UgbXVzdCBub3QgcHV0IHRoZVxuICAgICAqIGluaXRpYWwgb2ZmZXIgaW4gdGhlIElOVklURS4gSW5zdGVhZCwgZm9yY2UgdGhlIFVBUyB0byBwcm92aWRlIHRoZVxuICAgICAqIGluaXRpYWwgb2ZmZXIgYnkgc2VuZGluZyBhbiBJTlZJVEUgd2l0aG91dCBhbiBvZmZlci4gSW4gdGhlIFdlYlJUQ1xuICAgICAqIGNhc2UgdGhpcyBhbGxvd3MgdXMgdG8gY3JlYXRlIGEgdW5pcXVlIHBlZXIgY29ubmVjdGlvbiB3aXRoIGEgdW5pcXVlXG4gICAgICogYW5zd2VyIGZvciBldmVyeSBwcm92aXNpb25hbCBvZmZlciB3aXRoIFwiZWFybHkgbWVkaWFcIiBvbiBhbGwgb2YgdGhlbS5cbiAgICAgKlxuICAgICAqXG4gICAgICogMykgSWYgXCJlYXJseSBtZWRpYVwiIGFuZCB0aGUgaW5pdGlhbCBvZmZlciBpcyBpbiBhbiBJTlZJVEUsIG5vIElOVklURSBmb3JraW5nLlxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgYmVoYXZpb3IgbWF5IGJlIGFsdGVyZWQgYW5kIFwiZWFybHkgbWVkaWFcIiB1dGlsaXplZCBpZiB0aGVcbiAgICAgKiBpbml0aWFsIG9mZmVyIGlzIGluIHRoZSBhbiBJTlZJVEUgYnkgc2V0dGluZyB0aGUgYGVhcmx5TWVkaWFgIG9wdGlvbnMuXG4gICAgICogSG93ZXZlciBpbiB0aGF0IGNhc2UgdGhlIElOVklURSByZXF1ZXN0IE1VU1QgTk9UIGZvcmsuIFRoaXMgYWxsb3dzIGZvclxuICAgICAqIFwiZWFybHkgbWVkaWFcIiBpbiBlbnZpcm9ubWVudHMgd2hlcmUgdGhlIGZvcmtpbmcgYmVoYXZpb3Igb2YgdGhlIFNJUFxuICAgICAqIHNlcnZlcnMgYmVpbmcgdXRpbGl6ZWQgaXMgY29uZmlndXJlZCB0byBkaXNhbGxvdyBmb3JraW5nLlxuICAgICAqL1xuICAgIGludml0ZShvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiSW52aXRlci5pbnZpdGUgZW50ZXJcIik7XG4gICAgICAgIC8vIHZhbGlkYXRlIHN0YXRlXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTZXNzaW9uU3RhdGUuSW5pdGlhbCkge1xuICAgICAgICAgICAgLy8gcmUtaW52aXRlXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuaW52aXRlKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE1vZGlmaWVycyBhbmQgb3B0aW9ucyBmb3IgaW5pdGlhbCBJTlZJVEUgdHJhbnNhY3Rpb25cbiAgICAgICAgaWYgKG9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycykge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzID0gb3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zID0gb3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICAvLyBqdXN0IHNlbmQgYW4gSU5WSVRFIHdpdGggbm8gc2RwLi4uXG4gICAgICAgIGlmIChvcHRpb25zLndpdGhvdXRTZHAgfHwgdGhpcy5pbnZpdGVXaXRob3V0U2RwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyYm9keSAmJiB0aGlzLl9yZW5kZXJ0eXBlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLmJvZHkgPSB7IGNvbnRlbnRUeXBlOiB0aGlzLl9yZW5kZXJ0eXBlLCBib2R5OiB0aGlzLl9yZW5kZXJib2R5IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0cmFuc2l0aW9uIHN0YXRlXG4gICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuRXN0YWJsaXNoaW5nKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5zZW5kSW52aXRlKG9wdGlvbnMpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBnZXQgYW4gb2ZmZXIgYW5kIHNlbmQgaXQgaW4gYW4gSU5WSVRFXG4gICAgICAgIGNvbnN0IG9mZmVyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6IHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyxcbiAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOiB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9mZmVyKG9mZmVyT3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKChib2R5KSA9PiB7XG4gICAgICAgICAgICB0aGlzLm91dGdvaW5nUmVxdWVzdE1lc3NhZ2UuYm9keSA9IHsgYm9keTogYm9keS5jb250ZW50LCBjb250ZW50VHlwZTogYm9keS5jb250ZW50VHlwZSB9O1xuICAgICAgICAgICAgLy8gdHJhbnNpdGlvbiBzdGF0ZVxuICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLkVzdGFibGlzaGluZyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kSW52aXRlKG9wdGlvbnMpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiAxMy4yLjEgQ3JlYXRpbmcgdGhlIEluaXRpYWwgSU5WSVRFXG4gICAgICpcbiAgICAgKiBTaW5jZSB0aGUgaW5pdGlhbCBJTlZJVEUgcmVwcmVzZW50cyBhIHJlcXVlc3Qgb3V0c2lkZSBvZiBhIGRpYWxvZyxcbiAgICAgKiBpdHMgY29uc3RydWN0aW9uIGZvbGxvd3MgdGhlIHByb2NlZHVyZXMgb2YgU2VjdGlvbiA4LjEuMS4gIEFkZGl0aW9uYWxcbiAgICAgKiBwcm9jZXNzaW5nIGlzIHJlcXVpcmVkIGZvciB0aGUgc3BlY2lmaWMgY2FzZSBvZiBJTlZJVEUuXG4gICAgICpcbiAgICAgKiBBbiBBbGxvdyBoZWFkZXIgZmllbGQgKFNlY3Rpb24gMjAuNSkgU0hPVUxEIGJlIHByZXNlbnQgaW4gdGhlIElOVklURS5cbiAgICAgKiBJdCBpbmRpY2F0ZXMgd2hhdCBtZXRob2RzIGNhbiBiZSBpbnZva2VkIHdpdGhpbiBhIGRpYWxvZywgb24gdGhlIFVBXG4gICAgICogc2VuZGluZyB0aGUgSU5WSVRFLCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBkaWFsb2cuICBGb3IgZXhhbXBsZSwgYVxuICAgICAqIFVBIGNhcGFibGUgb2YgcmVjZWl2aW5nIElORk8gcmVxdWVzdHMgd2l0aGluIGEgZGlhbG9nIFszNF0gU0hPVUxEXG4gICAgICogaW5jbHVkZSBhbiBBbGxvdyBoZWFkZXIgZmllbGQgbGlzdGluZyB0aGUgSU5GTyBtZXRob2QuXG4gICAgICpcbiAgICAgKiBBIFN1cHBvcnRlZCBoZWFkZXIgZmllbGQgKFNlY3Rpb24gMjAuMzcpIFNIT1VMRCBiZSBwcmVzZW50IGluIHRoZVxuICAgICAqIElOVklURS4gIEl0IGVudW1lcmF0ZXMgYWxsIHRoZSBleHRlbnNpb25zIHVuZGVyc3Rvb2QgYnkgdGhlIFVBQy5cbiAgICAgKlxuICAgICAqIEFuIEFjY2VwdCAoU2VjdGlvbiAyMC4xKSBoZWFkZXIgZmllbGQgTUFZIGJlIHByZXNlbnQgaW4gdGhlIElOVklURS5cbiAgICAgKiBJdCBpbmRpY2F0ZXMgd2hpY2ggQ29udGVudC1UeXBlcyBhcmUgYWNjZXB0YWJsZSB0byB0aGUgVUEsIGluIGJvdGhcbiAgICAgKiB0aGUgcmVzcG9uc2UgcmVjZWl2ZWQgYnkgaXQsIGFuZCBpbiBhbnkgc3Vic2VxdWVudCByZXF1ZXN0cyBzZW50IHRvXG4gICAgICogaXQgd2l0aGluIGRpYWxvZ3MgZXN0YWJsaXNoZWQgYnkgdGhlIElOVklURS4gIFRoZSBBY2NlcHQgaGVhZGVyIGZpZWxkXG4gICAgICogaXMgZXNwZWNpYWxseSB1c2VmdWwgZm9yIGluZGljYXRpbmcgc3VwcG9ydCBvZiB2YXJpb3VzIHNlc3Npb25cbiAgICAgKiBkZXNjcmlwdGlvbiBmb3JtYXRzLlxuICAgICAqXG4gICAgICogVGhlIFVBQyBNQVkgYWRkIGFuIEV4cGlyZXMgaGVhZGVyIGZpZWxkIChTZWN0aW9uIDIwLjE5KSB0byBsaW1pdCB0aGVcbiAgICAgKiB2YWxpZGl0eSBvZiB0aGUgaW52aXRhdGlvbi4gIElmIHRoZSB0aW1lIGluZGljYXRlZCBpbiB0aGUgRXhwaXJlc1xuICAgICAqIGhlYWRlciBmaWVsZCBpcyByZWFjaGVkIGFuZCBubyBmaW5hbCBhbnN3ZXIgZm9yIHRoZSBJTlZJVEUgaGFzIGJlZW5cbiAgICAgKiByZWNlaXZlZCwgdGhlIFVBQyBjb3JlIFNIT1VMRCBnZW5lcmF0ZSBhIENBTkNFTCByZXF1ZXN0IGZvciB0aGVcbiAgICAgKiBJTlZJVEUsIGFzIHBlciBTZWN0aW9uIDkuXG4gICAgICpcbiAgICAgKiBBIFVBQyBNQVkgYWxzbyBmaW5kIGl0IHVzZWZ1bCB0byBhZGQsIGFtb25nIG90aGVycywgU3ViamVjdCAoU2VjdGlvblxuICAgICAqIDIwLjM2KSwgT3JnYW5pemF0aW9uIChTZWN0aW9uIDIwLjI1KSBhbmQgVXNlci1BZ2VudCAoU2VjdGlvbiAyMC40MSlcbiAgICAgKiBoZWFkZXIgZmllbGRzLiAgVGhleSBhbGwgY29udGFpbiBpbmZvcm1hdGlvbiByZWxhdGVkIHRvIHRoZSBJTlZJVEUuXG4gICAgICpcbiAgICAgKiBUaGUgVUFDIE1BWSBjaG9vc2UgdG8gYWRkIGEgbWVzc2FnZSBib2R5IHRvIHRoZSBJTlZJVEUuICBTZWN0aW9uXG4gICAgICogOC4xLjEuMTAgZGVhbHMgd2l0aCBob3cgdG8gY29uc3RydWN0IHRoZSBoZWFkZXIgZmllbGRzIC0tIENvbnRlbnQtXG4gICAgICogVHlwZSBhbW9uZyBvdGhlcnMgLS0gbmVlZGVkIHRvIGRlc2NyaWJlIHRoZSBtZXNzYWdlIGJvZHkuXG4gICAgICpcbiAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjIuMVxuICAgICAqL1xuICAgIHNlbmRJbnZpdGUob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIC8vICAgIFRoZXJlIGFyZSBzcGVjaWFsIHJ1bGVzIGZvciBtZXNzYWdlIGJvZGllcyB0aGF0IGNvbnRhaW4gYSBzZXNzaW9uXG4gICAgICAgIC8vICAgIGRlc2NyaXB0aW9uIC0gdGhlaXIgY29ycmVzcG9uZGluZyBDb250ZW50LURpc3Bvc2l0aW9uIGlzIFwic2Vzc2lvblwiLlxuICAgICAgICAvLyAgICBTSVAgdXNlcyBhbiBvZmZlci9hbnN3ZXIgbW9kZWwgd2hlcmUgb25lIFVBIHNlbmRzIGEgc2Vzc2lvblxuICAgICAgICAvLyAgICBkZXNjcmlwdGlvbiwgY2FsbGVkIHRoZSBvZmZlciwgd2hpY2ggY29udGFpbnMgYSBwcm9wb3NlZCBkZXNjcmlwdGlvblxuICAgICAgICAvLyAgICBvZiB0aGUgc2Vzc2lvbi4gIFRoZSBvZmZlciBpbmRpY2F0ZXMgdGhlIGRlc2lyZWQgY29tbXVuaWNhdGlvbnMgbWVhbnNcbiAgICAgICAgLy8gICAgKGF1ZGlvLCB2aWRlbywgZ2FtZXMpLCBwYXJhbWV0ZXJzIG9mIHRob3NlIG1lYW5zIChzdWNoIGFzIGNvZGVjXG4gICAgICAgIC8vICAgIHR5cGVzKSBhbmQgYWRkcmVzc2VzIGZvciByZWNlaXZpbmcgbWVkaWEgZnJvbSB0aGUgYW5zd2VyZXIuICBUaGVcbiAgICAgICAgLy8gICAgb3RoZXIgVUEgcmVzcG9uZHMgd2l0aCBhbm90aGVyIHNlc3Npb24gZGVzY3JpcHRpb24sIGNhbGxlZCB0aGVcbiAgICAgICAgLy8gICAgYW5zd2VyLCB3aGljaCBpbmRpY2F0ZXMgd2hpY2ggY29tbXVuaWNhdGlvbnMgbWVhbnMgYXJlIGFjY2VwdGVkLCB0aGVcbiAgICAgICAgLy8gICAgcGFyYW1ldGVycyB0aGF0IGFwcGx5IHRvIHRob3NlIG1lYW5zLCBhbmQgYWRkcmVzc2VzIGZvciByZWNlaXZpbmdcbiAgICAgICAgLy8gICAgbWVkaWEgZnJvbSB0aGUgb2ZmZXJlci4gQW4gb2ZmZXIvYW5zd2VyIGV4Y2hhbmdlIGlzIHdpdGhpbiB0aGVcbiAgICAgICAgLy8gICAgY29udGV4dCBvZiBhIGRpYWxvZywgc28gdGhhdCBpZiBhIFNJUCBJTlZJVEUgcmVzdWx0cyBpbiBtdWx0aXBsZVxuICAgICAgICAvLyAgICBkaWFsb2dzLCBlYWNoIGlzIGEgc2VwYXJhdGUgb2ZmZXIvYW5zd2VyIGV4Y2hhbmdlLiAgVGhlIG9mZmVyL2Fuc3dlclxuICAgICAgICAvLyAgICBtb2RlbCBkZWZpbmVzIHJlc3RyaWN0aW9ucyBvbiB3aGVuIG9mZmVycyBhbmQgYW5zd2VycyBjYW4gYmUgbWFkZVxuICAgICAgICAvLyAgICAoZm9yIGV4YW1wbGUsIHlvdSBjYW5ub3QgbWFrZSBhIG5ldyBvZmZlciB3aGlsZSBvbmUgaXMgaW4gcHJvZ3Jlc3MpLlxuICAgICAgICAvLyAgICBUaGlzIHJlc3VsdHMgaW4gcmVzdHJpY3Rpb25zIG9uIHdoZXJlIHRoZSBvZmZlcnMgYW5kIGFuc3dlcnMgY2FuXG4gICAgICAgIC8vICAgIGFwcGVhciBpbiBTSVAgbWVzc2FnZXMuICBJbiB0aGlzIHNwZWNpZmljYXRpb24sIG9mZmVycyBhbmQgYW5zd2Vyc1xuICAgICAgICAvLyAgICBjYW4gb25seSBhcHBlYXIgaW4gSU5WSVRFIHJlcXVlc3RzIGFuZCByZXNwb25zZXMsIGFuZCBBQ0suICBUaGUgdXNhZ2VcbiAgICAgICAgLy8gICAgb2Ygb2ZmZXJzIGFuZCBhbnN3ZXJzIGlzIGZ1cnRoZXIgcmVzdHJpY3RlZC4gIEZvciB0aGUgaW5pdGlhbCBJTlZJVEVcbiAgICAgICAgLy8gICAgdHJhbnNhY3Rpb24sIHRoZSBydWxlcyBhcmU6XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgIG8gIFRoZSBpbml0aWFsIG9mZmVyIE1VU1QgYmUgaW4gZWl0aGVyIGFuIElOVklURSBvciwgaWYgbm90IHRoZXJlLFxuICAgICAgICAvLyAgICAgICAgICBpbiB0aGUgZmlyc3QgcmVsaWFibGUgbm9uLWZhaWx1cmUgbWVzc2FnZSBmcm9tIHRoZSBVQVMgYmFjayB0b1xuICAgICAgICAvLyAgICAgICAgICB0aGUgVUFDLiAgSW4gdGhpcyBzcGVjaWZpY2F0aW9uLCB0aGF0IGlzIHRoZSBmaW5hbCAyeHhcbiAgICAgICAgLy8gICAgICAgICAgcmVzcG9uc2UuXG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgIG8gIElmIHRoZSBpbml0aWFsIG9mZmVyIGlzIGluIGFuIElOVklURSwgdGhlIGFuc3dlciBNVVNUIGJlIGluIGFcbiAgICAgICAgLy8gICAgICAgICAgcmVsaWFibGUgbm9uLWZhaWx1cmUgbWVzc2FnZSBmcm9tIFVBUyBiYWNrIHRvIFVBQyB3aGljaCBpc1xuICAgICAgICAvLyAgICAgICAgICBjb3JyZWxhdGVkIHRvIHRoYXQgSU5WSVRFLiAgRm9yIHRoaXMgc3BlY2lmaWNhdGlvbiwgdGhhdCBpc1xuICAgICAgICAvLyAgICAgICAgICBvbmx5IHRoZSBmaW5hbCAyeHggcmVzcG9uc2UgdG8gdGhhdCBJTlZJVEUuICBUaGF0IHNhbWUgZXhhY3RcbiAgICAgICAgLy8gICAgICAgICAgYW5zd2VyIE1BWSBhbHNvIGJlIHBsYWNlZCBpbiBhbnkgcHJvdmlzaW9uYWwgcmVzcG9uc2VzIHNlbnRcbiAgICAgICAgLy8gICAgICAgICAgcHJpb3IgdG8gdGhlIGFuc3dlci4gIFRoZSBVQUMgTVVTVCB0cmVhdCB0aGUgZmlyc3Qgc2Vzc2lvblxuICAgICAgICAvLyAgICAgICAgICBkZXNjcmlwdGlvbiBpdCByZWNlaXZlcyBhcyB0aGUgYW5zd2VyLCBhbmQgTVVTVCBpZ25vcmUgYW55XG4gICAgICAgIC8vICAgICAgICAgIHNlc3Npb24gZGVzY3JpcHRpb25zIGluIHN1YnNlcXVlbnQgcmVzcG9uc2VzIHRvIHRoZSBpbml0aWFsXG4gICAgICAgIC8vICAgICAgICAgIElOVklURS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgbyAgSWYgdGhlIGluaXRpYWwgb2ZmZXIgaXMgaW4gdGhlIGZpcnN0IHJlbGlhYmxlIG5vbi1mYWlsdXJlXG4gICAgICAgIC8vICAgICAgICAgIG1lc3NhZ2UgZnJvbSB0aGUgVUFTIGJhY2sgdG8gVUFDLCB0aGUgYW5zd2VyIE1VU1QgYmUgaW4gdGhlXG4gICAgICAgIC8vICAgICAgICAgIGFja25vd2xlZGdlbWVudCBmb3IgdGhhdCBtZXNzYWdlIChpbiB0aGlzIHNwZWNpZmljYXRpb24sIEFDS1xuICAgICAgICAvLyAgICAgICAgICBmb3IgYSAyeHggcmVzcG9uc2UpLlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICBvICBBZnRlciBoYXZpbmcgc2VudCBvciByZWNlaXZlZCBhbiBhbnN3ZXIgdG8gdGhlIGZpcnN0IG9mZmVyLCB0aGVcbiAgICAgICAgLy8gICAgICAgICAgVUFDIE1BWSBnZW5lcmF0ZSBzdWJzZXF1ZW50IG9mZmVycyBpbiByZXF1ZXN0cyBiYXNlZCBvbiBydWxlc1xuICAgICAgICAvLyAgICAgICAgICBzcGVjaWZpZWQgZm9yIHRoYXQgbWV0aG9kLCBidXQgb25seSBpZiBpdCBoYXMgcmVjZWl2ZWQgYW5zd2Vyc1xuICAgICAgICAvLyAgICAgICAgICB0byBhbnkgcHJldmlvdXMgb2ZmZXJzLCBhbmQgaGFzIG5vdCBzZW50IGFueSBvZmZlcnMgdG8gd2hpY2ggaXRcbiAgICAgICAgLy8gICAgICAgICAgaGFzbid0IGdvdHRlbiBhbiBhbnN3ZXIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgIG8gIE9uY2UgdGhlIFVBUyBoYXMgc2VudCBvciByZWNlaXZlZCBhbiBhbnN3ZXIgdG8gdGhlIGluaXRpYWxcbiAgICAgICAgLy8gICAgICAgICAgb2ZmZXIsIGl0IE1VU1QgTk9UIGdlbmVyYXRlIHN1YnNlcXVlbnQgb2ZmZXJzIGluIGFueSByZXNwb25zZXNcbiAgICAgICAgLy8gICAgICAgICAgdG8gdGhlIGluaXRpYWwgSU5WSVRFLiAgVGhpcyBtZWFucyB0aGF0IGEgVUFTIGJhc2VkIG9uIHRoaXNcbiAgICAgICAgLy8gICAgICAgICAgc3BlY2lmaWNhdGlvbiBhbG9uZSBjYW4gbmV2ZXIgZ2VuZXJhdGUgc3Vic2VxdWVudCBvZmZlcnMgdW50aWxcbiAgICAgICAgLy8gICAgICAgICAgY29tcGxldGlvbiBvZiB0aGUgaW5pdGlhbCB0cmFuc2FjdGlvbi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMy4yLjFcbiAgICAgICAgLy8gNSBUaGUgT2ZmZXIvQW5zd2VyIE1vZGVsIGFuZCBQUkFDS1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICBSRkMgMzI2MSBkZXNjcmliZXMgZ3VpZGVsaW5lcyBmb3IgdGhlIHNldHMgb2YgbWVzc2FnZXMgaW4gd2hpY2hcbiAgICAgICAgLy8gICAgb2ZmZXJzIGFuZCBhbnN3ZXJzIFszXSBjYW4gYXBwZWFyLiAgQmFzZWQgb24gdGhvc2UgZ3VpZGVsaW5lcywgdGhpc1xuICAgICAgICAvLyAgICBleHRlbnNpb24gcHJvdmlkZXMgYWRkaXRpb25hbCBvcHBvcnR1bml0aWVzIGZvciBvZmZlci9hbnN3ZXJcbiAgICAgICAgLy8gICAgZXhjaGFuZ2VzLlxuICAgICAgICAvLyAgICBJZiB0aGUgSU5WSVRFIGNvbnRhaW5lZCBhbiBvZmZlciwgdGhlIFVBUyBNQVkgZ2VuZXJhdGUgYW4gYW5zd2VyIGluIGFcbiAgICAgICAgLy8gICAgcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2UgKGFzc3VtaW5nIHRoZXNlIGFyZSBzdXBwb3J0ZWQgYnkgdGhlXG4gICAgICAgIC8vICAgIFVBQykuICBUaGF0IHJlc3VsdHMgaW4gdGhlIGVzdGFibGlzaG1lbnQgb2YgdGhlIHNlc3Npb24gYmVmb3JlXG4gICAgICAgIC8vICAgIGNvbXBsZXRpb24gb2YgdGhlIGNhbGwuICBTaW1pbGFybHksIGlmIGEgcmVsaWFibGUgcHJvdmlzaW9uYWxcbiAgICAgICAgLy8gICAgcmVzcG9uc2UgaXMgdGhlIGZpcnN0IHJlbGlhYmxlIG1lc3NhZ2Ugc2VudCBiYWNrIHRvIHRoZSBVQUMsIGFuZCB0aGVcbiAgICAgICAgLy8gICAgSU5WSVRFIGRpZCBub3QgY29udGFpbiBhbiBvZmZlciwgb25lIE1VU1QgYXBwZWFyIGluIHRoYXQgcmVsaWFibGVcbiAgICAgICAgLy8gICAgcHJvdmlzaW9uYWwgcmVzcG9uc2UuXG4gICAgICAgIC8vICAgIElmIHRoZSBVQUMgcmVjZWl2ZXMgYSByZWxpYWJsZSBwcm92aXNpb25hbCByZXNwb25zZSB3aXRoIGFuIG9mZmVyXG4gICAgICAgIC8vICAgICh0aGlzIHdvdWxkIG9jY3VyIGlmIHRoZSBVQUMgc2VudCBhbiBJTlZJVEUgd2l0aG91dCBhbiBvZmZlciwgaW5cbiAgICAgICAgLy8gICAgd2hpY2ggY2FzZSB0aGUgZmlyc3QgcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2Ugd2lsbCBjb250YWluIHRoZVxuICAgICAgICAvLyAgICBvZmZlciksIGl0IE1VU1QgZ2VuZXJhdGUgYW4gYW5zd2VyIGluIHRoZSBQUkFDSy4gIElmIHRoZSBVQUMgcmVjZWl2ZXNcbiAgICAgICAgLy8gICAgYSByZWxpYWJsZSBwcm92aXNpb25hbCByZXNwb25zZSB3aXRoIGFuIGFuc3dlciwgaXQgTUFZIGdlbmVyYXRlIGFuXG4gICAgICAgIC8vICAgIGFkZGl0aW9uYWwgb2ZmZXIgaW4gdGhlIFBSQUNLLiAgSWYgdGhlIFVBUyByZWNlaXZlcyBhIFBSQUNLIHdpdGggYW5cbiAgICAgICAgLy8gICAgb2ZmZXIsIGl0IE1VU1QgcGxhY2UgdGhlIGFuc3dlciBpbiB0aGUgMnh4IHRvIHRoZSBQUkFDSy5cbiAgICAgICAgLy8gICAgT25jZSBhbiBhbnN3ZXIgaGFzIGJlZW4gc2VudCBvciByZWNlaXZlZCwgdGhlIFVBIFNIT1VMRCBlc3RhYmxpc2ggdGhlXG4gICAgICAgIC8vICAgIHNlc3Npb24gYmFzZWQgb24gdGhlIHBhcmFtZXRlcnMgb2YgdGhlIG9mZmVyIGFuZCBhbnN3ZXIsIGV2ZW4gaWYgdGhlXG4gICAgICAgIC8vICAgIG9yaWdpbmFsIElOVklURSBpdHNlbGYgaGFzIG5vdCBiZWVuIHJlc3BvbmRlZCB0by5cbiAgICAgICAgLy8gICAgSWYgdGhlIFVBUyBoYWQgcGxhY2VkIGEgc2Vzc2lvbiBkZXNjcmlwdGlvbiBpbiBhbnkgcmVsaWFibGVcbiAgICAgICAgLy8gICAgcHJvdmlzaW9uYWwgcmVzcG9uc2UgdGhhdCBpcyB1bmFja25vd2xlZGdlZCB3aGVuIHRoZSBJTlZJVEUgaXNcbiAgICAgICAgLy8gICAgYWNjZXB0ZWQsIHRoZSBVQVMgTVVTVCBkZWxheSBzZW5kaW5nIHRoZSAyeHggdW50aWwgdGhlIHByb3Zpc2lvbmFsXG4gICAgICAgIC8vICAgIHJlc3BvbnNlIGlzIGFja25vd2xlZGdlZC4gIE90aGVyd2lzZSwgdGhlIHJlbGlhYmlsaXR5IG9mIHRoZSAxeHhcbiAgICAgICAgLy8gICAgY2Fubm90IGJlIGd1YXJhbnRlZWQsIGFuZCByZWxpYWJpbGl0eSBpcyBuZWVkZWQgZm9yIHByb3BlciBvcGVyYXRpb25cbiAgICAgICAgLy8gICAgb2YgdGhlIG9mZmVyL2Fuc3dlciBleGNoYW5nZS5cbiAgICAgICAgLy8gICAgQWxsIHVzZXIgYWdlbnRzIHRoYXQgc3VwcG9ydCB0aGlzIGV4dGVuc2lvbiBNVVNUIHN1cHBvcnQgYWxsXG4gICAgICAgIC8vICAgIG9mZmVyL2Fuc3dlciBleGNoYW5nZXMgdGhhdCBhcmUgcG9zc2libGUgYmFzZWQgb24gdGhlIHJ1bGVzIGluXG4gICAgICAgIC8vICAgIFNlY3Rpb24gMTMuMiBvZiBSRkMgMzI2MSwgYmFzZWQgb24gdGhlIGV4aXN0ZW5jZSBvZiBJTlZJVEUgYW5kIFBSQUNLXG4gICAgICAgIC8vICAgIGFzIHJlcXVlc3RzLCBhbmQgMnh4IGFuZCByZWxpYWJsZSAxeHggYXMgbm9uLWZhaWx1cmUgcmVsaWFibGVcbiAgICAgICAgLy8gICAgcmVzcG9uc2VzLlxuICAgICAgICAvL1xuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MiNzZWN0aW9uLTVcbiAgICAgICAgLy8vL1xuICAgICAgICAvLyBUaGUgT2ZmZXIvQW5zd2VyIE1vZGVsIEltcGxlbWVudGF0aW9uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZSBvZmZlci9hbnN3ZXIgbW9kZWwgaXMgc3RyYWlnaHQgZm9yd2FyZCwgYnV0IG9uZSBNVVNUIFJFQUQgdGhlIHNwZWNpZmljYXRpb25zLi4uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIDEzLjIuMSBDcmVhdGluZyB0aGUgSW5pdGlhbCBJTlZJVEUgKHBhcmFncmFwaCA4IGluIHBhcnRpY3VsYXIpXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTMuMi4xXG4gICAgICAgIC8vXG4gICAgICAgIC8vIDUgVGhlIE9mZmVyL0Fuc3dlciBNb2RlbCBhbmQgUFJBQ0tcbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjIjc2VjdGlvbi01XG4gICAgICAgIC8vXG4gICAgICAgIC8vIFNlc3Npb24gSW5pdGlhdGlvbiBQcm90b2NvbCAoU0lQKSBVc2FnZSBvZiB0aGUgT2ZmZXIvQW5zd2VyIE1vZGVsXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MzM3XG4gICAgICAgIC8vLy9cbiAgICAgICAgLy8vL1xuICAgICAgICAvLyBUT0RPOiBUaGUgT2ZmZXIvQW5zd2VyIE1vZGVsIEltcGxlbWVudGF0aW9uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEN1cnJlbnRseSBpZiBgZWFybHlNZWRpYWAgaXMgZW5hYmxlZCBhbmQgdGhlIElOVklURSByZXF1ZXN0IGZvcmtzLFxuICAgICAgICAvLyB0aGUgc2Vzc2lvbiBpcyB0ZXJtaW5hdGVkIGlmIHRoZSBlYXJseSBkaWFsb2cgZG9lcyBub3QgbWF0Y2ggdGhlXG4gICAgICAgIC8vIGNvbmZpcm1lZCBkaWFsb2cuIFRoaXMgcmVzdHJpY3Rpb24gbWFrZSBzZW5zZSBpbiBhIFdlYlJUQyBlbnZpcm9ubWVudCxcbiAgICAgICAgLy8gYnV0IHRoZXJlIGFyZSBvdGhlciBlbnZpcm9ubWVudHMgd2hlcmUgdGhpcyByZXN0cmljdGlvbiBkb2VzIG5vdCBob2xkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBTbyB3aGlsZSB3ZSBjdXJyZW50bHkgY2Fubm90IG1ha2UgdGhlIG9mZmVyIGluIElOVklURStmb3JraW5nK3dlYnJ0Y1xuICAgICAgICAvLyBjYXNlIHdvcmssIHdlIHByb3Bvc2UgZG9pbmcgdGhlIGZvbGxvd2luZy4uLlxuICAgICAgICAvL1xuICAgICAgICAvLyBPUFRJT04gMVxuICAgICAgICAvLyAtIGFkZCBhIGBlYXJseU1lZGlhRm9ya2luZ2Agb3B0aW9uIGFuZFxuICAgICAgICAvLyAtIHJlcXVpcmUgU0RILnNldERlc2NyaXB0aW9uKCkgdG8gYmUgY2FsbGFibGUgbXVsdGlwbGUgdGltZXMuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIE9QVElPTiAyXG4gICAgICAgIC8vIDEpIG1vZGlmeSBTREggRmFjdG9yeSB0byBwcm92aWRlIGFuIGluaXRpYWwgb2ZmZXIgd2l0aG91dCBnaXZpbmcgdXMgdGhlIFNESCwgYW5kIHRoZW4uLi5cbiAgICAgICAgLy8gMikgc3RpY2sgdGhhdCBvZmZlciBpbiB0aGUgaW5pdGlhbCBJTlZJVEUsIGFuZCB3aGVuIDE4MyB3aXRoIGluaXRpYWwgYW5zd2VyIGlzIHJlY2VpdmVkLi4uXG4gICAgICAgIC8vIDMpIGFzayBTREggRmFjdG9yeSBpZiBpdCBzdXBwb3J0cyBcImVhcmx5UmVtb3RlQW5zd2VyXCJcbiAgICAgICAgLy8gICBhKSBpZiB0cnVlLCBhc2sgU0RIIEZhY3RvcnkgdG8gY3JlYXRlU0RIKGxvY2FsT2ZmZXIpLnRoZW4oKHNkaCkgPT4gc2RoLnNldERlc2NyaXB0aW9uKHJlbW90ZUFuc3dlcilcbiAgICAgICAgLy8gICBiKSBpZiBmYWxzZSwgZGVmZXIgZ2V0dGluZyBhIFNESCB1bnRpbCAyeHggcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgICAgICAgLy9cbiAgICAgICAgLy8gT3VyIHN1cHBsaWVkIFdlYlJUQyBTREggd2lsbCBkZWZhdWx0IHRvIGJlaGF2aW9yIDNiIHdoaWNoIHdvcmtzIGluIGZvcmtpbmcgZW52aXJvbm1lbnQgKHdpdGhvdXQpXG4gICAgICAgIC8vIGVhcmx5IG1lZGlhIGlmIGluaXRpYWwgb2ZmZXIgaXMgaW4gdGhlIElOVklURSkuIFdlIHdpbGwsIGhvd2V2ZXIsIHByb3ZpZGUgYW4gXCJpbnZpdGVXaWxsTm90Rm9ya1wiXG4gICAgICAgIC8vIG9wdGlvbiB3aGljaCBpZiBzZXQgdG8gXCJ0cnVlXCIgd2lsbCBoYXZlIG91ciBzdXBwbGllZCBXZWJSVEMgU0RIIGJlaGF2ZSBpbiB0aGUgM2EgbWFubmVyLlxuICAgICAgICAvLyBUaGF0IHdpbGwgcmVzdWx0IGluXG4gICAgICAgIC8vICAtIGVhcmx5IG1lZGlhIHdvcmtpbmcgd2l0aCBpbml0aWFsIG9mZmVyIGluIHRoZSBJTlZJVEUsIGFuZC4uLlxuICAgICAgICAvLyAgLSBpZiB0aGUgSU5WSVRFIGZvcmtzLCB0aGUgc2Vzc2lvbiB0ZXJtaW5hdGluZyB3aXRoIGFuIEVSUk9SIHRoYXQgcmVhZHMgbGlrZVxuICAgICAgICAvLyAgICBcIllvdSBzZXQgJ2ludml0ZVdpbGxOb3RGb3JrJyB0byB0cnVlIGJ1dCB0aGUgSU5WSVRFIGZvcmtlZC4gWW91IGNhbid0IGVhdCB5b3VyIGNha2UsIGFuZCBoYXZlIGl0IHRvby5cIlxuICAgICAgICAvLyAgLSBmdXJ0aGVybW9yZSwgd2UgYWNjZXB0IHRoYXQgdXNlcnMgd2lsbCByZXBvcnQgdGhhdCBlcnJvciB0byB1cyBhcyBcImJ1Z1wiIHJlZ2FyZGxlc3NcbiAgICAgICAgLy9cbiAgICAgICAgLy8gU28sIFNESCBGYWN0b3J5IGlzIGdvaW5nIHRvIGVuZCB1cCB3aXRoIGEgbmV3IGludGVyZmFjZSBhbG9uZyB0aGUgbGluZXMgb2YuLi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gaW50ZXJmYWNlIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5IHtcbiAgICAgICAgLy8gICBtYWtlTG9jYWxPZmZlcigpOiBQcm9taXNlPENvbnRlbnRUeXBlQW5kQm9keT47XG4gICAgICAgIC8vICAgbWFrZVNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoXG4gICAgICAgIC8vICAgICBpbml0aWFsT2ZmZXI6IENvbnRlbnRUeXBlQW5kQm9keSwgb2ZmZXJUeXBlOiBcImxvY2FsXCIgfCBcInJlbW90ZVwiXG4gICAgICAgIC8vICAgKTogUHJvbWlzZTxTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyPjtcbiAgICAgICAgLy8gICBzdXBwb3J0c0Vhcmx5UmVtb3RlQW5zd2VyOiBib29sZWFuO1xuICAgICAgICAvLyAgIHN1cHBvcnRzQ29udGVudFR5cGUoY29udGVudFR5cGU6IHN0cmluZyk6IGJvb2xlYW47XG4gICAgICAgIC8vICAgZ2V0RGVzY3JpcHRpb24oZGVzY3JpcHRpb246IENvbnRlbnRUeXBlQW5kQm9keSk6IFByb21pc2U8Q29udGVudFR5cGVBbmRCb2R5PlxuICAgICAgICAvLyAgIHNldERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uOiBDb250ZW50VHlwZUFuZEJvZHkpOiBQcm9taXNlPHZvaWQ+XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8vL1xuICAgICAgICAvLyBTZW5kIHRoZSBJTlZJVEUgcmVxdWVzdC5cbiAgICAgICAgdGhpcy5vdXRnb2luZ0ludml0ZVJlcXVlc3QgPSB0aGlzLnVzZXJBZ2VudC51c2VyQWdlbnRDb3JlLmludml0ZSh0aGlzLm91dGdvaW5nUmVxdWVzdE1lc3NhZ2UsIHtcbiAgICAgICAgICAgIG9uQWNjZXB0OiAoaW52aXRlUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBPdXIgdHJhbnNhY3Rpb24gbGF5ZXIgaXMgXCJub24tc3RhbmRhcmRcIiBpbiB0aGF0IGl0IHdpbGwgb25seVxuICAgICAgICAgICAgICAgIC8vIHBhc3MgdXMgYSAyeHggcmVzcG9uc2Ugb25jZSBwZXIgYnJhbmNoLCBzbyB0aGVyZSBpcyBubyBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gd29ycnkgYWJvdXQgZGVhbGluZyB3aXRoIDJ4eCByZXRyYW5zbWlzc2lvbnMuIEhvd2V2ZXIsIHdlIGNhblxuICAgICAgICAgICAgICAgIC8vIGFuZCBkbyBzdGlsbCBnZXQgMnh4IHJlc3BvbnNlcyBmb3IgbXVsdGlwbGUgYnJhbmNoZXMgKHdoZW4gYW5cbiAgICAgICAgICAgICAgICAvLyBJTlZJVEUgaXMgZm9ya2VkKSB3aGljaCBtYXkgY3JlYXRlIG11bHRpcGxlIGNvbmZpcm1lZCBkaWFsb2dzLlxuICAgICAgICAgICAgICAgIC8vIEhlcmVpbiB3ZSBhcmUgYWNraW5nIGFuZCBzZW5kaW5nIGEgYnllIHRvIGFueSBjb25maXJtZWQgZGlhbG9nc1xuICAgICAgICAgICAgICAgIC8vIHdoaWNoIGFycml2ZSBiZXlvbmQgdGhlIGZpcnN0IG9uZS4gVGhpcyBpcyB0aGUgZGVzaXJlZCBiZWhhdmlvclxuICAgICAgICAgICAgICAgIC8vIGZvciBtb3N0IGFwcGxpY2F0aW9ucyAoYnV0IGNlcnRhaW5seSBub3QgYWxsKS5cbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IHJlY2VpdmVkIGEgY29uZmlybWVkIGRpYWxvZywgYWNrICYgYnllIHRoaXMgYWRkaXRpb25hbCBjb25maXJtZWQgc2Vzc2lvbi5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaWFsb2cpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiQWRkaXRpb25hbCBjb25maXJtZWQgZGlhbG9nLCBzZW5kaW5nIEFDSyBhbmQgQllFXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFja0FuZEJ5ZShpbnZpdGVSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvIE5PVCB0cmFuc2l0aW9uIHN0YXRlIGluIHRoaXMgY2FzZSAodGhpcyBpcyBhbiBcImV4dHJhXCIgZGlhbG9nKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIHJlcXVlc3RlZCBjYW5jZWxsYXRpb24sIGFjayAmIGJ5ZSB0aGlzIHNlc3Npb24uXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJDYW5jZWxlZCBzZXNzaW9uIGFjY2VwdGVkLCBzZW5kaW5nIEFDSyBhbmQgQllFXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFja0FuZEJ5ZShpbnZpdGVSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVJlZmVyZXIoaW52aXRlUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMub25BY2NlcHQoaW52aXRlUmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlRWFybHlNZWRpYSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZUVhcmx5TWVkaWEoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZSAmJiBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUub25BY2NlcHQoaW52aXRlUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Qcm9ncmVzczogKGludml0ZVJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgcmVxdWVzdGVkIGNhbmNlbGxhdGlvbiwgaWdub3JlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVJlZmVyZXIoaW52aXRlUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Qcm9ncmVzcyhpbnZpdGVSZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlRWFybHlNZWRpYSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVxdWVzdERlbGVnYXRlICYmIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUHJvZ3Jlc3MoaW52aXRlUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25SZWRpcmVjdDogKGludml0ZVJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlSZWZlcmVyKGludml0ZVJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uUmVkaXJlY3QoaW52aXRlUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZSAmJiBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZS5vblJlZGlyZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUmVkaXJlY3QoaW52aXRlUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblJlamVjdDogKGludml0ZVJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwib3V0Z29pbmdJbnZpdGVSZXF1ZXN0IG9uUmVqZWN0XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5UmVmZXJlcihpbnZpdGVSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVxdWVzdERlbGVnYXRlICYmIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0KGludml0ZVJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vblJlamVjdChpbnZpdGVSZXNwb25zZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Ucnlpbmc6IChpbnZpdGVSZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5UmVmZXJlcihpbnZpdGVSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vblRyeWluZyhpbnZpdGVSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVxdWVzdERlbGVnYXRlICYmIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uVHJ5aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uVHJ5aW5nKGludml0ZVJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRnb2luZ0ludml0ZVJlcXVlc3Q7XG4gICAgfVxuICAgIGRpc3Bvc2VFYXJseU1lZGlhKCkge1xuICAgICAgICB0aGlzLmVhcmx5TWVkaWFTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVycy5mb3JFYWNoKChzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVhcmx5TWVkaWFTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVycy5jbGVhcigpO1xuICAgIH1cbiAgICBub3RpZnlSZWZlcmVyKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghdGhpcy5fcmVmZXJyZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISh0aGlzLl9yZWZlcnJlZCBpbnN0YW5jZW9mIFNlc3Npb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWZlcnJlZCBzZXNzaW9uIG5vdCBpbnN0YW5jZSBvZiBzZXNzaW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fcmVmZXJyZWQuZGlhbG9nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXNwb25zZS5tZXNzYWdlLnN0YXR1c0NvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0YXR1cyBjb2RlIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXNwb25zZS5tZXNzYWdlLnJlYXNvblBocmFzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVhc29uIHBocmFzZSB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSByZXNwb25zZS5tZXNzYWdlLnN0YXR1c0NvZGU7XG4gICAgICAgIGNvbnN0IHJlYXNvblBocmFzZSA9IHJlc3BvbnNlLm1lc3NhZ2UucmVhc29uUGhyYXNlO1xuICAgICAgICBjb25zdCBib2R5ID0gYFNJUC8yLjAgJHtzdGF0dXNDb2RlfSAke3JlYXNvblBocmFzZX1gLnRyaW0oKTtcbiAgICAgICAgY29uc3Qgb3V0Z29pbmdOb3RpZnlSZXF1ZXN0ID0gdGhpcy5fcmVmZXJyZWQuZGlhbG9nLm5vdGlmeSh1bmRlZmluZWQsIHtcbiAgICAgICAgICAgIGV4dHJhSGVhZGVyczogW1wiRXZlbnQ6IHJlZmVyXCIsIFwiU3Vic2NyaXB0aW9uLVN0YXRlOiB0ZXJtaW5hdGVkXCJdLFxuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbjogXCJyZW5kZXJcIixcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogXCJtZXNzYWdlL3NpcGZyYWdcIixcbiAgICAgICAgICAgICAgICBjb250ZW50OiBib2R5XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUaGUgaW1wbGljaXQgc3Vic2NyaXB0aW9uIGNyZWF0ZWQgYnkgYSBSRUZFUiBpcyB0aGUgc2FtZSBhcyBhXG4gICAgICAgIC8vIHN1YnNjcmlwdGlvbiBjcmVhdGVkIHdpdGggYSBTVUJTQ1JJQkUgcmVxdWVzdC4gIFRoZSBhZ2VudCBpc3N1aW5nIHRoZVxuICAgICAgICAvLyBSRUZFUiBjYW4gdGVybWluYXRlIHRoaXMgc3Vic2NyaXB0aW9uIHByZW1hdHVyZWx5IGJ5IHVuc3Vic2NyaWJpbmdcbiAgICAgICAgLy8gdXNpbmcgdGhlIG1lY2hhbmlzbXMgZGVzY3JpYmVkIGluIFsyXS4gIFRlcm1pbmF0aW5nIGEgc3Vic2NyaXB0aW9uLFxuICAgICAgICAvLyBlaXRoZXIgYnkgZXhwbGljaXRseSB1bnN1YnNjcmliaW5nIG9yIHJlamVjdGluZyBOT1RJRlksIGlzIG5vdCBhblxuICAgICAgICAvLyBpbmRpY2F0aW9uIHRoYXQgdGhlIHJlZmVyZW5jZWQgcmVxdWVzdCBzaG91bGQgYmUgd2l0aGRyYXduIG9yXG4gICAgICAgIC8vIGFiYW5kb25lZC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM1MTUjc2VjdGlvbi0yLjQuNFxuICAgICAgICAvLyBGSVhNRTogVE9ETzogVGhpcyBzaG91bGQgYmUgZG9uZSBpbiBhIHN1YnNjcmliZSBkaWFsb2cgdG8gc2F0aXNmeSB0aGUgYWJvdmUuXG4gICAgICAgIC8vIElmIHRoZSBub3RpZnkgaXMgcmVqZWN0ZWQsIHN0b3Agc2VuZGluZyBOT1RJRlkgcmVxdWVzdHMuXG4gICAgICAgIG91dGdvaW5nTm90aWZ5UmVxdWVzdC5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgICAgIG9uUmVqZWN0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVmZXJyZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBmaW5hbCByZXNwb25zZSB0byBpbml0aWFsIElOVklURS5cbiAgICAgKiBAcGFyYW0gaW52aXRlUmVzcG9uc2UgLSAyeHggcmVzcG9uc2UuXG4gICAgICovXG4gICAgb25BY2NlcHQoaW52aXRlUmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiSW52aXRlci5vbkFjY2VwdFwiKTtcbiAgICAgICAgLy8gdmFsaWRhdGUgc3RhdGVcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hpbmcpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBBY2NlcHQgcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVzcG9uc2VgKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYEludmFsaWQgc2Vzc2lvbiBzdGF0ZSAke3RoaXMuc3RhdGV9YCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gaW52aXRlUmVzcG9uc2UubWVzc2FnZTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGludml0ZVJlc3BvbnNlLnNlc3Npb247XG4gICAgICAgIC8vIFBvcnRlZCBiZWhhdmlvci5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmhhc0hlYWRlcihcIlAtQXNzZXJ0ZWQtSWRlbnRpdHlcIikpIHtcbiAgICAgICAgICAgIHRoaXMuX2Fzc2VydGVkSWRlbnRpdHkgPSBHcmFtbWFyLm5hbWVBZGRySGVhZGVyUGFyc2UocmVzcG9uc2UuZ2V0SGVhZGVyKFwiUC1Bc3NlcnRlZC1JZGVudGl0eVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgaGF2ZSBhIGNvbmZpcm1lZCBkaWFsb2cuXG4gICAgICAgIHNlc3Npb24uZGVsZWdhdGUgPSB7XG4gICAgICAgICAgICBvbkFjazogKGFja1JlcXVlc3QpID0+IHRoaXMub25BY2tSZXF1ZXN0KGFja1JlcXVlc3QpLFxuICAgICAgICAgICAgb25CeWU6IChieWVSZXF1ZXN0KSA9PiB0aGlzLm9uQnllUmVxdWVzdChieWVSZXF1ZXN0KSxcbiAgICAgICAgICAgIG9uSW5mbzogKGluZm9SZXF1ZXN0KSA9PiB0aGlzLm9uSW5mb1JlcXVlc3QoaW5mb1JlcXVlc3QpLFxuICAgICAgICAgICAgb25JbnZpdGU6IChpbnZpdGVSZXF1ZXN0KSA9PiB0aGlzLm9uSW52aXRlUmVxdWVzdChpbnZpdGVSZXF1ZXN0KSxcbiAgICAgICAgICAgIG9uTWVzc2FnZTogKG1lc3NhZ2VSZXF1ZXN0KSA9PiB0aGlzLm9uTWVzc2FnZVJlcXVlc3QobWVzc2FnZVJlcXVlc3QpLFxuICAgICAgICAgICAgb25Ob3RpZnk6IChub3RpZnlSZXF1ZXN0KSA9PiB0aGlzLm9uTm90aWZ5UmVxdWVzdChub3RpZnlSZXF1ZXN0KSxcbiAgICAgICAgICAgIG9uUHJhY2s6IChwcmFja1JlcXVlc3QpID0+IHRoaXMub25QcmFja1JlcXVlc3QocHJhY2tSZXF1ZXN0KSxcbiAgICAgICAgICAgIG9uUmVmZXI6IChyZWZlclJlcXVlc3QpID0+IHRoaXMub25SZWZlclJlcXVlc3QocmVmZXJSZXF1ZXN0KVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9kaWFsb2cgPSBzZXNzaW9uO1xuICAgICAgICBzd2l0Y2ggKHNlc3Npb24uc2lnbmFsaW5nU3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuSW5pdGlhbDpcbiAgICAgICAgICAgICAgICAvLyBJTlZJVEUgd2l0aG91dCBvZmZlciwgc28gTVVTVCBoYXZlIG9mZmVyIGF0IHRoaXMgcG9pbnQsIHNvIGludmFsaWQgc3RhdGUuXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJSZWNlaXZlZCAyeHggcmVzcG9uc2UgdG8gSU5WSVRFIHdpdGhvdXQgYSBzZXNzaW9uIGRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWNrQW5kQnllKGludml0ZVJlc3BvbnNlLCA0MDAsIFwiTWlzc2luZyBzZXNzaW9uIGRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiQmFkIE1lZGlhIERlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuSGF2ZUxvY2FsT2ZmZXI6XG4gICAgICAgICAgICAgICAgLy8gSU5WSVRFIHdpdGggb2ZmZXIsIHNvIE1VU1QgaGF2ZSBhbnN3ZXIgYXQgdGhpcyBwb2ludCwgc28gaW52YWxpZCBzdGF0ZS5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIlJlY2VpdmVkIDJ4eCByZXNwb25zZSB0byBJTlZJVEUgd2l0aG91dCBhIHNlc3Npb24gZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5hY2tBbmRCeWUoaW52aXRlUmVzcG9uc2UsIDQwMCwgXCJNaXNzaW5nIHNlc3Npb24gZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJCYWQgTWVkaWEgRGVzY3JpcHRpb25cIikpO1xuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXI6IHtcbiAgICAgICAgICAgICAgICAvLyBJTlZJVEUgd2l0aG91dCBvZmZlciwgcmVjZWl2ZWQgb2ZmZXIgaW4gMnh4LCBzbyBNVVNUIHNlbmQgYW5zd2VyIGluIEFDSy5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2RpYWxvZy5vZmZlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNlc3Npb24gb2ZmZXIgdW5kZWZpbmVkIGluIHNpZ25hbGluZyBzdGF0ZSAke3RoaXMuX2RpYWxvZy5zaWduYWxpbmdTdGF0ZX0uYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6IHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyxcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6IHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldE9mZmVyQW5kR2V0QW5zd2VyKHRoaXMuX2RpYWxvZy5vZmZlciwgb3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGJvZHkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW52aXRlUmVzcG9uc2UuYWNrKHsgYm9keSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLkVzdGFibGlzaGVkKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWNrQW5kQnllKGludml0ZVJlc3BvbnNlLCA0ODgsIFwiSW52YWxpZCBzZXNzaW9uIGRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5TdGFibGU6IHtcbiAgICAgICAgICAgICAgICAvLyBJZiBJTlZJVEUgd2l0aG91dCBvZmZlciBhbmQgd2UgaGF2ZSBhbHJlYWR5IGNvbXBsZXRlZCB0aGUgaW5pdGlhbCBleGNoYW5nZS5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lYXJseU1lZGlhU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcnMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2RoID0gdGhpcy5lYXJseU1lZGlhU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcnMuZ2V0KHNlc3Npb24uaWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNkaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIHVuZGVmaW5lZC5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKHNkaCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWFybHlNZWRpYVNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJzLmRlbGV0ZShzZXNzaW9uLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgaW52aXRlUmVzcG9uc2UuYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hlZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSWYgSU5WSVRFIHdpdGggb2ZmZXIgYW5kIHdlIHVzZWQgYW4gXCJlYXJseVwiIGFuc3dlciBpbiBhIHByb3Zpc2lvbmFsIHJlc3BvbnNlIGZvciBtZWRpYVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVhcmx5TWVkaWFEaWFsb2cpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgZWFybHkgbWVkaWEgZGlhbG9nIGRvZXNuJ3QgbWF0Y2ggY29uZmlybWVkIGRpYWxvZywgd2UgbXVzdCB1bmZvcnR1bmF0ZWx5IGZhaWwuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgbGltaXRhdGlvbiBzdGVtcyBmcm9tIGhvdyBXZWJSVEMgY3VycmVudGx5IGltcGxlbWVudHMgaXRzIG9mZmVyL2Fuc3dlciBtb2RlbC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIGRldGFpbHMgZWxzZXdoZXJlLCBidXQgaW4gc2hvcnQgYSBXZWJSVEMgb2ZmZXIgY2Fubm90IGJlIGZvcmtlZC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWFybHlNZWRpYURpYWxvZyAhPT0gc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWFybHlNZWRpYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBcIllvdSBoYXZlIHNldCB0aGUgJ2Vhcmx5TWVkaWEnIG9wdGlvbiB0byAndHJ1ZScgd2hpY2ggcmVxdWlyZXMgdGhhdCB5b3VyIElOVklURSByZXF1ZXN0cyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZG8gbm90IGZvcmsgYW5kIHlldCB0aGlzIElOVklURSByZXF1ZXN0IGRpZCBpbiBmYWN0IGZvcmsuIENvbnNlcXVlbnRpYWxseSBhbmQgbm90IHN1cnByaXNpbmdseSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidGhlIGVuZCBwb2ludCB3aGljaCBhY2NlcHRlZCB0aGUgSU5WSVRFIChjb25maXJtZWQgZGlhbG9nKSBkb2VzIG5vdCBtYXRjaCB0aGUgZW5kIHBvaW50IHdpdGggXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndoaWNoIGVhcmx5IG1lZGlhIGhhcyBiZWVuIHNldHVwIChlYXJseSBkaWFsb2cpIGFuZCB0aHVzIHRoaXMgc2Vzc2lvbiBpcyB1bmFibGUgdG8gcHJvY2VlZC4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkluIGFjY29yZGFuY2Ugd2l0aCB0aGUgU0lQIHNwZWNpZmljYXRpb25zLCB0aGUgU0lQIHNlcnZlcnMgeW91ciBlbmQgcG9pbnQgaXMgY29ubmVjdGVkIHRvIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkZXRlcm1pbmUgaWYgYW4gSU5WSVRFIGZvcmtzIGFuZCB0aGUgZm9ya2luZyBiZWhhdmlvciBvZiB0aG9zZSBzZXJ2ZXJzIGNhbm5vdCBiZSBjb250cm9sbGVkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJieSB0aGlzIGxpYnJhcnkuIElmIHlvdSB3aXNoIHRvIHVzZSBlYXJseSBtZWRpYSB3aXRoIHRoaXMgbGlicmFyeSB5b3UgbXVzdCBjb25maWd1cmUgdGhvc2UgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlcnZlcnMgYWNjb3JkaW5nbHkuIEFsdGVybmF0aXZlbHkgeW91IG1heSBzZXQgdGhlICdlYXJseU1lZGlhJyB0byAnZmFsc2UnIHdoaWNoIHdpbGwgYWxsb3cgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRoaXMgbGlicmFyeSB0byBmdW5jdGlvbiB3aXRoIGFueSBJTlZJVEUgcmVxdWVzdHMgd2hpY2ggZG8gZm9yay5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiRWFybHkgbWVkaWEgZGlhbG9nIGRvZXMgbm90IGVxdWFsIGNvbmZpcm1lZCBkaWFsb2csIHRlcm1pbmF0aW5nIHNlc3Npb25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWNrQW5kQnllKGludml0ZVJlc3BvbnNlLCA0ODgsIFwiTm90IEFjY2VwdGFibGUgSGVyZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHdlIGFyZSBnb29kIHRvIGdvLlxuICAgICAgICAgICAgICAgICAgICBpbnZpdGVSZXNwb25zZS5hY2soKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLkVzdGFibGlzaGVkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiBJTlZJVEUgd2l0aCBvZmZlciBhbmQgd2UgaGF2ZSBiZWVuIHdhaXRpbmcgdGlsbCBub3cgdG8gYXBwbHkgdGhlIGFuc3dlci5cbiAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSBzZXNzaW9uLmFuc3dlcjtcbiAgICAgICAgICAgICAgICBpZiAoIWFuc3dlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbnN3ZXIgaXMgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczogdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzLFxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczogdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0QW5zd2VyKGFuc3dlciwgb3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHNlc3Npb24gaGFzIGNvbXBsZXRlZCBhbiBpbml0aWFsIG9mZmVyL2Fuc3dlciBleGNoYW5nZS4uLlxuICAgICAgICAgICAgICAgICAgICBsZXQgYWNrT3B0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmJvZHkgJiYgdGhpcy5fcmVuZGVydHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNrT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB7IGNvbnRlbnREaXNwb3NpdGlvbjogXCJyZW5kZXJcIiwgY29udGVudFR5cGU6IHRoaXMuX3JlbmRlcnR5cGUsIGNvbnRlbnQ6IHRoaXMuX3JlbmRlcmJvZHkgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbnZpdGVSZXNwb25zZS5hY2soYWNrT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hlZCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2tBbmRCeWUoaW52aXRlUmVzcG9uc2UsIDQ4OCwgXCJOb3QgQWNjZXB0YWJsZSBIZXJlXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5DbG9zZWQ6XG4gICAgICAgICAgICAgICAgLy8gRGlhbG9nIGhhcyB0ZXJtaW5hdGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJUZXJtaW5hdGVkLlwiKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gc2Vzc2lvbiBzaWduYWxpbmcgc3RhdGUuXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwcm92aXNpb25hbCByZXNwb25zZSB0byBpbml0aWFsIElOVklURS5cbiAgICAgKiBAcGFyYW0gaW52aXRlUmVzcG9uc2UgLSAxeHggcmVzcG9uc2UuXG4gICAgICovXG4gICAgb25Qcm9ncmVzcyhpbnZpdGVSZXNwb25zZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIkludml0ZXIub25Qcm9ncmVzcyB0aGlzLnN0YXRlPVwiK3RoaXMuc3RhdGUpO1xuICAgICAgICAvLyB2YWxpZGF0ZSBzdGF0ZVxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGluZykge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYFByb2dyZXNzIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlc3BvbnNlYCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBJbnZhbGlkIHNlc3Npb24gc3RhdGUgJHt0aGlzLnN0YXRlfWApKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMub3V0Z29pbmdJbnZpdGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdXRnb2luZyBJTlZJVEUgcmVxdWVzdCB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gaW52aXRlUmVzcG9uc2UubWVzc2FnZTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGludml0ZVJlc3BvbnNlLnNlc3Npb247XG4gICAgICAgIC8vIFBvcnRlZCAtIFNldCBhc3NlcnRlZElkZW50aXR5LlxuICAgICAgICBpZiAocmVzcG9uc2UuaGFzSGVhZGVyKFwiUC1Bc3NlcnRlZC1JZGVudGl0eVwiKSkge1xuICAgICAgICAgICAgdGhpcy5fYXNzZXJ0ZWRJZGVudGl0eSA9IEdyYW1tYXIubmFtZUFkZHJIZWFkZXJQYXJzZShyZXNwb25zZS5nZXRIZWFkZXIoXCJQLUFzc2VydGVkLUlkZW50aXR5XCIpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBhIHByb3Zpc2lvbmFsIHJlc3BvbnNlIGlzIHJlY2VpdmVkIGZvciBhbiBpbml0aWFsIHJlcXVlc3QsIGFuZFxuICAgICAgICAvLyB0aGF0IHJlc3BvbnNlIGNvbnRhaW5zIGEgUmVxdWlyZSBoZWFkZXIgZmllbGQgY29udGFpbmluZyB0aGUgb3B0aW9uXG4gICAgICAgIC8vIHRhZyAxMDByZWwsIHRoZSByZXNwb25zZSBpcyB0byBiZSBzZW50IHJlbGlhYmx5LiAgSWYgdGhlIHJlc3BvbnNlIGlzXG4gICAgICAgIC8vIGEgMTAwIChUcnlpbmcpIChhcyBvcHBvc2VkIHRvIDEwMSB0byAxOTkpLCB0aGlzIG9wdGlvbiB0YWcgTVVTVCBiZVxuICAgICAgICAvLyBpZ25vcmVkLCBhbmQgdGhlIHByb2NlZHVyZXMgYmVsb3cgTVVTVCBOT1QgYmUgdXNlZC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjIjc2VjdGlvbi00XG4gICAgICAgIGNvbnN0IHJlcXVpcmVIZWFkZXIgPSByZXNwb25zZS5nZXRIZWFkZXIoXCJyZXF1aXJlXCIpO1xuICAgICAgICBjb25zdCByc2VxSGVhZGVyID0gcmVzcG9uc2UuZ2V0SGVhZGVyKFwicnNlcVwiKTtcbiAgICAgICAgY29uc3QgcnNlcSA9IHJlcXVpcmVIZWFkZXIgJiYgcmVxdWlyZUhlYWRlci5pbmNsdWRlcyhcIjEwMHJlbFwiKSAmJiByc2VxSGVhZGVyID8gTnVtYmVyKHJzZXFIZWFkZXIpIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCByZXNwb25zZVJlbGlhYmxlID0gISFyc2VxO1xuICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSBbXTtcbiAgICAgICAgaWYgKHJlc3BvbnNlUmVsaWFibGUpIHtcbiAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKFwiUkFjazogXCIgKyByZXNwb25zZS5nZXRIZWFkZXIoXCJyc2VxXCIpICsgXCIgXCIgKyByZXNwb25zZS5nZXRIZWFkZXIoXCJjc2VxXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhcIkludml0ZXIub25Qcm9ncmVzcyBzZXNzaW9uLnNpZ25hbGluZ1N0YXRlPVwiLHNlc3Npb24uc2lnbmFsaW5nU3RhdGUpO1xuICAgICAgICBzd2l0Y2ggKHNlc3Npb24uc2lnbmFsaW5nU3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuSW5pdGlhbDpcbiAgICAgICAgICAgICAgICAvLyBJTlZJVEUgd2l0aG91dCBvZmZlciBhbmQgc2Vzc2lvbiBzdGlsbCBoYXMgbm8gb2ZmZXIgKGFuZCBubyBhbnN3ZXIpLlxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZVJlbGlhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbWlsYXJseSwgaWYgYSByZWxpYWJsZSBwcm92aXNpb25hbFxuICAgICAgICAgICAgICAgICAgICAvLyByZXNwb25zZSBpcyB0aGUgZmlyc3QgcmVsaWFibGUgbWVzc2FnZSBzZW50IGJhY2sgdG8gdGhlIFVBQywgYW5kIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBJTlZJVEUgZGlkIG5vdCBjb250YWluIGFuIG9mZmVyLCBvbmUgTVVTVCBhcHBlYXIgaW4gdGhhdCByZWxpYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBwcm92aXNpb25hbCByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjIjc2VjdGlvbi01XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJGaXJzdCByZWxpYWJsZSBwcm92aXNpb25hbCByZXNwb25zZSByZWNlaXZlZCBNVVNUIGNvbnRhaW4gYW4gb2ZmZXIgd2hlbiBJTlZJVEUgZG9lcyBub3QgY29udGFpbiBhbiBvZmZlci5cIik7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBLbm93biBwb3B1bGFyIFVBJ3MgY3VycmVudGx5IGVuZCB1cCBoZXJlLi4uXG4gICAgICAgICAgICAgICAgICAgIGludml0ZVJlc3BvbnNlLnByYWNrKHsgZXh0cmFIZWFkZXJzIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICBjYXNlIFNpZ25hbGluZ1N0YXRlLkhhdmVMb2NhbE9mZmVyOlxuICAgICAgICAgICAgICAgIC8vIElOVklURSB3aXRoIG9mZmVyIGFuZCBzZXNzaW9uIG9ubHkgaGFzIHRoYXQgaW5pdGlhbCBsb2NhbCBvZmZlci5cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VSZWxpYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZpdGVSZXNwb25zZS5wcmFjayh7IGV4dHJhSGVhZGVycyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgY2FzZSBTaWduYWxpbmdTdGF0ZS5IYXZlUmVtb3RlT2ZmZXI6XG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZVJlbGlhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBpbml0aWFsIG9mZmVyIE1VU1QgYmUgaW4gZWl0aGVyIGFuIElOVklURSBvciwgaWYgbm90IHRoZXJlLFxuICAgICAgICAgICAgICAgICAgICAvLyBpbiB0aGUgZmlyc3QgcmVsaWFibGUgbm9uLWZhaWx1cmUgbWVzc2FnZSBmcm9tIHRoZSBVQVMgYmFjayB0b1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgVUFDLlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjIuMVxuICAgICAgICAgICAgICAgICAgICAvLyBBY2NvcmRpbmcgdG8gU2VjdGlvbiAxMy4yLjEgb2YgW1JGQzMyNjFdLCAnVGhlIGZpcnN0IHJlbGlhYmxlXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vbi1mYWlsdXJlIG1lc3NhZ2UnIG11c3QgaGF2ZSBhbiBvZmZlciBpZiB0aGVyZSBpcyBubyBvZmZlciBpbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gSU5WSVRFIHJlcXVlc3QuICBUaGlzIG1lYW5zIHRoYXQgdGhlIFVzZXIgQWdlbnQgKFVBKSB0aGF0IHJlY2VpdmVzXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBJTlZJVEUgcmVxdWVzdCB3aXRob3V0IGFuIG9mZmVyIG11c3QgaW5jbHVkZSBhbiBvZmZlciBpbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZmlyc3QgcmVsaWFibGUgcmVzcG9uc2Ugd2l0aCAxMDByZWwgZXh0ZW5zaW9uLiAgSWYgbm8gcmVsaWFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJvdmlzaW9uYWwgcmVzcG9uc2UgaGFzIGJlZW4gc2VudCwgdGhlIFVzZXIgQWdlbnQgU2VydmVyIChVQVMpIG11c3RcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5jbHVkZSBhbiBvZmZlciB3aGVuIHNlbmRpbmcgMnh4IHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjMzNyNzZWN0aW9uLTIuMlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiTm9uLXJlbGlhYmxlIHByb3Zpc2lvbmFsIHJlc3BvbnNlIE1VU1QgTk9UIGNvbnRhaW4gYW4gaW5pdGlhbCBvZmZlciwgZGlzY2FyZGluZyByZXNwb25zZS5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaW5pdGlhbCBvZmZlciBpcyBpbiB0aGUgZmlyc3QgcmVsaWFibGUgbm9uLWZhaWx1cmVcbiAgICAgICAgICAgICAgICAgICAgLy8gbWVzc2FnZSBmcm9tIHRoZSBVQVMgYmFjayB0byBVQUMsIHRoZSBhbnN3ZXIgTVVTVCBiZSBpbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNrbm93bGVkZ2VtZW50IGZvciB0aGF0IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2RoID0gdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeSh0aGlzLCB0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5T3B0aW9ucyB8fCB7fSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoX2EgPSB0aGlzLmRlbGVnYXRlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub25TZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcihzZGgsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWFybHlNZWRpYVNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJzLnNldChzZXNzaW9uLmlkLCBzZGgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2RoXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0RGVzY3JpcHRpb24ocmVzcG9uc2UuYm9keSwgdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucywgdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gc2RoLmdldERlc2NyaXB0aW9uKHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsIHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycykpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGVzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uOiBcInNlc3Npb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogZGVzY3JpcHRpb24uY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZGVzY3JpcHRpb24uYm9keVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludml0ZVJlc3BvbnNlLnByYWNrKHsgZXh0cmFIZWFkZXJzLCBib2R5IH0pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuU3RhYmxlOlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2Vzc2lvbiBoYXMgY29tcGxldGVkIGFuIGluaXRpYWwgb2ZmZXIvYW5zd2VyIGV4Y2hhbmdlLCBzby4uLlxuICAgICAgICAgICAgICAgIC8vIC0gSU5WSVRFIHdpdGggU0RQIGFuZCB0aGlzIHByb3Zpc2lvbmFsIHJlc3BvbnNlIE1BWSBiZSByZWxpYWJsZVxuICAgICAgICAgICAgICAgIC8vIC0gSU5WSVRFIHdpdGhvdXQgU0RQIGFuZCB0aGlzIHByb3Zpc2lvbmFsIHJlc3BvbnNlIE1BWSBiZSByZWxpYWJsZVxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZVJlbGlhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGludml0ZVJlc3BvbnNlLnByYWNrKHsgZXh0cmFIZWFkZXJzIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2lnbmFsaW5nU3RhdGUuU3RhYmxlIHRoaXMuZWFybHlNZWRpYT0nLHRoaXMuZWFybHlNZWRpYSx0aGlzLmVhcmx5TWVkaWFEaWFsb2cpXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWFybHlNZWRpYSAmJiAhdGhpcy5lYXJseU1lZGlhRGlhbG9nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWFybHlNZWRpYURpYWxvZyA9IHNlc3Npb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IHNlc3Npb24uYW5zd2VyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFuc3dlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQW5zd2VyIGlzIHVuZGVmaW5lZC5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6IHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOiB0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aGF0ID0gc2Vzc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NldEFuc3dlciBmb3IgMTAwcmVsJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldEFuc3dlcihhbnN3ZXIsIG9wdGlvbnMpLnRoZW4oKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PTU9PSBzZXRBbnN3ZXIgT0sgdGhhdD0nLHRoYXQsIFwiIHRoaXM9XCIsdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVhcmx5TWVkaWFFc3RhYmxpc2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihTZXNzaW9uU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIGNhc2UgU2lnbmFsaW5nU3RhdGUuQ2xvc2VkOlxuICAgICAgICAgICAgICAgIC8vIERpYWxvZyBoYXMgdGVybWluYXRlZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiVGVybWluYXRlZC5cIikpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHNlc3Npb24gc2lnbmFsaW5nIHN0YXRlLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgZmluYWwgcmVzcG9uc2UgdG8gaW5pdGlhbCBJTlZJVEUuXG4gICAgICogQHBhcmFtIGludml0ZVJlc3BvbnNlIC0gM3h4IHJlc3BvbnNlLlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICBvblJlZGlyZWN0KGludml0ZVJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIkludml0ZXIub25SZWRpcmVjdFwiKTtcbiAgICAgICAgLy8gdmFsaWRhdGUgc3RhdGVcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hpbmcgJiYgdGhpcy5zdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLlRlcm1pbmF0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgUmVkaXJlY3QgcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVzcG9uc2VgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyB0cmFuc2l0aW9uIHN0YXRlXG4gICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGZpbmFsIHJlc3BvbnNlIHRvIGluaXRpYWwgSU5WSVRFLlxuICAgICAqIEBwYXJhbSBpbnZpdGVSZXNwb25zZSAtIDR4eCwgNXh4LCBvciA2eHggcmVzcG9uc2UuXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgIG9uUmVqZWN0KGludml0ZVJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIkludml0ZXIub25SZWplY3RcIik7XG4gICAgICAgIC8vIHZhbGlkYXRlIHN0YXRlXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoaW5nICYmIHRoaXMuc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5UZXJtaW5hdGluZykge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYFJlamVjdCByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXNwb25zZWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRyYW5zaXRpb24gc3RhdGVcbiAgICAgICAgdGhpcy5zdGF0ZVRyYW5zaXRpb24oU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgZmluYWwgcmVzcG9uc2UgdG8gaW5pdGlhbCBJTlZJVEUuXG4gICAgICogQHBhcmFtIGludml0ZVJlc3BvbnNlIC0gMTAwIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICBvblRyeWluZyhpbnZpdGVSZXNwb25zZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJJbnZpdGVyLm9uVHJ5aW5nXCIpO1xuICAgICAgICAvLyB2YWxpZGF0ZSBzdGF0ZVxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGluZykge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYFRyeWluZyByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXNwb25zZWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgRGlnZXN0QXV0aGVudGljYXRpb24sIEdyYW1tYXIsIEluY29taW5nUmVxdWVzdE1lc3NhZ2UsIEluY29taW5nUmVzcG9uc2VNZXNzYWdlLCBMZXZlbHMsIExvZ2dlckZhY3RvcnksIFBhcnNlciwgVVJJLCBVc2VyQWdlbnRDb3JlIH0gZnJvbSBcIi4uL2NvcmVcIjtcbmltcG9ydCB7IGNyZWF0ZVJhbmRvbVRva2VuLCB1dGY4TGVuZ3RoIH0gZnJvbSBcIi4uL2NvcmUvbWVzc2FnZXMvdXRpbHNcIjtcbmltcG9ydCB7IGRlZmF1bHRTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeSB9IGZyb20gXCIuLi9wbGF0Zm9ybS93ZWIvc2Vzc2lvbi1kZXNjcmlwdGlvbi1oYW5kbGVyXCI7XG5pbXBvcnQgeyBUcmFuc3BvcnQgYXMgV2ViVHJhbnNwb3J0IH0gZnJvbSBcIi4uL3BsYXRmb3JtL3dlYi90cmFuc3BvcnRcIjtcbmltcG9ydCB7IExJQlJBUllfVkVSU0lPTiB9IGZyb20gXCIuLi92ZXJzaW9uXCI7XG5pbXBvcnQgeyBFbWl0dGVySW1wbCB9IGZyb20gXCIuL2VtaXR0ZXJcIjtcbmltcG9ydCB7IEludml0YXRpb24gfSBmcm9tIFwiLi9pbnZpdGF0aW9uXCI7XG5pbXBvcnQgeyBJbnZpdGVyIH0gZnJvbSBcIi4vaW52aXRlclwiO1xuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gXCIuL21lc3NhZ2VcIjtcbmltcG9ydCB7IE5vdGlmaWNhdGlvbiB9IGZyb20gXCIuL25vdGlmaWNhdGlvblwiO1xuaW1wb3J0IHsgU0lQRXh0ZW5zaW9uLCBVc2VyQWdlbnRSZWdpc3RlcmVkT3B0aW9uVGFncyB9IGZyb20gXCIuL3VzZXItYWdlbnQtb3B0aW9uc1wiO1xuaW1wb3J0IHsgVXNlckFnZW50U3RhdGUgfSBmcm9tIFwiLi91c2VyLWFnZW50LXN0YXRlXCI7XG4vKipcbiAqIEEgdXNlciBhZ2VudCBzZW5kcyBhbmQgcmVjZWl2ZXMgcmVxdWVzdHMgdXNpbmcgYSBgVHJhbnNwb3J0YC5cbiAqXG4gKiBAcmVtYXJrc1xuICogQSB1c2VyIGFnZW50IChVQSkgaXMgYXNzb2NpYXRlZCB3aXRoIGEgdXNlciB2aWEgdGhlIHVzZXIncyBTSVAgYWRkcmVzcyBvZiByZWNvcmQgKEFPUilcbiAqIGFuZCBhY3RzIG9uIGJlaGFsZiBvZiB0aGF0IHVzZXIgdG8gc2VuZCBhbmQgcmVjZWl2ZSBTSVAgcmVxdWVzdHMuIFRoZSB1c2VyIGFnZW50IGNhblxuICogcmVnaXN0ZXIgdG8gcmVjZWl2ZSBpbmNvbWluZyByZXF1ZXN0cywgYXMgd2VsbCBhcyBjcmVhdGUgYW5kIHNlbmQgb3V0Ym91bmQgbWVzc2FnZXMuXG4gKiBUaGUgdXNlciBhZ2VudCBhbHNvIG1haW50YWlucyB0aGUgVHJhbnNwb3J0IG92ZXIgd2hpY2ggaXRzIHNpZ25hbGluZyB0cmF2ZWxzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJBZ2VudCB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgYFVzZXJBZ2VudGAgY2xhc3MuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGJ1Y2tldC4gU2VlIHtAbGluayBVc2VyQWdlbnRPcHRpb25zfSBmb3IgZGV0YWlscy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9wdWJsaXNoZXJzID0ge307XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJlcnMgPSB7fTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9zZXNzaW9ucyA9IHt9O1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBVc2VyQWdlbnRTdGF0ZS5TdG9wcGVkO1xuICAgICAgICAvKiogVW5sb2FkIGxpc3RlbmVyLiAqL1xuICAgICAgICB0aGlzLnVubG9hZExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIHN0YXRlIGVtaXR0ZXJcbiAgICAgICAgdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXIgPSBuZXcgRW1pdHRlckltcGwoKTtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBkZWxlZ2F0ZVxuICAgICAgICB0aGlzLmRlbGVnYXRlID0gb3B0aW9ucy5kZWxlZ2F0ZTtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBjb25maWd1cmF0aW9uXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgVXNlckFnZW50LmRlZmF1bHRPcHRpb25zKCkpLCB7IHNpcGpzSWQ6IGNyZWF0ZVJhbmRvbVRva2VuKDUpIH0pLCB7IHVyaTogbmV3IFVSSShcInNpcFwiLCBcImFub255bW91cy5cIiArIGNyZWF0ZVJhbmRvbVRva2VuKDYpLCBcImFub255bW91cy5pbnZhbGlkXCIpIH0pLCB7IHZpYUhvc3Q6IGNyZWF0ZVJhbmRvbVRva2VuKDEyKSArIFwiLmludmFsaWRcIiB9KSwgVXNlckFnZW50LnN0cmlwVW5kZWZpbmVkUHJvcGVydGllcyhvcHRpb25zKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXNlckFnZW50IG9wdGlvbnM9XCIsdGhpcy5vcHRpb25zKTtcbiAgICAgICAgLy8gdmlhSG9zdCBpcyBoYWNrXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGFja0lwSW5Db250YWN0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5oYWNrSXBJbkNvbnRhY3QgPT09IFwiYm9vbGVhblwiICYmIHRoaXMub3B0aW9ucy5oYWNrSXBJbkNvbnRhY3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmcm9tID0gMTtcbiAgICAgICAgICAgICAgICBjb25zdCB0byA9IDI1NDtcbiAgICAgICAgICAgICAgICBjb25zdCBvY3RldCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0byAtIGZyb20gKyAxKSArIGZyb20pO1xuICAgICAgICAgICAgICAgIC8vIHJhbmRvbSBUZXN0LU5ldCBJUCAoaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNTczNSlcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMudmlhSG9zdCA9IFwiMTkyLjAuMi5cIiArIG9jdGV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLmhhY2tJcEluQ29udGFjdCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy52aWFIb3N0ID0gdGhpcy5vcHRpb25zLmhhY2tJcEluQ29udGFjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpbml0aWFsaXplIGxvZ2dlciAmIGxvZ2dlciBmYWN0b3J5XG4gICAgICAgIHRoaXMubG9nZ2VyRmFjdG9yeSA9IG5ldyBMb2dnZXJGYWN0b3J5KCk7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gdGhpcy5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcihcInNpcC5Vc2VyQWdlbnRcIik7XG4gICAgICAgIHRoaXMubG9nZ2VyRmFjdG9yeS5idWlsdGluRW5hYmxlZCA9IHRoaXMub3B0aW9ucy5sb2dCdWlsdGluRW5hYmxlZDtcbiAgICAgICAgdGhpcy5sb2dnZXJGYWN0b3J5LmNvbm5lY3RvciA9IHRoaXMub3B0aW9ucy5sb2dDb25uZWN0b3I7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLmxvZ0xldmVsKSB7XG4gICAgICAgICAgICBjYXNlIFwiZXJyb3JcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlckZhY3RvcnkubGV2ZWwgPSBMZXZlbHMuZXJyb3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwid2FyblwiOlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyRmFjdG9yeS5sZXZlbCA9IExldmVscy53YXJuO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImxvZ1wiOlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyRmFjdG9yeS5sZXZlbCA9IExldmVscy5sb2c7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZGVidWdcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlckZhY3RvcnkubGV2ZWwgPSBMZXZlbHMuZGVidWc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9nQ29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiQ29uZmlndXJhdGlvbjpcIik7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLm9wdGlvbnNba2V5XTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidXJpXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiwrcgXCIgKyBrZXkgKyBcIjogXCIgKyB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImF1dGhvcml6YXRpb25QYXNzd29yZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKFwiwrcgXCIgKyBrZXkgKyBcIjogXCIgKyBcIk5PVCBTSE9XTlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNwb3J0Q29uc3RydWN0b3JcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIsK3IFwiICsga2V5ICsgXCI6IFwiICsgdmFsdWUubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIsK3IFwiICsga2V5ICsgXCI6IFwiICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBndWFyZCBkZXByZWNhdGVkIHRyYW5zcG9ydCBvcHRpb25zIChyZW1vdmUgdGhpcyBpbiB2ZXJzaW9uIDE2LngpXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNwb3J0T3B0aW9ucykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnNEZXByZWNhdGVkID0gdGhpcy5vcHRpb25zLnRyYW5zcG9ydE9wdGlvbnM7XG4gICAgICAgICAgICBjb25zdCBtYXhSZWNvbm5lY3Rpb25BdHRlbXB0c0RlcHJlY2F0ZWQgPSBvcHRpb25zRGVwcmVjYXRlZC5tYXhSZWNvbm5lY3Rpb25BdHRlbXB0cztcbiAgICAgICAgICAgIGNvbnN0IHJlY29ubmVjdGlvblRpbWVvdXREZXByZWNhdGVkID0gb3B0aW9uc0RlcHJlY2F0ZWQucmVjb25uZWN0aW9uVGltZW91dDtcbiAgICAgICAgICAgIGlmIChtYXhSZWNvbm5lY3Rpb25BdHRlbXB0c0RlcHJlY2F0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcHJlY2F0ZWRNZXNzYWdlID0gYFRoZSB0cmFuc3BvcnQgb3B0aW9uIFwibWF4UmVjb25uZWN0aW9uQXR0ZW1wdHNcIiBhcyBoYXMgYXBwYXJlbnRseSBiZWVuIHNwZWNpZmllZCBhbmQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gYCArXG4gICAgICAgICAgICAgICAgICAgIFwiSXQgd2lsbCBubyBsb25nZXIgYmUgYXZhaWxhYmxlIHN0YXJ0aW5nIHdpdGggU0lQLmpzIHJlbGVhc2UgMC4xNi4wLiBQbGVhc2UgdXBkYXRlIGFjY29yZGluZ2x5LlwiO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oZGVwcmVjYXRlZE1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY29ubmVjdGlvblRpbWVvdXREZXByZWNhdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXByZWNhdGVkTWVzc2FnZSA9IGBUaGUgdHJhbnNwb3J0IG9wdGlvbiBcInJlY29ubmVjdGlvblRpbWVvdXRcIiBhcyBoYXMgYXBwYXJlbnRseSBiZWVuIHNwZWNpZmllZCBhbmQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gYCArXG4gICAgICAgICAgICAgICAgICAgIFwiSXQgd2lsbCBubyBsb25nZXIgYmUgYXZhaWxhYmxlIHN0YXJ0aW5nIHdpdGggU0lQLmpzIHJlbGVhc2UgMC4xNi4wLiBQbGVhc2UgdXBkYXRlIGFjY29yZGluZ2x5LlwiO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oZGVwcmVjYXRlZE1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaGFja1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVjb25uZWN0aW9uRGVsYXkgPT09IHVuZGVmaW5lZCAmJiByZWNvbm5lY3Rpb25UaW1lb3V0RGVwcmVjYXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlY29ubmVjdGlvbkRlbGF5ID0gcmVjb25uZWN0aW9uVGltZW91dERlcHJlY2F0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZWNvbm5lY3Rpb25BdHRlbXB0cyA9PT0gdW5kZWZpbmVkICYmIG1heFJlY29ubmVjdGlvbkF0dGVtcHRzRGVwcmVjYXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlY29ubmVjdGlvbkF0dGVtcHRzID0gbWF4UmVjb25uZWN0aW9uQXR0ZW1wdHNEZXByZWNhdGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGd1YXJkIGRlcHJlY2F0ZWQgdXNlciBhZ2VudCBvcHRpb25zIChyZW1vdmUgdGhpcyBpbiB2ZXJzaW9uIDE2LngpXG4gICAgICAgIGlmIChvcHRpb25zLnJlY29ubmVjdGlvbkRlbGF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlcHJlY2F0ZWRNZXNzYWdlID0gYFRoZSB1c2VyIGFnZW50IG9wdGlvbiBcInJlY29ubmVjdGlvbkRlbGF5XCIgYXMgaGFzIGFwcGFyZW50bHkgYmVlbiBzcGVjaWZpZWQgYW5kIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIGAgK1xuICAgICAgICAgICAgICAgIFwiSXQgd2lsbCBubyBsb25nZXIgYmUgYXZhaWxhYmxlIHN0YXJ0aW5nIHdpdGggU0lQLmpzIHJlbGVhc2UgMC4xNi4wLiBQbGVhc2UgdXBkYXRlIGFjY29yZGluZ2x5LlwiO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihkZXByZWNhdGVkTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMucmVjb25uZWN0aW9uQXR0ZW1wdHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZGVwcmVjYXRlZE1lc3NhZ2UgPSBgVGhlIHVzZXIgYWdlbnQgb3B0aW9uIFwicmVjb25uZWN0aW9uQXR0ZW1wdHNcIiBhcyBoYXMgYXBwYXJlbnRseSBiZWVuIHNwZWNpZmllZCBhbmQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gYCArXG4gICAgICAgICAgICAgICAgXCJJdCB3aWxsIG5vIGxvbmdlciBiZSBhdmFpbGFibGUgc3RhcnRpbmcgd2l0aCBTSVAuanMgcmVsZWFzZSAwLjE2LjAuIFBsZWFzZSB1cGRhdGUgYWNjb3JkaW5nbHkuXCI7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGRlcHJlY2F0ZWRNZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbml0aWFsaXplIFRyYW5zcG9ydFxuICAgICAgICB0aGlzLl90cmFuc3BvcnQgPSBuZXcgdGhpcy5vcHRpb25zLnRyYW5zcG9ydENvbnN0cnVjdG9yKHRoaXMuZ2V0TG9nZ2VyKFwic2lwLlRyYW5zcG9ydFwiKSwgdGhpcy5vcHRpb25zLnRyYW5zcG9ydE9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluaXRUcmFuc3BvcnRDYWxsYmFja3MoKTtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBDb250YWN0XG4gICAgICAgIHRoaXMuX2NvbnRhY3QgPSB0aGlzLmluaXRDb250YWN0KCk7XG4gICAgICAgIC8vIEluaXRpYWxpemUgVXNlckFnZW50Q29yZVxuICAgICAgICB0aGlzLl91c2VyQWdlbnRDb3JlID0gdGhpcy5pbml0Q29yZSgpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmF1dG9TdGFydCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVSSSBpbnN0YW5jZSBmcm9tIGEgc3RyaW5nLlxuICAgICAqIEBwYXJhbSB1cmkgLSBUaGUgc3RyaW5nIHRvIHBhcnNlLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IHVyaSA9IFVzZXJBZ2VudC5tYWtlVVJJKFwic2lwOmVkZ2FyQGV4YW1wbGUuY29tXCIpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBtYWtlVVJJKHVyaSkge1xuICAgICAgICByZXR1cm4gR3JhbW1hci5VUklQYXJzZSh1cmkpO1xuICAgIH1cbiAgICAvKiogRGVmYXVsdCB1c2VyIGFnZW50IG9wdGlvbnMuICovXG4gICAgc3RhdGljIGRlZmF1bHRPcHRpb25zKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWxsb3dMZWdhY3lOb3RpZmljYXRpb25zOiBmYWxzZSxcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb25IYTE6IFwiXCIsXG4gICAgICAgICAgICBhdXRob3JpemF0aW9uUGFzc3dvcmQ6IFwiXCIsXG4gICAgICAgICAgICBhdXRob3JpemF0aW9uVXNlcm5hbWU6IFwiXCIsXG4gICAgICAgICAgICBhdXRvU3RhcnQ6IGZhbHNlLFxuICAgICAgICAgICAgYXV0b1N0b3A6IHRydWUsXG4gICAgICAgICAgICBkZWxlZ2F0ZToge30sXG4gICAgICAgICAgICBjb250YWN0TmFtZTogXCJcIixcbiAgICAgICAgICAgIGNvbnRhY3RQYXJhbXM6IHsgdHJhbnNwb3J0OiBcIndzXCIgfSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBcIlwiLFxuICAgICAgICAgICAgZm9yY2VScG9ydDogZmFsc2UsXG4gICAgICAgICAgICBoYWNrQWxsb3dVbnJlZ2lzdGVyZWRPcHRpb25UYWdzOiBmYWxzZSxcbiAgICAgICAgICAgIGhhY2tJcEluQ29udGFjdDogZmFsc2UsXG4gICAgICAgICAgICBoYWNrVmlhVGNwOiBmYWxzZSxcbiAgICAgICAgICAgIGxvZ0J1aWx0aW5FbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgbG9nQ29uZmlndXJhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgIGxvZ0Nvbm5lY3RvcjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8qIG5vb3AgKi9cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsb2dMZXZlbDogXCJsb2dcIixcbiAgICAgICAgICAgIG5vQW5zd2VyVGltZW91dDogNjAsXG4gICAgICAgICAgICBwcmVsb2FkZWRSb3V0ZVNldDogW10sXG4gICAgICAgICAgICByZWNvbm5lY3Rpb25BdHRlbXB0czogMCxcbiAgICAgICAgICAgIHJlY29ubmVjdGlvbkRlbGF5OiA0LFxuICAgICAgICAgICAgc2VuZEluaXRpYWxQcm92aXNpb25hbFJlc3BvbnNlOiB0cnVlLFxuICAgICAgICAgICAgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3Rvcnk6IGRlZmF1bHRTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeSgpLFxuICAgICAgICAgICAgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnlPcHRpb25zOiB7fSxcbiAgICAgICAgICAgIHNpcEV4dGVuc2lvbjEwMHJlbDogU0lQRXh0ZW5zaW9uLlVuc3VwcG9ydGVkLFxuICAgICAgICAgICAgc2lwRXh0ZW5zaW9uUmVwbGFjZXM6IFNJUEV4dGVuc2lvbi5VbnN1cHBvcnRlZCxcbiAgICAgICAgICAgIHNpcEV4dGVuc2lvbkV4dHJhU3VwcG9ydGVkOiBbXSxcbiAgICAgICAgICAgIHNpcGpzSWQ6IFwiXCIsXG4gICAgICAgICAgICB0cmFuc3BvcnRDb25zdHJ1Y3RvcjogV2ViVHJhbnNwb3J0LFxuICAgICAgICAgICAgdHJhbnNwb3J0T3B0aW9uczoge30sXG4gICAgICAgICAgICB1cmk6IG5ldyBVUkkoXCJzaXBcIiwgXCJhbm9ueW1vdXNcIiwgXCJhbm9ueW1vdXMuaW52YWxpZFwiKSxcbiAgICAgICAgICAgIHVzZXJBZ2VudFN0cmluZzogXCJTSVAuanMvXCIgKyBMSUJSQVJZX1ZFUlNJT04sXG4gICAgICAgICAgICB2aWFIb3N0OiBcIlwiXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmlwIHByb3BlcnRpZXMgd2l0aCB1bmRlZmluZWQgdmFsdWVzIGZyb20gb3B0aW9ucy5cbiAgICAgKiBUaGlzIGlzIGEgd29yayBhcm91bmQgd2hpbGUgd2FpdGluZyBmb3IgbWlzc2luZyB2cyB1bmRlZmluZWQgdG8gYmUgYWRkcmVzc2VkIChvciBub3QpLi4uXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8xMzE5NVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyB0byByZWR1Y2VcbiAgICAgKi9cbiAgICBzdGF0aWMgc3RyaXBVbmRlZmluZWRQcm9wZXJ0aWVzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9wdGlvbnMpLnJlZHVjZSgob2JqZWN0LCBrZXkpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBpZiAob3B0aW9uc1trZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIG9iamVjdFtrZXldID0gb3B0aW9uc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfSwge30pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVc2VyIGFnZW50IGNvbmZpZ3VyYXRpb24uXG4gICAgICovXG4gICAgZ2V0IGNvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVzZXIgYWdlbnQgY29udGFjdC5cbiAgICAgKi9cbiAgICBnZXQgY29udGFjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhY3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVzZXIgYWdlbnQgc3RhdGUuXG4gICAgICovXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVzZXIgYWdlbnQgc3RhdGUgY2hhbmdlIGVtaXR0ZXIuXG4gICAgICovXG4gICAgZ2V0IHN0YXRlQ2hhbmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVzZXIgYWdlbnQgdHJhbnNwb3J0LlxuICAgICAqL1xuICAgIGdldCB0cmFuc3BvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVzZXIgYWdlbnQgY29yZS5cbiAgICAgKi9cbiAgICBnZXQgdXNlckFnZW50Q29yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJBZ2VudENvcmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsb2dnZXIuXG4gICAgICovXG4gICAgZ2V0TG9nZ2VyKGNhdGVnb3J5LCBsYWJlbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcihjYXRlZ29yeSwgbGFiZWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbG9nZ2VyIGZhY3RvcnkuXG4gICAgICovXG4gICAgZ2V0TG9nZ2VyRmFjdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9nZ2VyRmFjdG9yeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0cmFuc3BvcnQgaXMgY29ubmVjdGVkLlxuICAgICAqL1xuICAgIGlzQ29ubmVjdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuaXNDb25uZWN0ZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb25uZWN0IHRoZSB0cmFuc3BvcnQuXG4gICAgICovXG4gICAgcmVjb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gVXNlckFnZW50U3RhdGUuU3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlVzZXIgYWdlbnQgc3RvcHBlZC5cIikpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCBjYWxsIHN5bmNocm9ub3VzbHlcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gdGhpcy50cmFuc3BvcnQuY29ubmVjdCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnQgdGhlIHVzZXIgYWdlbnQuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFJlc29sdmVzIGlmIHRyYW5zcG9ydCBjb25uZWN0cywgb3RoZXJ3aXNlIHJlamVjdHMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogdXNlckFnZW50LnN0YXJ0KClcbiAgICAgKiAgIC50aGVuKCgpID0+IHtcbiAgICAgKiAgICAgLy8gdXNlckFnZW50LmlzQ29ubmVjdGVkKCkgPT09IHRydWVcbiAgICAgKiAgIH0pXG4gICAgICogICAuY2F0Y2goKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAqICAgICAvLyB1c2VyQWdlbnQuaXNDb25uZWN0ZWQoKSA9PT0gZmFsc2VcbiAgICAgKiAgIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gVXNlckFnZW50U3RhdGUuU3RhcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgVXNlciBhZ2VudCBhbHJlYWR5IHN0YXJ0ZWRgKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFN0YXJ0aW5nICR7dGhpcy5jb25maWd1cmF0aW9uLnVyaX1gKTtcbiAgICAgICAgLy8gVHJhbnNpdGlvbiBzdGF0ZVxuICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGF0ZShVc2VyQWdlbnRTdGF0ZS5TdGFydGVkKTtcbiAgICAgICAgLy8gVE9ETzogUmV2aWV3IHRoaXMgYXMgaXQgaXMgbm90IGNsZWFyIGl0IGhhcyBhbnkgYmVuZWZpdCBhbmQgYXQgd29yc3QgY2F1c2VzIGFkZGl0aW9uYWwgbG9hZCB0aGUgc2VydmVyLlxuICAgICAgICAvLyBPbiB1bmxvYWQgaXQgbWF5IGJlIGJlc3QgdG8gc2ltcGx5IGluIG1vc3Qgc2NlbmFyaW9zIHRvIGRvIG5vdGhpbmcuIEZ1cnRoZXJtb3JlIGFuZCByZWdhcmRsZXNzLCB0aGlzXG4gICAgICAgIC8vIGtpbmQgb2YgYmVoYXZpb3Igc2VlbXMgbW9yZSBhcHByb3ByaWF0ZSB0byBiZSBtYW5hZ2VkIGJ5IHRoZSBjb25zdW1lciBvZiB0aGUgQVBJIHRoYW4gdGhlIEFQSSBpdHNlbGYuXG4gICAgICAgIC8vIFNob3VsZCB0aGlzIHBlcmhhcHMgYmUgZGVwcmVjYXRlZD9cbiAgICAgICAgLy9cbiAgICAgICAgLy8gQWRkIHdpbmRvdyB1bmxvYWQgZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hdXRvU3RvcCkge1xuICAgICAgICAgICAgLy8gR29vZ2xlIENocm9tZSBQYWNrYWdlZCBBcHBzIGRvbid0IGFsbG93ICd1bmxvYWQnIGxpc3RlbmVyczogdW5sb2FkIGlzIG5vdCBhdmFpbGFibGUgaW4gcGFja2FnZWQgYXBwc1xuICAgICAgICAgICAgY29uc3QgZ29vZ2xlQ2hyb21lUGFja2FnZWRBcHAgPSB0eXBlb2YgY2hyb21lICE9PSBcInVuZGVmaW5lZFwiICYmIGNocm9tZS5hcHAgJiYgY2hyb21lLmFwcC5ydW50aW1lID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIgJiYgIWdvb2dsZUNocm9tZVBhY2thZ2VkQXBwKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIiwgdGhpcy51bmxvYWRMaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNwb3J0LmNvbm5lY3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcCB0aGUgdXNlciBhZ2VudC5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogUmVzb2x2ZXMgd2hlbiB0aGUgdXNlciBhZ2VudCBoYXMgY29tcGxldGVkIGEgZ3JhY2VmdWwgc2h1dGRvd24uXG4gICAgICogYGBgdHh0XG4gICAgICogMSkgU2Vzc2lvbnMgdGVybWluYXRlLlxuICAgICAqIDIpIFJlZ2lzdGVyZXJzIHVucmVnaXN0ZXIuXG4gICAgICogMykgU3Vic2NyaWJlcnMgdW5zdWJzY3JpYmUuXG4gICAgICogNCkgUHVibGlzaGVycyB1bnB1Ymxpc2guXG4gICAgICogNSkgVHJhbnNwb3J0IGRpc2Nvbm5lY3RzLlxuICAgICAqIDYpIFVzZXIgQWdlbnQgQ29yZSByZXNldHMuXG4gICAgICogYGBgXG4gICAgICogTk9URTogV2hpbGUgdGhpcyBpcyBhIFwiZ3JhY2VmdWwgc2h1dGRvd25cIiwgaXQgY2FuIGFsc28gYmUgdmVyeSBzbG93IG9uZSBpZiB5b3VcbiAgICAgKiBhcmUgd2FpdGluZyBmb3IgdGhlIHJldHVybmVkIFByb21pc2UgdG8gcmVzb2x2ZS4gVGhlIGRpc3Bvc2FsIG9mIHRoZSBjbGllbnRzIGFuZFxuICAgICAqIGRpYWxvZ3MgaXMgZG9uZSBzZXJpYWxseSAtIHdhaXRpbmcgb24gb25lIHRvIGZpbmlzaCBiZWZvcmUgbW92aW5nIG9uIHRvIHRoZSBuZXh0LlxuICAgICAqIFRoaXMgY2FuIGJlIHNsb3cgaWYgdGhlcmUgYXJlIGxvdCBvZiBzdWJzY3JpcHRpb25zIHRvIHVuc3Vic2NyaWJlIGZvciBleGFtcGxlLlxuICAgICAqXG4gICAgICogVEhFIFNMT1cgUEFDRSBJUyBJTlRFTlRJT05BTCFcbiAgICAgKiBXaGlsZSBvbmUgY291bGQgc3BpbiB0aGVtIGFsbCBkb3duIGluIHBhcmFsbGVsLCB0aGlzIGNvdWxkIHNsYW0gdGhlIHJlbW90ZSBzZXJ2ZXIuXG4gICAgICogSXQgaXMgYmFkIHByYWN0aWNlIHRvIGRlbmlhbCBvZiBzZXJ2aWNlIGF0dGFjayAoRG9TIGF0dGFjaykgc2VydmVycyEhIVxuICAgICAqIE1vcmVvdmVyLCBwcm9kdWN0aW9uIHNlcnZlcnMgd2lsbCBhdXRvbWF0aWNhbGx5IGJsYWNrbGlzdCBjbGllbnRzIHdoaWNoIHNlbmQgdG9vXG4gICAgICogbWFueSByZXF1ZXN0cyBpbiB0b28gc2hvcnQgYSBwZXJpb2Qgb2YgdGltZSAtIGRyb3BwaW5nIGFueSBhZGRpdGlvbmFsIHJlcXVlc3RzLlxuICAgICAqXG4gICAgICogSWYgYSBkaWZmZXJlbnQgYXBwcm9hY2ggdG8gZGlzcG9zaW5nIGlzIG5lZWRlZCwgb25lIGNhbiBpbXBsZW1lbnQgd2hhdGV2ZXIgaXNcbiAgICAgKiBuZWVkZWQgYW5kIGV4ZWN1dGUgdGhhdCBwcmlvciB0byBjYWxsaW5nIGBzdG9wKClgLiBBbHRlcm5hdGl2ZWx5IG9uZSBtYXkgc2ltcGx5XG4gICAgICogbm90IHdhaXQgZm9yIHRoZSBQcm9taXNlIHJldHVybmVkIGJ5IGBzdG9wKClgIHRvIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBVc2VyQWdlbnRTdGF0ZS5TdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBVc2VyIGFnZW50IGFscmVhZHkgc3RvcHBlZGApO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgU3RvcHBpbmcgJHt0aGlzLmNvbmZpZ3VyYXRpb24udXJpfWApO1xuICAgICAgICAvLyBUcmFuc2l0aW9uIHN0YXRlXG4gICAgICAgIHRoaXMudHJhbnNpdGlvblN0YXRlKFVzZXJBZ2VudFN0YXRlLlN0b3BwZWQpO1xuICAgICAgICAvLyBUT0RPOiBTZWUgY29tbWVudHMgd2l0aCBhc3NvY2lhdGVkIGNvbXBsaW1lbnRhcnkgY29kZSBpbiBzdGFydCgpLiBTaG91bGQgdGhpcyBwZXJoYXBzIGJlIGRlcHJlY2F0ZWQ/XG4gICAgICAgIC8vIFJlbW92ZSB3aW5kb3cgdW5sb2FkIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXV0b1N0b3ApIHtcbiAgICAgICAgICAgIC8vIEdvb2dsZSBDaHJvbWUgUGFja2FnZWQgQXBwcyBkb24ndCBhbGxvdyAndW5sb2FkJyBsaXN0ZW5lcnM6IHVubG9hZCBpcyBub3QgYXZhaWxhYmxlIGluIHBhY2thZ2VkIGFwcHNcbiAgICAgICAgICAgIGNvbnN0IGdvb2dsZUNocm9tZVBhY2thZ2VkQXBwID0gdHlwZW9mIGNocm9tZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjaHJvbWUuYXBwICYmIGNocm9tZS5hcHAucnVudGltZSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyICYmICFnb29nbGVDaHJvbWVQYWNrYWdlZEFwcCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidW5sb2FkXCIsIHRoaXMudW5sb2FkTGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEJlIGNhcmVmdWwgaGVyZSB0byB1c2UgYSBsb2NhbCByZWZlcmVuY2VzIGFzIHN0YXJ0KCkgY2FuIGJlIGNhbGxlZFxuICAgICAgICAvLyBhZ2FpbiBiZWZvcmUgd2UgY29tcGxldGUgYW5kIHdlIGRvbid0IHdhbnQgdG8gdG91Y2ggbmV3IGNsaWVudHNcbiAgICAgICAgLy8gYW5kIHdlIGRvbid0IHdhbnQgdG8gc3RlcCBvbiB0aGUgbmV3IGluc3RhbmNlcyAob3IgdmljZSB2ZXJzYSkuXG4gICAgICAgIGNvbnN0IHB1Ymxpc2hlcnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9wdWJsaXNoZXJzKTtcbiAgICAgICAgY29uc3QgcmVnaXN0ZXJlcnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9yZWdpc3RlcmVycyk7XG4gICAgICAgIGNvbnN0IHNlc3Npb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fc2Vzc2lvbnMpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fc3Vic2NyaXB0aW9ucyk7XG4gICAgICAgIGNvbnN0IHRyYW5zcG9ydCA9IHRoaXMudHJhbnNwb3J0O1xuICAgICAgICBjb25zdCB1c2VyQWdlbnRDb3JlID0gdGhpcy51c2VyQWdlbnRDb3JlO1xuICAgICAgICAvL1xuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHdlIGhhdmUgY29tcGxldGVkIHRoZSBzdGF0ZSB0cmFuc2l0aW9uIGFuZCBldmVyeXRoaW5nXG4gICAgICAgIC8vIGZvbGxvd2luZyB3aWxsIGVmZmVjdGl2ZWx5IHJ1biBhc3luYyBhbmQgTVVTVCBOT1QgY2F1c2UgYW55IGlzc3Vlc1xuICAgICAgICAvLyBpZiBVc2VyQWdlbnQuc3RhcnQoKSBpcyBjYWxsZWQgd2hpbGUgdGhlIGZvbGxvd2luZyBjb2RlIGNvbnRpbnVlcy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVE9ETzogTWlub3Igb3B0aW1pemF0aW9uLlxuICAgICAgICAvLyBUaGUgZGlzcG9zYWwgaW4gYWxsIGNhc2VzIGludm9sdmVzLCBpbiBwYXJ0LCBzZW5kaW5nIG1lc3NhZ2VzIHdoaWNoXG4gICAgICAgIC8vIGlzIG5vdCB3b3J0aCBkb2luZyBpZiB0aGUgdHJhbnNwb3J0IGlzIG5vdCBjb25uZWN0ZWQgYXMgd2Uga25vdyBhdHRlbXB0aW5nXG4gICAgICAgIC8vIHRvIHNlbmQgbWVzc2FnZXMgd2lsbCBiZSBmdXRpbGUuIEJ1dCBub25lIG9mIHRoZXNlIGRpc3Bvc2FsIG1ldGhvZHMgY2hlY2tcbiAgICAgICAgLy8gaWYgdGhhdCdzIGlzIHRoZSBjYXNlIGFuZCBpdCB3b3VsZCBiZSBlYXN5IGZvciB0aGVtIHRvIGRvIHNvIGF0IHRoaXMgcG9pbnQuXG4gICAgICAgIC8vIERpc3Bvc2Ugb2YgUmVnaXN0ZXJlcnNcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBEaXNwb3NlIG9mIHJlZ2lzdGVyZXJzYCk7XG4gICAgICAgIGZvciAoY29uc3QgaWQgaW4gcmVnaXN0ZXJlcnMpIHtcbiAgICAgICAgICAgIGlmIChyZWdpc3RlcmVyc1tpZF0pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCByZWdpc3RlcmVyc1tpZF0uZGlzcG9zZSgpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3JlZ2lzdGVyZXJzW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGlzcG9zZSBvZiBTZXNzaW9uc1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYERpc3Bvc2Ugb2Ygc2Vzc2lvbnNgKTtcbiAgICAgICAgZm9yIChjb25zdCBpZCBpbiBzZXNzaW9ucykge1xuICAgICAgICAgICAgaWYgKHNlc3Npb25zW2lkXSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlc3Npb25zW2lkXS5kaXNwb3NlKCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fc2Vzc2lvbnNbaWRdO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBEaXNwb3NlIG9mIFN1YnNjcmlwdGlvbnNcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBEaXNwb3NlIG9mIHN1YnNjcmlwdGlvbnNgKTtcbiAgICAgICAgZm9yIChjb25zdCBpZCBpbiBzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uc1tpZF0pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzdWJzY3JpcHRpb25zW2lkXS5kaXNwb3NlKCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fc3Vic2NyaXB0aW9uc1tpZF07XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIERpc3Bvc2Ugb2YgUHVibGlzaGVyc1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYERpc3Bvc2Ugb2YgcHVibGlzaGVyc2ApO1xuICAgICAgICBmb3IgKGNvbnN0IGlkIGluIHB1Ymxpc2hlcnMpIHtcbiAgICAgICAgICAgIGlmIChwdWJsaXNoZXJzW2lkXSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHB1Ymxpc2hlcnNbaWRdLmRpc3Bvc2UoKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9wdWJsaXNoZXJzW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGlzcG9zZSBvZiB0aGUgdHJhbnNwb3J0IChkaXNjb25uZWN0aW5nKVxuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYERpc3Bvc2Ugb2YgdHJhbnNwb3J0YCk7XG4gICAgICAgIGF3YWl0IHRyYW5zcG9ydC5kaXNwb3NlKCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gRGlzcG9zZSBvZiB0aGUgdXNlciBhZ2VudCBjb3JlIChyZXNldHRpbmcpXG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgRGlzcG9zZSBvZiBjb3JlYCk7XG4gICAgICAgIHVzZXJBZ2VudENvcmUuZGlzcG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGF2b2lkIGNpcmN1bGFyIHJlZmVyZW5jZXMuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX21ha2VJbnZpdGVyKHRhcmdldFVSSSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IEludml0ZXIodGhpcywgdGFyZ2V0VVJJLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCByZWNvbm5lY3Rpb24gdXAgdG8gYG1heFJlY29ubmVjdGlvbkF0dGVtcHRzYCB0aW1lcy5cbiAgICAgKiBAcGFyYW0gcmVjb25uZWN0aW9uQXR0ZW1wdCAtIEN1cnJlbnQgYXR0ZW1wdCBudW1iZXIuXG4gICAgICovXG4gICAgYXR0ZW1wdFJlY29ubmVjdGlvbihyZWNvbm5lY3Rpb25BdHRlbXB0ID0gMSkge1xuICAgICAgICBjb25zdCByZWNvbm5lY3Rpb25BdHRlbXB0cyA9IHRoaXMub3B0aW9ucy5yZWNvbm5lY3Rpb25BdHRlbXB0cztcbiAgICAgICAgY29uc3QgcmVjb25uZWN0aW9uRGVsYXkgPSB0aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uRGVsYXk7XG4gICAgICAgIGlmIChyZWNvbm5lY3Rpb25BdHRlbXB0ID4gcmVjb25uZWN0aW9uQXR0ZW1wdHMpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgTWF4aW11bSByZWNvbm5lY3Rpb24gYXR0ZW1wdHMgcmVhY2hlZGApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgUmVjb25uZWN0aW9uIGF0dGVtcHQgJHtyZWNvbm5lY3Rpb25BdHRlbXB0fSBvZiAke3JlY29ubmVjdGlvbkF0dGVtcHRzfSAtIHRyeWluZ2ApO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0KClcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBSZWNvbm5lY3Rpb24gYXR0ZW1wdCAke3JlY29ubmVjdGlvbkF0dGVtcHR9IG9mICR7cmVjb25uZWN0aW9uQXR0ZW1wdHN9IC0gc3VjY2VlZGVkYCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFJlY29ubmVjdGlvbiBhdHRlbXB0ICR7cmVjb25uZWN0aW9uQXR0ZW1wdH0gb2YgJHtyZWNvbm5lY3Rpb25BdHRlbXB0c30gLSBmYWlsZWRgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGVtcHRSZWNvbm5lY3Rpb24oKytyZWNvbm5lY3Rpb25BdHRlbXB0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCByZWNvbm5lY3Rpb25BdHRlbXB0ID09PSAxID8gMCA6IHJlY29ubmVjdGlvbkRlbGF5ICogMTAwMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgY29udGFjdC5cbiAgICAgKi9cbiAgICBpbml0Q29udGFjdCgpIHtcbiAgICAgICAgY29uc3QgY29udGFjdE5hbWUgPSB0aGlzLm9wdGlvbnMuY29udGFjdE5hbWUgIT09IFwiXCIgPyB0aGlzLm9wdGlvbnMuY29udGFjdE5hbWUgOiBjcmVhdGVSYW5kb21Ub2tlbig4KTtcbiAgICAgICAgY29uc3QgY29udGFjdFBhcmFtcyA9IHRoaXMub3B0aW9ucy5jb250YWN0UGFyYW1zO1xuICAgICAgICBjb25zdCBjb250YWN0ID0ge1xuICAgICAgICAgICAgcHViR3J1dTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGVtcEdydXU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVyaTogbmV3IFVSSShcInNpcFwiLCBjb250YWN0TmFtZSwgdGhpcy5vcHRpb25zLnZpYUhvc3QsIHVuZGVmaW5lZCwgY29udGFjdFBhcmFtcyksXG4gICAgICAgICAgICB0b1N0cmluZzogKGNvbnRhY3RUb1N0cmluZ09wdGlvbnMgPSB7fSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFub255bW91cyA9IGNvbnRhY3RUb1N0cmluZ09wdGlvbnMuYW5vbnltb3VzIHx8IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dGJvdW5kID0gY29udGFjdFRvU3RyaW5nT3B0aW9ucy5vdXRib3VuZCB8fCBmYWxzZTtcbiAgICAgICAgICAgICAgICBsZXQgY29udGFjdFN0cmluZyA9IFwiPFwiO1xuICAgICAgICAgICAgICAgIGlmIChhbm9ueW1vdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFjdFN0cmluZyArPVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWN0LnRlbXBHcnV1IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYHNpcDphbm9ueW1vdXNAYW5vbnltb3VzLmludmFsaWQ7dHJhbnNwb3J0PSR7Y29udGFjdFBhcmFtcy50cmFuc3BvcnQgPyBjb250YWN0UGFyYW1zLnRyYW5zcG9ydCA6IFwid3NcIn1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFjdFN0cmluZyArPSB0aGlzLmNvbnRhY3QucHViR3J1dSB8fCB0aGlzLmNvbnRhY3QudXJpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3V0Ym91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFjdFN0cmluZyArPSBcIjtvYlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250YWN0U3RyaW5nICs9IFwiPlwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250YWN0U3RyaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY29udGFjdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB1c2VyIGFnZW50IGNvcmUuXG4gICAgICovXG4gICAgaW5pdENvcmUoKSB7XG4gICAgICAgIC8vIHN1cHBvcnRlZCBvcHRpb25zXG4gICAgICAgIGxldCBzdXBwb3J0ZWRPcHRpb25UYWdzID0gW107XG4gICAgICAgIHN1cHBvcnRlZE9wdGlvblRhZ3MucHVzaChcIm91dGJvdW5kXCIpOyAvLyBUT0RPOiBpcyB0aGlzIHJlYWxseSBzdXBwb3J0ZWQ/XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2lwRXh0ZW5zaW9uMTAwcmVsID09PSBTSVBFeHRlbnNpb24uU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWRPcHRpb25UYWdzLnB1c2goXCIxMDByZWxcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaXBFeHRlbnNpb25SZXBsYWNlcyA9PT0gU0lQRXh0ZW5zaW9uLlN1cHBvcnRlZCkge1xuICAgICAgICAgICAgc3VwcG9ydGVkT3B0aW9uVGFncy5wdXNoKFwicmVwbGFjZXNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaXBFeHRlbnNpb25FeHRyYVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgc3VwcG9ydGVkT3B0aW9uVGFncy5wdXNoKC4uLnRoaXMub3B0aW9ucy5zaXBFeHRlbnNpb25FeHRyYVN1cHBvcnRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaGFja0FsbG93VW5yZWdpc3RlcmVkT3B0aW9uVGFncykge1xuICAgICAgICAgICAgc3VwcG9ydGVkT3B0aW9uVGFncyA9IHN1cHBvcnRlZE9wdGlvblRhZ3MuZmlsdGVyKChvcHRpb25UYWcpID0+IFVzZXJBZ2VudFJlZ2lzdGVyZWRPcHRpb25UYWdzW29wdGlvblRhZ10pO1xuICAgICAgICB9XG4gICAgICAgIHN1cHBvcnRlZE9wdGlvblRhZ3MgPSBBcnJheS5mcm9tKG5ldyBTZXQoc3VwcG9ydGVkT3B0aW9uVGFncykpOyAvLyBhcnJheSBvZiB1bmlxdWUgdmFsdWVzXG4gICAgICAgIC8vIEZJWE1FOiBUT0RPOiBUaGlzIHdhcyBwb3J0ZWQsIGJ1dCB0aGlzIGlzIGFuZCB3YXMganVzdCBwbGFpbiBicm9rZW4uXG4gICAgICAgIGNvbnN0IHN1cHBvcnRlZE9wdGlvblRhZ3NSZXNwb25zZSA9IHN1cHBvcnRlZE9wdGlvblRhZ3Muc2xpY2UoKTtcbiAgICAgICAgaWYgKHRoaXMuY29udGFjdC5wdWJHcnV1IHx8IHRoaXMuY29udGFjdC50ZW1wR3J1dSkge1xuICAgICAgICAgICAgc3VwcG9ydGVkT3B0aW9uVGFnc1Jlc3BvbnNlLnB1c2goXCJncnV1XCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvcmUgY29uZmlndXJhdGlvblxuICAgICAgICBjb25zdCB1c2VyQWdlbnRDb3JlQ29uZmlndXJhdGlvbiA9IHtcbiAgICAgICAgICAgIGFvcjogdGhpcy5vcHRpb25zLnVyaSxcbiAgICAgICAgICAgIGNvbnRhY3Q6IHRoaXMuY29udGFjdCxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB0aGlzLm9wdGlvbnMuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBsb2dnZXJGYWN0b3J5OiB0aGlzLmxvZ2dlckZhY3RvcnksXG4gICAgICAgICAgICBoYWNrVmlhVGNwOiB0aGlzLm9wdGlvbnMuaGFja1ZpYVRjcCxcbiAgICAgICAgICAgIHJvdXRlU2V0OiB0aGlzLm9wdGlvbnMucHJlbG9hZGVkUm91dGVTZXQsXG4gICAgICAgICAgICBzdXBwb3J0ZWRPcHRpb25UYWdzLFxuICAgICAgICAgICAgc3VwcG9ydGVkT3B0aW9uVGFnc1Jlc3BvbnNlLFxuICAgICAgICAgICAgc2lwanNJZDogdGhpcy5vcHRpb25zLnNpcGpzSWQsXG4gICAgICAgICAgICB1c2VyQWdlbnRIZWFkZXJGaWVsZFZhbHVlOiB0aGlzLm9wdGlvbnMudXNlckFnZW50U3RyaW5nLFxuICAgICAgICAgICAgdmlhRm9yY2VScG9ydDogdGhpcy5vcHRpb25zLmZvcmNlUnBvcnQsXG4gICAgICAgICAgICB2aWFIb3N0OiB0aGlzLm9wdGlvbnMudmlhSG9zdCxcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uRmFjdG9yeTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdGhpcy5vcHRpb25zLmF1dGhvcml6YXRpb25Vc2VybmFtZVxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMub3B0aW9ucy5hdXRob3JpemF0aW9uVXNlcm5hbWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLm9wdGlvbnMudXJpLnVzZXI7IC8vIGlmIGF1dGhvcml6YXRpb24gdXNlcm5hbWUgbm90IHByb3ZpZGVkLCB1c2UgdXJpIHVzZXIgYXMgdXNlcm5hbWVcbiAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZCA9IHRoaXMub3B0aW9ucy5hdXRob3JpemF0aW9uUGFzc3dvcmQgPyB0aGlzLm9wdGlvbnMuYXV0aG9yaXphdGlvblBhc3N3b3JkIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhMSA9IHRoaXMub3B0aW9ucy5hdXRob3JpemF0aW9uSGExID8gdGhpcy5vcHRpb25zLmF1dGhvcml6YXRpb25IYTEgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEaWdlc3RBdXRoZW50aWNhdGlvbih0aGlzLmdldExvZ2dlckZhY3RvcnkoKSwgaGExLCB1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyYW5zcG9ydEFjY2Vzc29yOiAoKSA9PiB0aGlzLnRyYW5zcG9ydFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCB1c2VyQWdlbnRDb3JlRGVsZWdhdGUgPSB7XG4gICAgICAgICAgICBvbkludml0ZTogKGluY29taW5nSW52aXRlUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnZpdGF0aW9uID0gbmV3IEludml0YXRpb24odGhpcywgaW5jb21pbmdJbnZpdGVSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICBpbmNvbWluZ0ludml0ZVJlcXVlc3QuZGVsZWdhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsOiAoY2FuY2VsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZpdGF0aW9uLl9vbkNhbmNlbChjYW5jZWwpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgICAgICAgICAgICAgIG9uVHJhbnNwb3J0RXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSBzZXJ2ZXIgdHJhbnNhY3Rpb24gTVVTVCBOT1QgZGlzY2FyZCB0cmFuc2FjdGlvbiBzdGF0ZSBiYXNlZCBvbmx5IG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmNvdW50ZXJpbmcgYSBub24tcmVjb3ZlcmFibGUgdHJhbnNwb3J0IGVycm9yIHdoZW4gc2VuZGluZyBhXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNwb25zZS4gIEluc3RlYWQsIHRoZSBhc3NvY2lhdGVkIElOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24gc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hY2hpbmUgTVVTVCByZW1haW4gaW4gaXRzIGN1cnJlbnQgc3RhdGUuICAoVGltZXJzIHdpbGwgZXZlbnR1YWxseVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2F1c2UgaXQgdG8gdHJhbnNpdGlvbiB0byB0aGUgXCJUZXJtaW5hdGVkXCIgc3RhdGUpLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYwMjYjc2VjdGlvbi03LjFcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzIG5vdGVkIGluIHRoZSBjb21tZW50IGFib3ZlLCB3ZSBhcmUgdG8gbGVhdmluZyBpdCB0byB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRpbWVycyB0byBldmVudHVhbGx5IGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBzb3J0IGl0c2VsZiBvdXQgaW4gdGhlIGNhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIGEgdHJhbnNwb3J0IGZhaWx1cmUgaW4gYW4gaW52aXRlIHNlcnZlciB0cmFuc2FjdGlvbi4gVGhpcyBkZWxlZ2F0ZSBtZXRob2RcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGhlcmUgc2ltcGx5IGhlcmUgZm9yIGNvbXBsZXRlbmVzcyBhbmQgdG8gbWFrZSBpdCBjbGVhciB0aGF0IGl0IHByb3ZpZGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nIG1vcmUgdGhhbiBpbmZvcm1hdGlvbmFsIGhvb2sgaW50byB0aGUgY29yZS4gVGhhdCBpcywgaWYgeW91IHRoaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB5b3Ugc2hvdWxkIGJlIHRyeWluZyB0byBkZWFsIHdpdGggYSB0cmFuc3BvcnQgZXJyb3IgaGVyZSwgeW91IGFyZSBsaWtlbHkgd3JvbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIkEgdHJhbnNwb3J0IGVycm9yIGhhcyBvY2N1cnJlZCB3aGlsZSBoYW5kbGluZyBhbiBpbmNvbWluZyBJTlZJVEUgcmVxdWVzdC5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBQb3J0ZWQgLSAxMDAgVHJ5aW5nIHNlbmQgc2hvdWxkIGJlIGNvbmZpZ3VyYWJsZS5cbiAgICAgICAgICAgICAgICAvLyBPbmx5IHJlcXVpcmVkIGlmIFRVIHdpbGwgbm90IHJlc3BvbmQgaW4gMjAwbXMuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xNy4yLjFcbiAgICAgICAgICAgICAgICBpbmNvbWluZ0ludml0ZVJlcXVlc3QudHJ5aW5nKCk7XG4gICAgICAgICAgICAgICAgLy8gVGhlIFJlcGxhY2VzIGhlYWRlciBjb250YWlucyBpbmZvcm1hdGlvbiB1c2VkIHRvIG1hdGNoIGFuIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgLy8gU0lQIGRpYWxvZyAoY2FsbC1pZCwgdG8tdGFnLCBhbmQgZnJvbS10YWcpLiAgVXBvbiByZWNlaXZpbmcgYW4gSU5WSVRFXG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhIFJlcGxhY2VzIGhlYWRlciwgdGhlIFVzZXIgQWdlbnQgKFVBKSBhdHRlbXB0cyB0byBtYXRjaCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gaW5mb3JtYXRpb24gd2l0aCBhIGNvbmZpcm1lZCBvciBlYXJseSBkaWFsb2cuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM4OTEjc2VjdGlvbi0zXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaXBFeHRlbnNpb25SZXBsYWNlcyAhPT0gU0lQRXh0ZW5zaW9uLlVuc3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBpbmNvbWluZ0ludml0ZVJlcXVlc3QubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZXMgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKFwicmVwbGFjZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FsbElkID0gcmVwbGFjZXMuY2FsbF9pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbElkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHlwZSBvZiBjYWxsIGlkIGlzIG5vdCBzdHJpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b1RhZyA9IHJlcGxhY2VzLnJlcGxhY2VzX3RvX3RhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG9UYWcgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUeXBlIG9mIHRvIHRhZyBpcyBub3Qgc3RyaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbVRhZyA9IHJlcGxhY2VzLnJlcGxhY2VzX2Zyb21fdGFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmcm9tVGFnICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHlwZSBvZiBmcm9tIHRhZyBpcyBub3Qgc3RyaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RGlhbG9nSWQgPSBjYWxsSWQgKyB0b1RhZyArIGZyb21UYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXREaWFsb2cgPSB0aGlzLnVzZXJBZ2VudENvcmUuZGlhbG9ncy5nZXQodGFyZ2V0RGlhbG9nSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgbm8gbWF0Y2ggaXMgZm91bmQsIHRoZSBVQVMgcmVqZWN0cyB0aGUgSU5WSVRFIGFuZCByZXR1cm5zIGEgNDgxXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxsL1RyYW5zYWN0aW9uIERvZXMgTm90IEV4aXN0IHJlc3BvbnNlLiAgTGlrZXdpc2UsIGlmIHRoZSBSZXBsYWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGVhZGVyIGZpZWxkIG1hdGNoZXMgYSBkaWFsb2cgd2hpY2ggd2FzIG5vdCBjcmVhdGVkIHdpdGggYW4gSU5WSVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIFVBUyBNVVNUIHJlamVjdCB0aGUgcmVxdWVzdCB3aXRoIGEgNDgxIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM4OTEjc2VjdGlvbi0zXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldERpYWxvZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludml0YXRpb24ucmVqZWN0KHsgc3RhdHVzQ29kZTogNDgxIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBSZXBsYWNlcyBoZWFkZXIgZmllbGQgbWF0Y2hlcyBhIGNvbmZpcm1lZCBkaWFsb2csIGl0IGNoZWNrc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgXCJlYXJseS1vbmx5XCIgZmxhZyBpbiB0aGUgUmVwbGFjZXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaWVsZC4gIChUaGlzIGZsYWcgYWxsb3dzIHRoZSBVQUMgdG8gcHJldmVudCBhIHBvdGVudGlhbGx5XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1bmRlc2lyYWJsZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaW4gU2VjdGlvbiA3LjEuKSBJZiB0aGUgZmxhZyBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlc2VudCwgdGhlIFVBIHJlamVjdHMgdGhlIHJlcXVlc3Qgd2l0aCBhIDQ4NiBCdXN5IHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM4OTEjc2VjdGlvbi0zXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldERpYWxvZy5lYXJseSAmJiByZXBsYWNlcy5lYXJseV9vbmx5ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52aXRhdGlvbi5yZWplY3QoeyBzdGF0dXNDb2RlOiA0ODYgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJvdmlkZSBhIGhhbmRsZSBvbiB0aGUgc2Vzc2lvbiBiZWluZyByZXBsYWNlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFNlc3Npb24gPSB0aGlzLl9zZXNzaW9uc1tjYWxsSWQgKyBmcm9tVGFnXSB8fCB0aGlzLl9zZXNzaW9uc1tjYWxsSWQgKyB0b1RhZ10gfHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRTZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZpdGF0aW9uLl9yZXBsYWNlZSA9IHRhcmdldFNlc3Npb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRGVsZWdhdGUgaW52aXRhdGlvbiBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5kZWxlZ2F0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9uSW52aXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnZpdGF0aW9uLmF1dG9TZW5kQW5Jbml0aWFsUHJvdmlzaW9uYWxSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW52aXRhdGlvbi5wcm9ncmVzcygpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMuZGVsZWdhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbkludml0ZSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvbkludml0ZSB1bmRlZmluZWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uSW52aXRlKGludml0YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vbkludml0ZShpbnZpdGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBBIGNvbW1vbiBzY2VuYXJpbyBvY2N1cnMgd2hlbiB0aGUgY2FsbGVlIGlzIGN1cnJlbnRseSBub3Qgd2lsbGluZyBvclxuICAgICAgICAgICAgICAgIC8vIGFibGUgdG8gdGFrZSBhZGRpdGlvbmFsIGNhbGxzIGF0IHRoaXMgZW5kIHN5c3RlbS4gIEEgNDg2IChCdXN5IEhlcmUpXG4gICAgICAgICAgICAgICAgLy8gU0hPVUxEIGJlIHJldHVybmVkIGluIHN1Y2ggYSBzY2VuYXJpby5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEzLjMuMS4zXG4gICAgICAgICAgICAgICAgaW52aXRhdGlvbi5yZWplY3QoeyBzdGF0dXNDb2RlOiA0ODYgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25NZXNzYWdlOiAoaW5jb21pbmdNZXNzYWdlUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25NZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgTWVzc2FnZShpbmNvbWluZ01lc3NhZ2VSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vbk1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBBY2NlcHQgdGhlIE1FU1NBR0UgcmVxdWVzdCwgYnV0IGRvIG5vdGhpbmcgd2l0aCBpdC5cbiAgICAgICAgICAgICAgICAgICAgaW5jb21pbmdNZXNzYWdlUmVxdWVzdC5hY2NlcHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Ob3RpZnk6IChpbmNvbWluZ05vdGlmeVJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBOT1RJRlkgcmVxdWVzdHMgYXJlIHNlbnQgdG8gaW5mb3JtIHN1YnNjcmliZXJzIG9mIGNoYW5nZXMgaW4gc3RhdGUgdG9cbiAgICAgICAgICAgICAgICAvLyB3aGljaCB0aGUgc3Vic2NyaWJlciBoYXMgYSBzdWJzY3JpcHRpb24uICBTdWJzY3JpcHRpb25zIGFyZSBjcmVhdGVkXG4gICAgICAgICAgICAgICAgLy8gdXNpbmcgdGhlIFNVQlNDUklCRSBtZXRob2QuICBJbiBsZWdhY3kgaW1wbGVtZW50YXRpb25zLCBpdCBpc1xuICAgICAgICAgICAgICAgIC8vIHBvc3NpYmxlIHRoYXQgb3RoZXIgbWVhbnMgb2Ygc3Vic2NyaXB0aW9uIGNyZWF0aW9uIGhhdmUgYmVlbiB1c2VkLlxuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoaXMgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCBhbGxvdyB0aGUgY3JlYXRpb24gb2ZcbiAgICAgICAgICAgICAgICAvLyBzdWJzY3JpcHRpb25zIGV4Y2VwdCB0aHJvdWdoIFNVQlNDUklCRSByZXF1ZXN0cyBhbmQgKGZvciBiYWNrd2FyZHMtXG4gICAgICAgICAgICAgICAgLy8gY29tcGF0aWJpbGl0eSkgUkVGRVIgcmVxdWVzdHMgW1JGQzM1MTVdLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NjY1I3NlY3Rpb24tMy4yXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKGluY29taW5nTm90aWZ5UmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25Ob3RpZnkobm90aWZpY2F0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlciB0aGUgYWJvdmUgd2hpY2ggb2Jzb2xldGVzIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjY1LFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgdXNlIG9mIG91dCBvZiBkaWFsb2cgTk9USUZZIGlzIG9ic29sZXRlLCBidXQuLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hbGxvd0xlZ2FjeU5vdGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY29taW5nTm90aWZ5UmVxdWVzdC5hY2NlcHQoKTsgLy8gQWNjZXB0IHRoZSBOT1RJRlkgcmVxdWVzdCwgYnV0IGRvIG5vdGhpbmcgd2l0aCBpdC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY29taW5nTm90aWZ5UmVxdWVzdC5yZWplY3QoeyBzdGF0dXNDb2RlOiA0ODEgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25SZWZlcjogKGluY29taW5nUmVmZXJSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIlJlY2VpdmVkIGFuIG91dCBvZiBkaWFsb2cgUkVGRVIgcmVxdWVzdFwiKTtcbiAgICAgICAgICAgICAgICAvLyBUT09EOiB0aGlzLmRlbGVnYXRlLm9uUmVmZXIoLi4uKVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25SZWZlclJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblJlZmVyUmVxdWVzdChpbmNvbWluZ1JlZmVyUmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbmNvbWluZ1JlZmVyUmVxdWVzdC5yZWplY3QoeyBzdGF0dXNDb2RlOiA0MDUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVnaXN0ZXI6IChpbmNvbWluZ1JlZ2lzdGVyUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJSZWNlaXZlZCBhbiBvdXQgb2YgZGlhbG9nIFJFR0lTVEVSIHJlcXVlc3RcIik7XG4gICAgICAgICAgICAgICAgLy8gVE9PRDogdGhpcy5kZWxlZ2F0ZS5vblJlZ2lzdGVyKC4uLilcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uUmVnaXN0ZXJSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25SZWdpc3RlclJlcXVlc3QoaW5jb21pbmdSZWdpc3RlclJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5jb21pbmdSZWdpc3RlclJlcXVlc3QucmVqZWN0KHsgc3RhdHVzQ29kZTogNDA1IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblN1YnNjcmliZTogKGluY29taW5nU3Vic2NyaWJlUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJSZWNlaXZlZCBhbiBvdXQgb2YgZGlhbG9nIFNVQlNDUklCRSByZXF1ZXN0XCIpO1xuICAgICAgICAgICAgICAgIC8vIFRPT0Q6IHRoaXMuZGVsZWdhdGUub25TdWJzY3JpYmUoLi4uKVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25TdWJzY3JpYmVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25TdWJzY3JpYmVSZXF1ZXN0KGluY29taW5nU3Vic2NyaWJlUmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbmNvbWluZ1N1YnNjcmliZVJlcXVlc3QucmVqZWN0KHsgc3RhdHVzQ29kZTogNDA1IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQWdlbnRDb3JlKHVzZXJBZ2VudENvcmVDb25maWd1cmF0aW9uLCB1c2VyQWdlbnRDb3JlRGVsZWdhdGUpO1xuICAgIH1cbiAgICBpbml0VHJhbnNwb3J0Q2FsbGJhY2tzKCkge1xuICAgICAgICB0aGlzLnRyYW5zcG9ydC5vbkNvbm5lY3QgPSAoKSA9PiB0aGlzLm9uVHJhbnNwb3J0Q29ubmVjdCgpO1xuICAgICAgICB0aGlzLnRyYW5zcG9ydC5vbkRpc2Nvbm5lY3QgPSAoZXJyb3IpID0+IHRoaXMub25UcmFuc3BvcnREaXNjb25uZWN0KGVycm9yKTtcbiAgICAgICAgdGhpcy50cmFuc3BvcnQub25NZXNzYWdlID0gKG1lc3NhZ2UpID0+IHRoaXMub25UcmFuc3BvcnRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBvblRyYW5zcG9ydENvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBVc2VyQWdlbnRTdGF0ZS5TdG9wcGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vbkNvbm5lY3QpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25Db25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25UcmFuc3BvcnREaXNjb25uZWN0KGVycm9yKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBVc2VyQWdlbnRTdGF0ZS5TdG9wcGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vbkRpc2Nvbm5lY3QpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25EaXNjb25uZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBPbmx5IGF0dGVtcHQgdG8gcmVjb25uZWN0IGlmIG5ldHdvcmsvc2VydmVyIGRyb3BwZWQgdGhlIGNvbm5lY3Rpb24uXG4gICAgICAgIGlmIChlcnJvciAmJiB0aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uQXR0ZW1wdHMgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmF0dGVtcHRSZWNvbm5lY3Rpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblRyYW5zcG9ydE1lc3NhZ2UobWVzc2FnZVN0cmluZykge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gUGFyc2VyLnBhcnNlTWVzc2FnZShtZXNzYWdlU3RyaW5nLCB0aGlzLmdldExvZ2dlcihcInNpcC5QYXJzZXJcIikpO1xuICAgICAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJGYWlsZWQgdG8gcGFyc2UgaW5jb21pbmcgbWVzc2FnZS4gRHJvcHBpbmcuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBVc2VyQWdlbnRTdGF0ZS5TdG9wcGVkICYmIG1lc3NhZ2UgaW5zdGFuY2VvZiBJbmNvbWluZ1JlcXVlc3RNZXNzYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBSZWNlaXZlZCAke21lc3NhZ2UubWV0aG9kfSByZXF1ZXN0IHdoaWxlIHN0b3BwZWQuIERyb3BwaW5nLmApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEEgdmFsaWQgU0lQIHJlcXVlc3QgZm9ybXVsYXRlZCBieSBhIFVBQyBNVVNULCBhdCBhIG1pbmltdW0sIGNvbnRhaW5cbiAgICAgICAgLy8gdGhlIGZvbGxvd2luZyBoZWFkZXIgZmllbGRzOiBUbywgRnJvbSwgQ1NlcSwgQ2FsbC1JRCwgTWF4LUZvcndhcmRzLFxuICAgICAgICAvLyBhbmQgVmlhOyBhbGwgb2YgdGhlc2UgaGVhZGVyIGZpZWxkcyBhcmUgbWFuZGF0b3J5IGluIGFsbCBTSVBcbiAgICAgICAgLy8gcmVxdWVzdHMuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tOC4xLjFcbiAgICAgICAgY29uc3QgaGFzTWluaW11bUhlYWRlcnMgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYW5kYXRvcnlIZWFkZXJzID0gW1wiZnJvbVwiLCBcInRvXCIsIFwiY2FsbF9pZFwiLCBcImNzZXFcIiwgXCJ2aWFcIl07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGhlYWRlciBvZiBtYW5kYXRvcnlIZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLmhhc0hlYWRlcihoZWFkZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYE1pc3NpbmcgbWFuZGF0b3J5IGhlYWRlciBmaWVsZCA6ICR7aGVhZGVyfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICAvLyBSZXF1ZXN0IENoZWNrc1xuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEluY29taW5nUmVxdWVzdE1lc3NhZ2UpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgcG9ydCBvZiBTYW5pdHlDaGVjay5taW5pbXVtSGVhZGVycygpLlxuICAgICAgICAgICAgaWYgKCFoYXNNaW5pbXVtSGVhZGVycygpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgUmVxdWVzdCBtaXNzaW5nIG1hbmRhdG9yeSBoZWFkZXIgZmllbGQuIERyb3BwaW5nLmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZJWE1FOiBUaGlzIGlzIG5vbi1zdGFuZGFyZCBhbmQgc2hvdWxkIGJlIGEgY29uZmlndXJhYmxlIGJlaGF2aW9yIChkZXNpcmFibGUgcmVnYXJkbGVzcykuXG4gICAgICAgICAgICAvLyBDdXN0b20gU0lQLmpzIGNoZWNrIHRvIHJlamVjdCByZXF1ZXN0IGZyb20gb3Vyc2VsZiAodGhpcyBpbnN0YW5jZSBvZiBTSVAuanMpLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBwb3J0IG9mIFNhbml0eUNoZWNrLnJmYzMyNjFfMTZfM180KCkuXG4gICAgICAgICAgICBpZiAoIW1lc3NhZ2UudG9UYWcgJiYgbWVzc2FnZS5jYWxsSWQuc3Vic3RyKDAsIDUpID09PSB0aGlzLm9wdGlvbnMuc2lwanNJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlckFnZW50Q29yZS5yZXBseVN0YXRlbGVzcyhtZXNzYWdlLCB7IHN0YXR1c0NvZGU6IDQ4MiB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGSVhNRTogVGhpcyBzaG91bGQgYmUgVHJhbnNwb3J0IGNoZWNrIGJlZm9yZSB3ZSBnZXQgaGVyZSAoU2VjdGlvbiAxOCkuXG4gICAgICAgICAgICAvLyBDdXN0b20gU0lQLmpzIGNoZWNrIHRvIHJlamVjdCByZXF1ZXN0cyBpZiBib2R5IGxlbmd0aCB3cm9uZy5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgcG9ydCBvZiBTYW5pdHlDaGVjay5yZmMzMjYxXzE4XzNfcmVxdWVzdCgpLlxuICAgICAgICAgICAgY29uc3QgbGVuID0gdXRmOExlbmd0aChtZXNzYWdlLmJvZHkpO1xuICAgICAgICAgICAgY29uc3QgY29udGVudExlbmd0aCA9IG1lc3NhZ2UuZ2V0SGVhZGVyKFwiY29udGVudC1sZW5ndGhcIik7XG4gICAgICAgICAgICBpZiAoY29udGVudExlbmd0aCAmJiBsZW4gPCBOdW1iZXIoY29udGVudExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJBZ2VudENvcmUucmVwbHlTdGF0ZWxlc3MobWVzc2FnZSwgeyBzdGF0dXNDb2RlOiA0MDAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFJlc3BvbnNlIENoZWNrc1xuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEluY29taW5nUmVzcG9uc2VNZXNzYWdlKSB7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIHBvcnQgb2YgU2FuaXR5Q2hlY2subWluaW11bUhlYWRlcnMoKS5cbiAgICAgICAgICAgIGlmICghaGFzTWluaW11bUhlYWRlcnMoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYFJlc3BvbnNlIG1pc3NpbmcgbWFuZGF0b3J5IGhlYWRlciBmaWVsZC4gRHJvcHBpbmcuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ3VzdG9tIFNJUC5qcyBjaGVjayB0byBkcm9wIHJlc3BvbnNlcyBpZiBtdWx0aXBsZSBWaWEgaGVhZGVycy5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgcG9ydCBvZiBTYW5pdHlDaGVjay5yZmMzMjYxXzhfMV8zXzMoKS5cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmdldEhlYWRlcnMoXCJ2aWFcIikubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJNb3JlIHRoYW4gb25lIFZpYSBoZWFkZXIgZmllbGQgcHJlc2VudCBpbiB0aGUgcmVzcG9uc2UuIERyb3BwaW5nLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGSVhNRTogVGhpcyBzaG91bGQgYmUgVHJhbnNwb3J0IGNoZWNrIGJlZm9yZSB3ZSBnZXQgaGVyZSAoU2VjdGlvbiAxOCkuXG4gICAgICAgICAgICAvLyBDdXN0b20gU0lQLmpzIGNoZWNrIHRvIGRyb3AgcmVzcG9uc2VzIGlmIGJhZCBWaWEgaGVhZGVyLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBwb3J0IG9mIFNhbml0eUNoZWNrLnJmYzMyNjFfMThfMV8yKCkuXG4gICAgICAgICAgICBpZiAobWVzc2FnZS52aWEuaG9zdCAhPT0gdGhpcy5vcHRpb25zLnZpYUhvc3QgfHwgbWVzc2FnZS52aWEucG9ydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIlZpYSBzZW50LWJ5IGluIHRoZSByZXNwb25zZSBkb2VzIG5vdCBtYXRjaCBVQSBWaWEgaG9zdCB2YWx1ZS4gRHJvcHBpbmcuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZJWE1FOiBUaGlzIHNob3VsZCBiZSBUcmFuc3BvcnQgY2hlY2sgYmVmb3JlIHdlIGdldCBoZXJlIChTZWN0aW9uIDE4KS5cbiAgICAgICAgICAgIC8vIEN1c3RvbSBTSVAuanMgY2hlY2sgdG8gcmVqZWN0IHJlcXVlc3RzIGlmIGJvZHkgbGVuZ3RoIHdyb25nLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBwb3J0IG9mIFNhbml0eUNoZWNrLnJmYzMyNjFfMThfM19yZXNwb25zZSgpLlxuICAgICAgICAgICAgY29uc3QgbGVuID0gdXRmOExlbmd0aChtZXNzYWdlLmJvZHkpO1xuICAgICAgICAgICAgY29uc3QgY29udGVudExlbmd0aCA9IG1lc3NhZ2UuZ2V0SGVhZGVyKFwiY29udGVudC1sZW5ndGhcIik7XG4gICAgICAgICAgICBpZiAoY29udGVudExlbmd0aCAmJiBsZW4gPCBOdW1iZXIoY29udGVudExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiTWVzc2FnZSBib2R5IGxlbmd0aCBpcyBsb3dlciB0aGFuIHRoZSB2YWx1ZSBpbiBDb250ZW50LUxlbmd0aCBoZWFkZXIgZmllbGQuIERyb3BwaW5nLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSGFuZGxlIFJlcXVlc3RcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBJbmNvbWluZ1JlcXVlc3RNZXNzYWdlKSB7XG4gICAgICAgICAgICB0aGlzLnVzZXJBZ2VudENvcmUucmVjZWl2ZUluY29taW5nUmVxdWVzdEZyb21UcmFuc3BvcnQobWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSGFuZGxlIFJlc3BvbnNlXG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgSW5jb21pbmdSZXNwb25zZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMudXNlckFnZW50Q29yZS5yZWNlaXZlSW5jb21pbmdSZXNwb25zZUZyb21UcmFuc3BvcnQobWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBtZXNzYWdlIHR5cGUuXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2l0aW9uIHN0YXRlLlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICB0cmFuc2l0aW9uU3RhdGUobmV3U3RhdGUsIGVycm9yKSB7XG4gICAgICAgIGNvbnN0IGludmFsaWRUcmFuc2l0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuX3N0YXRlfSB0byAke25ld1N0YXRlfWApO1xuICAgICAgICB9O1xuICAgICAgICAvLyBWYWxpZGF0ZSBzdGF0ZSB0cmFuc2l0aW9uXG4gICAgICAgIHN3aXRjaCAodGhpcy5fc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgVXNlckFnZW50U3RhdGUuU3RhcnRlZDpcbiAgICAgICAgICAgICAgICBpZiAobmV3U3RhdGUgIT09IFVzZXJBZ2VudFN0YXRlLlN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFVzZXJBZ2VudFN0YXRlLlN0b3BwZWQ6XG4gICAgICAgICAgICAgICAgaWYgKG5ld1N0YXRlICE9PSBVc2VyQWdlbnRTdGF0ZS5TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHN0YXRlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgc3RhdGVcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBUcmFuc2l0aW9uZWQgZnJvbSAke3RoaXMuX3N0YXRlfSB0byAke25ld1N0YXRlfWApO1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IG5ld1N0YXRlO1xuICAgICAgICB0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlci5lbWl0KHRoaXMuX3N0YXRlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDLCBHcmFtbWFyLCBVUkksIGVxdWl2YWxlbnRVUkkgfSBmcm9tIFwiLi4vY29yZVwiO1xuaW1wb3J0IHsgRW1pdHRlckltcGwgfSBmcm9tIFwiLi9lbWl0dGVyXCI7XG5pbXBvcnQgeyBSZXF1ZXN0UGVuZGluZ0Vycm9yIH0gZnJvbSBcIi4vZXhjZXB0aW9uc1wiO1xuaW1wb3J0IHsgUmVnaXN0ZXJlclN0YXRlIH0gZnJvbSBcIi4vcmVnaXN0ZXJlci1zdGF0ZVwiO1xuLyoqXG4gKiBBIHJlZ2lzdGVyZXIgcmVnaXN0ZXJzIGEgY29udGFjdCBmb3IgYW4gYWRkcmVzcyBvZiByZWNvcmQgKG91dGdvaW5nIFJFR0lTVEVSKS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFJlZ2lzdGVyZXIge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGBSZWdpc3RlcmVyYCBjbGFzcy5cbiAgICAgKiBAcGFyYW0gdXNlckFnZW50IC0gVXNlciBhZ2VudC4gU2VlIHtAbGluayBVc2VyQWdlbnR9IGZvciBkZXRhaWxzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBidWNrZXQuIFNlZSB7QGxpbmsgUmVnaXN0ZXJlck9wdGlvbnN9IGZvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHVzZXJBZ2VudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqIFRoZSBjb250YWN0cyByZXR1cm5lZCBmcm9tIHRoZSBtb3N0IHJlY2VudCBhY2NlcHRlZCBSRUdJU1RFUiByZXF1ZXN0LiAqL1xuICAgICAgICB0aGlzLl9jb250YWN0cyA9IFtdO1xuICAgICAgICAvKiogVGhlIG51bWJlciBvZiBzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHJldHJ5aW5nIHRvIHJlZ2lzdGVyLiAqL1xuICAgICAgICB0aGlzLl9yZXRyeUFmdGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAvKiogVGhlIHJlZ2lzdHJhdGlvbiBzdGF0ZS4gKi9cbiAgICAgICAgdGhpcy5fc3RhdGUgPSBSZWdpc3RlcmVyU3RhdGUuSW5pdGlhbDtcbiAgICAgICAgLyoqIFRydWUgaXMgd2FpdGluZyBmb3IgZmluYWwgcmVzcG9uc2UgdG8gb3V0c3RhbmRpbmcgUkVHSVNURVIgcmVxdWVzdC4gKi9cbiAgICAgICAgdGhpcy5fd2FpdGluZyA9IGZhbHNlO1xuICAgICAgICAvLyBzdGF0ZSBlbWl0dGVyXG4gICAgICAgIHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyID0gbmV3IEVtaXR0ZXJJbXBsKCk7XG4gICAgICAgIC8vIHdhaXRpbmcgZW1pdHRlclxuICAgICAgICB0aGlzLl93YWl0aW5nRXZlbnRFbWl0dGVyID0gbmV3IEVtaXR0ZXJJbXBsKCk7XG4gICAgICAgIC8vIFNldCB1c2VyIGFnZW50XG4gICAgICAgIHRoaXMudXNlckFnZW50ID0gdXNlckFnZW50O1xuICAgICAgICAvLyBEZWZhdWx0IHJlZ2lzdHJhciBpcyBkb21haW4gcG9ydGlvbiBvZiB1c2VyIGFnZW50IHVyaVxuICAgICAgICBjb25zdCBkZWZhdWx0VXNlckFnZW50UmVnaXN0cmFyID0gdXNlckFnZW50LmNvbmZpZ3VyYXRpb24udXJpLmNsb25lKCk7XG4gICAgICAgIGRlZmF1bHRVc2VyQWdlbnRSZWdpc3RyYXIudXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBjb25maWd1cmF0aW9uXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBSZWdpc3RlcmVyLmRlZmF1bHRPcHRpb25zKCkpLCB7IHJlZ2lzdHJhcjogZGVmYXVsdFVzZXJBZ2VudFJlZ2lzdHJhciB9KSwgUmVnaXN0ZXJlci5zdHJpcFVuZGVmaW5lZFByb3BlcnRpZXMob3B0aW9ucykpO1xuICAgICAgICAvLyBNYWtlIHN1cmUgd2UgYXJlIG5vdCB1c2luZyByZWZlcmVuY2VzIHRvIGFycmF5IG9wdGlvbnNcbiAgICAgICAgdGhpcy5vcHRpb25zLmV4dHJhQ29udGFjdEhlYWRlclBhcmFtcyA9ICh0aGlzLm9wdGlvbnMuZXh0cmFDb250YWN0SGVhZGVyUGFyYW1zIHx8IFtdKS5zbGljZSgpO1xuICAgICAgICB0aGlzLm9wdGlvbnMuZXh0cmFIZWFkZXJzID0gKHRoaXMub3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBhcmUgbm90IHVzaW5nIHJlZmVyZW5jZXMgdG8gcmVnaXN0cmFyIHVyaVxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5yZWdpc3RyYXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlZ2lzdHJhciB1bmRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9ucy5yZWdpc3RyYXIgPSB0aGlzLm9wdGlvbnMucmVnaXN0cmFyLmNsb25lKCk7XG4gICAgICAgIC8vIFNldCBpbnN0YW5jZUlkIGFuZCByZWdJZCBjb25kaXRpb25hbCBkZWZhdWx0cyBhbmQgdmFsaWRhdGVcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZWdJZCAmJiAhdGhpcy5vcHRpb25zLmluc3RhbmNlSWQpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5pbnN0YW5jZUlkID0gUmVnaXN0ZXJlci5uZXdVVUlEKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMub3B0aW9ucy5yZWdJZCAmJiB0aGlzLm9wdGlvbnMuaW5zdGFuY2VJZCkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlZ0lkID0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmluc3RhbmNlSWQgJiYgR3JhbW1hci5wYXJzZSh0aGlzLm9wdGlvbnMuaW5zdGFuY2VJZCwgXCJ1dWlkXCIpID09PSAtMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnN0YW5jZUlkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJlZ0lkICYmIHRoaXMub3B0aW9ucy5yZWdJZCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcmVnSWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhciA9IHRoaXMub3B0aW9ucy5yZWdpc3RyYXI7XG4gICAgICAgIGNvbnN0IGZyb21VUkkgPSAodGhpcy5vcHRpb25zLnBhcmFtcyAmJiB0aGlzLm9wdGlvbnMucGFyYW1zLmZyb21VcmkpIHx8IHVzZXJBZ2VudC51c2VyQWdlbnRDb3JlLmNvbmZpZ3VyYXRpb24uYW9yO1xuICAgICAgICBjb25zdCB0b1VSSSA9ICh0aGlzLm9wdGlvbnMucGFyYW1zICYmIHRoaXMub3B0aW9ucy5wYXJhbXMudG9VcmkpIHx8IHVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnVyaTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcyB8fCB7fTtcbiAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpO1xuICAgICAgICAvLyBCdWlsZCB0aGUgcmVxdWVzdFxuICAgICAgICB0aGlzLnJlcXVlc3QgPSB1c2VyQWdlbnQudXNlckFnZW50Q29yZS5tYWtlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShDLlJFR0lTVEVSLCByZWdpc3RyYXIsIGZyb21VUkksIHRvVVJJLCBwYXJhbXMsIGV4dHJhSGVhZGVycywgdW5kZWZpbmVkKTtcbiAgICAgICAgLy8gUmVnaXN0cmF0aW9uIGV4cGlyZXNcbiAgICAgICAgdGhpcy5leHBpcmVzID0gdGhpcy5vcHRpb25zLmV4cGlyZXMgfHwgUmVnaXN0ZXJlci5kZWZhdWx0RXhwaXJlcztcbiAgICAgICAgaWYgKHRoaXMuZXhwaXJlcyA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZXhwaXJlcy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW50ZXJ2YWwgYXQgd2hpY2ggcmUtUkVHSVNURVIgcmVxdWVzdHMgYXJlIHNlbnRcbiAgICAgICAgdGhpcy5yZWZyZXNoRnJlcXVlbmN5ID0gdGhpcy5vcHRpb25zLnJlZnJlc2hGcmVxdWVuY3kgfHwgUmVnaXN0ZXJlci5kZWZhdWx0UmVmcmVzaEZyZXF1ZW5jeTtcbiAgICAgICAgaWYgKHRoaXMucmVmcmVzaEZyZXF1ZW5jeSA8IDUwIHx8IHRoaXMucmVmcmVzaEZyZXF1ZW5jeSA+IDk5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJlZnJlc2ggZnJlcXVlbmN5LiBUaGUgdmFsdWUgcmVwcmVzZW50cyBhIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4cGlyYXRpb24gdGltZSBhbmQgc2hvdWxkIGJlIGJldHdlZW4gNTAgYW5kIDk5LlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbml0aWFsaXplIGxvZ2dlclxuICAgICAgICB0aGlzLmxvZ2dlciA9IHVzZXJBZ2VudC5nZXRMb2dnZXIoXCJzaXAuUmVnaXN0ZXJlclwiKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2dDb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJDb25maWd1cmF0aW9uOlwiKTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMub3B0aW9uc1trZXldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWdpc3RyYXJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIsK3IFwiICsga2V5ICsgXCI6IFwiICsgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCLCtyBcIiArIGtleSArIFwiOiBcIiArIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWRlbnRpZmllclxuICAgICAgICB0aGlzLmlkID0gdGhpcy5yZXF1ZXN0LmNhbGxJZCArIHRoaXMucmVxdWVzdC5mcm9tLnBhcmFtZXRlcnMudGFnO1xuICAgICAgICAvLyBBZGQgdG8gdGhlIHVzZXIgYWdlbnQncyBzZXNzaW9uIGNvbGxlY3Rpb24uXG4gICAgICAgIHRoaXMudXNlckFnZW50Ll9yZWdpc3RlcmVyc1t0aGlzLmlkXSA9IHRoaXM7XG4gICAgfVxuICAgIC8qKiBEZWZhdWx0IHJlZ2lzdGVyZXIgb3B0aW9ucy4gKi9cbiAgICBzdGF0aWMgZGVmYXVsdE9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBleHBpcmVzOiBSZWdpc3RlcmVyLmRlZmF1bHRFeHBpcmVzLFxuICAgICAgICAgICAgZXh0cmFDb250YWN0SGVhZGVyUGFyYW1zOiBbXSxcbiAgICAgICAgICAgIGV4dHJhSGVhZGVyczogW10sXG4gICAgICAgICAgICBsb2dDb25maWd1cmF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgaW5zdGFuY2VJZDogXCJcIixcbiAgICAgICAgICAgIHBhcmFtczoge30sXG4gICAgICAgICAgICByZWdJZDogMCxcbiAgICAgICAgICAgIHJlZ2lzdHJhcjogbmV3IFVSSShcInNpcFwiLCBcImFub255bW91c1wiLCBcImFub255bW91cy5pbnZhbGlkXCIpLFxuICAgICAgICAgICAgcmVmcmVzaEZyZXF1ZW5jeTogUmVnaXN0ZXJlci5kZWZhdWx0UmVmcmVzaEZyZXF1ZW5jeVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vdXNlcnMvMTA5NTM4L2Jyb29mYVxuICAgIHN0YXRpYyBuZXdVVUlEKCkge1xuICAgICAgICBjb25zdCBVVUlEID0gXCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKC9beHldL2csIChjKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTYpO1xuICAgICAgICAgICAgY29uc3QgdiA9IGMgPT09IFwieFwiID8gciA6IChyICUgNCkgKyA4O1xuICAgICAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFVVSUQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmlwIHByb3BlcnRpZXMgd2l0aCB1bmRlZmluZWQgdmFsdWVzIGZyb20gb3B0aW9ucy5cbiAgICAgKiBUaGlzIGlzIGEgd29yayBhcm91bmQgd2hpbGUgd2FpdGluZyBmb3IgbWlzc2luZyB2cyB1bmRlZmluZWQgdG8gYmUgYWRkcmVzc2VkIChvciBub3QpLi4uXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8xMzE5NVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyB0byByZWR1Y2VcbiAgICAgKi9cbiAgICBzdGF0aWMgc3RyaXBVbmRlZmluZWRQcm9wZXJ0aWVzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9wdGlvbnMpLnJlZHVjZSgob2JqZWN0LCBrZXkpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBpZiAob3B0aW9uc1trZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIG9iamVjdFtrZXldID0gb3B0aW9uc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfSwge30pO1xuICAgIH1cbiAgICAvKiogVGhlIHJlZ2lzdGVyZWQgY29udGFjdHMuICovXG4gICAgZ2V0IGNvbnRhY3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFjdHMuc2xpY2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHJldHJ5aW5nIHRvIHJlZ2lzdGVyLlxuICAgICAqIEBkZWZhdWx0VmFsdWUgYHVuZGVmaW5lZGBcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFdoZW4gdGhlIHNlcnZlciByZWplY3RzIGEgcmVnaXN0cmF0aW9uIHJlcXVlc3QsIGlmIGl0IHByb3ZpZGVzIGEgc3VnZ2VzdGVkXG4gICAgICogZHVyYXRpb24gdG8gd2FpdCBiZWZvcmUgcmV0cnlpbmcsIHRoYXQgdmFsdWUgaXMgYXZhaWxhYmxlIGhlcmUgd2hlbiBhbmQgaWZcbiAgICAgKiB0aGUgc3RhdGUgdHJhbnNpdGlvbnMgdG8gYFVuc3Vic2NyaWJlZGAuIEl0IGlzIGFsc28gYXZhaWxhYmxlIGR1cmluZyB0aGVcbiAgICAgKiBjYWxsYmFjayB0byBgb25SZWplY3RgIGFmdGVyIGEgY2FsbCB0byBgcmVnaXN0ZXJgLiAoTm90ZSB0aGF0IGlmIHRoZSBzdGF0ZVxuICAgICAqIGlmIGFscmVhZHkgYFVuc3Vic2NyaWJlZGAsIGEgcmVqZWN0ZWQgcmVxdWVzdCBjcmVhdGVkIGJ5IGByZWdpc3RlcmAgd2lsbFxuICAgICAqIG5vdCBjYXVzZSB0aGUgc3RhdGUgdG8gdHJhbnNpdGlvbiB0byBgVW5zdWJzY3JpYmVkYC4gT25lIHdheSB0byBhdm9pZCB0aGlzXG4gICAgICogY2FzZSBpcyB0byBkaXNwb3NlIG9mIGBSZWdpc3RlcmVyYCB3aGVuIHVucmVnaXN0ZXJlZCBhbmQgY3JlYXRlIGEgbmV3XG4gICAgICogYFJlZ2lzdGVyZXJgIGZvciBhbnkgYXR0ZW1wdHMgdG8gcmV0cnkgcmVnaXN0ZXJpbmcuKVxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBDaGVja2luZyBmb3IgcmV0cnkgYWZ0ZXIgb24gc3RhdGUgY2hhbmdlXG4gICAgICogcmVnaXN0ZXJlci5zdGF0ZUNoYW5nZS5hZGRMaXN0ZW5lcigobmV3U3RhdGUpID0+IHtcbiAgICAgKiAgIHN3aXRjaCAobmV3U3RhdGUpIHtcbiAgICAgKiAgICAgY2FzZSBSZWdpc3RlcmVyU3RhdGUuVW5yZWdpc3RlcmVkOlxuICAgICAqICAgICAgIGNvbnN0IHJldHJ5QWZ0ZXIgPSByZWdpc3RlcmVyLnJldHJ5QWZ0ZXI7XG4gICAgICogICAgICAgYnJlYWs7XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBDaGVja2luZyBmb3IgcmV0cnkgYWZ0ZXIgb24gcmVxdWVzdCByZWplY3Rpb25cbiAgICAgKiByZWdpc3RlcmVyLnJlZ2lzdGVyKHtcbiAgICAgKiAgIHJlcXVlc3REZWxlZ2F0ZToge1xuICAgICAqICAgICBvblJlamVjdDogKCkgPT4ge1xuICAgICAqICAgICAgIGNvbnN0IHJldHJ5QWZ0ZXIgPSByZWdpc3RlcmVyLnJldHJ5QWZ0ZXI7XG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgcmV0cnlBZnRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JldHJ5QWZ0ZXI7XG4gICAgfVxuICAgIC8qKiBUaGUgcmVnaXN0cmF0aW9uIHN0YXRlLiAqL1xuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH1cbiAgICAvKiogRW1pdHMgd2hlbiB0aGUgcmVnaXN0ZXJlciBzdGF0ZSBjaGFuZ2VzLiAqL1xuICAgIGdldCBzdGF0ZUNoYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyO1xuICAgIH1cbiAgICAvKiogRGVzdHJ1Y3Rvci4gKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFJlZ2lzdGVyZXIgJHt0aGlzLmlkfSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9IGlzIGJlaW5nIGRpc3Bvc2VkYCk7XG4gICAgICAgIC8vIFJlbW92ZSBmcm9tIHRoZSB1c2VyIGFnZW50J3MgcmVnaXN0ZXJlciBjb2xsZWN0aW9uXG4gICAgICAgIGRlbGV0ZSB0aGlzLnVzZXJBZ2VudC5fcmVnaXN0ZXJlcnNbdGhpcy5pZF07XG4gICAgICAgIC8vIElmIHJlZ2lzdGVyZWQsIHVucmVnaXN0ZXJzIGFuZCByZXNvbHZlcyBhZnRlciBmaW5hbCByZXNwb25zZSByZWNlaXZlZC5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkb0Nsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSByZWdpc3RlcmVkLCB1bnJlZ2lzdGVyIGFuZCByZXNvbHZlIGFmdGVyIG91ciBzdGF0ZSBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndhaXRpbmcgJiYgdGhpcy5fc3RhdGUgPT09IFJlZ2lzdGVyZXJTdGF0ZS5SZWdpc3RlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVDaGFuZ2UuYWRkTGlzdGVuZXIoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGp1c3QgcmVzb2x2ZVxuICAgICAgICAgICAgICAgIHRoaXMudGVybWluYXRlZCgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgd2FpdGluZyBmb3IgYW4gb3V0c3RhbmRpbmcgcmVxdWVzdCwgd2FpdCBmb3IgaXQgdG8gZmluaXNoIGFuZCB0aGVuIHRyeSBjbG9zaW5nLlxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGp1c3QgdHJ5IGNsb3NpbmcuXG4gICAgICAgICAgICBpZiAodGhpcy53YWl0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53YWl0aW5nQ2hhbmdlLmFkZExpc3RlbmVyKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZG9DbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvQ2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIHRoZSBSRUdJU1RFUiByZXF1ZXN0LlxuICAgICAqIEByZW1hcmtzXG4gICAgICogSWYgc3VjY2Vzc2Z1bCwgc2VuZHMgcmUtUkVHSVNURVIgcmVxdWVzdHMgcHJpb3IgdG8gcmVnaXN0cmF0aW9uIGV4cGlyYXRpb24gdW50aWwgYHVuc3Vic2NyaWJlKClgIGlzIGNhbGxlZC5cbiAgICAgKiBSZWplY3RzIHdpdGggYFJlcXVlc3RQZW5kaW5nRXJyb3JgIGlmIGEgUkVHSVNURVIgcmVxdWVzdCBpcyBhbHJlYWR5IGluIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gUmVnaXN0ZXJlclN0YXRlLlRlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVFcnJvcigpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVnaXN0ZXJlciB0ZXJtaW5hdGVkLiBVbmFibGUgdG8gcmVnaXN0ZXIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlRXJyb3IoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlZ2lzdGVyZXIgZGlzcG9zZWQuIFVuYWJsZSB0byByZWdpc3Rlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVUFzIE1VU1QgTk9UIHNlbmQgYSBuZXcgcmVnaXN0cmF0aW9uICh0aGF0IGlzLCBjb250YWluaW5nIG5ldyBDb250YWN0XG4gICAgICAgIC8vIGhlYWRlciBmaWVsZCB2YWx1ZXMsIGFzIG9wcG9zZWQgdG8gYSByZXRyYW5zbWlzc2lvbikgdW50aWwgdGhleSBoYXZlXG4gICAgICAgIC8vIHJlY2VpdmVkIGEgZmluYWwgcmVzcG9uc2UgZnJvbSB0aGUgcmVnaXN0cmFyIGZvciB0aGUgcHJldmlvdXMgb25lIG9yXG4gICAgICAgIC8vIHRoZSBwcmV2aW91cyBSRUdJU1RFUiByZXF1ZXN0IGhhcyB0aW1lZCBvdXQuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTAuMlxuICAgICAgICBpZiAodGhpcy53YWl0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLndhaXRpbmdXYXJuaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBSZXF1ZXN0UGVuZGluZ0Vycm9yKFwiUkVHSVNURVIgcmVxdWVzdCBhbHJlYWR5IGluIHByb2dyZXNzLCB3YWl0aW5nIGZvciBmaW5hbCByZXNwb25zZVwiKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3B0aW9uc1xuICAgICAgICBpZiAob3B0aW9ucy5yZXF1ZXN0T3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMpLCBvcHRpb25zLnJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFeHRyYSBoZWFkZXJzXG4gICAgICAgIGNvbnN0IGV4dHJhSGVhZGVycyA9ICh0aGlzLm9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpO1xuICAgICAgICBleHRyYUhlYWRlcnMucHVzaChcIkNvbnRhY3Q6IFwiICsgdGhpcy5nZW5lcmF0ZUNvbnRhY3RIZWFkZXIodGhpcy5leHBpcmVzKSk7XG4gICAgICAgIC8vIHRoaXMgaXMgVUEuQy5BTExPV0VEX01FVEhPRFMsIHJlbW92ZWQgdG8gZ2V0IGFyb3VuZCBjaXJjdWxhciBkZXBlbmRlbmN5XG4gICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKFwiQWxsb3c6IFwiICsgW1wiQUNLXCIsIFwiQ0FOQ0VMXCIsIFwiSU5WSVRFXCIsIFwiTUVTU0FHRVwiLCBcIkJZRVwiLCBcIk9QVElPTlNcIiwgXCJJTkZPXCIsIFwiTk9USUZZXCIsIFwiUkVGRVJcIl0udG9TdHJpbmcoKSk7XG4gICAgICAgIC8vIENhbGwtSUQ6IEFsbCByZWdpc3RyYXRpb25zIGZyb20gYSBVQUMgU0hPVUxEIHVzZSB0aGUgc2FtZSBDYWxsLUlEXG4gICAgICAgIC8vIGhlYWRlciBmaWVsZCB2YWx1ZSBmb3IgcmVnaXN0cmF0aW9ucyBzZW50IHRvIGEgcGFydGljdWxhclxuICAgICAgICAvLyByZWdpc3RyYXIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIENTZXE6IFRoZSBDU2VxIHZhbHVlIGd1YXJhbnRlZXMgcHJvcGVyIG9yZGVyaW5nIG9mIFJFR0lTVEVSXG4gICAgICAgIC8vIHJlcXVlc3RzLiAgQSBVQSBNVVNUIGluY3JlbWVudCB0aGUgQ1NlcSB2YWx1ZSBieSBvbmUgZm9yIGVhY2hcbiAgICAgICAgLy8gUkVHSVNURVIgcmVxdWVzdCB3aXRoIHRoZSBzYW1lIENhbGwtSUQuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTAuMlxuICAgICAgICB0aGlzLnJlcXVlc3QuY3NlcSsrO1xuICAgICAgICB0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKFwiY3NlcVwiLCB0aGlzLnJlcXVlc3QuY3NlcSArIFwiIFJFR0lTVEVSXCIpO1xuICAgICAgICB0aGlzLnJlcXVlc3QuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzO1xuICAgICAgICB0aGlzLndhaXRpbmdUb2dnbGUodHJ1ZSk7XG4gICAgICAgIGNvbnN0IG91dGdvaW5nUmVnaXN0ZXJSZXF1ZXN0ID0gdGhpcy51c2VyQWdlbnQudXNlckFnZW50Q29yZS5yZWdpc3Rlcih0aGlzLnJlcXVlc3QsIHtcbiAgICAgICAgICAgIG9uQWNjZXB0OiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZXhwaXJlcztcbiAgICAgICAgICAgICAgICAvLyBGSVhNRTogVGhpcyBkb2VzIE5PVCBhcHBlYXIgdG8gYmUgdG8gc3BlYyBhbmQgc2hvdWxkIGJlIHJlbW92ZWQuXG4gICAgICAgICAgICAgICAgLy8gSSBoYXZlbid0IGZvdW5kIGFueXdoZXJlIHRoYXQgYW4gRXhwaXJlcyBoZWFkZXIgbWF5IGJlIHVzZWQgaW4gYSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubWVzc2FnZS5oYXNIZWFkZXIoXCJleHBpcmVzXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXMgPSBOdW1iZXIocmVzcG9uc2UubWVzc2FnZS5nZXRIZWFkZXIoXCJleHBpcmVzXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gOC4gVGhlIHJlZ2lzdHJhciByZXR1cm5zIGEgMjAwIChPSykgcmVzcG9uc2UuICBUaGUgcmVzcG9uc2UgTVVTVFxuICAgICAgICAgICAgICAgIC8vIGNvbnRhaW4gQ29udGFjdCBoZWFkZXIgZmllbGQgdmFsdWVzIGVudW1lcmF0aW5nIGFsbCBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gYmluZGluZ3MuICBFYWNoIENvbnRhY3QgdmFsdWUgTVVTVCBmZWF0dXJlIGFuIFwiZXhwaXJlc1wiXG4gICAgICAgICAgICAgICAgLy8gcGFyYW1ldGVyIGluZGljYXRpbmcgaXRzIGV4cGlyYXRpb24gaW50ZXJ2YWwgY2hvc2VuIGJ5IHRoZVxuICAgICAgICAgICAgICAgIC8vIHJlZ2lzdHJhci4gIFRoZSByZXNwb25zZSBTSE9VTEQgaW5jbHVkZSBhIERhdGUgaGVhZGVyIGZpZWxkLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTAuM1xuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRhY3RzID0gcmVzcG9uc2UubWVzc2FnZS5nZXRIZWFkZXJzKFwiY29udGFjdFwiKTtcbiAgICAgICAgICAgICAgICBsZXQgY29udGFjdHMgPSB0aGlzLl9jb250YWN0cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250YWN0cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIk5vIENvbnRhY3QgaGVhZGVyIGluIHJlc3BvbnNlIHRvIFJFR0lTVEVSLCBkcm9wcGluZyByZXNwb25zZS5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlcmVkKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVGhlIDIwMCAoT0spIHJlc3BvbnNlIGZyb20gdGhlIHJlZ2lzdHJhciBjb250YWlucyBhIGxpc3Qgb2YgQ29udGFjdFxuICAgICAgICAgICAgICAgIC8vIGZpZWxkcyBlbnVtZXJhdGluZyBhbGwgY3VycmVudCBiaW5kaW5ncy4gIFRoZSBVQSBjb21wYXJlcyBlYWNoXG4gICAgICAgICAgICAgICAgLy8gY29udGFjdCBhZGRyZXNzIHRvIHNlZSBpZiBpdCBjcmVhdGVkIHRoZSBjb250YWN0IGFkZHJlc3MsIHVzaW5nXG4gICAgICAgICAgICAgICAgLy8gY29tcGFyaXNvbiBydWxlcyBpbiBTZWN0aW9uIDE5LjEuNC4gIElmIHNvLCBpdCB1cGRhdGVzIHRoZSBleHBpcmF0aW9uXG4gICAgICAgICAgICAgICAgLy8gdGltZSBpbnRlcnZhbCBhY2NvcmRpbmcgdG8gdGhlIGV4cGlyZXMgcGFyYW1ldGVyIG9yLCBpZiBhYnNlbnQsIHRoZVxuICAgICAgICAgICAgICAgIC8vIEV4cGlyZXMgZmllbGQgdmFsdWUuICBUaGUgVUEgdGhlbiBpc3N1ZXMgYSBSRUdJU1RFUiByZXF1ZXN0IGZvciBlYWNoXG4gICAgICAgICAgICAgICAgLy8gb2YgaXRzIGJpbmRpbmdzIGJlZm9yZSB0aGUgZXhwaXJhdGlvbiBpbnRlcnZhbCBoYXMgZWxhcHNlZC5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEwLjIuNFxuICAgICAgICAgICAgICAgIGxldCBjb250YWN0O1xuICAgICAgICAgICAgICAgIHdoaWxlIChjb250YWN0cy0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhY3QgPSByZXNwb25zZS5tZXNzYWdlLnBhcnNlSGVhZGVyKFwiY29udGFjdFwiLCBjb250YWN0cyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGFjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udGFjdCB1bmRlZmluZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlckFnZW50LmNvbnRhY3QucHViR3J1dSAmJiBlcXVpdmFsZW50VVJJKGNvbnRhY3QudXJpLCB0aGlzLnVzZXJBZ2VudC5jb250YWN0LnB1YkdydXUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzID0gTnVtYmVyKGNvbnRhY3QuZ2V0UGFyYW0oXCJleHBpcmVzXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBhIHJhbmRvbWx5IGdlbmVyYXRlZCB1c2VyIG5hbWUgKHdoaWNoIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW9yKVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VyQWdlbnQuY29uZmlndXJhdGlvbi5jb250YWN0TmFtZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGFyZSB0aGUgdXNlciBwb3J0aW9uIG9mIHRoZSBVUkkgdW5kZXIgdGhlIGFzc3VtcHRpb24gdGhhdCBpdCB3aWxsIGJlIHVuaXF1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhY3QudXJpLnVzZXIgPT09IHRoaXMudXNlckFnZW50LmNvbnRhY3QudXJpLnVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzID0gTnVtYmVyKGNvbnRhY3QuZ2V0UGFyYW0oXCJleHBpcmVzXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSB1c2UgY29tcGFyaXNpb24gcnVsZXMgaW4gU2VjdGlvbiAxOS4xLjRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcXVpdmFsZW50VVJJKGNvbnRhY3QudXJpLCB0aGlzLnVzZXJBZ2VudC5jb250YWN0LnVyaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzID0gTnVtYmVyKGNvbnRhY3QuZ2V0UGFyYW0oXCJleHBpcmVzXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250YWN0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBtdXN0IGJlIGEgbWF0Y2hpbmcgY29udGFjdC5cbiAgICAgICAgICAgICAgICBpZiAoY29udGFjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiTm8gQ29udGFjdCBoZWFkZXIgcG9pbnRpbmcgdG8gdXMsIGRyb3BwaW5nIHJlc3BvbnNlXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJlZCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndhaXRpbmdUb2dnbGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRoZSBjb250YWN0IG11c3QgaGF2ZSBhbiBleHBpcmVzLlxuICAgICAgICAgICAgICAgIGlmIChleHBpcmVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJDb250YWN0IHBvaW50aW5nIHRvIHVzIGlzIG1pc3NpbmcgZXhwaXJlcyBwYXJhbWV0ZXIsIGRyb3BwaW5nIHJlc3BvbnNlXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJlZCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndhaXRpbmdUb2dnbGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNhdmUgZ3J1dSB2YWx1ZXNcbiAgICAgICAgICAgICAgICBpZiAoY29udGFjdC5oYXNQYXJhbShcInRlbXAtZ3J1dVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBncnV1ID0gY29udGFjdC5nZXRQYXJhbShcInRlbXAtZ3J1dVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdydXUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlckFnZW50LmNvbnRhY3QudGVtcEdydXUgPSBHcmFtbWFyLlVSSVBhcnNlKGdydXUucmVwbGFjZSgvXCIvZywgXCJcIikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb250YWN0Lmhhc1BhcmFtKFwicHViLWdydXVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3J1dSA9IGNvbnRhY3QuZ2V0UGFyYW0oXCJwdWItZ3J1dVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdydXUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlckFnZW50LmNvbnRhY3QucHViR3J1dSA9IEdyYW1tYXIuVVJJUGFyc2UoZ3J1dS5yZXBsYWNlKC9cIi9nLCBcIlwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkKGV4cGlyZXMpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZSAmJiBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMud2FpdGluZ1RvZ2dsZShmYWxzZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Qcm9ncmVzczogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVxdWVzdERlbGVnYXRlICYmIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUub25Qcm9ncmVzcyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVkaXJlY3Q6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiUmVkaXJlY3QgcmVjZWl2ZWQuIE5vdCBzdXBwb3J0ZWQuXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlcmVkKCk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVxdWVzdERlbGVnYXRlICYmIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUmVkaXJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUub25SZWRpcmVjdChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMud2FpdGluZ1RvZ2dsZShmYWxzZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25SZWplY3Q6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5tZXNzYWdlLnN0YXR1c0NvZGUgPT09IDQyMykge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhIFVBIHJlY2VpdmVzIGEgNDIzIChJbnRlcnZhbCBUb28gQnJpZWYpIHJlc3BvbnNlLCBpdCBNQVkgcmV0cnlcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlZ2lzdHJhdGlvbiBhZnRlciBtYWtpbmcgdGhlIGV4cGlyYXRpb24gaW50ZXJ2YWwgb2YgYWxsIGNvbnRhY3RcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkcmVzc2VzIGluIHRoZSBSRUdJU1RFUiByZXF1ZXN0IGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhwaXJhdGlvbiBpbnRlcnZhbCB3aXRoaW4gdGhlIE1pbi1FeHBpcmVzIGhlYWRlciBmaWVsZCBvZiB0aGUgNDIzXG4gICAgICAgICAgICAgICAgICAgIC8vIChJbnRlcnZhbCBUb28gQnJpZWYpIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTEwLjIuOFxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmVnaXN0cmFyIE1BWSBjaG9vc2UgYW4gZXhwaXJhdGlvbiBsZXNzIHRoYW4gdGhlIHJlcXVlc3RlZFxuICAgICAgICAgICAgICAgICAgICAvLyBleHBpcmF0aW9uIGludGVydmFsLiAgSWYgYW5kIG9ubHkgaWYgdGhlIHJlcXVlc3RlZCBleHBpcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGludGVydmFsIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvIEFORCBzbWFsbGVyIHRoYW4gb25lIGhvdXIgQU5EXG4gICAgICAgICAgICAgICAgICAgIC8vIGxlc3MgdGhhbiBhIHJlZ2lzdHJhci1jb25maWd1cmVkIG1pbmltdW0sIHRoZSByZWdpc3RyYXIgTUFZXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlamVjdCB0aGUgcmVnaXN0cmF0aW9uIHdpdGggYSByZXNwb25zZSBvZiA0MjMgKEludGVydmFsIFRvb1xuICAgICAgICAgICAgICAgICAgICAvLyBCcmllZikuICBUaGlzIHJlc3BvbnNlIE1VU1QgY29udGFpbiBhIE1pbi1FeHBpcmVzIGhlYWRlciBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHN0YXRlcyB0aGUgbWluaW11bSBleHBpcmF0aW9uIGludGVydmFsIHRoZSByZWdpc3RyYXIgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gd2lsbGluZyB0byBob25vci4gIEl0IHRoZW4gc2tpcHMgdGhlIHJlbWFpbmluZyBzdGVwcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMC4zXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UubWVzc2FnZS5oYXNIZWFkZXIoXCJtaW4tZXhwaXJlc1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyByZXNwb25zZSBNVVNUIGNvbnRhaW4gYSBNaW4tRXhwaXJlcyBoZWFkZXIgZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiNDIzIHJlc3BvbnNlIHJlY2VpdmVkIGZvciBSRUdJU1RFUiB3aXRob3V0IE1pbi1FeHBpcmVzLCBkcm9wcGluZyByZXNwb25zZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlcmVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhaXRpbmdUb2dnbGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIEluY3JlYXNlIG91ciByZWdpc3RyYXRpb24gaW50ZXJ2YWwgdG8gdGhlIHN1Z2dlc3RlZCBtaW5pbXVtXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwaXJlcyA9IE51bWJlcihyZXNwb25zZS5tZXNzYWdlLmdldEhlYWRlcihcIm1pbi1leHBpcmVzXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB0aGUgcmVnaXN0cmF0aW9uIGFnYWluIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FpdGluZ1RvZ2dsZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBGYWlsZWQgdG8gcmVnaXN0ZXIsIHN0YXR1cyBjb2RlICR7cmVzcG9uc2UubWVzc2FnZS5zdGF0dXNDb2RlfWApO1xuICAgICAgICAgICAgICAgIC8vIFRoZSBSZXRyeS1BZnRlciBoZWFkZXIgZmllbGQgY2FuIGJlIHVzZWQgd2l0aCBhIDUwMCAoU2VydmVyIEludGVybmFsXG4gICAgICAgICAgICAgICAgLy8gRXJyb3IpIG9yIDUwMyAoU2VydmljZSBVbmF2YWlsYWJsZSkgcmVzcG9uc2UgdG8gaW5kaWNhdGUgaG93IGxvbmcgdGhlXG4gICAgICAgICAgICAgICAgLy8gc2VydmljZSBpcyBleHBlY3RlZCB0byBiZSB1bmF2YWlsYWJsZSB0byB0aGUgcmVxdWVzdGluZyBjbGllbnQuLi5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzI2MSNzZWN0aW9uLTIwLjMzXG4gICAgICAgICAgICAgICAgbGV0IHJldHJ5QWZ0ZXJEdXJhdGlvbiA9IE5hTjtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubWVzc2FnZS5zdGF0dXNDb2RlID09PSA1MDAgfHwgcmVzcG9uc2UubWVzc2FnZS5zdGF0dXNDb2RlID09PSA1MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gcmVzcG9uc2UubWVzc2FnZS5nZXRIZWFkZXIoXCJyZXRyeS1hZnRlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlBZnRlckR1cmF0aW9uID0gTnVtYmVyLnBhcnNlSW50KGhlYWRlciwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTZXQgZm9yIHRoZSBzdGF0ZSBjaGFuZ2UgKGlmIGFueSkgYW5kIHRoZSBkZWxlZ2F0ZSBjYWxsYmFjayAoaWYgYW55KVxuICAgICAgICAgICAgICAgIHRoaXMuX3JldHJ5QWZ0ZXIgPSBpc05hTihyZXRyeUFmdGVyRHVyYXRpb24pID8gdW5kZWZpbmVkIDogcmV0cnlBZnRlckR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlcmVkKCk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVxdWVzdERlbGVnYXRlICYmIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fcmV0cnlBZnRlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLndhaXRpbmdUb2dnbGUoZmFsc2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uVHJ5aW5nOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUgJiYgb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUub25UcnlpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUub25UcnlpbmcocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUob3V0Z29pbmdSZWdpc3RlclJlcXVlc3QpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyB0aGUgUkVHSVNURVIgcmVxdWVzdCB3aXRoIGV4cGlyZXMgZXF1YWwgdG8gemVyby5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFJlamVjdHMgd2l0aCBgUmVxdWVzdFBlbmRpbmdFcnJvcmAgaWYgYSBSRUdJU1RFUiByZXF1ZXN0IGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgdW5yZWdpc3RlcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFJlZ2lzdGVyZXJTdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlRXJyb3IoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlZ2lzdGVyZXIgdGVybWluYXRlZC4gVW5hYmxlIHRvIHJlZ2lzdGVyLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFJlZ2lzdGVyZXJTdGF0ZS5SZWdpc3RlcmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVucmVnaXN0ZXIgd2hpbGUgZGlzcG9zaW5nIGFuZCByZWdpc3RlcmVkXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUVycm9yKCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVnaXN0ZXJlciBkaXNwb3NlZC4gVW5hYmxlIHRvIHJlZ2lzdGVyLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBVQXMgTVVTVCBOT1Qgc2VuZCBhIG5ldyByZWdpc3RyYXRpb24gKHRoYXQgaXMsIGNvbnRhaW5pbmcgbmV3IENvbnRhY3RcbiAgICAgICAgLy8gaGVhZGVyIGZpZWxkIHZhbHVlcywgYXMgb3Bwb3NlZCB0byBhIHJldHJhbnNtaXNzaW9uKSB1bnRpbCB0aGV5IGhhdmVcbiAgICAgICAgLy8gcmVjZWl2ZWQgYSBmaW5hbCByZXNwb25zZSBmcm9tIHRoZSByZWdpc3RyYXIgZm9yIHRoZSBwcmV2aW91cyBvbmUgb3JcbiAgICAgICAgLy8gdGhlIHByZXZpb3VzIFJFR0lTVEVSIHJlcXVlc3QgaGFzIHRpbWVkIG91dC5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMC4yXG4gICAgICAgIGlmICh0aGlzLndhaXRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMud2FpdGluZ1dhcm5pbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFJlcXVlc3RQZW5kaW5nRXJyb3IoXCJSRUdJU1RFUiByZXF1ZXN0IGFscmVhZHkgaW4gcHJvZ3Jlc3MsIHdhaXRpbmcgZm9yIGZpbmFsIHJlc3BvbnNlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fc3RhdGUgIT09IFJlZ2lzdGVyZXJTdGF0ZS5SZWdpc3RlcmVkICYmICFvcHRpb25zLmFsbCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIk5vdCBjdXJyZW50bHkgcmVnaXN0ZXJlZCwgYnV0IHNlbmRpbmcgYW4gdW5yZWdpc3RlciBhbnl3YXkuXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEV4dHJhIGhlYWRlcnNcbiAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzID0gKChvcHRpb25zLnJlcXVlc3RPcHRpb25zICYmIG9wdGlvbnMucmVxdWVzdE9wdGlvbnMuZXh0cmFIZWFkZXJzKSB8fCBbXSkuc2xpY2UoKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0LmV4dHJhSGVhZGVycyA9IGV4dHJhSGVhZGVycztcbiAgICAgICAgLy8gUmVnaXN0cmF0aW9ucyBhcmUgc29mdCBzdGF0ZSBhbmQgZXhwaXJlIHVubGVzcyByZWZyZXNoZWQsIGJ1dCBjYW5cbiAgICAgICAgLy8gYWxzbyBiZSBleHBsaWNpdGx5IHJlbW92ZWQuICBBIGNsaWVudCBjYW4gYXR0ZW1wdCB0byBpbmZsdWVuY2UgdGhlXG4gICAgICAgIC8vIGV4cGlyYXRpb24gaW50ZXJ2YWwgc2VsZWN0ZWQgYnkgdGhlIHJlZ2lzdHJhciBhcyBkZXNjcmliZWQgaW4gU2VjdGlvblxuICAgICAgICAvLyAxMC4yLjEuICBBIFVBIHJlcXVlc3RzIHRoZSBpbW1lZGlhdGUgcmVtb3ZhbCBvZiBhIGJpbmRpbmcgYnlcbiAgICAgICAgLy8gc3BlY2lmeWluZyBhbiBleHBpcmF0aW9uIGludGVydmFsIG9mIFwiMFwiIGZvciB0aGF0IGNvbnRhY3QgYWRkcmVzcyBpblxuICAgICAgICAvLyBhIFJFR0lTVEVSIHJlcXVlc3QuICBVQXMgU0hPVUxEIHN1cHBvcnQgdGhpcyBtZWNoYW5pc20gc28gdGhhdFxuICAgICAgICAvLyBiaW5kaW5ncyBjYW4gYmUgcmVtb3ZlZCBiZWZvcmUgdGhlaXIgZXhwaXJhdGlvbiBpbnRlcnZhbCBoYXMgcGFzc2VkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgUkVHSVNURVItc3BlY2lmaWMgQ29udGFjdCBoZWFkZXIgZmllbGQgdmFsdWUgb2YgXCIqXCIgYXBwbGllcyB0b1xuICAgICAgICAvLyBhbGwgcmVnaXN0cmF0aW9ucywgYnV0IGl0IE1VU1QgTk9UIGJlIHVzZWQgdW5sZXNzIHRoZSBFeHBpcmVzIGhlYWRlclxuICAgICAgICAvLyBmaWVsZCBpcyBwcmVzZW50IHdpdGggYSB2YWx1ZSBvZiBcIjBcIi5cbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMyNjEjc2VjdGlvbi0xMC4yLjJcbiAgICAgICAgaWYgKG9wdGlvbnMuYWxsKSB7XG4gICAgICAgICAgICBleHRyYUhlYWRlcnMucHVzaChcIkNvbnRhY3Q6ICpcIik7XG4gICAgICAgICAgICBleHRyYUhlYWRlcnMucHVzaChcIkV4cGlyZXM6IDBcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHRyYUhlYWRlcnMucHVzaChcIkNvbnRhY3Q6IFwiICsgdGhpcy5nZW5lcmF0ZUNvbnRhY3RIZWFkZXIoMCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhbGwtSUQ6IEFsbCByZWdpc3RyYXRpb25zIGZyb20gYSBVQUMgU0hPVUxEIHVzZSB0aGUgc2FtZSBDYWxsLUlEXG4gICAgICAgIC8vIGhlYWRlciBmaWVsZCB2YWx1ZSBmb3IgcmVnaXN0cmF0aW9ucyBzZW50IHRvIGEgcGFydGljdWxhclxuICAgICAgICAvLyByZWdpc3RyYXIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIENTZXE6IFRoZSBDU2VxIHZhbHVlIGd1YXJhbnRlZXMgcHJvcGVyIG9yZGVyaW5nIG9mIFJFR0lTVEVSXG4gICAgICAgIC8vIHJlcXVlc3RzLiAgQSBVQSBNVVNUIGluY3JlbWVudCB0aGUgQ1NlcSB2YWx1ZSBieSBvbmUgZm9yIGVhY2hcbiAgICAgICAgLy8gUkVHSVNURVIgcmVxdWVzdCB3aXRoIHRoZSBzYW1lIENhbGwtSUQuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzMjYxI3NlY3Rpb24tMTAuMlxuICAgICAgICB0aGlzLnJlcXVlc3QuY3NlcSsrO1xuICAgICAgICB0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKFwiY3NlcVwiLCB0aGlzLnJlcXVlc3QuY3NlcSArIFwiIFJFR0lTVEVSXCIpO1xuICAgICAgICAvLyBQcmUtZW1wdGl2ZSBjbGVhciB0aGUgcmVnaXN0cmF0aW9uIHRpbWVyIHRvIGF2b2lkIGEgcmFjZSBjb25kaXRpb24gd2hlcmVcbiAgICAgICAgLy8gdGhpcyB0aW1lciBmaXJlcyB3aGlsZSB3YWl0aW5nIGZvciBhIGZpbmFsIHJlc3BvbnNlIHRvIHRoZSB1bnN1YnNjcmliZS5cbiAgICAgICAgaWYgKHRoaXMucmVnaXN0cmF0aW9uVGltZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RyYXRpb25UaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndhaXRpbmdUb2dnbGUodHJ1ZSk7XG4gICAgICAgIGNvbnN0IG91dGdvaW5nUmVnaXN0ZXJSZXF1ZXN0ID0gdGhpcy51c2VyQWdlbnQudXNlckFnZW50Q29yZS5yZWdpc3Rlcih0aGlzLnJlcXVlc3QsIHtcbiAgICAgICAgICAgIG9uQWNjZXB0OiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250YWN0cyA9IHJlc3BvbnNlLm1lc3NhZ2UuZ2V0SGVhZGVycyhcImNvbnRhY3RcIik7IC8vIFVwZGF0ZSBjb250YWN0c1xuICAgICAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlcmVkKCk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVxdWVzdERlbGVnYXRlICYmIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy53YWl0aW5nVG9nZ2xlKGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblByb2dyZXNzOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUgJiYgb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUub25Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZS5vblByb2dyZXNzKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25SZWRpcmVjdDogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJVbnJlZ2lzdGVyIHJlZGlyZWN0ZWQuIE5vdCBjdXJyZW50bHkgc3VwcG9ydGVkLlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJlZCgpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZSAmJiBvcHRpb25zLnJlcXVlc3REZWxlZ2F0ZS5vblJlZGlyZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUmVkaXJlY3QocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLndhaXRpbmdUb2dnbGUoZmFsc2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVqZWN0OiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgVW5yZWdpc3RlciByZWplY3RlZCB3aXRoIHN0YXR1cyBjb2RlICR7cmVzcG9uc2UubWVzc2FnZS5zdGF0dXNDb2RlfWApO1xuICAgICAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlcmVkKCk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVxdWVzdERlbGVnYXRlICYmIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy53YWl0aW5nVG9nZ2xlKGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblRyeWluZzogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVxdWVzdERlbGVnYXRlICYmIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uVHJ5aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdERlbGVnYXRlLm9uVHJ5aW5nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG91dGdvaW5nUmVnaXN0ZXJSZXF1ZXN0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXIgcmVnaXN0cmF0aW9uIHRpbWVycy5cbiAgICAgKi9cbiAgICBjbGVhclRpbWVycygpIHtcbiAgICAgICAgaWYgKHRoaXMucmVnaXN0cmF0aW9uVGltZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RyYXRpb25UaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyKTtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIENvbnRhY3QgSGVhZGVyXG4gICAgICovXG4gICAgZ2VuZXJhdGVDb250YWN0SGVhZGVyKGV4cGlyZXMpIHtcbiAgICAgICAgbGV0IGNvbnRhY3QgPSB0aGlzLnVzZXJBZ2VudC5jb250YWN0LnRvU3RyaW5nKCk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVnSWQgJiYgdGhpcy5vcHRpb25zLmluc3RhbmNlSWQpIHtcbiAgICAgICAgICAgIGNvbnRhY3QgKz0gXCI7cmVnLWlkPVwiICsgdGhpcy5vcHRpb25zLnJlZ0lkO1xuICAgICAgICAgICAgY29udGFjdCArPSAnOytzaXAuaW5zdGFuY2U9XCI8dXJuOnV1aWQ6JyArIHRoaXMub3B0aW9ucy5pbnN0YW5jZUlkICsgJz5cIic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHRyYUNvbnRhY3RIZWFkZXJQYXJhbXMpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5leHRyYUNvbnRhY3RIZWFkZXJQYXJhbXMuZm9yRWFjaCgoaGVhZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29udGFjdCArPSBcIjtcIiArIGhlYWRlcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRhY3QgKz0gXCI7ZXhwaXJlcz1cIiArIGV4cGlyZXM7XG4gICAgICAgIHJldHVybiBjb250YWN0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24sIGNhbGxlZCB3aGVuIHJlZ2lzdGVyZWQuXG4gICAgICovXG4gICAgcmVnaXN0ZXJlZChleHBpcmVzKSB7XG4gICAgICAgIHRoaXMuY2xlYXJUaW1lcnMoKTtcbiAgICAgICAgLy8gUmUtUmVnaXN0ZXIgYmVmb3JlIHRoZSBleHBpcmF0aW9uIGludGVydmFsIGhhcyBlbGFwc2VkLlxuICAgICAgICAvLyBGb3IgdGhhdCwgY2FsY3VsYXRlIHRoZSBkZWxheSBhcyBhIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4cGlyYXRpb24gdGltZVxuICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvblRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvblRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RlcigpO1xuICAgICAgICB9LCAodGhpcy5yZWZyZXNoRnJlcXVlbmN5IC8gMTAwKSAqIGV4cGlyZXMgKiAxMDAwKTtcbiAgICAgICAgLy8gV2UgYXJlIHVucmVnaXN0ZXJlZCBpZiB0aGUgcmVnaXN0cmF0aW9uIGV4cGlyZXMuXG4gICAgICAgIHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiUmVnaXN0cmF0aW9uIGV4cGlyZWRcIik7XG4gICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJlZCgpO1xuICAgICAgICB9LCBleHBpcmVzICogMTAwMCk7XG4gICAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gUmVnaXN0ZXJlclN0YXRlLlJlZ2lzdGVyZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFJlZ2lzdGVyZXJTdGF0ZS5SZWdpc3RlcmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24sIGNhbGxlZCB3aGVuIHVucmVnaXN0ZXJlZC5cbiAgICAgKi9cbiAgICB1bnJlZ2lzdGVyZWQoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJUaW1lcnMoKTtcbiAgICAgICAgaWYgKHRoaXMuX3N0YXRlICE9PSBSZWdpc3RlcmVyU3RhdGUuVW5yZWdpc3RlcmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihSZWdpc3RlcmVyU3RhdGUuVW5yZWdpc3RlcmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24sIGNhbGxlZCB3aGVuIHRlcm1pbmF0ZWQuXG4gICAgICovXG4gICAgdGVybWluYXRlZCgpIHtcbiAgICAgICAgdGhpcy5jbGVhclRpbWVycygpO1xuICAgICAgICBpZiAodGhpcy5fc3RhdGUgIT09IFJlZ2lzdGVyZXJTdGF0ZS5UZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlVHJhbnNpdGlvbihSZWdpc3RlcmVyU3RhdGUuVGVybWluYXRlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNpdGlvbiByZWdpc3RyYXRpb24gc3RhdGUuXG4gICAgICovXG4gICAgc3RhdGVUcmFuc2l0aW9uKG5ld1N0YXRlKSB7XG4gICAgICAgIGNvbnN0IGludmFsaWRUcmFuc2l0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuX3N0YXRlfSB0byAke25ld1N0YXRlfWApO1xuICAgICAgICB9O1xuICAgICAgICAvLyBWYWxpZGF0ZSB0cmFuc2l0aW9uXG4gICAgICAgIHN3aXRjaCAodGhpcy5fc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgUmVnaXN0ZXJlclN0YXRlLkluaXRpYWw6XG4gICAgICAgICAgICAgICAgaWYgKG5ld1N0YXRlICE9PSBSZWdpc3RlcmVyU3RhdGUuUmVnaXN0ZXJlZCAmJlxuICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSAhPT0gUmVnaXN0ZXJlclN0YXRlLlVucmVnaXN0ZXJlZCAmJlxuICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSAhPT0gUmVnaXN0ZXJlclN0YXRlLlRlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlZ2lzdGVyZXJTdGF0ZS5SZWdpc3RlcmVkOlxuICAgICAgICAgICAgICAgIGlmIChuZXdTdGF0ZSAhPT0gUmVnaXN0ZXJlclN0YXRlLlVucmVnaXN0ZXJlZCAmJiBuZXdTdGF0ZSAhPT0gUmVnaXN0ZXJlclN0YXRlLlRlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlZ2lzdGVyZXJTdGF0ZS5VbnJlZ2lzdGVyZWQ6XG4gICAgICAgICAgICAgICAgaWYgKG5ld1N0YXRlICE9PSBSZWdpc3RlcmVyU3RhdGUuUmVnaXN0ZXJlZCAmJiBuZXdTdGF0ZSAhPT0gUmVnaXN0ZXJlclN0YXRlLlRlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlZ2lzdGVyZXJTdGF0ZS5UZXJtaW5hdGVkOlxuICAgICAgICAgICAgICAgIGludmFsaWRUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBzdGF0ZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVHJhbnNpdGlvblxuICAgICAgICB0aGlzLl9zdGF0ZSA9IG5ld1N0YXRlO1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFJlZ2lzdHJhdGlvbiB0cmFuc2l0aW9uZWQgdG8gc3RhdGUgJHt0aGlzLl9zdGF0ZX1gKTtcbiAgICAgICAgdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXIuZW1pdCh0aGlzLl9zdGF0ZSk7XG4gICAgICAgIC8vIERpc3Bvc2VcbiAgICAgICAgaWYgKG5ld1N0YXRlID09PSBSZWdpc3RlcmVyU3RhdGUuVGVybWluYXRlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlIHJlZ2lzdGVyZXIgaXMgY3VycmVudGx5IHdhaXRpbmcgZm9yIGZpbmFsIHJlc3BvbnNlIHRvIGEgUkVHSVNURVIgcmVxdWVzdC4gKi9cbiAgICBnZXQgd2FpdGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dhaXRpbmc7XG4gICAgfVxuICAgIC8qKiBFbWl0cyB3aGVuIHRoZSByZWdpc3RlcmVyIHdhaXRpbmcgc3RhdGUgY2hhbmdlcy4gKi9cbiAgICBnZXQgd2FpdGluZ0NoYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dhaXRpbmdFdmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSB3YWl0aW5nLlxuICAgICAqL1xuICAgIHdhaXRpbmdUb2dnbGUod2FpdGluZykge1xuICAgICAgICBpZiAodGhpcy5fd2FpdGluZyA9PT0gd2FpdGluZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHdhaXRpbmcgdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5fd2FpdGluZ30gdG8gJHt3YWl0aW5nfWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3dhaXRpbmcgPSB3YWl0aW5nO1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFdhaXRpbmcgdG9nZ2xlZCB0byAke3RoaXMuX3dhaXRpbmd9YCk7XG4gICAgICAgIHRoaXMuX3dhaXRpbmdFdmVudEVtaXR0ZXIuZW1pdCh0aGlzLl93YWl0aW5nKTtcbiAgICB9XG4gICAgLyoqIEhvcGVmdWxseSBoZWxwZnVsIGFzIHRoZSBzdGFuZGFyZCBiZWhhdmlvciBoYXMgYmVlbiBmb3VuZCB0byBiZSB1bmV4cGVjdGVkLiAqL1xuICAgIHdhaXRpbmdXYXJuaW5nKCkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9IFwiQW4gYXR0ZW1wdCB3YXMgbWFkZSB0byBzZW5kIGEgUkVHSVNURVIgcmVxdWVzdCB3aGlsZSBhIHByaW9yIG9uZSB3YXMgc3RpbGwgaW4gcHJvZ3Jlc3MuXCI7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCIgUkZDIDMyNjEgcmVxdWlyZXMgVUFzIE1VU1QgTk9UIHNlbmQgYSBuZXcgcmVnaXN0cmF0aW9uIHVudGlsIHRoZXkgaGF2ZSByZWNlaXZlZCBhIGZpbmFsIHJlc3BvbnNlXCI7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCIgZnJvbSB0aGUgcmVnaXN0cmFyIGZvciB0aGUgcHJldmlvdXMgb25lIG9yIHRoZSBwcmV2aW91cyBSRUdJU1RFUiByZXF1ZXN0IGhhcyB0aW1lZCBvdXQuXCI7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCIgTm90ZSB0aGF0IGlmIHRoZSB0cmFuc3BvcnQgZGlzY29ubmVjdHMsIHlvdSBzdGlsbCBtdXN0IHdhaXQgZm9yIHRoZSBwcmlvciByZXF1ZXN0IHRvIHRpbWUgb3V0IGJlZm9yZVwiO1xuICAgICAgICBtZXNzYWdlICs9XG4gICAgICAgICAgICBcIiBzZW5kaW5nIGEgbmV3IFJFR0lTVEVSIHJlcXVlc3Qgb3IgYWx0ZXJuYXRpdmVseSBkaXNwb3NlIG9mIHRoZSBjdXJyZW50IFJlZ2lzdGVyZXIgYW5kIGNyZWF0ZSBhIG5ldyBSZWdpc3RlcmVyLlwiO1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvKiogSG9wZWZ1bGx5IGhlbHBmdWwgYXMgdGhlIHN0YW5kYXJkIGJlaGF2aW9yIGhhcyBiZWVuIGZvdW5kIHRvIGJlIHVuZXhwZWN0ZWQuICovXG4gICAgc3RhdGVFcnJvcigpIHtcbiAgICAgICAgY29uc3QgcmVhc29uID0gdGhpcy5zdGF0ZSA9PT0gUmVnaXN0ZXJlclN0YXRlLlRlcm1pbmF0ZWQgPyBcImlzIGluICdUZXJtaW5hdGVkJyBzdGF0ZVwiIDogXCJoYXMgYmVlbiBkaXNwb3NlZFwiO1xuICAgICAgICBsZXQgbWVzc2FnZSA9IGBBbiBhdHRlbXB0IHdhcyBtYWRlIHRvIHNlbmQgYSBSRUdJU1RFUiByZXF1ZXN0IHdoZW4gdGhlIFJlZ2lzdGVyZXIgJHtyZWFzb259LmA7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCIgVGhlIFJlZ2lzdGVyZXIgdHJhbnNpdGlvbnMgdG8gJ1Rlcm1pbmF0ZWQnIHdoZW4gUmVnaXN0ZXJlci5kaXNwb3NlKCkgaXMgY2FsbGVkLlwiO1xuICAgICAgICBtZXNzYWdlICs9IFwiIFBlcmhhcHMgeW91IGNhbGxlZCBVc2VyQWdlbnQuc3RvcCgpIHdoaWNoIGRpcHNvc2VzIG9mIGFsbCBSZWdpc3RlcmVycz9cIjtcbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IobWVzc2FnZSk7XG4gICAgfVxufVxuUmVnaXN0ZXJlci5kZWZhdWx0RXhwaXJlcyA9IDYwMDtcblJlZ2lzdGVyZXIuZGVmYXVsdFJlZnJlc2hGcmVxdWVuY3kgPSA5OTtcbiIsImltcG9ydCB7IEMsIEdyYW1tYXIgfSBmcm9tIFwiLi4vY29yZVwiO1xuLyoqXG4gKiBBIG1lc3NhZ2VyIHNlbmRzIGEge0BsaW5rIE1lc3NhZ2V9IChvdXRnb2luZyBNRVNTQUdFKS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE1lc3NhZ2VyIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBgTWVzc2FnZXJgIGNsYXNzLlxuICAgICAqIEBwYXJhbSB1c2VyQWdlbnQgLSBVc2VyIGFnZW50LiBTZWUge0BsaW5rIFVzZXJBZ2VudH0gZm9yIGRldGFpbHMuXG4gICAgICogQHBhcmFtIHRhcmdldFVSSSAtIFJlcXVlc3QgVVJJIGlkZW50aWZ5aW5nIHRoZSB0YXJnZXQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIGNvbnRlbnQgLSBDb250ZW50IGZvciB0aGUgYm9keSBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gY29udGVudFR5cGUgLSBDb250ZW50IHR5cGUgb2YgdGhlIGJvZHkgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGJ1Y2tldC4gU2VlIHtAbGluayBNZXNzYWdlck9wdGlvbnN9IGZvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHVzZXJBZ2VudCwgdGFyZ2V0VVJJLCBjb250ZW50LCBjb250ZW50VHlwZSA9IFwidGV4dC9wbGFpblwiLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgLy8gTG9nZ2VyXG4gICAgICAgIHRoaXMubG9nZ2VyID0gdXNlckFnZW50LmdldExvZ2dlcihcInNpcC5NZXNzYWdlclwiKTtcbiAgICAgICAgLy8gRGVmYXVsdCBvcHRpb25zIHBhcmFtc1xuICAgICAgICBvcHRpb25zLnBhcmFtcyA9IG9wdGlvbnMucGFyYW1zIHx8IHt9O1xuICAgICAgICAvLyBVUklzXG4gICAgICAgIGxldCBmcm9tVVJJID0gdXNlckFnZW50LnVzZXJBZ2VudENvcmUuY29uZmlndXJhdGlvbi5hb3I7XG4gICAgICAgIGlmIChvcHRpb25zLnBhcmFtcy5mcm9tVXJpKSB7XG4gICAgICAgICAgICBmcm9tVVJJID1cbiAgICAgICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5wYXJhbXMuZnJvbVVyaSA9PT0gXCJzdHJpbmdcIiA/IEdyYW1tYXIuVVJJUGFyc2Uob3B0aW9ucy5wYXJhbXMuZnJvbVVyaSkgOiBvcHRpb25zLnBhcmFtcy5mcm9tVXJpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZnJvbVVSSSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgZnJvbSBVUkk6IFwiICsgb3B0aW9ucy5wYXJhbXMuZnJvbVVyaSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRvVVJJID0gdGFyZ2V0VVJJO1xuICAgICAgICBpZiAob3B0aW9ucy5wYXJhbXMudG9VcmkpIHtcbiAgICAgICAgICAgIHRvVVJJID0gdHlwZW9mIG9wdGlvbnMucGFyYW1zLnRvVXJpID09PSBcInN0cmluZ1wiID8gR3JhbW1hci5VUklQYXJzZShvcHRpb25zLnBhcmFtcy50b1VyaSkgOiBvcHRpb25zLnBhcmFtcy50b1VyaTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRvVVJJKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0byBVUkk6IFwiICsgb3B0aW9ucy5wYXJhbXMudG9VcmkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE1lc3NhZ2UgcGFyYW1zXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG9wdGlvbnMucGFyYW1zID8gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucy5wYXJhbXMpIDoge307XG4gICAgICAgIC8vIEV4dHJhIGhlYWRlcnNcbiAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpO1xuICAgICAgICAvLyBCb2R5XG4gICAgICAgIGNvbnN0IGNvbnRlbnREaXNwb3NpdGlvbiA9IFwicmVuZGVyXCI7XG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICBjb250ZW50RGlzcG9zaXRpb24sXG4gICAgICAgICAgICBjb250ZW50VHlwZSxcbiAgICAgICAgICAgIGNvbnRlbnRcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQnVpbGQgdGhlIHJlcXVlc3RcbiAgICAgICAgdGhpcy5yZXF1ZXN0ID0gdXNlckFnZW50LnVzZXJBZ2VudENvcmUubWFrZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoQy5NRVNTQUdFLCB0YXJnZXRVUkksIGZyb21VUkksIHRvVVJJLCBwYXJhbXMsIGV4dHJhSGVhZGVycywgYm9keSk7XG4gICAgICAgIC8vIFVzZXIgYWdlbnRcbiAgICAgICAgdGhpcy51c2VyQWdlbnQgPSB1c2VyQWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgbWVzc2FnZShvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy51c2VyQWdlbnQudXNlckFnZW50Q29yZS5yZXF1ZXN0KHRoaXMucmVxdWVzdCwgb3B0aW9ucy5yZXF1ZXN0RGVsZWdhdGUpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSW52aXRhdGlvbiwgSW52aXRlciwgTWVzc2FnZXIsIFJlZ2lzdGVyZXIsIFJlZ2lzdGVyZXJTdGF0ZSwgUmVxdWVzdFBlbmRpbmdFcnJvciwgU2Vzc2lvblN0YXRlLCBVc2VyQWdlbnQsIFVzZXJBZ2VudFN0YXRlIH0gZnJvbSBcIi4uLy4uLy4uL2FwaVwiO1xuaW1wb3J0IHsgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlciB9IGZyb20gXCIuLi9zZXNzaW9uLWRlc2NyaXB0aW9uLWhhbmRsZXJcIjtcbmltcG9ydCB7IFRyYW5zcG9ydCB9IGZyb20gXCIuLi90cmFuc3BvcnRcIjtcbi8qKlxuICogQSBzaW1wbGUgU0lQIHVzZXIgY2xhc3MuXG4gKiBAcmVtYXJrc1xuICogV2hpbGUgdGhpcyBjbGFzcyBpcyBjb21wbGV0ZWx5IGZ1bmN0aW9uYWwgZm9yIHNpbXBsZSB1c2UgY2FzZXMsIGl0IGlzIG5vdCBpbnRlbmRlZFxuICogdG8gcHJvdmlkZSBhbiBpbnRlcmZhY2Ugd2hpY2ggaXMgc3VpdGFibGUgZm9yIG1vc3QgKG11c3QgbGVzcyBhbGwpIGFwcGxpY2F0aW9ucy5cbiAqIFdoaWxlIHRoaXMgY2xhc3MgaGFzIG1hbnkgbGltaXRhdGlvbnMgKGZvciBleGFtcGxlLCBpdCBvbmx5IGhhbmRsZXMgYSBzaW5nbGUgY29uY3VycmVudCBzZXNzaW9uKSxcbiAqIGl0IGlzLCBob3dldmVyLCBpbnRlbmRlZCB0byBzZXJ2ZSBhcyBhIHNpbXBsZSBleGFtcGxlIG9mIHVzaW5nIHRoZSBTSVAuanMgQVBJLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU2ltcGxlVXNlciB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgYFNpbXBsZVVzZXJgIGNsYXNzLlxuICAgICAqIEBwYXJhbSBzZXJ2ZXIgLSBTSVAgV2ViU29ja2V0IFNlcnZlciBVUkwuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGJ1Y2tldC4gU2VlIHtAbGluayBTaW1wbGVVc2VyT3B0aW9uc30gZm9yIGRldGFpbHMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2VydmVyLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5hdHRlbXB0aW5nUmVjb25uZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY29ubmVjdFJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhlbGQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tdXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBEZWxlZ2F0ZVxuICAgICAgICB0aGlzLmRlbGVnYXRlID0gb3B0aW9ucy5kZWxlZ2F0ZTtcbiAgICAgICAgLy8gQ29weSBvcHRpb25zXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICAvLyBVc2VyQWdlbnRPcHRpb25zXG4gICAgICAgIGNvbnN0IHVzZXJBZ2VudE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLnVzZXJBZ2VudE9wdGlvbnMpO1xuICAgICAgICAvLyBUcmFuc3BvcnRcbiAgICAgICAgaWYgKCF1c2VyQWdlbnRPcHRpb25zLnRyYW5zcG9ydENvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICB1c2VyQWdlbnRPcHRpb25zLnRyYW5zcG9ydENvbnN0cnVjdG9yID0gVHJhbnNwb3J0O1xuICAgICAgICB9XG4gICAgICAgIC8vIFRyYW5zcG9ydE9wdGlvbnNcbiAgICAgICAgaWYgKCF1c2VyQWdlbnRPcHRpb25zLnRyYW5zcG9ydE9wdGlvbnMpIHtcbiAgICAgICAgICAgIHVzZXJBZ2VudE9wdGlvbnMudHJhbnNwb3J0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gVVJJXG4gICAgICAgIGlmICghdXNlckFnZW50T3B0aW9ucy51cmkpIHtcbiAgICAgICAgICAgIC8vIElmIGFuIEFPUiB3YXMgcHJvdmlkZWQsIGNvbnZlcnQgaXQgdG8gYSBVUklcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVyaSA9IFVzZXJBZ2VudC5tYWtlVVJJKG9wdGlvbnMuYW9yKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVyaSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgdmFsaWQgVVJJIGZyb20gJHtvcHRpb25zLmFvcn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXNlckFnZW50T3B0aW9ucy51cmkgPSB1cmk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXNlckFnZW50XG4gICAgICAgIHRoaXMudXNlckFnZW50ID0gbmV3IFVzZXJBZ2VudCh1c2VyQWdlbnRPcHRpb25zKTtcbiAgICAgICAgLy8gVXNlckFnZW50J3MgZGVsZWdhdGVcbiAgICAgICAgdGhpcy51c2VyQWdlbnQuZGVsZWdhdGUgPSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgY29ubmVjdGlvbiB3aXRoIHNlcnZlciBlc3RhYmxpc2hlZFxuICAgICAgICAgICAgb25Db25uZWN0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gQ29ubmVjdGVkYCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vblNlcnZlckNvbm5lY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblNlcnZlckNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVnaXN0ZXJlciAmJiB0aGlzLnJlZ2lzdGVyUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlZ2lzdGVyaW5nLi4uYCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJlci5yZWdpc3RlcigpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgWyR7dGhpcy5pZH1dIEVycm9yIG9jY3VycmVkIHJlZ2lzdGVyaW5nIGFmdGVyIGNvbm5lY3Rpb24gd2l0aCBzZXJ2ZXIgd2FzIG9idGFpbmVkLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIEhhbmRsZSBjb25uZWN0aW9uIHdpdGggc2VydmVyIGxvc3RcbiAgICAgICAgICAgIG9uRGlzY29ubmVjdDogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gRGlzY29ubmVjdGVkYCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vblNlcnZlckRpc2Nvbm5lY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5vblNlcnZlckRpc2Nvbm5lY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIEhhbmdpbmcgdXAuLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5ndXAoKSAvLyBjbGVhbnVwIGh1bmcgY2FsbHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBFcnJvciBvY2N1cnJlZCBoYW5naW5nIHVwIGNhbGwgYWZ0ZXIgY29ubmVjdGlvbiB3aXRoIHNlcnZlciB3YXMgbG9zdC5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWdpc3RlcmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFVucmVnaXN0ZXJpbmcuLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAudW5yZWdpc3RlcigpIC8vIGNsZWFudXAgaW52YWxpZCByZWdpc3RyYXRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBbJHt0aGlzLmlkfV0gRXJyb3Igb2NjdXJyZWQgdW5yZWdpc3RlcmluZyBhZnRlciBjb25uZWN0aW9uIHdpdGggc2VydmVyIHdhcyBsb3N0LmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIE9ubHkgYXR0ZW1wdCB0byByZWNvbm5lY3QgaWYgbmV0d29yay9zZXJ2ZXIgZHJvcHBlZCB0aGUgY29ubmVjdGlvbi5cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRlbXB0UmVjb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIEhhbmRsZSBpbmNvbWluZyBpbnZpdGF0aW9uc1xuICAgICAgICAgICAgb25JbnZpdGU6IChpbnZpdGF0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjZWl2ZWQgSU5WSVRFYCk7XG4gICAgICAgICAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCBhIHByZS1leGlzdGluZyBzZXNzaW9uLiBUaGlzIGltcGxlbWVudGF0aW9uIG9ubHkgc3VwcG9ydHMgb25lIHNlc3Npb24gYXQgYSB0aW1lLlxuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIgYW4gaW5jb21pbmcgSU5WSVRFIHJlcXVlc3QgbWF5IGJlIHJlY2VpdmVkIGF0IGFueSB0aW1lIGFuZC9vciB3aGlsZSBpbiB0aGUgcHJvY2Vzc1xuICAgICAgICAgICAgICAgIC8vIG9mIHNlbmRpbmcgYW4gb3V0Z29pbmcgSU5WSVRFIHJlcXVlc3QuIFNvIHdlIHJlamVjdCBhbnkgaW5jb21pbmcgSU5WSVRFIGluIHRob3NlIGNhc2VzLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgWyR7dGhpcy5pZH1dIFNlc3Npb24gYWxyZWFkeSBpbiBwcm9ncmVzcywgcmVqZWN0aW5nIElOVklURS4uLmApO1xuICAgICAgICAgICAgICAgICAgICBpbnZpdGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVqZWN0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlamVjdGVkIElOVklURWApO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBGYWlsZWQgdG8gcmVqZWN0IElOVklURWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZXJyb3IudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFVzZSBvdXIgY29uZmlndXJlZCBjb25zdHJhaW50cyBhcyBvcHRpb25zIGZvciBhbnkgSW52aXRlciBjcmVhdGVkIGFzIHJlc3VsdCBvZiBhIFJFRkVSXG4gICAgICAgICAgICAgICAgY29uc3QgcmVmZXJyYWxJbnZpdGVyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6IHsgY29uc3RyYWludHM6IHRoaXMuY29uc3RyYWludHMgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBvdXIgc2Vzc2lvblxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFNlc3Npb24oaW52aXRhdGlvbiwgcmVmZXJyYWxJbnZpdGVyT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgLy8gRGVsZWdhdGVcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uQ2FsbFJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25DYWxsUmVjZWl2ZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYFske3RoaXMuaWR9XSBObyBoYW5kbGVyIGF2YWlsYWJsZSwgcmVqZWN0aW5nIElOVklURS4uLmApO1xuICAgICAgICAgICAgICAgICAgICBpbnZpdGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVqZWN0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlamVjdGVkIElOVklURWApO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBGYWlsZWQgdG8gcmVqZWN0IElOVklURWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZXJyb3IudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBIYW5kbGUgaW5jb21pbmcgbWVzc2FnZXNcbiAgICAgICAgICAgIG9uTWVzc2FnZTogKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmFjY2VwdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZVJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZVJlY2VpdmVkKG1lc3NhZ2UucmVxdWVzdC5ib2R5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBVc2UgdGhlIFNJUC5qcyBsb2dnZXJcbiAgICAgICAgdGhpcy5sb2dnZXIgPSB0aGlzLnVzZXJBZ2VudC5nZXRMb2dnZXIoXCJzaXAuU2ltcGxlVXNlclwiKTtcbiAgICAgICAgLy8gTW9uaXRvciBuZXR3b3JrIGNvbm5lY3Rpdml0eSBhbmQgYXR0ZW1wdCByZWNvbm5lY3Rpb24gd2hlbiB3ZSBjb21lIG9ubGluZVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBPbmxpbmVgKTtcbiAgICAgICAgICAgIHRoaXMuYXR0ZW1wdFJlY29ubmVjdGlvbigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5zdGFuY2UgaWRlbnRpZmllci5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5vcHRpb25zLnVzZXJBZ2VudE9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLnVzZXJBZ2VudE9wdGlvbnMuZGlzcGxheU5hbWUpK1wiLU5YV1wiIHx8IFwiQW5vbnltb3VzXCI7XG4gICAgfVxuXG4gICAgLyoqIFRoZSBjdXJyZW50IHNlc3Npb24gKi9cbiAgICBnZXQgYWN0aXZlU2Vzc2lvbigpe1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uO1xuICAgIH1cblxuICAgIC8qKiBUaGUgbG9jYWwgbWVkaWEgc3RyZWFtLiBVbmRlZmluZWQgaWYgY2FsbCBub3QgYW5zd2VyZWQuICovXG4gICAgZ2V0IGxvY2FsTWVkaWFTdHJlYW0oKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3Qgc2RoID0gKF9hID0gdGhpcy5zZXNzaW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjtcbiAgICAgICAgaWYgKCFzZGgpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoc2RoIGluc3RhbmNlb2YgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBub3QgaW5zdGFuY2Ugb2Ygd2ViIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNkaC5sb2NhbE1lZGlhU3RyZWFtO1xuICAgIH1cbiAgICAvKiogVGhlIHJlbW90ZSBtZWRpYSBzdHJlYW0uIFVuZGVmaW5lZCBpZiBjYWxsIG5vdCBhbnN3ZXJlZC4gKi9cbiAgICBnZXQgcmVtb3RlTWVkaWFTdHJlYW0oKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3Qgc2RoID0gKF9hID0gdGhpcy5zZXNzaW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjtcbiAgICAgICAgaWYgKCFzZGgpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoc2RoIGluc3RhbmNlb2YgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBub3QgaW5zdGFuY2Ugb2Ygd2ViIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNkaC5yZW1vdGVNZWRpYVN0cmVhbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIGF1ZGlvIHRyYWNrLCBpZiBhdmFpbGFibGUuXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIGxvY2FsTWVkaWFTdHJlYW0gYW5kIGdldCB0cmFjayBmcm9tIHRoZSBzdHJlYW0uXG4gICAgICovXG4gICAgZ2V0IGxvY2FsQXVkaW9UcmFjaygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5sb2NhbE1lZGlhU3RyZWFtKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0VHJhY2tzKCkuZmluZCgodHJhY2spID0+IHRyYWNrLmtpbmQgPT09IFwiYXVkaW9cIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCB2aWRlbyB0cmFjaywgaWYgYXZhaWxhYmxlLlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBsb2NhbE1lZGlhU3RyZWFtIGFuZCBnZXQgdHJhY2sgZnJvbSB0aGUgc3RyZWFtLlxuICAgICAqL1xuICAgIGdldCBsb2NhbFZpZGVvVHJhY2soKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMubG9jYWxNZWRpYVN0cmVhbSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFRyYWNrcygpLmZpbmQoKHRyYWNrKSA9PiB0cmFjay5raW5kID09PSBcInZpZGVvXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmVtb3RlIGF1ZGlvIHRyYWNrLCBpZiBhdmFpbGFibGUuXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHJlbW90ZU1lZGlhU3RyZWFtIGFuZCBnZXQgdHJhY2sgZnJvbSB0aGUgc3RyZWFtLlxuICAgICAqL1xuICAgIGdldCByZW1vdGVBdWRpb1RyYWNrKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLnJlbW90ZU1lZGlhU3RyZWFtKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0VHJhY2tzKCkuZmluZCgodHJhY2spID0+IHRyYWNrLmtpbmQgPT09IFwiYXVkaW9cIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZW1vdGUgdmlkZW8gdHJhY2ssIGlmIGF2YWlsYWJsZS5cbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgcmVtb3RlTWVkaWFTdHJlYW0gYW5kIGdldCB0cmFjayBmcm9tIHRoZSBzdHJlYW0uXG4gICAgICovXG4gICAgZ2V0IHJlbW90ZVZpZGVvVHJhY2soKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMucmVtb3RlTWVkaWFTdHJlYW0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRUcmFja3MoKS5maW5kKCh0cmFjaykgPT4gdHJhY2sua2luZCA9PT0gXCJ2aWRlb1wiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdC5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFN0YXJ0IHRoZSBVc2VyQWdlbnQncyBXZWJTb2NrZXQgVHJhbnNwb3J0LlxuICAgICAqL1xuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIENvbm5lY3RpbmcgVXNlckFnZW50Li4uYCk7XG4gICAgICAgIHRoaXMuY29ubmVjdFJlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnVzZXJBZ2VudC5zdGF0ZSAhPT0gVXNlckFnZW50U3RhdGUuU3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlckFnZW50LnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudXNlckFnZW50LnJlY29ubmVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNjb25uZWN0LlxuICAgICAqIEByZW1hcmtzXG4gICAgICogU3RvcCB0aGUgVXNlckFnZW50J3MgV2ViU29ja2V0IFRyYW5zcG9ydC5cbiAgICAgKi9cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBEaXNjb25uZWN0aW5nIFVzZXJBZ2VudC4uLmApO1xuICAgICAgICB0aGlzLmNvbm5lY3RSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlckFnZW50LnN0b3AoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRydWUgaWYgY29ubmVjdGVkLlxuICAgICAqL1xuICAgIGlzQ29ubmVjdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyQWdlbnQuaXNDb25uZWN0ZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnQgcmVjZWl2aW5nIGluY29taW5nIGNhbGxzLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogU2VuZCBhIFJFR0lTVEVSIHJlcXVlc3QgZm9yIHRoZSBVc2VyQWdlbnQncyBBT1IuXG4gICAgICogUmVzb2x2ZXMgd2hlbiB0aGUgUkVHSVNURVIgcmVxdWVzdCBpcyBzZW50LCBvdGhlcndpc2UgcmVqZWN0cy5cbiAgICAgKi9cbiAgICByZWdpc3RlcihyZWdpc3RlcmVyT3B0aW9ucywgcmVnaXN0ZXJlclJlZ2lzdGVyT3B0aW9ucykge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWdpc3RlcmluZyBVc2VyQWdlbnQuLi5gKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlclJlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy5yZWdpc3RlcmVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyZXIgPSBuZXcgUmVnaXN0ZXJlcih0aGlzLnVzZXJBZ2VudCwgcmVnaXN0ZXJlck9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVyLnN0YXRlQ2hhbmdlLmFkZExpc3RlbmVyKChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBSZWdpc3RlcmVyU3RhdGUuSW5pdGlhbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFJlZ2lzdGVyZXJTdGF0ZS5SZWdpc3RlcmVkOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vblJlZ2lzdGVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uUmVnaXN0ZXJlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgUmVnaXN0ZXJlclN0YXRlLlVucmVnaXN0ZXJlZDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25VbnJlZ2lzdGVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uVW5yZWdpc3RlcmVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBSZWdpc3RlcmVyU3RhdGUuVGVybWluYXRlZDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biByZWdpc3RlcmVyIHN0YXRlLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlcmVyLnJlZ2lzdGVyKHJlZ2lzdGVyZXJSZWdpc3Rlck9wdGlvbnMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcCByZWNlaXZpbmcgaW5jb21pbmcgY2FsbHMuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBTZW5kIGFuIHVuLVJFR0lTVEVSIHJlcXVlc3QgZm9yIHRoZSBVc2VyQWdlbnQncyBBT1IuXG4gICAgICogUmVzb2x2ZXMgd2hlbiB0aGUgdW4tUkVHSVNURVIgcmVxdWVzdCBpcyBzZW50LCBvdGhlcndpc2UgcmVqZWN0cy5cbiAgICAgKi9cbiAgICB1bnJlZ2lzdGVyKHJlZ2lzdGVyZXJVbnJlZ2lzdGVyT3B0aW9ucykge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBVbnJlZ2lzdGVyaW5nIFVzZXJBZ2VudC4uLmApO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICAgIGlmICghdGhpcy5yZWdpc3RlcmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJlci51bnJlZ2lzdGVyKHJlZ2lzdGVyZXJVbnJlZ2lzdGVyT3B0aW9ucykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlIGFuIG91dGdvaW5nIGNhbGwuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBTZW5kIGFuIElOVklURSByZXF1ZXN0IHRvIGNyZWF0ZSBhIG5ldyBTZXNzaW9uLlxuICAgICAqIFJlc29sdmVzIHdoZW4gdGhlIElOVklURSByZXF1ZXN0IGlzIHNlbnQsIG90aGVyd2lzZSByZWplY3RzLlxuICAgICAqIFVzZSBgb25DYWxsQW5zd2VyZWRgIGRlbGVnYXRlIG1ldGhvZCB0byBkZXRlcm1pbmUgaWYgU2Vzc2lvbiBpcyBlc3RhYmxpc2hlZC5cbiAgICAgKiBAcGFyYW0gZGVzdGluYXRpb24gLSBUaGUgdGFyZ2V0IGRlc3RpbmF0aW9uIHRvIGNhbGwuIEEgU0lQIGFkZHJlc3MgdG8gc2VuZCB0aGUgSU5WSVRFIHRvLlxuICAgICAqIEBwYXJhbSBpbnZpdGVyT3B0aW9ucyAtIE9wdGlvbmFsIG9wdGlvbnMgZm9yIEludml0ZXIgY29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIGludml0ZXJJbnZpdGVPcHRpb25zIC0gT3B0aW9uYWwgb3B0aW9ucyBmb3IgSW52aXRlci5pbnZpdGUoKS5cbiAgICAgKi9cbiAgICBjYWxsKGRlc3RpbmF0aW9uLCBpbnZpdGVyT3B0aW9ucywgaW52aXRlckludml0ZU9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gQmVnaW5uaW5nIFNlc3Npb24uLi5gKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJjYWxsIHdpdGggaW52aXRlckludml0ZU9wdGlvbnM9XCIsaW52aXRlckludml0ZU9wdGlvbnMpO1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiU2Vzc2lvbiBhbHJlYWR5IGV4aXN0cy5cIikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IFVzZXJBZ2VudC5tYWtlVVJJKGRlc3RpbmF0aW9uKTtcbiAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgYSB2YWxpZCBVUkkgZnJvbSBcIiR7ZGVzdGluYXRpb259XCJgKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXNlIG91ciBjb25maWd1cmVkIGNvbnN0cmFpbnRzIGFzIEludml0ZXJPcHRpb25zIGlmIG5vbmUgcHJvdmlkZWRcbiAgICAgICAgaWYgKCFpbnZpdGVyT3B0aW9ucykge1xuICAgICAgICAgICAgaW52aXRlck9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludml0ZXJPcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zKSB7XG4gICAgICAgICAgICBpbnZpdGVyT3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW52aXRlck9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMuY29uc3RyYWludHMpIHtcbiAgICAgICAgICAgIGludml0ZXJPcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLmNvbnN0cmFpbnRzID0gdGhpcy5jb25zdHJhaW50cztcbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgSW52aXRlciBmb3IgdGhlIG91dGdvaW5nIFNlc3Npb25cbiAgICAgICAgY29uc3QgaW52aXRlciA9IG5ldyBJbnZpdGVyKHRoaXMudXNlckFnZW50LCB0YXJnZXQsIGludml0ZXJPcHRpb25zKTtcbiAgICAgICAgLy8gU2VuZCBJTlZJVEVcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZEludml0ZShpbnZpdGVyLCBpbnZpdGVyT3B0aW9ucywgaW52aXRlckludml0ZU9wdGlvbnMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZ3VwIGEgY2FsbC5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFNlbmQgYSBCWUUgcmVxdWVzdCwgQ0FOQ0VMIHJlcXVlc3Qgb3IgcmVqZWN0IHJlc3BvbnNlIHRvIGVuZCB0aGUgY3VycmVudCBTZXNzaW9uLlxuICAgICAqIFJlc29sdmVzIHdoZW4gdGhlIHJlcXVlc3QvcmVzcG9uc2UgaXMgc2VudCwgb3RoZXJ3aXNlIHJlamVjdHMuXG4gICAgICogVXNlIGBvbkNhbGxUZXJtaW5hdGVkYCBkZWxlZ2F0ZSBtZXRob2QgdG8gZGV0ZXJtaW5lIGlmIGFuZCB3aGVuIGNhbGwgaXMgZW5kZWQuXG4gICAgICovXG4gICAgaGFuZ3VwKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBIYW5ndXAuLi5gKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVybWluYXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuc3dlciBhbiBpbmNvbWluZyBjYWxsLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogQWNjZXB0IGFuIGluY29taW5nIElOVklURSByZXF1ZXN0IGNyZWF0aW5nIGEgbmV3IFNlc3Npb24uXG4gICAgICogUmVzb2x2ZXMgd2l0aCB0aGUgcmVzcG9uc2UgaXMgc2VudCwgb3RoZXJ3aXNlIHJlamVjdHMuXG4gICAgICogVXNlIGBvbkNhbGxBbnN3ZXJlZGAgZGVsZWdhdGUgbWV0aG9kIHRvIGRldGVybWluZSBpZiBhbmQgd2hlbiBjYWxsIGlzIGVzdGFibGlzaGVkLlxuICAgICAqIEBwYXJhbSBpbnZpdGF0aW9uQWNjZXB0T3B0aW9ucyAtIE9wdGlvbmFsIG9wdGlvbnMgZm9yIEludml0ZXIuYWNjZXB0KCkuXG4gICAgICovXG4gICAgYW5zd2VyKGludml0YXRpb25BY2NlcHRPcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIEFjY2VwdGluZyBJbnZpdGF0aW9uLi4uYCk7XG4gICAgICAgIGlmICghdGhpcy5zZXNzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC5cIikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKHRoaXMuc2Vzc2lvbiBpbnN0YW5jZW9mIEludml0YXRpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiU2Vzc2lvbiBub3QgaW5zdGFuY2Ugb2YgSW52aXRhdGlvbi5cIikpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVzZSBvdXIgY29uZmlndXJlZCBjb25zdHJhaW50cyBhcyBJbnZpdGF0aW9uQWNjZXB0T3B0aW9ucyBpZiBub25lIHByb3ZpZGVkXG4gICAgICAgIGlmICghaW52aXRhdGlvbkFjY2VwdE9wdGlvbnMpIHtcbiAgICAgICAgICAgIGludml0YXRpb25BY2NlcHRPcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnZpdGF0aW9uQWNjZXB0T3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucykge1xuICAgICAgICAgICAgaW52aXRhdGlvbkFjY2VwdE9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludml0YXRpb25BY2NlcHRPcHRpb25zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLmNvbnN0cmFpbnRzKSB7XG4gICAgICAgICAgICBpbnZpdGF0aW9uQWNjZXB0T3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucy5jb25zdHJhaW50cyA9IHRoaXMuY29uc3RyYWludHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5hY2NlcHQoaW52aXRhdGlvbkFjY2VwdE9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNsaW5lIGFuIGluY29taW5nIGNhbGwuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBSZWplY3QgYW4gaW5jb21pbmcgSU5WSVRFIHJlcXVlc3QuXG4gICAgICogUmVzb2x2ZXMgd2l0aCB0aGUgcmVzcG9uc2UgaXMgc2VudCwgb3RoZXJ3aXNlIHJlamVjdHMuXG4gICAgICogVXNlIGBvbkNhbGxUZXJtaW5hdGVkYCBkZWxlZ2F0ZSBtZXRob2QgdG8gZGV0ZXJtaW5lIGlmIGFuZCB3aGVuIGNhbGwgaXMgZW5kZWQuXG4gICAgICovXG4gICAgZGVjbGluZSgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gcmVqZWN0aW5nIEludml0YXRpb24uLi5gKTtcbiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb24pIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJTZXNzaW9uIGRvZXMgbm90IGV4aXN0LlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEodGhpcy5zZXNzaW9uIGluc3RhbmNlb2YgSW52aXRhdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJTZXNzaW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGF0aW9uLlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5yZWplY3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSG9sZCBjYWxsXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBTZW5kIGEgcmUtSU5WSVRFIHdpdGggbmV3IG9mZmVyIGluZGljYXRpbmcgXCJob2xkXCIuXG4gICAgICogUmVzb2x2ZXMgd2hlbiB0aGUgcmUtSU5WSVRFIHJlcXVlc3QgaXMgc2VudCwgb3RoZXJ3aXNlIHJlamVjdHMuXG4gICAgICogVXNlIGBvbkNhbGxIb2xkYCBkZWxlZ2F0ZSBtZXRob2QgdG8gZGV0ZXJtaW5lIGlmIHJlcXVlc3QgaXMgYWNjZXB0ZWQgb3IgcmVqZWN0ZWQuXG4gICAgICogU2VlOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjMzN1xuICAgICAqL1xuICAgIGhvbGQoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIGhvbGRpbmcgc2Vzc2lvbi4uLmApO1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRIb2xkKHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbmhvbGQgY2FsbC5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFNlbmQgYSByZS1JTlZJVEUgd2l0aCBuZXcgb2ZmZXIgaW5kaWNhdGluZyBcInVuaG9sZFwiLlxuICAgICAqIFJlc29sdmVzIHdoZW4gdGhlIHJlLUlOVklURSByZXF1ZXN0IGlzIHNlbnQsIG90aGVyd2lzZSByZWplY3RzLlxuICAgICAqIFVzZSBgb25DYWxsSG9sZGAgZGVsZWdhdGUgbWV0aG9kIHRvIGRldGVybWluZSBpZiByZXF1ZXN0IGlzIGFjY2VwdGVkIG9yIHJlamVjdGVkLlxuICAgICAqIFNlZTogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYzMzdcbiAgICAgKi9cbiAgICB1bmhvbGQoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIHVuaG9sZGluZyBzZXNzaW9uLi4uYCk7XG4gICAgICAgIHJldHVybiB0aGlzLnNldEhvbGQoZmFsc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIb2xkIHN0YXRlLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVHJ1ZSBpZiBzZXNzaW9uIG1lZGlhIGlzIG9uIGhvbGQuXG4gICAgICovXG4gICAgaXNIZWxkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWxkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlIGNhbGwuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBEaXNhYmxlIHNlbmRlcidzIG1lZGlhIHRyYWNrcy5cbiAgICAgKi9cbiAgICBtdXRlKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBkaXNhYmxpbmcgbWVkaWEgdHJhY2tzLi4uYCk7XG4gICAgICAgIHRoaXMuc2V0TXV0ZSh0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5tdXRlIGNhbGwuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBFbmFibGUgc2VuZGVyJ3MgbWVkaWEgdHJhY2tzLlxuICAgICAqL1xuICAgIHVubXV0ZSgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gZW5hYmxpbmcgbWVkaWEgdHJhY2tzLi4uYCk7XG4gICAgICAgIHRoaXMuc2V0TXV0ZShmYWxzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGUgc3RhdGUuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUcnVlIGlmIHNlbmRlcidzIG1lZGlhIHRyYWNrIGlzIGRpc2FibGVkLlxuICAgICAqL1xuICAgIGlzTXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIERUTUYuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBTZW5kIGFuIElORk8gcmVxdWVzdCB3aXRoIGNvbnRlbnQgdHlwZSBhcHBsaWNhdGlvbi9kdG1mLXJlbGF5LlxuICAgICAqIEBwYXJhbSB0b25lIC0gVG9uZSB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmREVE1GKHRvbmUpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gc2VuZGluZyBEVE1GLi4uYCk7XG4gICAgICAgIC8vIEFzIFJGQyA2MDg2IHN0YXRlcywgc2VuZGluZyBEVE1GIHZpYSBJTkZPIGlzIG5vdCBzdGFuZGFyZGl6ZWQuLi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ29tcGFuaWVzIGhhdmUgYmVlbiB1c2luZyBJTkZPIG1lc3NhZ2VzIGluIG9yZGVyIHRvIHRyYW5zcG9ydFxuICAgICAgICAvLyBEdWFsLVRvbmUgTXVsdGktRnJlcXVlbmN5IChEVE1GKSB0b25lcy4gIEFsbCBtZWNoYW5pc21zIGFyZVxuICAgICAgICAvLyBwcm9wcmlldGFyeSBhbmQgaGF2ZSBub3QgYmVlbiBzdGFuZGFyZGl6ZWQuXG4gICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDg2I3NlY3Rpb24tMlxuICAgICAgICAvL1xuICAgICAgICAvLyBJdCBpcyBob3dldmVyIHdpZGVseSBzdXBwb3J0ZWQgYmFzZWQgb24gdGhpcyBkcmFmdDpcbiAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWthcGxhbi1kaXNwYXRjaC1pbmZvLWR0bWYtcGFja2FnZS0wMFxuICAgICAgICAvLyBWYWxpZGF0ZSB0b25lXG4gICAgICAgIGlmICghL15bMC05QS1EIyosXSQvLmV4ZWModG9uZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJJbnZhbGlkIERUTUYgdG9uZS5cIikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zZXNzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC5cIikpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBVQSBNVVNUIHBvcHVsYXRlIHRoZSBcImFwcGxpY2F0aW9uL2R0bWYtcmVsYXlcIiBib2R5LCBhcyBkZWZpbmVkXG4gICAgICAgIC8vIGVhcmxpZXIsIHdpdGggdGhlIGJ1dHRvbiBwcmVzc2VkIGFuZCB0aGUgZHVyYXRpb24gaXQgd2FzIHByZXNzZWRcbiAgICAgICAgLy8gZm9yLiAgVGVjaG5pY2FsbHksIHRoaXMgYWN0dWFsbHkgcmVxdWlyZXMgdGhlIElORk8gdG8gYmUgZ2VuZXJhdGVkXG4gICAgICAgIC8vIHdoZW4gdGhlIHVzZXIgKnJlbGVhc2VzKiB0aGUgYnV0dG9uLCBob3dldmVyIGlmIHRoZSB1c2VyIGhhcyBzdGlsbFxuICAgICAgICAvLyBub3QgcmVsZWFzZWQgYSBidXR0b24gYWZ0ZXIgNSBzZWNvbmRzLCB3aGljaCBpcyB0aGUgbWF4aW11bSBkdXJhdGlvblxuICAgICAgICAvLyBzdXBwb3J0ZWQgYnkgdGhpcyBtZWNoYW5pc20sIHRoZSBVQSBzaG91bGQgZ2VuZXJhdGUgdGhlIElORk8gYXQgdGhhdFxuICAgICAgICAvLyB0aW1lLlxuICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQta2FwbGFuLWRpc3BhdGNoLWluZm8tZHRtZi1wYWNrYWdlLTAwI3NlY3Rpb24tNS4zXG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFNlbmRpbmcgRFRNRiB0b25lOiAke3RvbmV9YCk7XG4gICAgICAgIGNvbnN0IGR0bWYgPSB0b25lO1xuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IDIwMDA7XG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICBjb250ZW50RGlzcG9zaXRpb246IFwicmVuZGVyXCIsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9kdG1mLXJlbGF5XCIsXG4gICAgICAgICAgICBjb250ZW50OiBcIlNpZ25hbD1cIiArIGR0bWYgKyBcIlxcclxcbkR1cmF0aW9uPVwiICsgZHVyYXRpb25cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7IGJvZHkgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5pbmZvKHsgcmVxdWVzdE9wdGlvbnMgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZS5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFNlbmQgYSBNRVNTQUdFIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIGRlc3RpbmF0aW9uIC0gVGhlIHRhcmdldCBkZXN0aW5hdGlvbiBmb3IgdGhlIG1lc3NhZ2UuIEEgU0lQIGFkZHJlc3MgdG8gc2VuZCB0aGUgTUVTU0FHRSB0by5cbiAgICAgKi9cbiAgICBtZXNzYWdlKGRlc3RpbmF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIHNlbmRpbmcgbWVzc2FnZS4uLmApO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBVc2VyQWdlbnQubWFrZVVSSShkZXN0aW5hdGlvbik7XG4gICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGEgdmFsaWQgVVJJIGZyb20gXCIke2Rlc3RpbmF0aW9ufVwiYCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTWVzc2FnZXIodGhpcy51c2VyQWdlbnQsIHRhcmdldCwgbWVzc2FnZSkubWVzc2FnZSgpO1xuICAgIH1cbiAgICAvKiogTWVkaWEgY29uc3RyYWludHMuICovXG4gICAgZ2V0IGNvbnN0cmFpbnRzKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBjb25zdHJhaW50cyA9IHsgYXVkaW86IHRydWUsIHZpZGVvOiBmYWxzZSB9OyAvLyBkZWZhdWx0IHRvIGF1ZGlvIG9ubHkgY2FsbHNcbiAgICAgICAgaWYgKChfYSA9IHRoaXMub3B0aW9ucy5tZWRpYSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnN0cmFpbnRzKSB7XG4gICAgICAgICAgICBjb25zdHJhaW50cyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0aW9ucy5tZWRpYS5jb25zdHJhaW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHJlY29ubmVjdGlvbiB1cCB0byBgbWF4UmVjb25uZWN0aW9uQXR0ZW1wdHNgIHRpbWVzLlxuICAgICAqIEBwYXJhbSByZWNvbm5lY3Rpb25BdHRlbXB0IC0gQ3VycmVudCBhdHRlbXB0IG51bWJlci5cbiAgICAgKi9cbiAgICBhdHRlbXB0UmVjb25uZWN0aW9uKHJlY29ubmVjdGlvbkF0dGVtcHQgPSAxKSB7XG4gICAgICAgIGNvbnN0IHJlY29ubmVjdGlvbkF0dGVtcHRzID0gdGhpcy5vcHRpb25zLnJlY29ubmVjdGlvbkF0dGVtcHRzIHx8IDM7XG4gICAgICAgIGNvbnN0IHJlY29ubmVjdGlvbkRlbGF5ID0gdGhpcy5vcHRpb25zLnJlY29ubmVjdGlvbkRlbGF5IHx8IDQ7XG4gICAgICAgIGlmICghdGhpcy5jb25uZWN0UmVxdWVzdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWNvbm5lY3Rpb24gbm90IGN1cnJlbnRseSBkZXNpcmVkYCk7XG4gICAgICAgICAgICByZXR1cm47IC8vIElmIGludGVudGlvbmFsbHkgZGlzY29ubmVjdGVkLCBkb24ndCByZWNvbm5lY3QuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXR0ZW1wdGluZ1JlY29ubmVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjb25uZWN0aW9uIGF0dGVtcHQgYWxyZWFkeSBpbiBwcm9ncmVzc2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWNvbm5lY3Rpb25BdHRlbXB0ID4gcmVjb25uZWN0aW9uQXR0ZW1wdHMpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlY29ubmVjdGlvbiBtYXhpbXVtIGF0dGVtcHRzIHJlYWNoZWRgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjb25uZWN0aW9uQXR0ZW1wdCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjb25uZWN0aW9uIGF0dGVtcHQgJHtyZWNvbm5lY3Rpb25BdHRlbXB0fSBvZiAke3JlY29ubmVjdGlvbkF0dGVtcHRzfSAtIHRyeWluZ2ApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjb25uZWN0aW9uIGF0dGVtcHQgJHtyZWNvbm5lY3Rpb25BdHRlbXB0fSBvZiAke3JlY29ubmVjdGlvbkF0dGVtcHRzfSAtIHRyeWluZyBpbiAke3JlY29ubmVjdGlvbkRlbGF5fSBzZWNvbmRzYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hdHRlbXB0aW5nUmVjb25uZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY29ubmVjdFJlcXVlc3RlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlY29ubmVjdGlvbiBhdHRlbXB0ICR7cmVjb25uZWN0aW9uQXR0ZW1wdH0gb2YgJHtyZWNvbm5lY3Rpb25BdHRlbXB0c30gLSBhYm9ydGVkYCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRlbXB0aW5nUmVjb25uZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBJZiBpbnRlbnRpb25hbGx5IGRpc2Nvbm5lY3RlZCwgZG9uJ3QgcmVjb25uZWN0LlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51c2VyQWdlbnRcbiAgICAgICAgICAgICAgICAucmVjb25uZWN0KClcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjb25uZWN0aW9uIGF0dGVtcHQgJHtyZWNvbm5lY3Rpb25BdHRlbXB0fSBvZiAke3JlY29ubmVjdGlvbkF0dGVtcHRzfSAtIHN1Y2NlZWRlZGApO1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0ZW1wdGluZ1JlY29ubmVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjb25uZWN0aW9uIGF0dGVtcHQgJHtyZWNvbm5lY3Rpb25BdHRlbXB0fSBvZiAke3JlY29ubmVjdGlvbkF0dGVtcHRzfSAtIGZhaWxlZGApO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0ZW1wdGluZ1JlY29ubmVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0ZW1wdFJlY29ubmVjdGlvbigrK3JlY29ubmVjdGlvbkF0dGVtcHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIHJlY29ubmVjdGlvbkF0dGVtcHQgPT09IDEgPyAwIDogcmVjb25uZWN0aW9uRGVsYXkgKiAxMDAwKTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciBmdW5jdGlvbiB0byByZW1vdmUgbWVkaWEgZnJvbSBodG1sIGVsZW1lbnRzLiAqL1xuICAgIGNsZWFudXBNZWRpYSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tZWRpYSkge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tZWRpYS5sb2NhbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsLnZpZGVvLnNyY09iamVjdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tZWRpYS5sb2NhbC52aWRlby5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUuYXVkaW8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS5hdWRpby5zcmNPYmplY3QgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLmF1ZGlvLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLnZpZGVvKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUudmlkZW8uc3JjT2JqZWN0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS52aWRlby5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogSGVscGVyIGZ1bmN0aW9uIHRvIGVuYWJsZS9kaXNhYmxlIG1lZGlhIHRyYWNrcy4gKi9cbiAgICBlbmFibGVSZWNlaXZlclRyYWNrcyhlbmFibGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlc3Npb24gZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIgPSB0aGlzLnNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjtcbiAgICAgICAgaWYgKCEoc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlciBpbnN0YW5jZW9mIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZXNzaW9uJ3Mgc2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIG5vdCBpbnN0YW5jZSBvZiBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIucGVlckNvbm5lY3Rpb247XG4gICAgICAgIGlmICghcGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBlZXIgY29ubmVjdGlvbiBjbG9zZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHBlZXJDb25uZWN0aW9uLmdldFJlY2VpdmVycygpLmZvckVhY2goKHJlY2VpdmVyKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVjZWl2ZXIudHJhY2spIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlci50cmFjay5lbmFibGVkID0gZW5hYmxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciBmdW5jdGlvbiB0byBlbmFibGUvZGlzYWJsZSBtZWRpYSB0cmFja3MuICovXG4gICAgZW5hYmxlU2VuZGVyVHJhY2tzKGVuYWJsZSkge1xuICAgICAgICBpZiAoIXRoaXMuc2Vzc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlciA9IHRoaXMuc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyO1xuICAgICAgICBpZiAoIShzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyIGluc3RhbmNlb2YgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlc3Npb24ncyBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgbm90IGluc3RhbmNlIG9mIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5wZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgaWYgKCFwZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGVlciBjb25uZWN0aW9uIGNsb3NlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgaWYgKHNlbmRlci50cmFjaykge1xuICAgICAgICAgICAgICAgIHNlbmRlci50cmFjay5lbmFibGVkID0gZW5hYmxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0dXAgc2Vzc2lvbiBkZWxlZ2F0ZSBhbmQgc3RhdGUgY2hhbmdlIGhhbmRsZXIuXG4gICAgICogQHBhcmFtIHNlc3Npb24gLSBTZXNzaW9uIHRvIHNldHVwXG4gICAgICogQHBhcmFtIHJlZmVycmFsSW52aXRlck9wdGlvbnMgLSBPcHRpb25zIGZvciBhbnkgSW52aXRlciBjcmVhdGVkIGFzIHJlc3VsdCBvZiBhIFJFRkVSLlxuICAgICAqL1xuICAgIGluaXRTZXNzaW9uKHNlc3Npb24sIHJlZmVycmFsSW52aXRlck9wdGlvbnMpIHtcbiAgICAgICAgLy8gU2V0IHNlc3Npb25cbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICAgICAgLy8gQ2FsbCBzZXNzaW9uIGNyZWF0ZWQgY2FsbGJhY2tcbiAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vbkNhbGxDcmVhdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uQ2FsbENyZWF0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXR1cCBzZXNzaW9uIHN0YXRlIGNoYW5nZSBoYW5kbGVyXG4gICAgICAgIHRoaXMuc2Vzc2lvbi5zdGF0ZUNoYW5nZS5hZGRMaXN0ZW5lcigoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlc3Npb24gIT09IHNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIGlmIG91ciBzZXNzaW9uIGhhcyBjaGFuZ2VkLCBqdXN0IHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gc2Vzc2lvbiBzdGF0ZSBjaGFuZ2VkIHRvICR7c3RhdGV9YCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuSW5pdGlhbDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoaW5nOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hlZDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cExvY2FsTWVkaWEoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFJlbW90ZU1lZGlhKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25DYWxsQW5zd2VyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25DYWxsQW5zd2VyZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5UZXJtaW5hdGluZzpcbiAgICAgICAgICAgICAgICAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5UZXJtaW5hdGVkOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYW51cE1lZGlhKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlICYmIHRoaXMuZGVsZWdhdGUub25DYWxsSGFuZ3VwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uQ2FsbEhhbmd1cCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gc2Vzc2lvbiBzdGF0ZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTZXR1cCBkZWxlZ2F0ZVxuICAgICAgICB0aGlzLnNlc3Npb24uZGVsZWdhdGUgPSB7XG4gICAgICAgICAgICBvbkluZm86IChpbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQXMgUkZDIDYwODYgc3RhdGVzLCBzZW5kaW5nIERUTUYgdmlhIElORk8gaXMgbm90IHN0YW5kYXJkaXplZC4uLlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gQ29tcGFuaWVzIGhhdmUgYmVlbiB1c2luZyBJTkZPIG1lc3NhZ2VzIGluIG9yZGVyIHRvIHRyYW5zcG9ydFxuICAgICAgICAgICAgICAgIC8vIER1YWwtVG9uZSBNdWx0aS1GcmVxdWVuY3kgKERUTUYpIHRvbmVzLiAgQWxsIG1lY2hhbmlzbXMgYXJlXG4gICAgICAgICAgICAgICAgLy8gcHJvcHJpZXRhcnkgYW5kIGhhdmUgbm90IGJlZW4gc3RhbmRhcmRpemVkLlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MDg2I3NlY3Rpb24tMlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gSXQgaXMgaG93ZXZlciB3aWRlbHkgc3VwcG9ydGVkIGJhc2VkIG9uIHRoaXMgZHJhZnQ6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWthcGxhbi1kaXNwYXRjaC1pbmZvLWR0bWYtcGFja2FnZS0wMFxuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRTogVE9ETzogV2Ugc2hvdWxkIHJlamVjdCBjb3JyZWN0bHkuLi5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIElmIGEgVUEgcmVjZWl2ZXMgYW4gSU5GTyByZXF1ZXN0IGFzc29jaWF0ZWQgd2l0aCBhbiBJbmZvIFBhY2thZ2UgdGhhdFxuICAgICAgICAgICAgICAgIC8vIHRoZSBVQSBoYXMgbm90IGluZGljYXRlZCB3aWxsaW5nbmVzcyB0byByZWNlaXZlLCB0aGUgVUEgTVVTVCBzZW5kIGFcbiAgICAgICAgICAgICAgICAvLyA0NjkgKEJhZCBJbmZvIFBhY2thZ2UpIHJlc3BvbnNlIChzZWUgU2VjdGlvbiAxMS42KSwgd2hpY2ggY29udGFpbnMgYVxuICAgICAgICAgICAgICAgIC8vIFJlY3YtSW5mbyBoZWFkZXIgZmllbGQgd2l0aCBJbmZvIFBhY2thZ2VzIGZvciB3aGljaCB0aGUgVUEgaXMgd2lsbGluZ1xuICAgICAgICAgICAgICAgIC8vIHRvIHJlY2VpdmUgSU5GTyByZXF1ZXN0cy5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjA4NiNzZWN0aW9uLTQuMi4yXG4gICAgICAgICAgICAgICAgLy8gTm8gZGVsZWdhdGVcbiAgICAgICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMuZGVsZWdhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbkNhbGxEVE1GUmVjZWl2ZWQpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5mby5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJbnZhbGlkIGNvbnRlbnQgdHlwZVxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gaW5mby5yZXF1ZXN0LmdldEhlYWRlcihcImNvbnRlbnQtdHlwZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnRUeXBlIHx8ICEvXmFwcGxpY2F0aW9uXFwvZHRtZi1yZWxheS9pLmV4ZWMoY29udGVudFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZm8ucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSW52YWxpZCBib2R5XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGluZm8ucmVxdWVzdC5ib2R5LnNwbGl0KFwiXFxyXFxuXCIsIDIpO1xuICAgICAgICAgICAgICAgIGlmIChib2R5Lmxlbmd0aCAhPT0gMikge1xuICAgICAgICAgICAgICAgICAgICBpbmZvLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEludmFsaWQgdG9uZVxuICAgICAgICAgICAgICAgIGxldCB0b25lO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvbmVSZWdFeHAgPSAvXihTaWduYWxcXHMqPz1cXHMqPykoWzAtOUEtRCMqXXsxfSkoXFxzKT8uKi87XG4gICAgICAgICAgICAgICAgaWYgKHRvbmVSZWdFeHAudGVzdChib2R5WzBdKSkge1xuICAgICAgICAgICAgICAgICAgICB0b25lID0gYm9keVswXS5yZXBsYWNlKHRvbmVSZWdFeHAsIFwiJDJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBpbmZvLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEludmFsaWQgZHVyYXRpb25cbiAgICAgICAgICAgICAgICBsZXQgZHVyYXRpb247XG4gICAgICAgICAgICAgICAgY29uc3QgZHVyYXRpb25SZWdFeHAgPSAvXihEdXJhdGlvblxccz89XFxzPykoWzAtOV17MSw0fSkoXFxzKT8uKi87XG4gICAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uUmVnRXhwLnRlc3QoYm9keVsxXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24gPSBwYXJzZUludChib2R5WzFdLnJlcGxhY2UoZHVyYXRpb25SZWdFeHAsIFwiJDJcIiksIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpbmZvLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZm9cbiAgICAgICAgICAgICAgICAgICAgLmFjY2VwdCgpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVsZWdhdGUgJiYgdGhpcy5kZWxlZ2F0ZS5vbkNhbGxEVE1GUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdG9uZSB8fCAhZHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb25lIG9yIGR1cmF0aW9uIHVuZGVmaW5lZC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlLm9uQ2FsbERUTUZSZWNlaXZlZCh0b25lLCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVmZXI6IChyZWZlcnJhbCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlZmVycmFsXG4gICAgICAgICAgICAgICAgICAgIC5hY2NlcHQoKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLnNlbmRJbnZpdGUocmVmZXJyYWwubWFrZUludml0ZXIocmVmZXJyYWxJbnZpdGVyT3B0aW9ucyksIHJlZmVycmFsSW52aXRlck9wdGlvbnMpKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKiogSGVscGVyIGZ1bmN0aW9uIHRvIGluaXQgc2VuZCB0aGVuIHNlbmQgaW52aXRlLiAqL1xuICAgIHNlbmRJbnZpdGUoaW52aXRlciwgaW52aXRlck9wdGlvbnMsIGludml0ZXJJbnZpdGVPcHRpb25zKSB7XG4gICAgICAgIC8vIEluaXRpYWxpemUgb3VyIHNlc3Npb25cbiAgICAgICAgdGhpcy5pbml0U2Vzc2lvbihpbnZpdGVyLCBpbnZpdGVyT3B0aW9ucyk7XG4gICAgICAgIC8vIFNlbmQgdGhlIElOVklURVxuICAgICAgICBjb25zb2xlLmxvZyhcInNlbmRJbnZpdGUgXCIsaW52aXRlckludml0ZU9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gaW52aXRlci5pbnZpdGUoaW52aXRlckludml0ZU9wdGlvbnMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gc2VudCBJTlZJVEVgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1dHMgU2Vzc2lvbiBvbiBob2xkLlxuICAgICAqIEBwYXJhbSBob2xkIC0gSG9sZCBvbiBpZiB0cnVlLCBvZmYgaWYgZmFsc2UuXG4gICAgICovXG4gICAgc2V0SG9sZChob2xkKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXNzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC5cIikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIC8vIEp1c3QgcmVzb2x2ZSBpZiB3ZSBhcmUgYWxyZWFkeSBpbiBjb3JyZWN0IHN0YXRlXG4gICAgICAgIGlmICh0aGlzLmhlbGQgPT09IGhvbGQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyID0gdGhpcy5zZXNzaW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI7XG4gICAgICAgIGlmICghKHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIgaW5zdGFuY2VvZiBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbidzIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBub3QgaW5zdGFuY2Ugb2YgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHJlcXVlc3REZWxlZ2F0ZToge1xuICAgICAgICAgICAgICAgIG9uQWNjZXB0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVsZCA9IGhvbGQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlUmVjZWl2ZXJUcmFja3MoIXRoaXMuaGVsZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VuZGVyVHJhY2tzKCF0aGlzLmhlbGQgJiYgIXRoaXMubXV0ZWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uQ2FsbEhvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25DYWxsSG9sZCh0aGlzLmhlbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvblJlamVjdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBbJHt0aGlzLmlkfV0gcmUtaW52aXRlIHJlcXVlc3Qgd2FzIHJlamVjdGVkYCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlUmVjZWl2ZXJUcmFja3MoIXRoaXMuaGVsZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VuZGVyVHJhY2tzKCF0aGlzLmhlbGQgJiYgIXRoaXMubXV0ZWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSAmJiB0aGlzLmRlbGVnYXRlLm9uQ2FsbEhvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUub25DYWxsSG9sZCh0aGlzLmhlbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBTZXNzaW9uIHByb3BlcnRpZXMgdXNlZCB0byBwYXNzIG9wdGlvbnMgdG8gdGhlIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIDEpIFNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNcbiAgICAgICAgLy8gICAgU0RIIG9wdGlvbnMgZm9yIHRoZSBpbml0aWFsIElOVklURSB0cmFuc2FjdGlvbi5cbiAgICAgICAgLy8gICAgLSBVc2VkIGluIGFsbCBjYXNlcyB3aGVuIGhhbmRsaW5nIHRoZSBpbml0aWFsIElOVklURSB0cmFuc2FjdGlvbiBhcyBlaXRoZXIgVUFDIG9yIFVBUy5cbiAgICAgICAgLy8gICAgLSBNYXkgYmUgc2V0IGRpcmVjdGx5IGF0IGFueXRpbWUuXG4gICAgICAgIC8vICAgIC0gTWF5IG9wdGlvbmFsbHkgYmUgc2V0IHZpYSBjb25zdHJ1Y3RvciBvcHRpb24uXG4gICAgICAgIC8vICAgIC0gTWF5IG9wdGlvbmFsbHkgYmUgc2V0IHZpYSBvcHRpb25zIHBhc3NlZCB0byBJbnZpdGVyLmludml0ZSgpIG9yIEludml0YXRpb24uYWNjZXB0KCkuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIDIpIFNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNSZUludml0ZVxuICAgICAgICAvLyAgICBTREggb3B0aW9ucyBmb3IgcmUtSU5WSVRFIHRyYW5zYWN0aW9ucy5cbiAgICAgICAgLy8gICAgLSBVc2VkIGluIGFsbCBjYXNlcyB3aGVuIGhhbmRsaW5nIGEgcmUtSU5WSVRFIHRyYW5zYWN0aW9uIGFzIGVpdGhlciBVQUMgb3IgVUFTLlxuICAgICAgICAvLyAgICAtIE1heSBiZSBzZXQgZGlyZWN0bHkgYXQgYW55dGltZS5cbiAgICAgICAgLy8gICAgLSBNYXkgb3B0aW9uYWxseSBiZSBzZXQgdmlhIGNvbnN0cnVjdG9yIG9wdGlvbi5cbiAgICAgICAgLy8gICAgLSBNYXkgb3B0aW9uYWxseSBiZSBzZXQgdmlhIG9wdGlvbnMgcGFzc2VkIHRvIFNlc3Npb24uaW52aXRlKCkuXG4gICAgICAgIGNvbnN0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zID0gc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlO1xuICAgICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucy5ob2xkID0gaG9sZDtcbiAgICAgICAgc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlID0gc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM7XG4gICAgICAgIC8vIFNlbmQgcmUtSU5WSVRFXG4gICAgICAgIHJldHVybiB0aGlzLnNlc3Npb25cbiAgICAgICAgICAgIC5pbnZpdGUob3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIHByZWVtcHRpdmVseSBlbmFibGUvZGlzYWJsZSB0cmFja3NcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlUmVjZWl2ZXJUcmFja3MoIWhvbGQpO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVTZW5kZXJUcmFja3MoIWhvbGQgJiYgIXRoaXMubXV0ZWQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUmVxdWVzdFBlbmRpbmdFcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBbJHt0aGlzLmlkfV0gQSBob2xkIHJlcXVlc3QgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHV0cyBTZXNzaW9uIG9uIG11dGUuXG4gICAgICogQHBhcmFtIG11dGUgLSBNdXRlIG9uIGlmIHRydWUsIG9mZiBpZiBmYWxzZS5cbiAgICAgKi9cbiAgICBzZXRNdXRlKG11dGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb24pIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYFske3RoaXMuaWR9XSBBIHNlc3Npb24gaXMgcmVxdWlyZWQgdG8gZW5hYmxlZC9kaXNhYmxlIG1lZGlhIHRyYWNrc2ApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24uc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5Fc3RhYmxpc2hlZCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgWyR7dGhpcy5pZH1dIEFuIGVzdGFibGlzaGVkIHNlc3Npb24gaXMgcmVxdWlyZWQgdG8gZW5hYmxlL2Rpc2FibGUgbWVkaWEgdHJhY2tzYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tdXRlZCA9IG11dGU7XG4gICAgICAgIHRoaXMuZW5hYmxlU2VuZGVyVHJhY2tzKCF0aGlzLmhlbGQgJiYgIXRoaXMubXV0ZWQpO1xuICAgIH1cbiAgICAvKiogSGVscGVyIGZ1bmN0aW9uIHRvIGF0dGFjaCBsb2NhbCBtZWRpYSB0byBodG1sIGVsZW1lbnRzLiAqL1xuICAgIHNldHVwTG9jYWxNZWRpYSgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlc3Npb24gZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lZGlhRWxlbWVudCA9IChfYiA9IChfYSA9IHRoaXMub3B0aW9ucy5tZWRpYSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxvY2FsKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudmlkZW87XG4gICAgICAgIGlmIChtZWRpYUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsU3RyZWFtID0gdGhpcy5sb2NhbE1lZGlhU3RyZWFtO1xuICAgICAgICAgICAgaWYgKCFsb2NhbFN0cmVhbSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxvY2FsIG1lZGlhIHN0cmVhbSB1bmRlZmllbmQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVkaWFFbGVtZW50LnNyY09iamVjdCA9IGxvY2FsU3RyZWFtO1xuICAgICAgICAgICAgbWVkaWFFbGVtZW50LnZvbHVtZSA9IDA7XG4gICAgICAgICAgICBtZWRpYUVsZW1lbnQucGxheSgpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBbJHt0aGlzLmlkfV0gRmFpbGVkIHRvIHBsYXkgbG9jYWwgbWVkaWFgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gYXR0YWNoIHJlbW90ZSBtZWRpYSB0byBodG1sIGVsZW1lbnRzLiAqL1xuICAgIHNldHVwUmVtb3RlTWVkaWEoKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlc3Npb24gZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lZGlhRWxlbWVudCA9ICgoX2IgPSAoX2EgPSB0aGlzLm9wdGlvbnMubWVkaWEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZW1vdGUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi52aWRlbykgfHwgKChfZCA9IChfYyA9IHRoaXMub3B0aW9ucy5tZWRpYSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnJlbW90ZSkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmF1ZGlvKTtcbiAgICAgICAgaWYgKG1lZGlhRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgcmVtb3RlU3RyZWFtID0gdGhpcy5yZW1vdGVNZWRpYVN0cmVhbTtcbiAgICAgICAgICAgIGlmICghcmVtb3RlU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVtb3RlIG1lZGlhIHN0cmVhbSB1bmRlZmllbmQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVkaWFFbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTsgLy8gU2FmYXJpIGhhY2ssIGJlY2F1c2UgeW91IGNhbm5vdCBjYWxsIC5wbGF5KCkgZnJvbSBhIG5vbiB1c2VyIGFjdGlvblxuICAgICAgICAgICAgbWVkaWFFbGVtZW50LnNyY09iamVjdCA9IHJlbW90ZVN0cmVhbTtcbiAgICAgICAgICAgIG1lZGlhRWxlbWVudC5wbGF5KCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBGYWlsZWQgdG8gcGxheSByZW1vdGUgbWVkaWFgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVtb3RlU3RyZWFtLm9uYWRkdHJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVtb3RlIG1lZGlhIG9uYWRkdHJhY2tgKTtcbiAgICAgICAgICAgICAgICBtZWRpYUVsZW1lbnQubG9hZCgpOyAvLyBTYWZhcmkgaGFjaywgYXMgaXQgZG9lc24ndCB3b3JrIG90aGVyaXdzZVxuICAgICAgICAgICAgICAgIG1lZGlhRWxlbWVudC5wbGF5KCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBbJHt0aGlzLmlkfV0gRmFpbGVkIHRvIHBsYXkgcmVtb3RlIG1lZGlhYCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmQgYSBzZXNzaW9uLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogU2VuZCBhIEJZRSByZXF1ZXN0LCBDQU5DRUwgcmVxdWVzdCBvciByZWplY3QgcmVzcG9uc2UgdG8gZW5kIHRoZSBjdXJyZW50IFNlc3Npb24uXG4gICAgICogUmVzb2x2ZXMgd2hlbiB0aGUgcmVxdWVzdC9yZXNwb25zZSBpcyBzZW50LCBvdGhlcndpc2UgcmVqZWN0cy5cbiAgICAgKiBVc2UgYG9uQ2FsbFRlcm1pbmF0ZWRgIGRlbGVnYXRlIG1ldGhvZCB0byBkZXRlcm1pbmUgaWYgYW5kIHdoZW4gU2Vzc2lvbiBpcyB0ZXJtaW5hdGVkLlxuICAgICAqL1xuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gVGVybWluYXRpbmcuLi5gKTtcbiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb24pIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJTZXNzaW9uIGRvZXMgbm90IGV4aXN0LlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLnNlc3Npb24uc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLkluaXRpYWw6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbiBpbnN0YW5jZW9mIEludml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5jYW5jZWwoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIEludml0ZXIgbmV2ZXIgc2VudCBJTlZJVEUgKGNhbmNlbGVkKWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5zZXNzaW9uIGluc3RhbmNlb2YgSW52aXRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uLnJlamVjdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gSW52aXRhdGlvbiByZWplY3RlZCAoc2VudCA0ODApYCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBzZXNzaW9uIHR5cGUuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLkVzdGFibGlzaGluZzpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXNzaW9uIGluc3RhbmNlb2YgSW52aXRlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uLmNhbmNlbCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gSW52aXRlciBjYW5jZWxlZCAoc2VudCBDQU5DRUwpYCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNlc3Npb24gaW5zdGFuY2VvZiBJbnZpdGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlc3Npb24ucmVqZWN0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBJbnZpdGF0aW9uIHJlamVjdGVkIChzZW50IDQ4MClgKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHNlc3Npb24gdHlwZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBTZXNzaW9uU3RhdGUuRXN0YWJsaXNoZWQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5ieWUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gU2Vzc2lvbiBlbmRlZCAoc2VudCBCWUUpYCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXNlIFNlc3Npb25TdGF0ZS5UZXJtaW5hdGluZzpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gc3RhdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gVGVybWluYXRpbmcgaW4gc3RhdGUgJHt0aGlzLnNlc3Npb24uc3RhdGV9LCBubyBhY3Rpb24gdGFrZW5gKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cbiIsIi8vMHgwMS3mkq3mlL4gMHgxMC1yaW5naW4gMHgyMC1yaW5nb3V0IDB4NDAtY29ubmVjdGVkIDB4ODAtaGFuZ3VwXHJcbmV4cG9ydCB2YXIgVG9uZUZsYWc7XHJcbihmdW5jdGlvbiAoVG9uZUZsYWcpIHtcclxuICAgIFRvbmVGbGFnW1RvbmVGbGFnW1wiUklOR0lOXCJdID0gMV0gPSBcIlJJTkdJTlwiO1xyXG4gICAgVG9uZUZsYWdbVG9uZUZsYWdbXCJSSU5HT1VUXCJdID0gMl0gPSBcIlJJTkdPVVRcIjtcclxuICAgIFRvbmVGbGFnW1RvbmVGbGFnW1wiQ09OTkVDVEVEXCJdID0gNF0gPSBcIkNPTk5FQ1RFRFwiO1xyXG4gICAgVG9uZUZsYWdbVG9uZUZsYWdbXCJIQU5HVVBcIl0gPSA4XSA9IFwiSEFOR1VQXCI7XHJcbiAgICBUb25lRmxhZ1tUb25lRmxhZ1tcIk9OTElORVwiXSA9IDE2XSA9IFwiT05MSU5FXCI7XHJcbiAgICBUb25lRmxhZ1tUb25lRmxhZ1tcIkNVU1RPTVwiXSA9IDEyOF0gPSBcIkNVU1RPTVwiO1xyXG59KShUb25lRmxhZyB8fCAoVG9uZUZsYWcgPSB7fSkpO1xyXG47XHJcbi8vIGV4cG9ydCBpbnRlcmZhY2UgQ2FsbFJlcXVlc3Qge1xyXG4vLyAgIHRhcmdldEFPUjogc3RyaW5nO1xyXG4vLyAgIGV4dHJhSGVhZGVycz86IEFycmF5PHN0cmluZz47XHJcbi8vIH1cclxuLy8gZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlUmVxdWVzdCB7XHJcbi8vIH1cclxuLy8gZXhwb3J0IGludGVyZmFjZSBJbnZpdGVyQ29uZmlnIHtcclxuLy8gICBzaW1wbGVVc2VyOiBTaW1wbGVVc2VyO1xyXG4vLyAgIHRhcmdldEFPUjogc3RyaW5nO1xyXG4vLyAgIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudDtcclxuLy8gICBleHRyYUhlYWRlcnM/OiBBcnJheTxzdHJpbmc+O1xyXG4vLyB9XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW54dy10eXBlcy5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gZ2V0QXVkaW8oaWQpIHtcclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgaWYgKCEoZWwgaW5zdGFuY2VvZiBIVE1MQXVkaW9FbGVtZW50KSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRWxlbWVudCBcIiR7aWR9XCIgbm90IGZvdW5kIG9yIG5vdCBhbiBhdWRpbyBlbGVtZW50LmApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVsO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCdXR0b24oaWQpIHtcclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgaWYgKCEoZWwgaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVsZW1lbnQgXCIke2lkfVwiIG5vdCBmb3VuZCBvciBub3QgYSBidXR0b24gZWxlbWVudC5gKTtcclxuICAgIH1cclxuICAgIHJldHVybiBlbDtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnV0dG9ucyhpZCkge1xyXG4gICAgY29uc3QgZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShpZCk7XHJcbiAgICBpZiAoIWVscy5sZW5ndGgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVsZW1lbnRzIFwiJHtpZH1cIiBub3QgZm91bmQuYCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBidXR0b25zID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZWxzW2ldO1xyXG4gICAgICAgIGlmICghKGVsIGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRWxlbWVudCAke2l9IG9mIFwiJHtpZH1cIiBub3QgYSBidXR0b24gZWxlbWVudC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnV0dG9ucy5wdXNoKGVsKTtcclxuICAgIH1cclxuICAgIHJldHVybiBidXR0b25zO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREaXYoaWQpIHtcclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgaWYgKCEoZWwgaW5zdGFuY2VvZiBIVE1MRGl2RWxlbWVudCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVsZW1lbnQgXCIke2lkfVwiIG5vdCBmb3VuZCBvciBub3QgYSBkaXYgZWxlbWVudC5gKTtcclxuICAgIH1cclxuICAgIHJldHVybiBlbDtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5wdXQoaWQpIHtcclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgaWYgKCEoZWwgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRWxlbWVudCBcIiR7aWR9XCIgbm90IGZvdW5kIG9yIG5vdCBhbiBpbnB1dCBlbGVtZW50LmApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVsO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRJbnB1dChpZCwgdmFsdWUpIHtcclxuICAgIGNvbnN0IGlucHV0ID0gZ2V0SW5wdXQoaWQpO1xyXG4gICAgaW5wdXQudmFsdWUgPSB2YWx1ZSA/IHZhbHVlIDogXCJcIjtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3BhbihpZCkge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICBpZiAoIShlbCBpbnN0YW5jZW9mIEhUTUxTcGFuRWxlbWVudCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVsZW1lbnQgXCIke2lkfVwiIG5vdCBmb3VuZCBvciBub3QgYSBzcGFuIGVsZW1lbnQuYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZWw7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFZpZGVvKGlkKSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgIGlmICghKGVsIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVsZW1lbnQgXCIke2lkfVwiIG5vdCBmb3VuZCBvciBub3QgYSB2aWRlbyBlbGVtZW50LmApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVsO1xyXG59XHJcbi8v6I635Y+WaHR0cCB1cmzkuK3nmoTlj4LmlbBcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVybFBhcmFtKG5hbWUpIHtcclxuICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKFwiKF58JilcIiArIG5hbWUgKyBcIj0oW14mXSopKCZ8JClcIik7IC8v5p6E6YCg5LiA5Liq5ZCr5pyJ55uu5qCH5Y+C5pWw55qE5q2j5YiZ6KGo6L6+5byP5a+56LGhXHJcbiAgICB2YXIgciA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLm1hdGNoKHJlZyk7IC8v5Yy56YWN55uu5qCH5Y+C5pWwXHJcbiAgICAvL2lmIChyICE9IG51bGwpIHJldHVybiBkZWNvZGVVUkkoclsyXSk7IHJldHVybiBudWxsOyAvL+i/lOWbnuWPguaVsOWAvFxyXG4gICAgaWYgKHIgIT0gbnVsbClcclxuICAgICAgICByZXR1cm4gZGVjb2RlVVJJKHJbMl0pO1xyXG4gICAgcmV0dXJuIFwiXCI7IC8v6L+U5Zue5Y+C5pWw5YC8XHJcbn1cclxuLy/ojrflj5YuanPnmoRzcmM95Lyg6YCS55qE5Y+C5pWwXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRKc1NyY1BhcmFtKG5hbWUpIHtcclxuICAgIHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpO1xyXG4gICAgdmFyIGN1cnJlbnRTY3JpcHQgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV07XHJcbiAgICB2YXIgcSA9IGN1cnJlbnRTY3JpcHQuc3JjLmluZGV4T2YoXCI/XCIpO1xyXG4gICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoXCIoXnwmKVwiICsgbmFtZSArIFwiPShbXiZdKikoJnwkKVwiKTsgLy/mnoTpgKDkuIDkuKrlkKvmnInnm67moIflj4LmlbDnmoTmraPliJnooajovr7lvI/lr7nosaFcclxuICAgIHZhciByID0gY3VycmVudFNjcmlwdC5zcmMuc3Vic3RyKHEgKyAxKS5tYXRjaChyZWcpOyAvL+WMuemFjeebruagh+WPguaVsFxyXG4gICAgaWYgKHIgIT0gbnVsbClcclxuICAgICAgICByZXR1cm4gZGVjb2RlVVJJKHJbMl0pO1xyXG4gICAgcmV0dXJuIFwiXCI7IC8v6L+U5Zue5Y+C5pWw5YC8XHJcbn1cclxuLy8gQXNzaWduIGEgTWVkaWFTdHJlYW0gdG8gYW4gSFRNTE1lZGlhRWxlbWVudCBhbmQgdXBkYXRlIGlmIHRyYWNrcyBjaGFuZ2UuXHJcbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25TdHJlYW0oc3RyZWFtLCBlbGVtZW50KSB7XHJcbiAgICAvLyBTZXQgZWxlbWVudCBzb3VyY2UuXHJcbiAgICBlbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTsgLy8gU2FmYXJpIGRvZXMgbm90IGFsbG93IGNhbGxpbmcgLnBsYXkoKSBmcm9tIGEgbm9uIHVzZXIgYWN0aW9uXHJcbiAgICBlbGVtZW50LnNyY09iamVjdCA9IHN0cmVhbTtcclxuICAgIC8vIExvYWQgYW5kIHN0YXJ0IHBsYXliYWNrIG9mIG1lZGlhLlxyXG4gICAgZWxlbWVudC5wbGF5KCkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBwbGF5IG1lZGlhXCIpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBJZiBhIHRyYWNrIGlzIGFkZGVkLCBsb2FkIGFuZCByZXN0YXJ0IHBsYXliYWNrIG9mIG1lZGlhLlxyXG4gICAgc3RyZWFtLm9uYWRkdHJhY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgZWxlbWVudC5sb2FkKCk7IC8vIFNhZmFyaSBkb2VzIG5vdCB3b3JrIG90aGVyaXdzZVxyXG4gICAgICAgIGVsZW1lbnQucGxheSgpLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHBsYXkgcmVtb3RlIG1lZGlhIG9uIGFkZCB0cmFja1wiKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gSWYgYSB0cmFjayBpcyByZW1vdmVkLCBsb2FkIGFuZCByZXN0YXJ0IHBsYXliYWNrIG9mIG1lZGlhLlxyXG4gICAgc3RyZWFtLm9ucmVtb3ZldHJhY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgZWxlbWVudC5sb2FkKCk7IC8vIFNhZmFyaSBkb2VzIG5vdCB3b3JrIG90aGVyaXdzZVxyXG4gICAgICAgIGVsZW1lbnQucGxheSgpLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHBsYXkgcmVtb3RlIG1lZGlhIG9uIHJlbW92ZSB0cmFja1wiKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8v6I635Y+W5pys5py6SVBcclxuZXhwb3J0IGZ1bmN0aW9uIGdldElQKGNhbGxiYWNrLCB0aW1lb3V0Q2FsbGJhY2spIHtcclxuICAgIGxldCByZWNvZGUgPSB7fTtcclxuICAgIC8vIGxldCBSVENQZWVyQ29ubmVjdGlvbiA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiB8fCB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb24gfHwgd2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uO1xyXG4gICAgLy8gLy8g5aaC5p6c5LiN5a2Y5Zyo5YiZ5L2/55So5LiA5LiqaWZyYW1l57uV6L+HXHJcbiAgICAvLyBpZiAoIVJUQ1BlZXJDb25uZWN0aW9uKSB7XHJcbiAgICAvLyAgICAgLy8g5Zug5Li66L+Z6YeM55So5Yiw5LqGaWZyYW1l77yM5omA5Lul5Zyo6LCD55So6L+Z5Liq5pa55rOV55qEc2NyaXB05LiK5b+F6aG75pyJ5LiA5LiqaWZyYW1l5qCH562+XHJcbiAgICAvLyAgICAgLy8gPGlmcmFtZSBpZD1cImlmcmFtZVwiIHNhbmRib3g9XCJhbGxvdy1zYW1lLW9yaWdpblwiPjwvaWZyYW1lPlxyXG4gICAgLy8gICAgIGxldCB3aW4gPSBpZnJhbWUuY29udGVudFdpbmRvdztcclxuICAgIC8vICAgICBSVENQZWVyQ29ubmVjdGlvbiA9IHdpbi5SVENQZWVyQ29ubmVjdGlvbiB8fCB3aW4ubW96UlRDUGVlckNvbm5lY3Rpb24gfHwgd2luLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uO1xyXG4gICAgLy8gfVxyXG4gICAgbGV0IFJUQ1BlZXJDb25uZWN0aW9uID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uO1xyXG4gICAgLy/liJvlu7rlrp7kvovvvIznlJ/miJDov57mjqVcclxuICAgIGxldCBwYyA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbigpO1xyXG4gICAgLy8g5Yy56YWN5a2X56ym5Liy5Lit56ym5ZCIaXDlnLDlnYDnmoTlrZfmrrUs5Y675o6JMTcyLjLlvIDlpLTnmoRcclxuICAgIGZ1bmN0aW9uIGhhbmRsZUNhbmRpZGF0ZShjYW5kaWRhdGUpIHtcclxuICAgICAgICAvLyBsZXQgaXBfcmVnZXhwID0gLyhbMC05XXsxLDN9KFxcLlswLTldezEsM30pezN9fChbYS1mMC05XXsxLDR9KCg6W2EtZjAtOV17MSw0fSl7N318OitbYS1mMC05XXsxLDR9KXs2fSkpLztcclxuICAgICAgICAvLyBsZXQgaXBfaXNNYXRjaCA9IGNhbmRpZGF0ZS5tYXRjaChpcF9yZWdleHApWzFdO1xyXG4gICAgICAgIGxldCBpcF9pc01hdGNoID0gY2FuZGlkYXRlLnNwbGl0KFwiIFwiKVs0XTtcclxuICAgICAgICBpZiAoaXBfaXNNYXRjaCAmJiAhcmVjb2RlW2lwX2lzTWF0Y2hdKSB7XHJcbiAgICAgICAgICAgIGlmIChpcF9pc01hdGNoLnN1YnN0cmluZygwLCA1KSAhPSAnMTcyLjInKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpcF9pc01hdGNoKTtcclxuICAgICAgICAgICAgICAgIHJlY29kZVtpcF9pc01hdGNoXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvL+ebkeWQrGljZWNhbmRpZGF0ZeS6i+S7tlxyXG4gICAgcGMub25pY2VjYW5kaWRhdGUgPSAoaWNlKSA9PiB7XHJcbiAgICAgICAgaWYgKGljZS5jYW5kaWRhdGUpIHtcclxuICAgICAgICAgICAgaGFuZGxlQ2FuZGlkYXRlKGljZS5jYW5kaWRhdGUuY2FuZGlkYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy/lu7rnq4vkuIDkuKrkvKrmlbDmja7nmoTpgJrpgZNcclxuICAgIHBjLmNyZWF0ZURhdGFDaGFubmVsKCcnKTtcclxuICAgIHBjLmNyZWF0ZU9mZmVyKChyZXMpID0+IHtcclxuICAgICAgICBwYy5zZXRMb2NhbERlc2NyaXB0aW9uKHJlcyk7XHJcbiAgICB9LCAoKSA9PiB7IH0pO1xyXG4gICAgLy/lu7bov5/vvIzorqnkuIDliIfpg73og73lrozmiJBcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGxldCBsaW5lcyA9IHBjLmxvY2FsRGVzY3JpcHRpb24uc2RwLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBsaW5lcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5pbmRleE9mKCdhPWNhbmRpZGF0ZTonKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlQ2FuZGlkYXRlKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGltZW91dENhbGxiYWNrKCk7XHJcbiAgICB9LCAxMDAwKTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1ueHctdXRpbHMuanMubWFwIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5pbXBvcnQgeyBXZWIsIFNJUEV4dGVuc2lvbiwgU2Vzc2lvblN0YXRlIH0gZnJvbSBcInNpcC5qc1wiO1xyXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tIFwiZXZlbnRzXCI7XHJcbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXHJcbmltcG9ydCB7IFRvbmVGbGFnIH0gZnJvbSBcIi4vbnh3LXR5cGVzXCI7XHJcbmltcG9ydCB7IGdldEF1ZGlvLCBnZXRJUCB9IGZyb20gXCIuL254dy11dGlsc1wiO1xyXG5pbXBvcnQgeyBnZXRWaWRlbywgb2JqZWN0SWQgfSBmcm9tIFwiLlwiO1xyXG4vLyBpbXBvcnQgeyByZWNlaXZlTWVzc2FnZU9uUG9ydCB9IGZyb20gXCJ3b3JrZXJfdGhyZWFkc1wiO1xyXG4vLyBpbXBvcnQgeyBhcHBlbmRGaWxlIH0gZnJvbSBcImZzXCI7XHJcbnZhciBTaW1wbGVVQVN0YXRlO1xyXG4oZnVuY3Rpb24gKFNpbXBsZVVBU3RhdGUpIHtcclxuICAgIFNpbXBsZVVBU3RhdGVbU2ltcGxlVUFTdGF0ZVtcIlVBX0lOSVRcIl0gPSAwXSA9IFwiVUFfSU5JVFwiO1xyXG4gICAgU2ltcGxlVUFTdGF0ZVtTaW1wbGVVQVN0YXRlW1wiVUFfTlhBUElcIl0gPSAxXSA9IFwiVUFfTlhBUElcIjtcclxuICAgIFNpbXBsZVVBU3RhdGVbU2ltcGxlVUFTdGF0ZVtcIlVBX0NPTk5FQ1RJTkdcIl0gPSAyXSA9IFwiVUFfQ09OTkVDVElOR1wiO1xyXG4gICAgU2ltcGxlVUFTdGF0ZVtTaW1wbGVVQVN0YXRlW1wiVUFfQ09OTkVDVEVEXCJdID0gM10gPSBcIlVBX0NPTk5FQ1RFRFwiO1xyXG4gICAgU2ltcGxlVUFTdGF0ZVtTaW1wbGVVQVN0YXRlW1wiVUFfUkVHSVNURVJJTkdcIl0gPSA0XSA9IFwiVUFfUkVHSVNURVJJTkdcIjtcclxuICAgIFNpbXBsZVVBU3RhdGVbU2ltcGxlVUFTdGF0ZVtcIlVBX1JFQURZXCJdID0gNV0gPSBcIlVBX1JFQURZXCI7XHJcbiAgICBTaW1wbGVVQVN0YXRlW1NpbXBsZVVBU3RhdGVbXCJVQV9DQUxMSU5HX09VVFwiXSA9IDZdID0gXCJVQV9DQUxMSU5HX09VVFwiO1xyXG4gICAgU2ltcGxlVUFTdGF0ZVtTaW1wbGVVQVN0YXRlW1wiVUFfSU5DT01JTkdcIl0gPSA3XSA9IFwiVUFfSU5DT01JTkdcIjtcclxuICAgIFNpbXBsZVVBU3RhdGVbU2ltcGxlVUFTdGF0ZVtcIlVBX1RBTEtJTkdcIl0gPSA4XSA9IFwiVUFfVEFMS0lOR1wiO1xyXG4gICAgU2ltcGxlVUFTdGF0ZVtTaW1wbGVVQVN0YXRlW1wiVUFfQ0FMTF9FTkRJTkdcIl0gPSA5XSA9IFwiVUFfQ0FMTF9FTkRJTkdcIjtcclxuICAgIFNpbXBsZVVBU3RhdGVbU2ltcGxlVUFTdGF0ZVtcIlVBX0NBTExfRU5EXCJdID0gMTBdID0gXCJVQV9DQUxMX0VORFwiO1xyXG4gICAgU2ltcGxlVUFTdGF0ZVtTaW1wbGVVQVN0YXRlW1wiVUFfRElTQ09OTkVDVEVEXCJdID0gMTFdID0gXCJVQV9ESVNDT05ORUNURURcIjtcclxuICAgIFNpbXBsZVVBU3RhdGVbU2ltcGxlVUFTdGF0ZVtcIlVBX0VSUk9SXCJdID0gMTJdID0gXCJVQV9FUlJPUlwiO1xyXG59KShTaW1wbGVVQVN0YXRlIHx8IChTaW1wbGVVQVN0YXRlID0ge30pKTtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTnh3Q2FsbCB7XHJcbiAgICAvKiog5p6E6YCg5Ye95pWwICovXHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgICAgICAvL+iuvue9rlVB55qEZGVsZWdhdGVcclxuICAgICAgICB0aGlzLl91c2VyRGVsZWdhdGUgPSB7XHJcbiAgICAgICAgICAgIG9uQ2FsbFJlY2VpdmVkOiAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGhpcy5zaW1wbGVVc2VyLmlkfV0gQ2FsbCByZWNlaXZlZGAsIHRoaXMuc2ltcGxlVXNlcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxhc3RTZXNzaW9uVHJ5aW5nKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9JTkNPTUlORztcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzSW5mbyA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAvL2NoZWNrIGluY29taW5nIG9yZGVyaWRcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpbXBsZVVzZXIgJiYgdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW52aXRhdGlvbiA9IHRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvaWQgPSBpbnZpdGF0aW9uLnJlcXVlc3QuZ2V0SGVhZGVyKFwiWC1PUkRFUklEXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3JkZXJJZENvbWluZyA9IG9pZDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9yZGVySWRDb21pbmcgWC1PUkRFUklEPVwiICsgb2lkKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVhbHBob25lID0gaW52aXRhdGlvbi5yZXF1ZXN0LmdldEhlYWRlcihcIlgtTlgtUkVBTFBIT05FXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWFscGhvbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbnhSZWFsUGhvbmUgPSByZWFscGhvbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwicmVhbHBob25lIFgtTlgtUkVBTFBIT05FPVwiK3JlYWxwaG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9ueFJlYWxQaG9uZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9lbWl0IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcIm9uQ2FsbFJlY2VpdmVkXCIsIHRoaXMucmVtb3RlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvQW5zd2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0cnkgYXV0b0Fuc3dlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnNpbXBsZVVzZXIuYW5zd2VyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXkoJ3N0YXJ0JywgJ3Jpbmdpbi53YXYnKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIk5FRUQgQVBQIFNVUFBPUlQgISEhXCIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBvbkNhbGxDcmVhdGVkOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2ltcGxlVXNlcilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwicmVtb3RlSWRlbnRpdHk9XCIsIHRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uLnJlbW90ZUlkZW50aXR5KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHt0aGlzLnNpbXBsZVVzZXIuaWR9XSBDYWxsIGNyZWF0ZWRgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX0NBTExJTkdfT1VUO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXNJbmZvID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJldHJpZXMgPT0gMiAmJiB0aGlzLm5leHRUYXJnZXQgIT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib25DYWxsQ3JlYXRlZCwgc2V0IG5leHRUYXJnZXQgZW1wdHkhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFRhcmdldCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwib25DYWxsQ3JlYXRlZFwiLCB0aGlzLnJlbW90ZU5hbWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNhbGxBbnN3ZXJlZDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gbGV0IGFzOiBTZXNzaW9uID0gdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxhc3RTZXNzaW9uVHJ5aW5nKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoJ2VuZCcsICcnKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHt0aGlzLnNpbXBsZVVzZXIuaWR9XSBDYWxsIGFuc3dlcmVkYCwgdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNpbXBsZVVBU3RhdGUuVUFfVEFMS0lORztcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzSW5mbyA9IFwiMjAwIE9LXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1UcyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXRyaWVzID09IDEgJiYgdGhpcy5uZXh0VGFyZ2V0ICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9uQ2FsbEFuc3dlcmVkLCBzZXQgbmV4dFRhcmdldCBlbXB0eSFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0VGFyZ2V0ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHZhciBlYXJseSA9IHRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uLmVhcmx5TWVkaWFFc3RhYmxpc2hlZDtcclxuICAgICAgICAgICAgICAgIHZhciBpbnZpdGVyID0gdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb247XHJcbiAgICAgICAgICAgICAgICB2YXIgZWFybHkgPSAoaW52aXRlciAmJiBpbnZpdGVyLmVhcmx5TWVkaWFFc3RhYmxpc2hlZCkgfHwgZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIi0tLS0tLSBlYXJseT1cIixlYXJseSx0aGlzLnNpbXBsZVVzZXIuYWN0aXZlU2Vzc2lvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWFybHkgJiYgIXRoaXMuZWFybHlBbnN3ZXIpIHsgLy9sYXRlciAxODMgb25wcm9ncmVzcyB3aWxsIHNldCB0aGUgZmxhZ1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uLnN0YXRlID0gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGluZztcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9uQ2FsbEFuc3dlcmVkIGVhcmx5TWVkaWFFc3RhYmxpc2hlZCwgcmVzZXQgdG8gU2Vzc2lvblN0YXRlLkVzdGFibGlzaGluZ1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib25DYWxsQW5zd2VyZWQgcmVhbGx5IVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXkoJ3N0YXJ0JywgJ2Nvbm5lY3RlZC53YXYnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwib25DYWxsQW5zd2VyZWRcIiwgdGhpcy5yZW1vdGVOYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25DYWxsSGFuZ3VwOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoJ2VuZCcsICcnKTsgLy9DQU5DRUwgd2hlbiByaW5naW5cclxuICAgICAgICAgICAgICAgIHRoaXMucGxheSgnc3RhcnQnLCAnaGFuZ3VwLndhdicpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFske3RoaXMuc2ltcGxlVXNlci5pZH1dIENhbGwgaGFuZ3VwYCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmsgPSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNpbXBsZVVBU3RhdGUuVUFfQ0FMTF9FTkQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXRyaWVzID09IDAgJiYgdGhpcy5uZXh0VGFyZ2V0ICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9uQ2FsbEhhbmd1cCwgc2V0IG5leHRUYXJnZXQgZW1wdHkhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFRhcmdldCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwib25DYWxsSGFuZ3VwXCIsIHRoaXMuc3RhdHVzSW5mbyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uUmVnaXN0ZXJlZDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNpbXBsZVVBU3RhdGUuVUFfUkVBRFk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmsrKztcclxuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJlZCA9IDE7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGhpcy5kaXNwbGF5TmFtZX1dIHVzZXIgcmVnaXN0ZXJlZCwgbWFyaz0ke3RoaXMubWFya30sbmV4dFRhcmdldD0ke3RoaXMubmV4dFRhcmdldH1gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheSgnc3RhcnQnLCAnb25saW5lLndhdicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcIm9uUmVnaXN0ZXJlZFwiLCB0aGlzLmRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgICAgIC8v5aaC5p6c5pyJ5ZG85Y+r562J5b6F5Y+R6LW3XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uZXh0VGFyZ2V0ICYmIHRoaXMubmV4dFRhcmdldC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJiZWdpbiBwbGFjZUNhbGwgdG9cIiwgdGhpcy5uZXh0VGFyZ2V0LCB0aGlzLm5leHRIZHJzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlQ2FsbCh0aGlzLm5leHRUYXJnZXQsIHRoaXMubmV4dEhkcnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvblVucmVnaXN0ZXJlZDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFske3RoaXMuZGlzcGxheU5hbWV9XSB1c2VyIHVucmVnaXN0ZXJlZGApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJvblVucmVnaXN0ZXJlZFwiLCB0aGlzLmRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGlmKHRoaXMucmVnaXN0ZXJlZCA8MSl7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGBbJHt0aGlzLmRpc3BsYXlOYW1lfV0gZW1pdCBldmVudCB1bnJlZ2lzdGVyZWRgKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcIm9uVW5yZWdpc3RlcmVkXCIsIHRoaXMuZGlzcGxheU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIH0sIDM1MDAwKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25TZXJ2ZXJDb25uZWN0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGhpcy5kaXNwbGF5TmFtZX1dIHNlcnZlciBjb25uZWN0ZWRgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX0NPTk5FQ1RFRDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJvblNlcnZlckNvbm5lY3RcIiwgXCJcIik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uU2VydmVyRGlzY29ubmVjdDogKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGhpcy5kaXNwbGF5TmFtZX1dIHNlcnZlciBkaXNjb25uZWN0ZWQgJHtlcnJvcn1gKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpbXBsZVVzZXIgPT0gTnh3Q2FsbC5sYXN0SW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9ESVNDT05ORUNURUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcIm9uU2VydmVyRGlzY29ubmVjdFwiLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25DYWxsSG9sZDogKGhlbGQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHt0aGlzLnNpbXBsZVVzZXIuaWR9XSBDYWxsIGhvbGQgJHtoZWxkfWApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcIm9uQ2FsbEhvbGRcIiwgXCJcIik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uTWVzc2FnZVJlY2VpdmVkOiAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFske3RoaXMuc2ltcGxlVXNlci5pZH1dIHJlY3YgbWVzc2FnZSAke21lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwib25NZXNzYWdlUmVjZWl2ZWRcIiwgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ2FsbERUTUZSZWNlaXZlZDogKHRvbmUsIGR1cmF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGhpcy5zaW1wbGVVc2VyLmlkfV0gQ2FsbCBEVE1GUmVjZWl2ZWQgJHt0b25lfToke2R1cmF0aW9ufSBgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJkdG1mX3JlY3ZcIiwgdG9uZSArIFwiOlwiICsgZHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmluaXRCeUNvbmZpZyhjb25maWcpO1xyXG4gICAgICAgIC8v5byA5ZCv6L2u6K+i5qOA5p+lXHJcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja0ZsYWcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tBbmRSdW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDUwMDApO1xyXG4gICAgfVxyXG4gICAgZ2V0IG15U2ltcGxlVXNlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaW1wbGVVc2VyO1xyXG4gICAgfVxyXG4gICAgc2V0IG15U2ltcGxlVXNlcih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc2ltcGxlVXNlciA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgLyoqIOaYvuekuuWQjeensO+8jOWvueW6lG54dXNlciAqL1xyXG4gICAgZ2V0IG15RGlzcGxheU5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheU5hbWU7XHJcbiAgICB9XHJcbiAgICAvKiogc2lw5Y+356CB77yM5a+55bqUYXV0aE5hbWUgKi9cclxuICAgIGdldCBteVNpcElkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpcElkO1xyXG4gICAgfVxyXG4gICAgLyoqIHNpbXBsZVVzZXLlr7nosaHnmoRpZCAqL1xyXG4gICAgZ2V0IG15U2ltcGxlVXNlcklkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpbXBsZVVzZXIgPyB0aGlzLnNpbXBsZVVzZXIuaWQgOiBcIl9TSU1QTEVfXCI7XHJcbiAgICB9XHJcbiAgICAvKiog5b2T5YmN5a6e5L6L55qERXZlbnRzICovXHJcbiAgICBnZXQgbXlFdmVudHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzO1xyXG4gICAgfVxyXG4gICAgLyoqIOW9k+WJjemAmuivneWvueaWuSByZW1vdGVJZGVudGl0eS51cmkgKi9cclxuICAgIGdldCByZW1vdGVOYW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNpbXBsZVVzZXIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXMgPSB0aGlzLnNpbXBsZVVzZXIuYWN0aXZlU2Vzc2lvbjtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwibGFzdFNlc3Npb25Ucnlpbmc9XCIsIHRoaXMubGFzdFNlc3Npb25UcnlpbmcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzLnJlbW90ZUlkZW50aXR5LnVyaS5hb3I7XHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gYXMucmVtb3RlSWRlbnRpdHkuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgICAvKiog5b2T5YmN6YCa6K+d5pe26Ze0ICovXHJcbiAgICBnZXQgdGFsa2luZ1RpbWUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gU2ltcGxlVUFTdGF0ZS5VQV9UQUxLSU5HKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpcm1Ucykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHQgPSAobmV3IERhdGUoKS52YWx1ZU9mKCkpIC0gdGhpcy5jb25maXJtVHMudmFsdWVPZigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9ub3QgY29uZmlybVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgLyoqIOW9k+WJjeiuvue9rueahOaJqeWxlWhkciAqL1xyXG4gICAgZ2V0IG15RGF0YUhkcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YUhkcnM7XHJcbiAgICB9XHJcbiAgICAvKiog5b+r5o235pON5L2cIG9yZGVySWQgKi9cclxuICAgIGdldCBteU9yZGVySWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JkZXJJZDtcclxuICAgIH1cclxuICAgIHNldCBteU9yZGVySWQob2lkKSB7XHJcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb2lkO1xyXG4gICAgfVxyXG4gICAgLyoqIElOVklURSDmkLrluKbov4fmnaXnmoRvcmRlcklkICovXHJcbiAgICBnZXQgY29taW5nT3JkZXJJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcmRlcklkQ29taW5nO1xyXG4gICAgfVxyXG4gICAgc2V0IGNvbWluZ09yZGVySWQob2lkKSB7XHJcbiAgICAgICAgdGhpcy5vcmRlcklkQ29taW5nID0gb2lkO1xyXG4gICAgfVxyXG4gICAgLyoqIElOVklURSDmkLrluKbov4fmnaXnmoRyZWFscGhvbmUgKi9cclxuICAgIGdldCBueFJlYWxQaG9uZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbnhSZWFsUGhvbmU7XHJcbiAgICB9XHJcbiAgICBzZXQgbnhSZWFsUGhvbmUob2lkKSB7XHJcbiAgICAgICAgdGhpcy5fbnhSZWFsUGhvbmUgPSBvaWQ7XHJcbiAgICB9XHJcbiAgICAvKiog5piv5ZCm5ZCv55SoIGRpZCDlip/og70gKi9cclxuICAgIGdldCBpc2RpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNkaWQ7XHJcbiAgICB9XHJcbiAgICAvKiog5piv5ZCm5ZCv55SoIHNlbmRzbXMg5Yqf6IO9ICovXHJcbiAgICBnZXQgaXNTZW5kU01TKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kc21zO1xyXG4gICAgfVxyXG4gICAgLyoqIOW9k+WJjeeKtuaAgSAqL1xyXG4gICAgZ2V0IG15U3RhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUudG9TdHJpbmcoKTtcclxuICAgIH1cclxuICAgIC8qKiDmnIDmlrDnmoRjYWxsIHN0YXR1c0luZm8gKi9cclxuICAgIGdldCBjYWxsU3RhdHVzSW5mbygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXNJbmZvO1xyXG4gICAgfVxyXG4gICAgLyoqIOabtOaWsOacgOWQjuS4gOasoXNlc3Npb27vvIzlpoLmnpzmmK9JbnZpdG9yICovXHJcbiAgICB1cGRhdGVMYXN0U2Vzc2lvblRyeWluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5zaW1wbGVVc2VyKSB7XHJcbiAgICAgICAgICAgIGxldCBhcyA9IHRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uO1xyXG4gICAgICAgICAgICAvL+S/neWtmOacgOWQjuS4gOS4qua0u+i3g+eahHNlc3Npb25cclxuICAgICAgICAgICAgaWYgKGFzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdFNlc3Npb25UcnlpbmcgPSBhcztcclxuICAgICAgICAgICAgICAgIC8vIGlmIChhcyBpbnN0YW5jZW9mIEludml0YXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAvLyBGSVhNRTogaG93IHRvIGRlZXAgY29weT8/XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgbGV0IGFzMjogSW52aXRhdGlvbiA9IGFzO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHRoaXMubGFzdFNlc3Npb25UcnlpbmcgPSBuZXcgSW52aXRhdGlvbihhczIudXNlckFnZW50LCBhczIuaW5jb21pbmdJbnZpdGVSZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgIC8vICAgICBPYmplY3QuYXNzaWduKHRoaXMubGFzdFNlc3Npb25UcnlpbmcsIGFzKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcInVwZGF0ZUxhc3RTZXNzaW9uVHJ5aW5nXCIsIGFzKVxyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0QXV0b0Fuc3dlcihlbikge1xyXG4gICAgICAgIHRoaXMuYXV0b0Fuc3dlciA9IGVuO1xyXG4gICAgfVxyXG4gICAgc2V0VmlkZW8oZW4pIHtcclxuICAgICAgICBpZiAoZW4gIT0gdGhpcy52aWRlbykge1xyXG4gICAgICAgICAgICAvL+WPmOabtOWxnuaAp++8jOmHjeaWsOWIneWni+WMllxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNPUlJZISEhIG5vdCBzdXBwb3J0IHlldCFcIik7XHJcbiAgICAgICAgICAgIHRoaXMudmlkZW8gPSBlbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog6I635Y+W5b2T5YmN5Lya6K+d54q25oCBICovXHJcbiAgICBnZXQgYWN0aXZlU2Vzc2lvblN0YXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNpbXBsZVVzZXIgJiYgdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uLnN0YXRlLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog6I635Y+W5b2T5YmN5Lya6K+d55qEQ2FsbElkICovXHJcbiAgICBnZXQgYWN0aXZlQ2FsbElkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNpbXBsZVVzZXIgJiYgdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb24pIHtcclxuICAgICAgICAgICAgbGV0IGNhbGxpZCA9IHRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uLmlkO1xyXG4gICAgICAgICAgICBpZiAoY2FsbGlkLmxlbmd0aCA+IDM2KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxpZC5zdWJzdHJpbmcoMCwgMzYpOyAvL2ZyZWVzd2l0Y2ggdXNpbmcgdXVpZFxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGlkLnN1YnN0cmluZygwLCAyMCk7IC8vc2lwLmpzIHVzaW5nIHNob3J0ZXJcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBzYW1wbGUgZm9yIGluZm8gKi9cclxuICAgIGdldCBnZXRJbmZvU2FtcGxlKCkge1xyXG4gICAgICAgIGxldCBpbmZvID0gXCJzaXBpZD1cIiArIHRoaXMubXlTaXBJZFxyXG4gICAgICAgICAgICArIFwiIHN0YXRlPVwiICsgdGhpcy5zdGF0ZVxyXG4gICAgICAgICAgICArIFwiIHJlbW90ZT1cIiArIHRoaXMucmVtb3RlTmFtZVxyXG4gICAgICAgICAgICArIFwiIHN0YXRlPVwiICsgdGhpcy5hY3RpdmVTZXNzaW9uU3RhdGU7XHJcbiAgICAgICAgcmV0dXJuIGluZm87XHJcbiAgICB9XHJcbiAgICAvKiogd2ViUlRDIOeKtuaAgeacuiwg5q+P56eS5omn6KGM5LiA5qyhICovXHJcbiAgICBjaGVja0FuZFJ1bigpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBTaW1wbGVVQVN0YXRlLlVBX0VSUk9SKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2hlY2tBbmRSdW4gc3RhdGUgRVJST1IhISEhXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9JTklUO1xyXG4gICAgICAgICAgICB0aGlzLm1hcmsrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5zdGF0ZSA9PSBTaW1wbGVVQVN0YXRlLlVBX1RBTEtJTkcpIHtcclxuICAgICAgICAgICAgLy90YWxraW5nIHN0YXRlXHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHMgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgodGhpcy5zdGF0ZSA9PSBTaW1wbGVVQVN0YXRlLlVBX1JFQURZKVxyXG4gICAgICAgICAgICB8fCAodGhpcy5zdGF0ZSA9PSBTaW1wbGVVQVN0YXRlLlVBX0lOSVQpKSB7XHJcbiAgICAgICAgICAgIC8vaW5pdCwgaWRsZS9yZWFkeSBcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5zdGF0ZSA9PSBTaW1wbGVVQVN0YXRlLlVBX0NBTExfRU5EKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVUFfQ0FMTF9FTkQgdG8gVUFfUkVBRFlcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibWFyaz1cIiwgdGhpcy5tYXJrLCBcIm5leHRUYXJnZXQ9XCIsIHRoaXMubmV4dFRhcmdldCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX1JFQURZO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjaGVja0FuZFJ1biBzdGF0ZT1cIiwgdGhpcy5zdGF0ZSwgXCJmYWlscz1cIiwgdGhpcy5mYWlscyk7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHMrKztcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmFpbHMgPiA1KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9FUlJPUjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmFpbHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImVycm9yXCIsIFwiZmFpbHMgdG9vIG11Y2hcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubWFyayA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gU2ltcGxlVUFTdGF0ZS5VQV9JTklUKSB7XHJcbiAgICAgICAgICAgICAgICAvL+W8gOWni+afpeivou+8jOazqOWGjFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrLS07XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNoZWNrQW5kUnVuIGJlZ2luIE5YZ2V0VXNlckluZm9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5OWGdldFVzZXJJbmZvKHRoaXMuY29uZmlnKTtcclxuICAgICAgICAgICAgICAgIH0sIDEwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXRlID09IFNpbXBsZVVBU3RhdGUuVUFfUkVBRFkpIHtcclxuICAgICAgICAgICAgICAgIC8v5aaC5p6c5LuN54S25pyJ5ZG85Y+r562J5b6F5Y+R6LW3XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uZXh0VGFyZ2V0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImJlZ2luIHBsYWNlQ2FsbCB0b1wiLCB0aGlzLm5leHRUYXJnZXQsIHRoaXMubmV4dEhkcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2VDYWxsKHRoaXMubmV4dFRhcmdldCwgdGhpcy5uZXh0SGRycyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5qC55o2u6YWN572u5Yid5aeL5YyWc2ltcGxlVXNlciAqL1xyXG4gICAgaW5pdEJ5Q29uZmlnKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChOeHdDYWxsLmxhc3RJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImFscmVhZHkgaGFzIGxhc3RJbnN0YW5jZS4gRnJlZSBpdFwiKTtcclxuICAgICAgICAgICAgdmFyIG9sZEluc3QgPSBOeHdDYWxsLmxhc3RJbnN0YW5jZTtcclxuICAgICAgICAgICAgTnh3Q2FsbC5sYXN0SW5zdGFuY2UgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAob2xkSW5zdCkge1xyXG4gICAgICAgICAgICAgICAgb2xkSW5zdC51bnJlZ2lzdGVyKClcclxuICAgICAgICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7IG9sZEluc3QuZGlzY29ubmVjdCgpOyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL2luaXQgYnkgbmV3IGNvbmZpZ1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMuc2ltcGxlVXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jaGVja0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgIGlmIChjb25maWcuYXVkaW9FbGVtZW50SWQpIHtcclxuICAgICAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQgPSBnZXRBdWRpbyhjb25maWcuYXVkaW9FbGVtZW50SWQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzaW5nIFBhZ2UgQXVkaW8gSFRNTEF1ZGlvRWxlbWVudFwiLCB0aGlzLmF1ZGlvRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5ldyBBdWRpbyBIVE1MQXVkaW9FbGVtZW50XCIpO1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudCA9IG5ldyBBdWRpbygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL0dldCB0aGUgcGxheUVsZW1lbnRcclxuICAgICAgICBpZiAoY29uZmlnLnBsYXlFbGVtZW50SWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5RWxlbWVudCA9IGdldEF1ZGlvKGNvbmZpZy5wbGF5RWxlbWVudElkKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2luZyBQYWdlIFBsYXkgSFRNTEF1ZGlvRWxlbWVudFwiLCB0aGlzLnBsYXlFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTmV3IFBsYXkgSFRNTEF1ZGlvRWxlbWVudFwiKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5RWxlbWVudCA9IG5ldyBBdWRpbygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+WQr+eUqHZpZGVv5pSv5oyBXHJcbiAgICAgICAgaWYgKGNvbmZpZy52aWRlbykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImNvbmZpZy52aWRlbyBlbmFibGVkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvID0gY29uZmlnLnZpZGVvO1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvTG9jYWxFbGVtZW50ID0gZ2V0VmlkZW8oY29uZmlnLnZpZGVvTG9jYWxFbGVtZW50SWQpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvUmVtb3RlRWxlbWVudCA9IGdldFZpZGVvKGNvbmZpZy52aWRlb1JlbW90ZUVsZW1lbnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMudmlkZW9Mb2NhbEVsZW1lbnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMudmlkZW9SZW1vdGVFbGVtZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gXCJOQVwiO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX0lOSVQ7XHJcbiAgICAgICAgdGhpcy5uZXh0VGFyZ2V0ID0gXCJcIjtcclxuICAgICAgICB0aGlzLmZhaWxzID0gMDtcclxuICAgICAgICB0aGlzLm1hcmsgPSAwO1xyXG4gICAgICAgIHRoaXMubG9nTGV2ZWwgPSBjb25maWcubG9nTGV2ZWwgPT09IHVuZGVmaW5lZCA/IFwid2FyblwiIDogY29uZmlnLmxvZ0xldmVsO1xyXG4gICAgICAgIHRoaXMucmV0cmllcyA9IChjb25maWcucmV0cmllcyA9PT0gdW5kZWZpbmVkKSA/IDAgOiBjb25maWcucmV0cmllcztcclxuICAgICAgICB0aGlzLnBsYXlUb25lID0gKGNvbmZpZy5wbGF5VG9uZSA9PSB1bmRlZmluZWQpID8gMCA6IE51bWJlcihjb25maWcucGxheVRvbmUpO1xyXG4gICAgICAgIHRoaXMuc2lwSWQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuY29uZmlybVRzID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxhc3RTZXNzaW9uVHJ5aW5nID0gbnVsbDtcclxuICAgICAgICB0aGlzLnN0YXR1c0luZm8gPSBcIlwiO1xyXG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5uZXh0SGRycyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kYXRhSGRycyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fbnhSZWFsUGhvbmUgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuX2lzZGlkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc2VuZHNtcyA9IGZhbHNlO1xyXG4gICAgICAgIC8v6buY6K6k5LiN5ZCv55SoYXV0b2Fuc3dlclxyXG4gICAgICAgIHRoaXMuYXV0b0Fuc3dlciA9IChjb25maWcuYXV0b0Fuc3dlciA9PT0gdW5kZWZpbmVkKSA/IGZhbHNlIDogY29uZmlnLmF1dG9BbnN3ZXI7XHJcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHRoaXMuX3VzZXJEZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLm1hcmsrKztcclxuICAgICAgICAvL+W8gOWni+afpeivou+8jOazqOWGjFxyXG4gICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcImJlZ2luIE5YZ2V0VXNlckluZm9cIik7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuTlhnZXRVc2VySW5mbyh0aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgLy8gfSwgMTApO1xyXG4gICAgICAgIC8v5o6i5rWL5pys5py6SVAsXHJcbiAgICAgICAgdGhpcy5sb2NhbElQcyA9IFwiX1wiO1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICBnZXRJUChmdW5jdGlvbiAoaXApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJsb2NhbGlwPVwiLCBpcCk7XHJcbiAgICAgICAgICAgIGlmICgoaXAubGVuZ3RoIDw9IDE2KSAmJiAoaXAubGVuZ3RoID49IDcpKSB7XHJcbiAgICAgICAgICAgICAgICAvL3NhdmUgSVB2NCBvbmx5XHJcbiAgICAgICAgICAgICAgICB0aGF0LmxvY2FsSVBzID0gdGhhdC5sb2NhbElQcyArIGlwICsgXCJfXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8v5byA5aeL5p+l6K+i77yM5rOo5YaMXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ2V0SVAgZmluaXNlZDsgYmVnaW4gTlhnZXRVc2VySW5mb1wiKTtcclxuICAgICAgICAgICAgdGhhdC5OWGdldFVzZXJJbmZvKHRoYXQuY29uZmlnKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u6YWN572u5L+h5oGv77yM55u05o6l5Yib5bu6dWEs5oiW6ICF5p+l6K+ibnhjbG91ZOeEtuWQjuWIm+W7unVhXHJcbiAgICAgKiBAcGFyYW0gY29uZmlnIG54d2VicnRj55qEYXBwY29uZmlnXHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICovXHJcbiAgICBOWGdldFVzZXJJbmZvKGNvbmZpZykge1xyXG4gICAgICAgIGxldCBuUGhvbmVDZmcgPSB7fTtcclxuICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJOWGdldFVzZXJJbmZvIGNvbmZpZz1cIiwgY29uZmlnKTtcclxuICAgICAgICAvLyBjb25zdCB1cmw6IHN0cmluZyA9IFwiaHR0cHM6Ly9ueGNhbGxhcGkubnhjbG91ZC5jb20vYXBpL254YXBpL3VzZXJpbmZvXCI7XHJcbiAgICAgICAgLy8gY29uc3QgdXJsOiBzdHJpbmcgPSBcImh0dHBzOi8vbnhwaG9uZS5ueGNsb3VkLmNvbS9hcGkvdXNlcmluZm9cIlxyXG4gICAgICAgIGNvbnN0IHVybCA9IFwiaHR0cHM6Ly93ZWJjYWxsLm54Y2xvdWQuY29tL2FwaS91c2VyaW5mb1wiO1xyXG4gICAgICAgIC8vIGNvbnN0IHVybDogc3RyaW5nID0gXCJodHRwczovL2NzdGVzdC5ueGNsb3VkLmNvbS9hcGkvdXNlcmluZm9cIlxyXG4gICAgICAgIC8vIGNvbnN0IHVybDogc3RyaW5nID0gXCIvYXBpL254YXBpL3VzZXJpbmZvXCI7XHJcbiAgICAgICAgLy8gY29uc3QgdXJsOiBzdHJpbmcgPSBcIi9hcGkvdXNlcmluZm9cIlxyXG4gICAgICAgIGxldCBueHR5cGUgPSBjb25maWcubnh0eXBlID8gY29uZmlnLm54dHlwZSA6IDA7XHJcbiAgICAgICAgLy8gaWYgKGNvbmZpZy5ueHVzZXIubGVuZ3RoID09IDQpIHtcclxuICAgICAgICBpZiAoY29uZmlnLm54dHlwZSA8IDYpIHtcclxuICAgICAgICAgICAgLy9mcyBleHRlbnNpb24gLCBkbyBub3QgdXNlIGFwaSAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmluaXROeHdDYWxsKG54dHlwZSwgY29uZmlnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9OWEFQSTtcclxuICAgICAgICAvLyB4aHIub3BlbihcIkdFVFwiLCB1cmwsIHRydWUsIGNvbmZpZy5ueHVzZXIsIGNvbmZpZy5ueHBhc3MpO1xyXG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSBmYWxzZTtcclxuICAgICAgICB4aHIub3BlbihcIkdFVFwiLCB1cmwpO1xyXG4gICAgICAgIGNvbnN0IHN0ciA9IGNvbmZpZy5ueHVzZXIgKyBcIjpcIiArIGNvbmZpZy5ueHBhc3M7XHJcbiAgICAgICAgLy8gY29uc3QgYnVmZjogQnVmZmVyID0gQnVmZmVyLmZyb20oc3RyLCAndXRmLTgnKTtcclxuICAgICAgICAvLyBjb25zdCBiYXNlNjQ6IHN0cmluZyA9IGJ1ZmYudG9TdHJpbmcoJ2Jhc2U2NCcpO1xyXG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IHdpbmRvdy5idG9hKHN0cik7XHJcbiAgICAgICAgY29uc3QgYXV0aEhkciA9IFwiQmFzaWMgXCIgKyBiYXNlNjQ7XHJcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBhdXRoSGRyKTtcclxuICAgICAgICAvL3hoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBcIkJhc2ljIGJHOW5hVzQ2Y0dGemMzZHZjbVE9XCIpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQXV0aG9yaXphdGlvblwiLCBhdXRoSGRyKVxyXG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic3RhdHVzPVwiLCB4aHIuc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGV4dD1cIiwgeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlc3BvbnNlVGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/liJ3lp4vljJZcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluaXROeHdDYWxsKG54dHlwZSwgcmVzcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInhoci5yZWFkeVN0YXRlPVwiLCB4aHIucmVhZHlTdGF0ZSlcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coeGhyKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwieGhyLm9uZXJyb3JcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICBzZWxmLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9FUlJPUjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ2FjaGUtQ29udHJvbFwiLCBcIm5vLWNhY2hlXCIpO1xyXG4gICAgICAgIC8vIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiT3JpZ2luXCIsIFwibnhydGMxLm54Y2xvdWQuY29tXCIpO1xyXG4gICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOagueaNrumFjee9ruaIluiAhWFwaeeahOi/lOWbnuWAvO+8jOWIneWni+WMlmNhbGzlr7nosaFcclxuICAgICAqIEBwYXJhbSB0eXBlIOexu+WeiyAwOmZzIGV4dGVuc2lvbiAxOmFwaVxyXG4gICAgICogQHBhcmFtIHBhcmFtIOWvueW6lOeahOaVsOaNrlxyXG4gICAgICovXHJcbiAgICBpbml0Tnh3Q2FsbCh0eXBlLCBwYXJhbSkge1xyXG4gICAgICAgIGxldCBuUGhvbmVDZmcgPSB7fTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImluaXROeHdDYWxsIHR5cGU9XCIsIHR5cGUsIFwiIHBhcmFtPVwiLCB0eXBlb2YgKHBhcmFtKSwgcGFyYW0pO1xyXG4gICAgICAgIGlmICh0eXBlID09IDApIHtcclxuICAgICAgICAgICAgdHlwZSA9IDM7XHJcbiAgICAgICAgfSAvL2RldiBvbmx5XHJcbiAgICAgICAgaWYgKHR5cGUgPD0gNSkge1xyXG4gICAgICAgICAgICAvL2ZyZWVzd2l0Y2ggbG9jYWwgZXh0ZW5zaW9uXHJcbiAgICAgICAgICAgIGxldCBjb25maWcgPSBwYXJhbTtcclxuICAgICAgICAgICAgblBob25lQ2ZnLmF1dGhOYW1lID0gY29uZmlnLm54dXNlcjtcclxuICAgICAgICAgICAgblBob25lQ2ZnLmRpc3BsYXlOYW1lID0gY29uZmlnLm54dXNlcjtcclxuICAgICAgICAgICAgblBob25lQ2ZnLnVzZXJOYW1lID0gY29uZmlnLm54dXNlcjtcclxuICAgICAgICAgICAgblBob25lQ2ZnLm54VXNlck5hbWUgPSBjb25maWcubnh1c2VyO1xyXG4gICAgICAgICAgICBuUGhvbmVDZmcuc2VjcmV0ID0gY29uZmlnLm54cGFzcztcclxuICAgICAgICAgICAgblBob25lQ2ZnLmNpcCA9IFwiX1wiO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBuUGhvbmVDZmcuZG9tYWluID0gXCJueHJ0YzEubnhjbG91ZC5jb21cIjtcclxuICAgICAgICAgICAgICAgIG5QaG9uZUNmZy53c3NTZXJ2ZXIgPSBcIndzczovL254cnRjMS5ueGNsb3VkLmNvbTo3NDQzXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICBuUGhvbmVDZmcuZG9tYWluID0gXCJueHJ0YzIubnhjbG91ZC5jb21cIjtcclxuICAgICAgICAgICAgICAgIG5QaG9uZUNmZy53c3NTZXJ2ZXIgPSBcIndzczovL254cnRjMi5ueGNsb3VkLmNvbTo3NDQzXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAzKSB7XHJcbiAgICAgICAgICAgICAgICBuUGhvbmVDZmcuZG9tYWluID0gXCJueHJ0YzEubnhjbG91ZC5jb21cIjtcclxuICAgICAgICAgICAgICAgIG5QaG9uZUNmZy53c3NTZXJ2ZXIgPSBcIndzczovL254cnRjMS5ueGNsb3VkLmNvbTo4MDg5XCI7IC8va2FtYWlsaW9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IDQpIHtcclxuICAgICAgICAgICAgICAgIG5QaG9uZUNmZy5kb21haW4gPSBcInVjbG91ZC5hcnlhLnRvcFwiO1xyXG4gICAgICAgICAgICAgICAgblBob25lQ2ZnLndzc1NlcnZlciA9IFwid3NzOi8vdWNsb3VkLmFyeWEudG9wOjc0NDNcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IDUpIHtcclxuICAgICAgICAgICAgICAgIG5QaG9uZUNmZy5kb21haW4gPSBcIm54Y3M0OS5ueGNsb3VkLmNvbVwiO1xyXG4gICAgICAgICAgICAgICAgblBob25lQ2ZnLndzc1NlcnZlciA9IFwid3NzOi8vbnhjczQ5Lm54Y2xvdWQuY29tOjc0NDNcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuUGhvbmVDZmcuYW9yID0gXCJzaXA6XCIgKyBuUGhvbmVDZmcudXNlck5hbWUgKyAnQCcgKyBuUGhvbmVDZmcuZG9tYWluO1xyXG4gICAgICAgICAgICBuUGhvbmVDZmcuZm9yY2VScG9ydCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwid3NzU2VydmVyIFwiICsgblBob25lQ2ZnLndzc1NlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gNikge1xyXG4gICAgICAgICAgICAvL+aXp+eahGFwaeaOpeWPoy8vb2xkIFxyXG4gICAgICAgICAgICAvL3tcIklDRVwiOlwiMFwiLFwiYmFsYW5jZVwiOlwiLTIxOC4zMTAwXCIsXCJiYWxhbmNlX3Nob3dcIjpcIjFcIixcImRpc3BsYXluYW1lXCI6XCIyMzQxMTIxNzg0MDAwMVwiLFxyXG4gICAgICAgICAgICAvL1wibWVkaWFfZW5jcnlwdGlvblwiOlwiMFwiLFwic2Vzc2lvbnRpbWVyXCI6XCIwXCIsXCJzaG9ydGN1dHNcIjpudWxsLFwic2lwYWNjb3VudFwiOlwiMzExMzAxNFwiLFxyXG4gICAgICAgICAgICAvL1wic2lwZG9tYWluXCI6XCJueHRlbGUuY29tXCIsXCJzaXBwYXNzd29yZFwiOlwiNzcyNjM1NDZcIixcInNpcHByb3h5XCI6XCJueGNzY24ubnhjbG91ZC5jb206NjAzMFwiLFxyXG4gICAgICAgICAgICAvL1wic2lwc2VydmVyXCI6XCJjYy5ueHRlbGUuY29tXCIsXCJzaXB0cmFuc3BvcnRcIjpcInVkcFwiLFwidXBkYXRlX2ludGVydmFsXCI6Mzg5MyxcclxuICAgICAgICAgICAgLy9cInVzZXJuYW1lXCI6XCIyMzQxMTIxNzg0MDAwMVwiLFwiZmx1c2hyZWdcIjoxfVxyXG4gICAgICAgICAgICBsZXQgcmVzcCA9IHBhcmFtO1xyXG4gICAgICAgICAgICBuUGhvbmVDZmcuZGlzcGxheU5hbWUgPSByZXNwLmRpc3BsYXluYW1lO1xyXG4gICAgICAgICAgICBuUGhvbmVDZmcuZG9tYWluID0gcmVzcC5zaXBkb21haW47XHJcbiAgICAgICAgICAgIG5QaG9uZUNmZy51c2VyTmFtZSA9IHJlc3Auc2lwYWNjb3VudDtcclxuICAgICAgICAgICAgblBob25lQ2ZnLm54VXNlck5hbWUgPSByZXNwLnVzZXJuYW1lO1xyXG4gICAgICAgICAgICBuUGhvbmVDZmcuYXV0aE5hbWUgPSByZXNwLnNpcGFjY291bnQ7XHJcbiAgICAgICAgICAgIG5QaG9uZUNmZy5zZWNyZXQgPSByZXNwLnNpcHBhc3N3b3JkO1xyXG4gICAgICAgICAgICBuUGhvbmVDZmcuY2lwID0gcmVzcC5jaXA7XHJcbiAgICAgICAgICAgIG5QaG9uZUNmZy5pc2RpZCA9IHJlc3AuaXNkaWQ7XHJcbiAgICAgICAgICAgIG5QaG9uZUNmZy5zZW5kc21zID0gcmVzcC5zZW5kc21zO1xyXG4gICAgICAgICAgICAvL2NvbmZpZy5zZXJ2ZXIgPSByZXNwLnNpcHNlcnZlcjtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZXNwPSBcIiwgcmVzcCk7XHJcbiAgICAgICAgICAgIGlmIChyZXNwLndzc3NlcnZlciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAvL3dvcmtpbmcgd2l0aCBuZ2lueDogNDQzIC93c3NcclxuICAgICAgICAgICAgICAgIHJlc3Aud3NzcG9ydCA9IDQ0MztcclxuICAgICAgICAgICAgICAgIC8vIHJlc3Aud3Nzc2VydmVyID0gXCJjc3Rlc3QubnhjbG91ZC5jb21cIiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG5QaG9uZUNmZy53c3NTZXJ2ZXIgPSBcIndzczovL1wiICsgcmVzcC53c3NzZXJ2ZXIgKyBcIjpcIiArIHJlc3Aud3NzcG9ydCArIFwiL3dzc1wiOyAvLyAvaWNidSBcclxuICAgICAgICAgICAgICAgIC8vIG5QaG9uZUNmZy53c3NTZXJ2ZXIgPSBcIndzczovL1wiICsgcmVzcC53c3NzZXJ2ZXIgKyBcIjpcIiArIHJlc3Aud3NzcG9ydCsgXCIvd3NzXCI7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIndzc1NlcnZlcj0gXCIgKyBuUGhvbmVDZmcud3NzU2VydmVyICsgXCIgZmx1c2hyZWc9XCIgKyByZXNwLmZsdXNocmVnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRklYTUU6IG5vIHdzc1NlcnZlciDvvIHvvIHvvIFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgblBob25lQ2ZnLmFvciA9IFwic2lwOlwiICsgblBob25lQ2ZnLnVzZXJOYW1lICsgJ0AnICsgblBob25lQ2ZnLmRvbWFpbjtcclxuICAgICAgICAgICAgblBob25lQ2ZnLmZvcmNlUnBvcnQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09IDgpIHtcclxuICAgICAgICAgICAgLy/mlrDnmoRhcGnmjqXlj6NcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+mHiuaUvuaXp+eahHNpbXBsZVVzZXJcclxuICAgICAgICBpZiAodGhpcy5zaW1wbGVVc2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGVsZXRlIG9sZCBzaW1wbGVVc2VyISFcIiwgdGhpcy5zaW1wbGVVc2VyKTtcclxuICAgICAgICAgICAgdGhpcy5zaW1wbGVVc2VyLmRpc2Nvbm5lY3QoKS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGVsZXRlIG9sZCBzaW1wbGVVc2VyIGRvbmUhIVwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE54d0NhbGwubGFzdEluc3RhbmNlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5zaW1wbGVVc2VyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/liJvlu7rmlrDnmoRzaW1wbGVVc2VyXHJcbiAgICAgICAgdGhpcy5jaXAgPSBuUGhvbmVDZmcuY2lwO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSBuUGhvbmVDZmcuZGlzcGxheU5hbWUgPyBuUGhvbmVDZmcuZGlzcGxheU5hbWUgOiBcIk5BXCI7XHJcbiAgICAgICAgdGhpcy5zaXBJZCA9IG5QaG9uZUNmZy5hdXRoTmFtZTtcclxuICAgICAgICB0aGlzLl9pc2RpZCA9IG5QaG9uZUNmZy5pc2RpZDtcclxuICAgICAgICB0aGlzLl9zZW5kc21zID0gblBob25lQ2ZnLnNlbmRzbXM7XHJcbiAgICAgICAgdGhpcy5zaW1wbGVVc2VyID0gdGhpcy5idWlsZFNpbXBsZVVzZXIoblBob25lQ2ZnKTtcclxuICAgICAgICBOeHdDYWxsLmxhc3RJbnN0YW5jZSA9IHRoaXMuc2ltcGxlVXNlcjtcclxuICAgICAgICAvL+WwneivleiHquWKqOi/nuaOpXdzc+acjeWKoeWZqFxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX0NPTk5FQ1RJTkc7XHJcbiAgICAgICAgdGhpcy5zaW1wbGVVc2VyLmNvbm5lY3QoKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic2ltcGxlVXNlci5jb25uZWN0LnRoZW4gZW50ZXJcIilcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcIm9uQ29ubmVjdE9LXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9DT05ORUNURUQ7XHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIHRvIHJlY2VpdmUgaW5ib3VuZCBjYWxscyAob3B0aW9uYWwpXHJcbiAgICAgICAgICAgIC8vIGxldCB4ID0gbmV3IDxSZWdpc3RlcmVyT3B0aW9ucz4oKTtcclxuICAgICAgICAgICAgLy8geC5leHBpcmVzID0gMjAwO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInNldCBSZWdpc3RlcmVyT3B0aW9ucyBleHBpcmVzPTIwMCxjaXA9XCIgKyB0aGlzLmNpcCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2ltcGxlVXNlci5yZWdpc3Rlcih7IGV4cGlyZXM6IDIwMCwgZXh0cmFIZWFkZXJzOiBbXCJYLU5YLVJlbW90ZVB1YklQOiBcIiArIHRoaXMuY2lwXSB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic2ltcGxlVXNlci5yZWdpc3Rlci50aGVuIGVudGVyXCIpXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX1JFR0lTVEVSSU5HO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNpbXBsZVVBU3RhdGUuVUFfRVJST1I7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFske3RoaXMuc2ltcGxlVXNlci5pZH1dIGZhaWxlZCB0byBjb25uZWN0YCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBhbGVydChcIkZhaWxlZCB0byBjb25uZWN0LlxcblwiICsgZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvlu7pTaW1wbGVVc2Vy5a+56LGhXHJcbiAgICAgKiBAcGFyYW0gc2lwQ29uZmlnIOWSjHNpcOi0puWPt+ebuOWFs+eahOmFjee9rlxyXG4gICAgICogQHJldHVybnMg5paw5Yib5bu655qEV2ViLlNpbXBsZVVzZXJcclxuICAgICAqL1xyXG4gICAgYnVpbGRTaW1wbGVVc2VyKHNpcENvbmZpZykge1xyXG4gICAgICAgIC8vIFNpbXBsZVVzZXIgb3B0aW9uc1xyXG4gICAgICAgIGxldCBvcHRpb25zID0gbnVsbDtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImRpc3BsYXlOYW1lPVwiICsgc2lwQ29uZmlnLmRpc3BsYXlOYW1lXHJcbiAgICAgICAgICAgICsgXCIgdXNlcm5hbWU9XCIgKyBzaXBDb25maWcudXNlck5hbWUgKyBcIiBhb3I9XCIgKyBzaXBDb25maWcuYW9yKTtcclxuICAgICAgICAvL254d0NhbGwgdmVyc2lvblxyXG4gICAgICAgIGxldCBueHdWZXIgPSBcIjIyMTAxMFwiO1xyXG4gICAgICAgIGxldCBueHdWZXJEZXRhaWwgPSBueHdWZXIgKyBcIl9cIiArIG9iamVjdElkKHRoaXMpOyAvLytcIl9cIitvYmplY3RJZChzaXBDb25maWcpOyAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnZpZGVvKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBkZWxlZ2F0ZTogdGhpcy5kZWxlZ2F0ZSxcclxuICAgICAgICAgICAgICAgIGFvcjogc2lwQ29uZmlnLmFvcixcclxuICAgICAgICAgICAgICAgIG1lZGlhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3RyYWludHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlbzogdGhpcy52aWRlb0xvY2FsRWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvOiB0aGlzLnZpZGVvUmVtb3RlRWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IHRoaXMuYXVkaW9FbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVzZXJBZ2VudE9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dMZXZlbDogdGhpcy5sb2dMZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogc2lwQ29uZmlnLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhY3ROYW1lOiBzaXBDb25maWcudXNlck5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmlhSG9zdDogc2lwQ29uZmlnLmRvbWFpbixcclxuICAgICAgICAgICAgICAgICAgICBjb250YWN0UGFyYW1zOiB7IFwidHJhbnNwb3J0XCI6IFwid3NzXCIsIFwibnh3XCI6IFwiVlwiICsgbnh3VmVyRGV0YWlsLCBcImlwc1wiOiB0aGlzLmxvY2FsSVBzLCBcImNpcFwiOiB0aGlzLmNpcCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJBZ2VudFN0cmluZzogXCJOWFcvXCIgKyBzaXBDb25maWcubnhVc2VyTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uUGFzc3dvcmQ6IHNpcENvbmZpZy5zZWNyZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvblVzZXJuYW1lOiBzaXBDb25maWcuYXV0aE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2lwRXh0ZW5zaW9uMTAwcmVsOiBTSVBFeHRlbnNpb24uU3VwcG9ydGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydE9wdGlvbnM6IHsgXCJzZXJ2ZXJcIjogc2lwQ29uZmlnLndzc1NlcnZlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJrZWVwQWxpdmVJbnRlcnZhbFwiOiAzMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb25uZWN0aW9uVGltZW91dFwiOiAxNSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmNlUnBvcnQ6IHNpcENvbmZpZy5mb3JjZVJwb3J0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgZGVsZWdhdGU6IHRoaXMuZGVsZWdhdGUsXHJcbiAgICAgICAgICAgICAgICBhb3I6IHNpcENvbmZpZy5hb3IsXHJcbiAgICAgICAgICAgICAgICBtZWRpYToge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlbzogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogdGhpcy5hdWRpb0VsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXNlckFnZW50T3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0xldmVsOiB0aGlzLmxvZ0xldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBzaXBDb25maWcuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFjdE5hbWU6IHNpcENvbmZpZy51c2VyTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICB2aWFIb3N0OiBzaXBDb25maWcuZG9tYWluLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhY3RQYXJhbXM6IHsgXCJ0cmFuc3BvcnRcIjogXCJ3c3NcIiwgXCJueHdcIjogXCJ2XCIgKyBueHdWZXJEZXRhaWwsIFwiaXBzXCI6IHRoaXMubG9jYWxJUHMsIFwiY2lwXCI6IHRoaXMuY2lwIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckFnZW50U3RyaW5nOiBcIk5YVy9cIiArIHNpcENvbmZpZy5ueFVzZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb25QYXNzd29yZDogc2lwQ29uZmlnLnNlY3JldCxcclxuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uVXNlcm5hbWU6IHNpcENvbmZpZy5hdXRoTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzaXBFeHRlbnNpb24xMDByZWw6IFNJUEV4dGVuc2lvbi5TdXBwb3J0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0T3B0aW9uczogeyBcInNlcnZlclwiOiBzaXBDb25maWcud3NzU2VydmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImtlZXBBbGl2ZUludGVydmFsXCI6IDMwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbm5lY3Rpb25UaW1lb3V0XCI6IDE1IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yY2VScG9ydDogc2lwQ29uZmlnLmZvcmNlUnBvcnRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9pbml0IHJlZ2lzdGVyZWRcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyZWQgPSAwO1xyXG4gICAgICAgIC8vIFNpbXBsZVVzZXIgY29uc3RydWN0aW9uXHJcbiAgICAgICAgY29uc3Qgc2ltcGxlVXNlciA9IG5ldyBXZWIuU2ltcGxlVXNlcihzaXBDb25maWcud3NzU2VydmVyLCBvcHRpb25zKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIm5ldyBzaW1wbGVVc2VyID0gXCIsIHNpbXBsZVVzZXIpO1xyXG4gICAgICAgIHJldHVybiBzaW1wbGVVc2VyO1xyXG4gICAgfVxyXG4gICAgLyoqIOajgOafpeaYr+WQpui/nuaOpeWIsHdzc+acjeWKoeWZqCAqL1xyXG4gICAgaXNDb25uZWN0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxlVXNlciA/IHRoaXMuc2ltcGxlVXNlci5pc0Nvbm5lY3RlZCgpIDogZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKiog5qOA5p+l5piv5ZCm5pyJ5rS75Yqo5ZG85Y+rICovXHJcbiAgICBpc0J1c3koKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnNpbXBsZVVzZXIgJiYgdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb24pID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqIOajgOafpeaYr+WQpuW3sue7j+azqOWGjOaIkOWKn+W5tuS4lOepuumXsiAqL1xyXG4gICAgaXNSZWFkeSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PSBTaW1wbGVVQVN0YXRlLlVBX1JFQURZO1xyXG4gICAgfVxyXG4gICAgLyoqIOaSreaUvumfs+S5kCAqL1xyXG4gICAgcGxheShhY3Rpb24sIHR5cGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIj4+PnBsYXk6IFwiLCBhY3Rpb24sIFwidHlwZT1cIiwgdHlwZSwgXCJwbGF5VG9uZT1cIiwgdGhpcy5wbGF5VG9uZSk7XHJcbiAgICAgICAgaWYgKChhY3Rpb24gPT0gJ2JlZ2luJykgfHwgKGFjdGlvbiA9PSAnc3RhcnQnKSkge1xyXG4gICAgICAgICAgICBsZXQgYXVkaW8gPSAnJztcclxuICAgICAgICAgICAgbGV0IGxvb3AgPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IGZsYWcgPSAwO1xyXG4gICAgICAgICAgICBhdWRpbyA9IHR5cGU7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09ICdyaW5naW4ud2F2Jykge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IFRvbmVGbGFnLlJJTkdJTjtcclxuICAgICAgICAgICAgICAgIGxvb3AgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ3JpbmdvdXQud2F2Jykge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IFRvbmVGbGFnLlJJTkdPVVQ7XHJcbiAgICAgICAgICAgICAgICBsb29wID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09ICdjb25uZWN0ZWQud2F2Jykge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IFRvbmVGbGFnLkNPTk5FQ1RFRDtcclxuICAgICAgICAgICAgICAgIGxvb3AgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09ICdoYW5ndXAud2F2Jykge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IFRvbmVGbGFnLkhBTkdVUDtcclxuICAgICAgICAgICAgICAgIGxvb3AgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09ICdvbmxpbmUud2F2Jykge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IFRvbmVGbGFnLk9OTElORTtcclxuICAgICAgICAgICAgICAgIGxvb3AgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZsYWcgPSBUb25lRmxhZy5DVVNUT007XHJcbiAgICAgICAgICAgICAgICBsb29wID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCI+Pj4gcGxheSBcIiwgZmxhZywgdHlwZSwgYXVkaW8sIGxvb3ApO1xyXG4gICAgICAgICAgICBpZiAoKHR5cGUgIT0gJycpICYmICh0aGlzLnBsYXlUb25lICYgZmxhZykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3RhcnQgcGxheSBcIiwgZmxhZywgdHlwZSwgYXVkaW8sIGxvb3ApOyAvLywgXCJhdWRpbz1cIiwgdGhpcy5wbGF5RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGF5RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheUVsZW1lbnQucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgdGhpcy5wbGF5RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBhdWRvUGF0aCA9IHRoaXMuY29uZmlnLmF1ZGlvU3JjUGF0aDtcclxuICAgICAgICAgICAgICAgIGlmIChhdWRvUGF0aCA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgYXVkb1BhdGggPSBcImF1ZGlvXCI7XHJcbiAgICAgICAgICAgICAgICAvL+aWh+S7tuWQjeS7pS7miJbogIUv5byA5aS077yM5piv5a6a5Yi26Lev5b6EXHJcbiAgICAgICAgICAgICAgICBsZXQgYXVkaW9GaWxlTmFtZSA9IGF1ZG9QYXRoICsgXCIvXCIgKyBhdWRpbztcclxuICAgICAgICAgICAgICAgIGlmIChhdWRpby5zdGFydHNXaXRoKCcuJykgfHwgYXVkaW8uc3RhcnRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9GaWxlTmFtZSA9IGF1ZGlvO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5RWxlbWVudCA9IG5ldyBBdWRpbyhhdWRpb0ZpbGVOYW1lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheUVsZW1lbnQubG9vcCA9IGxvb3A7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlFbGVtZW50Lm11dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheUVsZW1lbnQucGxheSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheUVsZW1lbnQubXV0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicGxheSBlcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKGFjdGlvbiA9PSAnZW5kJykgfHwgKGFjdGlvbiA9PSAnc3RvcCcpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYXlFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlFbGVtZW50LnBhdXNlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlFbGVtZW50Lm11dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGlzLnBsYXlFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5wbGF5RWxlbWVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDlj5Hotbflkbzlj6sgKi9cclxuICAgIHBsYWNlQ2FsbCh0YXJnZXQsIGhkcnMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInBsYWNlQ2FsbCBzdGF0ZT1cIiArIHRoaXMuc3RhdGUsIHRhcmdldCwgaGRycyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNpbXBsZVVzZXIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBTaW1wbGVVQVN0YXRlLlVBX1JFQURZKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX0NBTExJTkdfT1VUO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwicGxhY2VDYWxsXCIsIHRhcmdldCk7XHJcbiAgICAgICAgICAgIC8v5qOA5p+ldGFyZ2V055qEc2lwOuWSjEBcclxuICAgICAgICAgICAgaWYgKHRhcmdldC5zdWJzdHIoMCwgNCkgIT0gXCJzaXA6XCIpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IFwic2lwOlwiICsgdGFyZ2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuaW5kZXhPZihcIkBcIikgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIC8vRklYTUU6IG5lZWQgdG8gYmUgb3RoZXJzPz9cclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldCArIFwiQG54Y2xvdWQuY29tXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJwYWNlY2FsbCB3aXRoIGVhcmx5bWVkaWFcIik7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgc2VsZi5lYXJseUFuc3dlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgY2FsbE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0RGVsZWdhdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICBvbkFjY2VwdDogKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUG9zaXRpdmUgcmVzcG9uc2UgPSBcIiwgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c0luZm8gPSBcIjIwMCBPS1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb25SZWplY3Q6IChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5lZ2F0aXZlIHJlc3BvbnNlID0gXCIsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHsgbWVzc2FnZSB9ID0gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzSW5mbyA9IG1lc3NhZ2Uuc3RhdHVzQ29kZS50b1N0cmluZygpICsgXCIgXCIgKyBtZXNzYWdlLnJlYXNvblBocmFzZTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9uUHJvZ3Jlc3MgcmVzcG9uc2UgPSBcIiwgdHlwZW9mIHJlc3BvbnNlLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCB7bWVzc2FnZSxzZXNzaW9uLHByYWNrfSA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgeyBtZXNzYWdlIH0gPSByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXNJbmZvID0gbWVzc2FnZS5zdGF0dXNDb2RlLnRvU3RyaW5nKCkgKyBcIiBcIiArIG1lc3NhZ2UucmVhc29uUGhyYXNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2Vzc2lvbiA9IHJlc3BvbnNlLnNlc3Npb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib25Qcm9ncmVzcyBzZXNzaW9uPVwiLCBzZXNzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHVzQ29kZSA9PSAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib25Qcm9ncmVzcyAxMDAgdHJ5aW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2Uuc3RhdHVzQ29kZSA9PSAxODApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib25Qcm9ncmVzcyAxODAgUmluZ2luZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBzb3VuZEZpbGUgPSBhdWRpb0Jsb2JzLkVhcmx5TWVkaWFfRXVyb3BlYW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZihVc2VyTG9jYWxlKCkuaW5kZXhPZihcInVzXCIpID4gLTEpIHNvdW5kRmlsZSA9IGF1ZGlvQmxvYnMuRWFybHlNZWRpYV9VUztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmKFVzZXJMb2NhbGUoKS5pbmRleE9mKFwiZ2JcIikgPiAtMSkgc291bmRGaWxlID0gYXVkaW9CbG9icy5FYXJseU1lZGlhX1VLO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYoVXNlckxvY2FsZSgpLmluZGV4T2YoXCJhdVwiKSA+IC0xKSBzb3VuZEZpbGUgPSBhdWRpb0Jsb2JzLkVhcmx5TWVkaWFfQXVzdHJhbGlhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYoVXNlckxvY2FsZSgpLmluZGV4T2YoXCJqcFwiKSA+IC0xKSBzb3VuZEZpbGUgPSBhdWRpb0Jsb2JzLkVhcmx5TWVkaWFfSmFwYW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAvLyBQbGF5IEVhcmx5IE1lZGlhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkF1ZGlvOlwiLCBzb3VuZEZpbGUudXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBlYXJseU1lZGlhID0gbmV3IEF1ZGlvKHNvdW5kRmlsZS5ibG9iKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVhcmx5TWVkaWEucHJlbG9hZCA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWFybHlNZWRpYS5sb29wID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVhcmx5TWVkaWEub25jYW5wbGF5dGhyb3VnaCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAodHlwZW9mIGVhcmx5TWVkaWEuc2lua0lkICE9PSAndW5kZWZpbmVkJyAmJiBnZXRBdWRpb091dHB1dElEKCkgIT0gXCJkZWZhdWx0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZWFybHlNZWRpYS5zZXRTaW5rSWQoZ2V0QXVkaW9PdXRwdXRJRCgpKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZXQgc2lua0lkIHRvOlwiLCBnZXRBdWRpb091dHB1dElEKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCBub3QgYXBwbHkgc2V0U2lua0lkLlwiLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGVhcmx5TWVkaWEucGxheSgpLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy8gQXVkaW8gSXMgUGxheWluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gcGxheSBhdWRpbyBmaWxlLlwiLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmRhdGEuZWFybHlNZWRpYSA9IGVhcmx5TWVkaWE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobWVzc2FnZS5zdGF0dXNDb2RlID09PSAxODMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPT0gb25Qcm9ncmVzcyAxODMgQ2FsbCBQcm9ncmVzc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZWFybHlBbnN3ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBFYXJseSBNZWRpYSBIYW5kbGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYobWVzc2FnZS5ib2R5ICE9IFwiXCIgJiYgc2Vzc2lvbi5vZmZlciAmJiAhc2Vzc2lvbi5kaWFsb2cpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIENvbmZpcm0gdGhlIGRpYWxvZywgZXZlbnRob3VnaCBpdCdzIGEgcHJvdmlzaW9uYWwgYW5zd2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgaWYgKCFzZXNzaW9uLmNyZWF0ZURpYWxvZyhyZXNwb25zZSwgJ1VBQycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBjcmVhdGUgRGlhbG9nIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyB0aGlzIGVuc3VyZXMgdGhhdCAyMDAgd2lsbCBub3QgdHJ5IHRvIHNldCBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHNlc3Npb24uaGFzQW5zd2VyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBGb3JjZSB0aGUgc2Vzc2lvbiBzdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBzZXNzaW9uLnN0YXR1cyA9IFNlc3Npb24uQy5TVEFUVVNfRUFSTFlfTUVESUE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gU2V0IHRoZSBTRFAgZnJvbSB0aGUgcmVzcG9uc2UsIHNvIHRoZSBtZWRpYSBjYW4gY29ubmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIChBc3N1bWluZyB0aGF0IHRoZSByZXNwb25zZSBpcyBhIHZsaWQgU0RQKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKCFzZXNzaW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBjb25zb2xlLndhcm4oXCIhISEgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3Rvcnk9IFwiLCBzZXNzaW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBjb25zb2xlLndhcm4oXCIhISEgc2V0dXBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyPSBcIiwgc2Vzc2lvbi5zZXR1cFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIHNlc3Npb24uc2V0dXBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgc2Vzc2lvbi5jb25maXJtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyID0gc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeShzZXNzaW9uLCBzZXNzaW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLndhcm4oXCIhISEgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcj0gXCIsIHNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAoIXNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXREZXNjcmlwdGlvbihtZXNzYWdlLmJvZHkpLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIHNldCBTRFAgaW4gMTgzIHJlc3BvbnNlOiBcIiwgcmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpe2NvbnNvbGUud2FybihcIu+8ge+8ge+8gXNldERlc2NyaXB0aW9uIFwiKX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMTgxID0gQ2FsbCBpcyBCZWluZyBGb3J3YXJkZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDE4MiA9IENhbGwgaXMgcXVldWVkIChCdXN5IHNlcnZlciEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxOTkgPSBDYWxsIGlzIFRlcm1pbmF0ZWQgKEVhcmx5IERpYWxvZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoTWVzc2FnZU9iaklkKS5odG1sKHJlc3BvbnNlLnJlYXNvbl9waHJhc2UgKyBcIi4uLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib25Qcm9ncmVzcyBvdGhlcnMgXCIsIG1lc3NhZ2Uuc3RhdHVzQ29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3VzdG9tIFdlYiBob29rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmKHR5cGVvZiB3ZWJfaG9va19vbl9tb2RpZnkgIT09ICd1bmRlZmluZWQnKSB3ZWJfaG9va19vbl9tb2RpZnkoXCJwcm9ncmVzc1wiLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vIGVhcmx5TWVkaWEgOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50czoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW86IHRoaXMudmlkZW9cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vc2F2ZSBvcmRlcmlkICwgY3VycmVudCBoZHJzXHJcbiAgICAgICAgICAgIGlmICghaGRycylcclxuICAgICAgICAgICAgICAgIGhkcnMgPSBbXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2lwICYmIHRoaXMuY2lwLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGhkcnMucHVzaChcIlgtTlgtUmVtb3RlUHViSVA6IFwiICsgdGhpcy5jaXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9yZGVySWQgJiYgdGhpcy5vcmRlcklkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGhkcnMucHVzaChcIlgtT1JERVJJRDogXCIgKyB0aGlzLm9yZGVySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5qCH6K6w5p2l6Ieqd2ViY2FsbFxyXG4gICAgICAgICAgICBoZHJzLnB1c2goXCJYLWFjdGlvbnR5cGU6IDdcIik7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YUhkcnMgPSBoZHJzO1xyXG4gICAgICAgICAgICB0aGlzLnNpbXBsZVVzZXIuY2FsbCh0YXJnZXQsIHtcclxuICAgICAgICAgICAgICAgIGludml0ZVdpdGhvdXRTZHA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZWFybHlNZWRpYTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIC8vYWRkIGV4dHJhSGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgZXh0cmFIZWFkZXJzOiBoZHJzXHJcbiAgICAgICAgICAgIH0sIGNhbGxPcHRpb25zKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8v5ZyoY2FsbOaJp+ihjOWujOavle+8jOWNs+WQrOWIsHJpbmdvdXTlm57pk4Ppn7NcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheSgnc3RhcnQnLCAncmluZ291dC53YXYnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJwbGFjZUNhbGxPS1wiLCB0YXJnZXQpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5zdGF0ZSA9IFNpbXBsZVVBU3RhdGUuVUFfRVJST1I7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbJHt0aGlzLnNpbXBsZVVzZXIuaWR9XSBmYWlsZWQgdG8gcGxhY2UgY2FsbGApO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmV2ZW50cy5lbWl0KFwiZXJyb3JcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8v5b2T5YmN54q25oCB5LiN5a+577yM562J5b6FXHJcbiAgICAgICAgICAgIHRoaXMubmV4dFRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICAgICAgdGhpcy5uZXh0SGRycyA9IGhkcnM7XHJcbiAgICAgICAgICAgIHRoaXMubWFyaysrO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInBsYWNlQ2FsbFdhaXQgbmV4dFRhcmdldD1cIiwgdGhpcy5uZXh0VGFyZ2V0KTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcInBsYWNlQ2FsbFdhaXRcIiwgdGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5bqU562U5ZG85Y+r77yM5o6l6YCa5p2l55S1ICovXHJcbiAgICBhbnN3ZXJDYWxsKGhkcnMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImFuc3dlckNhbGwgbm93IC4uLiBcIiwgdGhpcy5zaW1wbGVVc2VyKTtcclxuICAgICAgICBpZiAoKHRoaXMuc3RhdGUgPT0gU2ltcGxlVUFTdGF0ZS5VQV9JTkNPTUlORykgJiYgdGhpcy5zaW1wbGVVc2VyKSB7XHJcbiAgICAgICAgICAgIC8vJiYgdGhpcy5zaW1wbGVVc2VyICYmIHRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNpbXBsZVVzZXIuYWN0aXZlU2Vzc2lvbiA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRklYTUU6IGFuc3dlckNhbGwgd2l0aCB1bmRlZmluZWQgYWN0aXZlU2Vzc2lvbiFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9zYXZlIGN1cnJlbnQgaGRyc1xyXG4gICAgICAgICAgICBpZiAoIWhkcnMpXHJcbiAgICAgICAgICAgICAgICBoZHJzID0gW107XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9yZGVySWQgJiYgdGhpcy5vcmRlcklkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGhkcnMucHVzaChcIlgtT1JERVJJRDogXCIgKyB0aGlzLm9yZGVySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YUhkcnMgPSBoZHJzO1xyXG4gICAgICAgICAgICBsZXQgb3B0ID0ge307XHJcbiAgICAgICAgICAgIG9wdC5leHRyYUhlYWRlcnMgPSBoZHJzO1xyXG4gICAgICAgICAgICBvcHQuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBpY2VHYXRoZXJpbmdUaW1lb3V0OiA1MDBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJhbnN3ZXIgb3B0PVwiLG9wdCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2ltcGxlVXNlci5hbnN3ZXIob3B0KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJhbnN3ZXJDYWxsIG9wdCBPS1wiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX1RBTEtJTkc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwiYW5zd2VyXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX0VSUk9SO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgWyR7dGhpcy5zaW1wbGVVc2VyLmlkfV0gZmFpbGVkIHRvIGFuc3dlciBjYWxsYCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KFwiRmFpbGVkIHRvIGFuc3dlciBjYWxsLlxcblwiICsgZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRklYTUU6IGZvcmNlIGFuc3dlckNhbGwhXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNpbXBsZVVzZXIuYW5zd2VyKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYW5zd2VyQ2FsbCBPS1wiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX1RBTEtJTkc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwiYW5zd2VyXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX0VSUk9SO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgWyR7dGhpcy5zaW1wbGVVc2VyLmlkfV0gZmFpbGVkIHRvIGFuc3dlciBjYWxsYCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KFwiRmFpbGVkIHRvIGFuc3dlciBjYWxsLlxcblwiICsgZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5ouS57ud5ZG85Y+r77yM5oyC5pat5p2l55S1ICovXHJcbiAgICBkZWNsaW5lQ2FsbCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImRlY2xpbmVDYWxsIG5vdyAuLi4gXCIsIHRoaXMuc2ltcGxlVXNlcik7XHJcbiAgICAgICAgaWYgKCh0aGlzLnN0YXRlID09IFNpbXBsZVVBU3RhdGUuVUFfSU5DT01JTkcpXHJcbiAgICAgICAgICAgICYmIHRoaXMuc2ltcGxlVXNlciAmJiB0aGlzLnNpbXBsZVVzZXIuYWN0aXZlU2Vzc2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLnNpbXBsZVVzZXIuZGVjbGluZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9UQUxLSU5HO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImRlY2xpbmVcIiwgXCJcIik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwiZXJyb3JcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNpbXBsZVVBU3RhdGUuVUFfRVJST1I7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbJHt0aGlzLnNpbXBsZVVzZXIuaWR9XSBmYWlsZWQgdG8gZGVjbGluZSBjYWxsYCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KFwiRmFpbGVkIHRvIGRlY2xpbmUgY2FsbC5cXG5cIiArIGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOaMguaWreWRvOWPqyAqL1xyXG4gICAgaGFuZ3VwQ2FsbCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImhhbmd1cENhbGwgdHJ5Li4uIFwiLCB0aGlzLnNpbXBsZVVzZXIsIHRoaXMubGFzdFNlc3Npb25UcnlpbmcpO1xyXG4gICAgICAgIGlmICh0aGlzLnNpbXBsZVVzZXIpIHtcclxuICAgICAgICAgICAgLy9OT1RFOiBvbkNhbGxIYW5ndXAgaXMgcXVpY2tlciB0aGFuIHByb21pc2UgcmVzb2x2ZWRcclxuICAgICAgICAgICAgbGV0IGxzaWQgPSBcIlwiO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgIGxzaWQgPSB0aGlzLnNpbXBsZVVzZXIuYWN0aXZlU2Vzc2lvbi5pZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX0NBTExfRU5ESU5HO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaW1wbGVVc2VyLmhhbmd1cCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic2VuZGluZyBoYW5ndXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImhhbmd1cFwiLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJlcnJvclwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNpbXBsZVVBU3RhdGUuVUFfRVJST1I7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgWyR7dGhpcy5zaW1wbGVVc2VyLmlkfV0gZmFpbGVkIHRvIGhhbmd1cCBjYWxsYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoXCJGYWlsZWQgdG8gaGFuZ3VwIGNhbGwuXFxuXCIgKyBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2lmIGFscmVhZHkgaGFuZ3VwLCByZXNldCBsYXN0XHJcbiAgICAgICAgICAgIGlmIChsc2lkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxhc3RTZXNzaW9uVHJ5aW5nICYmIHRoaXMubGFzdFNlc3Npb25UcnlpbmcuaWQgPT0gbHNpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaGFuZ3VwIE9LLiBjbGVhciBsYXN0U2Vzc2lvblRyeWluZyBcIiArIGxzaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdFNlc3Npb25UcnlpbmcgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vaWYgbm8gYWN0aXZlICwgdHJ5IGhhbmRsZSBsYXN0XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxhc3RTZXNzaW9uVHJ5aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZpeG1lOiB0cnkgbGFzdFNlc3Npb25UcnlpbmcuLi4gXCIsIHRoaXMubGFzdFNlc3Npb25Ucnlpbmcuc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdFNlc3Npb25Ucnlpbmcuc3RhdGUgIT0gU2Vzc2lvblN0YXRlLlRlcm1pbmF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RTZXNzaW9uVHJ5aW5nLmJ5ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiISEhISEgQllFIGxhc3RTZXNzaW9uVHJ5aW5nIGVycm9yXCIgKyBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL2NsZWFyIGl0IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0U2Vzc2lvblRyeWluZyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmHiuaUvuWqkuS9k1xyXG4gICAgICovXHJcbiAgICBjbGVhbnVwTWVkaWEoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnNyY09iamVjdCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnZpZGVvUmVtb3RlRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvUmVtb3RlRWxlbWVudC5zcmNPYmplY3QgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvUmVtb3RlRWxlbWVudC5wYXVzZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy52aWRlb0xvY2FsRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvTG9jYWxFbGVtZW50LnNyY09iamVjdCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMudmlkZW9Mb2NhbEVsZW1lbnQucGF1c2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5pat5byAd3Nz6L+e5o6lICovXHJcbiAgICBkaXNjb25uZWN0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNpbXBsZVVzZXIpIHtcclxuICAgICAgICAgICAgdmFyIGRpc09iaiA9IHRoaXMuc2ltcGxlVXNlcjtcclxuICAgICAgICAgICAgdGhpcy5zaW1wbGVVc2VyID0gbnVsbDtcclxuICAgICAgICAgICAgZGlzT2JqLmRpc2Nvbm5lY3QoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImRpc2Nvbm5lY3RcIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9JTklUO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX0VSUk9SO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgWyR7dGhpcy5zaW1wbGVVc2VyLmlkfV0gZmFpbGVkIHRvIGRpc2Nvbm5lY3RgKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoXCJGYWlsZWQgdG8gZGlzY29ubmVjdC5cXG5cIiArIGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIHNlbmQgVU5SRUdJU1RFUiAqL1xyXG4gICAgdW5yZWdpc3RlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5zaW1wbGVVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2ltcGxlVXNlci51bnJlZ2lzdGVyKCkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVucmVnaXN0ZXIgZG9uZSFcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiB0cnkgUkVHSVNURVIgKi9cclxuICAgIHJlZ2lzdGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNpbXBsZVVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zaW1wbGVVc2VyLnJlZ2lzdGVyKCkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlZ2lzdGVyIGRvbmUhXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogaGFuZGxlIE1FU1NBR0UgKi9cclxuICAgIGhhbmRsZU1lc3NhZ2UobWVzc2FnZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShtZXNzYWdlKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuY21kID0gXCJ1bnJlZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGVsYXkgPSBkYXRhLmRlbGF5IHx8IDEwMDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYmVnaW4gdW5yZWdpc3RlciEgZGVsYXk9XCIgKyBkZWxheSk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXIoKTtcclxuICAgICAgICAgICAgICAgIH0sIGRlbGF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOWPkemAgURUTUbmjInplK4gKi9cclxuICAgIHNlbmREVE1GKHRvbmVzdHIpIHtcclxuICAgICAgICAvL2NvbnN0IHRvbmUgPSBidXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgaWYgKHRvbmVzdHIgJiYgKHRvbmVzdHIubGVuZ3RoID4gMCkpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b25lc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdG9uZSA9IHRvbmVzdHJbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndHJ5IHNlbmREVE1GICcgKyB0b25lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2ltcGxlVXNlci5zZW5kRFRNRih0b25lKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2VuZERUTUYgb2s6JyArIHRvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJkdG1mXCIsIHRvbmUpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbmREVE1GIGVycjonICsgdG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOWRvOWPq+S/neaMge+8jOWvueaWueWQrOS4jeWIsOacrOaWueivtOivneW5tuS4lOWQrG11c2ljIG9uIGhvbGQgKi9cclxuICAgIGhvbGRDYWxsKGNoZWNrZWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImhvbGRDYWxsXCIgKyBjaGVja2VkXHJcbiAgICAgICAgICAgICsgXCIgZm9yIHNlc3Npb25cIiwgdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb24pO1xyXG4gICAgICAgIGlmICghdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb24pXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwiaG9sZFwiLCBcInRyeVwiKTtcclxuICAgICAgICAgICAgdGhpcy5zaW1wbGVVc2VyLmhvbGQoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImhvbGRcIiwgXCJva1wiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJlcnJvclwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9FUlJPUjtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFske3RoaXMuc2ltcGxlVXNlci5pZH1dIGZhaWxlZCB0byBob2xkIGNhbGxgKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoXCJGYWlsZWQgdG8gaG9sZCBjYWxsLlxcblwiICsgZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJ1bmhvbGRcIiwgXCJ0cnlcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2ltcGxlVXNlci51bmhvbGQoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcInVuaG9sZFwiLCBcIm9rXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTaW1wbGVVQVN0YXRlLlVBX0VSUk9SO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgWyR7dGhpcy5zaW1wbGVVc2VyLmlkfV0gZmFpbGVkIHRvIHVuaG9sZCBjYWxsYCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KFwiRmFpbGVkIHRvIHVuaG9sZCBjYWxsLlxcblwiICsgZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5pys5Zyw6bqm5YWL6aOO6Z2Z6Z+zICovXHJcbiAgICBtdXRlQ2FsbChjaGVja2VkKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJtdXRlQ2FsbFwiICsgY2hlY2tlZFxyXG4gICAgICAgICAgICArIFwiIGZvciBzZXNzaW9uXCIsIHRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uKTtcclxuICAgICAgICBpZiAoIXRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcIm11dGVcIiwgXCJvblwiKTtcclxuICAgICAgICAgICAgdGhpcy5zaW1wbGVVc2VyLm11dGUoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2ltcGxlVXNlci5pc011dGVkKCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAvL3RoaXMuZXZlbnRzLmVtaXQoXCJlcnJvclwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU2ltcGxlVUFTdGF0ZS5VQV9FUlJPUjtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFske3RoaXMuc2ltcGxlVXNlci5pZH1dIGZhaWxlZCB0byBtdXRlIGNhbGxgKTtcclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KFwiRmFpbGVkIHRvIG11dGUgY2FsbC5cXG5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJtdXRlXCIsIFwib2ZmXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNpbXBsZVVzZXIudW5tdXRlKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNpbXBsZVVzZXIuaXNNdXRlZCgpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmV2ZW50cy5lbWl0KFwiZXJyb3JcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNpbXBsZVVBU3RhdGUuVUFfRVJST1I7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbJHt0aGlzLnNpbXBsZVVzZXIuaWR9XSBmYWlsZWQgdG8gdW5tdXRlIGNhbGxgKTtcclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KFwiRmFpbGVkIHRvIHVubXV0ZSBjYWxsLlxcblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDmnKzlnLBhdWRpb+aOp+S7tumdmemfs++8jOWQrOS4jeWIsOWvueaWueWjsOmfsyAqL1xyXG4gICAgc2lsZW50Q2FsbChjaGVja2VkKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzaWxlbnRDYWxsXCIgKyBjaGVja2VkXHJcbiAgICAgICAgICAgICsgXCIgZm9yIHNlc3Npb25cIiwgdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb24pO1xyXG4gICAgICAgIGlmICghdGhpcy5zaW1wbGVVc2VyLmFjdGl2ZVNlc3Npb24pXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5hdWRpb0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcInNpbGVudFwiLCBjaGVja2VkID8gXCJvblwiIDogXCJvZmZcIik7XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50Lm11dGVkID0gY2hlY2tlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog6K6+572u6bqm5YWL6aOO5pS+6Z+z6Z+z6YePLHZvbHVtZSBbMCwxXeaIluiAhSgxLDEwMF0gKi9cclxuICAgIHNldFZvbHVtZSh2b2x1bWUpIHtcclxuICAgICAgICB2b2x1bWUgPSBNYXRoLmFicyh2b2x1bWUpO1xyXG4gICAgICAgIGlmICh2b2x1bWUgPiAxMDApIHtcclxuICAgICAgICAgICAgdm9sdW1lID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodm9sdW1lID4gMSkge1xyXG4gICAgICAgICAgICB2b2x1bWUgPSB2b2x1bWUgLyAxMDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInNldCBWb2x1bWU9XCIgKyB2b2x1bWUpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2ltcGxlVXNlci5hY3RpdmVTZXNzaW9uKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwidm9sdW1lXCIsIHZvbHVtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnZvbHVtZSA9IHZvbHVtZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogd2ViUlRD5byC5bi477yM5ZG85Y+r5bey57uP6YeK5pS+77yM5L2G5pivc2lw5ZKMcnRw6L+Y5ZyoICovXHJcbiAgICBjbGVhckV4Y2VwdGlvbigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNsZWFyRXhjZXB0aW9uXCIpO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9IFNpbXBsZVVBU3RhdGUuVUFfVEFMS0lORykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0U2Vzc2lvblRyeWluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0U2Vzc2lvblRyeWluZy5ieWUoKS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImJ5ZSBsYXN0U2Vzc2lvblRyeWluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RTZXNzaW9uVHJ5aW5nID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaW1wbGVVc2VyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgfSksIDEwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnh3Q2FsbC5qcy5tYXAiLCJpbXBvcnQgTnh3Q2FsbCBmcm9tIFwiLlwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOeHdTdGF0aWMge1xyXG4gICAgY29uc3RydWN0b3IodXNlciwgcGFzcywgdHlwZSA9IDMpIHtcclxuICAgICAgICBsZXQgcHJvZmlsZSA9IHtcclxuICAgICAgICAgICAgbnh1c2VyOiB1c2VyLCBueHBhc3M6IHBhc3MsIG54dHlwZTogdHlwZSxcclxuICAgICAgICAgICAgLy8gbG9nTGV2ZWw6IFwid2FyblwiLFxyXG4gICAgICAgICAgICAvLyBhdWRpb0VsZW1lbnRJZDogXCJyZW1vdGVBdWRpb1wiLCBwbGF5RWxlbWVudElkOiBcInBsYXlBdWRpb1wiXHJcbiAgICAgICAgfTtcclxuICAgICAgICBOeHdTdGF0aWMubnh3Q2FsbCA9IG5ldyBOeHdDYWxsKHByb2ZpbGUpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTnh3U3RhdGljIGluaXRlZCEhIVwiKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBwbGFjZUNhbGwodGFyZ2V0LCBoZHJzKSB7XHJcbiAgICAgICAgcmV0dXJuIE54d1N0YXRpYy5ueHdDYWxsLnBsYWNlQ2FsbCh0YXJnZXQsIGhkcnMpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGhhbmd1cENhbGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIE54d1N0YXRpYy5ueHdDYWxsLmhhbmd1cENhbGwoKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhbnN3ZXJDYWxsKGhkcnMpIHtcclxuICAgICAgICByZXR1cm4gTnh3U3RhdGljLm54d0NhbGwuYW5zd2VyQ2FsbChoZHJzKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBob2xkQ2FsbChvbm9mZikge1xyXG4gICAgICAgIHJldHVybiBOeHdTdGF0aWMubnh3Q2FsbC5ob2xkQ2FsbChvbm9mZik7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgc2VuZERUTUYodG9uZSkge1xyXG4gICAgICAgIHJldHVybiBOeHdTdGF0aWMubnh3Q2FsbC5zZW5kRFRNRih0b25lKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBzZXRWb2x1bWUodm9sdW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIE54d1N0YXRpYy5ueHdDYWxsLnNldFZvbHVtZSh2b2x1bWUpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIG11dGVDYWxsKG9ub2ZmKSB7XHJcbiAgICAgICAgcmV0dXJuIE54d1N0YXRpYy5ueHdDYWxsLm11dGVDYWxsKG9ub2ZmKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBzaWxlbnRDYWxsKG9ub2ZmKSB7XHJcbiAgICAgICAgcmV0dXJuIE54d1N0YXRpYy5ueHdDYWxsLnNpbGVudENhbGwob25vZmYpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGRpc2Nvbm5lY3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIE54d1N0YXRpYy5ueHdDYWxsLmRpc2Nvbm5lY3QoKTtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1OeHdTdGF0aWMuanMubWFwIiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cclxuaW1wb3J0IE54d0NhbGwgZnJvbSBcIi4vbnh3Q2FsbFwiO1xyXG5leHBvcnQgZGVmYXVsdCBOeHdDYWxsO1xyXG5pbXBvcnQgTnh3U3RhdGljIGZyb20gXCIuL054d1N0YXRpY1wiO1xyXG5leHBvcnQgeyBOeHdTdGF0aWMgfTtcclxuLy8gaW1wb3J0IHsgTnh3QXBwQ29uZmlnIH0gZnJvbSBcIi4vbnh3LXR5cGVzXCI7XHJcbi8vIGV4cG9ydCB7IE54d0FwcENvbmZpZyB9O1xyXG5leHBvcnQgKiBmcm9tIFwiLi9ueHctdHlwZXNcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vbnh3LXV0aWxzXCI7XHJcbmltcG9ydCB7IGdldEpzU3JjUGFyYW0gfSBmcm9tIFwiLi9ueHctdXRpbHNcIjtcclxuLy8gdmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XHJcbi8vIHZhciBjdXJyZW50U2NyaXB0ID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdO1xyXG4vLyB2YXIgcSA9IGN1cnJlbnRTY3JpcHQuc3JjLmluZGV4T2YoXCI/XCIpXHJcbi8vIGNvbnNvbGUubG9nKFwicT1cIiwgcSlcclxuLy8gY29uc29sZS5sb2coXCJzdHI9XCIsIGN1cnJlbnRTY3JpcHQuc3JjLnN1YnN0cihxICsgMSkpXHJcbmNvbnN0IG54dXNlciA9IGdldEpzU3JjUGFyYW0oXCJueHVzZXJcIik7XHJcbmNvbnN0IG54cGFzcyA9IGdldEpzU3JjUGFyYW0oXCJueHBhc3NcIik7XHJcbmNvbnN0IG54dHlwZSA9IGdldEpzU3JjUGFyYW0oXCJueHR5cGVcIikgfHwgXCIzXCI7XHJcbmNvbnNvbGUubG9nKFwiTlhXMTogbnh1c2VyPVwiLCBueHVzZXIsIFwibnhwYXNzPVwiLCBueHBhc3MsIFwibnh0eXBlPVwiLCBueHR5cGUpO1xyXG5sZXQgeCA9IG51bGw7XHJcbmlmIChueHVzZXIgJiYgbnhwYXNzKSB7XHJcbiAgICB4ID0gbmV3IE54d1N0YXRpYyhueHVzZXIsIG54cGFzcywgcGFyc2VJbnQobnh0eXBlKSk7XHJcbiAgICBjb25zb2xlLmxvZyhcIng9XCIsIHgpO1xyXG59XHJcbmxldCBfX25leHRfb2JqaWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAlIDEwMDAwMDA7XHJcbmV4cG9ydCBmdW5jdGlvbiBvYmplY3RJZChvYmopIHtcclxuICAgIGlmIChvYmogPT0gbnVsbClcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIGlmIChvYmouX19vYmpfaWQgPT0gbnVsbClcclxuICAgICAgICBvYmouX19vYmpfaWQgPSBfX25leHRfb2JqaWQrKztcclxuICAgIHJldHVybiBvYmouX19vYmpfaWQ7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFIgPSB0eXBlb2YgUmVmbGVjdCA9PT0gJ29iamVjdCcgPyBSZWZsZWN0IDogbnVsbFxudmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICdmdW5jdGlvbidcbiAgPyBSLmFwcGx5XG4gIDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5KHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpIHtcbiAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7XG4gIH1cblxudmFyIFJlZmxlY3RPd25LZXlzXG5pZiAoUiAmJiB0eXBlb2YgUi5vd25LZXlzID09PSAnZnVuY3Rpb24nKSB7XG4gIFJlZmxlY3RPd25LZXlzID0gUi5vd25LZXlzXG59IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KVxuICAgICAgLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkpO1xuICB9O1xufSBlbHNlIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gUHJvY2Vzc0VtaXRXYXJuaW5nKHdhcm5pbmcpIHtcbiAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4od2FybmluZyk7XG59XG5cbnZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbm1vZHVsZS5leHBvcnRzLm9uY2UgPSBvbmNlO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxudmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuZnVuY3Rpb24gY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcikge1xuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlciwgJ2RlZmF1bHRNYXhMaXN0ZW5lcnMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdudW1iZXInIHx8IGFyZyA8IDAgfHwgTnVtYmVySXNOYU4oYXJnKSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgJy4nKTtcbiAgICB9XG4gICAgZGVmYXVsdE1heExpc3RlbmVycyA9IGFyZztcbiAgfVxufSk7XG5cbkV2ZW50RW1pdHRlci5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7XG4gICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufTtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKG4pIHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXJJc05hTihuKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIG4gKyAnLicpO1xuICB9XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gX2dldE1heExpc3RlbmVycyh0aGF0KSB7XG4gIGlmICh0aGF0Ll9tYXhMaXN0ZW5lcnMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIHJldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnM7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkge1xuICByZXR1cm4gX2dldE1heExpc3RlbmVycyh0aGlzKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSkge1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gIHZhciBkb0Vycm9yID0gKHR5cGUgPT09ICdlcnJvcicpO1xuXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZClcbiAgICBkb0Vycm9yID0gKGRvRXJyb3IgJiYgZXZlbnRzLmVycm9yID09PSB1bmRlZmluZWQpO1xuICBlbHNlIGlmICghZG9FcnJvcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAoZG9FcnJvcikge1xuICAgIHZhciBlcjtcbiAgICBpZiAoYXJncy5sZW5ndGggPiAwKVxuICAgICAgZXIgPSBhcmdzWzBdO1xuICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3dcbiAgICAgIC8vIHVwIGluIE5vZGUncyBvdXRwdXQgaWYgdGhpcyByZXN1bHRzIGluIGFuIHVuaGFuZGxlZCBleGNlcHRpb24uXG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9XG4gICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpO1xuICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgdGhyb3cgZXJyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICB9XG5cbiAgdmFyIGhhbmRsZXIgPSBldmVudHNbdHlwZV07XG5cbiAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBSZWZsZWN0QXBwbHkobGlzdGVuZXJzW2ldLCB0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHtcbiAgdmFyIG07XG4gIHZhciBldmVudHM7XG4gIHZhciBleGlzdGluZztcblxuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0LmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGVcbiAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3RcbiAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICAgIH1cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTtcbiAgfVxuXG4gIGlmIChleGlzdGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgICArK3RhcmdldC5fZXZlbnRzQ291bnQ7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9XG4gICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIH0gZWxzZSBpZiAocHJlcGVuZCkge1xuICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gICAgbSA9IF9nZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcbiAgICBpZiAobSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSAmJiAhZXhpc3Rpbmcud2FybmVkKSB7XG4gICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlO1xuICAgICAgLy8gTm8gZXJyb3IgY29kZSBmb3IgdGhpcyBzaW5jZSBpdCBpcyBhIFdhcm5pbmdcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmxlbmd0aCArICcgJyArIFN0cmluZyh0eXBlKSArICcgbGlzdGVuZXJzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnaW5jcmVhc2UgbGltaXQnKTtcbiAgICAgIHcubmFtZSA9ICdNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmcnO1xuICAgICAgdy5lbWl0dGVyID0gdGFyZ2V0O1xuICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgIHcuY291bnQgPSBleGlzdGluZy5sZW5ndGg7XG4gICAgICBQcm9jZXNzRW1pdFdhcm5pbmcodyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9O1xuXG5mdW5jdGlvbiBvbmNlV3JhcHBlcigpIHtcbiAgaWYgKCF0aGlzLmZpcmVkKSB7XG4gICAgdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLndyYXBGbik7XG4gICAgdGhpcy5maXJlZCA9IHRydWU7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCwgYXJndW1lbnRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgc3RhdGUgPSB7IGZpcmVkOiBmYWxzZSwgd3JhcEZuOiB1bmRlZmluZWQsIHRhcmdldDogdGFyZ2V0LCB0eXBlOiB0eXBlLCBsaXN0ZW5lcjogbGlzdGVuZXIgfTtcbiAgdmFyIHdyYXBwZWQgPSBvbmNlV3JhcHBlci5iaW5kKHN0YXRlKTtcbiAgd3JhcHBlZC5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICBzdGF0ZS53cmFwRm4gPSB3cmFwcGVkO1xuICByZXR1cm4gd3JhcHBlZDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcbiAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRPbmNlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgICAgdGhpcy5wcmVwZW5kTGlzdGVuZXIodHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4vLyBFbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWYgYW5kIG9ubHkgaWYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyO1xuXG4gICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmIChsaXN0ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fCBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMClcbiAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgZXZlbnRzW3R5cGVdID0gbGlzdFswXTtcblxuICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBMSUZPIG9yZGVyXG4gICAgICAgIGZvciAoaSA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5mdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7XG4gIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuICBpZiAoZXZsaXN0ZW5lciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBbXTtcblxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpXG4gICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdO1xuXG4gIHJldHVybiB1bndyYXAgP1xuICAgIHVud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKSA6IGFycmF5Q2xvbmUoZXZsaXN0ZW5lciwgZXZsaXN0ZW5lci5sZW5ndGgpO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIHRydWUpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcblxuICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChldmxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbn07XG5cbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7XG4gIHZhciBjb3B5ID0gbmV3IEFycmF5KG4pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSlcbiAgICBjb3B5W2ldID0gYXJyW2ldO1xuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKylcbiAgICBsaXN0W2luZGV4XSA9IGxpc3RbaW5kZXggKyAxXTtcbiAgbGlzdC5wb3AoKTtcbn1cblxuZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikge1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkge1xuICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gb25jZShlbWl0dGVyLCBuYW1lKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gZXJyb3JMaXN0ZW5lcihlcnIpIHtcbiAgICAgIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIobmFtZSwgcmVzb2x2ZXIpO1xuICAgICAgcmVqZWN0KGVycik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZXIoKSB7XG4gICAgICBpZiAodHlwZW9mIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBlcnJvckxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUoW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICB9O1xuXG4gICAgZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIHJlc29sdmVyLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgaWYgKG5hbWUgIT09ICdlcnJvcicpIHtcbiAgICAgIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGVycm9yTGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlcihlbWl0dGVyLCBoYW5kbGVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgJ2Vycm9yJywgaGFuZGxlciwgZmxhZ3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCBuYW1lLCBsaXN0ZW5lciwgZmxhZ3MpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgIGVtaXR0ZXIub25jZShuYW1lLCBsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVtaXR0ZXIub24obmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gRXZlbnRUYXJnZXQgZG9lcyBub3QgaGF2ZSBgZXJyb3JgIGV2ZW50IHNlbWFudGljcyBsaWtlIE5vZGVcbiAgICAvLyBFdmVudEVtaXR0ZXJzLCB3ZSBkbyBub3QgbGlzdGVuIGZvciBgZXJyb3JgIGV2ZW50cyBoZXJlLlxuICAgIGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBmdW5jdGlvbiB3cmFwTGlzdGVuZXIoYXJnKSB7XG4gICAgICAvLyBJRSBkb2VzIG5vdCBoYXZlIGJ1aWx0aW4gYHsgb25jZTogdHJ1ZSB9YCBzdXBwb3J0IHNvIHdlXG4gICAgICAvLyBoYXZlIHRvIGRvIGl0IG1hbnVhbGx5LlxuICAgICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIHdyYXBMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICBsaXN0ZW5lcihhcmcpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgZW1pdHRlcik7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=